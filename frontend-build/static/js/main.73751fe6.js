/*! For license information please see main.73751fe6.js.LICENSE.txt */
(()=>{var e={137:(e,t,r)=>{"use strict";r.d(t,{jB:()=>u,lG:()=>c,lb:()=>d});var n=r(7051),s=r(7815),a=r(9850),i=r(7914),l=r(5684),o=r(3966);function c(){return(0,s.BY)("globalEventProcessors",()=>[])}function d(e){c().push(e)}function u(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new l.T2((l,c)=>{const d=e[s];if(null===t||"function"!==typeof d)l(t);else{const m=d((0,n.A)({},t),r);o.T&&d.id&&null===m&&i.vF.log('Event processor "'.concat(d.id,'" dropped event')),(0,a.Qg)(m)?m.then(t=>u(e,t,r,s+1).then(l)).then(null,c):u(e,m,r,s+1).then(l).then(null,c)}})}},677:function(e){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var s=r[n]={exports:{},id:n,loaded:!1};return e[n].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t){"use strict";function r(e){var t=e.getContext("2d"),r=e.width,n=e.height,s=t.getImageData(0,0,r,n).data,l=a(!0,r,n,s),o=a(!1,r,n,s),c=i(!0,r,n,s),d=i(!1,r,n,s)-c+1,u=o-l+1,m=t.getImageData(c,l,d,u);return e.width=d,e.height=u,t.clearRect(0,0,d,u),t.putImageData(m,0,0),e}function n(e,t,r,n){return{red:n[4*(r*t+e)],green:n[4*(r*t+e)+1],blue:n[4*(r*t+e)+2],alpha:n[4*(r*t+e)+3]}}function s(e,t,r,s){return n(e,t,r,s).alpha}function a(e,t,r,n){for(var a=e?1:-1,i=e?0:r-1;e?i<r:i>-1;i+=a)for(var l=0;l<t;l++)if(s(l,i,t,n))return i;return null}function i(e,t,r,n){for(var a=e?1:-1,i=e?0:t-1;e?i<t:i>-1;i+=a)for(var l=0;l<r;l++)if(s(i,l,t,n))return i;return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}])},733:(e,t,r)=>{"use strict";r.d(t,{L:()=>x,l:()=>p});var n=r(7051),s=r(7914),a=r(6566),i=r(5873),l=r(6559),o=r(3966),c=r(3589),d=r(8831),u=r(4130),m=r(2791),h=r(7795);class p{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class x{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._traceId=e.traceId||(0,a.eJ)(),this._spanId=e.spanId||(0,a.eJ)().substring(16),this._startTime=e.startTimestamp||(0,l.zf)(),this.tags=e.tags?(0,n.A)({},e.tags):{},this.data=e.data?(0,n.A)({},e.data):{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes((0,n.A)({[d.JD]:e.origin||"manual",[d.uT]:e.op},e.attributes)),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),void 0!==e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?(0,n.A)({},e.measurements):{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[d.uT]}set op(e){this.setAttribute(d.uT,e)}get origin(){return this._attributes[d.JD]}set origin(e){this.setAttribute(d.JD,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:r}=this;return{spanId:e,traceId:t,traceFlags:r?m.aO:m.CC}}startChild(e){const t=new x((0,n.A)((0,n.A)({},e),{},{parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId}));t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const r=(0,u.z)(this);if(t.transaction=r,o.T&&r){const n=e&&e.op||"< unknown op >",a=(0,m.et)(t).description||"< unknown name >",i=r.spanContext().spanId,l="[Tracing] Starting '".concat(n,"' span on transaction '").concat(a,"' (").concat(i,").");s.vF.log(l),this._logMessage=l}return t}setTag(e,t){return this.tags=(0,n.A)((0,n.A)({},this.tags),{},{[e]:t}),this}setData(e,t){return this.data=(0,n.A)((0,n.A)({},this.data),{},{[e]:t}),this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach(t=>this.setAttribute(t,e[t]))}setStatus(e){return this._status=e,this}setHttpStatus(e){return(0,h.N8)(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=(0,u.z)(this);if(o.T&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&s.vF.log(e.replace("Starting","Finishing"))}this._endTime=(0,m.cI)(e)}toTraceparent(){return(0,m.Qh)(this)}toContext(){return(0,i.Ce)({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return(0,m.kX)(this)}getSpanJSON(){return(0,i.Ce)({data:this._getData(),description:this._name,op:this._attributes[d.uT],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[d.JD],_metrics_summary:(0,c.g)(this),profile_id:this._attributes[d.E1],exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,r=Object.keys(e).length>0,s=Object.keys(t).length>0;if(r||s)return r&&s?(0,n.A)((0,n.A)({},e),t):r?e:t}}},736:(e,t,r)=>{"use strict";r.d(t,{$N:()=>o,Hd:()=>i,NX:()=>c,xE:()=>d});var n=r(9850);const s=(0,r(7815).VZ)(),a=80;function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"<unknown>";try{let r=e;const n=5,s=[];let i=0,o=0;const c=" > ",d=c.length;let u;const m=Array.isArray(t)?t:t.keyAttrs,h=!Array.isArray(t)&&t.maxStringLength||a;for(;r&&i++<n&&(u=l(r,m),!("html"===u||i>1&&o+s.length*d+u.length>=h));)s.push(u),o+=u.length,r=r.parentNode;return s.reverse().join(c)}catch(r){return"<unknown>"}}function l(e,t){const r=e,a=[];let i,l,o,c,d;if(!r||!r.tagName)return"";if(s.HTMLElement&&r instanceof HTMLElement&&r.dataset&&r.dataset.sentryComponent)return r.dataset.sentryComponent;a.push(r.tagName.toLowerCase());const u=t&&t.length?t.filter(e=>r.getAttribute(e)).map(e=>[e,r.getAttribute(e)]):null;if(u&&u.length)u.forEach(e=>{a.push("[".concat(e[0],'="').concat(e[1],'"]'))});else if(r.id&&a.push("#".concat(r.id)),i=r.className,i&&(0,n.Kg)(i))for(l=i.split(/\s+/),d=0;d<l.length;d++)a.push(".".concat(l[d]));const m=["aria-label","type","name","title","alt"];for(d=0;d<m.length;d++)o=m[d],c=r.getAttribute(o),c&&a.push("[".concat(o,'="').concat(c,'"]'));return a.join("")}function o(){try{return s.document.location.href}catch(e){return""}}function c(e){return s.document&&s.document.querySelector?s.document.querySelector(e):null}function d(e){if(!s.HTMLElement)return null;let t=e;for(let r=0;r<5;r++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}},751:(e,t,r)=>{"use strict";function n(){return"undefined"!==typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function s(){return"npm"}r.d(t,{Z:()=>n,e:()=>s})},816:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(2284);function s(e){var t=function(e,t){if("object"!=(0,n.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=(0,n.A)(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,n.A)(t)?t:t+""}},847:function(e,t){var r,n,s;n=[],r=function e(){var t,r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:{},n=!r.document&&!!r.postMessage,s=r.IS_PAPA_WORKER||!1,a={},i=0,l={};function o(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=y(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new h(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){var n=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<n){let t=this._config.newline;t||(a=this._config.quoteChar||'"',t=this._handle.guessLineEndings(e,a)),e=[...e.split(t).slice(n)].join(t)}this.isFirstChunk&&N(this._config.beforeFirstChunk)&&void 0!==(a=this._config.beforeFirstChunk(e))&&(e=a),this.isFirstChunk=!1,this._halted=!1,n=this._partialLine+e;var a=(this._partialLine="",this._handle.parse(n,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=a.meta.cursor,this._finished||(this._partialLine=n.substring(e-this._baseIndex),this._baseIndex=e),a&&a.data&&(this._rowCount+=a.data.length),n=this._finished||this._config.preview&&this._rowCount>=this._config.preview,s)r.postMessage({results:a,workerId:l.WORKER_ID,finished:n});else if(N(this._config.chunk)&&!t){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=a=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!n||!N(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),n||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(e){N(this._config.error)?this._config.error(e):s&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=l.RemoteChunkSize),o.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e,r=this._config.downloadRequestHeaders;for(e in r)t.setRequestHeader(e,r[e])}var s;this._config.chunkSize&&(s=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+s));try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(e=>null!==(e=e.getResponseHeader("Content-Range"))?parseInt(e.substring(e.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){e=t.statusText||e,this._sendError(new Error(e))}}function d(e){(e=e||{}).chunkSize||(e.chunkSize=l.LocalChunkSize),o.call(this,e);var t,r,n="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,n?((t=new FileReader).onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,s=(this._config.chunkSize&&(s=Math.min(this._start+this._config.chunkSize,this._input.size),e=r.call(e,this._start,s)),t.readAsText(e,this._config.encoding));n||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function u(e){var t;o.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){var e,r;if(!this._finished)return e=this._config.chunkSize,t=e?(r=t.substring(0,e),t.substring(e)):(r=t,""),this._finished=!t,this.parseChunk(r)}}function m(e){o.call(this,e=e||{});var t=[],r=!0,n=!1;this.pause=function(){o.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){o.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=b(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=b(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=b(function(){this._streamCleanUp(),n=!0,this._streamData("")},this),this._streamCleanUp=b(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function h(e){var t,r,n,s,a=Math.pow(2,53),i=-a,o=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,c=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,d=this,u=0,m=0,h=!1,f=!1,g=[],v={data:[],errors:[],meta:{}};function b(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function j(){if(v&&n&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),n=!1),e.skipEmptyLines&&(v.data=v.data.filter(function(e){return!b(e)})),w()){if(v)if(Array.isArray(v.data[0])){for(var t=0;w()&&t<v.data.length;t++)v.data[t].forEach(r);v.data.splice(0,1)}else v.data.forEach(r);function r(t,r){N(e.transformHeader)&&(t=e.transformHeader(t,r)),g.push(t)}}function s(t,r){for(var n=e.header?{}:[],s=0;s<t.length;s++){var l=s,d=t[s];d=((t,r)=>(t=>(e.dynamicTypingFunction&&void 0===e.dynamicTyping[t]&&(e.dynamicTyping[t]=e.dynamicTypingFunction(t)),!0===(e.dynamicTyping[t]||e.dynamicTyping)))(t)?"true"===r||"TRUE"===r||"false"!==r&&"FALSE"!==r&&((e=>{if(o.test(e)&&(e=parseFloat(e),i<e&&e<a))return 1})(r)?parseFloat(r):c.test(r)?new Date(r):""===r?null:r):r)(l=e.header?s>=g.length?"__parsed_extra":g[s]:l,d=e.transform?e.transform(d,l):d),"__parsed_extra"===l?(n[l]=n[l]||[],n[l].push(d)):n[l]=d}return e.header&&(s>g.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+s,m+r):s<g.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+s,m+r)),n}var d;v&&(e.header||e.dynamicTyping||e.transform)&&(d=1,!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(s),d=v.data.length):v.data=s(v.data,0),e.header&&v.meta&&(v.meta.fields=g),m+=d)}function w(){return e.header&&0===g.length}function S(e,t,r,n){e={type:e,code:t,message:r},void 0!==n&&(e.row=n),v.errors.push(e)}N(e.step)&&(s=e.step,e.step=function(t){v=t,w()?j():(j(),0!==v.data.length&&(u+=t.data.length,e.preview&&u>e.preview?r.abort():(v.data=v.data[0],s(v,d))))}),this.parse=function(s,a,i){var o=e.quoteChar||'"';return e.newline||(e.newline=this.guessLineEndings(s,o)),n=!1,e.delimiter?N(e.delimiter)&&(e.delimiter=e.delimiter(s),v.meta.delimiter=e.delimiter):((o=((t,r,n,s,a)=>{var i,o,c,d;a=a||[",","\t","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var u=0;u<a.length;u++){for(var m,h=a[u],p=0,f=0,g=0,v=(c=void 0,new x({comments:s,delimiter:h,newline:r,preview:10}).parse(t)),y=0;y<v.data.length;y++)n&&b(v.data[y])?g++:(f+=m=v.data[y].length,void 0===c?c=m:0<m&&(p+=Math.abs(m-c),c=m));0<v.data.length&&(f/=v.data.length-g),(void 0===o||p<=o)&&(void 0===d||d<f)&&1.99<f&&(o=p,i=h,d=f)}return{successful:!!(e.delimiter=i),bestDelimiter:i}})(s,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=o.bestDelimiter:(n=!0,e.delimiter=l.DefaultDelimiter),v.meta.delimiter=e.delimiter),o=y(e),e.preview&&e.header&&o.preview++,t=s,r=new x(o),v=r.parse(t,a,i),j(),h?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return h},this.pause=function(){h=!0,r.abort(),t=N(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){d.streamer._halted?(h=!1,d.streamer.parseChunk(t,!0)):setTimeout(d.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,r.abort(),v.meta.aborted=!0,N(e.complete)&&e.complete(v),t=""},this.guessLineEndings=function(e,t){e=e.substring(0,1048576),t=new RegExp(p(t)+"([^]*?)"+p(t),"gm");var r=(e=e.replace(t,"")).split("\r");if(e=1<(t=e.split("\n")).length&&t[0].length<r[0].length,1===r.length||e)return"\n";for(var n=0,s=0;s<r.length;s++)"\n"===r[s][0]&&n++;return n>=r.length/2?"\r\n":"\r"}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x(e){var t=(e=e||{}).delimiter,r=e.newline,n=e.comments,s=e.step,a=e.preview,i=e.fastMode,o=null,c=!1,d=null==e.quoteChar?'"':e.quoteChar,u=d;if(void 0!==e.escapeChar&&(u=e.escapeChar),("string"!=typeof t||-1<l.BAD_DELIMITERS.indexOf(t))&&(t=","),n===t)throw new Error("Comment character same as delimiter");!0===n?n="#":("string"!=typeof n||-1<l.BAD_DELIMITERS.indexOf(n))&&(n=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var m=0,h=!1;this.parse=function(l,x,f){if("string"!=typeof l)throw new Error("Input must be a string");var g=l.length,v=t.length,y=r.length,b=n.length,j=N(s),w=[],S=[],A=[],T=m=0;if(!l)return M();if(i||!1!==i&&-1===l.indexOf(d)){for(var C=l.split(r),E=0;E<C.length;E++){if(A=C[E],m+=A.length,E!==C.length-1)m+=r.length;else if(f)return M();if(!n||A.substring(0,b)!==n){if(j){if(w=[],P(A.split(t)),U(),h)return M()}else P(A.split(t));if(a&&a<=E)return w=w.slice(0,a),M(!0)}}return M()}for(var D=l.indexOf(t,m),k=l.indexOf(r,m),R=new RegExp(p(u)+p(d),"g"),_=l.indexOf(d,m);;)if(l[m]===d)for(_=m,m++;;){if(-1===(_=l.indexOf(d,_+1)))return f||S.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:w.length,index:m}),L();if(_===g-1)return L(l.substring(m,_).replace(R,d));if(d===u&&l[_+1]===u)_++;else if(d===u||0===_||l[_-1]!==u){-1!==D&&D<_+1&&(D=l.indexOf(t,_+1));var I=O(-1===(k=-1!==k&&k<_+1?l.indexOf(r,_+1):k)?D:Math.min(D,k));if(l.substr(_+1+I,v)===t){A.push(l.substring(m,_).replace(R,d)),l[m=_+1+I+v]!==d&&(_=l.indexOf(d,m)),D=l.indexOf(t,m),k=l.indexOf(r,m);break}if(I=O(k),l.substring(_+1+I,_+1+I+y)===r){if(A.push(l.substring(m,_).replace(R,d)),F(_+1+I+y),D=l.indexOf(t,m),_=l.indexOf(d,m),j&&(U(),h))return M();if(a&&w.length>=a)return M(!0);break}S.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:w.length,index:m}),_++}}else if(n&&0===A.length&&l.substring(m,m+b)===n){if(-1===k)return M();m=k+y,k=l.indexOf(r,m),D=l.indexOf(t,m)}else if(-1!==D&&(D<k||-1===k))A.push(l.substring(m,D)),m=D+v,D=l.indexOf(t,m);else{if(-1===k)break;if(A.push(l.substring(m,k)),F(k+y),j&&(U(),h))return M();if(a&&w.length>=a)return M(!0)}return L();function P(e){w.push(e),T=m}function O(e){var t=0;return-1!==e&&(e=l.substring(_+1,e))&&""===e.trim()?e.length:t}function L(e){return f||(void 0===e&&(e=l.substring(m)),A.push(e),m=g,P(A),j&&U()),M()}function F(e){m=e,P(A),A=[],k=l.indexOf(r,m)}function M(n){if(e.header&&!x&&w.length&&!c){var s=w[0],a=Object.create(null),i=new Set(s);let t=!1;for(let r=0;r<s.length;r++){let n=s[r];if(a[n=N(e.transformHeader)?e.transformHeader(n,r):n]){let e,l=a[n];for(;e=n+"_"+l,l++,i.has(e););i.add(e),s[r]=e,a[n]++,t=!0,(o=null===o?{}:o)[e]=n}else a[n]=1,s[r]=n;i.add(n)}t&&console.warn("Duplicate headers found and renamed."),c=!0}return{data:w,errors:S,meta:{delimiter:t,linebreak:r,aborted:h,truncated:!!n,cursor:T+(x||0),renamedHeaders:o}}}function U(){s(M()),w=[],S=[]}},this.abort=function(){h=!0},this.getCharIndex=function(){return m}}function f(e){var t=e.data,r=a[t.workerId],n=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var s={abort:function(){n=!0,g(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(N(r.userStep)){for(var i=0;i<t.results.data.length&&(r.userStep({data:t.results.data[i],errors:t.results.errors,meta:t.results.meta},s),!n);i++);delete t.results}else N(r.userChunk)&&(r.userChunk(t.results,s,t.file),delete t.results)}t.finished&&!n&&g(t.workerId,t.results)}function g(e,t){var r=a[e];N(r.userComplete)&&r.userComplete(t),r.terminate(),delete a[e]}function v(){throw new Error("Not implemented.")}function y(e){if("object"!=typeof e||null===e)return e;var t,r=Array.isArray(e)?[]:{};for(t in e)r[t]=y(e[t]);return r}function b(e,t){return function(){e.apply(t,arguments)}}function N(e){return"function"==typeof e}return l.parse=function(t,n){var s=(n=n||{}).dynamicTyping||!1;if(N(s)&&(n.dynamicTypingFunction=s,s={}),n.dynamicTyping=s,n.transform=!!N(n.transform)&&n.transform,!n.worker||!l.WORKERS_SUPPORTED)return s=null,l.NODE_STREAM_INPUT,"string"==typeof t?(t=(e=>65279!==e.charCodeAt(0)?e:e.slice(1))(t),s=new(n.download?c:u)(n)):!0===t.readable&&N(t.read)&&N(t.on)?s=new m(n):(r.File&&t instanceof File||t instanceof Object)&&(s=new d(n)),s.stream(t);(s=(()=>{var t;return!!l.WORKERS_SUPPORTED&&(t=(()=>{var t=r.URL||r.webkitURL||null,n=e.toString();return l.BLOB_URL||(l.BLOB_URL=t.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",n,")();"],{type:"text/javascript"})))})(),(t=new r.Worker(t)).onmessage=f,t.id=i++,a[t.id]=t)})()).userStep=n.step,s.userChunk=n.chunk,s.userComplete=n.complete,s.userError=n.error,n.step=N(n.step),n.chunk=N(n.chunk),n.complete=N(n.complete),n.error=N(n.error),delete n.worker,s.postMessage({input:t,config:n,workerId:s.id})},l.unparse=function(e,t){var r=!1,n=!0,s=",",a="\r\n",i='"',o=i+i,c=!1,d=null,u=!1,m=((()=>{if("object"==typeof t){if("string"!=typeof t.delimiter||l.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(s=t.delimiter),"boolean"!=typeof t.quotes&&"function"!=typeof t.quotes&&!Array.isArray(t.quotes)||(r=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(i=t.quoteChar),"boolean"==typeof t.header&&(n=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");d=t.columns}void 0!==t.escapeChar&&(o=t.escapeChar+i),t.escapeFormulae instanceof RegExp?u=t.escapeFormulae:"boolean"==typeof t.escapeFormulae&&t.escapeFormulae&&(u=/^[=+\-@\t\r].*$/)}})(),new RegExp(p(i),"g"));if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return h(null,e,c);if("object"==typeof e[0])return h(d||Object.keys(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||d),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),h(e.fields||[],e.data||[],c);throw new Error("Unable to serialize unrecognized input");function h(e,t,r){var i="",l=("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),o=!Array.isArray(t[0]);if(l&&n){for(var c=0;c<e.length;c++)0<c&&(i+=s),i+=x(e[c],c);0<t.length&&(i+=a)}for(var d=0;d<t.length;d++){var u=(l?e:t[d]).length,m=!1,h=l?0===Object.keys(t[d]).length:0===t[d].length;if(r&&!l&&(m="greedy"===r?""===t[d].join("").trim():1===t[d].length&&0===t[d][0].length),"greedy"===r&&l){for(var p=[],f=0;f<u;f++){var g=o?e[f]:f;p.push(t[d][g])}m=""===p.join("").trim()}if(!m){for(var v=0;v<u;v++){0<v&&!h&&(i+=s);var y=l&&o?e[v]:v;i+=x(t[d][y],v)}d<t.length-1&&(!r||0<u&&!h)&&(i+=a)}}return i}function x(e,t){var n,a;return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(a=!1,u&&"string"==typeof e&&u.test(e)&&(e="'"+e,a=!0),n=e.toString().replace(m,o),(a=a||!0===r||"function"==typeof r&&r(e,t)||Array.isArray(r)&&r[t]||((e,t)=>{for(var r=0;r<t.length;r++)if(-1<e.indexOf(t[r]))return!0;return!1})(n,l.BAD_DELIMITERS)||-1<n.indexOf(s)||" "===n.charAt(0)||" "===n.charAt(n.length-1))?i+n+i:n)}},l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\ufeff",l.BAD_DELIMITERS=["\r","\n",'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!n&&!!r.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=x,l.ParserHandle=h,l.NetworkStreamer=c,l.FileStreamer=d,l.StringStreamer=u,l.ReadableStreamStreamer=m,r.jQuery&&((t=r.jQuery).fn.parse=function(e){var n=e.config||{},s=[];return this.each(function(e){if("INPUT"!==t(this).prop("tagName").toUpperCase()||"file"!==t(this).attr("type").toLowerCase()||!r.FileReader||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)s.push({file:this.files[a],inputElem:this,instanceConfig:t.extend({},n)})}),a(),this;function a(){if(0===s.length)N(e.complete)&&e.complete();else{var r,n,a,o,c=s[0];if(N(e.before)){var d=e.before(c.file,c.inputElem);if("object"==typeof d){if("abort"===d.action)return r="AbortError",n=c.file,a=c.inputElem,o=d.reason,void(N(e.error)&&e.error({name:r},n,a,o));if("skip"===d.action)return void i();"object"==typeof d.config&&(c.instanceConfig=t.extend(c.instanceConfig,d.config))}else if("skip"===d)return void i()}var u=c.instanceConfig.complete;c.instanceConfig.complete=function(e){N(u)&&u(e,c.file,c.inputElem),i()},l.parse(c.file,c.instanceConfig)}}function i(){s.splice(0,1),a()}}),s&&(r.onmessage=function(e){e=e.data,void 0===l.WORKER_ID&&e&&(l.WORKER_ID=e.workerId),"string"==typeof e.input?r.postMessage({workerId:l.WORKER_ID,results:l.parse(e.input,e.config),finished:!0}):(r.File&&e.input instanceof File||e.input instanceof Object)&&(e=l.parse(e.input,e.config))&&r.postMessage({workerId:l.WORKER_ID,results:e,finished:!0})}),(c.prototype=Object.create(o.prototype)).constructor=c,(d.prototype=Object.create(o.prototype)).constructor=d,(u.prototype=Object.create(u.prototype)).constructor=u,(m.prototype=Object.create(o.prototype)).constructor=m,l},void 0===(s="function"===typeof r?r.apply(t,n):r)||(e.exports=s)},997:(e,t,r)=>{"use strict";r.d(t,{Rg:()=>d,e2:()=>c});var n=r(7051),s=r(6566),a=r(5873),i=r(7018),l=r(4130),o=r(2791);function c(e,t){const{fingerprint:r,span:c,breadcrumbs:d,sdkProcessingMetadata:u}=t;!function(e,t){const{extra:r,tags:s,user:i,contexts:l,level:o,transactionName:c}=t,d=(0,a.Ce)(r);d&&Object.keys(d).length&&(e.extra=(0,n.A)((0,n.A)({},d),e.extra));const u=(0,a.Ce)(s);u&&Object.keys(u).length&&(e.tags=(0,n.A)((0,n.A)({},u),e.tags));const m=(0,a.Ce)(i);m&&Object.keys(m).length&&(e.user=(0,n.A)((0,n.A)({},m),e.user));const h=(0,a.Ce)(l);h&&Object.keys(h).length&&(e.contexts=(0,n.A)((0,n.A)({},h),e.contexts));o&&(e.level=o);c&&(e.transaction=c)}(e,t),c&&function(e,t){e.contexts=(0,n.A)({trace:(0,o.kX)(t)},e.contexts);const r=(0,l.z)(t);if(r){e.sdkProcessingMetadata=(0,n.A)({dynamicSamplingContext:(0,i.k)(t)},e.sdkProcessingMetadata);const s=(0,o.et)(r).description;s&&(e.tags=(0,n.A)({transaction:s},e.tags))}}(e,c),function(e,t){e.fingerprint=e.fingerprint?(0,s.k9)(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,r),function(e,t){const r=[...e.breadcrumbs||[],...t];e.breadcrumbs=r.length?r:void 0}(e,d),function(e,t){e.sdkProcessingMetadata=(0,n.A)((0,n.A)({},e.sdkProcessingMetadata),t)}(e,u)}function d(e,t){const{extra:r,tags:s,user:a,contexts:i,level:l,sdkProcessingMetadata:o,breadcrumbs:c,fingerprint:d,eventProcessors:m,attachments:h,propagationContext:p,transactionName:x,span:f}=t;u(e,"extra",r),u(e,"tags",s),u(e,"user",a),u(e,"contexts",i),u(e,"sdkProcessingMetadata",o),l&&(e.level=l),x&&(e.transactionName=x),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),m.length&&(e.eventProcessors=[...e.eventProcessors,...m]),h.length&&(e.attachments=[...e.attachments,...h]),e.propagationContext=(0,n.A)((0,n.A)({},e.propagationContext),p)}function u(e,t,r){if(r&&Object.keys(r).length){e[t]=(0,n.A)({},e[t]);for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[t][n]=r[n])}}},1043:(e,t,r)=>{"use strict";r.d(t,{l:()=>i});var n=r(4977),s=r(9827),a=r(8658);function i(){(0,n.U)(),(0,a.wD)()&&function(){const t=(0,s.EU)();if(!t.__SENTRY__)return;const r={mongodb:()=>new((0,a.fj)(e,"./node/integrations/mongo").Mongo),mongoose:()=>new((0,a.fj)(e,"./node/integrations/mongo").Mongo),mysql:()=>new((0,a.fj)(e,"./node/integrations/mysql").Mysql),pg:()=>new((0,a.fj)(e,"./node/integrations/postgres").Postgres)},n=Object.keys(r).filter(e=>!!(0,a.Vw)(e)).map(e=>{try{return r[e]()}catch(t){return}}).filter(e=>e);n.length>0&&(t.__SENTRY__.integrations=[...t.__SENTRY__.integrations||[],...n])}()}e=r.hmd(e)},1352:(e,t,r)=>{"use strict";var n=r(7119);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},1538:(e,t,r)=>{"use strict";r.d(t,{De:()=>u,hF:()=>i,yD:()=>d});var n=r(6874),s=r(9850),a=r(7914);const i="baggage",l="sentry-",o=/^sentry-/,c=8192;function d(e){if(!(0,s.Kg)(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((e,t)=>{const r=m(t);for(const n of Object.keys(r))e[n]=r[n];return e},{});else{if(!e)return;t=m(e)}const r=Object.entries(t).reduce((e,t)=>{let[r,n]=t;if(r.match(o)){e[r.slice(l.length)]=n}return e},{});return Object.keys(r).length>0?r:void 0}function u(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce((e,t,r)=>{let[s,i]=t;const l="".concat(encodeURIComponent(s),"=").concat(encodeURIComponent(i)),o=0===r?l:"".concat(e,",").concat(l);return o.length>c?(n.T&&a.vF.warn("Not adding key: ".concat(s," with val: ").concat(i," to baggage header due to exceeding baggage size limits.")),e):o},"")}(Object.entries(e).reduce((e,t)=>{let[r,n]=t;return n&&(e["".concat(l).concat(r)]=n),e},{}))}function m(e){return e.split(",").map(e=>e.split("=").map(e=>decodeURIComponent(e.trim()))).reduce((e,t)=>{let[r,n]=t;return e[r]=n,e},{})}},1731:(e,t,r)=>{"use strict";r.d(t,{L:()=>i});var n=r(7815),s=r(9712);let a=null;function i(e){const t="error";(0,s.s5)(t,e),(0,s.AS)(t,l)}function l(){a=n.OW.onerror,n.OW.onerror=function(e,t,r,n,i){const l={column:n,error:i,line:r,msg:e,url:t};return(0,s.aj)("error",l),!(!a||a.__SENTRY_LOADER__)&&a.apply(this,arguments)},n.OW.onerror.__SENTRY_INSTRUMENTED__=!0}},1761:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,s=e[n];if(!(0<a(s,t)))break e;e[n]=t,e[r]=s,r=n}}function n(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,s=e.length,i=s>>>1;n<i;){var l=2*(n+1)-1,o=e[l],c=l+1,d=e[c];if(0>a(o,r))c<s&&0>a(d,o)?(e[n]=d,e[c]=r,n=c):(e[n]=o,e[l]=r,n=l);else{if(!(c<s&&0>a(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,h=3,p=!1,x=!1,f=!1,g="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=n(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,r(c,t)}t=n(d)}}function N(e){if(f=!1,b(e),!x)if(null!==n(c))x=!0,I(j);else{var t=n(d);null!==t&&P(N,t.startTime-e)}}function j(e,r){x=!1,f&&(f=!1,v(T),T=-1),p=!0;var a=h;try{for(b(r),m=n(c);null!==m&&(!(m.expirationTime>r)||e&&!D());){var i=m.callback;if("function"===typeof i){m.callback=null,h=m.priorityLevel;var l=i(m.expirationTime<=r);r=t.unstable_now(),"function"===typeof l?m.callback=l:m===n(c)&&s(c),b(r)}else s(c);m=n(c)}if(null!==m)var o=!0;else{var u=n(d);null!==u&&P(N,u.startTime-r),o=!1}return o}finally{m=null,h=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,S=!1,A=null,T=-1,C=5,E=-1;function D(){return!(t.unstable_now()-E<C)}function k(){if(null!==A){var e=t.unstable_now();E=e;var r=!0;try{r=A(!0,e)}finally{r?w():(S=!1,A=null)}}else S=!1}if("function"===typeof y)w=function(){y(k)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,_=R.port2;R.port1.onmessage=k,w=function(){_.postMessage(null)}}else w=function(){g(k,0)};function I(e){A=e,S||(S=!0,w())}function P(e,r){T=g(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){x||p||(x=!0,I(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},t.unstable_scheduleCallback=function(e,s,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>i?(e.sortIndex=a,r(d,e),null===n(c)&&e===n(d)&&(f?(v(T),T=-1):f=!0,P(N,a-i))):(e.sortIndex=l,r(c,e),x||p||(x=!0,I(j))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}},1942:(e,t,r)=>{e.exports=r(3488)()},2049:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,f={};function g(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||p}function v(){}function y(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var b=y.prototype=new v;b.constructor=y,x(b,g.prototype),b.isPureReactComponent=!0;var N=Array.isArray,j=Object.prototype.hasOwnProperty,w={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var s,a={},i=null,l=null;if(null!=t)for(s in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)j.call(t,s)&&!S.hasOwnProperty(s)&&(a[s]=t[s]);var o=arguments.length-2;if(1===o)a.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps)void 0===a[s]&&(a[s]=o[s]);return{$$typeof:r,type:e,key:i,ref:l,props:a,_owner:w.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function D(e,t,s,a,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o=!1;if(null===e)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case r:case n:o=!0}}if(o)return i=i(o=e),e=""===a?"."+E(o,0):a,N(i)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),D(i,t,s,"",function(e){return e})):null!=i&&(T(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,s+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(o=0,a=""===a?".":a+":",N(e))for(var c=0;c<e.length;c++){var d=a+E(l=e[c],c);o+=D(l,t,s,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(l=e.next()).done;)o+=D(l=l.value,t,s,d=a+E(l,c++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function k(e,t,r){if(null==e)return e;var n=[],s=0;return D(e,n,"","",function(e){return t.call(r,e,s++)}),n}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var _={current:null},I={transition:null},P={ReactCurrentDispatcher:_,ReactCurrentBatchConfig:I,ReactCurrentOwner:w};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:k,forEach:function(e,t,r){k(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return k(e,function(){t++}),t},toArray:function(e){return k(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=s,t.Profiler=i,t.PureComponent=y,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=x({},e.props),a=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)j.call(t,c)&&!S.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==o?o[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:r,type:e.type,key:a,ref:i,props:s,_owner:l}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return _.current.useCallback(e,t)},t.useContext=function(e){return _.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return _.current.useDeferredValue(e)},t.useEffect=function(e,t){return _.current.useEffect(e,t)},t.useId=function(){return _.current.useId()},t.useImperativeHandle=function(e,t,r){return _.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return _.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.current.useMemo(e,t)},t.useReducer=function(e,t,r){return _.current.useReducer(e,t,r)},t.useRef=function(e){return _.current.useRef(e)},t.useState=function(e){return _.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return _.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return _.current.useTransition()},t.version="18.3.1"},2284:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{A:()=>n})},2551:e=>{function t(e,t){var r=e.length,n=new Array(r),s={},a=r,i=function(e){for(var t=new Map,r=0,n=e.length;r<n;r++){var s=e[r];t.has(s[0])||t.set(s[0],new Set),t.has(s[1])||t.set(s[1],new Set),t.get(s[0]).add(s[1])}return t}(t),l=function(e){for(var t=new Map,r=0,n=e.length;r<n;r++)t.set(e[r],r);return t}(e);for(t.forEach(function(e){if(!l.has(e[0])||!l.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});a--;)s[a]||o(e[a],a,new Set);return n;function o(e,t,a){if(a.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(m){c=""}throw new Error("Cyclic dependency"+c)}if(!l.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!s[t]){s[t]=!0;var d=i.get(e)||new Set;if(t=(d=Array.from(d)).length){a.add(e);do{var u=d[--t];o(u,l.get(u),a)}while(t);a.delete(e)}n[--r]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,r=0,n=e.length;r<n;r++){var s=e[r];t.add(s[0]),t.add(s[1])}return Array.from(t)}(e),e)},e.exports.array=t},2654:(e,t,r)=>{"use strict";var n=r(9950),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,a={},c=null,d=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,n)&&!o.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:s,type:e,key:c,ref:d,props:a,_owner:l.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},2791:(e,t,r)=>{"use strict";r.d(t,{CC:()=>i,Qh:()=>c,aO:()=>l,cI:()=>d,et:()=>m,kX:()=>o,pK:()=>h});var n=r(5873),s=r(6559),a=r(4150);const i=0,l=1;function o(e){const{spanId:t,traceId:r}=e.spanContext(),{data:s,op:a,parent_span_id:i,status:l,tags:o,origin:c}=m(e);return(0,n.Ce)({data:s,op:a,parent_span_id:i,span_id:t,status:l,tags:o,trace_id:r,origin:c})}function c(e){const{traceId:t,spanId:r}=e.spanContext(),n=h(e);return(0,a.TC)(t,r,n)}function d(e){return"number"===typeof e?u(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?u(e.getTime()):(0,s.zf)()}function u(e){return e>9999999999?e/1e3:e}function m(e){return function(e){return"function"===typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"===typeof e.toJSON?e.toJSON():{}}function h(e){const{traceFlags:t}=e.spanContext();return Boolean(t&l)}},2816:e=>{const t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,r=e=>e.match(t)||[],n=e=>e[0].toUpperCase()+e.slice(1),s=(e,t)=>r(e).join(t).toLowerCase(),a=e=>r(e).reduce((e,t)=>"".concat(e).concat(e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()),"");e.exports={words:r,upperFirst:n,camelCase:a,pascalCase:e=>n(a(e)),snakeCase:e=>s(e,"_"),kebabCase:e=>s(e,"-"),sentenceCase:e=>n(s(e," ")),titleCase:e=>r(e).map(n).join(" ")}},3435:(e,t,r)=>{"use strict";r.d(t,{r:()=>i});var n=r(7815),s=r(9712);let a=null;function i(e){const t="unhandledrejection";(0,s.s5)(t,e),(0,s.AS)(t,l)}function l(){a=n.OW.onunhandledrejection,n.OW.onunhandledrejection=function(e){const t=e;return(0,s.aj)("unhandledrejection",t),!(a&&!a.__SENTRY_LOADER__)||a.apply(this,arguments)},n.OW.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}},3488:(e,t,r)=>{"use strict";var n=r(3959);function s(){}function a(){}a.resetWarningCache=s,e.exports=function(){function e(e,t,r,s,a,i){if(i!==n){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:s};return r.PropTypes=r,r}},3589:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});var n=r(5873);let s;function a(e){return s?s.get(e):void 0}function i(e){const t=a(e);if(!t)return;const r={};for(const[,[s,a]]of t)r[s]||(r[s]=[]),r[s].push((0,n.Ce)(a));return r}},3739:(e,t,r)=>{"use strict";r.d(t,{Cq:()=>c,zX:()=>m});var n=r(7914),s=r(6559),a=r(3966),i=r(2791),l=r(733),o=r(9353);const c={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},d=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class u extends l.l{constructor(e,t,r,n){super(n),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=r}add(e){var t=this;if(e.spanContext().spanId!==this.transactionSpanId){const r=e.end;e.end=function(){t._popActivity(e.spanContext().spanId);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r.apply(e,s)},void 0===(0,i.et)(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class m extends o.Z{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.idleTimeout,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.finalTimeout,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c.heartbeatInterval,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];super(e,t),this._idleHub=t,this._idleTimeout=r,this._finalTimeout=s,this._heartbeatInterval=i,this._onScope=l,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=d[4],this._autoFinishAllowed=!o,l&&(a.T&&n.vF.log("Setting idle transaction on scope. Span ID: ".concat(this.spanContext().spanId)),t.getScope().setSpan(this)),o||this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=d[3],this.end())},this._finalTimeout)}end(e){const t=(0,i.cI)(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){a.T&&n.vF.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter(e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;(0,i.et)(e).timestamp||(e.setStatus("cancelled"),e.end(t),a.T&&n.vF.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:r,timestamp:s}=(0,i.et)(e),l=r&&r<t,o=(this._finalTimeout+this._idleTimeout)/1e3,c=s&&r&&s-r<o;if(a.T){const t=JSON.stringify(e,void 0,2);l?c||n.vF.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):n.vF.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return l&&c}),a.T&&n.vF.log("[Tracing] flushing IdleTransaction")}else a.T&&n.vF.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},r=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new u(t,r,this.spanContext().spanId,e),a.T&&n.vF.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e){let{restartOnChildSpanChange:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{restartOnChildSpanChange:!0};this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=d[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(a.T&&n.vF.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=d[1],this.end(e))},this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),a.T&&n.vF.log("[Tracing] pushActivity: ".concat(e)),this.activities[e]=!0,a.T&&n.vF.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(a.T&&n.vF.log("[Tracing] popActivity ".concat(e)),delete this.activities[e],a.T&&n.vF.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=(0,s.zf)();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=d[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(a.T&&n.vF.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=d[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){a.T&&n.vF.log("pinging Heartbeat -> current counter: ".concat(this._heartbeatCounter)),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}},3876:(e,t,r)=>{"use strict";var n=r(6429),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function o(e){return n.isMemo(e)?i:l[e.$$typeof]||s}l[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l[n.Memo]=i;var c=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,r,n){if("string"!==typeof r){if(p){var s=h(r);s&&s!==p&&e(t,s,n)}var i=d(r);u&&(i=i.concat(u(r)));for(var l=o(t),x=o(r),f=0;f<i.length;++f){var g=i[f];if(!a[g]&&(!n||!n[g])&&(!x||!x[g])&&(!l||!l[g])){var v=m(r,g);try{c(t,g,v)}catch(y){}}}}return t}},3959:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3966:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});const n="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},4130:(e,t,r)=>{"use strict";function n(e){return e.transaction}r.d(t,{z:()=>n})},4150:(e,t,r)=>{"use strict";r.d(t,{TC:()=>o,kM:()=>l});var n=r(1538),s=r(6566);const a=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function i(e){if(!e)return;const t=e.match(a);if(!t)return;let r;return"1"===t[3]?r=!0:"0"===t[3]&&(r=!1),{traceId:t[1],parentSampled:r,parentSpanId:t[2]}}function l(e,t){const r=i(e),a=(0,n.yD)(t),{traceId:l,parentSpanId:o,parentSampled:c}=r||{};return r?{traceId:l||(0,s.eJ)(),parentSpanId:o||(0,s.eJ)().substring(16),spanId:(0,s.eJ)().substring(16),sampled:c,dsc:a||{}}:{traceId:l||(0,s.eJ)(),spanId:(0,s.eJ)().substring(16)}}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.eJ)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.eJ)().substring(16),r=arguments.length>2?arguments[2]:void 0,n="";return void 0!==r&&(n=r?"-1":"-0"),"".concat(e,"-").concat(t).concat(n)}},4414:(e,t,r)=>{"use strict";e.exports=r(2654)},4671:(e,t,r)=>{"use strict";r.d(t,{Cp:()=>c,J0:()=>x,J5:()=>v,KU:()=>h,ZQ:()=>u,o5:()=>p,r:()=>d,v4:()=>m});var n=r(7051),s=r(7815),a=r(9509),i=r(9827),l=r(6836),o=r(7565);function c(e,t){return(0,i.BF)().captureException(e,(0,o.li)(t))}function d(e,t){return(0,i.BF)().captureEvent(e,t)}function u(e,t){(0,i.BF)().addBreadcrumb(e,t)}function m(){const e=(0,i.BF)();for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(2===r.length){const[t,n]=r;return t?e.withScope(()=>(e.getStackTop().scope=t,n(t))):e.withScope(n)}return e.withScope(r[0])}function h(){return(0,i.BF)().getClient()}function p(){return(0,i.BF)().getScope()}function x(e){const t=h(),r=(0,i.rm)(),o=p(),{release:c,environment:d=a.U}=t&&t.getOptions()||{},{userAgent:u}=s.OW.navigator||{},m=(0,l.fj)((0,n.A)((0,n.A)({release:c,environment:d,user:o.getUser()||r.getUser()},u&&{userAgent:u}),e)),x=r.getSession();return x&&"ok"===x.status&&(0,l.qO)(x,{status:"exited"}),f(),r.setSession(m),o.setSession(m),m}function f(){const e=(0,i.rm)(),t=p(),r=t.getSession()||e.getSession();r&&(0,l.Vu)(r),g(),e.setSession(),t.setSession()}function g(){const e=(0,i.rm)(),t=p(),r=h(),n=t.getSession()||e.getSession();n&&r&&r.captureSession&&r.captureSession(n)}function v(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?f():g()}},4977:(e,t,r)=>{"use strict";r.d(t,{U:()=>y,p:()=>v});var n=r(7051),s=r(7914),a=r(3966),i=r(9827),l=r(2791),o=r(1731),c=r(3435),d=r(8188);let u=!1;function m(){const e=(0,d.Z7)();if(e){const t="internal_error";a.T&&s.vF.log("[Tracing] Transaction: ".concat(t," -> Global error occured")),e.setStatus(t)}}m.tag="sentry_tracingErrorCallback";var h=r(3739),p=r(5064),x=r(9353);function f(){const e=this.getScope().getSpan();return e?{"sentry-trace":(0,l.Qh)(e)}:{}}function g(e,t){const r=this.getClient(),i=r&&r.getOptions()||{},l=i.instrumenter||"sentry",o=e.instrumenter||"sentry";l!==o&&(a.T&&s.vF.error("A transaction was started with instrumenter=`".concat(o,"`, but the SDK is configured with the `").concat(l,"` instrumenter.\nThe transaction will not be sampled. Please use the ").concat(l," instrumentation to start transactions.")),e.sampled=!1);let c=new x.Z(e,this);return c=(0,p.T)(c,i,(0,n.A)({name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:(0,n.A)((0,n.A)({},e.data),e.attributes)},t)),c.isRecording()&&c.initSpanRecorder(i._experiments&&i._experiments.maxSpans),r&&r.emit&&r.emit("startTransaction",c),c}function v(e,t,r,s,a,i,l){let o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const c=e.getClient(),d=c&&c.getOptions()||{};let u=new h.zX(t,e,r,s,l,a,o);return u=(0,p.T)(u,d,(0,n.A)({name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:(0,n.A)((0,n.A)({},t.data),t.attributes)},i)),u.isRecording()&&u.initSpanRecorder(d._experiments&&d._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",u),u}function y(){const e=(0,i.EU)();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=g),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=f),u||(u=!0,(0,o.L)(m),(0,c.r)(m)))}},5064:(e,t,r)=>{"use strict";r.d(t,{T:()=>c,v:()=>d});var n=r(9850),s=r(7914),a=r(3966),i=r(8831),l=r(7433),o=r(2791);function c(e,t,r){if(!(0,l.w)(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(i.sy,Number(e.sampled)),e;let n;return"function"===typeof t.tracesSampler?(n=t.tracesSampler(r),e.setAttribute(i.sy,Number(n))):void 0!==r.parentSampled?n=r.parentSampled:"undefined"!==typeof t.tracesSampleRate?(n=t.tracesSampleRate,e.setAttribute(i.sy,Number(n))):(n=1,e.setAttribute(i.sy,n)),d(n)?n?(e.sampled=Math.random()<n,e.sampled?(a.T&&s.vF.log("[Tracing] starting ".concat(e.op," transaction - ").concat((0,o.et)(e).description)),e):(a.T&&s.vF.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ".concat(Number(n),")")),e)):(a.T&&s.vF.log("[Tracing] Discarding transaction because ".concat("function"===typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(a.T&&s.vF.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function d(e){return(0,n.yr)(e)||"number"!==typeof e&&"boolean"!==typeof e?(a.T&&s.vF.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ".concat(JSON.stringify(e)," of type ").concat(JSON.stringify(typeof e),".")),!1):!(e<0||e>1)||(a.T&&s.vF.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ".concat(e,".")),!1)}},5340:(e,t,r)=>{"use strict";e.exports=r(1761)},5684:(e,t,r)=>{"use strict";r.d(t,{T2:()=>l,XW:()=>a,xg:()=>i});var n,s=r(9850);function a(e){return new l(t=>{t(e)})}function i(e){return new l((t,r)=>{r(e)})}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(n||(n={}));class l{constructor(e){l.prototype.__init.call(this),l.prototype.__init2.call(this),l.prototype.__init3.call(this),l.prototype.__init4.call(this),this._state=n.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(t){this._reject(t)}}then(e,t){return new l((r,n)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(s){n(s)}else r(t)},e=>{if(t)try{r(t(e))}catch(s){n(s)}else n(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new l((t,r)=>{let n,s;return this.then(t=>{s=!1,n=t,e&&e()},t=>{s=!0,n=t,e&&e()}).then(()=>{s?r(n):t(n)})})}__init(){this._resolve=e=>{this._setResult(n.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(n.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===n.PENDING&&((0,s.Qg)(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===n.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(this._state===n.RESOLVED&&e[1](this._value),this._state===n.REJECTED&&e[2](this._value),e[0]=!0)})}}}},5873:(e,t,r)=>{"use strict";r.d(t,{Ce:()=>v,GS:()=>c,HF:()=>g,W4:()=>p,my:()=>d,pO:()=>u,sp:()=>m,u4:()=>h});var n=r(7051),s=r(736),a=r(6874),i=r(9850),l=r(7914),o=r(7867);function c(e,t,r){if(!(t in e))return;const n=e[t],s=r(n);"function"===typeof s&&u(s,n),e[t]=s}function d(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch(n){a.T&&l.vF.log('Failed to add non-enumerable property "'.concat(t,'" to object'),e)}}function u(e,t){try{const r=t.prototype||{};e.prototype=t.prototype=r,d(e,"__sentry_original__",t)}catch(r){}}function m(e){return e.__sentry_original__}function h(e){return Object.keys(e).map(t=>"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))).join("&")}function p(e){if((0,i.bJ)(e))return(0,n.A)({message:e.message,name:e.name,stack:e.stack},f(e));if((0,i.xH)(e)){const t=(0,n.A)({type:e.type,target:x(e.target),currentTarget:x(e.currentTarget)},f(e));return"undefined"!==typeof CustomEvent&&(0,i.tH)(e,CustomEvent)&&(t.detail=e.detail),t}return e}function x(e){try{return(0,i.vq)(e)?(0,s.Hd)(e):Object.prototype.toString.call(e)}catch(t){return"<unknown>"}}function f(e){if("object"===typeof e&&null!==e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;const r=Object.keys(p(e));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=t)return(0,o.xv)(r[0],t);for(let n=r.length;n>0;n--){const e=r.slice(0,n).join(", ");if(!(e.length>t))return n===r.length?e:(0,o.xv)(e,t)}return""}function v(e){return y(e,new Map)}function y(e,t){if(function(e){if(!(0,i.Qd)(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(t){return!0}}(e)){const r=t.get(e);if(void 0!==r)return r;const n={};t.set(e,n);for(const s of Object.keys(e))"undefined"!==typeof e[s]&&(n[s]=y(e[s],t));return n}if(Array.isArray(e)){const r=t.get(e);if(void 0!==r)return r;const n=[];return t.set(e,n),e.forEach(e=>{n.push(y(e,t))}),n}return e}},6429:(e,t,r)=>{"use strict";e.exports=r(8577)},6559:(e,t,r)=>{"use strict";r.d(t,{k3:()=>o,lu:()=>a,zf:()=>i});var n=r(7815);const s=1e3;function a(){return Date.now()/s}const i=function(){const{performance:e}=n.OW;if(!e||!e.now)return a;const t=Date.now()-e.now(),r=void 0==e.timeOrigin?t:e.timeOrigin;return()=>(r+e.now())/s}();let l;const o=(()=>{const{performance:e}=n.OW;if(!e||!e.now)return void(l="none");const t=36e5,r=e.now(),s=Date.now(),a=e.timeOrigin?Math.abs(e.timeOrigin+r-s):t,i=a<t,o=e.timing&&e.timing.navigationStart,c="number"===typeof o?Math.abs(o+r-s):t;return i||c<t?a<=c?(l="timeOrigin",e.timeOrigin):(l="navigationStart",o):(l="dateNow",s)})()},6566:(e,t,r)=>{"use strict";r.d(t,{$X:()=>o,GR:()=>u,M6:()=>d,eJ:()=>i,gO:()=>c,k9:()=>m});var n=r(7051),s=r(5873),a=r(7815);function i(){const e=a.OW,t=e.crypto||e.msCrypto;let r=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(r=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(n){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,e=>(e^(15&r())>>e/4).toString(16))}function l(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function o(e){const{message:t,event_id:r}=e;if(t)return t;const n=l(e);return n?n.type&&n.value?"".concat(n.type,": ").concat(n.value):n.type||n.value||r||"<unknown>":r||"<unknown>"}function c(e,t,r){const n=e.exception=e.exception||{},s=n.values=n.values||[],a=s[0]=s[0]||{};a.value||(a.value=t||""),a.type||(a.type=r||"Error")}function d(e,t){const r=l(e);if(!r)return;const s=r.mechanism;if(r.mechanism=(0,n.A)((0,n.A)((0,n.A)({},{type:"generic",handled:!0}),s),t),t&&"data"in t){const e=(0,n.A)((0,n.A)({},s&&s.data),t.data);r.mechanism.data=e}}function u(e){if(e&&e.__sentry_captured__)return!0;try{(0,s.my)(e,"__sentry_captured__",!0)}catch(t){}return!1}function m(e){return Array.isArray(e)?e:[e]}},6836:(e,t,r)=>{"use strict";r.d(t,{Vu:()=>o,fj:()=>i,qO:()=>l});var n=r(6566),s=r(5873),a=r(6559);function i(e){const t=(0,a.zf)(),r={sid:(0,n.eJ)(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return(0,s.Ce)({sid:"".concat(e.sid),init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"===typeof e.did||"string"===typeof e.did?"".concat(e.did):void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(r)};return e&&l(r,e),r}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,a.zf)(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:(0,n.eJ)()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did="".concat(t.did)),"number"===typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"===typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"===typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function o(e,t){let r={};t?r={status:t}:"ok"===e.status&&(r={status:"exited"}),l(e,r)}},6874:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});const n="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},6910:(e,t,r)=>{"use strict";r.d(t,{A:()=>Ct});var n={};function s(e,t){return function(){return e.apply(t,arguments)}}r.r(n),r.d(n,{hasBrowserEnv:()=>de,hasStandardBrowserEnv:()=>me,hasStandardBrowserWebWorkerEnv:()=>he,navigator:()=>ue,origin:()=>pe});const{toString:a}=Object.prototype,{getPrototypeOf:i}=Object,{iterator:l,toStringTag:o}=Symbol,c=(d=Object.create(null),e=>{const t=a.call(e);return d[t]||(d[t]=t.slice(8,-1).toLowerCase())});var d;const u=e=>(e=e.toLowerCase(),t=>c(t)===e),m=e=>t=>typeof t===e,{isArray:h}=Array,p=m("undefined");function x(e){return null!==e&&!p(e)&&null!==e.constructor&&!p(e.constructor)&&v(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const f=u("ArrayBuffer");const g=m("string"),v=m("function"),y=m("number"),b=e=>null!==e&&"object"===typeof e,N=e=>{if("object"!==c(e))return!1;const t=i(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(o in e)&&!(l in e)},j=u("Date"),w=u("File"),S=u("Blob"),A=u("FileList"),T=u("URLSearchParams"),[C,E,D,k]=["ReadableStream","Request","Response","Headers"].map(u);function R(e,t){let r,n,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),h(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{if(x(e))return;const n=s?Object.getOwnPropertyNames(e):Object.keys(e),a=n.length;let i;for(r=0;r<a;r++)i=n[r],t.call(null,e[i],i,e)}}function _(e,t){if(x(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,s=r.length;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const I="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,P=e=>!p(e)&&e!==I;const O=(L="undefined"!==typeof Uint8Array&&i(Uint8Array),e=>L&&e instanceof L);var L;const F=u("HTMLFormElement"),M=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),U=u("RegExp"),B=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};R(r,(r,s)=>{let a;!1!==(a=t(r,s,e))&&(n[s]=a||r)}),Object.defineProperties(e,n)};const H=u("AsyncFunction"),z=((e,t)=>{return e?setImmediate:t?(r="axios@".concat(Math.random()),n=[],I.addEventListener("message",e=>{let{source:t,data:s}=e;t===I&&s===r&&n.length&&n.shift()()},!1),e=>{n.push(e),I.postMessage(r,"*")}):e=>setTimeout(e);var r,n})("function"===typeof setImmediate,v(I.postMessage)),G="undefined"!==typeof queueMicrotask?queueMicrotask.bind(I):"undefined"!==typeof process&&process.nextTick||z,V={isArray:h,isArrayBuffer:f,isBuffer:x,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||v(e.append)&&("formdata"===(t=c(e))||"object"===t&&v(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&f(e.buffer),t},isString:g,isNumber:y,isBoolean:e=>!0===e||!1===e,isObject:b,isPlainObject:N,isEmptyObject:e=>{if(!b(e)||x(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:C,isRequest:E,isResponse:D,isHeaders:k,isUndefined:p,isDate:j,isFile:w,isBlob:S,isRegExp:U,isFunction:v,isStream:e=>b(e)&&v(e.pipe),isURLSearchParams:T,isTypedArray:O,isFileList:A,forEach:R,merge:function e(){const{caseless:t,skipUndefined:r}=P(this)&&this||{},n={},s=(s,a)=>{const i=t&&_(n,a)||a;N(n[i])&&N(s)?n[i]=e(n[i],s):N(s)?n[i]=e({},s):h(s)?n[i]=s.slice():r&&p(s)||(n[i]=s)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&R(arguments[a],s);return n},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return R(t,(t,n)=>{r&&v(t)?e[n]=s(t,r):e[n]=t},{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let s,a,l;const o={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)l=s[a],n&&!n(l,e,t)||o[l]||(t[l]=e[l],o[l]=!0);e=!1!==r&&i(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:u,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(h(e))return e;let t=e.length;if(!y(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[l]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:F,hasOwnProperty:M,hasOwnProp:M,reduceDescriptors:B,freezeMethods:e=>{B(e,(t,r)=>{if(v(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];v(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return h(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:_,global:I,isContextDefined:P,isSpecCompliantForm:function(e){return!!(e&&v(e.append)&&"FormData"===e[o]&&e[l])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(b(e)){if(t.indexOf(e)>=0)return;if(x(e))return e;if(!("toJSON"in e)){t[n]=e;const s=h(e)?[]:{};return R(e,(e,t)=>{const a=r(e,n+1);!p(a)&&(s[t]=a)}),t[n]=void 0,s}}return e};return r(e,0)},isAsyncFn:H,isThenable:e=>e&&(b(e)||v(e))&&v(e.then)&&v(e.catch),setImmediate:z,asap:G,isIterable:e=>null!=e&&v(e[l])};function W(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}V.inherits(W,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const q=W.prototype,$={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{$[e]={value:e}}),Object.defineProperties(W,$),Object.defineProperty(q,"isAxiosError",{value:!0}),W.from=(e,t,r,n,s,a)=>{const i=Object.create(q);V.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const l=e&&e.message?e.message:"Error",o=null==t&&e?e.code:t;return W.call(i,l,o,r,n,s),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",a&&Object.assign(i,a),i};const K=W;function X(e){return V.isPlainObject(e)||V.isArray(e)}function Y(e){return V.endsWith(e,"[]")?e.slice(0,-2):e}function J(e,t,r){return e?e.concat(t).map(function(e,t){return e=Y(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Z=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});const Q=function(e,t,r){if(!V.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=V.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!V.isUndefined(t[e])})).metaTokens,s=r.visitor||c,a=r.dots,i=r.indexes,l=(r.Blob||"undefined"!==typeof Blob&&Blob)&&V.isSpecCompliantForm(t);if(!V.isFunction(s))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(V.isDate(e))return e.toISOString();if(V.isBoolean(e))return e.toString();if(!l&&V.isBlob(e))throw new K("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(e)||V.isTypedArray(e)?l&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,s){let l=e;if(e&&!s&&"object"===typeof e)if(V.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(V.isArray(e)&&function(e){return V.isArray(e)&&!e.some(X)}(e)||(V.isFileList(e)||V.endsWith(r,"[]"))&&(l=V.toArray(e)))return r=Y(r),l.forEach(function(e,n){!V.isUndefined(e)&&null!==e&&t.append(!0===i?J([r],n,a):null===i?r:r+"[]",o(e))}),!1;return!!X(e)||(t.append(J(s,r,a),o(e)),!1)}const d=[],u=Object.assign(Z,{defaultVisitor:c,convertValue:o,isVisitable:X});if(!V.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!V.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+n.join("."));d.push(r),V.forEach(r,function(r,a){!0===(!(V.isUndefined(r)||null===r)&&s.call(t,r,V.isString(a)?a.trim():a,n,u))&&e(r,n?n.concat(a):[a])}),d.pop()}}(e),t};function ee(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function te(e,t){this._pairs=[],e&&Q(e,this,t)}const re=te.prototype;re.append=function(e,t){this._pairs.push([e,t])},re.toString=function(e){const t=e?function(t){return e.call(this,t,ee)}:ee;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const ne=te;function se(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ae(e,t,r){if(!t)return e;const n=r&&r.encode||se;V.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let a;if(a=s?s(t,r):V.isURLSearchParams(t)?t.toString():new ne(t,r).toString(n),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const ie=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(t){null!==t&&e(t)})}},le={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var oe=r(7051);const ce={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ne,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},de="undefined"!==typeof window&&"undefined"!==typeof document,ue="object"===typeof navigator&&navigator||void 0,me=de&&(!ue||["ReactNative","NativeScript","NS"].indexOf(ue.product)<0),he="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,pe=de&&window.location.href||"http://localhost",xe=(0,oe.A)((0,oe.A)({},n),ce);const fe=function(e){function t(e,r,n,s){let a=e[s++];if("__proto__"===a)return!0;const i=Number.isFinite(+a),l=s>=e.length;if(a=!a&&V.isArray(n)?n.length:a,l)return V.hasOwnProp(n,a)?n[a]=[n[a],r]:n[a]=r,!i;n[a]&&V.isObject(n[a])||(n[a]=[]);return t(e,r,n[a],s)&&V.isArray(n[a])&&(n[a]=function(e){const t={},r=Object.keys(e);let n;const s=r.length;let a;for(n=0;n<s;n++)a=r[n],t[a]=e[a];return t}(n[a])),!i}if(V.isFormData(e)&&V.isFunction(e.entries)){const r={};return V.forEachEntry(e,(e,n)=>{t(function(e){return V.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null};const ge={transitional:le,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,s=V.isObject(e);s&&V.isHTMLForm(e)&&(e=new FormData(e));if(V.isFormData(e))return n?JSON.stringify(fe(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Q(e,new xe.classes.URLSearchParams,(0,oe.A)({visitor:function(e,t,r,n){return xe.isNode&&V.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=V.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Q(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||n?(t.setContentType("application/json",!1),function(e,t,r){if(V.isString(e))try{return(t||JSON.parse)(e),V.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ge.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(s){if(r){if("SyntaxError"===s.name)throw K.from(s,K.ERR_BAD_RESPONSE,this,null,this.response);throw s}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xe.classes.FormData,Blob:xe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],e=>{ge.headers[e]={}});const ve=ge,ye=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),be=Symbol("internals");function Ne(e){return e&&String(e).trim().toLowerCase()}function je(e){return!1===e||null==e?e:V.isArray(e)?e.map(je):String(e)}function we(e,t,r,n,s){return V.isFunction(n)?n.call(this,t,r):(s&&(t=r),V.isString(t)?V.isString(n)?-1!==t.indexOf(n):V.isRegExp(n)?n.test(t):void 0:void 0)}class Se{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function s(e,t,r){const s=Ne(t);if(!s)throw new Error("header name must be a non-empty string");const a=V.findKey(n,s);(!a||void 0===n[a]||!0===r||void 0===r&&!1!==n[a])&&(n[a||t]=je(e))}const a=(e,t)=>V.forEach(e,(e,r)=>s(e,r,t));if(V.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(V.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let r,n,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),r=e.substring(0,s).trim().toLowerCase(),n=e.substring(s+1).trim(),!r||t[r]&&ye[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(V.isObject(e)&&V.isIterable(e)){let r,n,s={};for(const t of e){if(!V.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[n=t[0]]=(r=s[n])?V.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}a(s,t)}else null!=e&&s(t,e,r);return this}get(e,t){if(e=Ne(e)){const r=V.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(V.isFunction(t))return t.call(this,e,r);if(V.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ne(e)){const r=V.findKey(this,e);return!(!r||void 0===this[r]||t&&!we(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function s(e){if(e=Ne(e)){const s=V.findKey(r,e);!s||t&&!we(0,r[s],s,t)||(delete r[s],n=!0)}}return V.isArray(e)?e.forEach(s):s(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const s=t[r];e&&!we(0,this[s],s,e,!0)||(delete this[s],n=!0)}return n}normalize(e){const t=this,r={};return V.forEach(this,(n,s)=>{const a=V.findKey(r,s);if(a)return t[a]=je(n),void delete t[s];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(s):String(s).trim();i!==s&&delete t[s],t[i]=je(n),r[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return V.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&V.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[be]=this[be]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=Ne(e);t[n]||(!function(e,t){const r=V.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,s){return this[n].call(this,t,e,r,s)},configurable:!0})})}(r,e),t[n]=!0)}return V.isArray(e)?e.forEach(n):n(e),this}}Se.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),V.reduceDescriptors(Se.prototype,(e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}}),V.freezeMethods(Se);const Ae=Se;function Te(e,t){const r=this||ve,n=t||r,s=Ae.from(n.headers);let a=n.data;return V.forEach(e,function(e){a=e.call(r,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function Ce(e){return!(!e||!e.__CANCEL__)}function Ee(e,t,r){K.call(this,null==e?"canceled":e,K.ERR_CANCELED,t,r),this.name="CanceledError"}V.inherits(Ee,K,{__CANCEL__:!0});const De=Ee;function ke(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new K("Request failed with status code "+r.status,[K.ERR_BAD_REQUEST,K.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const Re=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s,a=0,i=0;return t=void 0!==t?t:1e3,function(l){const o=Date.now(),c=n[i];s||(s=o),r[a]=l,n[a]=o;let d=i,u=0;for(;d!==a;)u+=r[d++],d%=e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),o-s<t)return;const m=c&&o-c;return m?Math.round(1e3*u/m):void 0}};const _e=function(e,t){let r,n,s=0,a=1e3/t;const i=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=a,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];t>=a?i(o,e):(r=o,n||(n=setTimeout(()=>{n=null,i(r)},a-t)))},()=>r&&i(r)]},Ie=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const s=Re(50,250);return _e(r=>{const a=r.loaded,i=r.lengthComputable?r.total:void 0,l=a-n,o=s(l);n=a;e({loaded:a,total:i,progress:i?a/i:void 0,bytes:l,rate:o||void 0,estimated:o&&i&&a<=i?(i-a)/o:void 0,event:r,lengthComputable:null!=i,[t?"download":"upload"]:!0})},r)},Pe=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Oe=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return V.asap(()=>e(...r))},Le=xe.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,xe.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(xe.origin),xe.navigator&&/(msie|trident)/i.test(xe.navigator.userAgent)):()=>!0,Fe=xe.hasStandardBrowserEnv?{write(e,t,r,n,s,a,i){if("undefined"===typeof document)return;const l=["".concat(e,"=").concat(encodeURIComponent(t))];V.isNumber(r)&&l.push("expires=".concat(new Date(r).toUTCString())),V.isString(n)&&l.push("path=".concat(n)),V.isString(s)&&l.push("domain=".concat(s)),!0===a&&l.push("secure"),V.isString(i)&&l.push("SameSite=".concat(i)),document.cookie=l.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function Me(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Ue=e=>e instanceof Ae?(0,oe.A)({},e):e;function Be(e,t){t=t||{};const r={};function n(e,t,r,n){return V.isPlainObject(e)&&V.isPlainObject(t)?V.merge.call({caseless:n},e,t):V.isPlainObject(t)?V.merge({},t):V.isArray(t)?t.slice():t}function s(e,t,r,s){return V.isUndefined(t)?V.isUndefined(e)?void 0:n(void 0,e,0,s):n(e,t,0,s)}function a(e,t){if(!V.isUndefined(t))return n(void 0,t)}function i(e,t){return V.isUndefined(t)?V.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function l(r,s,a){return a in t?n(r,s):a in e?n(void 0,r):void 0}const o={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(e,t,r)=>s(Ue(e),Ue(t),0,!0)};return V.forEach(Object.keys((0,oe.A)((0,oe.A)({},e),t)),function(n){const a=o[n]||s,i=a(e[n],t[n],n);V.isUndefined(i)&&a!==l||(r[n]=i)}),r}const He=e=>{const t=Be({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:a,headers:i,auth:l}=t;if(t.headers=i=Ae.from(i),t.url=ae(Me(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),V.isFormData(r))if(xe.hasStandardBrowserEnv||xe.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(V.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[r,n]=e;t.includes(r.toLowerCase())&&i.set(r,n)})}if(xe.hasStandardBrowserEnv&&(n&&V.isFunction(n)&&(n=n(t)),n||!1!==n&&Le(t.url))){const e=s&&a&&Fe.read(a);e&&i.set(s,e)}return t},ze="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=He(e);let s=n.data;const a=Ae.from(n.headers).normalize();let i,l,o,c,d,{responseType:u,onUploadProgress:m,onDownloadProgress:h}=n;function p(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(i),n.signal&&n.signal.removeEventListener("abort",i)}let x=new XMLHttpRequest;function f(){if(!x)return;const n=Ae.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders());ke(function(e){t(e),p()},function(e){r(e),p()},{data:u&&"text"!==u&&"json"!==u?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:n,config:e,request:x}),x=null}x.open(n.method.toUpperCase(),n.url,!0),x.timeout=n.timeout,"onloadend"in x?x.onloadend=f:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(f)},x.onabort=function(){x&&(r(new K("Request aborted",K.ECONNABORTED,e,x)),x=null)},x.onerror=function(t){const n=t&&t.message?t.message:"Network Error",s=new K(n,K.ERR_NETWORK,e,x);s.event=t||null,r(s),x=null},x.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const s=n.transitional||le;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new K(t,s.clarifyTimeoutError?K.ETIMEDOUT:K.ECONNABORTED,e,x)),x=null},void 0===s&&a.setContentType(null),"setRequestHeader"in x&&V.forEach(a.toJSON(),function(e,t){x.setRequestHeader(t,e)}),V.isUndefined(n.withCredentials)||(x.withCredentials=!!n.withCredentials),u&&"json"!==u&&(x.responseType=n.responseType),h&&([o,d]=Ie(h,!0),x.addEventListener("progress",o)),m&&x.upload&&([l,c]=Ie(m),x.upload.addEventListener("progress",l),x.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(i=t=>{x&&(r(!t||t.type?new De(null,e,x):t),x.abort(),x=null)},n.cancelToken&&n.cancelToken.subscribe(i),n.signal&&(n.signal.aborted?i():n.signal.addEventListener("abort",i)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);g&&-1===xe.protocols.indexOf(g)?r(new K("Unsupported protocol "+g+":",K.ERR_BAD_REQUEST,e)):x.send(s||null)})},Ge=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const s=function(e){if(!r){r=!0,i();const t=e instanceof Error?e:this.reason;n.abort(t instanceof K?t:new De(t instanceof Error?t.message:t))}};let a=t&&setTimeout(()=>{a=null,s(new K("timeout ".concat(t," of ms exceeded"),K.ETIMEDOUT))},t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>V.asap(i),l}};function Ve(e,t){this.v=e,this.k=t}function We(e){return function(){return new qe(e.apply(this,arguments))}}function qe(e){var t,r;function n(t,r){try{var a=e[t](r),i=a.value,l=i instanceof Ve;Promise.resolve(l?i.v:i).then(function(r){if(l){var o="return"===t?"return":"next";if(!i.k||r.done)return n(o,r);r=e[o](r).value}s(a.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){s("throw",e)}}function s(e,s){switch(e){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,s){return new Promise(function(a,i){var l={key:e,arg:s,resolve:a,reject:i,next:null};r?r=r.next=l:(t=r=l,n(e,s))})},"function"!=typeof e.return&&(this.return=void 0)}function $e(e){return new Ve(e,0)}function Ke(e){var t={},r=!1;function n(t,n){return r=!0,n=new Promise(function(r){r(e[t](n))}),{done:!1,value:new Ve(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function Xe(e){var t,r,n,s=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);s--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Ye(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Ye(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Ye=function(e){this.s=e,this.n=e.next},Ye.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Ye(e)}qe.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},qe.prototype.next=function(e){return this._invoke("next",e)},qe.prototype.throw=function(e){return this._invoke("throw",e)},qe.prototype.return=function(e){return this._invoke("return",e)};const Je=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,s=0;for(;s<r;)n=s+t,yield e.slice(s,n),s=n},Ze=function(){var e=We(function*(e,t){var r,n=!1,s=!1;try{for(var a,i=Xe(Qe(e));n=!(a=yield $e(i.next())).done;n=!1){const e=a.value;yield*Ke(Xe(Je(e,t)))}}catch(l){s=!0,r=l}finally{try{n&&null!=i.return&&(yield $e(i.return()))}finally{if(s)throw r}}});return function(t,r){return e.apply(this,arguments)}}(),Qe=function(){var e=We(function*(e){if(e[Symbol.asyncIterator])return void(yield*Ke(Xe(e)));const t=e.getReader();try{for(;;){const{done:e,value:r}=yield $e(t.read());if(e)break;yield r}}finally{yield $e(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),et=(e,t,r,n)=>{const s=Ze(e,t);let a,i=0,l=e=>{a||(a=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await s.next();if(t)return l(),void e.close();let a=n.byteLength;if(r){let e=i+=a;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw l(t),t}},cancel:e=>(l(e),s.return())},{highWaterMark:2})},{isFunction:tt}=V,rt=(e=>{let{Request:t,Response:r}=e;return{Request:t,Response:r}})(V.global),{ReadableStream:nt,TextEncoder:st}=V.global,at=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!!e(...r)}catch(s){return!1}},it=e=>{e=V.merge.call({skipUndefined:!0},rt,e);const{fetch:t,Request:r,Response:n}=e,s=t?tt(t):"function"===typeof fetch,a=tt(r),i=tt(n);if(!s)return!1;const l=s&&tt(nt),o=s&&("function"===typeof st?(c=new st,e=>c.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var c;const d=a&&l&&at(()=>{let e=!1;const t=new r(xe.origin,{body:new nt,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=i&&l&&at(()=>V.isReadableStream(new n("").body)),m={stream:u&&(e=>e.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!m[e]&&(m[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new K("Response type '".concat(e,"' is not supported"),K.ERR_NOT_SUPPORT,r)})});const h=async(e,t)=>{const n=V.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(V.isBlob(e))return e.size;if(V.isSpecCompliantForm(e)){const t=new r(xe.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return V.isArrayBufferView(e)||V.isArrayBuffer(e)?e.byteLength:(V.isURLSearchParams(e)&&(e+=""),V.isString(e)?(await o(e)).byteLength:void 0)})(t):n};return async e=>{let{url:s,method:i,data:l,signal:o,cancelToken:c,timeout:p,onDownloadProgress:x,onUploadProgress:f,responseType:g,headers:v,withCredentials:y="same-origin",fetchOptions:b}=He(e),N=t||fetch;g=g?(g+"").toLowerCase():"text";let j=Ge([o,c&&c.toAbortSignal()],p),w=null;const S=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let A;try{if(f&&d&&"get"!==i&&"head"!==i&&0!==(A=await h(v,l))){let e,t=new r(s,{method:"POST",body:l,duplex:"half"});if(V.isFormData(l)&&(e=t.headers.get("content-type"))&&v.setContentType(e),t.body){const[e,r]=Pe(A,Ie(Oe(f)));l=et(t.body,65536,e,r)}}V.isString(y)||(y=y?"include":"omit");const t=a&&"credentials"in r.prototype,o=(0,oe.A)((0,oe.A)({},b),{},{signal:j,method:i.toUpperCase(),headers:v.normalize().toJSON(),body:l,duplex:"half",credentials:t?y:void 0});w=a&&new r(s,o);let c=await(a?N(w,b):N(s,o));const p=u&&("stream"===g||"response"===g);if(u&&(x||p&&S)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=V.toFiniteNumber(c.headers.get("content-length")),[r,s]=x&&Pe(t,Ie(Oe(x),!0))||[];c=new n(et(c.body,65536,r,()=>{s&&s(),S&&S()}),e)}g=g||"text";let T=await m[V.findKey(m,g)||"text"](c,e);return!p&&S&&S(),await new Promise((t,r)=>{ke(t,r,{data:T,headers:Ae.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:w})})}catch(T){if(S&&S(),T&&"TypeError"===T.name&&/Load failed|fetch/i.test(T.message))throw Object.assign(new K("Network Error",K.ERR_NETWORK,e,w),{cause:T.cause||T});throw K.from(T,T&&T.code,e,w)}}},lt=new Map,ot=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:s}=t,a=[n,s,r];let i,l,o=a.length,c=lt;for(;o--;)i=a[o],l=c.get(i),void 0===l&&c.set(i,l=o?new Map:it(t)),c=l;return l},ct=(ot(),{http:null,xhr:ze,fetch:{get:ot}});V.forEach(ct,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});const dt=e=>"- ".concat(e),ut=e=>V.isFunction(e)||null===e||!1===e;const mt={getAdapter:function(e,t){e=V.isArray(e)?e:[e];const{length:r}=e;let n,s;const a={};for(let i=0;i<r;i++){let r;if(n=e[i],s=n,!ut(n)&&(s=ct[(r=String(n)).toLowerCase()],void 0===s))throw new K("Unknown adapter '".concat(r,"'"));if(s&&(V.isFunction(s)||(s=s.get(t))))break;a[r||"#"+i]=s}if(!s){const e=Object.entries(a).map(e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")});let t=r?e.length>1?"since :\n"+e.map(dt).join("\n"):" "+dt(e[0]):"as no adapter specified";throw new K("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return s},adapters:ct};function ht(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new De(null,e)}function pt(e){ht(e),e.headers=Ae.from(e.headers),e.data=Te.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return mt.getAdapter(e.adapter||ve.adapter,e)(e).then(function(t){return ht(e),t.data=Te.call(e,e.transformResponse,t),t.headers=Ae.from(t.headers),t},function(t){return Ce(t)||(ht(e),t&&t.response&&(t.response.data=Te.call(e,e.transformResponse,t.response),t.response.headers=Ae.from(t.response.headers))),Promise.reject(t)})}const xt="1.13.1",ft={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ft[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const gt={};ft.transitional=function(e,t,r){function n(e,t){return"[Axios v"+xt+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,s,a)=>{if(!1===e)throw new K(n(s," has been removed"+(t?" in "+t:"")),K.ERR_DEPRECATED);return t&&!gt[s]&&(gt[s]=!0,console.warn(n(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,s,a)}},ft.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};const vt={assertOptions:function(e,t,r){if("object"!==typeof e)throw new K("options must be an object",K.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const a=n[s],i=t[a];if(i){const t=e[a],r=void 0===t||i(t,a,e);if(!0!==r)throw new K("option "+a+" must be "+r,K.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new K("Unknown option "+a,K.ERR_BAD_OPTION)}},validators:ft},yt=vt.validators;class bt{constructor(e){this.defaults=e||{},this.interceptors={request:new ie,response:new ie}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(n){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Be(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:s}=t;void 0!==r&&vt.assertOptions(r,{silentJSONParsing:yt.transitional(yt.boolean),forcedJSONParsing:yt.transitional(yt.boolean),clarifyTimeoutError:yt.transitional(yt.boolean)},!1),null!=n&&(V.isFunction(n)?t.paramsSerializer={serialize:n}:vt.assertOptions(n,{encode:yt.function,serialize:yt.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),vt.assertOptions(t,{baseUrl:yt.spelling("baseURL"),withXsrfToken:yt.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&V.merge(s.common,s[t.method]);s&&V.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=Ae.concat(a,s);const i=[];let l=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const o=[];let c;this.interceptors.response.forEach(function(e){o.push(e.fulfilled,e.rejected)});let d,u=0;if(!l){const e=[pt.bind(this),void 0];for(e.unshift(...i),e.push(...o),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let m=t;for(;u<d;){const e=i[u++],t=i[u++];try{m=e(m)}catch(h){t.call(this,h);break}}try{c=pt.call(this,m)}catch(h){return Promise.reject(h)}for(u=0,d=o.length;u<d;)c=c.then(o[u++],o[u++]);return c}getUri(e){return ae(Me((e=Be(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}V.forEach(["delete","get","head","options"],function(e){bt.prototype[e]=function(t,r){return this.request(Be(r||{},{method:e,url:t,data:(r||{}).data}))}}),V.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,s){return this.request(Be(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}bt.prototype[e]=t(),bt.prototype[e+"Form"]=t(!0)});const Nt=bt;class jt{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,s){r.reason||(r.reason=new De(e,n,s),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new jt(function(t){e=t}),cancel:e}}}const wt=jt;const St={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(St).forEach(e=>{let[t,r]=e;St[r]=t});const At=St;const Tt=function e(t){const r=new Nt(t),n=s(Nt.prototype.request,r);return V.extend(n,Nt.prototype,r,{allOwnKeys:!0}),V.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Be(t,r))},n}(ve);Tt.Axios=Nt,Tt.CanceledError=De,Tt.CancelToken=wt,Tt.isCancel=Ce,Tt.VERSION=xt,Tt.toFormData=Q,Tt.AxiosError=K,Tt.Cancel=Tt.CanceledError,Tt.all=function(e){return Promise.all(e)},Tt.spread=function(e){return function(t){return e.apply(null,t)}},Tt.isAxiosError=function(e){return V.isObject(e)&&!0===e.isAxiosError},Tt.mergeConfig=Be,Tt.AxiosHeaders=Ae,Tt.formToJSON=e=>fe(V.isHTMLForm(e)?new FormData(e):e),Tt.getAdapter=mt.getAdapter,Tt.HttpStatusCode=At,Tt.default=Tt;const Ct=Tt},7018:(e,t,r)=>{"use strict";r.d(t,{k:()=>c,l:()=>o});var n=r(5873),s=r(9509),a=r(4671),i=r(4130),l=r(2791);function o(e,t,r){const a=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:l}=r&&r.getUser()||{},o=(0,n.Ce)({environment:a.environment||s.U,release:a.release,user_segment:l,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",o),o}function c(e){const t=(0,a.KU)();if(!t)return{};const r=o((0,l.et)(e).trace_id||"",t,(0,a.o5)()),n=(0,i.z)(e);if(!n)return r;const s=n&&n._frozenDynamicSamplingContext;if(s)return s;const{sampleRate:c,source:d}=n.metadata;null!=c&&(r.sample_rate="".concat(c));const u=(0,l.et)(n);return d&&"url"!==d&&(r.transaction=u.description),r.sampled=String((0,l.pK)(n)),t.emit&&t.emit("createDsc",r),r}},7051:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(816);function s(e,t,r){return(t=(0,n.A)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}},7060:(e,t,r)=>{"use strict";r.d(t,{BaseApiService:()=>a});var n=r(7051),s=r(6910);class a{static buildKey(e,t){const r=null!==t&&void 0!==t&&t.params?JSON.stringify(t.params):"",n=null!==t&&void 0!==t&&t.headers&&"object"===typeof t.headers?JSON.stringify(t.headers):"";return"".concat(e,"|p:").concat(r,"|h:").concat(n)}static invalidateCacheByPrefix(e){const t=[];a.cache.forEach((r,n)=>{n.startsWith(e)&&t.push(n)}),t.forEach(e=>a.cache.delete(e))}static clearCache(){a.cache.clear()}constructor(e){this.api=void 0,this.api=s.A.create({baseURL:e||"/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}setupInterceptors(){this.api.interceptors.request.use(e=>{const t=this.getAuthToken();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),this.api.interceptors.response.use(e=>e,e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(this.clearAuthToken(),window.location.href="/login"),Promise.reject(e)})}getAuthToken(){return sessionStorage.getItem("auth_token")}setAuthToken(e){sessionStorage.setItem("auth_token",e)}clearAuthToken(){sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user")}async request(e){return(await this.api.request(e)).data}async get(e,t){var r,s,i,l;const o=(null===t||void 0===t?void 0:t.headers)||{},c="bypass"===o["x-cache"]||!0===(null===t||void 0===t||null===(r=t.params)||void 0===r?void 0:r.noCache),d=Number(null!==(s=null!==(i=o["x-cache-ttl"])&&void 0!==i?i:null===t||void 0===t||null===(l=t.params)||void 0===l?void 0:l.cacheTTL)&&void 0!==s?s:0);if(!c&&d>0){const r=a.buildKey(e,t),s=Date.now(),i=a.cache.get(r);if(i&&i.expiresAt>s)return i.data;const l=await this.request((0,n.A)((0,n.A)({},t),{},{method:"GET",url:e}));return a.cache.set(r,{data:l,expiresAt:s+d}),l}return this.request((0,n.A)((0,n.A)({},t),{},{method:"GET",url:e}))}async post(e,t,r){return this.request((0,n.A)((0,n.A)({},r),{},{method:"POST",url:e,data:t}))}async put(e,t,r){return this.request((0,n.A)((0,n.A)({},r),{},{method:"PUT",url:e,data:t}))}async patch(e,t,r){return this.request((0,n.A)((0,n.A)({},r),{},{method:"PATCH",url:e,data:t}))}async delete(e,t){return this.request((0,n.A)((0,n.A)({},t),{},{method:"DELETE",url:e}))}}a.cache=new Map},7119:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(8345)},7324:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});const n="7.120.4"},7362:(e,t,r)=>{"use strict";r.d(t,{Lb:()=>v,Uk:()=>h,Lk:()=>m});var n=r(7051),s=r(5873),a=r(9827),i=r(2791),l=r(7018),o=r(4671),c=r(9850);function d(e,t){let r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};try{r=e()}catch(s){throw t(s),n(),s}return function(e,t,r){if((0,c.Qg)(e))return e.then(e=>(r(),e),e=>{throw t(e),r(),e});return r(),e}(r,t,n)}var u=r(7433);function m(e,t){const r=x(e);return(0,a.fx)(()=>(0,o.v4)(e.scope,n=>{const s=(0,a.BF)(),l=n.getSpan(),o=e.onlyIfParent&&!l?void 0:p(s,{parentSpan:l,spanContext:r,forceTransaction:e.forceTransaction,scope:n});return d(()=>t(o),()=>{if(o){const{status:e}=(0,i.et)(o);e&&"ok"!==e||o.setStatus("internal_error")}},()=>o&&o.end())}))}function h(e){if(!(0,u.w)())return;const t=x(e),r=(0,a.BF)(),n=e.scope?e.scope.getSpan():(0,o.o5)().getSpan();if(e.onlyIfParent&&!n)return;const s=(e.scope||(0,o.o5)()).clone();return p(r,{parentSpan:n,spanContext:t,forceTransaction:e.forceTransaction,scope:s})}function p(e,t){let{parentSpan:r,spanContext:o,forceTransaction:c,scope:d}=t;if(!(0,u.w)())return;const m=(0,a.rm)();let h;if(r&&!c)h=r.startChild(o);else if(r){const t=(0,l.k)(r),{traceId:s,spanId:a}=r.spanContext(),c=(0,i.pK)(r);h=e.startTransaction((0,n.A)((0,n.A)({traceId:s,parentSpanId:a,parentSampled:c},o),{},{metadata:(0,n.A)({dynamicSamplingContext:t},o.metadata)}))}else{const{traceId:t,dsc:r,parentSpanId:s,sampled:a}=(0,n.A)((0,n.A)({},m.getPropagationContext()),d.getPropagationContext());h=e.startTransaction((0,n.A)((0,n.A)({traceId:t,parentSpanId:s,parentSampled:a},o),{},{metadata:(0,n.A)({dynamicSamplingContext:r},o.metadata)}))}return d.setSpan(h),function(e,t,r){e&&((0,s.my)(e,g,r),(0,s.my)(e,f,t))}(h,d,m),h}function x(e){if(e.startTime){const t=(0,n.A)({},e);return t.startTimestamp=(0,i.cI)(e.startTime),delete t.startTime,t}return e}const f="_sentryScope",g="_sentryIsolationScope";function v(e){return{scope:e[f],isolationScope:e[g]}}},7433:(e,t,r)=>{"use strict";r.d(t,{w:()=>s});var n=r(4671);function s(e){if("boolean"===typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=(0,n.KU)(),r=e||t&&t.getOptions();return!!r&&(r.enableTracing||"tracesSampleRate"in r||"tracesSampler"in r)}},7565:(e,t,r)=>{"use strict";r.d(t,{li:()=>f,mG:()=>p});var n=r(7051),s=r(7815),a=r(6566),i=r(8357),l=r(7867),o=r(6559),c=r(9509),d=r(137),u=r(9672),m=r(997),h=r(2791);function p(e,t,r,p,f,g){const{normalizeDepth:v=3,normalizeMaxBreadth:y=1e3}=e,b=(0,n.A)((0,n.A)({},t),{},{event_id:t.event_id||r.event_id||(0,a.eJ)(),timestamp:t.timestamp||(0,o.lu)()}),N=r.integrations||e.integrations.map(e=>e.name);!function(e,t){const{environment:r,release:n,dist:s,maxValueLength:a=250}=t;"environment"in e||(e.environment="environment"in t?r:c.U);void 0===e.release&&void 0!==n&&(e.release=n);void 0===e.dist&&void 0!==s&&(e.dist=s);e.message&&(e.message=(0,l.xv)(e.message,a));const i=e.exception&&e.exception.values&&e.exception.values[0];i&&i.value&&(i.value=(0,l.xv)(i.value,a));const o=e.request;o&&o.url&&(o.url=(0,l.xv)(o.url,a))}(b,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(b,N),void 0===t.type&&function(e,t){const r=s.OW._sentryDebugIds;if(!r)return;let n;const a=x.get(t);a?n=a:(n=new Map,x.set(t,n));const i=Object.keys(r).reduce((e,s)=>{let a;const i=n.get(s);i?a=i:(a=t(s),n.set(s,a));for(let t=a.length-1;t>=0;t--){const n=a[t];if(n.filename){e[n.filename]=r[s];break}}return e},{});try{e.exception.values.forEach(e=>{e.stacktrace.frames.forEach(e=>{e.filename&&(e.debug_id=i[e.filename])})})}catch(l){}}(b,e.stackParser);const j=function(e,t){if(!t)return e;const r=e?e.clone():new u.HG;return r.update(t),r}(p,r.captureContext);r.mechanism&&(0,a.M6)(b,r.mechanism);const w=f&&f.getEventProcessors?f.getEventProcessors():[],S=(0,u.m6)().getScopeData();if(g){const e=g.getScopeData();(0,m.Rg)(S,e)}if(j){const e=j.getScopeData();(0,m.Rg)(S,e)}const A=[...r.attachments||[],...S.attachments];A.length&&(r.attachments=A),(0,m.e2)(b,S);const T=[...w,...(0,d.lG)(),...S.eventProcessors];return(0,d.jB)(T,b,r).then(e=>(e&&function(e){const t={};try{e.exception.values.forEach(e=>{e.stacktrace.frames.forEach(e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)})})}catch(n){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.keys(t).forEach(e=>{r.push({type:"sourcemap",code_file:e,debug_id:t[e]})})}(e),"number"===typeof v&&v>0?function(e,t,r){if(!e)return null;const s=(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>(0,n.A)((0,n.A)({},e),e.data&&{data:(0,i.S8)(e.data,t,r)}))}),e.user&&{user:(0,i.S8)(e.user,t,r)}),e.contexts&&{contexts:(0,i.S8)(e.contexts,t,r)}),e.extra&&{extra:(0,i.S8)(e.extra,t,r)});e.contexts&&e.contexts.trace&&s.contexts&&(s.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(s.contexts.trace.data=(0,i.S8)(e.contexts.trace.data,t,r)));e.spans&&(s.spans=e.spans.map(e=>{const n=(0,h.et)(e).data;return n&&(e.data=(0,i.S8)(n,t,r)),e}));return s}(e,v,y):e))}const x=new WeakMap;function f(e){if(e)return function(e){return e instanceof u.HG||"function"===typeof e}(e)||function(e){return Object.keys(e).some(e=>g.includes(e))}(e)?{captureContext:e}:e}const g=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"]},7795:(e,t,r)=>{"use strict";var n;function s(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}r.d(t,{N8:()=>a}),function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(n||(n={}));function a(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const r=s(t);"unknown_error"!==r&&e.setStatus(r)}},7815:(e,t,r)=>{"use strict";function n(e){return e&&e.Math==Math?e:void 0}r.d(t,{BY:()=>i,OW:()=>s,VZ:()=>a});const s="object"==typeof globalThis&&n(globalThis)||"object"==typeof window&&n(window)||"object"==typeof self&&n(self)||"object"==typeof r.g&&n(r.g)||function(){return this}()||{};function a(){return s}function i(e,t,r){const n=r||s,a=n.__SENTRY__=n.__SENTRY__||{};return a[e]||(a[e]=t())}},7867:(e,t,r)=>{"use strict";r.d(t,{Xr:()=>i,gt:()=>a,xv:()=>s});var n=r(9850);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"!==typeof e||0===t||e.length<=t?e:"".concat(e.slice(0,t),"...")}function a(e,t){if(!Array.isArray(e))return"";const r=[];for(let a=0;a<e.length;a++){const t=e[a];try{(0,n.L2)(t)?r.push("[VueViewModel]"):r.push(String(t))}catch(s){r.push("[value cannot be serialized]")}}return r.join(t)}function i(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).some(r=>function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!(0,n.Kg)(e)&&((0,n.gd)(t)?t.test(e):!!(0,n.Kg)(t)&&(r?e===t:e.includes(t)))}(e,r,t))}},7914:(e,t,r)=>{"use strict";r.d(t,{Ow:()=>a,Z9:()=>i,pq:()=>l,vF:()=>o});var n=r(6874),s=r(7815);const a=["debug","info","warn","error","log","assert","trace"],i={};function l(e){if(!("console"in s.OW))return e();const t=s.OW.console,r={},n=Object.keys(i);n.forEach(e=>{const n=i[e];r[e]=t[e],t[e]=n});try{return e()}finally{n.forEach(e=>{t[e]=r[e]})}}const o=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return n.T?a.forEach(r=>{t[r]=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];e&&l(()=>{s.OW.console[r]("".concat("Sentry Logger ","[").concat(r,"]:"),...n)})}}):a.forEach(e=>{t[e]=()=>{}}),t}()},8188:(e,t,r)=>{"use strict";r.d(t,{Z7:()=>s});var n=r(9827);function s(e){return(e||(0,n.BF)()).getScope().getTransaction()}},8345:(e,t,r)=>{"use strict";var n=r(9950),s=r(5340);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function o(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function x(e,t,r,n,s,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new x(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];f[t]=new x(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new x(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new x(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new x(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new x(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new x(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new x(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new x(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,r,n){var s=f.hasOwnProperty(t)?f[t]:null;(null!==s?0!==s.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,s,n)&&(r=null),n||null===s?function(e){return!!u.call(p,e)||!u.call(h,e)&&(m.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=null===r?3!==s.type&&"":r:(t=s.attributeName,n=s.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(s=s.type)||4===s&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,v);f[t]=new x(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,v);f[t]=new x(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,v);f[t]=new x(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),j=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,F=Object.assign;function M(e){if(void 0===L)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),a=n.stack.split("\n"),i=s.length-1,l=a.length-1;1<=i&&0<=l&&s[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==a[l]){if(1!==i||1!==l)do{if(i--,0>--l||s[i]!==a[l]){var o="\n"+s[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=i&&0<=l);break}}}finally{U=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?M(e):""}function H(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case j:return"Portal";case A:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return z(e(t))}catch(r){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=W(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var r=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Y(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=V(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Z(e,t){J(e,t);var r=V(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&K(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+V(r),t=null,s=0;s<e.length;s++){if(e[s].value===r)return e[s].selected=!0,void(n&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(a(92));if(te(r)){if(1<r.length)throw Error(a(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:V(r)}}function ae(e,t){var r=V(t.value),n=V(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function me(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function xe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function fe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),s=xe(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}Object.keys(he).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ne(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,we=null,Se=null;function Ae(e){if(e=ys(e)){if("function"!==typeof je)throw Error(a(280));var t=e.stateNode;t&&(t=Ns(t),je(e.stateNode,e.type,t))}}function Te(e){we?Se?Se.push(e):Se=[e]:we=e}function Ce(){if(we){var e=we,t=Se;if(Se=we=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Ee(e,t){return e(t)}function De(){}var ke=!1;function Re(e,t,r){if(ke)return e(t,r);ke=!0;try{return Ee(e,t,r)}finally{ke=!1,(null!==we||null!==Se)&&(De(),Ce())}}function _e(e,t){var r=e.stateNode;if(null===r)return null;var n=Ns(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(a(231,t,typeof r));return r}var Ie=!1;if(d)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(de){Ie=!1}function Oe(e,t,r,n,s,a,i,l,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Le=!1,Fe=null,Me=!1,Ue=null,Be={onError:function(e){Le=!0,Fe=e}};function He(e,t,r,n,s,a,i,l,o){Le=!1,Fe=null,Oe.apply(Be,arguments)}function ze(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(ze(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(n=s.return)){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Ve(s),e;if(i===n)return Ve(s),t;i=i.sibling}throw Error(a(188))}if(r.return!==n.return)r=s,n=i;else{for(var l=!1,o=s.child;o;){if(o===r){l=!0,r=s,n=i;break}if(o===n){l=!0,n=s,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,n=s;break}if(o===n){l=!0,n=i,r=s;break}o=o.sibling}if(!l)throw Error(a(189))}}if(r.alternate!==n)throw Error(a(190))}if(3!==r.tag)throw Error(a(188));return r.stateNode.current===r?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var $e=s.unstable_scheduleCallback,Ke=s.unstable_cancelCallback,Xe=s.unstable_shouldYield,Ye=s.unstable_requestPaint,Je=s.unstable_now,Ze=s.unstable_getCurrentPriorityLevel,Qe=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,rt=s.unstable_LowPriority,nt=s.unstable_IdlePriority,st=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ot|0)|0},lt=Math.log,ot=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,i=268435455&r;if(0!==i){var l=i&~s;0!==l?n=ut(l):0!==(a&=i)&&(n=ut(a))}else 0!==(i=r&~s)?n=ut(i):0!==a&&(n=ut(a));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&s)&&((s=n&-n)>=(a=t&-t)||16===s&&0!==(4194240&a)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)s=1<<(r=31-it(t)),n|=e[r],t&=~s;return n}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function xt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function ft(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=r}function vt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-it(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Nt,jt,wt,St,At,Tt=!1,Ct=[],Et=null,Dt=null,kt=null,Rt=new Map,_t=new Map,It=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_t.delete(t.pointerId)}}function Lt(e,t,r,n,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=ys(t))&&jt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Ft(e){var t=vs(e.target);if(null!==t){var r=ze(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ge(r)))return e.blockedOn=t,void At(e.priority,function(){wt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ys(r))&&jt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);be=n,r.target.dispatchEvent(n),be=null,t.shift()}return!0}function Ut(e,t,r){Mt(e)&&r.delete(t)}function Bt(){Tt=!1,null!==Et&&Mt(Et)&&(Et=null),null!==Dt&&Mt(Dt)&&(Dt=null),null!==kt&&Mt(kt)&&(kt=null),Rt.forEach(Ut),_t.forEach(Ut)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return Ht(t,e)}if(0<Ct.length){Ht(Ct[0],e);for(var r=1;r<Ct.length;r++){var n=Ct[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Et&&Ht(Et,e),null!==Dt&&Ht(Dt,e),null!==kt&&Ht(kt,e),Rt.forEach(t),_t.forEach(t),r=0;r<It.length;r++)(n=It[r]).blockedOn===e&&(n.blockedOn=null);for(;0<It.length&&null===(r=It[0]).blockedOn;)Ft(r),null===r.blockedOn&&It.shift()}var Gt=b.ReactCurrentBatchConfig,Vt=!0;function Wt(e,t,r,n){var s=yt,a=Gt.transition;Gt.transition=null;try{yt=1,$t(e,t,r,n)}finally{yt=s,Gt.transition=a}}function qt(e,t,r,n){var s=yt,a=Gt.transition;Gt.transition=null;try{yt=4,$t(e,t,r,n)}finally{yt=s,Gt.transition=a}}function $t(e,t,r,n){if(Vt){var s=Xt(e,t,r,n);if(null===s)Vn(e,t,n,Kt,r),Ot(e,n);else if(function(e,t,r,n,s){switch(t){case"focusin":return Et=Lt(Et,e,t,r,n,s),!0;case"dragenter":return Dt=Lt(Dt,e,t,r,n,s),!0;case"mouseover":return kt=Lt(kt,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Rt.set(a,Lt(Rt.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,_t.set(a,Lt(_t.get(a)||null,e,t,r,n,s)),!0}return!1}(s,e,t,r,n))n.stopPropagation();else if(Ot(e,n),4&t&&-1<Pt.indexOf(e)){for(;null!==s;){var a=ys(s);if(null!==a&&Nt(a),null===(a=Xt(e,t,r,n))&&Vn(e,t,n,Kt,r),a===s)break;s=a}null!==s&&n.stopPropagation()}else Vn(e,t,n,null,r)}}var Kt=null;function Xt(e,t,r,n){if(Kt=null,null!==(e=vs(e=Ne(n))))if(null===(t=ze(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Qe:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,Qt=null;function er(){if(Qt)return Qt;var e,t,r=Zt,n=r.length,s="value"in Jt?Jt.value:Jt.textContent,a=s.length;for(e=0;e<n&&r[e]===s[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===s[a-t];t++);return Qt=s.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function sr(e){function t(t,r,n,s,a){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ar,ir,lr,or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=sr(or),dr=F({},or,{view:0,detail:0}),ur=sr(dr),mr=F({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lr&&(lr&&"mousemove"===e.type?(ar=e.screenX-lr.screenX,ir=e.screenY-lr.screenY):ir=ar=0,lr=e),ar)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),hr=sr(mr),pr=sr(F({},mr,{dataTransfer:0})),xr=sr(F({},dr,{relatedTarget:0})),fr=sr(F({},or,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=F({},or,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vr=sr(gr),yr=sr(F({},or,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jr[e])&&!!t[e]}function Sr(){return wr}var Ar=F({},dr,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tr=sr(Ar),Cr=sr(F({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=sr(F({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sr})),Dr=sr(F({},or,{propertyName:0,elapsedTime:0,pseudoElement:0})),kr=F({},mr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rr=sr(kr),_r=[9,13,27,32],Ir=d&&"CompositionEvent"in window,Pr=null;d&&"documentMode"in document&&(Pr=document.documentMode);var Or=d&&"TextEvent"in window&&!Pr,Lr=d&&(!Ir||Pr&&8<Pr&&11>=Pr),Fr=String.fromCharCode(32),Mr=!1;function Ur(e,t){switch(e){case"keyup":return-1!==_r.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Br(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hr=!1;var zr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zr[e.type]:"textarea"===t}function Vr(e,t,r,n){Te(n),0<(t=qn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Wr=null,qr=null;function $r(e){Mn(e,0)}function Kr(e){if($(bs(e)))return e}function Xr(e,t){if("change"===e)return t}var Yr=!1;if(d){var Jr;if(d){var Zr="oninput"in document;if(!Zr){var Qr=document.createElement("div");Qr.setAttribute("oninput","return;"),Zr="function"===typeof Qr.oninput}Jr=Zr}else Jr=!1;Yr=Jr&&(!document.documentMode||9<document.documentMode)}function en(){Wr&&(Wr.detachEvent("onpropertychange",tn),qr=Wr=null)}function tn(e){if("value"===e.propertyName&&Kr(qr)){var t=[];Vr(t,qr,e,Ne(e)),Re($r,t)}}function rn(e,t,r){"focusin"===e?(en(),qr=r,(Wr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kr(qr)}function sn(e,t){if("click"===e)return Kr(t)}function an(e,t){if("input"===e||"change"===e)return Kr(t)}var ln="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function on(e,t){if(ln(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!u.call(t,s)||!ln(e[s],t[s]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mn(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=K((e=t.contentWindow).document)}return t}function hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pn(e){var t=mn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&un(r.ownerDocument.documentElement,r)){if(null!==n&&hn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=void 0===n.end?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=dn(r,a);var i=dn(r,n);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xn=d&&"documentMode"in document&&11>=document.documentMode,fn=null,gn=null,vn=null,yn=!1;function bn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;yn||null==fn||fn!==K(n)||("selectionStart"in(n=fn)&&hn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&on(vn,n)||(vn=n,0<(n=qn(gn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=fn)))}function Nn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var jn={animationend:Nn("Animation","AnimationEnd"),animationiteration:Nn("Animation","AnimationIteration"),animationstart:Nn("Animation","AnimationStart"),transitionend:Nn("Transition","TransitionEnd")},wn={},Sn={};function An(e){if(wn[e])return wn[e];if(!jn[e])return e;var t,r=jn[e];for(t in r)if(r.hasOwnProperty(t)&&t in Sn)return wn[e]=r[t];return e}d&&(Sn=document.createElement("div").style,"AnimationEvent"in window||(delete jn.animationend.animation,delete jn.animationiteration.animation,delete jn.animationstart.animation),"TransitionEvent"in window||delete jn.transitionend.transition);var Tn=An("animationend"),Cn=An("animationiteration"),En=An("animationstart"),Dn=An("transitionend"),kn=new Map,Rn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _n(e,t){kn.set(e,t),o(t,[e])}for(var In=0;In<Rn.length;In++){var Pn=Rn[In];_n(Pn.toLowerCase(),"on"+(Pn[0].toUpperCase()+Pn.slice(1)))}_n(Tn,"onAnimationEnd"),_n(Cn,"onAnimationIteration"),_n(En,"onAnimationStart"),_n("dblclick","onDoubleClick"),_n("focusin","onFocus"),_n("focusout","onBlur"),_n(Dn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var On="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ln=new Set("cancel close invalid load scroll toggle".split(" ").concat(On));function Fn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,s,i,l,o,c){if(He.apply(this,arguments),Le){if(!Le)throw Error(a(198));var d=Fe;Le=!1,Fe=null,Me||(Me=!0,Ue=d)}}(n,t,void 0,e),e.currentTarget=null}function Mn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==a&&s.isPropagationStopped())break e;Fn(s,l,c),a=o}else for(i=0;i<n.length;i++){if(o=(l=n[i]).instance,c=l.currentTarget,l=l.listener,o!==a&&s.isPropagationStopped())break e;Fn(s,l,c),a=o}}}if(Me)throw e=Ue,Me=!1,Ue=null,e}function Un(e,t){var r=t[xs];void 0===r&&(r=t[xs]=new Set);var n=e+"__bubble";r.has(n)||(Gn(t,e,2,!1),r.add(n))}function Bn(e,t,r){var n=0;t&&(n|=4),Gn(r,e,n,t)}var Hn="_reactListening"+Math.random().toString(36).slice(2);function zn(e){if(!e[Hn]){e[Hn]=!0,i.forEach(function(t){"selectionchange"!==t&&(Ln.has(t)||Bn(t,!1,e),Bn(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hn]||(t[Hn]=!0,Bn("selectionchange",!1,t))}}function Gn(e,t,r,n){switch(Yt(t)){case 1:var s=Wt;break;case 4:s=qt;break;default:s=$t}r=s.bind(null,t,r,e),s=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),n?void 0!==s?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):void 0!==s?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Vn(e,t,r,n,s){var a=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var l=n.stateNode.containerInfo;if(l===s||8===l.nodeType&&l.parentNode===s)break;if(4===i)for(i=n.return;null!==i;){var o=i.tag;if((3===o||4===o)&&((o=i.stateNode.containerInfo)===s||8===o.nodeType&&o.parentNode===s))return;i=i.return}for(;null!==l;){if(null===(i=vs(l)))return;if(5===(o=i.tag)||6===o){n=a=i;continue e}l=l.parentNode}}n=n.return}Re(function(){var n=a,s=Ne(r),i=[];e:{var l=kn.get(e);if(void 0!==l){var o=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":o=Tr;break;case"focusin":c="focus",o=xr;break;case"focusout":c="blur",o=xr;break;case"beforeblur":case"afterblur":o=xr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=hr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=Er;break;case Tn:case Cn:case En:o=fr;break;case Dn:o=Dr;break;case"scroll":o=ur;break;case"wheel":o=Rr;break;case"copy":case"cut":case"paste":o=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=Cr}var d=0!==(4&t),u=!d&&"scroll"===e,m=d?null!==l?l+"Capture":null:l;d=[];for(var h,p=n;null!==p;){var x=(h=p).stateNode;if(5===h.tag&&null!==x&&(h=x,null!==m&&(null!=(x=_e(p,m))&&d.push(Wn(p,x,h)))),u)break;p=p.return}0<d.length&&(l=new o(l,c,null,r,s),i.push({event:l,listeners:d}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||r===be||!(c=r.relatedTarget||r.fromElement)||!vs(c)&&!c[ps])&&(o||l)&&(l=s.window===s?s:(l=s.ownerDocument)?l.defaultView||l.parentWindow:window,o?(o=n,null!==(c=(c=r.relatedTarget||r.toElement)?vs(c):null)&&(c!==(u=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(o=null,c=n),o!==c)){if(d=hr,x="onMouseLeave",m="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Cr,x="onPointerLeave",m="onPointerEnter",p="pointer"),u=null==o?l:bs(o),h=null==c?l:bs(c),(l=new d(x,p+"leave",o,r,s)).target=u,l.relatedTarget=h,x=null,vs(s)===n&&((d=new d(m,p+"enter",c,r,s)).target=h,d.relatedTarget=u,x=d),u=x,o&&c)e:{for(m=c,p=0,h=d=o;h;h=$n(h))p++;for(h=0,x=m;x;x=$n(x))h++;for(;0<p-h;)d=$n(d),p--;for(;0<h-p;)m=$n(m),h--;for(;p--;){if(d===m||null!==m&&d===m.alternate)break e;d=$n(d),m=$n(m)}d=null}else d=null;null!==o&&Kn(i,l,o,d,!1),null!==c&&null!==u&&Kn(i,u,c,d,!0)}if("select"===(o=(l=n?bs(n):window).nodeName&&l.nodeName.toLowerCase())||"input"===o&&"file"===l.type)var f=Xr;else if(Gr(l))if(Yr)f=an;else{f=nn;var g=rn}else(o=l.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(f=sn);switch(f&&(f=f(e,n))?Vr(i,f,r,s):(g&&g(e,l,n),"focusout"===e&&(g=l._wrapperState)&&g.controlled&&"number"===l.type&&ee(l,"number",l.value)),g=n?bs(n):window,e){case"focusin":(Gr(g)||"true"===g.contentEditable)&&(fn=g,gn=n,vn=null);break;case"focusout":vn=gn=fn=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,bn(i,r,s);break;case"selectionchange":if(xn)break;case"keydown":case"keyup":bn(i,r,s)}var v;if(Ir)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Hr?Ur(e,r)&&(y="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(y="onCompositionStart");y&&(Lr&&"ko"!==r.locale&&(Hr||"onCompositionStart"!==y?"onCompositionEnd"===y&&Hr&&(v=er()):(Zt="value"in(Jt=s)?Jt.value:Jt.textContent,Hr=!0)),0<(g=qn(n,y)).length&&(y=new yr(y,e,null,r,s),i.push({event:y,listeners:g}),v?y.data=v:null!==(v=Br(r))&&(y.data=v))),(v=Or?function(e,t){switch(e){case"compositionend":return Br(t);case"keypress":return 32!==t.which?null:(Mr=!0,Fr);case"textInput":return(e=t.data)===Fr&&Mr?null:e;default:return null}}(e,r):function(e,t){if(Hr)return"compositionend"===e||!Ir&&Ur(e,t)?(e=er(),Qt=Zt=Jt=null,Hr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=qn(n,"onBeforeInput")).length&&(s=new yr("onBeforeInput","beforeinput",null,r,s),i.push({event:s,listeners:n}),s.data=v))}Mn(i,t)})}function Wn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function qn(e,t){for(var r=t+"Capture",n=[];null!==e;){var s=e,a=s.stateNode;5===s.tag&&null!==a&&(s=a,null!=(a=_e(e,r))&&n.unshift(Wn(e,a,s)),null!=(a=_e(e,t))&&n.push(Wn(e,a,s))),e=e.return}return n}function $n(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kn(e,t,r,n,s){for(var a=t._reactName,i=[];null!==r&&r!==n;){var l=r,o=l.alternate,c=l.stateNode;if(null!==o&&o===n)break;5===l.tag&&null!==c&&(l=c,s?null!=(o=_e(r,a))&&i.unshift(Wn(r,o,l)):s||null!=(o=_e(r,a))&&i.push(Wn(r,o,l))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Xn=/\r\n?/g,Yn=/\u0000|\uFFFD/g;function Jn(e){return("string"===typeof e?e:""+e).replace(Xn,"\n").replace(Yn,"")}function Zn(e,t,r){if(t=Jn(t),Jn(e)!==t&&r)throw Error(a(425))}function Qn(){}var es=null,ts=null;function rs(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ns="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,as="function"===typeof Promise?Promise:void 0,is="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof as?function(e){return as.resolve(null).then(e).catch(ls)}:ns;function ls(e){setTimeout(function(){throw e})}function os(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&8===s.nodeType)if("/$"===(r=s.data)){if(0===n)return e.removeChild(s),void zt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=s}while(r);zt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),ms="__reactFiber$"+us,hs="__reactProps$"+us,ps="__reactContainer$"+us,xs="__reactEvents$"+us,fs="__reactListeners$"+us,gs="__reactHandles$"+us;function vs(e){var t=e[ms];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ps]||r[ms]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ds(e);null!==e;){if(r=e[ms])return r;e=ds(e)}return t}r=(e=r).parentNode}return null}function ys(e){return!(e=e[ms]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Ns(e){return e[hs]||null}var js=[],ws=-1;function Ss(e){return{current:e}}function As(e){0>ws||(e.current=js[ws],js[ws]=null,ws--)}function Ts(e,t){ws++,js[ws]=e.current,e.current=t}var Cs={},Es=Ss(Cs),Ds=Ss(!1),ks=Cs;function Rs(e,t){var r=e.type.contextTypes;if(!r)return Cs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s,a={};for(s in r)a[s]=t[s];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function _s(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Is(){As(Ds),As(Es)}function Ps(e,t,r){if(Es.current!==Cs)throw Error(a(168));Ts(Es,t),Ts(Ds,r)}function Os(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var s in n=n.getChildContext())if(!(s in t))throw Error(a(108,G(e)||"Unknown",s));return F({},r,n)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,ks=Es.current,Ts(Es,e),Ts(Ds,Ds.current),!0}function Fs(e,t,r){var n=e.stateNode;if(!n)throw Error(a(169));r?(e=Os(e,t,ks),n.__reactInternalMemoizedMergedChildContext=e,As(Ds),As(Es),Ts(Es,e)):As(Ds),Ts(Ds,r)}var Ms=null,Us=!1,Bs=!1;function Hs(e){null===Ms?Ms=[e]:Ms.push(e)}function zs(){if(!Bs&&null!==Ms){Bs=!0;var e=0,t=yt;try{var r=Ms;for(yt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Ms=null,Us=!1}catch(s){throw null!==Ms&&(Ms=Ms.slice(e+1)),$e(Qe,zs),s}finally{yt=t,Bs=!1}}return null}var Gs=[],Vs=0,Ws=null,qs=0,$s=[],Ks=0,Xs=null,Ys=1,Js="";function Zs(e,t){Gs[Vs++]=qs,Gs[Vs++]=Ws,Ws=e,qs=t}function Qs(e,t,r){$s[Ks++]=Ys,$s[Ks++]=Js,$s[Ks++]=Xs,Xs=e;var n=Ys;e=Js;var s=32-it(n)-1;n&=~(1<<s),r+=1;var a=32-it(t)+s;if(30<a){var i=s-s%5;a=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Ys=1<<32-it(t)+s|r<<s|n,Js=a+e}else Ys=1<<a|r<<s|n,Js=e}function ea(e){null!==e.return&&(Zs(e,1),Qs(e,1,0))}function ta(e){for(;e===Ws;)Ws=Gs[--Vs],Gs[Vs]=null,qs=Gs[--Vs],Gs[Vs]=null;for(;e===Xs;)Xs=$s[--Ks],$s[Ks]=null,Js=$s[--Ks],$s[Ks]=null,Ys=$s[--Ks],$s[Ks]=null}var ra=null,na=null,sa=!1,aa=null;function ia(e,t){var r=Rc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function la(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,na=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,na=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Xs?{id:Ys,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Rc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ra=e,na=null,!0);default:return!1}}function oa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(sa){var t=na;if(t){var r=t;if(!la(e,t)){if(oa(e))throw Error(a(418));t=cs(r.nextSibling);var n=ra;t&&la(e,t)?ia(n,r):(e.flags=-4097&e.flags|2,sa=!1,ra=e)}}else{if(oa(e))throw Error(a(418));e.flags=-4097&e.flags|2,sa=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ua(e){if(e!==ra)return!1;if(!sa)return da(e),sa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!rs(e.type,e.memoizedProps)),t&&(t=na)){if(oa(e))throw ma(),Error(a(418));for(;t;)ia(e,t),t=cs(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){na=cs(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}na=null}}else na=ra?cs(e.stateNode.nextSibling):null;return!0}function ma(){for(var e=na;e;)e=cs(e.nextSibling)}function ha(){na=ra=null,sa=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var xa=b.ReactCurrentBatchConfig;function fa(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(a(309));var n=r.stateNode}if(!n)throw Error(a(147,e));var s=n,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=s.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function ya(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,r,n){return null===t||6!==t.tag?((t=Fc(r,e.mode,n)).return=e,t):((t=s(t,r)).return=e,t)}function c(e,t,r,n){var a=r.type;return a===w?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===_&&va(a)===t.type)?((n=s(t,r.props)).ref=fa(e,t,r),n.return=e,n):((n=Pc(r.type,r.key,r.props,null,e.mode,n)).ref=fa(e,t,r),n.return=e,n)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Mc(r,e.mode,n)).return=e,t):((t=s(t,r.children||[])).return=e,t)}function u(e,t,r,n,a){return null===t||7!==t.tag?((t=Oc(r,e.mode,n,a)).return=e,t):((t=s(t,r)).return=e,t)}function m(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case N:return(r=Pc(t.type,t.key,t.props,null,e.mode,r)).ref=fa(e,null,t),r.return=e,r;case j:return(t=Mc(t,e.mode,r)).return=e,t;case _:return m(e,(0,t._init)(t._payload),r)}if(te(t)||O(t))return(t=Oc(t,e.mode,r,null)).return=e,t;ga(e,t)}return null}function h(e,t,r,n){var s=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==s?null:o(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case N:return r.key===s?c(e,t,r,n):null;case j:return r.key===s?d(e,t,r,n):null;case _:return h(e,t,(s=r._init)(r._payload),n)}if(te(r)||O(r))return null!==s?null:u(e,t,r,n,null);ga(e,r)}return null}function p(e,t,r,n,s){if("string"===typeof n&&""!==n||"number"===typeof n)return o(t,e=e.get(r)||null,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case N:return c(t,e=e.get(null===n.key?r:n.key)||null,n,s);case j:return d(t,e=e.get(null===n.key?r:n.key)||null,n,s);case _:return p(e,t,r,(0,n._init)(n._payload),s)}if(te(n)||O(n))return u(t,e=e.get(r)||null,n,s,null);ga(t,n)}return null}function x(s,a,l,o){for(var c=null,d=null,u=a,x=a=0,f=null;null!==u&&x<l.length;x++){u.index>x?(f=u,u=null):f=u.sibling;var g=h(s,u,l[x],o);if(null===g){null===u&&(u=f);break}e&&u&&null===g.alternate&&t(s,u),a=i(g,a,x),null===d?c=g:d.sibling=g,d=g,u=f}if(x===l.length)return r(s,u),sa&&Zs(s,x),c;if(null===u){for(;x<l.length;x++)null!==(u=m(s,l[x],o))&&(a=i(u,a,x),null===d?c=u:d.sibling=u,d=u);return sa&&Zs(s,x),c}for(u=n(s,u);x<l.length;x++)null!==(f=p(u,s,x,l[x],o))&&(e&&null!==f.alternate&&u.delete(null===f.key?x:f.key),a=i(f,a,x),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(s,e)}),sa&&Zs(s,x),c}function f(s,l,o,c){var d=O(o);if("function"!==typeof d)throw Error(a(150));if(null==(o=d.call(o)))throw Error(a(151));for(var u=d=null,x=l,f=l=0,g=null,v=o.next();null!==x&&!v.done;f++,v=o.next()){x.index>f?(g=x,x=null):g=x.sibling;var y=h(s,x,v.value,c);if(null===y){null===x&&(x=g);break}e&&x&&null===y.alternate&&t(s,x),l=i(y,l,f),null===u?d=y:u.sibling=y,u=y,x=g}if(v.done)return r(s,x),sa&&Zs(s,f),d;if(null===x){for(;!v.done;f++,v=o.next())null!==(v=m(s,v.value,c))&&(l=i(v,l,f),null===u?d=v:u.sibling=v,u=v);return sa&&Zs(s,f),d}for(x=n(s,x);!v.done;f++,v=o.next())null!==(v=p(x,s,f,v.value,c))&&(e&&null!==v.alternate&&x.delete(null===v.key?f:v.key),l=i(v,l,f),null===u?d=v:u.sibling=v,u=v);return e&&x.forEach(function(e){return t(s,e)}),sa&&Zs(s,f),d}return function e(n,a,i,o){if("object"===typeof i&&null!==i&&i.type===w&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case N:e:{for(var c=i.key,d=a;null!==d;){if(d.key===c){if((c=i.type)===w){if(7===d.tag){r(n,d.sibling),(a=s(d,i.props.children)).return=n,n=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===_&&va(c)===d.type){r(n,d.sibling),(a=s(d,i.props)).ref=fa(n,d,i),a.return=n,n=a;break e}r(n,d);break}t(n,d),d=d.sibling}i.type===w?((a=Oc(i.props.children,n.mode,o,i.key)).return=n,n=a):((o=Pc(i.type,i.key,i.props,null,n.mode,o)).ref=fa(n,a,i),o.return=n,n=o)}return l(n);case j:e:{for(d=i.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){r(n,a.sibling),(a=s(a,i.children||[])).return=n,n=a;break e}r(n,a);break}t(n,a),a=a.sibling}(a=Mc(i,n.mode,o)).return=n,n=a}return l(n);case _:return e(n,a,(d=i._init)(i._payload),o)}if(te(i))return x(n,a,i,o);if(O(i))return f(n,a,i,o);ga(n,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(r(n,a.sibling),(a=s(a,i)).return=n,n=a):(r(n,a),(a=Fc(i,n.mode,o)).return=n,n=a),l(n)):r(n,a)}}var ba=ya(!0),Na=ya(!1),ja=Ss(null),wa=null,Sa=null,Aa=null;function Ta(){Aa=Sa=wa=null}function Ca(e){var t=ja.current;As(ja),e._currentValue=t}function Ea(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Da(e,t){wa=e,Aa=Sa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vl=!0),e.firstContext=null)}function ka(e){var t=e._currentValue;if(Aa!==e)if(e={context:e,memoizedValue:t,next:null},null===Sa){if(null===wa)throw Error(a(308));Sa=e,wa.dependencies={lanes:0,firstContext:e}}else Sa=Sa.next=e;return t}var Ra=null;function _a(e){null===Ra?Ra=[e]:Ra.push(e)}function Ia(e,t,r,n){var s=t.interleaved;return null===s?(r.next=r,_a(t)):(r.next=s.next,s.next=r),t.interleaved=r,Pa(e,n)}function Pa(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Oa=!1;function La(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ma(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ua(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Eo)){var s=n.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Pa(e,r)}return null===(s=n.interleaved)?(t.next=t,_a(n)):(t.next=s.next,s.next=t),n.interleaved=t,Pa(e,r)}function Ba(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}function Ha(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var s=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?s=a=i:a=a.next=i,r=r.next}while(null!==r);null===a?s=a=t:a=a.next=t}else s=a=t;return r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function za(e,t,r,n){var s=e.updateQueue;Oa=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(null!==l){s.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?a=c:i.next=c,i=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==a){var u=s.baseState;for(i=0,d=c=o=null,l=a;;){var m=l.lane,h=l.eventTime;if((n&m)===m){null!==d&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,x=l;switch(m=t,h=r,x.tag){case 1:if("function"===typeof(p=x.payload)){u=p.call(h,u,m);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(m="function"===typeof(p=x.payload)?p.call(h,u,m):p)||void 0===m)break e;u=F({},u,m);break e;case 2:Oa=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(m=s.effects)?s.effects=[l]:m.push(l))}else h={eventTime:h,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=h,o=u):d=d.next=h,i|=m;if(null===(l=l.next)){if(null===(l=s.shared.pending))break;l=(m=l).next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}if(null===d&&(o=u),s.baseState=o,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===a&&(s.shared.lanes=0);Lo|=i,e.lanes=i,e.memoizedState=u}}function Ga(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(null!==s){if(n.callback=null,n=r,"function"!==typeof s)throw Error(a(191,s));s.call(n)}}}var Va={},Wa=Ss(Va),qa=Ss(Va),$a=Ss(Va);function Ka(e){if(e===Va)throw Error(a(174));return e}function Xa(e,t){switch(Ts($a,t),Ts(qa,e),Ts(Wa,Va),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}As(Wa),Ts(Wa,t)}function Ya(){As(Wa),As(qa),As($a)}function Ja(e){Ka($a.current);var t=Ka(Wa.current),r=oe(t,e.type);t!==r&&(Ts(qa,e),Ts(Wa,r))}function Za(e){qa.current===e&&(As(Wa),As(qa))}var Qa=Ss(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ri(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ni=b.ReactCurrentDispatcher,si=b.ReactCurrentBatchConfig,ai=0,ii=null,li=null,oi=null,ci=!1,di=!1,ui=0,mi=0;function hi(){throw Error(a(321))}function pi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ln(e[r],t[r]))return!1;return!0}function xi(e,t,r,n,s,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ni.current=null===e||null===e.memoizedState?Zi:Qi,e=r(n,s),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(a(301));i+=1,oi=li=null,t.updateQueue=null,ni.current=el,e=r(n,s)}while(di)}if(ni.current=Ji,t=null!==li&&null!==li.next,ai=0,oi=li=ii=null,ci=!1,t)throw Error(a(300));return e}function fi(){var e=0!==ui;return ui=0,e}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oi?ii.memoizedState=oi=e:oi=oi.next=e,oi}function vi(){if(null===li){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===oi?ii.memoizedState:oi.next;if(null!==t)oi=t,li=e;else{if(null===e)throw Error(a(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===oi?ii.memoizedState=oi=e:oi=oi.next=e}return oi}function yi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=vi(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=li,s=n.baseQueue,i=r.pending;if(null!==i){if(null!==s){var l=s.next;s.next=i.next,i.next=l}n.baseQueue=s=i,r.pending=null}if(null!==s){i=s.next,n=n.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((ai&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(o=c=m,l=n):c=c.next=m,ii.lanes|=u,Lo|=u}d=d.next}while(null!==d&&d!==i);null===c?l=n:c.next=o,ln(n,t.memoizedState)||(vl=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){s=e;do{i=s.lane,ii.lanes|=i,Lo|=i,s=s.next}while(s!==e)}else null===s&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ni(e){var t=vi(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(null!==s){r.pending=null;var l=s=s.next;do{i=e(i,l.action),l=l.next}while(l!==s);ln(i,t.memoizedState)||(vl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function ji(){}function wi(e,t){var r=ii,n=vi(),s=t(),i=!ln(n.memoizedState,s);if(i&&(n.memoizedState=s,vl=!0),n=n.queue,Oi(Ti.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||null!==oi&&1&oi.memoizedState.tag){if(r.flags|=2048,ki(9,Ai.bind(null,r,n,s,t),void 0,null),null===Do)throw Error(a(349));0!==(30&ai)||Si(r,t,s)}return s}function Si(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ai(e,t,r,n){t.value=r,t.getSnapshot=n,Ci(t)&&Ei(e)}function Ti(e,t,r){return r(function(){Ci(t)&&Ei(e)})}function Ci(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ln(e,r)}catch(n){return!0}}function Ei(e){var t=Pa(e,1);null!==t&&rc(t,e,1,-1)}function Di(e){var t=gi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:e},t.queue=e,e=e.dispatch=$i.bind(null,ii,e),[t.memoizedState,e]}function ki(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ri(){return vi().memoizedState}function _i(e,t,r,n){var s=gi();ii.flags|=e,s.memoizedState=ki(1|t,r,void 0,void 0===n?null:n)}function Ii(e,t,r,n){var s=vi();n=void 0===n?null:n;var a=void 0;if(null!==li){var i=li.memoizedState;if(a=i.destroy,null!==n&&pi(n,i.deps))return void(s.memoizedState=ki(t,r,a,n))}ii.flags|=e,s.memoizedState=ki(1|t,r,a,n)}function Pi(e,t){return _i(8390656,8,e,t)}function Oi(e,t){return Ii(2048,8,e,t)}function Li(e,t){return Ii(4,2,e,t)}function Fi(e,t){return Ii(4,4,e,t)}function Mi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ui(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ii(4,4,Mi.bind(null,t,e),r)}function Bi(){}function Hi(e,t){var r=vi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function zi(e,t){var r=vi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Gi(e,t,r){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,vl=!0),e.memoizedState=r):(ln(r,t)||(r=xt(),ii.lanes|=r,Lo|=r,e.baseState=!0),t)}function Vi(e,t){var r=yt;yt=0!==r&&4>r?r:4,e(!0);var n=si.transition;si.transition={};try{e(!1),t()}finally{yt=r,si.transition=n}}function Wi(){return vi().memoizedState}function qi(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ki(e))Xi(t,r);else if(null!==(r=Ia(e,t,r,n))){rc(r,e,n,ec()),Yi(r,t,n)}}function $i(e,t,r){var n=tc(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ki(e))Xi(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=a(i,r);if(s.hasEagerState=!0,s.eagerState=l,ln(l,i)){var o=t.interleaved;return null===o?(s.next=s,_a(t)):(s.next=o.next,o.next=s),void(t.interleaved=s)}}catch(c){}null!==(r=Ia(e,t,s,n))&&(rc(r,e,n,s=ec()),Yi(r,t,n))}}function Ki(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Xi(e,t){di=ci=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Yi(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}var Ji={readContext:ka,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},Zi={readContext:ka,useCallback:function(e,t){return gi().memoizedState=[e,void 0===t?null:t],e},useContext:ka,useEffect:Pi,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,_i(4194308,4,Mi.bind(null,t,e),r)},useLayoutEffect:function(e,t){return _i(4194308,4,e,t)},useInsertionEffect:function(e,t){return _i(4,2,e,t)},useMemo:function(e,t){var r=gi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=gi();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=qi.bind(null,ii,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},gi().memoizedState=e},useState:Di,useDebugValue:Bi,useDeferredValue:function(e){return gi().memoizedState=e},useTransition:function(){var e=Di(!1),t=e[0];return e=Vi.bind(null,e[1]),gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ii,s=gi();if(sa){if(void 0===r)throw Error(a(407));r=r()}else{if(r=t(),null===Do)throw Error(a(349));0!==(30&ai)||Si(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Pi(Ti.bind(null,n,i,e),[e]),n.flags|=2048,ki(9,Ai.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=gi(),t=Do.identifierPrefix;if(sa){var r=Js;t=":"+t+"R"+(r=(Ys&~(1<<32-it(Ys)-1)).toString(32)+r),0<(r=ui++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=mi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Qi={readContext:ka,useCallback:Hi,useContext:ka,useEffect:Oi,useImperativeHandle:Ui,useInsertionEffect:Li,useLayoutEffect:Fi,useMemo:zi,useReducer:bi,useRef:Ri,useState:function(){return bi(yi)},useDebugValue:Bi,useDeferredValue:function(e){return Gi(vi(),li.memoizedState,e)},useTransition:function(){return[bi(yi)[0],vi().memoizedState]},useMutableSource:ji,useSyncExternalStore:wi,useId:Wi,unstable_isNewReconciler:!1},el={readContext:ka,useCallback:Hi,useContext:ka,useEffect:Oi,useImperativeHandle:Ui,useInsertionEffect:Li,useLayoutEffect:Fi,useMemo:zi,useReducer:Ni,useRef:Ri,useState:function(){return Ni(yi)},useDebugValue:Bi,useDeferredValue:function(e){var t=vi();return null===li?t.memoizedState=e:Gi(t,li.memoizedState,e)},useTransition:function(){return[Ni(yi)[0],vi().memoizedState]},useMutableSource:ji,useSyncExternalStore:wi,useId:Wi,unstable_isNewReconciler:!1};function tl(e,t){if(e&&e.defaultProps){for(var r in t=F({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function rl(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:F({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var nl={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),s=tc(e),a=Ma(n,s);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Ua(e,a,s))&&(rc(t,e,s,n),Ba(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),s=tc(e),a=Ma(n,s);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Ua(e,a,s))&&(rc(t,e,s,n),Ba(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),s=Ma(r,n);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Ua(e,s,n))&&(rc(t,e,n,r),Ba(t,e,n))}};function sl(e,t,r,n,s,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!on(r,n)||!on(s,a))}function al(e,t,r){var n=!1,s=Cs,a=t.contextType;return"object"===typeof a&&null!==a?a=ka(a):(s=_s(t)?ks:Es.current,a=(n=null!==(n=t.contextTypes)&&void 0!==n)?Rs(e,s):Cs),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=nl,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function il(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&nl.enqueueReplaceState(t,t.state,null)}function ll(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},La(e);var a=t.contextType;"object"===typeof a&&null!==a?s.context=ka(a):(a=_s(t)?ks:Es.current,s.context=Rs(e,a)),s.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(rl(e,t,a,r),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&nl.enqueueReplaceState(s,s.state,null),za(e,r,s,n),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function ol(e,t){try{var r="",n=t;do{r+=H(n),n=n.return}while(n);var s=r}catch(a){s="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:s,digest:null}}function cl(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function dl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ul="function"===typeof WeakMap?WeakMap:Map;function ml(e,t,r){(r=Ma(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Vo||(Vo=!0,Wo=n),dl(0,t)},r}function hl(e,t,r){(r=Ma(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){dl(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(r.callback=function(){dl(0,t),"function"!==typeof n&&(null===qo?qo=new Set([this]):qo.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function pl(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ul;var s=new Set;n.set(t,s)}else void 0===(s=n.get(t))&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Ac.bind(null,e,t,r),t.then(e,e))}function xl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function fl(e,t,r,n,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ma(-1,1)).tag=2,Ua(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var gl=b.ReactCurrentOwner,vl=!1;function yl(e,t,r,n){t.child=null===e?Na(t,null,r,n):ba(t,e.child,r,n)}function bl(e,t,r,n,s){r=r.render;var a=t.ref;return Da(t,s),n=xi(e,t,r,n,a,s),r=fi(),null===e||vl?(sa&&r&&ea(t),t.flags|=1,yl(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Gl(e,t,s))}function Nl(e,t,r,n,s){if(null===e){var a=r.type;return"function"!==typeof a||_c(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Pc(r.type,null,n,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,jl(e,t,a,n,s))}if(a=e.child,0===(e.lanes&s)){var i=a.memoizedProps;if((r=null!==(r=r.compare)?r:on)(i,n)&&e.ref===t.ref)return Gl(e,t,s)}return t.flags|=1,(e=Ic(a,n)).ref=t.ref,e.return=t,t.child=e}function jl(e,t,r,n,s){if(null!==e){var a=e.memoizedProps;if(on(a,n)&&e.ref===t.ref){if(vl=!1,t.pendingProps=n=a,0===(e.lanes&s))return t.lanes=e.lanes,Gl(e,t,s);0!==(131072&e.flags)&&(vl=!0)}}return Al(e,t,r,n,s)}function wl(e,t,r){var n=t.pendingProps,s=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ts(Io,_o),_o|=r;else{if(0===(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ts(Io,_o),_o|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==a?a.baseLanes:r,Ts(Io,_o),_o|=n}else null!==a?(n=a.baseLanes|r,t.memoizedState=null):n=r,Ts(Io,_o),_o|=n;return yl(e,t,s,r),t.child}function Sl(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Al(e,t,r,n,s){var a=_s(r)?ks:Es.current;return a=Rs(t,a),Da(t,s),r=xi(e,t,r,n,a,s),n=fi(),null===e||vl?(sa&&n&&ea(t),t.flags|=1,yl(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Gl(e,t,s))}function Tl(e,t,r,n,s){if(_s(r)){var a=!0;Ls(t)}else a=!1;if(Da(t,s),null===t.stateNode)zl(e,t),al(t,r,n),ll(t,r,n,s),n=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var o=i.context,c=r.contextType;"object"===typeof c&&null!==c?c=ka(c):c=Rs(t,c=_s(r)?ks:Es.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==n||o!==c)&&il(t,i,n,c),Oa=!1;var m=t.memoizedState;i.state=m,za(t,n,i,s),o=t.memoizedState,l!==n||m!==o||Ds.current||Oa?("function"===typeof d&&(rl(t,r,d,n),o=t.memoizedState),(l=Oa||sl(t,r,l,n,m,o,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=o),i.props=n,i.state=o,i.context=c,n=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Fa(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:tl(t.type,l),i.props=c,u=t.pendingProps,m=i.context,"object"===typeof(o=r.contextType)&&null!==o?o=ka(o):o=Rs(t,o=_s(r)?ks:Es.current);var h=r.getDerivedStateFromProps;(d="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==u||m!==o)&&il(t,i,n,o),Oa=!1,m=t.memoizedState,i.state=m,za(t,n,i,s);var p=t.memoizedState;l!==u||m!==p||Ds.current||Oa?("function"===typeof h&&(rl(t,r,h,n),p=t.memoizedState),(c=Oa||sl(t,r,c,n,m,p,o)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,p,o),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,p,o)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),i.props=n,i.state=p,i.context=o,n=c):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return Cl(e,t,r,n,a,s)}function Cl(e,t,r,n,s,a){Sl(e,t);var i=0!==(128&t.flags);if(!n&&!i)return s&&Fs(t,r,!1),Gl(e,t,a);n=t.stateNode,gl.current=t;var l=i&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=ba(t,e.child,null,a),t.child=ba(t,null,l,a)):yl(e,t,l,a),t.memoizedState=n.state,s&&Fs(t,r,!0),t.child}function El(e){var t=e.stateNode;t.pendingContext?Ps(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ps(0,t.context,!1),Xa(e,t.containerInfo)}function Dl(e,t,r,n,s){return ha(),pa(s),t.flags|=256,yl(e,t,r,n),t.child}var kl,Rl,_l,Il,Pl={dehydrated:null,treeContext:null,retryLane:0};function Ol(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ll(e,t,r){var n,s=t.pendingProps,i=Qa.current,l=!1,o=0!==(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&0!==(2&i)),n?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ts(Qa,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=s.children,e=s.fallback,l?(s=t.mode,l=t.child,o={mode:"hidden",children:o},0===(1&s)&&null!==l?(l.childLanes=0,l.pendingProps=o):l=Lc(o,s,0,null),e=Oc(e,s,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ol(r),t.memoizedState=Pl,e):Fl(t,o));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,r,n,s,i,l){if(r)return 256&t.flags?(t.flags&=-257,Ml(e,t,l,n=cl(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Lc({mode:"visible",children:n.children},s,0,null),(i=Oc(i,s,l,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,0!==(1&t.mode)&&ba(t,e.child,null,l),t.child.memoizedState=Ol(l),t.memoizedState=Pl,i);if(0===(1&t.mode))return Ml(e,t,l,null);if("$!"===s.data){if(n=s.nextSibling&&s.nextSibling.dataset)var o=n.dgst;return n=o,Ml(e,t,l,n=cl(i=Error(a(419)),n,void 0))}if(o=0!==(l&e.childLanes),vl||o){if(null!==(n=Do)){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(n.suspendedLanes|l))?0:s)&&s!==i.retryLane&&(i.retryLane=s,Pa(e,s),rc(n,e,s,-1))}return xc(),Ml(e,t,l,n=cl(Error(a(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,na=cs(s.nextSibling),ra=t,sa=!0,aa=null,null!==e&&($s[Ks++]=Ys,$s[Ks++]=Js,$s[Ks++]=Xs,Ys=e.id,Js=e.overflow,Xs=t),t=Fl(t,n.children),t.flags|=4096,t)}(e,t,o,s,n,i,r);if(l){l=s.fallback,o=t.mode,n=(i=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&o)&&t.child!==i?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Ic(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==n?l=Ic(n,l):(l=Oc(l,o,r,null)).flags|=2,l.return=t,s.return=t,s.sibling=l,t.child=s,s=l,l=t.child,o=null===(o=e.child.memoizedState)?Ol(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~r,t.memoizedState=Pl,s}return e=(l=e.child).sibling,s=Ic(l,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=r),s.return=t,s.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Fl(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ml(e,t,r,n){return null!==n&&pa(n),ba(t,e.child,null,r),(e=Fl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ul(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ea(e.return,t,r)}function Bl(e,t,r,n,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Hl(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(yl(e,t,n.children,r),0!==(2&(n=Qa.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ul(e,r,t);else if(19===e.tag)Ul(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ts(Qa,n),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;null!==r;)null!==(e=r.alternate)&&null===ei(e)&&(s=r),r=r.sibling;null===(r=s)?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Bl(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ei(e)){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Bl(t,!0,r,null,a);break;case"together":Bl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zl(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gl(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Lo|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(r=Ic(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ic(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Vl(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Wl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=14680064&s.subtreeFlags,n|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ql(e,t,r){var n=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wl(t),null;case 1:case 17:return _s(t.type)&&Is(),Wl(t),null;case 3:return n=t.stateNode,Ya(),As(Ds),As(Es),ri(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ic(aa),aa=null))),Rl(e,t),Wl(t),null;case 5:Za(t);var s=Ka($a.current);if(r=t.type,null!==e&&null!=t.stateNode)_l(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(a(166));return Wl(t),null}if(e=Ka(Wa.current),ua(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ms]=t,n[hs]=i,e=0!==(1&t.mode),r){case"dialog":Un("cancel",n),Un("close",n);break;case"iframe":case"object":case"embed":Un("load",n);break;case"video":case"audio":for(s=0;s<On.length;s++)Un(On[s],n);break;case"source":Un("error",n);break;case"img":case"image":case"link":Un("error",n),Un("load",n);break;case"details":Un("toggle",n);break;case"input":Y(n,i),Un("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Un("invalid",n);break;case"textarea":se(n,i),Un("invalid",n)}for(var o in ve(r,i),s=null,i)if(i.hasOwnProperty(o)){var c=i[o];"children"===o?"string"===typeof c?n.textContent!==c&&(!0!==i.suppressHydrationWarning&&Zn(n.textContent,c,e),s=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Zn(n.textContent,c,e),s=["children",""+c]):l.hasOwnProperty(o)&&null!=c&&"onScroll"===o&&Un("scroll",n)}switch(r){case"input":q(n),Q(n,i,!0);break;case"textarea":q(n),ie(n);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(n.onclick=Qn)}n=s,t.updateQueue=n,null!==n&&(t.flags|=4)}else{o=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),"select"===r&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ms]=t,e[hs]=n,kl(e,t,!1,!1),t.stateNode=e;e:{switch(o=ye(r,n),r){case"dialog":Un("cancel",e),Un("close",e),s=n;break;case"iframe":case"object":case"embed":Un("load",e),s=n;break;case"video":case"audio":for(s=0;s<On.length;s++)Un(On[s],e);s=n;break;case"source":Un("error",e),s=n;break;case"img":case"image":case"link":Un("error",e),Un("load",e),s=n;break;case"details":Un("toggle",e),s=n;break;case"input":Y(e,n),s=X(e,n),Un("invalid",e);break;case"option":default:s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=F({},n,{value:void 0}),Un("invalid",e);break;case"textarea":se(e,n),s=ne(e,n),Un("invalid",e)}for(i in ve(r,s),c=s)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?fe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==r||""!==d)&&me(e,d):"number"===typeof d&&me(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Un("scroll",e):null!=d&&y(e,i,d,o))}switch(r){case"input":q(e),Q(e,n,!1);break;case"textarea":q(e),ie(e);break;case"option":null!=n.value&&e.setAttribute("value",""+V(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?re(e,!!n.multiple,i,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Qn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wl(t),null;case 6:if(e&&null!=t.stateNode)Il(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(a(166));if(r=Ka($a.current),Ka(Wa.current),ua(t)){if(n=t.stateNode,r=t.memoizedProps,n[ms]=t,(i=n.nodeValue!==r)&&null!==(e=ra))switch(e.tag){case 3:Zn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zn(n.nodeValue,r,0!==(1&e.mode))}i&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[ms]=t,t.stateNode=n}return Wl(t),null;case 13:if(As(Qa),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sa&&null!==na&&0!==(1&t.mode)&&0===(128&t.flags))ma(),ha(),t.flags|=98560,i=!1;else if(i=ua(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[ms]=t}else ha(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wl(t),i=!1}else null!==aa&&(ic(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Qa.current)?0===Po&&(Po=3):xc())),null!==t.updateQueue&&(t.flags|=4),Wl(t),null);case 4:return Ya(),Rl(e,t),null===e&&zn(t.stateNode.containerInfo),Wl(t),null;case 10:return Ca(t.type._context),Wl(t),null;case 19:if(As(Qa),null===(i=t.memoizedState))return Wl(t),null;if(n=0!==(128&t.flags),null===(o=i.rendering))if(n)Vl(i,!1);else{if(0!==Po||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ei(e))){for(t.flags|=128,Vl(i,!1),null!==(n=o.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(i=r).flags&=14680066,null===(o=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ts(Qa,1&Qa.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>zo&&(t.flags|=128,n=!0,Vl(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ei(o))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Vl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!sa)return Wl(t),null}else 2*Je()-i.renderingStartTime>zo&&1073741824!==r&&(t.flags|=128,n=!0,Vl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(r=i.last)?r.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,r=Qa.current,Ts(Qa,n?1&r|2:1&r),t):(Wl(t),null);case 22:case 23:return uc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&_o)&&(Wl(t),6&t.subtreeFlags&&(t.flags|=8192)):Wl(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $l(e,t){switch(ta(t),t.tag){case 1:return _s(t.type)&&Is(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ya(),As(Ds),As(Es),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(As(Qa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ha()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return As(Qa),null;case 4:return Ya(),null;case 10:return Ca(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}kl=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Rl=function(){},_l=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Ka(Wa.current);var a,i=null;switch(r){case"input":s=X(e,s),n=X(e,n),i=[];break;case"select":s=F({},s,{value:void 0}),n=F({},n,{value:void 0}),i=[];break;case"textarea":s=ne(e,s),n=ne(e,n),i=[];break;default:"function"!==typeof s.onClick&&"function"===typeof n.onClick&&(e.onclick=Qn)}for(d in ve(r,n),r=null,s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var o=s[d];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(o=null!=s?s[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(null!=c||null!=o))if("style"===d)if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,o=o?o.__html:void 0,null!=c&&o!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Un("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Il=function(e,t,r,n){r!==n&&(t.flags|=4)};var Kl=!1,Xl=!1,Yl="function"===typeof WeakSet?WeakSet:Set,Jl=null;function Zl(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Sc(e,t,n)}else r.current=null}function Ql(e,t,r){try{r()}catch(n){Sc(e,t,n)}}var eo=!1;function to(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,void 0!==a&&Ql(t,r,a)}s=s.next}while(s!==n)}}function ro(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function no(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function so(e){var t=e.alternate;null!==t&&(e.alternate=null,so(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ms],delete t[hs],delete t[xs],delete t[fs],delete t[gs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ao(e){return 5===e.tag||3===e.tag||4===e.tag}function io(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ao(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lo(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Qn));else if(4!==n&&null!==(e=e.child))for(lo(e,t,r),e=e.sibling;null!==e;)lo(e,t,r),e=e.sibling}function oo(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(oo(e,t,r),e=e.sibling;null!==e;)oo(e,t,r),e=e.sibling}var co=null,uo=!1;function mo(e,t,r){for(r=r.child;null!==r;)ho(e,t,r),r=r.sibling}function ho(e,t,r){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(st,r)}catch(l){}switch(r.tag){case 5:Xl||Zl(r,t);case 6:var n=co,s=uo;co=null,mo(e,t,r),uo=s,null!==(co=n)&&(uo?(e=co,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):co.removeChild(r.stateNode));break;case 18:null!==co&&(uo?(e=co,r=r.stateNode,8===e.nodeType?os(e.parentNode,r):1===e.nodeType&&os(e,r),zt(e)):os(co,r.stateNode));break;case 4:n=co,s=uo,co=r.stateNode.containerInfo,uo=!0,mo(e,t,r),co=n,uo=s;break;case 0:case 11:case 14:case 15:if(!Xl&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){s=n=n.next;do{var a=s,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&Ql(r,t,i),s=s.next}while(s!==n)}mo(e,t,r);break;case 1:if(!Xl&&(Zl(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Sc(r,t,l)}mo(e,t,r);break;case 21:mo(e,t,r);break;case 22:1&r.mode?(Xl=(n=Xl)||null!==r.memoizedState,mo(e,t,r),Xl=n):mo(e,t,r);break;default:mo(e,t,r)}}function po(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Yl),t.forEach(function(t){var n=Ec.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function xo(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,l=t,o=l;e:for(;null!==o;){switch(o.tag){case 5:co=o.stateNode,uo=!1;break e;case 3:case 4:co=o.stateNode.containerInfo,uo=!0;break e}o=o.return}if(null===co)throw Error(a(160));ho(i,l,s),co=null,uo=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(d){Sc(s,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fo(t,e),t=t.sibling}function fo(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xo(t,e),go(e),4&n){try{to(3,e,e.return),ro(3,e)}catch(f){Sc(e,e.return,f)}try{to(5,e,e.return)}catch(f){Sc(e,e.return,f)}}break;case 1:xo(t,e),go(e),512&n&&null!==r&&Zl(r,r.return);break;case 5:if(xo(t,e),go(e),512&n&&null!==r&&Zl(r,r.return),32&e.flags){var s=e.stateNode;try{me(s,"")}catch(f){Sc(e,e.return,f)}}if(4&n&&null!=(s=e.stateNode)){var i=e.memoizedProps,l=null!==r?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===o&&"radio"===i.type&&null!=i.name&&J(s,i),ye(o,l);var d=ye(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];"style"===u?fe(s,m):"dangerouslySetInnerHTML"===u?ue(s,m):"children"===u?me(s,m):y(s,u,m,d)}switch(o){case"input":Z(s,i);break;case"textarea":ae(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?re(s,!!i.multiple,p,!1):h!==!!i.multiple&&(null!=i.defaultValue?re(s,!!i.multiple,i.defaultValue,!0):re(s,!!i.multiple,i.multiple?[]:"",!1))}s[hs]=i}catch(f){Sc(e,e.return,f)}}break;case 6:if(xo(t,e),go(e),4&n){if(null===e.stateNode)throw Error(a(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(f){Sc(e,e.return,f)}}break;case 3:if(xo(t,e),go(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(f){Sc(e,e.return,f)}break;case 4:default:xo(t,e),go(e);break;case 13:xo(t,e),go(e),8192&(s=e.child).flags&&(i=null!==s.memoizedState,s.stateNode.isHidden=i,!i||null!==s.alternate&&null!==s.alternate.memoizedState||(Ho=Je())),4&n&&po(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Xl=(d=Xl)||u,xo(t,e),Xl=d):xo(t,e),go(e),8192&n){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Jl=e,u=e.child;null!==u;){for(m=Jl=u;null!==Jl;){switch(p=(h=Jl).child,h.tag){case 0:case 11:case 14:case 15:to(4,h,h.return);break;case 1:Zl(h,h.return);var x=h.stateNode;if("function"===typeof x.componentWillUnmount){n=h,r=h.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(f){Sc(n,r,f)}}break;case 5:Zl(h,h.return);break;case 22:if(null!==h.memoizedState){No(m);continue}}null!==p?(p.return=h,Jl=p):No(m)}u=u.sibling}e:for(u=null,m=e;;){if(5===m.tag){if(null===u){u=m;try{s=m.stateNode,d?"function"===typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none":(o=m.stateNode,l=void 0!==(c=m.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,o.style.display=xe("display",l))}catch(f){Sc(e,e.return,f)}}}else if(6===m.tag){if(null===u)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(f){Sc(e,e.return,f)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:xo(t,e),go(e),4&n&&po(e);case 21:}}function go(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ao(r)){var n=r;break e}r=r.return}throw Error(a(160))}switch(n.tag){case 5:var s=n.stateNode;32&n.flags&&(me(s,""),n.flags&=-33),oo(e,io(e),s);break;case 3:case 4:var i=n.stateNode.containerInfo;lo(e,io(e),i);break;default:throw Error(a(161))}}catch(l){Sc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vo(e,t,r){Jl=e,yo(e,t,r)}function yo(e,t,r){for(var n=0!==(1&e.mode);null!==Jl;){var s=Jl,a=s.child;if(22===s.tag&&n){var i=null!==s.memoizedState||Kl;if(!i){var l=s.alternate,o=null!==l&&null!==l.memoizedState||Xl;l=Kl;var c=Xl;if(Kl=i,(Xl=o)&&!c)for(Jl=s;null!==Jl;)o=(i=Jl).child,22===i.tag&&null!==i.memoizedState?jo(s):null!==o?(o.return=i,Jl=o):jo(s);for(;null!==a;)Jl=a,yo(a,t,r),a=a.sibling;Jl=s,Kl=l,Xl=c}bo(e)}else 0!==(8772&s.subtreeFlags)&&null!==a?(a.return=s,Jl=a):bo(e)}}function bo(e){for(;null!==Jl;){var t=Jl;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xl||ro(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Xl)if(null===r)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:tl(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ga(t,i,n);break;case 3:var l=t.updateQueue;if(null!==l){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Ga(t,l,r)}break;case 5:var o=t.stateNode;if(null===r&&4&t.flags){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&zt(m)}}}break;default:throw Error(a(163))}Xl||512&t.flags&&no(t)}catch(h){Sc(t,t.return,h)}}if(t===e){Jl=null;break}if(null!==(r=t.sibling)){r.return=t.return,Jl=r;break}Jl=t.return}}function No(e){for(;null!==Jl;){var t=Jl;if(t===e){Jl=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Jl=r;break}Jl=t.return}}function jo(e){for(;null!==Jl;){var t=Jl;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ro(4,t)}catch(o){Sc(t,r,o)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var s=t.return;try{n.componentDidMount()}catch(o){Sc(t,s,o)}}var a=t.return;try{no(t)}catch(o){Sc(t,a,o)}break;case 5:var i=t.return;try{no(t)}catch(o){Sc(t,i,o)}}}catch(o){Sc(t,t.return,o)}if(t===e){Jl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Jl=l;break}Jl=t.return}}var wo,So=Math.ceil,Ao=b.ReactCurrentDispatcher,To=b.ReactCurrentOwner,Co=b.ReactCurrentBatchConfig,Eo=0,Do=null,ko=null,Ro=0,_o=0,Io=Ss(0),Po=0,Oo=null,Lo=0,Fo=0,Mo=0,Uo=null,Bo=null,Ho=0,zo=1/0,Go=null,Vo=!1,Wo=null,qo=null,$o=!1,Ko=null,Xo=0,Yo=0,Jo=null,Zo=-1,Qo=0;function ec(){return 0!==(6&Eo)?Je():-1!==Zo?Zo:Zo=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Eo)&&0!==Ro?Ro&-Ro:null!==xa.transition?(0===Qo&&(Qo=xt()),Qo):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,r,n){if(50<Yo)throw Yo=0,Jo=null,Error(a(185));gt(e,r,n),0!==(2&Eo)&&e===Do||(e===Do&&(0===(2&Eo)&&(Fo|=r),4===Po&&lc(e,Ro)),nc(e,n),1===r&&0===Eo&&0===(1&t.mode)&&(zo=Je()+500,Us&&zs()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),l=1<<i,o=s[i];-1===o?0!==(l&r)&&0===(l&n)||(s[i]=ht(l,t)):o<=t&&(e.expiredLanes|=l),a&=~l}}(e,t);var n=mt(e,e===Do?Ro:0);if(0===n)null!==r&&Ke(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ke(r),1===t)0===e.tag?function(e){Us=!0,Hs(e)}(oc.bind(null,e)):Hs(oc.bind(null,e)),is(function(){0===(6&Eo)&&zs()}),r=null;else{switch(bt(n)){case 1:r=Qe;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Dc(r,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function sc(e,t){if(Zo=-1,Qo=0,0!==(6&Eo))throw Error(a(327));var r=e.callbackNode;if(jc()&&e.callbackNode!==r)return null;var n=mt(e,e===Do?Ro:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=fc(e,n);else{t=n;var s=Eo;Eo|=2;var i=pc();for(Do===e&&Ro===t||(Go=null,zo=Je()+500,mc(e,t));;)try{vc();break}catch(o){hc(e,o)}Ta(),Ao.current=i,Eo=s,null!==ko?t=0:(Do=null,Ro=0,t=Po)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(n=s,t=ac(e,s))),1===t)throw r=Oo,mc(e,0),lc(e,n),nc(e,Je()),r;if(6===t)lc(e,n);else{if(s=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!ln(a(),s))return!1}catch(l){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=fc(e,n))&&(0!==(i=pt(e))&&(n=i,t=ac(e,i))),1===t))throw r=Oo,mc(e,0),lc(e,n),nc(e,Je()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(a(345));case 2:case 5:Nc(e,Bo,Go);break;case 3:if(lc(e,n),(130023424&n)===n&&10<(t=Ho+500-Je())){if(0!==mt(e,0))break;if(((s=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ns(Nc.bind(null,e,Bo,Go),t);break}Nc(e,Bo,Go);break;case 4:if(lc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,s=-1;0<n;){var l=31-it(n);i=1<<l,(l=t[l])>s&&(s=l),n&=~i}if(n=s,10<(n=(120>(n=Je()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*So(n/1960))-n)){e.timeoutHandle=ns(Nc.bind(null,e,Bo,Go),n);break}Nc(e,Bo,Go);break;default:throw Error(a(329))}}}return nc(e,Je()),e.callbackNode===r?sc.bind(null,e):null}function ac(e,t){var r=Uo;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=fc(e,t))&&(t=Bo,Bo=r,null!==t&&ic(t)),e}function ic(e){null===Bo?Bo=e:Bo.push.apply(Bo,e)}function lc(e,t){for(t&=~Mo,t&=~Fo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),n=1<<r;e[r]=-1,t&=~n}}function oc(e){if(0!==(6&Eo))throw Error(a(327));jc();var t=mt(e,0);if(0===(1&t))return nc(e,Je()),null;var r=fc(e,t);if(0!==e.tag&&2===r){var n=pt(e);0!==n&&(t=n,r=ac(e,n))}if(1===r)throw r=Oo,mc(e,0),lc(e,t),nc(e,Je()),r;if(6===r)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nc(e,Bo,Go),nc(e,Je()),null}function cc(e,t){var r=Eo;Eo|=1;try{return e(t)}finally{0===(Eo=r)&&(zo=Je()+500,Us&&zs())}}function dc(e){null!==Ko&&0===Ko.tag&&0===(6&Eo)&&jc();var t=Eo;Eo|=1;var r=Co.transition,n=yt;try{if(Co.transition=null,yt=1,e)return e()}finally{yt=n,Co.transition=r,0===(6&(Eo=t))&&zs()}}function uc(){_o=Io.current,As(Io)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ss(r)),null!==ko)for(r=ko.return;null!==r;){var n=r;switch(ta(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Is();break;case 3:Ya(),As(Ds),As(Es),ri();break;case 5:Za(n);break;case 4:Ya();break;case 13:case 19:As(Qa);break;case 10:Ca(n.type._context);break;case 22:case 23:uc()}r=r.return}if(Do=e,ko=e=Ic(e.current,null),Ro=_o=t,Po=0,Oo=null,Mo=Fo=Lo=0,Bo=Uo=null,null!==Ra){for(t=0;t<Ra.length;t++)if(null!==(n=(r=Ra[t]).interleaved)){r.interleaved=null;var s=n.next,a=r.pending;if(null!==a){var i=a.next;a.next=s,n.next=i}r.pending=n}Ra=null}return e}function hc(e,t){for(;;){var r=ko;try{if(Ta(),ni.current=Ji,ci){for(var n=ii.memoizedState;null!==n;){var s=n.queue;null!==s&&(s.pending=null),n=n.next}ci=!1}if(ai=0,oi=li=ii=null,di=!1,ui=0,To.current=null,null===r||null===r.return){Po=1,Oo=t,ko=null;break}e:{var i=e,l=r.return,o=r,c=t;if(t=Ro,o.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=o,m=u.tag;if(0===(1&u.mode)&&(0===m||11===m||15===m)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=xl(l);if(null!==p){p.flags&=-257,fl(p,l,o,0,t),1&p.mode&&pl(i,d,t),c=d;var x=(t=p).updateQueue;if(null===x){var f=new Set;f.add(c),t.updateQueue=f}else x.add(c);break e}if(0===(1&t)){pl(i,d,t),xc();break e}c=Error(a(426))}else if(sa&&1&o.mode){var g=xl(l);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),fl(g,l,o,0,t),pa(ol(c,o));break e}}i=c=ol(c,o),4!==Po&&(Po=2),null===Uo?Uo=[i]:Uo.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ha(i,ml(0,c,t));break e;case 1:o=c;var v=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===qo||!qo.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,Ha(i,hl(i,o,t));break e}}i=i.return}while(null!==i)}bc(r)}catch(b){t=b,ko===r&&null!==r&&(ko=r=r.return);continue}break}}function pc(){var e=Ao.current;return Ao.current=Ji,null===e?Ji:e}function xc(){0!==Po&&3!==Po&&2!==Po||(Po=4),null===Do||0===(268435455&Lo)&&0===(268435455&Fo)||lc(Do,Ro)}function fc(e,t){var r=Eo;Eo|=2;var n=pc();for(Do===e&&Ro===t||(Go=null,mc(e,t));;)try{gc();break}catch(s){hc(e,s)}if(Ta(),Eo=r,Ao.current=n,null!==ko)throw Error(a(261));return Do=null,Ro=0,Po}function gc(){for(;null!==ko;)yc(ko)}function vc(){for(;null!==ko&&!Xe();)yc(ko)}function yc(e){var t=wo(e.alternate,e,_o);e.memoizedProps=e.pendingProps,null===t?bc(e):ko=t,To.current=null}function bc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=ql(r,t,_o)))return void(ko=r)}else{if(null!==(r=$l(r,t)))return r.flags&=32767,void(ko=r);if(null===e)return Po=6,void(ko=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(ko=t);ko=t=e}while(null!==t);0===Po&&(Po=5)}function Nc(e,t,r){var n=yt,s=Co.transition;try{Co.transition=null,yt=1,function(e,t,r,n){do{jc()}while(null!==Ko);if(0!==(6&Eo))throw Error(a(327));r=e.finishedWork;var s=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-it(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}(e,i),e===Do&&(ko=Do=null,Ro=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||$o||($o=!0,Dc(tt,function(){return jc(),null})),i=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||i){i=Co.transition,Co.transition=null;var l=yt;yt=1;var o=Eo;Eo|=4,To.current=null,function(e,t){if(es=Vt,hn(e=mn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(N){r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var p;m!==r||0!==s&&3!==m.nodeType||(o=l+s),m!==i||0!==n&&3!==m.nodeType||(c=l+n),3===m.nodeType&&(l+=m.nodeValue.length),null!==(p=m.firstChild);)h=m,m=p;for(;;){if(m===e)break t;if(h===r&&++d===s&&(o=l),h===i&&++u===n&&(c=l),null!==(p=m.nextSibling))break;h=(m=h).parentNode}m=p}r=-1===o||-1===c?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ts={focusedElem:e,selectionRange:r},Vt=!1,Jl=t;null!==Jl;)if(e=(t=Jl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jl=e;else for(;null!==Jl;){t=Jl;try{var x=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==x){var f=x.memoizedProps,g=x.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?f:tl(t.type,f),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(N){Sc(t,t.return,N)}if(null!==(e=t.sibling)){e.return=t.return,Jl=e;break}Jl=t.return}x=eo,eo=!1}(e,r),fo(r,e),pn(ts),Vt=!!es,ts=es=null,e.current=r,vo(r,e,s),Ye(),Eo=o,yt=l,Co.transition=i}else e.current=r;if($o&&($o=!1,Ko=e,Xo=s),i=e.pendingLanes,0===i&&(qo=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Je()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Vo)throw Vo=!1,e=Wo,Wo=null,e;0!==(1&Xo)&&0!==e.tag&&jc(),i=e.pendingLanes,0!==(1&i)?e===Jo?Yo++:(Yo=0,Jo=e):Yo=0,zs()}(e,t,r,n)}finally{Co.transition=s,yt=n}return null}function jc(){if(null!==Ko){var e=bt(Xo),t=Co.transition,r=yt;try{if(Co.transition=null,yt=16>e?16:e,null===Ko)var n=!1;else{if(e=Ko,Ko=null,Xo=0,0!==(6&Eo))throw Error(a(331));var s=Eo;for(Eo|=4,Jl=e.current;null!==Jl;){var i=Jl,l=i.child;if(0!==(16&Jl.flags)){var o=i.deletions;if(null!==o){for(var c=0;c<o.length;c++){var d=o[c];for(Jl=d;null!==Jl;){var u=Jl;switch(u.tag){case 0:case 11:case 15:to(8,u,i)}var m=u.child;if(null!==m)m.return=u,Jl=m;else for(;null!==Jl;){var h=(u=Jl).sibling,p=u.return;if(so(u),u===d){Jl=null;break}if(null!==h){h.return=p,Jl=h;break}Jl=p}}}var x=i.alternate;if(null!==x){var f=x.child;if(null!==f){x.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(null!==f)}}Jl=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Jl=l;else e:for(;null!==Jl;){if(0!==(2048&(i=Jl).flags))switch(i.tag){case 0:case 11:case 15:to(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Jl=v;break e}Jl=i.return}}var y=e.current;for(Jl=y;null!==Jl;){var b=(l=Jl).child;if(0!==(2064&l.subtreeFlags)&&null!==b)b.return=l,Jl=b;else e:for(l=y;null!==Jl;){if(0!==(2048&(o=Jl).flags))try{switch(o.tag){case 0:case 11:case 15:ro(9,o)}}catch(j){Sc(o,o.return,j)}if(o===l){Jl=null;break e}var N=o.sibling;if(null!==N){N.return=o.return,Jl=N;break e}Jl=o.return}}if(Eo=s,zs(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(st,e)}catch(j){}n=!0}return n}finally{yt=r,Co.transition=t}}return!1}function wc(e,t,r){e=Ua(e,t=ml(0,t=ol(r,t),1),1),t=ec(),null!==e&&(gt(e,1,t),nc(e,t))}function Sc(e,t,r){if(3===e.tag)wc(e,e,r);else for(;null!==t;){if(3===t.tag){wc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===qo||!qo.has(n))){t=Ua(t,e=hl(t,e=ol(r,e),1),1),e=ec(),null!==t&&(gt(t,1,e),nc(t,e));break}}t=t.return}}function Ac(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Do===e&&(Ro&r)===r&&(4===Po||3===Po&&(130023424&Ro)===Ro&&500>Je()-Ho?mc(e,0):Mo|=r),nc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Pa(e,t))&&(gt(e,t,r),nc(e,r))}function Cc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Tc(e,r)}function Ec(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;null!==s&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(a(314))}null!==n&&n.delete(t),Tc(e,r)}function Dc(e,t){return $e(e,t)}function kc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,r,n){return new kc(e,t,r,n)}function _c(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var r=e.alternate;return null===r?((r=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Pc(e,t,r,n,s,i){var l=2;if(n=e,"function"===typeof e)_c(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case w:return Oc(r.children,s,i,t);case S:l=8,s|=8;break;case A:return(e=Rc(12,r,t,2|s)).elementType=A,e.lanes=i,e;case D:return(e=Rc(13,r,t,s)).elementType=D,e.lanes=i,e;case k:return(e=Rc(19,r,t,s)).elementType=k,e.lanes=i,e;case I:return Lc(r,s,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:l=10;break e;case C:l=9;break e;case E:l=11;break e;case R:l=14;break e;case _:l=16,n=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(l,r,t,s)).elementType=e,t.type=n,t.lanes=i,t}function Oc(e,t,r,n){return(e=Rc(7,e,n,t)).lanes=r,e}function Lc(e,t,r,n){return(e=Rc(22,e,n,t)).elementType=I,e.lanes=r,e.stateNode={isHidden:!1},e}function Fc(e,t,r){return(e=Rc(6,e,null,t)).lanes=r,e}function Mc(e,t,r){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ft(0),this.expirationTimes=ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bc(e,t,r,n,s,a,i,l,o){return e=new Uc(e,t,r,l,o),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(a),e}function Hc(e){if(!e)return Cs;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_s(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var r=e.type;if(_s(r))return Os(e,r,t)}return t}function zc(e,t,r,n,s,a,i,l,o){return(e=Bc(r,n,!0,e,0,a,0,l,o)).context=Hc(null),r=e.current,(a=Ma(n=ec(),s=tc(r))).callback=void 0!==t&&null!==t?t:null,Ua(r,a,s),e.current.lanes=s,gt(e,s,n),nc(e,n),e}function Gc(e,t,r,n){var s=t.current,a=ec(),i=tc(s);return r=Hc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ma(a,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Ua(s,t,i))&&(rc(e,s,i,a),Ba(e,s,i)),i}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function qc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}wo=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ds.current)vl=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return vl=!1,function(e,t,r){switch(t.tag){case 3:El(t),ha();break;case 5:Ja(t);break;case 1:_s(t.type)&&Ls(t);break;case 4:Xa(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ts(ja,n._currentValue),n._currentValue=s;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ts(Qa,1&Qa.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Ll(e,t,r):(Ts(Qa,1&Qa.current),null!==(e=Gl(e,t,r))?e.sibling:null);Ts(Qa,1&Qa.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Hl(e,t,r);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ts(Qa,Qa.current),n)break;return null;case 22:case 23:return t.lanes=0,wl(e,t,r)}return Gl(e,t,r)}(e,t,r);vl=0!==(131072&e.flags)}else vl=!1,sa&&0!==(1048576&t.flags)&&Qs(t,qs,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;zl(e,t),e=t.pendingProps;var s=Rs(t,Es.current);Da(t,r),s=xi(null,t,n,e,s,r);var i=fi();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_s(n)?(i=!0,Ls(t)):i=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,La(t),s.updater=nl,t.stateNode=s,s._reactInternals=t,ll(t,n,e,r),t=Cl(null,t,n,!0,i,r)):(t.tag=0,sa&&i&&ea(t),yl(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(zl(e,t),e=t.pendingProps,n=(s=n._init)(n._payload),t.type=n,s=t.tag=function(e){if("function"===typeof e)return _c(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===R)return 14}return 2}(n),e=tl(n,e),s){case 0:t=Al(null,t,n,e,r);break e;case 1:t=Tl(null,t,n,e,r);break e;case 11:t=bl(null,t,n,e,r);break e;case 14:t=Nl(null,t,n,tl(n.type,e),r);break e}throw Error(a(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,Al(e,t,n,s=t.elementType===n?s:tl(n,s),r);case 1:return n=t.type,s=t.pendingProps,Tl(e,t,n,s=t.elementType===n?s:tl(n,s),r);case 3:e:{if(El(t),null===e)throw Error(a(387));n=t.pendingProps,s=(i=t.memoizedState).element,Fa(e,t),za(t,n,null,r);var l=t.memoizedState;if(n=l.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Dl(e,t,n,r,s=ol(Error(a(423)),t));break e}if(n!==s){t=Dl(e,t,n,r,s=ol(Error(a(424)),t));break e}for(na=cs(t.stateNode.containerInfo.firstChild),ra=t,sa=!0,aa=null,r=Na(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ha(),n===s){t=Gl(e,t,r);break e}yl(e,t,n,r)}t=t.child}return t;case 5:return Ja(t),null===e&&ca(t),n=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,l=s.children,rs(n,s)?l=null:null!==i&&rs(n,i)&&(t.flags|=32),Sl(e,t),yl(e,t,l,r),t.child;case 6:return null===e&&ca(t),null;case 13:return Ll(e,t,r);case 4:return Xa(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=ba(t,null,n,r):yl(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,bl(e,t,n,s=t.elementType===n?s:tl(n,s),r);case 7:return yl(e,t,t.pendingProps,r),t.child;case 8:case 12:return yl(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,Ts(ja,n._currentValue),n._currentValue=l,null!==i)if(ln(i.value,l)){if(i.children===s.children&&!Ds.current){t=Gl(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var o=i.dependencies;if(null!==o){l=i.child;for(var c=o.firstContext;null!==c;){if(c.context===n){if(1===i.tag){(c=Ma(-1,r&-r)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),Ea(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(a(341));l.lanes|=r,null!==(o=l.alternate)&&(o.lanes|=r),Ea(l,r,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}yl(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Da(t,r),n=n(s=ka(s)),t.flags|=1,yl(e,t,n,r),t.child;case 14:return s=tl(n=t.type,t.pendingProps),Nl(e,t,n,s=tl(n.type,s),r);case 15:return jl(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tl(n,s),zl(e,t),t.tag=1,_s(n)?(e=!0,Ls(t)):e=!1,Da(t,r),al(t,n,s),ll(t,n,s,r),Cl(null,t,n,!0,e,r);case 19:return Hl(e,t,r);case 22:return wl(e,t,r)}throw Error(a(156,t.tag))};var $c="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function Qc(e,t,r,n,s){var a=r._reactRootContainer;if(a){var i=a;if("function"===typeof s){var l=s;s=function(){var e=Vc(i);l.call(e)}}Gc(t,i,e,s)}else i=function(e,t,r,n,s){if(s){if("function"===typeof n){var a=n;n=function(){var e=Vc(i);a.call(e)}}var i=zc(t,n,e,0,null,!1,0,"",Zc);return e._reactRootContainer=i,e[ps]=i.current,zn(8===e.nodeType?e.parentNode:e),dc(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof n){var l=n;n=function(){var e=Vc(o);l.call(e)}}var o=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=o,e[ps]=o.current,zn(8===e.nodeType?e.parentNode:e),dc(function(){Gc(t,o,r,n)}),o}(r,t,e,s,n);return Vc(i)}Xc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},Xc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Gc(null,e,null,null)}),t[ps]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var r=0;r<It.length&&0!==t&&t<It[r].priority;r++);It.splice(r,0,e),0===r&&Ft(e)}},Nt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(vt(t,1|r),nc(t,Je()),0===(6&Eo)&&(zo=Je()+500,zs()))}break;case 13:dc(function(){var t=Pa(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),qc(e,1)}},jt=function(e){if(13===e.tag){var t=Pa(e,134217728);if(null!==t)rc(t,e,134217728,ec());qc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),r=Pa(e,t);if(null!==r)rc(r,e,t,ec());qc(e,t)}},St=function(){return yt},At=function(e,t){var r=yt;try{return yt=e,t()}finally{yt=r}},je=function(e,t,r){switch(t){case"input":if(Z(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Ns(n);if(!s)throw Error(a(90));$(n),Z(n,s)}}}break;case"textarea":ae(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ee=cc,De=dc;var ed={usingClientEntryPoint:!1,Events:[ys,bs,Ns,Te,Ce,cc]},td={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{st=nd.inject(rd),at=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var r=!1,n="",s=$c;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Bc(e,1,!1,null,0,r,0,n,s),e[ps]=t.current,zn(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Jc(t))throw Error(a(200));return Qc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Yc(e))throw Error(a(405));var n=null!=r&&r.hydratedSources||null,s=!1,i="",l=$c;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(s=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(l=r.onRecoverableError)),t=zc(t,null,e,1,null!=r?r:null,s,0,i,l),e[ps]=t.current,zn(e),n)for(e=0;e<n.length;e++)s=(s=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Xc(t)},t.render=function(e,t,r){if(!Jc(t))throw Error(a(200));return Qc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){Qc(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Jc(r))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Qc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},8357:(e,t,r)=>{"use strict";r.d(t,{S8:()=>i,cd:()=>l});var n=r(9850);var s=r(5873),a=r(8935);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;try{return o("",e,t,r)}catch(n){return{ERROR:"**non-serializable** (".concat(n,")")}}}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:102400;const n=i(e,t);return s=n,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(s))>r?l(e,t-1,r):n;var s}function o(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){const e="function"===typeof WeakSet,t=e?new WeakSet:[];return[function(r){if(e)return!!t.has(r)||(t.add(r),!1);for(let e=0;e<t.length;e++)if(t[e]===r)return!0;return t.push(r),!1},function(r){if(e)t.delete(r);else for(let e=0;e<t.length;e++)if(t[e]===r){t.splice(e,1);break}}]}();const[d,u]=c;if(null==t||["number","boolean","string"].includes(typeof t)&&!(0,n.yr)(t))return t;const m=function(e,t){try{if("domain"===e&&t&&"object"===typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!==typeof r.g&&t===r.g)return"[Global]";if("undefined"!==typeof window&&t===window)return"[Window]";if("undefined"!==typeof document&&t===document)return"[Document]";if((0,n.L2)(t))return"[VueViewModel]";if((0,n.mE)(t))return"[SyntheticEvent]";if("number"===typeof t&&t!==t)return"[NaN]";if("function"===typeof t)return"[Function: ".concat((0,a.qQ)(t),"]");if("symbol"===typeof t)return"[".concat(String(t),"]");if("bigint"===typeof t)return"[BigInt: ".concat(String(t),"]");const s=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(s)?"[HTMLElement: ".concat(s,"]"):"[object ".concat(s,"]")}catch(s){return"**non-serializable** (".concat(s,")")}}(e,t);if(!m.startsWith("[object "))return m;if(t.__sentry_skip_normalization__)return t;const h="number"===typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:i;if(0===h)return m.replace("object ","");if(d(t))return"[Circular ~]";const p=t;if(p&&"function"===typeof p.toJSON)try{return o("",p.toJSON(),h-1,l,c)}catch(v){}const x=Array.isArray(t)?[]:{};let f=0;const g=(0,s.W4)(t);for(const r in g){if(!Object.prototype.hasOwnProperty.call(g,r))continue;if(f>=l){x[r]="[MaxProperties ~]";break}const e=g[r];x[r]=o(r,e,h-1,l,c),f++}return u(t),x}},8577:(e,t)=>{"use strict";var r="function"===typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,s=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,o=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,u=r?Symbol.for("react.concurrent_mode"):60111,m=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,x=r?Symbol.for("react.memo"):60115,f=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,v=r?Symbol.for("react.fundamental"):60117,y=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function N(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case d:case u:case a:case l:case i:case h:return e;default:switch(e=e&&e.$$typeof){case c:case m:case f:case x:case o:return e;default:return t}}case s:return t}}}function j(e){return N(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=o,t.Element=n,t.ForwardRef=m,t.Fragment=a,t.Lazy=f,t.Memo=x,t.Portal=s,t.Profiler=l,t.StrictMode=i,t.Suspense=h,t.isAsyncMode=function(e){return j(e)||N(e)===d},t.isConcurrentMode=j,t.isContextConsumer=function(e){return N(e)===c},t.isContextProvider=function(e){return N(e)===o},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return N(e)===m},t.isFragment=function(e){return N(e)===a},t.isLazy=function(e){return N(e)===f},t.isMemo=function(e){return N(e)===x},t.isPortal=function(e){return N(e)===s},t.isProfiler=function(e){return N(e)===l},t.isStrictMode=function(e){return N(e)===i},t.isSuspense=function(e){return N(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===u||e===l||e===i||e===h||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===x||e.$$typeof===o||e.$$typeof===c||e.$$typeof===m||e.$$typeof===v||e.$$typeof===y||e.$$typeof===b||e.$$typeof===g)},t.typeOf=N},8658:(e,t,r)=>{"use strict";r.d(t,{Vw:()=>i,fj:()=>a,wD:()=>s});var n=r(751);function s(){return!(0,n.Z)()&&"[object process]"===Object.prototype.toString.call("undefined"!==typeof process?process:0)}function a(e,t){return e.require(t)}function i(t){let r;try{r=a(e,t)}catch(n){}try{const{cwd:n}=a(e,"process");r=a(e,"".concat(n(),"/node_modules/").concat(t))}catch(n){}return r}e=r.hmd(e)},8831:(e,t,r)=>{"use strict";r.d(t,{E1:()=>l,JD:()=>i,i_:()=>n,sy:()=>s,uT:()=>a});const n="sentry.source",s="sentry.sample_rate",a="sentry.op",i="sentry.origin",l="profile_id"},8935:(e,t,r)=>{"use strict";r.d(t,{gd:()=>l,qQ:()=>d,vk:()=>o});var n=r(7051);const s=50,a=/\(error: (.*)\)/,i=/captureMessage|captureException/;function l(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const l=t.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=[],o=e.split("\n");for(let n=t;n<o.length;n++){const e=o[n];if(e.length>1024)continue;const t=a.test(e)?e.replace(a,"$1"):e;if(!t.match(/\S*Error: /)){for(const e of l){const n=e(t);if(n){r.push(n);break}}if(r.length>=s)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),i.test(t[t.length-1].function||"")&&(t.pop(),i.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,s).map(e=>(0,n.A)((0,n.A)({},e),{},{filename:e.filename||t[t.length-1].filename,function:e.function||"?"}))}(r)}}function o(e){return Array.isArray(e)?l(...e):e}const c="<anonymous>";function d(e){try{return e&&"function"===typeof e&&e.name||c}catch(t){return c}}},8974:e=>{"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var r=/[^.^\]^[]+|(?=\[\]|\.\.)/g,n=/^\d+$/,s=/^\d/,a=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,i=/^\s*(['"]?)(.*?)(\1)\s*$/,l=new t(512),o=new t(512),c=new t(512);function d(e){return l.get(e)||l.set(e,u(e).map(function(e){return e.replace(i,"$2")}))}function u(e){return e.match(r)||[""]}function m(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function h(e){return!m(e)&&(function(e){return e.match(s)&&!e.match(n)}(e)||function(e){return a.test(e)}(e))}e.exports={Cache:t,split:u,normalizePath:d,setter:function(e){var t=d(e);return o.get(e)||o.set(e,function(e,r){for(var n=0,s=t.length,a=e;n<s-1;){var i=t[n];if("__proto__"===i||"constructor"===i||"prototype"===i)return e;a=a[t[n++]]}a[t[n]]=r})},getter:function(e,t){var r=d(e);return c.get(e)||c.set(e,function(e){for(var n=0,s=r.length;n<s;){if(null==e&&t)return;e=e[r[n++]]}return e})},join:function(e){return e.reduce(function(e,t){return e+(m(t)||n.test(t)?"["+t+"]":(e?".":"")+t)},"")},forEach:function(e,t,r){!function(e,t,r){var n,s,a,i,l=e.length;for(s=0;s<l;s++)(n=e[s])&&(h(n)&&(n='"'+n+'"'),a=!(i=m(n))&&/^\d+$/.test(n),t.call(r,n,i,a,s,e))}(Array.isArray(e)?e:u(e),t,r)}}},9353:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(7051),s=r(7914),a=r(5873),i=r(3966),l=r(9827),o=r(3589),c=r(8831),d=r(2791),u=r(7018),m=r(733),h=r(7362);class p extends m.L{constructor(e,t){super(e),this._contexts={},this._hub=t||(0,l.BF)(),this._name=e.name||"",this._metadata=(0,n.A)({},e.metadata),this._trimEnd=e.trimEnd,this.transaction=this;const r=this._metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext=(0,n.A)({},r))}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return(0,n.A)((0,n.A)((0,n.A)({source:"custom",spanMetadata:{}},this._metadata),this._attributes[c.i_]&&{source:this._attributes[c.i_]}),this._attributes[c.sy]&&{sampleRate:this._attributes[c.sy]})}set metadata(e){this._metadata=e}setName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"custom";this._name=e,this.setAttribute(c.i_,t)}updateName(e){return this._name=e,this}initSpanRecorder(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.spanRecorder||(this.spanRecorder=new m.l(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this._measurements[e]={value:t,unit:r}}setMetadata(e){this._metadata=(0,n.A)((0,n.A)({},this._metadata),e)}end(e){const t=(0,d.cI)(e),r=this._finishTransaction(t);if(r)return this._hub.captureEvent(r)}toContext(){const e=super.toContext();return(0,a.Ce)((0,n.A)((0,n.A)({},e),{},{name:this._name,trimEnd:this._trimEnd}))}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return(0,u.k)(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(i.T&&s.vF.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return i.T&&s.vF.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const r=this.spanRecorder?this.spanRecorder.spans.filter(e=>e!==this&&(0,d.et)(e).timestamp):[];if(this._trimEnd&&r.length>0){const e=r.map(e=>(0,d.et)(e).timestamp).filter(Boolean);this._endTime=e.reduce((e,t)=>e>t?e:t)}const{scope:l,isolationScope:c}=(0,h.Lb)(this),{metadata:m}=this,{source:p}=m,x=(0,n.A)({contexts:(0,n.A)((0,n.A)({},this._contexts),{},{trace:(0,d.kX)(this)}),spans:r,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:(0,n.A)((0,n.A)({},m),{},{capturedSpanScope:l,capturedSpanIsolationScope:c},(0,a.Ce)({dynamicSamplingContext:(0,u.k)(this)})),_metrics_summary:(0,o.g)(this)},p&&{transaction_info:{source:p}});return Object.keys(this._measurements).length>0&&(i.T&&s.vF.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),x.measurements=this._measurements),i.T&&s.vF.log("[Tracing] Finishing ".concat(this.op," transaction: ").concat(this._name,".")),x}}},9509:(e,t,r)=>{"use strict";r.d(t,{U:()=>n});const n="production"},9672:(e,t,r)=>{"use strict";r.d(t,{HG:()=>m,m6:()=>h});var n=r(7051),s=r(9850),a=r(7914),i=r(6566),l=r(6559),o=r(137),c=r(6836),d=r(997);let u;class m{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=p()}static clone(e){return e?e.clone():new m}clone(){const e=new m;return e._breadcrumbs=[...this._breadcrumbs],e._tags=(0,n.A)({},this._tags),e._extra=(0,n.A)({},this._extra),e._contexts=(0,n.A)({},this._contexts),e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata=(0,n.A)({},this._sdkProcessingMetadata),e._propagationContext=(0,n.A)({},this._propagationContext),e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&(0,c.qO)(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags=(0,n.A)((0,n.A)({},this._tags),e),this._notifyScopeListeners(),this}setTag(e,t){return this._tags=(0,n.A)((0,n.A)({},this._tags),{},{[e]:t}),this._notifyScopeListeners(),this}setExtras(e){return this._extra=(0,n.A)((0,n.A)({},this._extra),e),this._notifyScopeListeners(),this}setExtra(e,t){return this._extra=(0,n.A)((0,n.A)({},this._extra),{},{[e]:t}),this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"===typeof e?e(this):e;if(t instanceof m){const e=t.getScopeData();this._tags=(0,n.A)((0,n.A)({},this._tags),e.tags),this._extra=(0,n.A)((0,n.A)({},this._extra),e.extra),this._contexts=(0,n.A)((0,n.A)({},this._contexts),e.contexts),e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if((0,s.Qd)(t)){const t=e;this._tags=(0,n.A)((0,n.A)({},this._tags),t.tags),this._extra=(0,n.A)((0,n.A)({},this._extra),t.extra),this._contexts=(0,n.A)((0,n.A)({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=p(),this}addBreadcrumb(e,t){const r="number"===typeof t?t:100;if(r<=0)return this;const s=(0,n.A)({timestamp:(0,l.lu)()},e),a=this._breadcrumbs;return a.push(s),this._breadcrumbs=a.length>r?a.slice(-r):a,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:r,_tags:n,_extra:s,_user:a,_level:i,_fingerprint:l,_eventProcessors:o,_propagationContext:c,_sdkProcessingMetadata:d,_transactionName:u,_span:m}=this;return{breadcrumbs:e,attachments:t,contexts:r,tags:n,extra:s,user:a,level:i,fingerprint:l||[],eventProcessors:o,propagationContext:c,sdkProcessingMetadata:d,transactionName:u,span:m}}applyToEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];(0,d.e2)(e,this.getScopeData());const n=[...r,...(0,o.lG)(),...this._eventProcessors];return(0,o.jB)(n,e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=(0,n.A)((0,n.A)({},this._sdkProcessingMetadata),e),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const r=t&&t.event_id?t.event_id:(0,i.eJ)();if(!this._client)return a.vF.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(e,(0,n.A)((0,n.A)({originalException:e,syntheticException:s},t),{},{event_id:r}),this),r}captureMessage(e,t,r){const s=r&&r.event_id?r.event_id:(0,i.eJ)();if(!this._client)return a.vF.warn("No client configured on scope - will not capture message!"),s;const l=new Error(e);return this._client.captureMessage(e,t,(0,n.A)((0,n.A)({originalException:e,syntheticException:l},r),{},{event_id:s}),this),s}captureEvent(e,t){const r=t&&t.event_id?t.event_id:(0,i.eJ)();return this._client?(this._client.captureEvent(e,(0,n.A)((0,n.A)({},t),{},{event_id:r}),this),r):(a.vF.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function h(){return u||(u=new m),u}function p(){return{traceId:(0,i.eJ)(),spanId:(0,i.eJ)().substring(16)}}},9712:(e,t,r)=>{"use strict";r.d(t,{AS:()=>c,aj:()=>d,s5:()=>o});var n=r(6874),s=r(7914),a=r(8935);const i={},l={};function o(e,t){i[e]=i[e]||[],i[e].push(t)}function c(e,t){l[e]||(t(),l[e]=!0)}function d(e,t){const r=e&&i[e];if(r)for(const i of r)try{i(t)}catch(l){n.T&&s.vF.error("Error while triggering instrumentation handler.\nType: ".concat(e,"\nName: ").concat((0,a.qQ)(i),"\nError:"),l)}}},9827:(e,t,r)=>{"use strict";r.d(t,{BF:()=>y,EU:()=>g,fx:()=>j,rm:()=>b});var n=r(7051),s=r(7815),a=r(9850),i=r(7914),l=r(6566),o=r(6559),c=r(9509),d=r(3966),u=r(9672),m=r(6836),h=r(7324);const p=parseFloat(h.M),x=100;class f{constructor(e,t,r){let n,s,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p;this._version=a,t?n=t:(n=new u.HG,n.setClient(e)),r?s=r:(s=new u.HG,s.setClient(e)),this._stack=[{scope:n}],e&&this.bindClient(e),this._isolationScope=s}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let r;try{r=e(t)}catch(n){throw this.popScope(),n}return(0,a.Qg)(r)?r.then(e=>(this.popScope(),e),e=>{throw this.popScope(),e}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const r=this._lastEventId=t&&t.event_id?t.event_id:(0,l.eJ)(),s=new Error("Sentry syntheticException");return this.getScope().captureException(e,(0,n.A)((0,n.A)({originalException:e,syntheticException:s},t),{},{event_id:r})),r}captureMessage(e,t,r){const s=this._lastEventId=r&&r.event_id?r.event_id:(0,l.eJ)(),a=new Error(e);return this.getScope().captureMessage(e,t,(0,n.A)((0,n.A)({originalException:e,syntheticException:a},r),{},{event_id:s})),s}captureEvent(e,t){const r=t&&t.event_id?t.event_id:(0,l.eJ)();return e.type||(this._lastEventId=r),this.getScope().captureEvent(e,(0,n.A)((0,n.A)({},t),{},{event_id:r})),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:r,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:a=null,maxBreadcrumbs:l=x}=s.getOptions&&s.getOptions()||{};if(l<=0)return;const c=(0,o.lu)(),d=(0,n.A)({timestamp:c},e),u=a?(0,i.pq)(()=>a(d,t)):d;null!==u&&(s.emit&&s.emit("beforeAddBreadcrumb",u,t),r.addBreadcrumb(u,l))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:r}=this.getStackTop();r&&e(t)}run(e){const t=v(this);try{e(this)}finally{v(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(r){return d.T&&i.vF.warn("Cannot retrieve integration ".concat(e.id," from the current Hub")),null}}startTransaction(e,t){const r=this._callExtensionMethod("startTransaction",e,t);if(d.T&&!r){this.getClient()?i.vF.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):i.vF.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&(0,m.Vu)(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:r}=this.getStackTop(),{release:a,environment:i=c.U}=r&&r.getOptions()||{},{userAgent:l}=s.OW.navigator||{},o=(0,m.fj)((0,n.A)((0,n.A)({release:a,environment:i,user:t.getUser()},l&&{userAgent:l}),e)),d=t.getSession&&t.getSession();return d&&"ok"===d.status&&(0,m.qO)(d,{status:"exited"}),this.endSession(),t.setSession(o),o}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),r=e.getSession();r&&t&&t.captureSession&&t.captureSession(r)}_callExtensionMethod(e){const t=g().__SENTRY__;if(t&&t.extensions&&"function"===typeof t.extensions[e]){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return t.extensions[e].apply(this,n)}d.T&&i.vF.warn("Extension method ".concat(e," couldn't be found, doing nothing."))}}function g(){return s.OW.__SENTRY__=s.OW.__SENTRY__||{extensions:{},hub:void 0},s.OW}function v(e){const t=g(),r=S(t);return A(t,e),r}function y(){const e=g();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return N(e)}function b(){return y().getIsolationScope()}function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return w(e)&&!S(e).isOlderThan(p)||A(e,new f),S(e)}function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=g();return r.__SENTRY__&&r.__SENTRY__.acs?r.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function w(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function S(e){return(0,s.BY)("hub",()=>new f,e)}function A(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}},9850:(e,t,r)=>{"use strict";r.d(t,{BD:()=>l,Kg:()=>c,L2:()=>b,NF:()=>d,Qd:()=>m,Qg:()=>f,T2:()=>i,W6:()=>o,bJ:()=>s,gd:()=>x,mE:()=>g,sO:()=>u,tH:()=>y,vq:()=>p,xH:()=>h,yr:()=>v});const n=Object.prototype.toString;function s(e){switch(n.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return y(e,Error)}}function a(e,t){return n.call(e)==="[object ".concat(t,"]")}function i(e){return a(e,"ErrorEvent")}function l(e){return a(e,"DOMError")}function o(e){return a(e,"DOMException")}function c(e){return a(e,"String")}function d(e){return"object"===typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function u(e){return null===e||d(e)||"object"!==typeof e&&"function"!==typeof e}function m(e){return a(e,"Object")}function h(e){return"undefined"!==typeof Event&&y(e,Event)}function p(e){return"undefined"!==typeof Element&&y(e,Element)}function x(e){return a(e,"RegExp")}function f(e){return Boolean(e&&e.then&&"function"===typeof e.then)}function g(e){return m(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function v(e){return"number"===typeof e&&e!==e}function y(e,t){try{return e instanceof t}catch(r){return!1}}function b(e){return!("object"!==typeof e||null===e||!e.__isVue&&!e._isVue)}},9950:(e,t,r)=>{"use strict";e.exports=r(2049)}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,s){if(1&s&&(n=this(n)),8&s)return n;if("object"===typeof n&&n){if(4&s&&n.__esModule)return n;if(16&s&&"function"===typeof n.then)return n}var a=Object.create(null);r.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&s&&n;("object"==typeof l||"function"==typeof l)&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(e=>i[e]=()=>n[e]);return i.default=()=>n,r.d(a,i),a}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=r(9950),t=r.t(e,2),n=r(1352),s=r(7051),a=r(7914),i=r(6566),l=r(7867),o=r(3966),c=(r(137),r(9827));function d(e,t){const r=function(){return t(...arguments)};return r.id=e,r}const u=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],m=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],h="InboundFilters",p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:h,setupOnce(){},processEvent(t,r,n){const s=n.getOptions(),c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:u],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:m],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,s);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(mn){}return!1}(e))return o.T&&a.vF.warn("Event dropped due to being internal Sentry Error.\nEvent: ".concat((0,i.$X)(e))),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let r;try{r=e.exception.values[e.exception.values.length-1]}catch(mn){}r&&r.value&&(t.push(r.value),r.type&&t.push("".concat(r.type,": ").concat(r.value)));o.T&&0===t.length&&a.vF.error("Could not extract message for event ".concat((0,i.$X)(e)));return t}(e).some(e=>(0,l.Xr)(e,t))}(e,t.ignoreErrors))return o.T&&a.vF.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: ".concat((0,i.$X)(e))),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const r=e.transaction;return!!r&&(0,l.Xr)(r,t)}(e,t.ignoreTransactions))return o.T&&a.vF.warn("Event dropped due to being matched by `ignoreTransactions` option.\nEvent: ".concat((0,i.$X)(e))),!0;if(function(e,t){if(!t||!t.length)return!1;const r=x(e);return!!r&&(0,l.Xr)(r,t)}(e,t.denyUrls))return o.T&&a.vF.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: ".concat((0,i.$X)(e),".\nUrl: ").concat(x(e))),!0;if(!function(e,t){if(!t||!t.length)return!0;const r=x(e);return!r||(0,l.Xr)(r,t)}(e,t.allowUrls))return o.T&&a.vF.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: ".concat((0,i.$X)(e),".\nUrl: ").concat(x(e))),!0;return!1}(t,c)?null:t}}};d(h,p);function x(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(mn){}return t?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t=e.length-1;t>=0;t--){const r=e[t];if(r&&"<anonymous>"!==r.filename&&"[native code]"!==r.filename)return r.filename||null}return null}(t):null}catch(t){return o.T&&a.vF.error("Cannot extract url for event ".concat((0,i.$X)(e))),null}}var f=r(5873),g=r(4671);let v;const y="FunctionToString",b=new WeakMap,N=()=>({name:y,setupOnce(){v=Function.prototype.toString;try{Function.prototype.toString=function(){const e=(0,f.sp)(this),t=b.has((0,g.KU)())&&void 0!==e?e:this;for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return v.apply(t,n)}}catch(mn){}},setup(e){b.set(e,!0)}});d(y,N);var j=r(6874);const w=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function S(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{host:r,path:n,pass:s,port:a,projectId:i,protocol:l,publicKey:o}=e;return"".concat(l,"://").concat(o).concat(t&&s?":".concat(s):"")+"@".concat(r).concat(a?":".concat(a):"","/").concat(n?"".concat(n,"/"):n).concat(i)}function A(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function T(e){const t="string"===typeof e?function(e){const t=w.exec(e);if(!t)return void(0,a.pq)(()=>{console.error("Invalid Sentry Dsn: ".concat(e))});const[r,n,s="",i,l="",o]=t.slice(1);let c="",d=o;const u=d.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),d=u.pop()),d){const e=d.match(/^\d+/);e&&(d=e[0])}return A({host:i,pass:s,path:c,projectId:d,port:l,protocol:r,publicKey:n})}(e):A(e);if(t&&function(e){if(!j.T)return!0;const{port:t,projectId:r,protocol:n}=e;return!["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(a.vF.error("Invalid Sentry Dsn: ".concat(t," missing")),!0))&&(r.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(n)?!t||!isNaN(parseInt(t,10))||(a.vF.error("Invalid Sentry Dsn: Invalid port ".concat(t)),!1):(a.vF.error("Invalid Sentry Dsn: Invalid protocol ".concat(n)),!1):(a.vF.error("Invalid Sentry Dsn: Invalid projectId ".concat(r)),!1))}(t))return t}function C(e){const t=e.protocol?"".concat(e.protocol,":"):"",r=e.port?":".concat(e.port):"";return"".concat(t,"//").concat(e.host).concat(r).concat(e.path?"/".concat(e.path):"","/api/")}var E=r(8935),D=r(7815);const k=(0,D.VZ)();function R(){if(!("fetch"in k))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(mn){return!1}}function _(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const I=(0,D.VZ)();var P=r(9712);const O=D.OW;let L;function F(e){const t="history";(0,P.s5)(t,e),(0,P.AS)(t,M)}function M(){if(!function(){const e=I.chrome,t=e&&e.app&&e.app.runtime,r="history"in I&&!!I.history.pushState&&!!I.history.replaceState;return!t&&r}())return;const e=O.onpopstate;function t(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const s=r.length>2?r[2]:void 0;if(s){const e=L,t=String(s);L=t;const r={from:e,to:t};(0,P.aj)("history",r)}return e.apply(this,r)}}O.onpopstate=function(){const t=O.location.href,r=L;L=t;const n={from:r,to:t};if((0,P.aj)("history",n),e)try{for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return e.apply(this,a)}catch(l){}},(0,f.GS)(O.history,"pushState",t),(0,f.GS)(O.history,"replaceState",t)}var U=r(9850),B=(r(5684),r(8357));Error;r(6836),r(7018),r(7565);r(7324);r(751);var H=r(6559);const z="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function G(e,t){const r=W(e,t),n={type:t&&t.name,value:K(t)};return r.length&&(n.stacktrace={frames:r}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function V(e,t){return{exception:{values:[G(e,t)]}}}function W(e,t){const r=t.stacktrace||t.stack||"",n=function(e){if(e){if("number"===typeof e.framesToPop)return e.framesToPop;if(q.test(e.message))return 1}return 0}(t);try{return e(r,n)}catch(mn){}return[]}const q=/Minified React error #\d+;/i;function K(e){const t=e&&e.message;return t?t.error&&"string"===typeof t.error.message?t.error.message:t:"No error message"}function X(e,t,r,n,a){let l;if((0,U.T2)(t)&&t.error){return V(e,t.error)}if((0,U.BD)(t)||(0,U.W6)(t)){const a=t;if("stack"in t)l=V(e,t);else{const t=a.name||((0,U.BD)(a)?"DOMError":"DOMException"),s=a.message?"".concat(t,": ").concat(a.message):t;l=Y(e,s,r,n),(0,i.gO)(l,s)}return"code"in a&&(l.tags=(0,s.A)((0,s.A)({},l.tags),{},{"DOMException.code":"".concat(a.code)})),l}if((0,U.bJ)(t))return V(e,t);if((0,U.Qd)(t)||(0,U.xH)(t)){return l=function(e,t,r,n){const s=(0,g.KU)(),a=s&&s.getOptions().normalizeDepth,i={exception:{values:[{type:(0,U.xH)(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:J(t,{isUnhandledRejection:n})}]},extra:{__serialized__:(0,B.cd)(t,a)}};if(r){const t=W(e,r);t.length&&(i.exception.values[0].stacktrace={frames:t})}return i}(e,t,r,a),(0,i.M6)(l,{synthetic:!0}),l}return l=Y(e,t,r,n),(0,i.gO)(l,"".concat(t),void 0),(0,i.M6)(l,{synthetic:!0}),l}function Y(e,t,r,n){const s={};if(n&&r){const n=W(e,r);n.length&&(s.exception={values:[{value:t,stacktrace:{frames:n}}]})}if((0,U.NF)(t)){const{__sentry_template_string__:e,__sentry_template_values__:r}=t;return s.logentry={message:e,params:r},s}return s.message=t,s}function J(e,t){let{isUnhandledRejection:r}=t;const n=(0,f.HF)(e),s=r?"promise rejection":"exception";if((0,U.T2)(e))return"Event `ErrorEvent` captured as ".concat(s," with message `").concat(e.message,"`");if((0,U.xH)(e)){const t=function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(mn){}}(e);return"Event `".concat(t,"` (type=").concat(e.type,") captured as ").concat(s)}return"Object captured as ".concat(s," with keys: ").concat(n)}const Z=D.OW;let Q=0;function ee(){return Q>0}function te(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if("function"!==typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"===typeof t?t:e;if((0,f.sp)(e))return e}catch(mn){return e}const n=function(){const n=Array.prototype.slice.call(arguments);try{r&&"function"===typeof r&&r.apply(this,arguments);const s=n.map(e=>te(e,t));return e.apply(this,s)}catch(a){throw Q++,setTimeout(()=>{Q--}),(0,g.v4)(e=>{e.addEventProcessor(e=>(t.mechanism&&((0,i.gO)(e,void 0,void 0),(0,i.M6)(e,t.mechanism)),e.extra=(0,s.A)((0,s.A)({},e.extra),{},{arguments:n}),e)),(0,g.Cp)(a)}),a}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch(a){}(0,f.pO)(n,e),(0,f.my)(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch(a){}return n}function re(){"console"in D.OW&&a.Ow.forEach(function(e){e in D.OW.console&&(0,f.GS)(D.OW.console,e,function(t){return a.Z9[e]=t,function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const s={args:r,level:e};(0,P.aj)("console",s);const i=a.Z9[e];i&&i.apply(D.OW.console,r)}})})}const ne=D.OW;let se,ae,ie;function le(){if(!ne.document)return;const e=P.aj.bind(null,"dom"),t=oe(e,!0);ne.document.addEventListener("click",t,!1),ne.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(t=>{const r=ne[t]&&ne[t].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&((0,f.GS)(r,"addEventListener",function(t){return function(r,n,s){if("click"===r||"keypress"==r)try{const n=this,a=n.__sentry_instrumentation_handlers__=n.__sentry_instrumentation_handlers__||{},i=a[r]=a[r]||{refCount:0};if(!i.handler){const n=oe(e);i.handler=n,t.call(this,r,n,s)}i.refCount++}catch(mn){}return t.call(this,r,n,s)}}),(0,f.GS)(r,"removeEventListener",function(e){return function(t,r,n){if("click"===t||"keypress"==t)try{const r=this,s=r.__sentry_instrumentation_handlers__||{},a=s[t];a&&(a.refCount--,a.refCount<=0&&(e.call(this,t,a.handler,n),a.handler=void 0,delete s[t]),0===Object.keys(s).length&&delete r.__sentry_instrumentation_handlers__)}catch(mn){}return e.call(this,t,r,n)}}))})}function oe(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r=>{if(!r||r._sentryCaptured)return;const n=function(e){try{return e.target}catch(mn){return null}}(r);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(r.type,n))return;(0,f.my)(r,"_sentryCaptured",!0),n&&!n._sentryId&&(0,f.my)(n,"_sentryId",(0,i.eJ)());const s="keypress"===r.type?"input":r.type;if(!function(e){if(e.type!==ae)return!1;try{if(!e.target||e.target._sentryId!==ie)return!1}catch(mn){}return!0}(r)){e({event:r,name:s,global:t}),ae=r.type,ie=n?n._sentryId:void 0}clearTimeout(se),se=ne.setTimeout(()=>{ie=void 0,ae=void 0},1e3)}}const ce=D.OW,de="__sentry_xhr_v3__";function ue(e){(0,P.s5)("xhr",e),(0,P.AS)("xhr",me)}function me(){if(!ce.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;(0,f.GS)(e,"open",function(e){return function(){const t=Date.now();for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];const a=(0,U.Kg)(n[0])?n[0].toUpperCase():void 0,i=function(e){if((0,U.Kg)(e))return e;try{return e.toString()}catch(t){}return}(n[1]);if(!a||!i)return e.apply(this,n);this[de]={method:a,url:i,request_headers:{}},"POST"===a&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const l=()=>{const e=this[de];if(e&&4===this.readyState){try{e.status_code=this.status}catch(mn){}const r={args:[a,i],endTimestamp:Date.now(),startTimestamp:t,xhr:this};(0,P.aj)("xhr",r)}};return"onreadystatechange"in this&&"function"===typeof this.onreadystatechange?(0,f.GS)(this,"onreadystatechange",function(e){return function(){l();for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(this,r)}}):this.addEventListener("readystatechange",l),(0,f.GS)(this,"setRequestHeader",function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const[s,a]=r,i=this[de];return i&&(0,U.Kg)(s)&&(0,U.Kg)(a)&&(i.request_headers[s.toLowerCase()]=a),e.apply(this,r)}}),e.apply(this,n)}}),(0,f.GS)(e,"send",function(e){return function(){const t=this[de];for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];if(!t)return e.apply(this,n);void 0!==n[0]&&(t.body=n[0]);const a={args:[t.method,t.url],startTimestamp:Date.now(),xhr:this};return(0,P.aj)("xhr",a),e.apply(this,n)}})}function he(e){const t="fetch";(0,P.s5)(t,e),(0,P.AS)(t,pe)}function pe(){(function(){if("string"===typeof EdgeRuntime)return!0;if(!R())return!1;if(_(k.fetch))return!0;let e=!1;const t=k.document;if(t&&"function"===typeof t.createElement)try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=_(r.contentWindow.fetch)),t.head.removeChild(r)}catch(r){j.T&&a.vF.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return e})()&&(0,f.GS)(D.OW,"fetch",function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const{method:a,url:i}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,r]=e;return{url:fe(t),method:xe(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:fe(t),method:xe(t,"method")?String(t.method).toUpperCase():"GET"}}(r),l={args:r,fetchData:{method:a,url:i},startTimestamp:Date.now()};return(0,P.aj)("fetch",(0,s.A)({},l)),e.apply(D.OW,r).then(e=>{const t=(0,s.A)((0,s.A)({},l),{},{endTimestamp:Date.now(),response:e});return(0,P.aj)("fetch",t),e},e=>{const t=(0,s.A)((0,s.A)({},l),{},{endTimestamp:Date.now(),error:e});throw(0,P.aj)("fetch",t),e})}})}function xe(e,t){return!!e&&"object"===typeof e&&!!e[t]}function fe(e){return"string"===typeof e?e:e?xe(e,"url")?e.url:e.toString?e.toString():"":""}var ge=r(736);const ve=["fatal","error","warning","log","info","debug"];function ye(e){return"warn"===e?"warning":ve.includes(e)?e:"log"}function be(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const r=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:r,hash:n,relative:t[5]+r+n}}function Ne(e){return e.split(/[\?#]/,1)[0]}function je(e){return e.split(/\\?\//).filter(e=>e.length>0&&","!==e).length}const we=1024,Se="Breadcrumbs",Ae=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,s.A)({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e);return{name:Se,setupOnce(){},setup(e){var r;t.console&&function(e){const t="console";(0,P.s5)(t,e),(0,P.AS)(t,re)}(function(e){return function(t){if((0,g.KU)()!==e)return;const r={category:"console",data:{arguments:t.args,logger:"console"},level:ye(t.level),message:(0,l.gt)(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;r.message="Assertion failed: ".concat((0,l.gt)(t.args.slice(1)," ")||"console.assert"),r.data.arguments=t.args.slice(1)}(0,g.ZQ)(r,{input:t.args,level:t.level})}}(e)),t.dom&&(r=function(e,t){return function(r){if((0,g.KU)()!==e)return;let n,s,i="object"===typeof t?t.serializeAttribute:void 0,l="object"===typeof t&&"number"===typeof t.maxStringLength?t.maxStringLength:void 0;l&&l>we&&(z&&a.vF.warn("`dom.maxStringLength` cannot exceed ".concat(we,", but a value of ").concat(l," was configured. Sentry will use ").concat(we," instead.")),l=we),"string"===typeof i&&(i=[i]);try{const e=r.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;n=(0,ge.Hd)(t,{keyAttrs:i,maxStringLength:l}),s=(0,ge.xE)(t)}catch(mn){n="<unknown>"}if(0===n.length)return;const o={category:"ui.".concat(r.name),message:n};s&&(o.data={"ui.component_name":s}),(0,g.ZQ)(o,{event:r.event,name:r.name,global:r.global})}}(e,t.dom),(0,P.s5)("dom",r),(0,P.AS)("dom",le)),t.xhr&&ue(function(e){return function(t){if((0,g.KU)()!==e)return;const{startTimestamp:r,endTimestamp:n}=t,s=t.xhr[de];if(!r||!n||!s)return;const{method:a,url:i,status_code:l,body:o}=s,c={method:a,url:i,status_code:l},d={xhr:t.xhr,input:o,startTimestamp:r,endTimestamp:n};(0,g.ZQ)({category:"xhr",data:c,type:"http"},d)}}(e)),t.fetch&&he(function(e){return function(t){if((0,g.KU)()!==e)return;const{startTimestamp:r,endTimestamp:n}=t;if(n&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){const e=t.fetchData,s={data:t.error,input:t.args,startTimestamp:r,endTimestamp:n};(0,g.ZQ)({category:"fetch",data:e,level:"error",type:"http"},s)}else{const e=t.response,a=(0,s.A)((0,s.A)({},t.fetchData),{},{status_code:e&&e.status}),i={input:t.args,response:e,startTimestamp:r,endTimestamp:n};(0,g.ZQ)({category:"fetch",data:a,type:"http"},i)}}}(e)),t.history&&F(function(e){return function(t){if((0,g.KU)()!==e)return;let r=t.from,n=t.to;const s=be(Z.location.href);let a=r?be(r):void 0;const i=be(n);a&&a.path||(a=s),s.protocol===i.protocol&&s.host===i.host&&(n=i.relative),s.protocol===a.protocol&&s.host===a.host&&(r=a.relative),(0,g.ZQ)({category:"navigation",data:{from:r,to:n}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){(0,g.KU)()===e&&(0,g.ZQ)({category:"sentry.".concat("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:(0,i.$X)(t)},{event:t})}}(e))}}};d(Se,Ae);const Te="Dedupe",Ce=()=>{let e;return{name:Te,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const r=e.message,n=t.message;if(!r&&!n)return!1;if(r&&!n||!r&&n)return!1;if(r!==n)return!1;if(!De(e,t))return!1;if(!Ee(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const r=ke(t),n=ke(e);if(!r||!n)return!1;if(r.type!==n.type||r.value!==n.value)return!1;if(!De(e,t))return!1;if(!Ee(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return z&&a.vF.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(r){}return e=t}}};d(Te,Ce);function Ee(e,t){let r=Re(e),n=Re(t);if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++){const e=n[s],t=r[s];if(e.filename!==t.filename||e.lineno!==t.lineno||e.colno!==t.colno||e.function!==t.function)return!1}return!0}function De(e,t){let r=e.fingerprint,n=t.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;try{return!(r.join("")!==n.join(""))}catch(s){return!1}}function ke(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Re(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(r){return}}var _e=r(1731),Ie=r(3435);const Pe="GlobalHandlers",Oe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,s.A)({onerror:!0,onunhandledrejection:!0},e);return{name:Pe,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){(0,_e.L)(t=>{const{stackParser:r,attachStacktrace:n}=Me();if((0,g.KU)()!==e||ee())return;const{msg:s,url:a,line:i,column:l,error:o}=t,c=void 0===o&&(0,U.Kg)(s)?function(e,t,r,n){const s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let a=(0,U.T2)(e)?e.message:e,i="Error";const l=a.match(s);l&&(i=l[1],a=l[2]);const o={exception:{values:[{type:i,value:a}]}};return Le(o,t,r,n)}(s,a,i,l):Le(X(r,o||s,void 0,n,!1),a,i,l);c.level="error",(0,g.r)(c,{originalException:o,mechanism:{handled:!1,type:"onerror"}})})}(e),Fe("onerror")),t.onunhandledrejection&&(!function(e){(0,Ie.r)(t=>{const{stackParser:r,attachStacktrace:n}=Me();if((0,g.KU)()!==e||ee())return;const s=function(e){if((0,U.sO)(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(r){}return e}(t),a=(0,U.sO)(s)?{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: ".concat(String(s))}]}}:X(r,s,void 0,n,!0);a.level="error",(0,g.r)(a,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(e),Fe("onunhandledrejection"))}}};d(Pe,Oe);function Le(e,t,r,n){const s=e.exception=e.exception||{},a=s.values=s.values||[],i=a[0]=a[0]||{},l=i.stacktrace=i.stacktrace||{},o=l.frames=l.frames||[],c=isNaN(parseInt(n,10))?void 0:n,d=isNaN(parseInt(r,10))?void 0:r,u=(0,U.Kg)(t)&&t.length>0?t:(0,ge.$N)();return 0===o.length&&o.push({colno:c,filename:u,function:"?",in_app:!0,lineno:d}),e}function Fe(e){z&&a.vF.log("Global Handler attached: ".concat(e))}function Me(){const e=(0,g.KU)();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Ue="HttpContext",Be=()=>({name:Ue,setupOnce(){},preprocessEvent(e){if(!Z.navigator&&!Z.location&&!Z.document)return;const t=e.request&&e.request.url||Z.location&&Z.location.href,{referrer:r}=Z.document||{},{userAgent:n}=Z.navigator||{},a=(0,s.A)((0,s.A)((0,s.A)({},e.request&&e.request.headers),r&&{Referer:r}),n&&{"User-Agent":n}),i=(0,s.A)((0,s.A)((0,s.A)({},e.request),t&&{url:t}),{},{headers:a});e.request=i}});d(Ue,Be);function He(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;if(!a.exception||!a.exception.values||!i||!(0,U.tH)(i.originalException,Error))return;const o=a.exception.values.length>0?a.exception.values[a.exception.values.length-1]:void 0;var c,d;o&&(a.exception.values=(c=ze(e,t,s,i.originalException,n,a.exception.values,o,0),d=r,c.map(e=>(e.value&&(e.value=(0,l.xv)(e.value,d)),e))))}function ze(e,t,r,n,s,a,i,l){if(a.length>=r+1)return a;let o=[...a];if((0,U.tH)(n[s],Error)){Ge(i,l);const a=e(t,n[s]),c=o.length;Ve(a,s,c,l),o=ze(e,t,r,n[s],s,[a,...o],a,c)}return Array.isArray(n.errors)&&n.errors.forEach((n,a)=>{if((0,U.tH)(n,Error)){Ge(i,l);const c=e(t,n),d=o.length;Ve(c,"errors[".concat(a,"]"),d,l),o=ze(e,t,r,n,s,[c,...o],c,d)}}),o}function Ge(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism=(0,s.A)((0,s.A)((0,s.A)({},e.mechanism),"AggregateError"===e.type&&{is_exception_group:!0}),{},{exception_id:t})}function Ve(e,t,r,n){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism=(0,s.A)((0,s.A)({},e.mechanism),{},{type:"chained",source:t,exception_id:r,parent_id:n})}const We="LinkedErrors",qe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.limit||5,r=e.key||"cause";return{name:We,setupOnce(){},preprocessEvent(e,n,s){const a=s.getOptions();He(G,a.stackParser,a.maxValueLength,r,t,e,n)}}},$e=(d(We,qe),["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"]),Ke="TryCatch",Xe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,s.A)({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e);return{name:Ke,setupOnce(){t.setTimeout&&(0,f.GS)(Z,"setTimeout",Ye),t.setInterval&&(0,f.GS)(Z,"setInterval",Ye),t.requestAnimationFrame&&(0,f.GS)(Z,"requestAnimationFrame",Je),t.XMLHttpRequest&&"XMLHttpRequest"in Z&&(0,f.GS)(XMLHttpRequest.prototype,"send",Ze);const e=t.eventTarget;if(e){(Array.isArray(e)?e:$e).forEach(Qe)}}}};d(Ke,Xe);function Ye(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const s=r[0];return r[0]=te(s,{mechanism:{data:{function:(0,E.qQ)(e)},handled:!1,type:"instrument"}}),e.apply(this,r)}}function Je(e){return function(t){return e.apply(this,[te(t,{mechanism:{data:{function:"requestAnimationFrame",handler:(0,E.qQ)(e)},handled:!1,type:"instrument"}})])}}function Ze(e){return function(){const t=this;["onload","onerror","onprogress","onreadystatechange"].forEach(e=>{e in t&&"function"===typeof t[e]&&(0,f.GS)(t,e,function(t){const r={mechanism:{data:{function:e,handler:(0,E.qQ)(t)},handled:!1,type:"instrument"}},n=(0,f.sp)(t);return n&&(r.mechanism.data.handler=(0,E.qQ)(n)),te(t,r)})});for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e.apply(this,n)}}function Qe(e){const t=Z,r=t[e]&&t[e].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&((0,f.GS)(r,"addEventListener",function(t){return function(r,n,s){try{"function"===typeof n.handleEvent&&(n.handleEvent=te(n.handleEvent,{mechanism:{data:{function:"handleEvent",handler:(0,E.qQ)(n),target:e},handled:!1,type:"instrument"}}))}catch(a){}return t.apply(this,[r,te(n,{mechanism:{data:{function:"addEventListener",handler:(0,E.qQ)(n),target:e},handled:!1,type:"instrument"}}),s])}}),(0,f.GS)(r,"removeEventListener",function(e){return function(t,r,n){const s=r;try{const r=s&&s.__sentry_wrapped__;r&&e.call(this,t,r,n)}catch(mn){}return e.call(this,t,s,n)}}))}const et="?";function tt(e,t,r,n){const s={filename:e,function:t,in_app:!0};return void 0!==r&&(s.lineno=r),void 0!==n&&(s.colno=n),s}const rt=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,nt=/\((\S*)(?::(\d+))(?::(\d+))\)/,st=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,at=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,it=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,lt=[[30,e=>{const t=rt.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=nt.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,r]=ot(t[1]||et,t[2]);return tt(r,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=st.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=at.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],r=t[1]||et;return[r,e]=ot(r,e),tt(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=it.exec(e);return t?tt(t[2],t[1]||et,+t[3],t[4]?+t[4]:void 0):void 0}]],ot=((0,E.gd)(...lt),(e,t)=>{const r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:et,r?"safari-extension:".concat(t):"safari-web-extension:".concat(t)]:[e,t]});p(),N(),Xe(),Ae(),Oe(),qe(),Ce(),Be();const ct=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,c.BF)();if(!Z.document)return void(z&&a.vF.error("Global document not defined in showReportDialog call"));const{client:r,scope:n}=t.getStackTop(),i=e.dsn||r&&r.getDsn();if(!i)return void(z&&a.vF.error("DSN not configured for showReportDialog call"));n&&(e.user=(0,s.A)((0,s.A)({},n.getUser()),e.user)),e.eventId||(e.eventId=t.lastEventId());const l=Z.document.createElement("script");l.async=!0,l.crossOrigin="anonymous",l.src=function(e,t){const r=T(e);if(!r)return"";const n="".concat(C(r),"embed/error-page/");let s="dsn=".concat(S(r));for(const a in t)if("dsn"!==a&&"onClose"!==a)if("user"===a){const e=t.user;if(!e)continue;e.name&&(s+="&name=".concat(encodeURIComponent(e.name))),e.email&&(s+="&email=".concat(encodeURIComponent(e.email)))}else s+="&".concat(encodeURIComponent(a),"=").concat(encodeURIComponent(t[a]));return"".concat(n,"?").concat(s)}(i,e),e.onLoad&&(l.onload=e.onLoad);const{onClose:o}=e;if(o){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{o()}finally{Z.removeEventListener("message",e)}};Z.addEventListener("message",e)}const d=Z.document.head||Z.document.body;d?d.appendChild(l):z&&a.vF.error("Not injecting report dialog. No injection point found in HTML")};var dt=r(3739),ut=(r(4977),r(8188),r(8831));r(4150);const mt="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var ht=r(2791);const pt=D.OW;r(733);r(7433),r(5064);function xt(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}r(7795);var ft=r(7362);r(1538);const gt=["localhost",/^\/(?!\/)/],vt={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:gt,tracePropagationTargets:gt};(0,s.A)((0,s.A)({},dt.Cq),{},{markBackgroundTransactions:!0,routingInstrumentation:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!pt||!pt.location)return void(mt&&a.vF.warn("Could not initialize routing instrumentation due to invalid location"));let n,s=pt.location.href;t&&(n=e({name:pt.location.pathname,startTimestamp:H.k3?H.k3/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),r&&F(t=>{let{to:r,from:i}=t;void 0===i&&s&&-1!==s.indexOf(r)?s=void 0:i!==r&&(s=void 0,n&&(mt&&a.vF.log("[Tracing] Finishing current transaction with op: ".concat(n.op)),n.end()),n=e({name:pt.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{}},vt);function yt(e){let t,r=e[0],n=1;for(;n<e.length;){const s=e[n],a=e[n+1];if(n+=2,("optionalAccess"===s||"optionalCall"===s)&&null==r)return;"access"===s||"optionalAccess"===s?(t=r,r=a(r)):"call"!==s&&"optionalCall"!==s||(r=a(function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return r.call(t,...n)}),t=void 0)}return r}var bt=r(8658);function Nt(e){const t=yt([e,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);return"sentry"!==(yt([t,"optionalAccess",e=>e.instrumenter])||"sentry")}class jt{static __initStatic(){this.id="Apollo"}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{useNestjs:!1};this.name=jt.id,this._useNest=!!e.useNestjs}loadDependency(){return this._useNest?this._module=this._module||(0,bt.Vw)("@nestjs/graphql"):this._module=this._module||(0,bt.Vw)("apollo-server-core"),this._module}setupOnce(e,t){if(Nt(t))mt&&a.vF.log("Apollo Integration is skipped because of instrumenter configuration.");else if(this._useNest){const e=this.loadDependency();if(!e)return void(mt&&a.vF.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package."));(0,f.GS)(e.GraphQLFactory.prototype,"mergeWithSchema",function(e){return function(){(0,f.GS)(this.resolversExplorerService,"explore",function(e){return function(){return wt((0,i.k9)(e.call(this)),t)}});for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e.call(this,...n)}})}else{const e=this.loadDependency();if(!e)return void(mt&&a.vF.error("Apollo Integration was unable to require apollo-server-core package."));(0,f.GS)(e.ApolloServerBase.prototype,"constructSchema",function(e){return function(){if(!this.config.resolvers)return mt&&(this.config.schema?(a.vF.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),a.vF.warn()):this.config.modules&&a.vF.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),a.vF.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),e.call(this);const r=(0,i.k9)(this.config.resolvers);return this.config.resolvers=wt(r,t),e.call(this)}})}}}function wt(e,t){return e.map(e=>(Object.keys(e).forEach(r=>{Object.keys(e[r]).forEach(n=>{"function"===typeof e[r][n]&&function(e,t,r,n){(0,f.GS)(e[t],r,function(e){return function(){const s=yt([n().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:"".concat(t,".").concat(r),op:"graphql.resolve",origin:"auto.graphql.apollo"})]);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];const o=e.call(this,...i);return(0,U.Qg)(o)?o.then(e=>(yt([s,"optionalAccess",e=>e.end,"call",e=>e()]),e)):(yt([s,"optionalAccess",e=>e.end,"call",e=>e()]),o)}})}(e,r,n,t)})}),e))}jt.__initStatic();function St(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.method&&e.method.toUpperCase();let n="",s="url";t.customRoute||e.route?(n=t.customRoute||"".concat(e.baseUrl||"").concat(e.route&&e.route.path),s="route"):(e.originalUrl||e.url)&&(n=Ne(e.originalUrl||e.url||""));let a="";return t.method&&r&&(a+=r),t.method&&t.path&&(a+=" "),t.path&&n&&(a+=n),[a,s]}class At{static __initStatic(){this.id="Express"}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.name=At.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}setupOnce(e,t){this._router?Nt(t)?mt&&a.vF.log("Express Integration is skipped because of instrumenter configuration."):(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.forEach(t=>function(e,t){const r=e[t];return e[t]=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return r.call(this,...function(e,t){return e.map(e=>"function"===typeof e?Tt(e,t):Array.isArray(e)?e.map(e=>"function"===typeof e?Tt(e,t):e):e)}(n,t))},e}(e,t))}(this._router,this._methods),function(e){const t="settings"in e;t&&void 0===e._router&&e.lazyrouter&&e.lazyrouter();const r=t?e._router:e;if(!r)return mt&&a.vF.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(mt&&a.vF.debug("Routing instrumentation is currently only supported in Express 4."));const n=Object.getPrototypeOf(r),s=n.process_params;n.process_params=function(e,t,r,n,a){r._reconstructedRoute||(r._reconstructedRoute="");const{layerRoutePath:i,isRegex:l,isArray:o,numExtraSegments:c}=function(e){let t=yt([e,"access",e=>e.route,"optionalAccess",e=>e.path]);const r=(0,U.gd)(t),n=Array.isArray(t);if(!t){const[r]=D.OW.process.versions.node.split(".").map(Number);r>=16&&(t=Ct(e.path,e.regexp,e.keys))}if(!t)return{isRegex:r,isArray:n,numExtraSegments:0};const s=n?Math.max((i=t,i.reduce((e,t)=>e+je(t.toString()),0)-je(e.path||"")),0):0,a=function(e,t){if(e)return t.map(e=>e.toString()).join(",");return t&&t.toString()}(n,t);var i;return{layerRoutePath:a,isRegex:r,isArray:n,numExtraSegments:s}}(e);let d;(i||l||o)&&(r._hasParameters=!0),d=i||(function(e,t,r){const n=yt([Ne(e||""),"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e(e=>!!e)]);let s=0;const a=yt([t,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e(e=>!!e),"access",e=>e.length])||0;return yt([r,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e(e=>yt([n,"optionalAccess",e=>e[a+s]])===e&&(s+=1,!0)),"access",e=>e.join,"call",e=>e("/")])}(r.originalUrl,r._reconstructedRoute,e.path)||"");const u=d.split("/").filter(e=>e.length>0&&(l||o||!e.includes("*"))).join("/");u&&u.length>0&&(r._reconstructedRoute+="/".concat(u).concat(l?"/":""));if(je(Ne(r.originalUrl||""))+c===je(r._reconstructedRoute)){r._hasParameters||r._reconstructedRoute!==r.originalUrl&&(r._reconstructedRoute=r.originalUrl?Ne(r.originalUrl):r.originalUrl);const e=n.__sentry_transaction,t=e&&(0,ht.et)(e).data||{};if(e&&"custom"!==t[ut.i_]){const t=r._reconstructedRoute||"/",[n,s]=St(r,{path:!0,method:!0,customRoute:t});e.updateName(n),e.setAttribute(ut.i_,s)}}return s.call(this,e,t,r,n,a)}}(this._router)):mt&&a.vF.error("ExpressIntegration is missing an Express instance")}}function Tt(e,t){const r=e.length;switch(r){case 2:return function(r,n){const s=n.__sentry_transaction;if(s){const r=s.startChild({description:e.name,op:"middleware.express.".concat(t),origin:"auto.middleware.express"});n.once("finish",()=>{r.end()})}return e.call(this,r,n)};case 3:return function(r,n,s){const a=yt([n.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",r=>r({description:e.name,op:"middleware.express.".concat(t),origin:"auto.middleware.express"})]);e.call(this,r,n,function(){yt([a,"optionalAccess",e=>e.end,"call",e=>e()]);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];s.call(this,...t)})};case 4:return function(r,n,s,a){const i=yt([s.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",r=>r({description:e.name,op:"middleware.express.".concat(t),origin:"auto.middleware.express"})]);e.call(this,r,n,s,function(){yt([i,"optionalAccess",e=>e.end,"call",e=>e()]);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];a.call(this,...t)})};default:throw new Error("Express middleware takes 2-4 arguments. Got: ".concat(r))}}At.__initStatic();const Ct=(e,t,r)=>{if(!e||!t||!r||0===Object.keys(r).length||void 0===yt([r,"access",e=>e[0],"optionalAccess",e=>e.offset])||null===yt([r,"access",e=>e[0],"optionalAccess",e=>e.offset]))return;const n=r.sort((e,t)=>e.offset-t.offset),s=new RegExp(t,"".concat(t.flags,"d")).exec(e);if(!s||!s.indices)return;const[,...a]=s.indices;if(a.length!==n.length)return;let i=e,l=0;return a.forEach((e,t)=>{if(e){const[r,s]=e,a=i.substring(0,r-l),o=":".concat(n[t].name),c=i.substring(s-l);i=a+o+c,l+=s-r-o.length}}),i};class Et{static __initStatic(){this.id="GraphQL"}constructor(){this.name=Et.id}loadDependency(){return this._module=this._module||(0,bt.Vw)("graphql/execution/execute.js")}setupOnce(e,t){if(Nt(t))return void(mt&&a.vF.log("GraphQL Integration is skipped because of instrumenter configuration."));const r=this.loadDependency();r?(0,f.GS)(r,"execute",function(e){return function(){const r=t().getScope(),n=r.getSpan(),s=yt([n,"optionalAccess",e=>e.startChild,"call",e=>e({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);yt([r,"optionalAccess",e=>e.setSpan,"call",e=>e(s)]);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];const o=e.call(this,...i);return(0,U.Qg)(o)?o.then(e=>(yt([s,"optionalAccess",e=>e.end,"call",e=>e()]),yt([r,"optionalAccess",e=>e.setSpan,"call",e=>e(n)]),e)):(yt([s,"optionalAccess",e=>e.end,"call",e=>e()]),yt([r,"optionalAccess",e=>e.setSpan,"call",e=>e(n)]),o)}}):mt&&a.vF.error("GraphQL Integration was unable to require graphql/execution package.")}}Et.__initStatic();const Dt=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],kt={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class Rt{static __initStatic(){this.id="Mongo"}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.name=Rt.id,this._operations=Array.isArray(e.operations)?e.operations:Dt,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}loadDependency(){const e=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||(0,bt.Vw)(e)}setupOnce(e,t){if(Nt(t))return void(mt&&a.vF.log("Mongo Integration is skipped because of instrumenter configuration."));const r=this.loadDependency();if(!r){const e=this._useMongoose?"mongoose":"mongodb";return void(mt&&a.vF.error("Mongo Integration was unable to require `".concat(e,"` package.")))}this._instrumentOperations(r.Collection,this._operations,t)}_instrumentOperations(e,t,r){t.forEach(t=>this._patchOperation(e,t,r))}_patchOperation(e,t,r){if(!(t in e.prototype))return;const n=this._getSpanContextFromOperationArguments.bind(this);(0,f.GS)(e.prototype,t,function(e){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];const l=a[a.length-1],o=r(),c=o.getScope(),d=o.getClient(),u=c.getSpan(),m=yt([d,"optionalAccess",e=>e.getOptions,"call",e=>e(),"access",e=>e.sendDefaultPii]);if("function"!==typeof l||"mapReduce"===t&&2===a.length){const r=yt([u,"optionalAccess",e=>e.startChild,"call",e=>e(n(this,t,a,m))]),s=e.call(this,...a);if((0,U.Qg)(s))return s.then(e=>(yt([r,"optionalAccess",e=>e.end,"call",e=>e()]),e));if((h=s)&&"object"===typeof h&&h.once&&"function"===typeof h.once){const e=s;try{e.once("close",()=>{yt([r,"optionalAccess",e=>e.end,"call",e=>e()])})}catch(mn){yt([r,"optionalAccess",e=>e.end,"call",e=>e()])}return e}return yt([r,"optionalAccess",e=>e.end,"call",e=>e()]),s}var h;const p=yt([u,"optionalAccess",e=>e.startChild,"call",e=>e(n(this,t,a.slice(0,-1)))]);return e.call(this,...a.slice(0,-1),function(e,t){yt([p,"optionalAccess",e=>e.end,"call",e=>e()]),l(e,t)})}})}_getSpanContextFromOperationArguments(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s={"db.system":"mongodb","db.name":e.dbName,"db.operation":t,"db.mongodb.collection":e.collectionName},a={op:"db",origin:"auto.db.mongo",description:t,data:s},i=kt[t],l=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!i||!l||!n)return a;try{if("mapReduce"===t){const[e,t]=r;s[i[0]]="string"===typeof e?e:e.name||"<anonymous>",s[i[1]]="string"===typeof t?t:t.name||"<anonymous>"}else for(let e=0;e<i.length;e++)s["db.mongodb.".concat(i[e])]=JSON.stringify(r[e])}catch(o){}return a}}Rt.__initStatic();class _t{static __initStatic(){this.id="Mysql"}constructor(){this.name=_t.id}loadDependency(){return this._module=this._module||(0,bt.Vw)("mysql/lib/Connection.js")}setupOnce(e,t){if(Nt(t))return void(mt&&a.vF.log("Mysql Integration is skipped because of instrumenter configuration."));const r=this.loadDependency();if(!r)return void(mt&&a.vF.error("Mysql Integration was unable to require `mysql` package."));let n;try{r.prototype.connect=new Proxy(r.prototype.connect,{apply:(e,t,r)=>(n||(n=t.config),e.apply(t,r))})}catch(mn){mt&&a.vF.error("Mysql Integration was unable to instrument `mysql` config.")}function s(e){if(!e)return;const t=n?{"server.address":n.host,"server.port":n.port,"db.user":n.user}:{};Object.keys(t).forEach(r=>{e.setAttribute(r,t[r])}),e.end()}(0,f.GS)(r,"createQuery",function(e){return function(r,n,a){const i=yt([t().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"===typeof r?r:r.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if("function"===typeof a)return e.call(this,r,n,function(e,t,r){s(i),a(e,t,r)});if("function"===typeof n)return e.call(this,r,function(e,t,r){s(i),n(e,t,r)});const l=e.call(this,r,n);return l.on("end",()=>{s(i)}),l}})}}_t.__initStatic();class It{static __initStatic(){this.id="Postgres"}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.name=It.id,this._usePgNative=!!e.usePgNative,this._module=e.module}loadDependency(){return this._module=this._module||(0,bt.Vw)("pg")}setupOnce(e,t){if(Nt(t))return void(mt&&a.vF.log("Postgres Integration is skipped because of instrumenter configuration."));const r=this.loadDependency();if(!r)return void(mt&&a.vF.error("Postgres Integration was unable to require `pg` package."));const n=this._usePgNative?yt([r,"access",e=>e.native,"optionalAccess",e=>e.Client]):r.Client;n?(0,f.GS)(n.prototype,"query",function(e){return function(r,n,s){const a=t().getScope().getSpan(),i={"db.system":"postgresql"};try{this.database&&(i["db.name"]=this.database),this.host&&(i["server.address"]=this.host),this.port&&(i["server.port"]=this.port),this.user&&(i["db.user"]=this.user)}catch(mn){}const l=yt([a,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"===typeof r?r:r.text,op:"db",origin:"auto.db.postgres",data:i})]);if("function"===typeof s)return e.call(this,r,n,function(e,t){yt([l,"optionalAccess",e=>e.end,"call",e=>e()]),s(e,t)});if("function"===typeof n)return e.call(this,r,function(e,t){yt([l,"optionalAccess",e=>e.end,"call",e=>e()]),n(e,t)});const o="undefined"!==typeof n?e.call(this,r,n):e.call(this,r);return(0,U.Qg)(o)?o.then(e=>(yt([l,"optionalAccess",e=>e.end,"call",e=>e()]),e)):(yt([l,"optionalAccess",e=>e.end,"call",e=>e()]),o)}}):mt&&a.vF.error("Postgres Integration was unable to access 'pg-native' bindings.")}}It.__initStatic();class Pt{static __initStatic(){this.id="Prisma"}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.name=Pt.id,(t=e.client)&&t.$use&&!e.client._sentryInstrumented){(0,f.my)(e.client,"_sentryInstrumented",!0);const t={};try{const r=e.client._engineConfig;if(r){const{activeProvider:e,clientVersion:n}=r;e&&(t["db.system"]=e),n&&(t["db.prisma.version"]=n)}}catch(mn){}e.client.$use((e,r)=>{if(Nt(c.BF))return r(e);const n=e.action,a=e.model;return(0,ft.Lk)({name:a?"".concat(a," ").concat(n):n,onlyIfParent:!0,op:"db.prisma",attributes:{[ut.JD]:"auto.db.prisma"},data:(0,s.A)((0,s.A)({},t),{},{"db.operation":n})},()=>r(e))})}else mt&&a.vF.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",e.client);var t}setupOnce(){}}Pt.__initStatic();var Ot=r(1043);("undefined"===typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&(0,Ot.l)();var Lt,Ft=r(7119),Mt=r.t(Ft,2);function Ut(){return Ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ut.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Lt||(Lt={}));const Bt="popstate";function Ht(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function zt(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(mn){}}}function Gt(e,t){return{usr:e.state,key:e.key,idx:t}}function Vt(e,t,r,n){return void 0===r&&(r=null),Ut({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?qt(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function Wt(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function qt(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function $t(e,t,r,n){void 0===n&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,l=Lt.Pop,o=null,c=d();function d(){return(i.state||{idx:null}).idx}function u(){l=Lt.Pop;let e=d(),t=null==e?null:e-c;c=e,o&&o({action:l,location:h.location,delta:t})}function m(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,r="string"===typeof e?e:Wt(e);return r=r.replace(/ $/,"%20"),Ht(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==c&&(c=0,i.replaceState(Ut({},i.state,{idx:c}),""));let h={get action(){return l},get location(){return e(s,i)},listen(e){if(o)throw new Error("A history only accepts one active listener");return s.addEventListener(Bt,u),o=e,()=>{s.removeEventListener(Bt,u),o=null}},createHref:e=>t(s,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=Lt.Push;let n=Vt(h.location,e,t);r&&r(n,e),c=d()+1;let u=Gt(n,c),m=h.createHref(n);try{i.pushState(u,"",m)}catch(Sc){if(Sc instanceof DOMException&&"DataCloneError"===Sc.name)throw Sc;s.location.assign(m)}a&&o&&o({action:l,location:h.location,delta:1})},replace:function(e,t){l=Lt.Replace;let n=Vt(h.location,e,t);r&&r(n,e),c=d();let s=Gt(n,c),u=h.createHref(n);i.replaceState(s,"",u),a&&o&&o({action:l,location:h.location,delta:0})},go:e=>i.go(e)};return h}var Kt;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Kt||(Kt={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function Xt(e,t,r){return void 0===r&&(r="/"),Yt(e,t,r,!1)}function Yt(e,t,r,n){let s=dr(("string"===typeof t?qt(t):t).pathname||"/",r);if(null==s)return null;let a=Jt(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let l=0;null==i&&l<a.length;++l){let e=cr(s);i=lr(a[l],e,n)}return i}function Jt(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let s=(e,s,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};i.relativePath.startsWith("/")&&(Ht(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(n.length));let l=xr([n,i.relativePath]),o=r.concat(i);e.children&&e.children.length>0&&(Ht(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),Jt(e.children,t,o,l)),(null!=e.path||e.index)&&t.push({path:l,score:ir(l,e.index),routesMeta:o})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of Zt(e.path))s(e,t,n);else s(e,t)}),t}function Zt(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===n.length)return s?[a,""]:[a];let i=Zt(n.join("/")),l=[];return l.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&l.push(...i),l.map(t=>e.startsWith("/")&&""===t?"/":t)}const Qt=/^:[\w-]+$/,er=3,tr=2,rr=1,nr=10,sr=-2,ar=e=>"*"===e;function ir(e,t){let r=e.split("/"),n=r.length;return r.some(ar)&&(n+=sr),t&&(n+=tr),r.filter(e=>!ar(e)).reduce((e,t)=>e+(Qt.test(t)?er:""===t?rr:nr),n)}function lr(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,s={},a="/",i=[];for(let l=0;l<n.length;++l){let e=n[l],o=l===n.length-1,c="/"===a?t:t.slice(a.length)||"/",d=or({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&r&&!n[n.length-1].route.index&&(d=or({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:xr([a,d.pathname]),pathnameBase:fr(xr([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=xr([a,d.pathnameBase]))}return i}function or(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);zt("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let a=new RegExp(s,t?void 0:"i");return[a,n]}(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((e,t,r)=>{let{paramName:n,isOptional:s}=t;if("*"===n){let e=l[r]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[r];return e[n]=s&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:i,pattern:e}}function cr(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(Sc){return zt(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Sc+")."),e}}function dr(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function ur(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function mr(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function hr(e,t){let r=mr(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function pr(e,t,r,n){let s;void 0===n&&(n=!1),"string"===typeof e?s=qt(e):(s=Ut({},e),Ht(!s.pathname||!s.pathname.includes("?"),ur("?","pathname","search",s)),Ht(!s.pathname||!s.pathname.includes("#"),ur("#","pathname","hash",s)),Ht(!s.search||!s.search.includes("#"),ur("#","search","hash",s)));let a,i=""===e||""===s.pathname,l=i?"/":s.pathname;if(null==l)a=r;else{let e=t.length-1;if(!n&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let o=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:s=""}="string"===typeof e?qt(e):e,a=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:a,search:gr(n),hash:vr(s)}}(s,a),c=l&&"/"!==l&&l.endsWith("/"),d=(i||"."===l)&&r.endsWith("/");return o.pathname.endsWith("/")||!c&&!d||(o.pathname+="/"),o}const xr=e=>e.join("/").replace(/\/\/+/g,"/"),fr=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gr=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",vr=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function yr(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const br=["post","put","patch","delete"],Nr=(new Set(br),["get",...br]);new Set(Nr),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function jr(){return jr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jr.apply(this,arguments)}const wr=e.createContext(null);const Sr=e.createContext(null);const Ar=e.createContext(null);const Tr=e.createContext(null);const Cr=e.createContext({outlet:null,matches:[],isDataRoute:!1});const Er=e.createContext(null);function Dr(){return null!=e.useContext(Tr)}function kr(){return Dr()||Ht(!1),e.useContext(Tr).location}function Rr(t){e.useContext(Ar).static||e.useLayoutEffect(t)}function _r(){let{isDataRoute:t}=e.useContext(Cr);return t?function(){let{router:t}=zr(Br.UseNavigateStable),r=Vr(Hr.UseNavigateStable),n=e.useRef(!1);Rr(()=>{n.current=!0});let s=e.useCallback(function(e,s){void 0===s&&(s={}),n.current&&("number"===typeof e?t.navigate(e):t.navigate(e,jr({fromRouteId:r},s)))},[t,r]);return s}():function(){Dr()||Ht(!1);let t=e.useContext(wr),{basename:r,future:n,navigator:s}=e.useContext(Ar),{matches:a}=e.useContext(Cr),{pathname:i}=kr(),l=JSON.stringify(hr(a,n.v7_relativeSplatPath)),o=e.useRef(!1);return Rr(()=>{o.current=!0}),e.useCallback(function(e,n){if(void 0===n&&(n={}),!o.current)return;if("number"===typeof e)return void s.go(e);let a=pr(e,JSON.parse(l),i,"path"===n.relative);null==t&&"/"!==r&&(a.pathname="/"===a.pathname?r:xr([r,a.pathname])),(n.replace?s.replace:s.push)(a,n.state,n)},[r,s,l,i,t])}()}function Ir(t,r){let{relative:n}=void 0===r?{}:r,{future:s}=e.useContext(Ar),{matches:a}=e.useContext(Cr),{pathname:i}=kr(),l=JSON.stringify(hr(a,s.v7_relativeSplatPath));return e.useMemo(()=>pr(t,JSON.parse(l),i,"path"===n),[t,l,i,n])}function Pr(t,r,n,s){Dr()||Ht(!1);let{navigator:a}=e.useContext(Ar),{matches:i}=e.useContext(Cr),l=i[i.length-1],o=l?l.params:{},c=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,u=kr();if(r){var m;let e="string"===typeof r?qt(r):r;"/"===c||(null==(m=e.pathname)?void 0:m.startsWith(c))||Ht(!1),d=e}else d=u;let h=d.pathname||"/",p=h;if("/"!==c){let e=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=Xt(t,{pathname:p});let f=Ur(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:xr([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:xr([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),i,n,s);return r&&f?e.createElement(Tr.Provider,{value:{location:jr({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Lt.Pop}},f):f}function Or(){let t=function(){var t;let r=e.useContext(Er),n=Gr(Hr.UseRouteError),s=Vr(Hr.UseRouteError);if(void 0!==r)return r;return null==(t=n.errors)?void 0:t[s]}(),r=yr(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},r),n?e.createElement("pre",{style:a},n):null,null)}const Lr=e.createElement(Or,null);class Fr extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(Cr.Provider,{value:this.props.routeContext},e.createElement(Er.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mr(t){let{routeContext:r,match:n,children:s}=t,a=e.useContext(wr);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),e.createElement(Cr.Provider,{value:r},s)}function Ur(t,r,n,s){var a;if(void 0===r&&(r=[]),void 0===n&&(n=null),void 0===s&&(s=null),null==t){var i;if(!n)return null;if(n.errors)t=n.matches;else{if(!(null!=(i=s)&&i.v7_partialHydration&&0===r.length&&!n.initialized&&n.matches.length>0))return null;t=n.matches}}let l=t,o=null==(a=n)?void 0:a.errors;if(null!=o){let e=l.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||Ht(!1),l=l.slice(0,Math.min(l.length,e+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let e=0;e<l.length;e++){let t=l[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(d=e),t.route.id){let{loaderData:e,errors:r}=n,s=t.route.loader&&void 0===e[t.route.id]&&(!r||void 0===r[t.route.id]);if(t.route.lazy||s){c=!0,l=d>=0?l.slice(0,d+1):[l[0]];break}}}return l.reduceRight((t,s,a)=>{let i,u=!1,m=null,h=null;var p;n&&(i=o&&s.route.id?o[s.route.id]:void 0,m=s.route.errorElement||Lr,c&&(d<0&&0===a?(p="route-fallback",!1||Wr[p]||(Wr[p]=!0),u=!0,h=null):d===a&&(u=!0,h=s.route.hydrateFallbackElement||null)));let x=r.concat(l.slice(0,a+1)),f=()=>{let r;return r=i?m:u?h:s.route.Component?e.createElement(s.route.Component,null):s.route.element?s.route.element:t,e.createElement(Mr,{match:s,routeContext:{outlet:t,matches:x,isDataRoute:null!=n},children:r})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===a)?e.createElement(Fr,{location:n.location,revalidation:n.revalidation,component:m,error:i,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):f()},null)}var Br=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Br||{}),Hr=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Hr||{});function zr(t){let r=e.useContext(wr);return r||Ht(!1),r}function Gr(t){let r=e.useContext(Sr);return r||Ht(!1),r}function Vr(t){let r=function(){let t=e.useContext(Cr);return t||Ht(!1),t}(),n=r.matches[r.matches.length-1];return n.route.id||Ht(!1),n.route.id}const Wr={};function qr(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}t.startTransition;function $r(t){let{to:r,replace:n,state:s,relative:a}=t;Dr()||Ht(!1);let{future:i,static:l}=e.useContext(Ar),{matches:o}=e.useContext(Cr),{pathname:c}=kr(),d=_r(),u=pr(r,hr(o,i.v7_relativeSplatPath),c,"path"===a),m=JSON.stringify(u);return e.useEffect(()=>d(JSON.parse(m),{replace:n,state:s,relative:a}),[d,m,a,n,s]),null}function Kr(e){Ht(!1)}function Xr(t){let{basename:r="/",children:n=null,location:s,navigationType:a=Lt.Pop,navigator:i,static:l=!1,future:o}=t;Dr()&&Ht(!1);let c=r.replace(/^\/*/,"/"),d=e.useMemo(()=>({basename:c,navigator:i,static:l,future:jr({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);"string"===typeof s&&(s=qt(s));let{pathname:u="/",search:m="",hash:h="",state:p=null,key:x="default"}=s,f=e.useMemo(()=>{let e=dr(u,c);return null==e?null:{location:{pathname:e,search:m,hash:h,state:p,key:x},navigationType:a}},[c,u,m,h,p,x,a]);return null==f?null:e.createElement(Ar.Provider,{value:d},e.createElement(Tr.Provider,{children:n,value:f}))}function Yr(e){let{children:t,location:r}=e;return Pr(Jr(t),r)}new Promise(()=>{});e.Component;function Jr(t,r){void 0===r&&(r=[]);let n=[];return e.Children.forEach(t,(t,s)=>{if(!e.isValidElement(t))return;let a=[...r,s];if(t.type===e.Fragment)return void n.push.apply(n,Jr(t.props.children,a));t.type!==Kr&&Ht(!1),t.props.index&&t.props.children&&Ht(!1);let i={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(i.children=Jr(t.props.children,a)),n.push(i)}),n}function Zr(){return Zr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zr.apply(this,arguments)}function Qr(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}function en(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const tn=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(mn){}new Map;const rn=t.startTransition;Mt.flushSync,t.useId;function nn(t){let{basename:r,children:n,future:s,window:a}=t,i=e.useRef();var l;null==i.current&&(i.current=(void 0===(l={window:a,v5Compat:!0})&&(l={}),$t(function(e,t){let{pathname:r,search:n,hash:s}=e.location;return Vt("",{pathname:r,search:n,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:Wt(t)},null,l)));let o=i.current,[c,d]=e.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},m=e.useCallback(e=>{u&&rn?rn(()=>d(e)):d(e)},[d,u]);return e.useLayoutEffect(()=>o.listen(m),[o,m]),e.useEffect(()=>qr(s),[s]),e.createElement(Xr,{basename:r,children:n,location:c.location,navigationType:c.action,navigator:o,future:s})}const sn="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,an=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ln=e.forwardRef(function(t,r){let n,{onClick:s,relative:a,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,h=Qr(t,tn),{basename:p}=e.useContext(Ar),x=!1;if("string"===typeof d&&an.test(d)&&(n=d,sn))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),r=dr(t.pathname,p);t.origin===e.origin&&null!=r?d=r+t.search+t.hash:x=!0}catch(mn){}let f=function(t,r){let{relative:n}=void 0===r?{}:r;Dr()||Ht(!1);let{basename:s,navigator:a}=e.useContext(Ar),{hash:i,pathname:l,search:o}=Ir(t,{relative:n}),c=l;return"/"!==s&&(c="/"===l?s:xr([s,l])),a.createHref({pathname:c,search:o,hash:i})}(d,{relative:a}),g=function(t,r){let{target:n,replace:s,state:a,preventScrollReset:i,relative:l,viewTransition:o}=void 0===r?{}:r,c=_r(),d=kr(),u=Ir(t,{relative:l});return e.useCallback(e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,n)){e.preventDefault();let r=void 0!==s?s:Wt(d)===Wt(u);c(t,{replace:r,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,s,a,n,t,i,l,o])}(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:a,viewTransition:m});return e.createElement("a",Zr({},h,{href:n||f,onClick:x||i?s:function(e){s&&s(e),e.defaultPrevented||g(e)},ref:r,target:c}))});var on,cn;function dn(t){let r=e.useRef(en(t)),n=e.useRef(!1),s=kr(),a=e.useMemo(()=>function(e,t){let r=en(e);return t&&t.forEach((e,n)=>{r.has(n)||t.getAll(n).forEach(e=>{r.append(n,e)})}),r}(s.search,n.current?null:r.current),[s.search]),i=_r(),l=e.useCallback((e,t)=>{const r=en("function"===typeof e?e(a):e);n.current=!0,i("?"+r,t)},[i,a]);return[a,l]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(on||(on={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(cn||(cn={}));function un(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}let mn={data:""},hn=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||mn},pn=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,xn=/\/\*[^]*?\*\/|  +/g,fn=/\n+/g,gn=(e,t)=>{let r="",n="",s="";for(let a in e){let i=e[a];"@"==a[0]?"i"==a[1]?r=a+" "+i+";":n+="f"==a[1]?gn(i,a):a+"{"+gn(i,"k"==a[1]?"":t)+"}":"object"==typeof i?n+=gn(i,t?t.replace(/([^,])+/g,e=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):a):null!=i&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=gn.p?gn.p(a,i):a+":"+i+";")}return r+(t&&s?t+"{"+s+"}":s)+n},vn={},yn=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+yn(e[r]);return t}return e},bn=(e,t,r,n,s)=>{let a=yn(e),i=vn[a]||(vn[a]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(a));if(!vn[i]){let t=a!==e?e:(e=>{let t,r,n=[{}];for(;t=pn.exec(e.replace(xn,""));)t[4]?n.shift():t[3]?(r=t[3].replace(fn," ").trim(),n.unshift(n[0][r]=n[0][r]||{})):n[0][t[1]]=t[2].replace(fn," ").trim();return n[0]})(e);vn[i]=gn(s?{["@keyframes "+i]:t}:t,r?"":"."+i)}let l=r&&vn.g?vn.g:null;return r&&(vn.g=vn[i]),((e,t,r,n)=>{n?t.data=t.data.replace(n,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(vn[i],t,n,l),i};function Nn(e){let t=this||{},r=e.call?e(t.p):e;return bn(r.unshift?r.raw?((e,t,r)=>e.reduce((e,n,s)=>{let a=t[s];if(a&&a.call){let e=a(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":gn(e,""):!1===e?"":e}return e+n+(null==a?"":a)},""))(r,[].slice.call(arguments,1),t.p):r.reduce((e,r)=>Object.assign(e,r&&r.call?r(t.p):r),{}):r,hn(t.target),t.g,t.o,t.k)}Nn.bind({g:1});let jn,wn,Sn,An=Nn.bind({k:1});function Tn(e,t){let r=this||{};return function(){let n=arguments;function s(a,i){let l=Object.assign({},a),o=l.className||s.className;r.p=Object.assign({theme:wn&&wn()},l),r.o=/ *go\d+/.test(o),l.className=Nn.apply(r,n)+(o?" "+o:""),t&&(l.ref=i);let c=e;return e[0]&&(c=l.as||e,delete l.as),Sn&&c[0]&&Sn(l),jn(c,l)}return t?t(s):s}}var Cn,En,Dn,kn,Rn,_n,In,Pn,On,Ln,Fn,Mn,Un,Bn,Hn,zn,Gn=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Vn=(()=>{let e=0;return()=>(++e).toString()})(),Wn=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),qn="default",$n=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return(0,s.A)((0,s.A)({},e),{},{toasts:[t.toast,...e.toasts].slice(0,r)});case 1:return(0,s.A)((0,s.A)({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?(0,s.A)((0,s.A)({},e),t.toast):e)});case 2:let{toast:n}=t;return $n(e,{type:e.toasts.find(e=>e.id===n.id)?1:0,toast:n});case 3:let{toastId:a}=t;return(0,s.A)((0,s.A)({},e),{},{toasts:e.toasts.map(e=>e.id===a||void 0===a?(0,s.A)((0,s.A)({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?(0,s.A)((0,s.A)({},e),{},{toasts:[]}):(0,s.A)((0,s.A)({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return(0,s.A)((0,s.A)({},e),{},{pausedAt:t.time});case 6:let i=t.time-(e.pausedAt||0);return(0,s.A)((0,s.A)({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>(0,s.A)((0,s.A)({},e),{},{pauseDuration:e.pauseDuration+i}))})}},Kn=[],Xn={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},Yn={},Jn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qn;Yn[t]=$n(Yn[t]||Xn,e),Kn.forEach(e=>{let[r,n]=e;r===t&&n(Yn[t])})},Zn=e=>Object.keys(Yn).forEach(t=>Jn(e,t)),Qn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn;return t=>{Jn(t,e)}},es={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ts=e=>(t,r)=>{let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",r=arguments.length>2?arguments[2]:void 0;return(0,s.A)((0,s.A)({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},r),{},{id:(null==r?void 0:r.id)||Vn()})}(t,e,r);return Qn(n.toasterId||(e=>Object.keys(Yn).find(t=>Yn[t].toasts.some(t=>t.id===e)))(n.id))({type:2,toast:n}),n.id},rs=(e,t)=>ts("blank")(e,t);rs.error=ts("error"),rs.success=ts("success"),rs.loading=ts("loading"),rs.custom=ts("custom"),rs.dismiss=(e,t)=>{let r={type:3,toastId:e};t?Qn(t)(r):Zn(r)},rs.dismissAll=e=>rs.dismiss(void 0,e),rs.remove=(e,t)=>{let r={type:4,toastId:e};t?Qn(t)(r):Zn(r)},rs.removeAll=e=>rs.remove(void 0,e),rs.promise=(e,t,r)=>{let n=rs.loading(t.loading,(0,s.A)((0,s.A)({},r),null==r?void 0:r.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let a=t.success?Gn(t.success,e):void 0;return a?rs.success(a,(0,s.A)((0,s.A)({id:n},r),null==r?void 0:r.success)):rs.dismiss(n),e}).catch(e=>{let a=t.error?Gn(t.error,e):void 0;a?rs.error(a,(0,s.A)((0,s.A)({id:n},r),null==r?void 0:r.error)):rs.dismiss(n)}),e};var ns=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:n,pausedAt:a}=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qn,[n,a]=(0,e.useState)(Yn[r]||Xn),i=(0,e.useRef)(Yn[r]);(0,e.useEffect)(()=>(i.current!==Yn[r]&&a(Yn[r]),Kn.push([r,a]),()=>{let e=Kn.findIndex(e=>{let[t]=e;return t===r});e>-1&&Kn.splice(e,1)}),[r]);let l=n.toasts.map(e=>{var r,n,a;return(0,s.A)((0,s.A)((0,s.A)((0,s.A)({},t),t[e.type]),e),{},{removeDelay:e.removeDelay||(null==(r=t[e.type])?void 0:r.removeDelay)||(null==t?void 0:t.removeDelay),duration:e.duration||(null==(n=t[e.type])?void 0:n.duration)||(null==t?void 0:t.duration)||es[e.type],style:(0,s.A)((0,s.A)((0,s.A)({},t.style),null==(a=t[e.type])?void 0:a.style),e.style)})});return(0,s.A)((0,s.A)({},n),{},{toasts:l})}(t,r),i=(0,e.useRef)(new Map).current,l=(0,e.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(i.has(e))return;let r=setTimeout(()=>{i.delete(e),o({type:4,toastId:e})},t);i.set(e,r)},[]);(0,e.useEffect)(()=>{if(a)return;let e=Date.now(),t=n.map(t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout(()=>rs.dismiss(t.id,r),n);t.visible&&rs.dismiss(t.id)});return()=>{t.forEach(e=>e&&clearTimeout(e))}},[n,a,r]);let o=(0,e.useCallback)(Qn(r),[r]),c=(0,e.useCallback)(()=>{o({type:5,time:Date.now()})},[o]),d=(0,e.useCallback)((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),u=(0,e.useCallback)(()=>{a&&o({type:6,time:Date.now()})},[a,o]),m=(0,e.useCallback)((e,t)=>{let{reverseOrder:r=!1,gutter:s=8,defaultPosition:a}=t||{},i=n.filter(t=>(t.position||a)===(e.position||a)&&t.height),l=i.findIndex(t=>t.id===e.id),o=i.filter((e,t)=>t<l&&e.visible).length;return i.filter(e=>e.visible).slice(...r?[o+1]:[0,o]).reduce((e,t)=>e+(t.height||0)+s,0)},[n]);return(0,e.useEffect)(()=>{n.forEach(e=>{if(e.dismissed)l(e.id,e.removeDelay);else{let t=i.get(e.id);t&&(clearTimeout(t),i.delete(e.id))}})},[n,l]),{toasts:n,handlers:{updateHeight:d,startPause:c,endPause:u,calculateOffset:m}}},ss=An(Cn||(Cn=un(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),as=An(En||(En=un(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),is=An(Dn||(Dn=un(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),ls=Tn("div")(kn||(kn=un(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",ss,as,e=>e.secondary||"#fff",is),os=An(Rn||(Rn=un(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),cs=Tn("div")(_n||(_n=un(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",os),ds=An(In||(In=un(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),us=An(Pn||(Pn=un(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),ms=Tn("div")(On||(On=un(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",ds,us,e=>e.secondary||"#fff"),hs=Tn("div")(Ln||(Ln=un(["\n  position: absolute;\n"]))),ps=Tn("div")(Fn||(Fn=un(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),xs=An(Mn||(Mn=un(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),fs=Tn("div")(Un||(Un=un(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),xs),gs=t=>{let{toast:r}=t,{icon:n,type:a,iconTheme:i}=r;return void 0!==n?"string"==typeof n?e.createElement(fs,null,n):n:"blank"===a?null:e.createElement(ps,null,e.createElement(cs,(0,s.A)({},i)),"loading"!==a&&e.createElement(hs,null,"error"===a?e.createElement(ls,(0,s.A)({},i)):e.createElement(ms,(0,s.A)({},i))))},vs=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),ys=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),bs=Tn("div")(Bn||(Bn=un(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Ns=Tn("div")(Hn||(Hn=un(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),js=e.memo(t=>{let{toast:r,position:n,style:a,children:i}=t,l=r.height?((e,t)=>{let r=e.includes("top")?1:-1,[n,s]=Wn()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[vs(r),ys(r)];return{animation:t?"".concat(An(n)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(An(s)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(r.position||n||"top-center",r.visible):{opacity:0},o=e.createElement(gs,{toast:r}),c=e.createElement(Ns,(0,s.A)({},r.ariaProps),Gn(r.message,r));return e.createElement(bs,{className:r.className,style:(0,s.A)((0,s.A)((0,s.A)({},l),a),r.style)},"function"==typeof i?i({icon:o,message:c}):e.createElement(e.Fragment,null,o,c))});!function(e,t,r,n){gn.p=t,jn=e,wn=r,Sn=n}(e.createElement);var ws=t=>{let{id:r,className:n,style:s,onHeightUpdate:a,children:i}=t,l=e.useCallback(e=>{if(e){let t=()=>{let t=e.getBoundingClientRect().height;a(r,t)};t(),new MutationObserver(t).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[r,a]);return e.createElement("div",{ref:l,className:n,style:s},i)},Ss=Nn(zn||(zn=un(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),As=t=>{let{reverseOrder:r,position:n="top-center",toastOptions:a,gutter:i,children:l,toasterId:o,containerStyle:c,containerClassName:d}=t,{toasts:u,handlers:m}=ns(a,o);return e.createElement("div",{"data-rht-toaster":o||"",style:(0,s.A)({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},c),className:d,onMouseEnter:m.startPause,onMouseLeave:m.endPause},u.map(t=>{let a=t.position||n,o=((e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return(0,s.A)((0,s.A)({left:0,right:0,display:"flex",position:"absolute",transition:Wn()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(r?1:-1),"px)")},n),a)})(a,m.calculateOffset(t,{reverseOrder:r,gutter:i,defaultPosition:n}));return e.createElement(ws,{id:t.id,key:t.id,onHeightUpdate:m.updateHeight,className:t.visible?Ss:"",style:o},"custom"===t.type?Gn(t.message,t):l?l(t):e.createElement(js,{toast:t,position:a}))}))},Ts=rs;const Cs=["_f"],Es=["name"],Ds=["_f"],ks=["ref","message","type"],Rs=["formControl"];var _s=e=>"checkbox"===e.type,Is=e=>e instanceof Date,Ps=e=>null==e;const Os=e=>"object"===typeof e;var Ls=e=>!Ps(e)&&!Array.isArray(e)&&Os(e)&&!Is(e),Fs=e=>Ls(e)&&e.target?_s(e.target)?e.target.checked:e.target.value:e,Ms=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),Us="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function Bs(e){let t;const r=Array.isArray(e),n="undefined"!==typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(Us&&(e instanceof Blob||n)||!r&&!Ls(e))return e;if(t=r?[]:Object.create(Object.getPrototypeOf(e)),r||(e=>{const t=e.constructor&&e.constructor.prototype;return Ls(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const r in e)e.hasOwnProperty(r)&&(t[r]=Bs(e[r]));else t=e}return t}var Hs=e=>/^\w*$/.test(e),zs=e=>void 0===e,Gs=e=>Array.isArray(e)?e.filter(Boolean):[],Vs=e=>Gs(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ws=(e,t,r)=>{if(!t||!Ls(e))return r;const n=(Hs(t)?[t]:Vs(t)).reduce((e,t)=>Ps(e)?e:e[t],e);return zs(n)||n===e?zs(e[t])?r:e[t]:n},qs=e=>"boolean"===typeof e,$s=(e,t,r)=>{let n=-1;const s=Hs(t)?[t]:Vs(t),a=s.length,i=a-1;for(;++n<a;){const t=s[n];let a=r;if(n!==i){const r=e[t];a=Ls(r)||Array.isArray(r)?r:isNaN(+s[n+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=a,e=e[t]}};const Ks="blur",Xs="focusout",Ys="change",Js="onBlur",Zs="onChange",Qs="onSubmit",ea="onTouched",ta="all",ra="max",na="min",sa="maxLength",aa="minLength",ia="pattern",la="required",oa="validate",ca=e.createContext(null);ca.displayName="HookFormContext";const da=()=>e.useContext(ca);var ua=function(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(s,a,{get:()=>{const s=a;return t._proxyFormState[s]!==ta&&(t._proxyFormState[s]=!n||ta),r&&(r[s]=!0),e[s]}});return s};const ma="undefined"!==typeof window?e.useLayoutEffect:e.useEffect;var ha=e=>"string"===typeof e,pa=(e,t,r,n,s)=>ha(e)?(n&&t.watch.add(e),Ws(r,e,s)):Array.isArray(e)?e.map(e=>(n&&t.watch.add(e),Ws(r,e))):(n&&(t.watchAll=!0),r),xa=e=>Ps(e)||!Os(e);function fa(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakSet;if(xa(e)||xa(t))return e===t;if(Is(e)&&Is(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const a of n){const n=e[a];if(!s.includes(a))return!1;if("ref"!==a){const e=t[a];if(Is(n)&&Is(e)||Ls(n)&&Ls(e)||Array.isArray(n)&&Array.isArray(e)?!fa(n,e,r):n!==e)return!1}}return!0}function ga(t){const r=da(),{control:n=r.control,name:s,defaultValue:a,disabled:i,exact:l,compute:o}=t||{},c=e.useRef(a),d=e.useRef(o),u=e.useRef(void 0),m=e.useRef(n),h=e.useRef(s);d.current=o;const[p,x]=e.useState(()=>{const e=n._getWatch(s,c.current);return d.current?d.current(e):e}),f=e.useCallback(e=>{const t=pa(s,n._names,e||n._formValues,!1,c.current);return d.current?d.current(t):t},[n._formValues,n._names,s]),g=e.useCallback(e=>{if(!i){const t=pa(s,n._names,e||n._formValues,!1,c.current);if(d.current){const e=d.current(t);fa(e,u.current)||(x(e),u.current=e)}else x(t)}},[n._formValues,n._names,i,s]);ma(()=>(m.current===n&&fa(h.current,s)||(m.current=n,h.current=s,g()),n._subscribe({name:s,formState:{values:!0},exact:l,callback:e=>{g(e.values)}})),[n,l,s,g]),e.useEffect(()=>n._removeUnmounted());const v=m.current!==n,y=h.current,b=e.useMemo(()=>{if(i)return null;const e=!v&&!fa(y,s);return v||e?f():null},[i,v,s,y,f]);return null!==b?b:p}function va(t){const r=da(),{name:n,disabled:a,control:i=r.control,shouldUnregister:l,defaultValue:o}=t,c=Ms(i._names.array,n),d=e.useMemo(()=>Ws(i._formValues,n,Ws(i._defaultValues,n,o)),[i,n,o]),u=ga({control:i,name:n,defaultValue:d,exact:!0}),m=function(t){const r=da(),{control:n=r.control,disabled:a,name:i,exact:l}=t||{},[o,c]=e.useState(n._formState),d=e.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return ma(()=>n._subscribe({name:i,formState:d.current,exact:l,callback:e=>{!a&&c((0,s.A)((0,s.A)({},n._formState),e))}}),[i,a,l]),e.useEffect(()=>{d.current.isValid&&n._setValid(!0)},[n]),e.useMemo(()=>ua(o,n,d.current,!1),[o,n])}({control:i,name:n,exact:!0}),h=e.useRef(t),p=e.useRef(void 0),x=e.useRef(i.register(n,(0,s.A)((0,s.A)({},t.rules),{},{value:u},qs(t.disabled)?{disabled:t.disabled}:{})));h.current=t;const f=e.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ws(m.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ws(m.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ws(m.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ws(m.validatingFields,n)},error:{enumerable:!0,get:()=>Ws(m.errors,n)}}),[m,n]),g=e.useCallback(e=>x.current.onChange({target:{value:Fs(e),name:n},type:Ys}),[n]),v=e.useCallback(()=>x.current.onBlur({target:{value:Ws(i._formValues,n),name:n},type:Ks}),[n,i._formValues]),y=e.useCallback(e=>{const t=Ws(i._fields,n);t&&e&&(t._f.ref={focus:()=>e.focus&&e.focus(),select:()=>e.select&&e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})},[i._fields,n]),b=e.useMemo(()=>(0,s.A)((0,s.A)({name:n,value:u},qs(a)||m.disabled?{disabled:m.disabled||a}:{}),{},{onChange:g,onBlur:v,ref:y}),[n,a,m.disabled,g,v,y,u]);return e.useEffect(()=>{const e=i._options.shouldUnregister||l,t=p.current;t&&t!==n&&!c&&i.unregister(t),i.register(n,(0,s.A)((0,s.A)({},h.current.rules),qs(h.current.disabled)?{disabled:h.current.disabled}:{}));const r=(e,t)=>{const r=Ws(i._fields,e);r&&r._f&&(r._f.mount=t)};if(r(n,!0),e){const e=Bs(Ws(i._options.defaultValues,n,h.current.defaultValue));$s(i._defaultValues,n,e),zs(Ws(i._formValues,n))&&$s(i._formValues,n,e)}return!c&&i.register(n),p.current=n,()=>{(c?e&&!i._state.action:e)?i.unregister(n):r(n,!1)}},[n,i,c,l]),e.useEffect(()=>{i._setDisabledField({disabled:a,name:n})},[a,n,i]),e.useMemo(()=>({field:b,formState:m,fieldState:f}),[b,m,f])}const ya=e=>e.render(va(e));var ba=(e,t,r,n,a)=>t?(0,s.A)((0,s.A)({},r[e]),{},{types:(0,s.A)((0,s.A)({},r[e]&&r[e].types?r[e].types:{}),{},{[n]:a||!0})}):{},Na=e=>Array.isArray(e)?e:[e],ja=()=>{let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}};function wa(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],a=t[n];if(s&&Ls(s)&&a){const e=wa(s,a);Ls(e)&&(r[n]=e)}else e[n]&&(r[n]=a)}return r}var Sa=e=>Ls(e)&&!Object.keys(e).length,Aa=e=>"file"===e.type,Ta=e=>"function"===typeof e,Ca=e=>{if(!Us)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Ea=e=>"select-multiple"===e.type,Da=e=>"radio"===e.type,ka=e=>Ca(e)&&e.isConnected;function Ra(e,t){const r=Array.isArray(t)?t:Hs(t)?[t]:Vs(t),n=1===r.length?e:function(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=zs(e)?n++:e[t[n++]];return e}(e,r),s=r.length-1,a=r[s];return n&&delete n[a],0!==s&&(Ls(n)&&Sa(n)||Array.isArray(n)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!zs(e[t]))return!1;return!0}(n))&&Ra(e,r.slice(0,-1)),e}function _a(e){return Array.isArray(e)||Ls(e)&&!(e=>{for(const t in e)if(Ta(e[t]))return!0;return!1})(e)}function Ia(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const r in e)_a(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Ia(e[r],t[r])):zs(e[r])||(t[r]=!0);return t}function Pa(e,t,r){r||(r=Ia(t));for(const n in e)_a(e[n])?zs(t)||xa(r[n])?r[n]=Ia(e[n],Array.isArray(e[n])?[]:{}):Pa(e[n],Ps(t)?{}:t[n],r[n]):r[n]=!fa(e[n],t[n]);return r}const Oa={value:!1,isValid:!1},La={value:!0,isValid:!0};var Fa=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!zs(e[0].attributes.value)?zs(e[0].value)||""===e[0].value?La:{value:e[0].value,isValid:!0}:La:Oa}return Oa},Ma=(e,t)=>{let{valueAsNumber:r,valueAsDate:n,setValueAs:s}=t;return zs(e)?e:r?""===e?NaN:e?+e:e:n&&ha(e)?new Date(e):s?s(e):e};const Ua={isValid:!1,value:null};var Ba=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Ua):Ua;function Ha(e){const t=e.ref;return Aa(t)?t.files:Da(t)?Ba(e.refs).value:Ea(t)?[...t.selectedOptions].map(e=>{let{value:t}=e;return t}):_s(t)?Fa(e.refs).value:Ma(zs(t.value)?e.ref.value:t.value,e)}var za=e=>e instanceof RegExp,Ga=e=>zs(e)?e:za(e)?e.source:Ls(e)?za(e.value)?e.value.source:e.value:e,Va=e=>({isOnSubmit:!e||e===Qs,isOnBlur:e===Js,isOnChange:e===Zs,isOnAll:e===ta,isOnTouch:e===ea});const Wa="AsyncFunction";var qa=e=>!!e&&!!e.validate&&!!(Ta(e.validate)&&e.validate.constructor.name===Wa||Ls(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===Wa)),$a=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const Ka=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const r=Ws(e,s);if(r){const{_f:e}=r,a=xt(r,Cs);if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],s)&&!n)return!0;if(e.ref&&t(e.ref,e.name)&&!n)return!0;if(Ka(a,t))break}else if(Ls(a)&&Ka(a,t))break}}};function Xa(e,t,r){const n=Ws(e,r);if(n||Hs(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const n=s.join("."),a=Ws(t,n),i=Ws(e,n);if(a&&!Array.isArray(a)&&r!==n)return{name:r};if(i&&i.type)return{name:n,error:i};if(i&&i.root&&i.root.type)return{name:"".concat(n,".root"),error:i.root};s.pop()}return{name:r}}var Ya=(e,t,r)=>{const n=Na(Ws(e,r));return $s(n,"root",t[r]),$s(e,r,n),e};function Ja(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(ha(e)||Array.isArray(e)&&e.every(ha)||qs(e)&&!e)return{type:r,message:ha(e)?e:"",ref:t}}var Za=e=>Ls(e)&&!za(e)?e:{value:e,message:""},Qa=async(e,t,r,n,a,i)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:u,min:m,max:h,pattern:p,validate:x,name:f,valueAsNumber:g,mount:v}=e._f,y=Ws(r,f);if(!v||t.has(f))return{};const b=o?o[0]:l,N=e=>{a&&b.reportValidity&&(b.setCustomValidity(qs(e)?"":e||""),b.reportValidity())},j={},w=Da(l),S=_s(l),A=w||S,T=(g||Aa(l))&&zs(l.value)&&zs(y)||Ca(l)&&""===l.value||""===y||Array.isArray(y)&&!y.length,C=ba.bind(null,f,n,j),E=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:sa,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:aa;const i=e?t:r;j[f]=(0,s.A)({type:e?n:a,message:i,ref:l},C(e?n:a,i))};if(i?!Array.isArray(y)||!y.length:c&&(!A&&(T||Ps(y))||qs(y)&&!y||S&&!Fa(o).isValid||w&&!Ba(o).isValid)){const{value:e,message:t}=ha(c)?{value:!!c,message:c}:Za(c);if(e&&(j[f]=(0,s.A)({type:la,message:t,ref:b},C(la,t)),!n))return N(t),j}if(!T&&(!Ps(m)||!Ps(h))){let e,t;const r=Za(h),s=Za(m);if(Ps(y)||isNaN(y)){const n=l.valueAsDate||new Date(y),a=e=>new Date((new Date).toDateString()+" "+e),i="time"==l.type,o="week"==l.type;ha(r.value)&&y&&(e=i?a(y)>a(r.value):o?y>r.value:n>new Date(r.value)),ha(s.value)&&y&&(t=i?a(y)<a(s.value):o?y<s.value:n<new Date(s.value))}else{const n=l.valueAsNumber||(y?+y:y);Ps(r.value)||(e=n>r.value),Ps(s.value)||(t=n<s.value)}if((e||t)&&(E(!!e,r.message,s.message,ra,na),!n))return N(j[f].message),j}if((d||u)&&!T&&(ha(y)||i&&Array.isArray(y))){const e=Za(d),t=Za(u),r=!Ps(e.value)&&y.length>+e.value,s=!Ps(t.value)&&y.length<+t.value;if((r||s)&&(E(r,e.message,t.message),!n))return N(j[f].message),j}if(p&&!T&&ha(y)){const{value:e,message:t}=Za(p);if(za(e)&&!y.match(e)&&(j[f]=(0,s.A)({type:ia,message:t,ref:l},C(ia,t)),!n))return N(t),j}if(x)if(Ta(x)){const e=Ja(await x(y,r),b);if(e&&(j[f]=(0,s.A)((0,s.A)({},e),C(oa,e.message)),!n))return N(e.message),j}else if(Ls(x)){let e={};for(const t in x){if(!Sa(e)&&!n)break;const a=Ja(await x[t](y,r),b,t);a&&(e=(0,s.A)((0,s.A)({},a),C(t,a.message)),N(a.message),n&&(j[f]=e))}if(!Sa(e)&&(j[f]=(0,s.A)({ref:b},e),!n))return j}return N(!0),j};const ei={mode:Qs,reValidateMode:Zs,shouldFocusError:!0};function ti(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,s.A)((0,s.A)({},ei),t),n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ta(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},a={},i=(Ls(r.defaultValues)||Ls(r.values))&&Bs(r.defaultValues||r.values)||{},l=r.shouldUnregister?{}:Bs(i),o={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m=(0,s.A)({},u);const h={array:ja(),state:ja()},p=r.criteriaMode===ta,x=async e=>{if(!r.disabled&&(u.isValid||m.isValid||e)){const e=r.resolver?Sa((await b()).errors):await N(a,!0);e!==n.isValid&&h.state.next({isValid:e})}},f=(e,t)=>{!r.disabled&&(u.isValidating||u.validatingFields||m.isValidating||m.validatingFields)&&((e||Array.from(c.mount)).forEach(e=>{e&&(t?$s(n.validatingFields,e,t):Ra(n.validatingFields,e))}),h.state.next({validatingFields:n.validatingFields,isValidating:!Sa(n.validatingFields)}))},g=(e,t,r,n)=>{const s=Ws(a,e);if(s){const a=Ws(l,e,zs(r)?Ws(i,e):r);zs(a)||n&&n.defaultChecked||t?$s(l,e,t?a:Ha(s._f)):S(e,a),o.mount&&x()}},v=(e,t,s,a,l)=>{let o=!1,c=!1;const d={name:e};if(!r.disabled){if(!s||a){(u.isDirty||m.isDirty)&&(c=n.isDirty,n.isDirty=d.isDirty=j(),o=c!==d.isDirty);const r=fa(Ws(i,e),t);c=!!Ws(n.dirtyFields,e),r?Ra(n.dirtyFields,e):$s(n.dirtyFields,e,!0),d.dirtyFields=n.dirtyFields,o=o||(u.dirtyFields||m.dirtyFields)&&c!==!r}if(s){const t=Ws(n.touchedFields,e);t||($s(n.touchedFields,e,s),d.touchedFields=n.touchedFields,o=o||(u.touchedFields||m.touchedFields)&&t!==s)}o&&l&&h.state.next(d)}return o?d:{}},y=(t,a,i,l)=>{const o=Ws(n.errors,t),c=(u.isValid||m.isValid)&&qs(a)&&n.isValid!==a;var p;if(r.delayError&&i?(p=()=>((e,t)=>{$s(n.errors,e,t),h.state.next({errors:n.errors})})(t,i),e=e=>{clearTimeout(d),d=setTimeout(p,e)},e(r.delayError)):(clearTimeout(d),e=null,i?$s(n.errors,t,i):Ra(n.errors,t)),(i?!fa(o,i):o)||!Sa(l)||c){const e=(0,s.A)((0,s.A)((0,s.A)({},l),c&&qs(a)?{isValid:a}:{}),{},{errors:n.errors,name:t});n=(0,s.A)((0,s.A)({},n),e),h.state.next(e)}},b=async e=>{f(e,!0);const t=await r.resolver(l,r.context,((e,t,r,n)=>{const s={};for(const a of e){const e=Ws(t,a);e&&$s(s,a,e._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}})(e||c.mount,a,r.criteriaMode,r.shouldUseNativeValidation));return f(e),t},N=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const a in e){const i=e[a];if(i){const{_f:e}=i,a=xt(i,Ds);if(e){const a=c.array.has(e.name),o=i._f&&qa(i._f);o&&u.validatingFields&&f([e.name],!0);const d=await Qa(i,c.disabled,l,p,r.shouldUseNativeValidation&&!t,a);if(o&&u.validatingFields&&f([e.name]),d[e.name]&&(s.valid=!1,t))break;!t&&(Ws(d,e.name)?a?Ya(n.errors,d,e.name):$s(n.errors,e.name,d[e.name]):Ra(n.errors,e.name))}!Sa(a)&&await N(a,t,s)}}return s.valid},j=(e,t)=>!r.disabled&&(e&&t&&$s(l,e,t),!fa(k(),i)),w=(e,t,r)=>pa(e,c,(0,s.A)({},o.mount?l:zs(t)?i:ha(e)?{[e]:t}:t),r,t),S=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=Ws(a,e);let s=t;if(n){const r=n._f;r&&(!r.disabled&&$s(l,e,Ma(t,r)),s=Ca(r.ref)&&Ps(t)?"":t,Ea(r.ref)?[...r.ref.options].forEach(e=>e.selected=s.includes(e.value)):r.refs?_s(r.ref)?r.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(s)?e.checked=!!s.find(t=>t===e.value):e.checked=s===e.value||!!s)}):r.refs.forEach(e=>e.checked=e.value===s):Aa(r.ref)?r.ref.value="":(r.ref.value=s,r.ref.type||h.state.next({name:e,values:Bs(l)})))}(r.shouldDirty||r.shouldTouch)&&v(e,s,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&D(e)},A=(e,t,r)=>{for(const n in t){if(!t.hasOwnProperty(n))return;const s=t[n],i=e+"."+n,l=Ws(a,i);(c.array.has(e)||Ls(s)||l&&!l._f)&&!Is(s)?A(i,s,r):S(i,s,r)}},T=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const d=Ws(a,e),p=c.array.has(e),x=Bs(t);$s(l,e,x),p?(h.array.next({name:e,values:Bs(l)}),(u.isDirty||u.dirtyFields||m.isDirty||m.dirtyFields)&&r.shouldDirty&&h.state.next({name:e,dirtyFields:Pa(i,l),isDirty:j(e,x)})):!d||d._f||Ps(x)?S(e,x,r):A(e,x,r),$a(e,c)&&h.state.next((0,s.A)((0,s.A)({},n),{},{name:e})),h.state.next({name:o.mount?e:void 0,values:Bs(l)})},C=async t=>{o.mount=!0;const i=t.target;let d=i.name,g=!0;const j=Ws(a,d),w=e=>{g=Number.isNaN(e)||Is(e)&&isNaN(e.getTime())||fa(e,Ws(l,d,e))},S=Va(r.mode),A=Va(r.reValidateMode);if(j){let o,C;const E=i.type?Ha(j._f):Fs(t),k=t.type===Ks||t.type===Xs,R=!((T=j._f).mount&&(T.required||T.min||T.max||T.maxLength||T.minLength||T.pattern||T.validate))&&!r.resolver&&!Ws(n.errors,d)&&!j._f.deps||((e,t,r,n,s)=>!s.isOnAll&&(!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:!(r?n.isOnChange:s.isOnChange)||e))(k,Ws(n.touchedFields,d),n.isSubmitted,A,S),_=$a(d,c,k);$s(l,d,E),k?i&&i.readOnly||(j._f.onBlur&&j._f.onBlur(t),e&&e(0)):j._f.onChange&&j._f.onChange(t);const I=v(d,E,k),P=!Sa(I)||_;if(!k&&h.state.next({name:d,type:t.type,values:Bs(l)}),R)return(u.isValid||m.isValid)&&("onBlur"===r.mode?k&&x():k||x()),P&&h.state.next((0,s.A)({name:d},_?{}:I));if(!k&&_&&h.state.next((0,s.A)({},n)),r.resolver){const{errors:e}=await b([d]);if(w(E),g){const t=Xa(n.errors,a,d),r=Xa(e,a,t.name||d);o=r.error,d=r.name,C=Sa(e)}}else f([d],!0),o=(await Qa(j,c.disabled,l,p,r.shouldUseNativeValidation))[d],f([d]),w(E),g&&(o?C=!1:(u.isValid||m.isValid)&&(C=await N(a,!0)));g&&(j._f.deps&&(!Array.isArray(j._f.deps)||j._f.deps.length>0)&&D(j._f.deps),y(d,C,o,I))}var T},E=(e,t)=>{if(Ws(n.errors,t)&&e.focus)return e.focus(),1},D=async function(e){let t,i,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=Na(e);if(r.resolver){const r=await(async e=>{const{errors:t}=await b(e);if(e)for(const r of e){const e=Ws(t,r);e?$s(n.errors,r,e):Ra(n.errors,r)}else n.errors=t;return t})(zs(e)?e:o);t=Sa(r),i=e?!o.some(e=>Ws(r,e)):t}else e?(i=(await Promise.all(o.map(async e=>{const t=Ws(a,e);return await N(t&&t._f?{[e]:t}:t)}))).every(Boolean),(i||n.isValid)&&x()):i=t=await N(a);return h.state.next((0,s.A)((0,s.A)((0,s.A)({},!ha(e)||(u.isValid||m.isValid)&&t!==n.isValid?{}:{name:e}),r.resolver||!e?{isValid:t}:{}),{},{errors:n.errors})),l.shouldFocus&&!i&&Ka(a,E,e?o:c.mount),i},k=(e,t)=>{let r=(0,s.A)({},o.mount?l:i);return t&&(r=wa(t.dirtyFields?n.dirtyFields:n.touchedFields,r)),zs(e)?r:ha(e)?Ws(r,e):e.map(e=>Ws(r,e))},R=(e,t)=>({invalid:!!Ws((t||n).errors,e),isDirty:!!Ws((t||n).dirtyFields,e),error:Ws((t||n).errors,e),isValidating:!!Ws(n.validatingFields,e),isTouched:!!Ws((t||n).touchedFields,e)}),_=(e,t,r)=>{const i=(Ws(a,e,{_f:{}})._f||{}).ref,l=Ws(n.errors,e)||{},{ref:o,message:c,type:d}=l,u=xt(l,ks);$s(n.errors,e,(0,s.A)((0,s.A)((0,s.A)({},u),t),{},{ref:i})),h.state.next({name:e,errors:n.errors,isValid:!1}),r&&r.shouldFocus&&i&&i.focus&&i.focus()},I=e=>h.state.subscribe({next:t=>{var r,a,o;r=e.name,a=t.name,o=e.exact,r&&a&&r!==a&&!Na(r).some(e=>e&&(o?e===a:e.startsWith(a)||a.startsWith(e)))||!((e,t,r,n)=>{r(e);const{name:s}=e,a=xt(e,Es);return Sa(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(e=>t[e]===(!n||ta))})(t,e.formState||u,H,e.reRenderRoot)||e.callback((0,s.A)((0,s.A)((0,s.A)({values:(0,s.A)({},l)},n),t),{},{defaultValues:i}))}}).unsubscribe,P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const s of e?Na(e):c.mount)c.mount.delete(s),c.array.delete(s),t.keepValue||(Ra(a,s),Ra(l,s)),!t.keepError&&Ra(n.errors,s),!t.keepDirty&&Ra(n.dirtyFields,s),!t.keepTouched&&Ra(n.touchedFields,s),!t.keepIsValidating&&Ra(n.validatingFields,s),!r.shouldUnregister&&!t.keepDefaultValue&&Ra(i,s);h.state.next({values:Bs(l)}),h.state.next((0,s.A)((0,s.A)({},n),t.keepDirty?{isDirty:j()}:{})),!t.keepIsValid&&x()},O=e=>{let{disabled:t,name:r}=e;(qs(t)&&o.mount||t||c.disabled.has(r))&&(t?c.disabled.add(r):c.disabled.delete(r))},L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ws(a,e);const l=qs(t.disabled)||qs(r.disabled);return $s(a,e,(0,s.A)((0,s.A)({},n||{}),{},{_f:(0,s.A)((0,s.A)({},n&&n._f?n._f:{ref:{name:e}}),{},{name:e,mount:!0},t)})),c.mount.add(e),n?O({disabled:qs(t.disabled)?t.disabled:r.disabled,name:e}):g(e,!0,t.value),(0,s.A)((0,s.A)((0,s.A)({},l?{disabled:t.disabled||r.disabled}:{}),r.progressive?{required:!!t.required,min:Ga(t.min),max:Ga(t.max),minLength:Ga(t.minLength),maxLength:Ga(t.maxLength),pattern:Ga(t.pattern)}:{}),{},{name:e,onChange:C,onBlur:C,ref:l=>{if(l){L(e,t),n=Ws(a,e);const r=zs(l.value)&&l.querySelectorAll&&l.querySelectorAll("input,select,textarea")[0]||l,o=(e=>Da(e)||_s(e))(r),c=n._f.refs||[];if(o?c.find(e=>e===r):r===n._f.ref)return;$s(a,e,{_f:(0,s.A)((0,s.A)({},n._f),o?{refs:[...c.filter(ka),r,...Array.isArray(Ws(i,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r})}),g(e,!1,void 0,r)}else n=Ws(a,e,{}),n._f&&(n._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!Ms(c.array,e)||!o.action)&&c.unMount.add(e)}})},F=()=>r.shouldFocusError&&Ka(a,E,c.mount),M=(e,t)=>async i=>{let o;i&&(i.preventDefault&&i.preventDefault(),i.persist&&i.persist());let d=Bs(l);if(h.state.next({isSubmitting:!0}),r.resolver){const{errors:e,values:t}=await b();n.errors=e,d=Bs(t)}else await N(a);if(c.disabled.size)for(const e of c.disabled)Ra(d,e);if(Ra(n.errors,"root"),Sa(n.errors)){h.state.next({errors:{}});try{await e(d,i)}catch(Sc){o=Sc}}else t&&await t((0,s.A)({},n.errors),i),F(),setTimeout(F);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Sa(n.errors)&&!o,submitCount:n.submitCount+1,errors:n.errors}),o)throw o},U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const d=e?Bs(e):i,m=Bs(d),p=Sa(e),x=p?i:m;if(t.keepDefaultValues||(i=d),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...c.mount,...Object.keys(Pa(i,l))]);for(const t of Array.from(e))Ws(n.dirtyFields,t)?$s(x,t,Ws(l,t)):T(t,Ws(x,t))}else{if(Us&&zs(e))for(const e of c.mount){const t=Ws(a,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Ca(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of c.mount)T(e,Ws(x,e));else a={}}l=r.shouldUnregister?t.keepDefaultValues?Bs(i):{}:Bs(x),h.array.next({values:(0,s.A)({},x)}),h.state.next({values:(0,s.A)({},x)})}c={mount:t.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!t.keepIsValid||!!t.keepDirtyValues||!r.shouldUnregister&&!Sa(x),o.watch=!!r.shouldUnregister,h.state.next({submitCount:t.keepSubmitCount?n.submitCount:0,isDirty:!p&&(t.keepDirty?n.isDirty:!(!t.keepDefaultValues||fa(e,i))),isSubmitted:!!t.keepIsSubmitted&&n.isSubmitted,dirtyFields:p?{}:t.keepDirtyValues?t.keepDefaultValues&&l?Pa(i,l):n.dirtyFields:t.keepDefaultValues&&e?Pa(i,e):t.keepDirty?n.dirtyFields:{},touchedFields:t.keepTouched?n.touchedFields:{},errors:t.keepErrors?n.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&n.isSubmitSuccessful,isSubmitting:!1,defaultValues:i})},B=(e,t)=>U(Ta(e)?e(l):e,t),H=e=>{n=(0,s.A)((0,s.A)({},n),e)},z={control:{register:L,unregister:P,getFieldState:R,handleSubmit:M,setError:_,_subscribe:I,_runSchema:b,_focusError:F,_getWatch:w,_getDirty:j,_setValid:x,_setFieldArray:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,d=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(c&&s&&!r.disabled){if(o.action=!0,p&&Array.isArray(Ws(a,e))){const t=s(Ws(a,e),c.argA,c.argB);d&&$s(a,e,t)}if(p&&Array.isArray(Ws(n.errors,e))){const t=s(Ws(n.errors,e),c.argA,c.argB);d&&$s(n.errors,e,t),((e,t)=>{!Gs(Ws(e,t)).length&&Ra(e,t)})(n.errors,e)}if((u.touchedFields||m.touchedFields)&&p&&Array.isArray(Ws(n.touchedFields,e))){const t=s(Ws(n.touchedFields,e),c.argA,c.argB);d&&$s(n.touchedFields,e,t)}(u.dirtyFields||m.dirtyFields)&&(n.dirtyFields=Pa(i,l)),h.state.next({name:e,isDirty:j(e,t),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else $s(l,e,t)},_setDisabledField:O,_setErrors:e=>{n.errors=e,h.state.next({errors:n.errors,isValid:!1})},_getFieldArray:e=>Gs(Ws(o.mount?l:i,e,r.shouldUnregister?Ws(i,e,[]):[])),_reset:U,_resetDefaultValues:()=>Ta(r.defaultValues)&&r.defaultValues().then(e=>{B(e,r.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of c.unMount){const t=Ws(a,e);t&&(t._f.refs?t._f.refs.every(e=>!ka(e)):!ka(t._f.ref))&&P(e)}c.unMount=new Set},_disableForm:e=>{qs(e)&&(h.state.next({disabled:e}),Ka(a,(t,r)=>{const n=Ws(a,r);n&&(t.disabled=n._f.disabled||e,Array.isArray(n._f.refs)&&n._f.refs.forEach(t=>{t.disabled=n._f.disabled||e}))},0,!1))},_subjects:h,_proxyFormState:u,get _fields(){return a},get _formValues(){return l},get _state(){return o},set _state(e){o=e},get _defaultValues(){return i},get _names(){return c},set _names(e){c=e},get _formState(){return n},get _options(){return r},set _options(e){r=(0,s.A)((0,s.A)({},r),e)}},subscribe:e=>(o.mount=!0,m=(0,s.A)((0,s.A)({},m),e.formState),I((0,s.A)((0,s.A)({},e),{},{formState:m}))),trigger:D,register:L,handleSubmit:M,watch:(e,t)=>Ta(e)?h.state.subscribe({next:r=>"values"in r&&e(w(void 0,t),r)}):w(e,t,!0),setValue:T,getValues:k,reset:B,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ws(a,e)&&(zs(t.defaultValue)?T(e,Bs(Ws(i,e))):(T(e,t.defaultValue),$s(i,e,Bs(t.defaultValue))),t.keepTouched||Ra(n.touchedFields,e),t.keepDirty||(Ra(n.dirtyFields,e),n.isDirty=t.defaultValue?j(e,Bs(Ws(i,e))):j()),t.keepError||(Ra(n.errors,e),u.isValid&&x()),h.state.next((0,s.A)({},n)))},clearErrors:e=>{e&&Na(e).forEach(e=>Ra(n.errors,e)),h.state.next({errors:e?n.errors:{}})},unregister:P,setError:_,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=Ws(a,e),n=r&&r._f;if(n){const e=n.refs?n.refs[0]:n.ref;e.focus&&(e.focus(),t.shouldSelect&&Ta(e.select)&&e.select())}},getFieldState:R};return(0,s.A)((0,s.A)({},z),{},{formControl:z})}function ri(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=e.useRef(void 0),n=e.useRef(void 0),[a,i]=e.useState({isDirty:!1,isValidating:!1,isLoading:Ta(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ta(t.defaultValues)?void 0:t.defaultValues});if(!r.current)if(t.formControl)r.current=(0,s.A)((0,s.A)({},t.formControl),{},{formState:a}),t.defaultValues&&!Ta(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const e=ti(t),{formControl:n}=e,i=xt(e,Rs);r.current=(0,s.A)((0,s.A)({},i),{},{formState:a})}const l=r.current.control;return l._options=t,ma(()=>{const e=l._subscribe({formState:l._proxyFormState,callback:()=>i((0,s.A)({},l._formState)),reRenderRoot:!0});return i(e=>(0,s.A)((0,s.A)({},e),{},{isReady:!0})),l._formState.isReady=!0,e},[l]),e.useEffect(()=>l._disableForm(t.disabled),[l,t.disabled]),e.useEffect(()=>{t.mode&&(l._options.mode=t.mode),t.reValidateMode&&(l._options.reValidateMode=t.reValidateMode)},[l,t.mode,t.reValidateMode]),e.useEffect(()=>{t.errors&&(l._setErrors(t.errors),l._focusError())},[l,t.errors]),e.useEffect(()=>{t.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,t.shouldUnregister]),e.useEffect(()=>{if(l._proxyFormState.isDirty){const e=l._getDirty();e!==a.isDirty&&l._subjects.state.next({isDirty:e})}},[l,a.isDirty]),e.useEffect(()=>{t.values&&!fa(t.values,n.current)?(l._reset(t.values,(0,s.A)({keepFieldsRef:!0},l._options.resetOptions)),n.current=t.values,i(e=>(0,s.A)({},e))):l._resetDefaultValues()},[l,t.values]),e.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next((0,s.A)({},l._formState))),l._removeUnmounted()}),r.current.formState=ua(a,l),r.current}const ni=(e,t,r)=>{if(e&&"reportValidity"in e){const n=Ws(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},si=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?ni(n.ref,r,e):n.refs&&n.refs.forEach(t=>ni(t,r,e))}},ai=(e,t)=>{t.shouldUseNativeValidation&&si(e,t);const r={};for(const n in e){const s=Ws(t.fields,n),a=Object.assign(e[n]||{},{ref:s&&s.ref});if(ii(t.names||Object.keys(e),n)){const e=Object.assign({},Ws(r,n));$s(e,"root",a),$s(r,n,e)}else $s(r,n,a)}return r},ii=(e,t)=>e.some(e=>e.startsWith(t+"."));var li=function(e,t){for(var r={};e.length;){var n=e[0],s=n.code,a=n.message,i=n.path.join(".");if(!r[i])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[i]={message:l.message,type:l.code}}else r[i]={message:a,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var o=r[i].types,c=o&&o[n.code];r[i]=ba(i,t,r,s,c?[].concat(c,n.message):n.message)}e.shift()}return r},oi=function(e,t,r){return void 0===r&&(r={}),function(n,s,a){try{return Promise.resolve(function(s,i){try{var l=Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](n,t)).then(function(e){return a.shouldUseNativeValidation&&si({},a),{errors:{},values:r.raw?n:e}})}catch(o){return i(o)}return l&&l.then?l.then(void 0,i):l}(0,function(e){if(function(e){return Array.isArray(null==e?void 0:e.errors)}(e))return{values:{},errors:ai(li(e.errors,!a.shouldUseNativeValidation&&"all"===a.criteriaMode),a)};throw e}))}catch(i){return Promise.reject(i)}}},ci={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const di=["color","size","strokeWidth","absoluteStrokeWidth","children"],ui=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var mi=(t,r)=>{const n=(0,e.forwardRef)((n,a)=>{let{color:i="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:c,children:d}=n,u=xt(n,di);return(0,e.createElement)("svg",(0,s.A)((0,s.A)({ref:a},ci),{},{width:l,height:l,stroke:i,strokeWidth:c?24*Number(o)/Number(l):o,className:"lucide lucide-".concat(ui(t))},u),[...r.map(t=>{let[r,n]=t;return(0,e.createElement)(r,n)}),...(Array.isArray(d)?d:[d])||[]])});return n.displayName="".concat(t),n};const hi=mi("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),pi=mi("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),xi=mi("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),fi=mi("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var gi=r(6910);let vi=function(e){return e.SAVINGS="SAVINGS",e.CURRENT="CURRENT",e.TERM_SAVINGS="TERM_SAVINGS",e}({}),yi=function(e){return e.THREE_MONTHS="THREE_MONTHS",e.SIX_MONTHS="SIX_MONTHS",e.TWELVE_MONTHS="TWELVE_MONTHS",e.TWENTY_FOUR_MONTHS="TWENTY_FOUR_MONTHS",e}({});const bi=e=>({[vi.SAVINGS]:"Compte d'\xc9pargne",[vi.CURRENT]:"Compte Courant",[vi.TERM_SAVINGS]:"\xc9pargne \xe0 Terme"}[e]||e),Ni=e=>{const t="string"===typeof e?e.toUpperCase().replace(/[-_\s]/g,""):e,r={THREE_MONTHS:"3 Mois",SIX_MONTHS:"6 Mois",TWELVE_MONTHS:"1 an",TWENTY_FOUR_MONTHS:"2 ans",THREEMONTHS:"3 Mois",SIXMONTHS:"6 Mois",TWELVEMONTHS:"1 an",TWENTYFOURMONTHS:"2 ans",3:"3 Mois",6:"6 Mois",12:"1 an",24:"2 ans"};return r[t]||r[t.replace(/[-_\s]/g,"")]||e},ji=(e,t)=>({[yi.THREE_MONTHS]:{HTG:.025,USD:.0125},[yi.SIX_MONTHS]:{HTG:.035,USD:.0175},[yi.TWELVE_MONTHS]:{HTG:.045,USD:.0225},[yi.TWENTY_FOUR_MONTHS]:{HTG:.055,USD:.0275}}[e][t]);var wi=r(7060);class Si extends wi.BaseApiService{async login(e){const t=await this.post("/auth/login",e),r=t.user||t.User,n={id:r.id||r.Id,email:r.email||r.Email,firstName:r.firstName||r.FirstName,lastName:r.lastName||r.LastName,role:r.role||r.Role,branchId:r.branchId||r.BranchId,branchName:r.branchName||r.BranchName,phoneNumber:r.phoneNumber||r.PhoneNumber,isActive:r.isActive||r.IsActive,lastLogin:r.lastLogin||r.LastLogin};return this.setAuthToken(t.token||t.Token),{token:t.token||t.Token,user:n}}async logout(){await this.post("/auth/logout"),this.clearAuthToken()}async getProfile(){return this.get("/auth/profile")}async changePassword(e,t){await this.post("/auth/change-password",{currentPassword:e,newPassword:t})}async getCashierDashboard(){return this.get("/dashboard/cashier")}async getCreditAgentDashboard(){return this.get("/dashboard/credit-agent")}async getBranchSupervisorDashboard(){return this.get("/dashboard/branch-supervisor")}async getRecentTransactions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return this.get("/branch/".concat(e,"/transactions/recent?limit=").concat(t))}async getPendingAccounts(e){return this.get("/branch/".concat(e,"/accounts/pending"))}async getSuperAdminDashboard(){return this.get("/dashboard/super-admin")}async getRecentActivities(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.get("/dashboard/recent-activities?limit=".concat(e))}setAuthToken(e){super.setAuthToken(e)}removeAuthToken(){this.clearAuthToken()}getAuthToken(){return super.getAuthToken()}isAuthenticated(){return!!this.getAuthToken()}getCurrentUser(){const e=sessionStorage.getItem("user");return e?JSON.parse(e):null}setCurrentUser(e){sessionStorage.setItem("user",JSON.stringify(e))}}const Ai=new Si;class Ti extends wi.BaseApiService{async getClientAccounts(e){try{if(null===e||void 0===e||!e.accountType){const t=[];try{const r=new URLSearchParams;if(null!==e&&void 0!==e&&e.currency&&r.append("currency",e.currency),null!==e&&void 0!==e&&e.branchId&&r.append("branchId",e.branchId.toString()),null!==e&&void 0!==e&&e.status){const t="INACTIVE"===e.status?"Inactive":"CLOSED"===e.status?"Closed":"SUSPENDED"===e.status?"Suspended":"Active";r.append("status",t)}null!==e&&void 0!==e&&e.dateFrom&&r.append("dateFrom",e.dateFrom),null!==e&&void 0!==e&&e.dateTo&&r.append("dateTo",e.dateTo),void 0!==(null===e||void 0===e?void 0:e.minBalance)&&r.append("minBalance",String(e.minBalance)),void 0!==(null===e||void 0===e?void 0:e.maxBalance)&&r.append("maxBalance",String(e.maxBalance));const n=await this.get("/CurrentAccount?".concat(r)),s=Array.isArray(n)?n:(null===n||void 0===n?void 0:n.Accounts)||(null===n||void 0===n?void 0:n.accounts)||[];t.push(...(s||[]).map(e=>this.mapClientAccountSummary(e)))}catch(Sc){console.warn("Failed to fetch current accounts:",Sc)}try{const r=new URLSearchParams;if(null!==e&&void 0!==e&&e.currency&&r.append("currency",e.currency),null!==e&&void 0!==e&&e.customerName&&r.append("customerName",e.customerName),null!==e&&void 0!==e&&e.accountNumber&&r.append("accountNumber",e.accountNumber),null!==e&&void 0!==e&&e.branchId&&r.append("branchId",e.branchId.toString()),null!==e&&void 0!==e&&e.status){const t="INACTIVE"===e.status?"Inactive":"CLOSED"===e.status?"Closed":"SUSPENDED"===e.status?"Suspended":"Active";r.append("status",t)}null!==e&&void 0!==e&&e.dateFrom&&r.append("dateFrom",e.dateFrom),null!==e&&void 0!==e&&e.dateTo&&r.append("dateTo",e.dateTo);const n=await this.get("/ClientAccount?".concat(r)),s=Array.isArray(n)?n:(null===n||void 0===n?void 0:n.Accounts)||(null===n||void 0===n?void 0:n.accounts)||[];t.push(...(s||[]).map(e=>this.mapClientAccountSummary(e)))}catch(Sc){console.warn("Failed to fetch savings/term savings accounts:",Sc)}return t}const t=new URLSearchParams;if((null===e||void 0===e?void 0:e.accountType)===vi.CURRENT){const r=(null===e||void 0===e?void 0:e.customerName)||(null===e||void 0===e?void 0:e.accountNumber)||"";if(r&&t.append("search",r),null!==e&&void 0!==e&&e.currency&&t.append("currency",e.currency),null!==e&&void 0!==e&&e.branchId&&t.append("branchId",e.branchId.toString()),null!==e&&void 0!==e&&e.status){const r="INACTIVE"===e.status?"Inactive":"CLOSED"===e.status?"Closed":"SUSPENDED"===e.status?"Suspended":"Active";t.append("status",r)}null!==e&&void 0!==e&&e.dateFrom&&t.append("dateFrom",e.dateFrom),null!==e&&void 0!==e&&e.dateTo&&t.append("dateTo",e.dateTo),void 0!==(null===e||void 0===e?void 0:e.minBalance)&&t.append("minBalance",String(e.minBalance)),void 0!==(null===e||void 0===e?void 0:e.maxBalance)&&t.append("maxBalance",String(e.maxBalance));const n=await this.get("/CurrentAccount?".concat(t));return((Array.isArray(n)?n:(null===n||void 0===n?void 0:n.Accounts)||(null===n||void 0===n?void 0:n.accounts)||[])||[]).map(e=>this.mapClientAccountSummary(e))}{if(e.accountType){const r=e.accountType===vi.TERM_SAVINGS?"TermSavings":"Savings";t.append("accountType",r)}if(null!==e&&void 0!==e&&e.currency&&t.append("currency",e.currency),null!==e&&void 0!==e&&e.customerName&&t.append("customerName",e.customerName),null!==e&&void 0!==e&&e.accountNumber&&t.append("accountNumber",e.accountNumber),null!==e&&void 0!==e&&e.branchId&&t.append("branchId",e.branchId.toString()),null!==e&&void 0!==e&&e.status){const r="INACTIVE"===e.status?"Inactive":"CLOSED"===e.status?"Closed":"SUSPENDED"===e.status?"Suspended":"Active";t.append("status",r)}null!==e&&void 0!==e&&e.dateFrom&&t.append("dateFrom",e.dateFrom),null!==e&&void 0!==e&&e.dateTo&&t.append("dateTo",e.dateTo);const r=await this.get("/ClientAccount?".concat(t));return((Array.isArray(r)?r:(null===r||void 0===r?void 0:r.Accounts)||(null===r||void 0===r?void 0:r.accounts)||[])||[]).map(e=>this.mapClientAccountSummary(e))}}catch(Sc){throw console.error("Error fetching client accounts:",Sc),Sc}}async getClientAccountStats(){try{var e,t,r,n,s,a,i,l,o,c,d,u;const m=await this.get("/ClientAccount/statistics")||{},h=e=>{switch((e||"").toString().toLowerCase()){case"savings":default:return vi.SAVINGS;case"current":return vi.CURRENT;case"termsavings":case"term_savings":case"term-savings":return vi.TERM_SAVINGS}},p=m.accountsByType||m.AccountsByType||{},x={[vi.SAVINGS]:0,[vi.CURRENT]:0,[vi.TERM_SAVINGS]:0};Object.keys(p||{}).forEach(e=>{var t;const r=h(e);x[r]=Number(null!==(t=p[e])&&void 0!==t?t:0)});const f=m.accountsByCurrency||m.AccountsByCurrency||{},g={HTG:0,USD:0};return Object.keys(f||{}).forEach(e=>{var t;const r="USD"===(e||"").toString().toUpperCase()?"USD":"HTG";g[r]=Number(null!==(t=f[e])&&void 0!==t?t:0)}),{totalAccounts:Number(null!==(e=null!==(t=m.totalAccounts)&&void 0!==t?t:m.TotalAccounts)&&void 0!==e?e:0),activeAccounts:Number(null!==(r=null!==(n=m.activeAccounts)&&void 0!==n?n:m.ActiveAccounts)&&void 0!==r?r:0),totalBalanceHTG:Number(null!==(s=null!==(a=m.totalBalanceHTG)&&void 0!==a?a:m.TotalBalanceHTG)&&void 0!==s?s:0),totalBalanceUSD:Number(null!==(i=null!==(l=m.totalBalanceUSD)&&void 0!==l?l:m.TotalBalanceUSD)&&void 0!==i?i:0),accountsByType:x,accountsByCurrency:g,recentTransactions:Number(null!==(o=null!==(c=m.recentTransactions)&&void 0!==c?c:m.RecentTransactions)&&void 0!==o?o:0),dormantAccounts:Number(null!==(d=null!==(u=m.dormantAccounts)&&void 0!==u?u:m.DormantAccounts)&&void 0!==d?d:0)}}catch(Sc){throw console.error("Error fetching client account stats:",Sc),Sc}}async getCurrentAccountBalance(e){try{var t,r,n,s,a,i,l,o;const c=encodeURIComponent(e),d=await this.get("/CurrentAccount/".concat(c,"/balance"))||{},u=null!==(t=null===d||void 0===d?void 0:d.currency)&&void 0!==t?t:null===d||void 0===d?void 0:d.Currency,m=1===u||"USD"===u?"USD":"HTG";return{balance:Number(null!==(r=null!==(n=null!==(s=null===d||void 0===d?void 0:d.balance)&&void 0!==s?s:null===d||void 0===d?void 0:d.Balance)&&void 0!==n?n:null===d||void 0===d?void 0:d.currentBalance)&&void 0!==r?r:0),availableBalance:Number(null!==(a=null!==(i=null!==(l=null===d||void 0===d?void 0:d.availableBalance)&&void 0!==l?l:null===d||void 0===d?void 0:d.AvailableBalance)&&void 0!==i?i:null===d||void 0===d?void 0:d.balance)&&void 0!==a?a:0),currency:m,status:null!==(o=null===d||void 0===d?void 0:d.status)&&void 0!==o?o:null===d||void 0===d?void 0:d.Status}}catch(Sc){throw console.error("Error fetching current account balance:",Sc),Sc}}async getAccountTransactions(e){try{const t=await this.get("/ClientAccount/".concat(encodeURIComponent(e),"/transactions"));return((Array.isArray(t)?t:(null===t||void 0===t?void 0:t.Transactions)||(null===t||void 0===t?void 0:t.transactions)||[])||[]).map(e=>this.mapClientAccountTransaction(e))}catch(Sc){throw console.error("Error fetching account transactions:",Sc),Sc}}async cancelCurrentAccountTransaction(e,t){try{const r=encodeURIComponent(String(e));await this.post("/CurrentAccount/transactions/".concat(r,"/cancel"),{reason:t})}catch(Sc){throw console.error("Error cancelling current account transaction:",Sc),Sc}}async processCurrentAccountTransaction(e){try{const t={accountNumber:e.accountNumber,type:"DEPOSIT"===e.type?0:1,amount:e.amount,currency:"HTG"===e.currency?0:1,description:e.description||void 0,clientPresent:e.clientPresent,verificationMethod:e.verificationMethod,notes:e.notes},r="/CurrentAccount/".concat(encodeURIComponent(e.accountNumber),"/transactions");return await this.post(r,t)}catch(Sc){throw console.error("Error processing current account transaction:",Sc),Sc}}async createSavingsAccount(e){try{const t={accountType:0,customerId:e.customerId,currency:"HTG"===e.currency?0:1,initialDeposit:e.initialDeposit,branchId:e.branchId,interestRate:e.interestRate,minimumBalance:e.minimumBalance,dailyWithdrawalLimit:e.dailyWithdrawalLimit},r=await this.post("/ClientAccount/create",t);return this.mapClientAccountSummary(r)}catch(Sc){throw console.error("Error creating savings account:",Sc),Sc}}async createCurrentAccount(e){try{const t={customerId:e.customerId,currency:"HTG"===e.currency?0:1,initialDeposit:e.initialDeposit,branchId:e.branchId,minimumBalance:e.minimumBalance,dailyWithdrawalLimit:e.dailyWithdrawalLimit,monthlyWithdrawalLimit:e.monthlyWithdrawalLimit,dailyDepositLimit:e.dailyDepositLimit,overdraftLimit:e.overdraftLimit,pin:e.pin,securityQuestion:e.securityQuestion,securityAnswer:e.securityAnswer,depositMethod:e.depositMethod,originOfFunds:e.originOfFunds,transactionFrequency:e.transactionFrequency,accountPurpose:e.accountPurpose,authorizedSigners:(e.authorizedSigners||[]).map(e=>({fullName:e.fullName,role:e.role,documentNumber:e.documentNumber,phone:e.phone}))},r=await this.post("/CurrentAccount/open",t);return this.mapClientAccountSummary(r)}catch(Sc){throw console.error("Error creating current account:",Sc),Sc}}async updateCurrentAccount(e,t){try{const r=await this.put("/CurrentAccount/".concat(encodeURIComponent(e)),t);return this.mapClientAccountSummary(r)}catch(Sc){throw console.error("Error updating current account:",Sc),Sc}}async createTermSavingsAccount(e){let t;try{const r={[yi.THREE_MONTHS]:0,[yi.SIX_MONTHS]:1,[yi.TWELVE_MONTHS]:2,[yi.TWENTY_FOUR_MONTHS]:3};t={accountType:2,customerId:e.customerId,currency:"HTG"===e.currency?0:1,initialDeposit:e.initialDeposit,branchId:e.branchId,termType:r[e.termType],interestRate:e.interestRate};const n=await this.post("/ClientAccount/create",t);return this.mapClientAccountSummary(n)}catch(Sc){try{var r;console.error("Error creating term savings account:",Sc,{payload:t,serverResponse:null===Sc||void 0===Sc||null===(r=Sc.response)||void 0===r?void 0:r.data})}catch(n){}throw Sc}}async renewTermSavingsAccount(e,t){try{const r={};void 0!==(null===t||void 0===t?void 0:t.renewalTermType)&&(r.termType=t.renewalTermType),void 0!==(null===t||void 0===t?void 0:t.autoRenew)&&(r.autoRenew=t.autoRenew),void 0!==(null===t||void 0===t?void 0:t.interestRate)&&(r.interestRate=t.interestRate);const n=await this.post("/TermSavingsAccount/".concat(e,"/renew"),r);return this.mapClientAccountSummary(n)}catch(Sc){throw console.error("Error renewing term account:",Sc),Sc}}async updateAccountStatus(e,t,r){const n=[],s=async e=>(n.push(e),this.patch(e,{isActive:t})),a=encodeURIComponent(String(e));try{return void await s("/ClientAccount/".concat(a,"/status"))}catch(Sc){var i;if(404!==(null===Sc||void 0===Sc||null===(i=Sc.response)||void 0===i?void 0:i.status))throw console.error("Error updating account status:",Sc),Sc;try{var l,o;console.warn("Status update attempt failed (by id):",{url:"/ClientAccount/".concat(a,"/status"),status:null===Sc||void 0===Sc||null===(l=Sc.response)||void 0===l?void 0:l.status,data:null===Sc||void 0===Sc||null===(o=Sc.response)||void 0===o?void 0:o.data})}catch(f){}}if(r){const e=encodeURIComponent(String(r));try{return void await s("/ClientAccount/".concat(e,"/status"))}catch(Sc){var c;if(404!==(null===Sc||void 0===Sc||null===(c=Sc.response)||void 0===c?void 0:c.status))throw console.error("Error updating account status (by accountNumber):",Sc),Sc;try{var d,u;console.warn("Status update attempt failed (by accountNumber):",{url:"/ClientAccount/".concat(e,"/status"),status:null===Sc||void 0===Sc||null===(d=Sc.response)||void 0===d?void 0:d.status,data:null===Sc||void 0===Sc||null===(u=Sc.response)||void 0===u?void 0:u.data})}catch(f){}}try{return void await s("/CurrentAccount/".concat(e,"/status"))}catch(Sc){var m;if(404!==(null===Sc||void 0===Sc||null===(m=Sc.response)||void 0===m?void 0:m.status))throw console.error("Error updating account status (CurrentAccount):",Sc),Sc;try{var h,p;console.warn("Status update attempt failed (CurrentAccount):",{url:"/CurrentAccount/".concat(e,"/status"),status:null===Sc||void 0===Sc||null===(h=Sc.response)||void 0===h?void 0:h.status,data:null===Sc||void 0===Sc||null===(p=Sc.response)||void 0===p?void 0:p.data})}catch(f){}}}const x=new Error("Account status endpoint not found. Tried: ".concat(n.join(", ")));throw console.error("Error updating account status:",x),x}async getTermSavingsAccounts(e){try{const t=new URLSearchParams;null!==e&&void 0!==e&&e.currency&&t.append("currency",e.currency),null!==e&&void 0!==e&&e.status&&t.append("status",e.status),null!==e&&void 0!==e&&e.search&&t.append("search",e.search),t.append("page",String((null===e||void 0===e?void 0:e.page)||1)),t.append("pageSize",String((null===e||void 0===e?void 0:e.pageSize)||1e3));return await this.get("/TermSavingsAccount?".concat(t))}catch(Sc){throw console.error("Error fetching term savings accounts:",Sc),Sc}}async closeTermSavingsAccount(e,t,r){try{const n={reason:t,earlyWithdrawalPenaltyPercent:null!==r&&void 0!==r?r:null};console.log("\ud83d\udd25 Closing account payload:",n),await this.post("/TermSavingsAccount/".concat(e,"/close"),n)}catch(Sc){throw console.error("Error closing term savings account:",Sc),Sc}}async closeClientAccount(e,t){try{const r={reason:t};await this.post("/ClientAccount/".concat(e,"/close"),r)}catch(Sc){throw console.error("Error closing client account:",Sc),Sc}}async deleteTermSavingsAccount(e){try{await this.delete("/TermSavingsAccount/".concat(e))}catch(Sc){throw console.error("Error deleting term savings account:",Sc),Sc}}async toggleTermSavingsAccountStatus(e){try{await this.put("/TermSavingsAccount/".concat(e,"/toggle-status"))}catch(Sc){throw console.error("Error toggling term savings account status:",Sc),Sc}}async getAccountDetails(e){try{const t=encodeURIComponent(String(e)),r=await this.get("/ClientAccount/".concat(t));return this.mapClientAccountSummary(r)}catch(Sc){throw console.error("Error fetching account details:",Sc),Sc}}async getAccountByNumber(e){try{const t=await this.get("/TermSavingsAccount/by-number/".concat(encodeURIComponent(e)));return this.mapClientAccountSummary(t)}catch(Sc){throw console.error("Error fetching account by number:",Sc),Sc}}async processTermSavingsTransaction(e){try{const t={accountNumber:e.accountNumber,type:"DEPOSIT"===e.type?0:1,amount:e.amount,currency:"HTG"===e.currency?0:1,description:e.description||void 0};return await this.post("/TermSavingsAccount/transaction",t)}catch(Sc){throw console.error("Error processing term savings transaction:",Sc),Sc}}async getAllTermSavingsTransactions(e){try{const t=new URLSearchParams;null!==e&&void 0!==e&&e.accountNumber&&t.append("accountNumber",e.accountNumber),null!==e&&void 0!==e&&e.type&&t.append("type",e.type),null!==e&&void 0!==e&&e.startDate&&t.append("startDate",e.startDate),null!==e&&void 0!==e&&e.endDate&&t.append("endDate",e.endDate),null!==e&&void 0!==e&&e.branchId&&t.append("branchId",e.branchId),null!==e&&void 0!==e&&e.minAmount&&t.append("minAmount",e.minAmount),null!==e&&void 0!==e&&e.maxAmount&&t.append("maxAmount",e.maxAmount);const r=await this.get("/TermSavingsAccount/transactions?".concat(t));return((Array.isArray(r)?r:(null===r||void 0===r?void 0:r.transactions)||(null===r||void 0===r?void 0:r.Transactions)||[])||[]).map(e=>this.mapClientAccountTransaction(e))}catch(Sc){throw console.error("Error fetching all term savings transactions:",Sc),Sc}}mapAccountType(e){const t="number"===typeof e?e:(e||"").toString().toLowerCase();if("number"===typeof t)return 1===t?vi.CURRENT:2===t?vi.TERM_SAVINGS:vi.SAVINGS;switch(t){case"current":return vi.CURRENT;case"termsavings":case"term_savings":case"term-savings":return vi.TERM_SAVINGS;default:return vi.SAVINGS}}mapCurrency(e){if("number"===typeof e)return 1===e?"USD":"HTG";return"USD"===(e||"").toString().toUpperCase()?"USD":"HTG"}mapStatus(e){if("number"===typeof e)switch(e){case 1:return"INACTIVE";case 2:return"CLOSED";case 3:return"SUSPENDED";default:return"ACTIVE"}const t=(e||"").toString().toLowerCase();return t.includes("inactive")?"INACTIVE":t.includes("closed")?"CLOSED":t.includes("suspend")?"SUSPENDED":"ACTIVE"}mapTermType(e){if(null===e||void 0===e)return;if("number"===typeof e)return 1===e?yi.SIX_MONTHS:2===e?yi.TWELVE_MONTHS:3===e?yi.TWENTY_FOUR_MONTHS:yi.THREE_MONTHS;switch((e||"").toString().toLowerCase()){case"sixmonths":case"six_months":case"six-months":return yi.SIX_MONTHS;case"twelvemonths":case"twelve_months":case"twelve-months":return yi.TWELVE_MONTHS;case"twentyfourmonths":case"twenty_four_months":case"twenty-four-months":return yi.TWENTY_FOUR_MONTHS;default:return yi.THREE_MONTHS}}mapClientAccountSummary(e){var t,r,n,s,a,i,l,o,c,d,u,m,h,p,x,f,g,v,y,b,N,j,w,S,A,T,C,E,D,k,R,_,I,P,O,L,F,M,U,B,H,z,G,V,W;const q=this.mapAccountType(null!==(t=null===e||void 0===e?void 0:e.accountType)&&void 0!==t?t:null===e||void 0===e?void 0:e.AccountType),$=this.mapCurrency(null!==(r=null===e||void 0===e?void 0:e.currency)&&void 0!==r?r:null===e||void 0===e?void 0:e.Currency),K=this.mapStatus(null!==(n=null===e||void 0===e?void 0:e.status)&&void 0!==n?n:null===e||void 0===e?void 0:e.Status),X=(null!==(s=null===e||void 0===e?void 0:e.openingDate)&&void 0!==s?s:null===e||void 0===e?void 0:e.OpeningDate)||(new Date).toISOString(),Y=null!==(a=null!==(i=null===e||void 0===e?void 0:e.lastTransactionDate)&&void 0!==i?i:null===e||void 0===e?void 0:e.LastTransactionDate)&&void 0!==a?a:void 0,J=null!==(l=null!==(o=null===e||void 0===e?void 0:e.id)&&void 0!==o?o:null===e||void 0===e?void 0:e.Id)&&void 0!==l?l:"",Z=Number(null!==(c=null!==(d=null===e||void 0===e?void 0:e.branchId)&&void 0!==d?d:null===e||void 0===e?void 0:e.BranchId)&&void 0!==c?c:0);return{id:J,accountNumber:null!==(u=null!==(m=null===e||void 0===e?void 0:e.accountNumber)&&void 0!==m?m:null===e||void 0===e?void 0:e.AccountNumber)&&void 0!==u?u:"",accountType:q,customerId:null!==(h=null!==(p=null===e||void 0===e?void 0:e.customerId)&&void 0!==p?p:null===e||void 0===e?void 0:e.CustomerId)&&void 0!==h?h:"",customerName:null!==(x=null!==(f=null===e||void 0===e?void 0:e.customerName)&&void 0!==f?f:null===e||void 0===e?void 0:e.CustomerName)&&void 0!==x?x:"",customerPhone:null!==(g=null!==(v=null===e||void 0===e?void 0:e.customerPhone)&&void 0!==v?v:null===e||void 0===e?void 0:e.CustomerPhone)&&void 0!==g?g:"",branchId:Z,branchName:null!==(y=null!==(b=null===e||void 0===e?void 0:e.branchName)&&void 0!==b?b:null===e||void 0===e?void 0:e.BranchName)&&void 0!==y?y:"",currency:$,balance:Number(null!==(N=null!==(j=null===e||void 0===e?void 0:e.balance)&&void 0!==j?j:null===e||void 0===e?void 0:e.Balance)&&void 0!==N?N:0),availableBalance:Number(null!==(w=null!==(S=null!==(A=null!==(T=null===e||void 0===e?void 0:e.availableBalance)&&void 0!==T?T:null===e||void 0===e?void 0:e.AvailableBalance)&&void 0!==A?A:null===e||void 0===e?void 0:e.balance)&&void 0!==S?S:null===e||void 0===e?void 0:e.Balance)&&void 0!==w?w:0),status:K,openingDate:"string"===typeof X?X:new Date(X).toISOString(),lastTransactionDate:Y?"string"===typeof Y?Y:new Date(Y).toISOString():void 0,interestRate:null!==(C=null!==(E=null===e||void 0===e?void 0:e.interestRate)&&void 0!==E?E:null===e||void 0===e?void 0:e.InterestRate)&&void 0!==C?C:void 0,termType:this.mapTermType(null!==(D=null===e||void 0===e?void 0:e.termType)&&void 0!==D?D:null===e||void 0===e?void 0:e.TermType),maturityDate:null!==(k=null!==(R=null===e||void 0===e?void 0:e.maturityDate)&&void 0!==R?R:null===e||void 0===e?void 0:e.MaturityDate)&&void 0!==k?k:void 0,minimumBalance:null!==(_=null!==(I=null===e||void 0===e?void 0:e.minimumBalance)&&void 0!==I?I:null===e||void 0===e?void 0:e.MinimumBalance)&&void 0!==_?_:void 0,dailyWithdrawalLimit:null!==(P=null!==(O=null===e||void 0===e?void 0:e.dailyWithdrawalLimit)&&void 0!==O?O:null===e||void 0===e?void 0:e.DailyWithdrawalLimit)&&void 0!==P?P:void 0,monthlyWithdrawalLimit:null!==(L=null!==(F=null===e||void 0===e?void 0:e.monthlyWithdrawalLimit)&&void 0!==F?F:null===e||void 0===e?void 0:e.MonthlyWithdrawalLimit)&&void 0!==L?L:void 0,overdraftLimit:null!==(M=null!==(U=null===e||void 0===e?void 0:e.overdraftLimit)&&void 0!==U?U:null===e||void 0===e?void 0:e.OverdraftLimit)&&void 0!==M?M:void 0,dailyDepositLimit:null!==(B=null!==(H=null===e||void 0===e?void 0:e.dailyDepositLimit)&&void 0!==H?H:null===e||void 0===e?void 0:e.DailyDepositLimit)&&void 0!==B?B:void 0,allowOverdraft:((t,r,n)=>{const s=null!==(t=null===e||void 0===e?void 0:e.allowOverdraft)&&void 0!==t?t:null===e||void 0===e?void 0:e.AllowOverdraft;if("boolean"===typeof s)return s;const a=null!==(r=null!==(n=null===e||void 0===e?void 0:e.overdraftLimit)&&void 0!==n?n:null===e||void 0===e?void 0:e.OverdraftLimit)&&void 0!==r?r:0;return Number(a)>0})(),createdAt:null!==(z=null!==(G=null===e||void 0===e?void 0:e.createdAt)&&void 0!==G?G:null===e||void 0===e?void 0:e.CreatedAt)&&void 0!==z?z:"string"===typeof X?X:new Date(X).toISOString(),updatedAt:null!==(V=null!==(W=null===e||void 0===e?void 0:e.updatedAt)&&void 0!==W?W:null===e||void 0===e?void 0:e.UpdatedAt)&&void 0!==V?V:Y?"string"===typeof Y?Y:new Date(Y).toISOString():"string"===typeof X?X:new Date(X).toISOString()}}mapClientAccountTransaction(e){var t,r,n,s,a,i,l,o,c,d,u,m,h,p,x,f,g,v,y,b,N,j,w,S,A,T,C,E,D,k,R,_,I,P,O,L;const F=null!==(t=null===e||void 0===e?void 0:e.processedAt)&&void 0!==t?t:null===e||void 0===e?void 0:e.ProcessedAt;return{id:null!==(r=null!==(n=null===e||void 0===e?void 0:e.id)&&void 0!==n?n:null===e||void 0===e?void 0:e.Id)&&void 0!==r?r:"",accountId:null!==(s=null!==(a=null===e||void 0===e?void 0:e.accountId)&&void 0!==a?a:null===e||void 0===e?void 0:e.AccountId)&&void 0!==s?s:"",accountNumber:null!==(i=null!==(l=null===e||void 0===e?void 0:e.accountNumber)&&void 0!==l?l:null===e||void 0===e?void 0:e.AccountNumber)&&void 0!==i?i:"",type:(e=>{if("number"===typeof e)switch(e){case 1:return"WITHDRAWAL";case 2:return"INTEREST";case 3:return"FEE";case 4:return"TRANSFER";default:return"DEPOSIT"}const t=(e||"").toString().toLowerCase();return t.includes("withdraw")?"WITHDRAWAL":t.includes("interest")?"INTEREST":t.includes("fee")?"FEE":t.includes("transfer")?"TRANSFER":"DEPOSIT"})(null!==(o=null===e||void 0===e?void 0:e.type)&&void 0!==o?o:null===e||void 0===e?void 0:e.Type),amount:Number(null!==(c=null!==(d=null===e||void 0===e?void 0:e.amount)&&void 0!==d?d:null===e||void 0===e?void 0:e.Amount)&&void 0!==c?c:0),currency:this.mapCurrency(null!==(u=null===e||void 0===e?void 0:e.currency)&&void 0!==u?u:null===e||void 0===e?void 0:e.Currency),balanceBefore:Number(null!==(m=null!==(h=null===e||void 0===e?void 0:e.balanceBefore)&&void 0!==h?h:null===e||void 0===e?void 0:e.BalanceBefore)&&void 0!==m?m:0),balanceAfter:Number(null!==(p=null!==(x=null===e||void 0===e?void 0:e.balanceAfter)&&void 0!==x?x:null===e||void 0===e?void 0:e.BalanceAfter)&&void 0!==p?p:0),description:null!==(f=null!==(g=null===e||void 0===e?void 0:e.description)&&void 0!==g?g:null===e||void 0===e?void 0:e.Description)&&void 0!==f?f:"",processedBy:null!==(v=null!==(y=null===e||void 0===e?void 0:e.processedBy)&&void 0!==y?y:null===e||void 0===e?void 0:e.ProcessedBy)&&void 0!==v?v:"",processedByName:null!==(b=null!==(N=null!==(j=null!==(w=null===e||void 0===e?void 0:e.processedByName)&&void 0!==w?w:null===e||void 0===e?void 0:e.ProcessedByName)&&void 0!==j?j:null===e||void 0===e?void 0:e.processedBy)&&void 0!==N?N:null===e||void 0===e?void 0:e.ProcessedBy)&&void 0!==b?b:"",processedAt:"string"===typeof F?F:new Date(F||Date.now()).toISOString(),reference:null!==(S=null!==(A=null===e||void 0===e?void 0:e.reference)&&void 0!==A?A:null===e||void 0===e?void 0:e.Reference)&&void 0!==S?S:void 0,receiptNumber:null!==(T=null!==(C=null===e||void 0===e?void 0:e.receiptNumber)&&void 0!==C?C:null===e||void 0===e?void 0:e.ReceiptNumber)&&void 0!==T?T:void 0,status:(e=>{if("number"===typeof e)switch(e){case 0:return"PENDING";case 1:default:return"COMPLETED";case 2:return"CANCELLED";case 3:return"FAILED"}const t=(e||"").toString().toUpperCase();return t.includes("CANCEL")?"CANCELLED":t.includes("FAIL")?"FAILED":t.includes("PEND")?"PENDING":(t.includes("COMPLETE"),"COMPLETED")})(null!==(E=null===e||void 0===e?void 0:e.status)&&void 0!==E?E:null===e||void 0===e?void 0:e.Status),branchId:null!==(D=null!==(k=null===e||void 0===e?void 0:e.branchId)&&void 0!==k?k:null===e||void 0===e?void 0:e.BranchId)&&void 0!==D?D:void 0,branchName:null!==(R=null!==(_=null===e||void 0===e?void 0:e.branchName)&&void 0!==_?_:null===e||void 0===e?void 0:e.BranchName)&&void 0!==R?R:void 0,branch:null!==(I=null!==(P=null!==(O=null!==(L=null===e||void 0===e?void 0:e.branchName)&&void 0!==L?L:null===e||void 0===e?void 0:e.BranchName)&&void 0!==O?O:null===e||void 0===e?void 0:e.branch)&&void 0!==P?P:null===e||void 0===e?void 0:e.Branch)&&void 0!==I?I:void 0}}}const Ci=new Ti;const Ei=new class{constructor(){this.api=void 0,this.api=gi.A.create({baseURL:"/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use(e=>{const t=sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),this.api.interceptors.response.use(e=>e,e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)})}async login(e){return Ai.login(e)}async logout(){return Ai.logout()}async getProfile(){return Ai.getProfile()}async changePassword(e,t){return Ai.changePassword(e,t)}async getCashierDashboard(){return Ai.getCashierDashboard()}async getCreditAgentDashboard(){return Ai.getCreditAgentDashboard()}async getBranchSupervisorDashboard(){return Ai.getBranchSupervisorDashboard()}async getSuperAdminDashboard(){return Ai.getSuperAdminDashboard()}async getRecentActivities(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return Ai.getRecentActivities(e)}async getRecentTransactions(e,t){return Ai.getRecentTransactions(e,t)}async getPendingAccounts(e){return Ai.getPendingAccounts(e)}async processDeposit(e,t,r){await this.api.post("/transaction/deposit",{accountId:e,amount:t,currency:"HTG"===r?1:2,type:1})}async processWithdrawal(e,t,r){await this.api.post("/transaction/withdrawal",{accountId:e,amount:t,currency:"HTG"===r?1:2,type:2})}async openCashSession(e,t){await this.api.post("/transaction/cash-session/open",{openingBalanceHTG:e,openingBalanceUSD:t})}async closeCashSession(e,t,r){await this.api.post("/transaction/cash-session/close",{closingBalanceHTG:e,closingBalanceUSD:t,notes:r})}async createCreditApplication(e){await this.api.post("/credit/application",(0,s.A)((0,s.A)({},e),{},{currency:"HTG"===e.currency?1:2}))}async getPendingApplications(){return(await this.api.get("/credit/applications/pending")).data}async approveApplication(e,t){await this.api.post("/credit/application/".concat(e,"/approve"),{approvedAmount:t})}async rejectApplication(e,t){await this.api.post("/credit/application/".concat(e,"/reject"),{comments:t})}async getAgentPortfolio(e){return(await this.api.get("/credit/agent/".concat(e,"/portfolio"))).data}async recordCreditPayment(e,t){await this.api.post("/credit/payment",{creditId:e,amount:t})}async getPaymentsDue(){return(await this.api.get("/credit/payments-due")).data}setAuthToken(e){Ai.setAuthToken(e)}removeAuthToken(){Ai.removeAuthToken()}getAuthToken(){return Ai.getAuthToken()}isAuthenticated(){return!!Ai.getAuthToken()}getCurrentUser(){return Ai.getCurrentUser()}setCurrentUser(e){Ai.setCurrentUser(e)}async getAllBranches(){return(await this.api.get("/branch",{headers:{"x-cache-ttl":"30"}})).data}async getBranchById(e){return(await this.api.get("/branch/".concat(e),{headers:{"x-cache-ttl":"60"}})).data}async createBranch(e){const t=await this.api.post("/branch",e),{BaseApiService:n}=await Promise.resolve().then(r.bind(r,7060));return n.invalidateCacheByPrefix("/branch"),t.data}async updateBranch(e,t){const n=await this.api.put("/branch/".concat(e),t),{BaseApiService:s}=await Promise.resolve().then(r.bind(r,7060));return s.invalidateCacheByPrefix("/branch"),n.data}async deleteBranch(e){await this.api.delete("/branch/".concat(e));const{BaseApiService:t}=await Promise.resolve().then(r.bind(r,7060));t.invalidateCacheByPrefix("/branch")}async activateBranch(e){await this.api.post("/branch/".concat(e,"/activate"))}async deactivateBranch(e){await this.api.post("/branch/".concat(e,"/deactivate"))}async assignBranchManager(e,t){await this.api.post("/branch/".concat(e,"/assign-manager"),{managerId:t})}async getBranchHistory(e){return(await this.api.get("/branch/".concat(e,"/history"))).data}async generateBranchCode(e){return(await this.api.post("/branch/generate-code",{name:e})).data.code}async validateBranchCode(e){return(await this.api.post("/branch/validate-code",{code:e})).data.isValid}async getAvailableManagers(){return(await this.api.get("/users/available-managers",{headers:{"x-cache-ttl":"60"}})).data}async getAllUsers(){return(await this.api.get("/users",{headers:{"x-cache-ttl":"45"}})).data}async getAllAdmins(e){const t=new URLSearchParams;null!==e&&void 0!==e&&e.search&&t.append("Search",e.search),void 0!==(null===e||void 0===e?void 0:e.adminType)&&t.append("AdminType",e.adminType.toString()),null!==e&&void 0!==e&&e.department&&t.append("Department",e.department),void 0!==(null===e||void 0===e?void 0:e.isActive)&&t.append("IsActive",e.isActive.toString()),null!==e&&void 0!==e&&e.assignedBranch&&t.append("AssignedBranch",e.assignedBranch),null!==e&&void 0!==e&&e.page&&t.append("Page",e.page.toString()),null!==e&&void 0!==e&&e.pageSize&&t.append("PageSize",e.pageSize.toString());return(await this.api.get("/admin?".concat(t.toString()))).data}async createAdmin(e){return(await this.api.post("/admin",e)).data}async updateUserStatus(e,t){return(await this.api.put("/admin/".concat(e,"/toggle-status"),{isActive:t})).data}async updateUser(e,t){return(await this.api.put("/admin/".concat(e),t)).data}async deleteUser(e){await this.api.delete("/admin/".concat(e))}async getInterBranchTransfers(e){const t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[r,n]=e;void 0!==n&&null!==n&&t.append(r,n.toString())});return(await this.api.get("/inter-branch-transfer?".concat(t))).data}async getInterBranchTransfer(e){return(await this.api.get("/inter-branch-transfer/".concat(e))).data}async createInterBranchTransfer(e){return(await this.api.post("/inter-branch-transfer",e)).data}async updateInterBranchTransfer(e){return(await this.api.put("/inter-branch-transfer/".concat(e.id),e)).data}async deleteInterBranchTransfer(e){await this.api.delete("/inter-branch-transfer/".concat(e))}async approveInterBranchTransfer(e){return(await this.api.post("/inter-branch-transfer/".concat(e.id,"/approve"),e)).data}async rejectInterBranchTransfer(e,t){return(await this.api.post("/inter-branch-transfer/".concat(e,"/reject"),t)).data}async processInterBranchTransfer(e){return(await this.api.post("/inter-branch-transfer/".concat(e.id,"/process"),e)).data}async cancelInterBranchTransfer(e,t){return(await this.api.post("/inter-branch-transfer/".concat(e,"/cancel"),{reason:t})).data}async getInterBranchTransferLogs(e){return(await this.api.get("/inter-branch-transfer/".concat(e,"/logs"))).data}async getTransferAuditTrail(e){return(await this.api.get("/inter-branch-transfer/".concat(e,"/audit-trail"))).data}async getConsolidatedTransferReport(e,t,r){const n=new URLSearchParams;e&&n.append("branchId",e.toString()),t&&n.append("startDate",t),r&&n.append("endDate",r);return(await this.api.get("/inter-branch-transfer/reports/consolidated?".concat(n))).data}async getBranchTransferSummary(e,t,r){const n=new URLSearchParams;t&&n.append("startDate",t),r&&n.append("endDate",r);return(await this.api.get("/inter-branch-transfer/branch/".concat(e,"/summary?").concat(n))).data}async getPendingTransfersForApproval(){return(await this.api.get("/inter-branch-transfer/pending-approval")).data}async getTransfersInTransit(){return(await this.api.get("/inter-branch-transfer/in-transit")).data}async getRecentTransfers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return(await this.api.get("/inter-branch-transfer/recent?limit=".concat(e))).data}async getEmployees(e){const t=new URLSearchParams;if(e){if(e.branchId&&t.append("branchId",e.branchId.toString()),e.searchTerm&&t.append("searchTerm",e.searchTerm.toString()),void 0!==e.status&&null!==e.status){const r={0:"Active",1:"Inactive",2:"Suspended",3:"Terminated"}[Number(e.status)];r&&t.append("status",r)}if(void 0!==e.function&&null!==e.function){const r=this.mapFunctionToPosition(Number(e.function));r&&t.append("position",r)}e.hireDateFrom&&t.append("hireDateFrom",e.hireDateFrom),e.hireDateTo&&t.append("hireDateTo",e.hireDateTo),e.page&&t.append("page",String(e.page)),e.pageSize&&t.append("pageSize",String(e.pageSize))}return((await this.api.get("/employees?".concat(t),{headers:{"x-cache-ttl":"20"}})).data||[]).map(e=>this.mapEmployeeDto(e))}async getEmployee(e){const t=await this.api.get("/employees/".concat(e),{headers:{"x-cache-ttl":"45"}});return this.mapEmployeeDto(t.data)}async createEmployee(e){const t=await this.api.post("/employees",e),{BaseApiService:n}=await Promise.resolve().then(r.bind(r,7060));return n.invalidateCacheByPrefix("/employees"),t.data}async updateEmployee(e){const t=await this.api.put("/employees/".concat(e.id),e),{BaseApiService:n}=await Promise.resolve().then(r.bind(r,7060));return n.invalidateCacheByPrefix("/employees"),t.data}async deleteEmployee(e){await this.api.delete("/employees/".concat(e));const{BaseApiService:t}=await Promise.resolve().then(r.bind(r,7060));t.invalidateCacheByPrefix("/employees")}async getEmployeesByBranch(e){return(await this.api.get("/employees/branch/".concat(e))).data}async getPayrollPeriods(e){const t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[r,n]=e;void 0!==n&&null!==n&&t.append(r,n.toString())});return(await this.api.get("/payroll-periods?".concat(t))).data}async getPayrollPeriod(e){return(await this.api.get("/payroll-periods/".concat(e))).data}async createPayrollPeriod(e){return(await this.api.post("/payroll-periods",e)).data}async processPayroll(e){return(await this.api.post("/payroll/process",e)).data}async finalizePayroll(e){return(await this.api.post("/payroll-periods/".concat(e,"/finalize"))).data}async getPayslips(e){return(await this.api.get("/payslips/period/".concat(e))).data}async getPayslip(e){return(await this.api.get("/payslips/".concat(e))).data}async getEmployeePayslips(e){return(await this.api.get("/payslips/employee/".concat(e))).data}async approvePayslip(e){return(await this.api.post("/payslips/".concat(e,"/approve"))).data}async markPayslipAsPaid(e,t){return(await this.api.post("/payslips/".concat(e,"/mark-paid"),t)).data}async getSalaryAdvances(e){const t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[r,n]=e;void 0!==n&&null!==n&&t.append(r,n.toString())});return(await this.api.get("/salary-advances?".concat(t))).data}async getSalaryAdvance(e){return(await this.api.get("/salary-advances/".concat(e))).data}async createSalaryAdvance(e){return(await this.api.post("/salary-advances",e)).data}async approveSalaryAdvance(e){return(await this.api.post("/salary-advances/".concat(e.id,"/approve"),e)).data}async rejectSalaryAdvance(e,t){return(await this.api.post("/salary-advances/".concat(e,"/reject"),{reason:t})).data}async paySalaryAdvance(e){return(await this.api.post("/salary-advances/".concat(e.id,"/pay"),e)).data}async getPayrollStatistics(e,t,r){const n=new URLSearchParams;e&&n.append("branchId",e),t&&n.append("startDate",t),r&&n.append("endDate",r);return(await this.api.get("/payroll/statistics?".concat(n))).data}async getSalaryAdvanceStatistics(e){const t=new URLSearchParams;e&&t.append("branchId",e);return(await this.api.get("/salary-advances/statistics?".concat(t))).data}async getExchangeRates(e){const t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[r,n]=e;void 0!==n&&null!==n&&t.append(r,n.toString())});return(await this.api.get("/currency-exchange/rates?".concat(t))).data.data||[]}async getExchangeRate(e){return(await this.api.get("/currency-exchange/rates/".concat(e))).data.data}async getCurrentRates(){return(await this.api.get("/currency-exchange/current-rates")).data.data||[]}async createExchangeRate(e){return(await this.api.post("/currency-exchange/rates",e)).data}async updateExchangeRate(e){return(await this.api.put("/currency-exchange/rates/".concat(e.id),e)).data}async deactivateExchangeRate(e){await this.api.delete("/currency-exchange/rates/".concat(e))}async calculateExchange(e){return(await this.api.post("/currency-exchange/calculate",e)).data}async processExchange(e){return(await this.api.post("/currency-exchange/process",e)).data}async getExchangeTransactions(e){const t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[r,n]=e;void 0!==n&&null!==n&&t.append(r,n.toString())});return(await this.api.get("/currency-exchange/transactions?".concat(t))).data.data||[]}async getExchangeTransaction(e){return(await this.api.get("/currency-exchange/transactions/".concat(e))).data.data}async approveExchangeTransaction(e){return(await this.api.post("/currency-exchange/transactions/".concat(e,"/approve"))).data}async cancelExchangeTransaction(e,t){return(await this.api.post("/currency-exchange/transactions/".concat(e,"/cancel"),{reason:t})).data}async printReceipt(e){await this.api.post("/currency-exchange/transactions/".concat(e,"/print-receipt"))}async getCurrencyReserves(e){const t=new URLSearchParams;e&&t.append("branchId",e);return(await this.api.get("/currency-exchange/reserves?".concat(t))).data.data||[]}async getCurrencyReserve(e){return(await this.api.get("/currency-exchange/reserves/".concat(e))).data.data}async updateCurrencyReserve(e){return(await this.api.put("/currency-exchange/reserves/".concat(e.id),e)).data}async getCurrencyMovements(e){const t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[r,n]=e;void 0!==n&&null!==n&&t.append(r,n.toString())});return(await this.api.get("/currency-exchange/movements?".concat(t))).data.data||[]}async createCurrencyMovement(e){return(await this.api.post("/currency-exchange/movements",e)).data}async getExchangeStatistics(e,t,r){const n=new URLSearchParams;e&&n.append("branchId",e),t&&n.append("startDate",t),r&&n.append("endDate",r);return(await this.api.get("/currency-exchange/statistics?".concat(n))).data}async getCurrencyReserveReport(e){const t=new URLSearchParams;e&&t.append("branchId",e);return(await this.api.get("/currency-exchange/reserve-report?".concat(t))).data}async getProfitabilityReport(e,t,r){const n=new URLSearchParams;e&&n.append("branchId",e),t&&n.append("startDate",t),r&&n.append("endDate",r);return(await this.api.get("/currency-exchange/profitability?".concat(n))).data}async getDailyExchangeTransactions(e,t){return(await this.api.get("/currency-exchange/daily/".concat(e,"/").concat(t))).data.data||[]}async getClientAccounts(e){return Ci.getClientAccounts(e)}async getClientAccountStats(){return Ci.getClientAccountStats()}async getCurrentAccountBalance(e){return Ci.getCurrentAccountBalance(e)}async getAccountTransactions(e){return Ci.getAccountTransactions(e)}async cancelCurrentAccountTransaction(e,t){return Ci.cancelCurrentAccountTransaction(e,t)}async processCurrentAccountTransaction(e){return Ci.processCurrentAccountTransaction(e)}async createSavingsAccount(e){return Ci.createSavingsAccount(e)}async createCurrentAccount(e){return Ci.createCurrentAccount(e)}async updateCurrentAccount(e,t){return Ci.updateCurrentAccount(e,t)}async createTermSavingsAccount(e){return Ci.createTermSavingsAccount(e)}async renewTermSavingsAccount(e,t){return Ci.renewTermSavingsAccount(e,t)}async updateAccountStatus(e,t,r){return Ci.updateAccountStatus(e,t,r)}async getTermSavingsAccounts(e){return Ci.getTermSavingsAccounts(e)}async closeTermSavingsAccount(e,t,r){return Ci.closeTermSavingsAccount(e,t,r)}async closeClientAccount(e,t){return Ci.closeClientAccount(e,t)}async deleteTermSavingsAccount(e){return Ci.deleteTermSavingsAccount(e)}async toggleTermSavingsAccountStatus(e){return Ci.toggleTermSavingsAccountStatus(e)}async getAccountDetails(e){return Ci.getAccountDetails(e)}async getAccountByNumber(e){return Ci.getAccountByNumber(e)}async processTermSavingsTransaction(e){return Ci.processTermSavingsTransaction(e)}async getAllTermSavingsTransactions(e){return Ci.getAllTermSavingsTransactions(e)}mapAccountType(e){const t="number"===typeof e?e:(e||"").toString().toLowerCase();if("number"===typeof t)return 1===t?vi.CURRENT:2===t?vi.TERM_SAVINGS:vi.SAVINGS;switch(t){case"current":return vi.CURRENT;case"termsavings":case"term_savings":case"term-savings":return vi.TERM_SAVINGS;default:return vi.SAVINGS}}mapCurrency(e){if("number"===typeof e)return 1===e?"USD":"HTG";return"USD"===(e||"").toString().toUpperCase()?"USD":"HTG"}mapStatus(e){if("number"===typeof e)switch(e){case 1:return"INACTIVE";case 2:return"CLOSED";case 3:return"SUSPENDED";default:return"ACTIVE"}const t=(e||"").toString().toLowerCase();return t.includes("inactive")?"INACTIVE":t.includes("closed")?"CLOSED":t.includes("suspend")?"SUSPENDED":"ACTIVE"}mapTermType(e){if(null===e||void 0===e)return;if("number"===typeof e)return 1===e?yi.SIX_MONTHS:2===e?yi.TWELVE_MONTHS:3===e?yi.TWENTY_FOUR_MONTHS:yi.THREE_MONTHS;switch((e||"").toString().toLowerCase()){case"sixmonths":case"six_months":case"six-months":return yi.SIX_MONTHS;case"twelvemonths":case"twelve_months":case"twelve-months":return yi.TWELVE_MONTHS;case"twentyfourmonths":case"twenty_four_months":case"twenty-four-months":return yi.TWENTY_FOUR_MONTHS;default:return yi.THREE_MONTHS}}mapClientAccountSummary(e){var t,r,n,s,a,i,l,o,c,d,u,m,h,p,x,f,g,v,y,b,N,j,w,S,A,T,C,E,D,k,R,_,I,P,O,L,F,M,U,B,H,z,G,V,W;const q=this.mapAccountType(null!==(t=null===e||void 0===e?void 0:e.accountType)&&void 0!==t?t:null===e||void 0===e?void 0:e.AccountType),$=this.mapCurrency(null!==(r=null===e||void 0===e?void 0:e.currency)&&void 0!==r?r:null===e||void 0===e?void 0:e.Currency),K=this.mapStatus(null!==(n=null===e||void 0===e?void 0:e.status)&&void 0!==n?n:null===e||void 0===e?void 0:e.Status),X=(null!==(s=null===e||void 0===e?void 0:e.openingDate)&&void 0!==s?s:null===e||void 0===e?void 0:e.OpeningDate)||(new Date).toISOString(),Y=null!==(a=null!==(i=null===e||void 0===e?void 0:e.lastTransactionDate)&&void 0!==i?i:null===e||void 0===e?void 0:e.LastTransactionDate)&&void 0!==a?a:void 0,J=null!==(l=null!==(o=null===e||void 0===e?void 0:e.id)&&void 0!==o?o:null===e||void 0===e?void 0:e.Id)&&void 0!==l?l:"",Z=Number(null!==(c=null!==(d=null===e||void 0===e?void 0:e.branchId)&&void 0!==d?d:null===e||void 0===e?void 0:e.BranchId)&&void 0!==c?c:0);return{id:J,accountNumber:null!==(u=null!==(m=null===e||void 0===e?void 0:e.accountNumber)&&void 0!==m?m:null===e||void 0===e?void 0:e.AccountNumber)&&void 0!==u?u:"",accountType:q,customerId:null!==(h=null!==(p=null===e||void 0===e?void 0:e.customerId)&&void 0!==p?p:null===e||void 0===e?void 0:e.CustomerId)&&void 0!==h?h:"",customerName:null!==(x=null!==(f=null===e||void 0===e?void 0:e.customerName)&&void 0!==f?f:null===e||void 0===e?void 0:e.CustomerName)&&void 0!==x?x:"",customerPhone:null!==(g=null!==(v=null===e||void 0===e?void 0:e.customerPhone)&&void 0!==v?v:null===e||void 0===e?void 0:e.CustomerPhone)&&void 0!==g?g:"",branchId:Z,branchName:null!==(y=null!==(b=null===e||void 0===e?void 0:e.branchName)&&void 0!==b?b:null===e||void 0===e?void 0:e.BranchName)&&void 0!==y?y:"",currency:$,balance:Number(null!==(N=null!==(j=null===e||void 0===e?void 0:e.balance)&&void 0!==j?j:null===e||void 0===e?void 0:e.Balance)&&void 0!==N?N:0),availableBalance:Number(null!==(w=null!==(S=null!==(A=null!==(T=null===e||void 0===e?void 0:e.availableBalance)&&void 0!==T?T:null===e||void 0===e?void 0:e.AvailableBalance)&&void 0!==A?A:null===e||void 0===e?void 0:e.balance)&&void 0!==S?S:null===e||void 0===e?void 0:e.Balance)&&void 0!==w?w:0),status:K,openingDate:"string"===typeof X?X:new Date(X).toISOString(),lastTransactionDate:Y?"string"===typeof Y?Y:new Date(Y).toISOString():void 0,interestRate:null!==(C=null!==(E=null===e||void 0===e?void 0:e.interestRate)&&void 0!==E?E:null===e||void 0===e?void 0:e.InterestRate)&&void 0!==C?C:void 0,termType:this.mapTermType(null!==(D=null===e||void 0===e?void 0:e.termType)&&void 0!==D?D:null===e||void 0===e?void 0:e.TermType),maturityDate:null!==(k=null!==(R=null===e||void 0===e?void 0:e.maturityDate)&&void 0!==R?R:null===e||void 0===e?void 0:e.MaturityDate)&&void 0!==k?k:void 0,minimumBalance:null!==(_=null!==(I=null===e||void 0===e?void 0:e.minimumBalance)&&void 0!==I?I:null===e||void 0===e?void 0:e.MinimumBalance)&&void 0!==_?_:void 0,dailyWithdrawalLimit:null!==(P=null!==(O=null===e||void 0===e?void 0:e.dailyWithdrawalLimit)&&void 0!==O?O:null===e||void 0===e?void 0:e.DailyWithdrawalLimit)&&void 0!==P?P:void 0,monthlyWithdrawalLimit:null!==(L=null!==(F=null===e||void 0===e?void 0:e.monthlyWithdrawalLimit)&&void 0!==F?F:null===e||void 0===e?void 0:e.MonthlyWithdrawalLimit)&&void 0!==L?L:void 0,overdraftLimit:null!==(M=null!==(U=null===e||void 0===e?void 0:e.overdraftLimit)&&void 0!==U?U:null===e||void 0===e?void 0:e.OverdraftLimit)&&void 0!==M?M:void 0,dailyDepositLimit:null!==(B=null!==(H=null===e||void 0===e?void 0:e.dailyDepositLimit)&&void 0!==H?H:null===e||void 0===e?void 0:e.DailyDepositLimit)&&void 0!==B?B:void 0,allowOverdraft:((t,r,n)=>{const s=null!==(t=null===e||void 0===e?void 0:e.allowOverdraft)&&void 0!==t?t:null===e||void 0===e?void 0:e.AllowOverdraft;if("boolean"===typeof s)return s;const a=null!==(r=null!==(n=null===e||void 0===e?void 0:e.overdraftLimit)&&void 0!==n?n:null===e||void 0===e?void 0:e.OverdraftLimit)&&void 0!==r?r:0;return Number(a)>0})(),createdAt:null!==(z=null!==(G=null===e||void 0===e?void 0:e.createdAt)&&void 0!==G?G:null===e||void 0===e?void 0:e.CreatedAt)&&void 0!==z?z:"string"===typeof X?X:new Date(X).toISOString(),updatedAt:null!==(V=null!==(W=null===e||void 0===e?void 0:e.updatedAt)&&void 0!==W?W:null===e||void 0===e?void 0:e.UpdatedAt)&&void 0!==V?V:Y?"string"===typeof Y?Y:new Date(Y).toISOString():"string"===typeof X?X:new Date(X).toISOString()}}mapClientAccountTransaction(e){var t,r,n,s,a,i,l,o,c,d,u,m,h,p,x,f,g,v,y,b,N,j,w,S,A,T,C,E,D,k,R,_,I,P,O,L;const F=null!==(t=null===e||void 0===e?void 0:e.processedAt)&&void 0!==t?t:null===e||void 0===e?void 0:e.ProcessedAt;return{id:null!==(r=null!==(n=null===e||void 0===e?void 0:e.id)&&void 0!==n?n:null===e||void 0===e?void 0:e.Id)&&void 0!==r?r:"",accountId:null!==(s=null!==(a=null===e||void 0===e?void 0:e.accountId)&&void 0!==a?a:null===e||void 0===e?void 0:e.AccountId)&&void 0!==s?s:"",accountNumber:null!==(i=null!==(l=null===e||void 0===e?void 0:e.accountNumber)&&void 0!==l?l:null===e||void 0===e?void 0:e.AccountNumber)&&void 0!==i?i:"",type:(e=>{if("number"===typeof e)switch(e){case 1:return"WITHDRAWAL";case 2:return"INTEREST";case 3:return"FEE";case 4:return"TRANSFER";default:return"DEPOSIT"}const t=(e||"").toString().toLowerCase();return t.includes("withdraw")?"WITHDRAWAL":t.includes("interest")?"INTEREST":t.includes("fee")?"FEE":t.includes("transfer")?"TRANSFER":"DEPOSIT"})(null!==(o=null===e||void 0===e?void 0:e.type)&&void 0!==o?o:null===e||void 0===e?void 0:e.Type),amount:Number(null!==(c=null!==(d=null===e||void 0===e?void 0:e.amount)&&void 0!==d?d:null===e||void 0===e?void 0:e.Amount)&&void 0!==c?c:0),currency:this.mapCurrency(null!==(u=null===e||void 0===e?void 0:e.currency)&&void 0!==u?u:null===e||void 0===e?void 0:e.Currency),balanceBefore:Number(null!==(m=null!==(h=null===e||void 0===e?void 0:e.balanceBefore)&&void 0!==h?h:null===e||void 0===e?void 0:e.BalanceBefore)&&void 0!==m?m:0),balanceAfter:Number(null!==(p=null!==(x=null===e||void 0===e?void 0:e.balanceAfter)&&void 0!==x?x:null===e||void 0===e?void 0:e.BalanceAfter)&&void 0!==p?p:0),description:null!==(f=null!==(g=null===e||void 0===e?void 0:e.description)&&void 0!==g?g:null===e||void 0===e?void 0:e.Description)&&void 0!==f?f:"",processedBy:null!==(v=null!==(y=null===e||void 0===e?void 0:e.processedBy)&&void 0!==y?y:null===e||void 0===e?void 0:e.ProcessedBy)&&void 0!==v?v:"",processedByName:null!==(b=null!==(N=null!==(j=null!==(w=null===e||void 0===e?void 0:e.processedByName)&&void 0!==w?w:null===e||void 0===e?void 0:e.ProcessedByName)&&void 0!==j?j:null===e||void 0===e?void 0:e.processedBy)&&void 0!==N?N:null===e||void 0===e?void 0:e.ProcessedBy)&&void 0!==b?b:"",processedAt:"string"===typeof F?F:new Date(F||Date.now()).toISOString(),reference:null!==(S=null!==(A=null===e||void 0===e?void 0:e.reference)&&void 0!==A?A:null===e||void 0===e?void 0:e.Reference)&&void 0!==S?S:void 0,receiptNumber:null!==(T=null!==(C=null===e||void 0===e?void 0:e.receiptNumber)&&void 0!==C?C:null===e||void 0===e?void 0:e.ReceiptNumber)&&void 0!==T?T:void 0,status:(e=>{if("number"===typeof e)switch(e){case 0:return"PENDING";case 1:default:return"COMPLETED";case 2:return"CANCELLED";case 3:return"FAILED"}const t=(e||"").toString().toUpperCase();return t.includes("CANCEL")?"CANCELLED":t.includes("FAIL")?"FAILED":t.includes("PEND")?"PENDING":(t.includes("COMPLETE"),"COMPLETED")})(null!==(E=null===e||void 0===e?void 0:e.status)&&void 0!==E?E:null===e||void 0===e?void 0:e.Status),branchId:null!==(D=null!==(k=null===e||void 0===e?void 0:e.branchId)&&void 0!==k?k:null===e||void 0===e?void 0:e.BranchId)&&void 0!==D?D:void 0,branchName:null!==(R=null!==(_=null===e||void 0===e?void 0:e.branchName)&&void 0!==_?_:null===e||void 0===e?void 0:e.BranchName)&&void 0!==R?R:void 0,branch:null!==(I=null!==(P=null!==(O=null!==(L=null===e||void 0===e?void 0:e.branchName)&&void 0!==L?L:null===e||void 0===e?void 0:e.BranchName)&&void 0!==O?O:null===e||void 0===e?void 0:e.branch)&&void 0!==P?P:null===e||void 0===e?void 0:e.Branch)&&void 0!==I?I:void 0}}mapFunctionToPosition(e){if(void 0!==e&&null!==e)switch(e){case 0:return"Cashier";case 1:return"LoanOfficer";case 2:return"AssistantManager";case 3:case 6:case 7:return"Manager";case 4:return"ITSupport";case 5:return"Accountant";case 8:return"Security";case 9:return"Cleaner";case 10:return"CustomerService";default:return}}mapPositionToFunction(e){switch(e){case"Cashier":return 0;case"LoanOfficer":return 1;case"AssistantManager":case"Supervisor":return 2;case"Manager":default:return 6;case"RegionalManager":return 3;case"ITSupport":return 4;case"Accountant":return 5;case"Security":return 8;case"Cleaner":case"Driver":return 9;case"CustomerService":return 10}}mapStatusToFrontend(e){switch(e){case"Active":return 0;case"Inactive":default:return 1;case"Suspended":case"OnLeave":return 2;case"Terminated":return 3}}mapEmployeeDto(e){var t,r;const n=this.mapPositionToFunction((null===e||void 0===e?void 0:e.positionName)||(null===e||void 0===e?void 0:e.position)),s=this.mapStatusToFrontend((null===e||void 0===e?void 0:e.statusName)||(null===e||void 0===e?void 0:e.status));return{id:e.id,employeeNumber:e.employeeCode,firstName:e.firstName,lastName:e.lastName,email:e.email,phoneNumber:e.phoneNumber,nationalId:e.nationalId,dateOfBirth:"",hireDate:e.hireDate,terminationDate:e.terminationDate||void 0,function:n,functionName:e.positionName||"",status:s,statusName:e.statusName||"",branchId:(null!==(t=e.branchId)&&void 0!==t?t:"").toString(),branchName:e.branchName||"",baseSalary:null!==(r=e.baseSalary)&&void 0!==r?r:0,currency:e.currency||"HTG",bankAccountNumber:e.bankAccount||"",bankName:e.bankName||"",address:e.address||"",emergencyContactName:"",emergencyContactPhone:"",isActive:0===s,createdAt:e.createdAt,updatedAt:e.updatedAt,createdBy:e.createdBy||"",updatedBy:e.updatedBy||""}}async getSavingsCustomers(e){const t=new URLSearchParams;e&&t.append("searchTerm",e);return(await this.api.get("/SavingsCustomer/search?".concat(t))).data}async getSavingsCustomer(e){return(await this.api.get("/SavingsCustomer/".concat(e))).data}async getSavingsCustomerByPhone(e){return(await this.api.get("/SavingsCustomer/by-phone/".concat(e))).data}async getSavingsCustomerByDocument(e,t){const r=new URLSearchParams;r.append("documentType",e.toString()),r.append("documentNumber",t);return(await this.api.get("/SavingsCustomer/by-document?".concat(r))).data}async createSavingsCustomer(e){return(await this.api.post("/SavingsCustomer",e)).data}async updateSavingsCustomer(e,t){return(await this.api.put("/SavingsCustomer/".concat(e),t)).data}async deactivateSavingsCustomer(e){await this.api.post("/SavingsCustomer/".concat(e,"/deactivate"))}async validateSavingsCustomer(e){return(await this.api.post("/SavingsCustomer/".concat(e,"/validate"))).data}async getSavingsAccounts(e){const t=new URLSearchParams;null!==e&&void 0!==e&&e.branchId&&t.append("branchId",e.branchId.toString()),null!==e&&void 0!==e&&e.customerId&&t.append("customerId",e.customerId),void 0!==(null===e||void 0===e?void 0:e.currency)&&t.append("currency",e.currency.toString()),void 0!==(null===e||void 0===e?void 0:e.status)&&t.append("status",e.status.toString()),null!==e&&void 0!==e&&e.accountNumber&&t.append("accountNumber",e.accountNumber),null!==e&&void 0!==e&&e.page&&t.append("page",e.page.toString()),null!==e&&void 0!==e&&e.pageSize&&t.append("pageSize",e.pageSize.toString());const r=await this.api.get("/SavingsAccount?".concat(t));return r.data.accounts||r.data}async getSavingsAccount(e){return(await this.api.get("/SavingsAccount/".concat(e))).data}async getSavingsAccountByNumber(e){return(await this.api.get("/SavingsAccount/by-number/".concat(e))).data}async openSavingsAccount(e){return(await this.api.post("/SavingsAccount/open",e)).data}async updateSavingsAccount(e,t){return(await this.api.put("/SavingsAccount/".concat(e),t)).data}async closeSavingsAccount(e,t){await this.api.post("/SavingsAccount/".concat(e,"/close"),{reason:t})}async getSavingsAccountBalance(e){return(await this.api.get("/SavingsAccount/".concat(e,"/balance"))).data}async generateSavingsAccountStatement(e,t){return(await this.api.post("/SavingsAccount/".concat(e,"/statement"),t)).data}async calculateSavingsAccountInterest(e){await this.api.post("/SavingsAccount/".concat(e,"/calculate-interest"))}async calculateAllSavingsInterest(){return(await this.api.post("/SavingsAccount/calculate-interest-all")).data}async getSavingsAccountTransactions(e,t){const r=new URLSearchParams;null!==t&&void 0!==t&&t.dateFrom&&r.append("dateFrom",t.dateFrom),null!==t&&void 0!==t&&t.dateTo&&r.append("dateTo",t.dateTo),void 0!==(null===t||void 0===t?void 0:t.type)&&r.append("type",t.type.toString()),null!==t&&void 0!==t&&t.page&&r.append("page",t.page.toString()),null!==t&&void 0!==t&&t.pageSize&&r.append("pageSize",t.pageSize.toString());const n=await this.api.get("/SavingsAccount/".concat(e,"/transactions?").concat(r));return n.data.transactions||n.data}async getSavingsAccountStatistics(){return(await this.api.get("/SavingsAccount/statistics")).data}async processSavingsTransaction(e){return(await this.api.post("/SavingsTransaction/process",e)).data}async getSavingsTransaction(e){return(await this.api.get("/SavingsTransaction/".concat(e))).data}async getSavingsTransactions(e){const t=new URLSearchParams;null!==e&&void 0!==e&&e.accountId&&t.append("accountId",e.accountId),null!==e&&void 0!==e&&e.branchId&&t.append("branchId",e.branchId.toString()),void 0!==(null===e||void 0===e?void 0:e.type)&&t.append("type",e.type.toString()),void 0!==(null===e||void 0===e?void 0:e.status)&&t.append("status",e.status.toString()),null!==e&&void 0!==e&&e.dateFrom&&t.append("dateFrom",e.dateFrom),null!==e&&void 0!==e&&e.dateTo&&t.append("dateTo",e.dateTo),null!==e&&void 0!==e&&e.page&&t.append("page",e.page.toString()),null!==e&&void 0!==e&&e.pageSize&&t.append("pageSize",e.pageSize.toString());const r=await this.api.get("/SavingsTransaction?".concat(t));return r.data.transactions||r.data}async generateSavingsTransactionReceipt(e){return(await this.api.get("/SavingsTransaction/".concat(e,"/receipt"))).data}async cancelSavingsTransaction(e,t){await this.api.post("/SavingsTransaction/".concat(e,"/cancel"),{reason:t})}async getSavingsDailyTransactionTotal(e,t,r){const n=new URLSearchParams;n.append("accountId",e),n.append("type",t.toString()),r&&n.append("date",r);return(await this.api.get("/SavingsTransaction/daily-total?".concat(n))).data}async getSavingsMonthlyTransactionTotal(e,t,r){const n=new URLSearchParams;n.append("accountId",e),n.append("type",t.toString()),r&&n.append("date",r);return(await this.api.get("/SavingsTransaction/monthly-total?".concat(n))).data}async validateSavingsTransaction(e){return(await this.api.post("/SavingsTransaction/validate",e)).data}async getSavingsTransactionStatistics(e){const t=new URLSearchParams;null!==e&&void 0!==e&&e.branchId&&t.append("branchId",e.branchId.toString()),null!==e&&void 0!==e&&e.dateFrom&&t.append("dateFrom",e.dateFrom),null!==e&&void 0!==e&&e.dateTo&&t.append("dateTo",e.dateTo);return(await this.api.get("/SavingsTransaction/statistics?".concat(t))).data}async getSavingsTransactionReport(e){const t=new URLSearchParams;null!==e&&void 0!==e&&e.startDate&&t.append("startDate",e.startDate),null!==e&&void 0!==e&&e.endDate&&t.append("endDate",e.endDate),null!==e&&void 0!==e&&e.branchId&&t.append("branchId",e.branchId.toString());return(await this.api.get("/SavingsTransaction/report?".concat(t))).data}},Di=Ei;Object.freeze({status:"aborted"});function ki(e,t,r){var n;function s(r,n){var s,a,i;Object.defineProperty(r,"_zod",{value:null!==(s=r._zod)&&void 0!==s?s:{},enumerable:!1}),null!==(a=(i=r._zod).traits)&&void 0!==a||(i.traits=new Set),r._zod.traits.add(e),t(r,n);for(const e in l.prototype)e in r||Object.defineProperty(r,e,{value:l.prototype[e].bind(r)});r._zod.constr=l,r._zod.def=n}const a=null!==(n=null===r||void 0===r?void 0:r.Parent)&&void 0!==n?n:Object;class i extends a{}function l(e){var t,n;const a=null!==r&&void 0!==r&&r.Parent?new i:this;s(a,e),null!==(t=(n=a._zod).deferred)&&void 0!==t||(n.deferred=[]);for(const r of a._zod.deferred)r();return a}return Object.defineProperty(i,"name",{value:e}),Object.defineProperty(l,"init",{value:s}),Object.defineProperty(l,Symbol.hasInstance,{value:t=>{var n;return!!(null!==r&&void 0!==r&&r.Parent&&t instanceof r.Parent)||(null===t||void 0===t||null===(n=t._zod)||void 0===n||null===(n=n.traits)||void 0===n?void 0:n.has(e))}}),Object.defineProperty(l,"name",{value:e}),l}Symbol("zod_brand");class Ri extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class _i extends Error{constructor(e){super("Encountered unidirectional transform during encode: ".concat(e)),this.name="ZodEncodeError"}}const Ii={};function Pi(e){return e&&Object.assign(Ii,e),Ii}function Oi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"|";return e.map(e=>el(e)).join(t)}function Li(e,t){return"bigint"===typeof t?t.toString():t}function Fi(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Mi(e){return null===e||void 0===e}function Ui(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}const Bi=Symbol("evaluating");function Hi(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==Bi)return void 0===n&&(n=Bi,n=r()),n},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function zi(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Gi(){const e={};for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(const s of r){const t=Object.getOwnPropertyDescriptors(s);Object.assign(e,t)}return Object.defineProperties({},e)}function Vi(e){return JSON.stringify(e)}const Wi="captureStackTrace"in Error?Error.captureStackTrace:function(){};function qi(e){return"object"===typeof e&&null!==e&&!Array.isArray(e)}const $i=Fi(()=>{var e;if("undefined"!==typeof navigator&&null!==(e=navigator)&&void 0!==e&&null!==(e=e.userAgent)&&void 0!==e&&e.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(Zn){return!1}});function Ki(e){if(!1===qi(e))return!1;const t=e.constructor;if(void 0===t)return!0;const r=t.prototype;return!1!==qi(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}function Xi(e){return Ki(e)?(0,s.A)({},e):Array.isArray(e)?[...e]:e}const Yi=new Set(["string","number","symbol"]);new Set(["string","number","bigint","boolean","symbol","undefined"]);function Ji(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Zi(e,t,r){const n=new e._zod.constr(null!==t&&void 0!==t?t:e._zod.def);return(!t||null!==r&&void 0!==r&&r.parent)&&(n._zod.parent=e),n}function Qi(e){const t=e;if(!t)return{};if("string"===typeof t)return{error:()=>t};if(void 0!==(null===t||void 0===t?void 0:t.message)){if(void 0!==(null===t||void 0===t?void 0:t.error))throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"===typeof t.error?(0,s.A)((0,s.A)({},t),{},{error:()=>t.error}):t}function el(e){return"bigint"===typeof e?e.toString()+"n":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}const tl={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function rl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!0===e.aborted)return!0;for(let n=t;n<e.issues.length;n++){var r;if(!0!==(null===(r=e.issues[n])||void 0===r?void 0:r.continue))return!0}return!1}function nl(e,t){return t.map(t=>{var r,n;return null!==(r=(n=t).path)&&void 0!==r||(n.path=[]),t.path.unshift(e),t})}function sl(e){return"string"===typeof e?e:null===e||void 0===e?void 0:e.message}function al(e,t,r){var n;const a=(0,s.A)((0,s.A)({},e),{},{path:null!==(n=e.path)&&void 0!==n?n:[]});if(!e.message){var i,l,o,c,d,u,m,h,p;const n=null!==(i=null!==(l=null!==(o=null!==(c=sl(null===(d=e.inst)||void 0===d||null===(d=d._zod.def)||void 0===d||null===(u=d.error)||void 0===u?void 0:u.call(d,e)))&&void 0!==c?c:sl(null===t||void 0===t||null===(m=t.error)||void 0===m?void 0:m.call(t,e)))&&void 0!==o?o:sl(null===(h=r.customError)||void 0===h?void 0:h.call(r,e)))&&void 0!==l?l:sl(null===(p=r.localeError)||void 0===p?void 0:p.call(r,e)))&&void 0!==i?i:"Invalid input";a.message=n}return delete a.inst,delete a.continue,null!==t&&void 0!==t&&t.reportInput||delete a.input,a}function il(e){return Array.isArray(e)?"array":"string"===typeof e?"string":"unknown"}function ll(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[n,a,i]=t;return"string"===typeof n?{message:n,code:"custom",input:a,inst:i}:(0,s.A)({},n)}const ol=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Li,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},cl=ki("$ZodError",ol),dl=ki("$ZodError",ol,{Parent:Error});const ul=e=>(t,r,n,s)=>{const a=n?Object.assign(n,{async:!1}):{async:!1},i=t._zod.run({value:r,issues:[]},a);if(i instanceof Promise)throw new Ri;if(i.issues.length){var l;const t=new(null!==(l=null===s||void 0===s?void 0:s.Err)&&void 0!==l?l:e)(i.issues.map(e=>al(e,a,Pi())));throw Wi(t,null===s||void 0===s?void 0:s.callee),t}return i.value},ml=e=>async(t,r,n,s)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},a);if(i instanceof Promise&&(i=await i),i.issues.length){var l;const t=new(null!==(l=null===s||void 0===s?void 0:s.Err)&&void 0!==l?l:e)(i.issues.map(e=>al(e,a,Pi())));throw Wi(t,null===s||void 0===s?void 0:s.callee),t}return i.value},hl=e=>(t,r,n)=>{const a=n?(0,s.A)((0,s.A)({},n),{},{async:!1}):{async:!1},i=t._zod.run({value:r,issues:[]},a);if(i instanceof Promise)throw new Ri;return i.issues.length?{success:!1,error:new(null!==e&&void 0!==e?e:cl)(i.issues.map(e=>al(e,a,Pi())))}:{success:!0,data:i.value}},pl=hl(dl),xl=e=>async(t,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let a=t._zod.run({value:r,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(e=>al(e,s,Pi())))}:{success:!0,data:a.value}},fl=xl(dl),gl=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return ul(e)(t,r,s)},vl=e=>(t,r,n)=>ul(e)(t,r,n),yl=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return ml(e)(t,r,s)},bl=e=>async(t,r,n)=>ml(e)(t,r,n),Nl=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return hl(e)(t,r,s)},jl=e=>(t,r,n)=>hl(e)(t,r,n),wl=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return xl(e)(t,r,s)},Sl=e=>async(t,r,n)=>xl(e)(t,r,n),Al=/^[cC][^\s-]{8,}$/,Tl=/^[0-9a-z]+$/,Cl=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,El=/^[0-9a-vA-V]{20}$/,Dl=/^[A-Za-z0-9]{27}$/,kl=/^[a-zA-Z0-9_-]{21}$/,Rl=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,_l=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Il=e=>e?new RegExp("^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-".concat(e,"[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$")):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Pl=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;const Ol=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ll=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Fl=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Ml=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ul=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Bl=/^[A-Za-z0-9_-]*$/,Hl=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,zl=/^\+(?:[0-9]){6,14}[0-9]$/,Gl="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Vl=new RegExp("^".concat(Gl,"$"));function Wl(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"===typeof e.precision?-1===e.precision?"".concat(t):0===e.precision?"".concat(t,":[0-5]\\d"):"".concat(t,":[0-5]\\d\\.\\d{").concat(e.precision,"}"):"".concat(t,"(?::[0-5]\\d(?:\\.\\d+)?)?")}const ql=/^-?\d+$/,$l=/^-?\d+(?:\.\d+)?/,Kl=/^(?:true|false)$/i,Xl=/^[^A-Z]*$/,Yl=/^[^a-z]*$/;const Jl=ki("$ZodCheck",(e,t)=>{var r,n,s;null!==(r=e._zod)&&void 0!==r||(e._zod={}),e._zod.def=t,null!==(n=(s=e._zod).onattach)&&void 0!==n||(s.onattach=[])}),Zl={number:"number",bigint:"bigint",object:"date"},Ql=ki("$ZodCheckLessThan",(e,t)=>{Jl.init(e,t);const r=Zl[typeof t.value];e._zod.onattach.push(e=>{var r;const n=e._zod.bag,s=null!==(r=t.inclusive?n.maximum:n.exclusiveMaximum)&&void 0!==r?r:Number.POSITIVE_INFINITY;t.value<s&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),eo=ki("$ZodCheckGreaterThan",(e,t)=>{Jl.init(e,t);const r=Zl[typeof t.value];e._zod.onattach.push(e=>{var r;const n=e._zod.bag,s=null!==(r=t.inclusive?n.minimum:n.exclusiveMinimum)&&void 0!==r?r:Number.NEGATIVE_INFINITY;t.value>s&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),to=ki("$ZodCheckMultipleOf",(e,t)=>{Jl.init(e,t),e._zod.onattach.push(e=>{var r,n;null!==(r=(n=e._zod.bag).multipleOf)&&void 0!==r||(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!==typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"===typeof r.value?r.value%t.value===BigInt(0):0===function(e,t){const r=(e.toString().split(".")[1]||"").length,n=t.toString();let s=(n.split(".")[1]||"").length;if(0===s&&/\d?e-\d?/.test(n)){const e=n.match(/\d?e-(\d?)/);null!==e&&void 0!==e&&e[1]&&(s=Number.parseInt(e[1]))}const a=r>s?r:s;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}(r.value,t.value))||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),ro=ki("$ZodCheckNumberFormat",(e,t)=>{var r;Jl.init(e,t),t.format=t.format||"float64";const n=null===(r=t.format)||void 0===r?void 0:r.includes("int"),s=n?"int":"number",[a,i]=tl[t.format];e._zod.onattach.push(e=>{const r=e._zod.bag;r.format=t.format,r.minimum=a,r.maximum=i,n&&(r.pattern=ql)}),e._zod.check=r=>{const l=r.value;if(n){if(!Number.isInteger(l))return void r.issues.push({expected:s,format:t.format,code:"invalid_type",continue:!1,input:l,inst:e});if(!Number.isSafeInteger(l))return void(l>0?r.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort}):r.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort}))}l<a&&r.issues.push({origin:"number",input:l,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),l>i&&r.issues.push({origin:"number",input:l,code:"too_big",maximum:i,inst:e})}}),no=ki("$ZodCheckMaxLength",(e,t)=>{var r,n;Jl.init(e,t),null!==(r=(n=e._zod.def).when)&&void 0!==r||(n.when=e=>{const t=e.value;return!Mi(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{var r;const n=null!==(r=e._zod.bag.maximum)&&void 0!==r?r:Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const n=r.value;if(n.length<=t.maximum)return;const s=il(n);r.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),so=ki("$ZodCheckMinLength",(e,t)=>{var r,n;Jl.init(e,t),null!==(r=(n=e._zod.def).when)&&void 0!==r||(n.when=e=>{const t=e.value;return!Mi(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{var r;const n=null!==(r=e._zod.bag.minimum)&&void 0!==r?r:Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const n=r.value;if(n.length>=t.minimum)return;const s=il(n);r.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),ao=ki("$ZodCheckLengthEquals",(e,t)=>{var r,n;Jl.init(e,t),null!==(r=(n=e._zod.def).when)&&void 0!==r||(n.when=e=>{const t=e.value;return!Mi(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{const n=r.value,a=n.length;if(a===t.length)return;const i=il(n),l=a>t.length;r.issues.push((0,s.A)((0,s.A)({origin:i},l?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length}),{},{inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort}))}}),io=ki("$ZodCheckStringFormat",(e,t)=>{var r,n,a,i;Jl.init(e,t),e._zod.onattach.push(e=>{const r=e._zod.bag;var n;(r.format=t.format,t.pattern)&&(null!==(n=r.patterns)&&void 0!==n||(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?null!==(r=(a=e._zod).check)&&void 0!==r||(a.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push((0,s.A)((0,s.A)({origin:"string",code:"invalid_format",format:t.format,input:r.value},t.pattern?{pattern:t.pattern.toString()}:{}),{},{inst:e,continue:!t.abort}))}):null!==(n=(i=e._zod).check)&&void 0!==n||(i.check=()=>{})}),lo=ki("$ZodCheckRegex",(e,t)=>{io.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),oo=ki("$ZodCheckLowerCase",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=Xl),io.init(e,t)}),co=ki("$ZodCheckUpperCase",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=Yl),io.init(e,t)}),uo=ki("$ZodCheckIncludes",(e,t)=>{Jl.init(e,t);const r=Ji(t.includes),n=new RegExp("number"===typeof t.position?"^.{".concat(t.position,"}").concat(r):r);t.pattern=n,e._zod.onattach.push(e=>{var t;const r=e._zod.bag;null!==(t=r.patterns)&&void 0!==t||(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),mo=ki("$ZodCheckStartsWith",(e,t)=>{var r;Jl.init(e,t);const n=new RegExp("^".concat(Ji(t.prefix),".*"));null!==(r=t.pattern)&&void 0!==r||(t.pattern=n),e._zod.onattach.push(e=>{var t;const r=e._zod.bag;null!==(t=r.patterns)&&void 0!==t||(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),ho=ki("$ZodCheckEndsWith",(e,t)=>{var r;Jl.init(e,t);const n=new RegExp(".*".concat(Ji(t.suffix),"$"));null!==(r=t.pattern)&&void 0!==r||(t.pattern=n),e._zod.onattach.push(e=>{var t;const r=e._zod.bag;null!==(t=r.patterns)&&void 0!==t||(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}});const po=ki("$ZodCheckOverwrite",(e,t)=>{Jl.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class xo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"===typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length)),n=t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e);for(const s of n)this.content.push(s)}compile(){var e;return new Function(...null===this||void 0===this?void 0:this.args,[...(null!==(e=null===this||void 0===this?void 0:this.content)&&void 0!==e?e:[""]).map(e=>"  ".concat(e))].join("\n"))}}const fo={major:4,minor:1,patch:12},go=ki("$ZodType",(e,t)=>{var r,n;null!==e&&void 0!==e||(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=fo;const a=[...null!==(r=e._zod.def.checks)&&void 0!==r?r:[]];e._zod.traits.has("$ZodCheck")&&a.unshift(e);for(const s of a)for(const t of s._zod.onattach)t(e);if(0===a.length){var i,l;null!==(i=(n=e._zod).deferred)&&void 0!==i||(n.deferred=[]),null===(l=e._zod.deferred)||void 0===l||l.push(()=>{e._zod.run=e._zod.parse})}else{const t=(e,t,r)=>{let n,s=rl(e);for(const a of t){if(a._zod.def.when){if(!a._zod.def.when(e))continue}else if(s)continue;const t=e.issues.length,i=a._zod.check(e);if(i instanceof Promise&&!1===(null===r||void 0===r?void 0:r.async))throw new Ri;if(n||i instanceof Promise)n=(null!==n&&void 0!==n?n:Promise.resolve()).then(async()=>{await i;e.issues.length!==t&&(s||(s=rl(e,t)))});else{if(e.issues.length===t)continue;s||(s=rl(e,t))}}return n?n.then(()=>e):e},r=(r,n,s)=>{if(rl(r))return r.aborted=!0,r;const i=t(n,a,s);if(i instanceof Promise){if(!1===s.async)throw new Ri;return i.then(t=>e._zod.parse(t,s))}return e._zod.parse(i,s)};e._zod.run=(n,i)=>{if(i.skipChecks)return e._zod.parse(n,i);if("backward"===i.direction){const t=e._zod.parse({value:n.value,issues:[]},(0,s.A)((0,s.A)({},i),{},{skipChecks:!0}));return t instanceof Promise?t.then(e=>r(e,n,i)):r(t,n,i)}const l=e._zod.parse(n,i);if(l instanceof Promise){if(!1===i.async)throw new Ri;return l.then(e=>t(e,a,i))}return t(l,a,i)}}e["~standard"]={validate:t=>{try{var r;const n=pl(e,t);return n.success?{value:n.data}:{issues:null===(r=n.error)||void 0===r?void 0:r.issues}}catch(Zn){return fl(e,t).then(e=>{var t;return e.success?{value:e.data}:{issues:null===(t=e.error)||void 0===t?void 0:t.issues}})}},vendor:"zod",version:1}}),vo=ki("$ZodString",(e,t)=>{var r,n,s;go.init(e,t),e._zod.pattern=null!==(r=[...null!==(n=null===e||void 0===e||null===(s=e._zod.bag)||void 0===s?void 0:s.patterns)&&void 0!==n?n:[]].pop())&&void 0!==r?r:(e=>{var t,r;const n=e?"[\\s\\S]{".concat(null!==(t=null===e||void 0===e?void 0:e.minimum)&&void 0!==t?t:0,",").concat(null!==(r=null===e||void 0===e?void 0:e.maximum)&&void 0!==r?r:"","}"):"[\\s\\S]*";return new RegExp("^".concat(n,"$"))})(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch(n){}return"string"===typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),yo=ki("$ZodStringFormat",(e,t)=>{io.init(e,t),vo.init(e,t)}),bo=ki("$ZodGUID",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=_l),yo.init(e,t)}),No=ki("$ZodUUID",(e,t)=>{var r;if(t.version){var n;const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error('Invalid UUID version: "'.concat(t.version,'"'));null!==(n=t.pattern)&&void 0!==n||(t.pattern=Il(e))}else null!==(r=t.pattern)&&void 0!==r||(t.pattern=Il());yo.init(e,t)}),jo=ki("$ZodEmail",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=Pl),yo.init(e,t)}),wo=ki("$ZodURL",(e,t)=>{yo.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Hl.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),void(t.normalize?r.value=s.href:r.value=n)}catch(Zn){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),So=ki("$ZodEmoji",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),yo.init(e,t)}),Ao=ki("$ZodNanoID",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=kl),yo.init(e,t)}),To=ki("$ZodCUID",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=Al),yo.init(e,t)}),Co=ki("$ZodCUID2",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=Tl),yo.init(e,t)}),Eo=ki("$ZodULID",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=Cl),yo.init(e,t)}),Do=ki("$ZodXID",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=El),yo.init(e,t)}),ko=ki("$ZodKSUID",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=Dl),yo.init(e,t)}),Ro=ki("$ZodISODateTime",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=function(e){const t=Wl({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n="".concat(t,"(?:").concat(r.join("|"),")");return new RegExp("^".concat(Gl,"T(?:").concat(n,")$"))}(t)),yo.init(e,t)}),_o=ki("$ZodISODate",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=Vl),yo.init(e,t)}),Io=ki("$ZodISOTime",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=new RegExp("^".concat(Wl(t),"$"))),yo.init(e,t)}),Po=ki("$ZodISODuration",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=Rl),yo.init(e,t)}),Oo=ki("$ZodIPv4",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=Ol),yo.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),Lo=ki("$ZodIPv6",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=Ll),yo.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=r=>{try{new URL("http://[".concat(r.value,"]"))}catch(n){r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Fo=ki("$ZodCIDRv4",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=Fl),yo.init(e,t)}),Mo=ki("$ZodCIDRv6",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=Ml),yo.init(e,t),e._zod.check=r=>{const n=r.value.split("/");try{if(2!==n.length)throw new Error;const[e,t]=n;if(!t)throw new Error;const r=Number(t);if("".concat(r)!==t)throw new Error;if(r<0||r>128)throw new Error;new URL("http://[".concat(e,"]"))}catch(s){r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function Uo(e){if(""===e)return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch(t){return!1}}const Bo=ki("$ZodBase64",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=Ul),yo.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{Uo(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});const Ho=ki("$ZodBase64URL",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=Bl),yo.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{(function(e){if(!Bl.test(e))return!1;const t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return Uo(t.padEnd(4*Math.ceil(t.length/4),"="))})(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),zo=ki("$ZodE164",(e,t)=>{var r;null!==(r=t.pattern)&&void 0!==r||(t.pattern=zl),yo.init(e,t)});const Go=ki("$ZodJWT",(e,t)=>{yo.init(e,t),e._zod.check=r=>{(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const r=e.split(".");if(3!==r.length)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return(!("typ"in s)||"JWT"===(null===s||void 0===s?void 0:s.typ))&&!!s.alg&&(!t||"alg"in s&&s.alg===t)}catch(r){return!1}})(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),Vo=ki("$ZodNumber",(e,t)=>{var r;go.init(e,t),e._zod.pattern=null!==(r=e._zod.bag.pattern)&&void 0!==r?r:$l,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch(Zn){}const a=r.value;if("number"===typeof a&&!Number.isNaN(a)&&Number.isFinite(a))return r;const i="number"===typeof a?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return r.issues.push((0,s.A)({expected:"number",code:"invalid_type",input:a,inst:e},i?{received:i}:{})),r}}),Wo=ki("$ZodNumber",(e,t)=>{ro.init(e,t),Vo.init(e,t)}),qo=ki("$ZodBoolean",(e,t)=>{go.init(e,t),e._zod.pattern=Kl,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Boolean(r.value)}catch(Zn){}const s=r.value;return"boolean"===typeof s||r.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),r}}),$o=ki("$ZodUnknown",(e,t)=>{go.init(e,t),e._zod.parse=e=>e}),Ko=ki("$ZodNever",(e,t)=>{go.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function Xo(e,t,r){e.issues.length&&t.issues.push(...nl(r,e.issues)),t.value[r]=e.value}const Yo=ki("$ZodArray",(e,t)=>{go.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const a=[];for(let e=0;e<s.length;e++){const i=s[e],l=t.element._zod.run({value:i,issues:[]},n);l instanceof Promise?a.push(l.then(t=>Xo(t,r,e))):Xo(l,r,e)}return a.length?Promise.all(a).then(()=>r):r}});function Jo(e,t,r,n){e.issues.length&&t.issues.push(...nl(r,e.issues)),void 0===e.value?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function Zo(e){const t=Object.keys(e.shape);for(const s of t){var r;if(null===(r=e.shape)||void 0===r||null===(r=r[s])||void 0===r||null===(r=r._zod)||void 0===r||null===(r=r.traits)||void 0===r||!r.has("$ZodType"))throw new Error('Invalid element at key "'.concat(s,'": expected a Zod schema'))}const n=(a=e.shape,Object.keys(a).filter(e=>"optional"===a[e]._zod.optin&&"optional"===a[e]._zod.optout));var a;return(0,s.A)((0,s.A)({},e),{},{keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)})}function Qo(e,t,r,n,s,a){const i=[],l=s.keySet,o=s.catchall._zod,c=o.def.type;for(const d of Object.keys(t)){if(l.has(d))continue;if("never"===c){i.push(d);continue}const s=o.run({value:t[d],issues:[]},n);s instanceof Promise?e.push(s.then(e=>Jo(e,r,d,t))):Jo(s,r,d,t)}return i.length&&r.issues.push({code:"unrecognized_keys",keys:i,input:t,inst:a}),e.length?Promise.all(e).then(()=>r):r}const ec=ki("$ZodObject",(e,t)=>{go.init(e,t);const r=Object.getOwnPropertyDescriptor(t,"shape");if(null===r||void 0===r||!r.get){const e=t.shape;Object.defineProperty(t,"shape",{get:()=>{const r=(0,s.A)({},e);return Object.defineProperty(t,"shape",{value:r}),r}})}const n=Fi(()=>Zo(t));Hi(e._zod,"propValues",()=>{const e=t.shape,r={};for(const t in e){const s=e[t]._zod;if(s.values){var n;null!==(n=r[t])&&void 0!==n||(r[t]=new Set);for(const e of s.values)r[t].add(e)}}return r});const a=qi,i=t.catchall;let l;e._zod.parse=(t,r)=>{null!==l&&void 0!==l||(l=n.value);const s=t.value;if(!a(s))return t.issues.push({expected:"object",code:"invalid_type",input:s,inst:e}),t;t.value={};const o=[],c=l.shape;for(const e of l.keys){const n=c[e]._zod.run({value:s[e],issues:[]},r);n instanceof Promise?o.push(n.then(r=>Jo(r,t,e,s))):Jo(n,t,e,s)}return i?Qo(o,s,t,r,n.value,e):o.length?Promise.all(o).then(()=>t):t}}),tc=ki("$ZodObjectJIT",(e,t)=>{ec.init(e,t);const r=e._zod.parse,n=Fi(()=>Zo(t));let s;const a=qi,i=!Ii.jitless,l=i&&$i.value,o=t.catchall;let c;e._zod.parse=(d,u)=>{null!==c&&void 0!==c||(c=n.value);const m=d.value;return a(m)?i&&l&&!1===(null===u||void 0===u?void 0:u.async)&&!0!==u.jitless?(s||(s=(e=>{const t=new xo(["shape","payload","ctx"]),r=n.value,s=e=>{const t=Vi(e);return"shape[".concat(t,"]._zod.run({ value: input[").concat(t,"], issues: [] }, ctx)")};t.write("const input = payload.value;");const a=Object.create(null);let i=0;for(const n of r.keys)a[n]="key_".concat(i++);t.write("const newResult = {};");for(const n of r.keys){const e=a[n],r=Vi(n);t.write("const ".concat(e," = ").concat(s(n),";")),t.write("\n        if (".concat(e,".issues.length) {\n          payload.issues = payload.issues.concat(").concat(e,".issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [").concat(r,", ...iss.path] : [").concat(r,"]\n          })));\n        }\n        \n        \n        if (").concat(e,".value === undefined) {\n          if (").concat(r," in input) {\n            newResult[").concat(r,"] = undefined;\n          }\n        } else {\n          newResult[").concat(r,"] = ").concat(e,".value;\n        }\n        \n      "))}t.write("payload.value = newResult;"),t.write("return payload;");const l=t.compile();return(t,r)=>l(e,t,r)})(t.shape)),d=s(d,u),o?Qo([],m,d,u,c,e):d):r(d,u):(d.issues.push({expected:"object",code:"invalid_type",input:m,inst:e}),d)}});function rc(e,t,r,n){for(const a of e)if(0===a.issues.length)return t.value=a.value,t;const s=e.filter(e=>!rl(e));return 1===s.length?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>al(e,n,Pi())))}),t)}const nc=ki("$ZodUnion",(e,t)=>{go.init(e,t),Hi(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),Hi(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),Hi(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),Hi(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp("^(".concat(e.map(e=>Ui(e.source)).join("|"),")$"))}});const r=1===t.options.length,n=t.options[0]._zod.run;e._zod.parse=(s,a)=>{if(r)return n(s,a);let i=!1;const l=[];for(const e of t.options){const t=e._zod.run({value:s.value,issues:[]},a);if(t instanceof Promise)l.push(t),i=!0;else{if(0===t.issues.length)return t;l.push(t)}}return i?Promise.all(l).then(t=>rc(t,s,e,a)):rc(l,s,e,a)}}),sc=ki("$ZodIntersection",(e,t)=>{go.init(e,t),e._zod.parse=(e,r)=>{const n=e.value,s=t.left._zod.run({value:n,issues:[]},r),a=t.right._zod.run({value:n,issues:[]},r);return s instanceof Promise||a instanceof Promise?Promise.all([s,a]).then(t=>{let[r,n]=t;return ic(e,r,n)}):ic(e,s,a)}});function ac(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(Ki(e)&&Ki(t)){const r=Object.keys(t),n=Object.keys(e).filter(e=>-1!==r.indexOf(e)),a=(0,s.A)((0,s.A)({},e),t);for(const s of n){const r=ac(e[s],t[s]);if(!r.valid)return{valid:!1,mergeErrorPath:[s,...r.mergeErrorPath]};a[s]=r.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const s=ac(e[n],t[n]);if(!s.valid)return{valid:!1,mergeErrorPath:[n,...s.mergeErrorPath]};r.push(s.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function ic(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),rl(e))return e;const n=ac(t.value,r.value);if(!n.valid)throw new Error("Unmergable intersection. Error path: "+"".concat(JSON.stringify(n.mergeErrorPath)));return e.value=n.data,e}const lc=ki("$ZodEnum",(e,t)=>{go.init(e,t);const r=function(e){const t=Object.values(e).filter(e=>"number"===typeof e),r=Object.entries(e).filter(e=>{let[r,n]=e;return-1===t.indexOf(+r)}).map(e=>{let[t,r]=e;return r});return r}(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp("^(".concat(r.filter(e=>Yi.has(typeof e)).map(e=>"string"===typeof e?Ji(e):e.toString()).join("|"),")$")),e._zod.parse=(t,s)=>{const a=t.value;return n.has(a)||t.issues.push({code:"invalid_value",values:r,input:a,inst:e}),t}}),oc=ki("$ZodTransform",(e,t)=>{go.init(e,t),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new _i(e.constructor.name);const s=t.transform(r.value,r);if(n.async){return(s instanceof Promise?s:Promise.resolve(s)).then(e=>(r.value=e,r))}if(s instanceof Promise)throw new Ri;return r.value=s,r}});function cc(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}const dc=ki("$ZodOptional",(e,t)=>{go.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Hi(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Hi(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp("^(".concat(Ui(e.source),")?$")):void 0}),e._zod.parse=(e,r)=>{if("optional"===t.innerType._zod.optin){const n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>cc(t,e.value)):cc(n,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,r)}}),uc=ki("$ZodNullable",(e,t)=>{go.init(e,t),Hi(e._zod,"optin",()=>t.innerType._zod.optin),Hi(e._zod,"optout",()=>t.innerType._zod.optout),Hi(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp("^(".concat(Ui(e.source),"|null)$")):void 0}),Hi(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),mc=ki("$ZodDefault",(e,t)=>{go.init(e,t),e._zod.optin="optional",Hi(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);if(void 0===e.value)return e.value=t.defaultValue,e;const n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(e=>hc(e,t)):hc(n,t)}});function hc(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const pc=ki("$ZodPrefault",(e,t)=>{go.init(e,t),e._zod.optin="optional",Hi(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>("backward"===r.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),xc=ki("$ZodNonOptional",(e,t)=>{go.init(e,t),Hi(e._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(t=>fc(t,e)):fc(s,e)}});function fc(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const gc=ki("$ZodCatch",(e,t)=>{go.init(e,t),Hi(e._zod,"optin",()=>t.innerType._zod.optin),Hi(e._zod,"optout",()=>t.innerType._zod.optout),Hi(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);const n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(n=>(e.value=n.value,n.issues.length&&(e.value=t.catchValue((0,s.A)((0,s.A)({},e),{},{error:{issues:n.issues.map(e=>al(e,r,Pi()))},input:e.value})),e.issues=[]),e)):(e.value=n.value,n.issues.length&&(e.value=t.catchValue((0,s.A)((0,s.A)({},e),{},{error:{issues:n.issues.map(e=>al(e,r,Pi()))},input:e.value})),e.issues=[]),e)}}),vc=ki("$ZodPipe",(e,t)=>{go.init(e,t),Hi(e._zod,"values",()=>t.in._zod.values),Hi(e._zod,"optin",()=>t.in._zod.optin),Hi(e._zod,"optout",()=>t.out._zod.optout),Hi(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("backward"===r.direction){const n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>yc(e,t.in,r)):yc(n,t.in,r)}const n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>yc(e,t.out,r)):yc(n,t.out,r)}});function yc(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const bc=ki("$ZodReadonly",(e,t)=>{go.init(e,t),Hi(e._zod,"propValues",()=>t.innerType._zod.propValues),Hi(e._zod,"values",()=>t.innerType._zod.values),Hi(e._zod,"optin",()=>t.innerType._zod.optin),Hi(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);const n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(Nc):Nc(n)}});function Nc(e){return e.value=Object.freeze(e.value),e}const jc=ki("$ZodCustom",(e,t)=>{Jl.init(e,t),go.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{const n=r.value,s=t.fn(n);if(s instanceof Promise)return s.then(t=>wc(t,r,n,e));wc(s,r,n,e)}});function wc(e,t,r,n){if(!e){var s;const e={code:"custom",input:r,inst:n,path:[...null!==(s=n._zod.def.path)&&void 0!==s?s:[]],continue:!n._zod.def.abort};n._zod.def.params&&(e.params=n._zod.def.params),t.issues.push(ll(e))}}const Sc=()=>{const e={string:{unit:"\u062d\u0631\u0641",verb:"\u0623\u0646 \u064a\u062d\u0648\u064a"},file:{unit:"\u0628\u0627\u064a\u062a",verb:"\u0623\u0646 \u064a\u062d\u0648\u064a"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064a\u062d\u0648\u064a"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064a\u062d\u0648\u064a"}};function t(t){var r;return null!==(r=e[t])&&void 0!==r?r:null}const r={regex:"\u0645\u062f\u062e\u0644",email:"\u0628\u0631\u064a\u062f \u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064a\u0645\u0648\u062c\u064a",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062a\u0627\u0631\u064a\u062e \u0648\u0648\u0642\u062a \u0628\u0645\u0639\u064a\u0627\u0631 ISO",date:"\u062a\u0627\u0631\u064a\u062e \u0628\u0645\u0639\u064a\u0627\u0631 ISO",time:"\u0648\u0642\u062a \u0628\u0645\u0639\u064a\u0627\u0631 ISO",duration:"\u0645\u062f\u0629 \u0628\u0645\u0639\u064a\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062f\u0649 \u0639\u0646\u0627\u0648\u064a\u0646 \u0628\u0635\u064a\u063a\u0629 IPv4",cidrv6:"\u0645\u062f\u0649 \u0639\u0646\u0627\u0648\u064a\u0646 \u0628\u0635\u064a\u063a\u0629 IPv6",base64:"\u0646\u064e\u0635 \u0628\u062a\u0631\u0645\u064a\u0632 base64-encoded",base64url:"\u0646\u064e\u0635 \u0628\u062a\u0631\u0645\u064a\u0632 base64url-encoded",json_string:"\u0646\u064e\u0635 \u0639\u0644\u0649 \u0647\u064a\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0628\u0645\u0639\u064a\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062f\u062e\u0644"};return e=>{switch(e.code){case"invalid_type":return"\u0645\u062f\u062e\u0644\u0627\u062a \u063a\u064a\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064a\u0641\u062a\u0631\u0636 \u0625\u062f\u062e\u0627\u0644 ".concat(e.expected,"\u060c \u0648\u0644\u0643\u0646 \u062a\u0645 \u0625\u062f\u062e\u0627\u0644 ").concat((e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input));case"invalid_value":return 1===e.values.length?"\u0645\u062f\u062e\u0644\u0627\u062a \u063a\u064a\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064a\u0641\u062a\u0631\u0636 \u0625\u062f\u062e\u0627\u0644 ".concat(util.stringifyPrimitive(e.values[0])):"\u0627\u062e\u062a\u064a\u0627\u0631 \u063a\u064a\u0631 \u0645\u0642\u0628\u0648\u0644: \u064a\u062a\u0648\u0642\u0639 \u0627\u0646\u062a\u0642\u0627\u0621 \u0623\u062d\u062f \u0647\u0630\u0647 \u0627\u0644\u062e\u064a\u0627\u0631\u0627\u062a: ".concat(util.joinValues(e.values,"|"));case"too_big":{var n,s,a;const r=e.inclusive?"<=":"<",i=t(e.origin);return i?" \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064a\u0641\u062a\u0631\u0636 \u0623\u0646 \u062a\u0643\u0648\u0646 ".concat(null!==(n=e.origin)&&void 0!==n?n:"\u0627\u0644\u0642\u064a\u0645\u0629"," ").concat(r," ").concat(e.maximum.toString()," ").concat(null!==(s=i.unit)&&void 0!==s?s:"\u0639\u0646\u0635\u0631"):"\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064a\u0641\u062a\u0631\u0636 \u0623\u0646 \u062a\u0643\u0648\u0646 ".concat(null!==(a=e.origin)&&void 0!==a?a:"\u0627\u0644\u0642\u064a\u0645\u0629"," ").concat(r," ").concat(e.maximum.toString())}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?"\u0623\u0635\u063a\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064a\u0641\u062a\u0631\u0636 \u0644\u0640 ".concat(e.origin," \u0623\u0646 \u064a\u0643\u0648\u0646 ").concat(r," ").concat(e.minimum.toString()," ").concat(n.unit):"\u0623\u0635\u063a\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064a\u0641\u062a\u0631\u0636 \u0644\u0640 ".concat(e.origin," \u0623\u0646 \u064a\u0643\u0648\u0646 ").concat(r," ").concat(e.minimum.toString())}case"invalid_format":{var i;const t=e;return"starts_with"===t.format?'\u0646\u064e\u0635 \u063a\u064a\u0631 \u0645\u0642\u0628\u0648\u0644: \u064a\u062c\u0628 \u0623\u0646 \u064a\u0628\u062f\u0623 \u0628\u0640 "'.concat(e.prefix,'"'):"ends_with"===t.format?'\u0646\u064e\u0635 \u063a\u064a\u0631 \u0645\u0642\u0628\u0648\u0644: \u064a\u062c\u0628 \u0623\u0646 \u064a\u0646\u062a\u0647\u064a \u0628\u0640 "'.concat(t.suffix,'"'):"includes"===t.format?'\u0646\u064e\u0635 \u063a\u064a\u0631 \u0645\u0642\u0628\u0648\u0644: \u064a\u062c\u0628 \u0623\u0646 \u064a\u062a\u0636\u0645\u0651\u064e\u0646 "'.concat(t.includes,'"'):"regex"===t.format?"\u0646\u064e\u0635 \u063a\u064a\u0631 \u0645\u0642\u0628\u0648\u0644: \u064a\u062c\u0628 \u0623\u0646 \u064a\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ".concat(t.pattern):"".concat(null!==(i=r[t.format])&&void 0!==i?i:e.format," \u063a\u064a\u0631 \u0645\u0642\u0628\u0648\u0644")}case"not_multiple_of":return"\u0631\u0642\u0645 \u063a\u064a\u0631 \u0645\u0642\u0628\u0648\u0644: \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062a ".concat(e.divisor);case"unrecognized_keys":return"\u0645\u0639\u0631\u0641".concat(e.keys.length>1?"\u0627\u062a":""," \u063a\u0631\u064a\u0628").concat(e.keys.length>1?"\u0629":"",": ").concat(util.joinValues(e.keys,"\u060c "));case"invalid_key":return"\u0645\u0639\u0631\u0641 \u063a\u064a\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064a ".concat(e.origin);case"invalid_union":default:return"\u0645\u062f\u062e\u0644 \u063a\u064a\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return"\u0645\u062f\u062e\u0644 \u063a\u064a\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064a ".concat(e.origin)}}};const Ac=()=>{const e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function t(t){var r;return null!==(r=e[t])&&void 0!==r?r:null}const r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return"Invalid input: expected ".concat(e.expected,", received ").concat((e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input));case"invalid_value":return 1===e.values.length?"Invalid input: expected ".concat(el(e.values[0])):"Invalid option: expected one of ".concat(Oi(e.values,"|"));case"too_big":{var n,s,a;const r=e.inclusive?"<=":"<",i=t(e.origin);return i?"Too big: expected ".concat(null!==(n=e.origin)&&void 0!==n?n:"value"," to have ").concat(r).concat(e.maximum.toString()," ").concat(null!==(s=i.unit)&&void 0!==s?s:"elements"):"Too big: expected ".concat(null!==(a=e.origin)&&void 0!==a?a:"value"," to be ").concat(r).concat(e.maximum.toString())}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?"Too small: expected ".concat(e.origin," to have ").concat(r).concat(e.minimum.toString()," ").concat(n.unit):"Too small: expected ".concat(e.origin," to be ").concat(r).concat(e.minimum.toString())}case"invalid_format":{var i;const t=e;return"starts_with"===t.format?'Invalid string: must start with "'.concat(t.prefix,'"'):"ends_with"===t.format?'Invalid string: must end with "'.concat(t.suffix,'"'):"includes"===t.format?'Invalid string: must include "'.concat(t.includes,'"'):"regex"===t.format?"Invalid string: must match pattern ".concat(t.pattern):"Invalid ".concat(null!==(i=r[t.format])&&void 0!==i?i:e.format)}case"not_multiple_of":return"Invalid number: must be a multiple of ".concat(e.divisor);case"unrecognized_keys":return"Unrecognized key".concat(e.keys.length>1?"s":"",": ").concat(Oi(e.keys,", "));case"invalid_key":return"Invalid key in ".concat(e.origin);case"invalid_union":default:return"Invalid input";case"invalid_element":return"Invalid value in ".concat(e.origin)}}};Symbol("ZodOutput"),Symbol("ZodInput");class Tc{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e){const t=arguments.length<=1?void 0:arguments[1];if(this._map.set(e,t),t&&"object"===typeof t&&"id"in t){if(this._idmap.has(t.id))throw new Error("ID ".concat(t.id," already exists in the registry"));this._idmap.set(t.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"===typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){var r;const n=(0,s.A)({},null!==(r=this.get(t))&&void 0!==r?r:{});delete n.id;const a=(0,s.A)((0,s.A)({},n),this._map.get(e));return Object.keys(a).length?a:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function Cc(){return new Tc}const Ec=Cc();function Dc(e,t){return new e((0,s.A)({type:"string",format:"guid",check:"string_format",abort:!1},Qi(t)))}function kc(e,t){return new Ql((0,s.A)((0,s.A)({check:"less_than"},Qi(t)),{},{value:e,inclusive:!1}))}function Rc(e,t){return new Ql((0,s.A)((0,s.A)({check:"less_than"},Qi(t)),{},{value:e,inclusive:!0}))}function _c(e,t){return new eo((0,s.A)((0,s.A)({check:"greater_than"},Qi(t)),{},{value:e,inclusive:!1}))}function Ic(e,t){return new eo((0,s.A)((0,s.A)({check:"greater_than"},Qi(t)),{},{value:e,inclusive:!0}))}function Pc(e,t){return new to((0,s.A)((0,s.A)({check:"multiple_of"},Qi(t)),{},{value:e}))}function Oc(e,t){return new no((0,s.A)((0,s.A)({check:"max_length"},Qi(t)),{},{maximum:e}))}function Lc(e,t){return new so((0,s.A)((0,s.A)({check:"min_length"},Qi(t)),{},{minimum:e}))}function Fc(e,t){return new ao((0,s.A)((0,s.A)({check:"length_equals"},Qi(t)),{},{length:e}))}function Mc(e){return new po({check:"overwrite",tx:e})}function Uc(e){const t=function(e,t){const r=new Jl((0,s.A)({check:"custom"},Qi(t)));return r._zod.check=e,r}(r=>(r.addIssue=e=>{if("string"===typeof e)r.issues.push(ll(e,r.value,t._zod.def));else{var n,s,a,i;const l=e;l.fatal&&(l.continue=!1),null!==(n=l.code)&&void 0!==n||(l.code="custom"),null!==(s=l.input)&&void 0!==s||(l.input=r.value),null!==(a=l.inst)&&void 0!==a||(l.inst=t),null!==(i=l.continue)&&void 0!==i||(l.continue=!t._zod.def.abort),r.issues.push(ll(l))}},e(r.value,r)));return t}const Bc=ki("ZodISODateTime",(e,t)=>{Ro.init(e,t),md.init(e,t)});function Hc(e){return function(e,t){return new e((0,s.A)({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null},Qi(t)))}(Bc,e)}const zc=ki("ZodISODate",(e,t)=>{_o.init(e,t),md.init(e,t)});function Gc(e){return function(e,t){return new e((0,s.A)({type:"string",format:"date",check:"string_format"},Qi(t)))}(zc,e)}const Vc=ki("ZodISOTime",(e,t)=>{Io.init(e,t),md.init(e,t)});function Wc(e){return function(e,t){return new e((0,s.A)({type:"string",format:"time",check:"string_format",precision:null},Qi(t)))}(Vc,e)}const qc=ki("ZodISODuration",(e,t)=>{Po.init(e,t),md.init(e,t)});function $c(e){return function(e,t){return new e((0,s.A)({type:"string",format:"duration",check:"string_format"},Qi(t)))}(qc,e)}const Kc=(e,t)=>{cl.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e.message;const r={_errors:[]},n=e=>{for(const s of e.issues)if("invalid_union"===s.code&&s.errors.length)s.errors.map(e=>n({issues:e}));else if("invalid_key"===s.code)n({issues:s.issues});else if("invalid_element"===s.code)n({issues:s.issues});else if(0===s.path.length)r._errors.push(t(s));else{let e=r,n=0;for(;n<s.path.length;){const r=s.path[n];n===s.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(s))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(e),r}(e,t)},flatten:{value:t=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e.message;const r={},n=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,Li,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,Li,2)}},isEmpty:{get:()=>0===e.issues.length}})},Xc=(ki("ZodError",Kc),ki("ZodError",Kc,{Parent:Error})),Yc=ul(Xc),Jc=ml(Xc),Zc=hl(Xc),Qc=xl(Xc),ed=gl(Xc),td=vl(Xc),rd=yl(Xc),nd=bl(Xc),sd=Nl(Xc),ad=jl(Xc),id=wl(Xc),ld=Sl(Xc),od=ki("ZodType",(e,t)=>(go.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=function(){for(var r,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return e.clone(Gi(t,{checks:[...null!==(r=t.checks)&&void 0!==r?r:[],...s.map(e=>"function"===typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}))},e.clone=(t,r)=>Zi(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>Yc(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>Zc(e,t,r),e.parseAsync=async(t,r)=>Jc(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>Qc(e,t,r),e.spa=e.safeParseAsync,e.encode=(t,r)=>ed(e,t,r),e.decode=(t,r)=>td(e,t,r),e.encodeAsync=async(t,r)=>rd(e,t,r),e.decodeAsync=async(t,r)=>nd(e,t,r),e.safeEncode=(t,r)=>sd(e,t,r),e.safeDecode=(t,r)=>ad(e,t,r),e.safeEncodeAsync=async(t,r)=>id(e,t,r),e.safeDecodeAsync=async(t,r)=>ld(e,t,r),e.refine=(t,r)=>e.check(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t,r){return new e((0,s.A)({type:"custom",check:"custom",fn:t},Qi(r)))}(du,e,t)}(t,r)),e.superRefine=t=>e.check(Uc(t)),e.overwrite=t=>e.check(Mc(t)),e.optional=()=>eu(e),e.nullable=()=>ru(e),e.nullish=()=>eu(ru(e)),e.nonoptional=t=>function(e,t){return new au((0,s.A)({type:"nonoptional",innerType:e},Qi(t)))}(e,t),e.array=()=>zd(e),e.or=t=>qd([e,t]),e.and=t=>new $d({type:"intersection",left:e,right:t}),e.transform=t=>ou(e,Zd(t)),e.default=t=>{return r=t,new nu({type:"default",innerType:e,get defaultValue(){return"function"===typeof r?r():Xi(r)}});var r},e.prefault=t=>{return r=t,new su({type:"prefault",innerType:e,get defaultValue(){return"function"===typeof r?r():Xi(r)}});var r},e.catch=t=>{return new iu({type:"catch",innerType:e,catchValue:"function"===typeof(r=t)?r:()=>r});var r},e.pipe=t=>ou(e,t),e.readonly=()=>new cu({type:"readonly",innerType:e}),e.describe=t=>{const r=e.clone();return Ec.add(r,{description:t}),r},Object.defineProperty(e,"description",{get(){var t;return null===(t=Ec.get(e))||void 0===t?void 0:t.description},configurable:!0}),e.meta=function(){if(0===arguments.length)return Ec.get(e);const t=e.clone();return Ec.add(t,arguments.length<=0?void 0:arguments[0]),t},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),cd=ki("_ZodString",(e,t)=>{var r,n,a;vo.init(e,t),od.init(e,t);const i=e._zod.bag;e.format=null!==(r=i.format)&&void 0!==r?r:null,e.minLength=null!==(n=i.minimum)&&void 0!==n?n:null,e.maxLength=null!==(a=i.maximum)&&void 0!==a?a:null,e.regex=function(){return e.check(function(e,t){return new lo((0,s.A)((0,s.A)({check:"string_format",format:"regex"},Qi(t)),{},{pattern:e}))}(...arguments))},e.includes=function(){return e.check(function(e,t){return new uo((0,s.A)((0,s.A)({check:"string_format",format:"includes"},Qi(t)),{},{includes:e}))}(...arguments))},e.startsWith=function(){return e.check(function(e,t){return new mo((0,s.A)((0,s.A)({check:"string_format",format:"starts_with"},Qi(t)),{},{prefix:e}))}(...arguments))},e.endsWith=function(){return e.check(function(e,t){return new ho((0,s.A)((0,s.A)({check:"string_format",format:"ends_with"},Qi(t)),{},{suffix:e}))}(...arguments))},e.min=function(){return e.check(Lc(...arguments))},e.max=function(){return e.check(Oc(...arguments))},e.length=function(){return e.check(Fc(...arguments))},e.nonempty=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.check(Lc(1,...r))},e.lowercase=t=>e.check(function(e){return new oo((0,s.A)({check:"string_format",format:"lowercase"},Qi(e)))}(t)),e.uppercase=t=>e.check(function(e){return new co((0,s.A)({check:"string_format",format:"uppercase"},Qi(e)))}(t)),e.trim=()=>e.check(Mc(e=>e.trim())),e.normalize=function(){return e.check(function(e){return Mc(t=>t.normalize(e))}(...arguments))},e.toLowerCase=()=>e.check(Mc(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(Mc(e=>e.toUpperCase()))}),dd=ki("ZodString",(e,t)=>{vo.init(e,t),cd.init(e,t),e.email=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"email",check:"string_format",abort:!1},Qi(t)))}(hd,t)),e.url=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"url",check:"string_format",abort:!1},Qi(t)))}(fd,t)),e.jwt=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"jwt",check:"string_format",abort:!1},Qi(t)))}(Rd,t)),e.emoji=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"emoji",check:"string_format",abort:!1},Qi(t)))}(gd,t)),e.guid=t=>e.check(Dc(pd,t)),e.uuid=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"uuid",check:"string_format",abort:!1},Qi(t)))}(xd,t)),e.uuidv4=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4"},Qi(t)))}(xd,t)),e.uuidv6=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6"},Qi(t)))}(xd,t)),e.uuidv7=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7"},Qi(t)))}(xd,t)),e.nanoid=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"nanoid",check:"string_format",abort:!1},Qi(t)))}(vd,t)),e.guid=t=>e.check(Dc(pd,t)),e.cuid=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"cuid",check:"string_format",abort:!1},Qi(t)))}(yd,t)),e.cuid2=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"cuid2",check:"string_format",abort:!1},Qi(t)))}(bd,t)),e.ulid=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"ulid",check:"string_format",abort:!1},Qi(t)))}(Nd,t)),e.base64=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"base64",check:"string_format",abort:!1},Qi(t)))}(Ed,t)),e.base64url=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"base64url",check:"string_format",abort:!1},Qi(t)))}(Dd,t)),e.xid=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"xid",check:"string_format",abort:!1},Qi(t)))}(jd,t)),e.ksuid=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"ksuid",check:"string_format",abort:!1},Qi(t)))}(wd,t)),e.ipv4=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"ipv4",check:"string_format",abort:!1},Qi(t)))}(Sd,t)),e.ipv6=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"ipv6",check:"string_format",abort:!1},Qi(t)))}(Ad,t)),e.cidrv4=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"cidrv4",check:"string_format",abort:!1},Qi(t)))}(Td,t)),e.cidrv6=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"cidrv6",check:"string_format",abort:!1},Qi(t)))}(Cd,t)),e.e164=t=>e.check(function(e,t){return new e((0,s.A)({type:"string",format:"e164",check:"string_format",abort:!1},Qi(t)))}(kd,t)),e.datetime=t=>e.check(Hc(t)),e.date=t=>e.check(Gc(t)),e.time=t=>e.check(Wc(t)),e.duration=t=>e.check($c(t))});function ud(e){return function(e,t){return new e((0,s.A)({type:"string"},Qi(t)))}(dd,e)}const md=ki("ZodStringFormat",(e,t)=>{yo.init(e,t),cd.init(e,t)}),hd=ki("ZodEmail",(e,t)=>{jo.init(e,t),md.init(e,t)});const pd=ki("ZodGUID",(e,t)=>{bo.init(e,t),md.init(e,t)});const xd=ki("ZodUUID",(e,t)=>{No.init(e,t),md.init(e,t)});const fd=ki("ZodURL",(e,t)=>{wo.init(e,t),md.init(e,t)});const gd=ki("ZodEmoji",(e,t)=>{So.init(e,t),md.init(e,t)});const vd=ki("ZodNanoID",(e,t)=>{Ao.init(e,t),md.init(e,t)});const yd=ki("ZodCUID",(e,t)=>{To.init(e,t),md.init(e,t)});const bd=ki("ZodCUID2",(e,t)=>{Co.init(e,t),md.init(e,t)});const Nd=ki("ZodULID",(e,t)=>{Eo.init(e,t),md.init(e,t)});const jd=ki("ZodXID",(e,t)=>{Do.init(e,t),md.init(e,t)});const wd=ki("ZodKSUID",(e,t)=>{ko.init(e,t),md.init(e,t)});const Sd=ki("ZodIPv4",(e,t)=>{Oo.init(e,t),md.init(e,t)});const Ad=ki("ZodIPv6",(e,t)=>{Lo.init(e,t),md.init(e,t)});const Td=ki("ZodCIDRv4",(e,t)=>{Fo.init(e,t),md.init(e,t)});const Cd=ki("ZodCIDRv6",(e,t)=>{Mo.init(e,t),md.init(e,t)});const Ed=ki("ZodBase64",(e,t)=>{Bo.init(e,t),md.init(e,t)});const Dd=ki("ZodBase64URL",(e,t)=>{Ho.init(e,t),md.init(e,t)});const kd=ki("ZodE164",(e,t)=>{zo.init(e,t),md.init(e,t)});const Rd=ki("ZodJWT",(e,t)=>{Go.init(e,t),md.init(e,t)});const _d=ki("ZodNumber",(e,t)=>{var r,n,s,a,i,l,o,c,d;Vo.init(e,t),od.init(e,t),e.gt=(t,r)=>e.check(_c(t,r)),e.gte=(t,r)=>e.check(Ic(t,r)),e.min=(t,r)=>e.check(Ic(t,r)),e.lt=(t,r)=>e.check(kc(t,r)),e.lte=(t,r)=>e.check(Rc(t,r)),e.max=(t,r)=>e.check(Rc(t,r)),e.int=t=>e.check(Pd(t)),e.safe=t=>e.check(Pd(t)),e.positive=t=>e.check(_c(0,t)),e.nonnegative=t=>e.check(Ic(0,t)),e.negative=t=>e.check(kc(0,t)),e.nonpositive=t=>e.check(Rc(0,t)),e.multipleOf=(t,r)=>e.check(Pc(t,r)),e.step=(t,r)=>e.check(Pc(t,r)),e.finite=()=>e;const u=e._zod.bag;e.minValue=null!==(r=Math.max(null!==(n=u.minimum)&&void 0!==n?n:Number.NEGATIVE_INFINITY,null!==(s=u.exclusiveMinimum)&&void 0!==s?s:Number.NEGATIVE_INFINITY))&&void 0!==r?r:null,e.maxValue=null!==(a=Math.min(null!==(i=u.maximum)&&void 0!==i?i:Number.POSITIVE_INFINITY,null!==(l=u.exclusiveMaximum)&&void 0!==l?l:Number.POSITIVE_INFINITY))&&void 0!==a?a:null,e.isInt=(null!==(o=u.format)&&void 0!==o?o:"").includes("int")||Number.isSafeInteger(null!==(c=u.multipleOf)&&void 0!==c?c:.5),e.isFinite=!0,e.format=null!==(d=u.format)&&void 0!==d?d:null});const Id=ki("ZodNumberFormat",(e,t)=>{Wo.init(e,t),_d.init(e,t)});function Pd(e){return function(e,t){return new e((0,s.A)({type:"number",check:"number_format",abort:!1,format:"safeint"},Qi(t)))}(Id,e)}const Od=ki("ZodBoolean",(e,t)=>{qo.init(e,t),od.init(e,t)});function Ld(e){return function(e,t){return new e((0,s.A)({type:"boolean"},Qi(t)))}(Od,e)}const Fd=ki("ZodUnknown",(e,t)=>{$o.init(e,t),od.init(e,t)});function Md(){return function(e){return new e({type:"unknown"})}(Fd)}const Ud=ki("ZodNever",(e,t)=>{Ko.init(e,t),od.init(e,t)});function Bd(e){return function(e,t){return new e((0,s.A)({type:"never"},Qi(t)))}(Ud,e)}const Hd=ki("ZodArray",(e,t)=>{Yo.init(e,t),od.init(e,t),e.element=t.element,e.min=(t,r)=>e.check(Lc(t,r)),e.nonempty=t=>e.check(Lc(1,t)),e.max=(t,r)=>e.check(Oc(t,r)),e.length=(t,r)=>e.check(Fc(t,r)),e.unwrap=()=>e.element});function zd(e,t){return function(e,t,r){return new e((0,s.A)({type:"array",element:t},Qi(r)))}(Hd,e,t)}const Gd=ki("ZodObject",(e,t)=>{tc.init(e,t),od.init(e,t),Hi(e,"shape",()=>t.shape),e.keyof=()=>Xd(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone((0,s.A)((0,s.A)({},e._zod.def),{},{catchall:t})),e.passthrough=()=>e.clone((0,s.A)((0,s.A)({},e._zod.def),{},{catchall:Md()})),e.loose=()=>e.clone((0,s.A)((0,s.A)({},e._zod.def),{},{catchall:Md()})),e.strict=()=>e.clone((0,s.A)((0,s.A)({},e._zod.def),{},{catchall:Bd()})),e.strip=()=>e.clone((0,s.A)((0,s.A)({},e._zod.def),{},{catchall:void 0})),e.extend=t=>function(e,t){if(!Ki(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const n=Gi(e._zod.def,{get shape(){const r=(0,s.A)((0,s.A)({},e._zod.def.shape),t);return zi(this,"shape",r),r},checks:[]});return Zi(e,n)}(e,t),e.safeExtend=t=>function(e,t){if(!Ki(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r=(0,s.A)((0,s.A)({},e._zod.def),{},{get shape(){const r=(0,s.A)((0,s.A)({},e._zod.def.shape),t);return zi(this,"shape",r),r},checks:e._zod.def.checks});return Zi(e,r)}(e,t),e.merge=t=>function(e,t){const r=Gi(e._zod.def,{get shape(){const r=(0,s.A)((0,s.A)({},e._zod.def.shape),t._zod.def.shape);return zi(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return Zi(e,r)}(e,t),e.pick=t=>function(e,t){const r=e._zod.def;return Zi(e,Gi(e._zod.def,{get shape(){const e={};for(const n in t){if(!(n in r.shape))throw new Error('Unrecognized key: "'.concat(n,'"'));t[n]&&(e[n]=r.shape[n])}return zi(this,"shape",e),e},checks:[]}))}(e,t),e.omit=t=>function(e,t){const r=e._zod.def,n=Gi(e._zod.def,{get shape(){const n=(0,s.A)({},e._zod.def.shape);for(const e in t){if(!(e in r.shape))throw new Error('Unrecognized key: "'.concat(e,'"'));t[e]&&delete n[e]}return zi(this,"shape",n),n},checks:[]});return Zi(e,n)}(e,t),e.partial=function(){return function(e,t,r){const n=Gi(t._zod.def,{get shape(){const n=t._zod.def.shape,a=(0,s.A)({},n);if(r)for(const t in r){if(!(t in n))throw new Error('Unrecognized key: "'.concat(t,'"'));r[t]&&(a[t]=e?new e({type:"optional",innerType:n[t]}):n[t])}else for(const t in n)a[t]=e?new e({type:"optional",innerType:n[t]}):n[t];return zi(this,"shape",a),a},checks:[]});return Zi(t,n)}(Qd,e,arguments.length<=0?void 0:arguments[0])},e.required=function(){return function(e,t,r){const n=Gi(t._zod.def,{get shape(){const n=t._zod.def.shape,a=(0,s.A)({},n);if(r)for(const t in r){if(!(t in a))throw new Error('Unrecognized key: "'.concat(t,'"'));r[t]&&(a[t]=new e({type:"nonoptional",innerType:n[t]}))}else for(const t in n)a[t]=new e({type:"nonoptional",innerType:n[t]});return zi(this,"shape",a),a},checks:[]});return Zi(t,n)}(au,e,arguments.length<=0?void 0:arguments[0])}});function Vd(e,t){const r=(0,s.A)({type:"object",shape:null!==e&&void 0!==e?e:{}},Qi(t));return new Gd(r)}const Wd=ki("ZodUnion",(e,t)=>{nc.init(e,t),od.init(e,t),e.options=t.options});function qd(e,t){return new Wd((0,s.A)({type:"union",options:e},Qi(t)))}const $d=ki("ZodIntersection",(e,t)=>{sc.init(e,t),od.init(e,t)});const Kd=ki("ZodEnum",(e,t)=>{lc.init(e,t),od.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(e,n)=>{const a={};for(const s of e){if(!r.has(s))throw new Error("Key ".concat(s," not found in enum"));a[s]=t.entries[s]}return new Kd((0,s.A)((0,s.A)((0,s.A)({},t),{},{checks:[]},Qi(n)),{},{entries:a}))},e.exclude=(e,n)=>{const a=(0,s.A)({},t.entries);for(const t of e){if(!r.has(t))throw new Error("Key ".concat(t," not found in enum"));delete a[t]}return new Kd((0,s.A)((0,s.A)((0,s.A)({},t),{},{checks:[]},Qi(n)),{},{entries:a}))}});function Xd(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new Kd((0,s.A)({type:"enum",entries:r},Qi(t)))}function Yd(e,t){return new Kd((0,s.A)({type:"enum",entries:e},Qi(t)))}const Jd=ki("ZodTransform",(e,t)=>{oc.init(e,t),od.init(e,t),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new _i(e.constructor.name);r.addIssue=n=>{if("string"===typeof n)r.issues.push(ll(n,r.value,t));else{var s,a,i;const t=n;t.fatal&&(t.continue=!1),null!==(s=t.code)&&void 0!==s||(t.code="custom"),null!==(a=t.input)&&void 0!==a||(t.input=r.value),null!==(i=t.inst)&&void 0!==i||(t.inst=e),r.issues.push(ll(t))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(e=>(r.value=e,r)):(r.value=s,r)}});function Zd(e){return new Jd({type:"transform",transform:e})}const Qd=ki("ZodOptional",(e,t)=>{dc.init(e,t),od.init(e,t),e.unwrap=()=>e._zod.def.innerType});function eu(e){return new Qd({type:"optional",innerType:e})}const tu=ki("ZodNullable",(e,t)=>{uc.init(e,t),od.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ru(e){return new tu({type:"nullable",innerType:e})}const nu=ki("ZodDefault",(e,t)=>{mc.init(e,t),od.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});const su=ki("ZodPrefault",(e,t)=>{pc.init(e,t),od.init(e,t),e.unwrap=()=>e._zod.def.innerType});const au=ki("ZodNonOptional",(e,t)=>{xc.init(e,t),od.init(e,t),e.unwrap=()=>e._zod.def.innerType});const iu=ki("ZodCatch",(e,t)=>{gc.init(e,t),od.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});const lu=ki("ZodPipe",(e,t)=>{vc.init(e,t),od.init(e,t),e.in=t.in,e.out=t.out});function ou(e,t){return new lu({type:"pipe",in:e,out:t})}const cu=ki("ZodReadonly",(e,t)=>{bc.init(e,t),od.init(e,t),e.unwrap=()=>e._zod.def.innerType});const du=ki("ZodCustom",(e,t)=>{jc.init(e,t),od.init(e,t)});function uu(e,t){return ou(Zd(e),t)}var mu;function hu(e){return function(e,t){return new e((0,s.A)({type:"number",coerce:!0,checks:[]},Qi(t)))}(_d,e)}mu||(mu={}),Pi({localeError:Ac()});let pu=function(e){return e.Active="Active",e.Inactive="Inactive",e.UnderConstruction="UnderConstruction",e}({}),xu=function(e){return e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday",e}({});const fu=["Artibonite","Centre","Grand'Anse","Nippes","Nord","Nord-Est","Nord-Ouest","Ouest","Sud","Sud-Est"],gu={Ouest:["Port-au-Prince","Carrefour","Delmas","P\xe9tion-Ville","Tabarre","Cit\xe9 Soleil","Kenscoff","Gressier","L\xe9og\xe2ne","Grand-Go\xe2ve","Petit-Go\xe2ve","Arcahaie","Cabaret","Cornillon","Croix-des-Bouquets"],Artibonite:["Gona\xefves","Saint-Marc","Dessalines","Grande-Saline","L'Est\xe8re","Petite-Rivi\xe8re-de-l'Artibonite","Verrettes"],Nord:["Cap-Ha\xeftien","Fort-Dauphin","Grande-Rivi\xe8re-du-Nord","Quartier-Morin","Limonade","Plaine-du-Nord","Dondon","Saint-Rapha\xebl"],Sud:["Les Cayes","Aquin","Saint-Louis-du-Sud","Cavaillon","Port-Salut","Roche-\xe0-Bateau","Torbeck"],Centre:["Hinche","Mirebalais","Lascahobas","Bellad\xe8re","Savanette","Cerca-la-Source","Thomonde"],"Grand'Anse":["J\xe9r\xe9mie","Abricots","Anse-d'Hainault","Corail","Pestel","Roseaux","Beaumont"],Nippes:["Mirago\xe2ne","Petit-Trou-de-Nippes","Anse-\xe0-Veau","Arnaud","Barad\xe8res","Fond-des-N\xe8gres","Plaisance-du-Sud"],"Nord-Est":["Fort-Libert\xe9","Ouanaminthe","Terrier-Rouge","Capotille","Mont-Organis\xe9","Ferrier"],"Nord-Ouest":["Port-de-Paix","Jean-Rabel","M\xf4le-Saint-Nicolas","Bassin-Bleu","Bombardopolis","Chansolme"],"Sud-Est":["Jacmel","Cayes-Jacmel","Marigot","Bainet","C\xf4tes-de-Fer","La Vall\xe9e","Belle-Anse"]},vu=Vd({email:ud().email("Email invalide"),password:ud().min(6,"Le mot de passe doit contenir au moins 6 caract\xe8res"),rememberMe:Ld().optional()}),yu=(e,t)=>{let r=hu();return void 0!==e&&(r=r.min(e)),void 0!==t&&(r=r.max(t)),r},bu=/^(\+?509\s?)?[234579]\d{7}$/,Nu=Vd({name:ud().min(3,"Minimum 3 caract\xe8res").nonempty("Le nom de la succursale est requis"),code:ud().min(2,"Minimum 2 caract\xe8res").nonempty("Le code succursale est requis"),address:ud().nonempty("L'adresse est requise"),commune:ud().nonempty("La commune est requise"),department:ud().nonempty("Le d\xe9partement est requis"),phone1:ud().nonempty("Au moins un t\xe9l\xe9phone est requis").regex(bu,"Format de num\xe9ro ha\xeftien invalide"),phone2:ud().optional().default("").refine(e=>!e||bu.test(e),"Format de num\xe9ro ha\xeftien invalide"),phone3:ud().optional().default("").refine(e=>!e||bu.test(e),"Format de num\xe9ro ha\xeftien invalide"),email:ud().email("Email invalide"),openingDate:ud().nonempty("La date d'ouverture est requise"),managerId:ud().optional(),maxEmployees:yu(1,100),status:Yd(pu),dailyWithdrawalLimit:yu(0),dailyDepositLimit:yu(0),maxLocalCreditApproval:yu(0),minCashReserveHTG:yu(0),minCashReserveUSD:yu(0),openTime:ud().nonempty("Heure d'ouverture requise"),closeTime:ud().nonempty("Heure de fermeture requise"),closedDays:zd(Yd(xu)).optional().default([])});var ju=r(4414);const wu=t=>{let{onLogin:r}=t;const[n,a]=(0,e.useState)(!1),[i,l]=(0,e.useState)(!1),{register:o,handleSubmit:c,formState:{errors:d}}=ri({resolver:oi(vu),defaultValues:{email:"",password:"",rememberMe:!1}});return(0,ju.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-cyan-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-xl border border-gray-100",children:[(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)("div",{className:"mx-auto h-16 w-16 bg-primary-100 rounded-full flex items-center justify-center mb-4",children:(0,ju.jsx)(hi,{className:"h-8 w-8 text-primary-600"})}),(0,ju.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Nala Kredi Ti Machann"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"Connectez-vous \xe0 votre compte"})]}),(0,ju.jsxs)("form",{className:"space-y-6",onSubmit:c(async e=>{a(!0);try{var t;const n=await Di.login({email:e.email,password:e.password});console.log("Login response:",n),console.log("User data:",n.user),console.log("User role:",null===(t=n.user)||void 0===t?void 0:t.role),n&&n.token&&n.user?(Ts.success("Connexion r\xe9ussie !"),r(n.user,n.token)):Ts.error("Email ou mot de passe incorrect")}catch(Sc){console.error("Login error:",Sc),Ts.error("Email ou mot de passe incorrect")}finally{a(!1)}}),children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse email"}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,ju.jsx)(pi,{className:"h-5 w-5 text-gray-400"})}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},o("email")),{},{type:"email",autoComplete:"off",className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition duration-200",placeholder:"votre@email.com"}))]}),d.email&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.email.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,ju.jsx)(hi,{className:"h-5 w-5 text-gray-400"})}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},o("password")),{},{type:i?"text":"password",autoComplete:"off",className:"block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition duration-200",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})),(0,ju.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,ju.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-600 focus:outline-none",onClick:()=>l(!i),children:i?(0,ju.jsx)(xi,{className:"h-5 w-5"}):(0,ju.jsx)(fi,{className:"h-5 w-5"})})})]}),d.password&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.password.message})]}),(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)("input",(0,s.A)((0,s.A)({},o("rememberMe")),{},{id:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"})),(0,ju.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Se souvenir de moi"})]}),(0,ju.jsx)("div",{className:"text-sm",children:(0,ju.jsx)("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Mot de passe oubli\xe9 ?"})})]}),(0,ju.jsx)("div",{children:(0,ju.jsx)("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition duration-200",children:n?(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Connexion en cours..."]}):"Se connecter"})})]}),(0,ju.jsx)("div",{className:"text-center text-xs text-gray-500 mt-8",children:(0,ju.jsx)("p",{children:"\xa9 2025 Nala Kredi Ti Machann. Tous droits r\xe9serv\xe9s."})})]})})},Su=mi("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Au=mi("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Tu=mi("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Cu=mi("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Eu=mi("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Du=mi("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),ku=mi("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Ru=mi("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),_u={blue:"bg-blue-500 text-white",green:"bg-green-500 text-white",orange:"bg-orange-500 text-white",purple:"bg-purple-500 text-white",indigo:"bg-indigo-500 text-white",red:"bg-red-500 text-white"},Iu=e=>{let{title:t,value:r,icon:n,color:s,change:a,changeType:i="neutral"}=e;return(0,ju.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide mb-1",children:t}),(0,ju.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:r}),a&&(0,ju.jsx)("p",{className:"text-sm font-medium mt-1 ".concat("positive"===i?"text-green-600":"negative"===i?"text-red-600":"text-gray-600"),children:a})]}),(0,ju.jsx)("div",{className:"p-3 rounded-full ".concat(_u[s]),children:(0,ju.jsx)(n,{className:"w-6 h-6"})})]})})},Pu={success:"bg-green-600 hover:bg-green-700 text-white",warning:"bg-orange-600 hover:bg-orange-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white",primary:"bg-blue-600 hover:bg-blue-700 text-white",secondary:"bg-gray-600 hover:bg-gray-700 text-white"},Ou=e=>{let{actions:t}=e;return(0,ju.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actions Rapides"}),(0,ju.jsx)("div",{className:"space-y-3",children:t.map((e,t)=>(0,ju.jsxs)("button",{onClick:e.onClick,className:"w-full flex items-center justify-center px-4 py-3 rounded-lg font-medium transition-all duration-200 ".concat(Pu[e.color]),children:[(0,ju.jsx)(e.icon,{className:"w-5 h-5 mr-2"}),e.label]},t))})]})},Lu=mi("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),Fu=mi("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),Mu=()=>{const[t,r]=(0,e.useState)([]),[n,s]=(0,e.useState)(!0);(0,e.useEffect)(()=>{const e=[{id:1,type:"Deposit",amount:5e4,currency:"HTG",time:(new Date).toISOString(),customer:"Jean Baptiste",status:"Completed"},{id:2,type:"Withdrawal",amount:200,currency:"USD",time:new Date(Date.now()-3e5).toISOString(),customer:"Marie Joseph",status:"Completed"},{id:3,type:"CurrencyExchange",amount:100,currency:"USD",time:new Date(Date.now()-6e5).toISOString(),customer:"Pierre Michel",status:"Completed"}];setTimeout(()=>{r(e),s(!1)},1e3)},[]);const a=e=>{switch(e){case"Deposit":return(0,ju.jsx)(Lu,{className:"w-4 h-4 text-green-600"});case"Withdrawal":return(0,ju.jsx)(Fu,{className:"w-4 h-4 text-red-600"});default:return(0,ju.jsx)(Du,{className:"w-4 h-4 text-blue-600"})}},i=e=>{switch(e){case"Completed":return"text-green-600 bg-green-100";case"Pending":return"text-yellow-600 bg-yellow-100";case"Failed":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return(0,ju.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Cu,{className:"w-5 h-5 mr-2"}),"Transactions R\xe9centes"]}),n?(0,ju.jsx)("div",{className:"space-y-3",children:[...Array(3)].map((e,t)=>(0,ju.jsx)("div",{className:"animate-pulse",children:(0,ju.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ju.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,ju.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),(0,ju.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20"})]})},t))}):0===t.length?(0,ju.jsxs)("div",{className:"text-center py-8",children:[(0,ju.jsx)(Cu,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,ju.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Aucune transaction"}),(0,ju.jsx)("p",{className:"text-sm text-gray-500",children:"Les transactions r\xe9centes appara\xeetront ici"})]}):(0,ju.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,ju.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors duration-200",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ju.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:a(e.type)}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.customer}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:[e.type," \u2022 ",new Date(e.time).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]})]})]}),(0,ju.jsxs)("div",{className:"text-right",children:[(0,ju.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.amount.toLocaleString()," ",e.currency]}),(0,ju.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat(i(e.status)),children:e.status})]})]},e.id))}),t.length>0&&(0,ju.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,ju.jsx)("button",{className:"w-full text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Voir toutes les transactions"})})]})},Uu=()=>{const[t,r]=(0,e.useState)(null),[n,s]=(0,e.useState)(!0),[a,i]=(0,e.useState)(!1),l=async()=>{try{i(!0);const e=await Di.getCashierDashboard();r(e)}catch(Sc){Ts.error("Erreur lors du chargement du tableau de bord"),console.error("Dashboard load error:",Sc)}finally{s(!1),i(!1)}};(0,e.useEffect)(()=>{l();const e=setInterval(l,3e4);return()=>clearInterval(e)},[]);if(n)return(0,ju.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,ju.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})});if(!t)return(0,ju.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)(Su,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Erreur de chargement"}),(0,ju.jsx)("button",{onClick:l,className:"btn btn-primary",children:"R\xe9essayer"})]})});const o=[{label:"Nouveau D\xe9p\xf4t",icon:Au,color:"success",onClick:()=>{console.log("Navigate to deposit form")}},{label:"Retrait",icon:Tu,color:"warning",onClick:()=>{console.log("Navigate to withdrawal form")}},{label:"Open"===t.cashSessionStatus?"Fermer Session":"Ouvrir Session",icon:Cu,color:"Open"===t.cashSessionStatus?"danger":"success",onClick:"Open"===t.cashSessionStatus?async()=>{if(!t)return;const e=prompt("Solde de fermeture HTG:"),r=prompt("Solde de fermeture USD:"),n=prompt("Notes (optionnel):");if(null!==e&&null!==r)try{await Di.closeCashSession(parseFloat(e),parseFloat(r),n||void 0),Ts.success("Session de caisse ferm\xe9e avec succ\xe8s"),l()}catch(Sc){Ts.error("Erreur lors de la fermeture de la session")}}:async()=>{const e=prompt("Solde d'ouverture HTG:"),t=prompt("Solde d'ouverture USD:");if(null!==e&&null!==t)try{await Di.openCashSession(parseFloat(e),parseFloat(t)),Ts.success("Session de caisse ouverte avec succ\xe8s"),l()}catch(Sc){Ts.error("Erreur lors de l'ouverture de la session")}}}];return(0,ju.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ju.jsx)("div",{className:"bg-white shadow",children:(0,ju.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,ju.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Tableau de Bord - Caissier"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"Gestion des op\xe9rations de caisse"})]}),(0,ju.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ju.jsxs)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("Open"===t.cashSessionStatus?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:["Session: ",t.cashSessionStatus]}),(0,ju.jsxs)("button",{onClick:l,disabled:a,className:"btn btn-secondary",children:[(0,ju.jsx)(Eu,{className:"w-4 h-4 mr-2 ".concat(a?"animate-spin":"")}),"Actualiser"]})]})]})})}),(0,ju.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,ju.jsxs)("div",{className:"dashboard-grid mb-8",children:[(0,ju.jsx)(Iu,{title:"Solde Caisse HTG",value:"".concat(t.cashBalanceHTG.toLocaleString()," HTG"),icon:Du,color:"blue"}),(0,ju.jsx)(Iu,{title:"Solde Caisse USD",value:"$".concat(t.cashBalanceUSD.toLocaleString()),icon:Du,color:"green"}),(0,ju.jsx)(Iu,{title:"D\xe9p\xf4ts Aujourd'hui",value:"".concat(t.todayDeposits.toLocaleString()," HTG"),icon:ku,color:"green",change:"+".concat(t.transactionCount," transactions")}),(0,ju.jsx)(Iu,{title:"Retraits Aujourd'hui",value:"".concat(t.todayWithdrawals.toLocaleString()," HTG"),icon:Tu,color:"orange"}),(0,ju.jsx)(Iu,{title:"Changes Aujourd'hui",value:t.todayExchanges.toString(),icon:Eu,color:"purple"}),(0,ju.jsx)(Iu,{title:"Clients Servis",value:t.clientsServed.toString(),icon:Ru,color:"indigo"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,ju.jsx)("div",{className:"lg:col-span-1",children:(0,ju.jsx)(Ou,{actions:o})}),(0,ju.jsx)("div",{className:"lg:col-span-2",children:(0,ju.jsx)(Mu,{})})]}),(0,ju.jsx)("div",{className:"mt-8",children:(0,ju.jsxs)("div",{className:"card",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance du Jour"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:t.transactionCount}),(0,ju.jsx)("div",{className:"text-sm text-gray-600",children:"Transactions Totales"})]}),(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsxs)("div",{className:"text-2xl font-bold text-success-600",children:[((t.todayDeposits-t.todayWithdrawals)/1e3).toFixed(1),"K"]}),(0,ju.jsx)("div",{className:"text-sm text-gray-600",children:"Flux Net HTG"})]}),(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:t.lastTransactionTime?new Date(t.lastTransactionTime).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"Aucune"}),(0,ju.jsx)("div",{className:"text-sm text-gray-600",children:"Derni\xe8re Transaction"})]})]})]})})]})]})},Bu=mi("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Hu=mi("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),zu=mi("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Gu=mi("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Vu=mi("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Wu=mi("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),qu=()=>{const[t,r]=(0,e.useState)({totalClients:0,activeAccounts:0,pendingUpdates:0,recentDocuments:0}),[n,s]=(0,e.useState)([]),[a,i]=(0,e.useState)(!0),[l,o]=(0,e.useState)(""),[c,d]=(0,e.useState)(null),[u,m]=(0,e.useState)(!1);(0,e.useEffect)(()=>{h()},[]);const h=async()=>{try{i(!0);const e=await Di.getClientAccounts({status:"ACTIVE"});if(e&&Array.isArray(e)){const t=e.map(e=>({id:e.id,accountNumber:e.accountNumber,firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phoneNumber||"",email:e.email,accountType:e.accountType,accountStatus:e.accountStatus,balance:e.balance||0,openDate:e.openDate,lastUpdate:e.lastModifiedDate}));s(t),r({totalClients:t.length,activeAccounts:t.filter(e=>"Active"===e.accountStatus).length,pendingUpdates:t.filter(e=>e.lastUpdate&&new Date(e.lastUpdate)>new Date(Date.now()-6048e5)).length,recentDocuments:Math.floor(.3*t.length)})}}catch(Sc){console.error("Error loading dashboard:",Sc),Ts.error("Erreur lors du chargement des donn\xe9es")}finally{i(!1)}},p=e=>{Ts("Redirection vers le formulaire de mise \xe0 jour..."),window.location.href="/client-accounts?edit=".concat(e)},x=async e=>{try{switch(Ts.loading("G\xe9n\xe9ration du rapport en cours..."),e){case"clients":setTimeout(()=>{Ts.dismiss(),Ts.success("Rapport des clients g\xe9n\xe9r\xe9 avec succ\xe8s")},1500);break;case"accounts":setTimeout(()=>{Ts.dismiss(),Ts.success("Rapport des comptes g\xe9n\xe9r\xe9 avec succ\xe8s")},1500);break;case"history":setTimeout(()=>{Ts.dismiss(),Ts.success("Rapport historique g\xe9n\xe9r\xe9 avec succ\xe8s")},1500);break;default:Ts.dismiss(),Ts.error("Type de rapport non reconnu")}}catch(Sc){Ts.dismiss(),Ts.error("Erreur lors de la g\xe9n\xe9ration du rapport")}},f=n.filter(e=>""===l||e.accountNumber.toLowerCase().includes(l.toLowerCase())||e.firstName.toLowerCase().includes(l.toLowerCase())||e.lastName.toLowerCase().includes(l.toLowerCase())||e.phoneNumber.includes(l));return a?(0,ju.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,ju.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-teal-600"})}):(0,ju.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ju.jsx)("div",{className:"bg-gradient-to-r from-teal-600 to-cyan-600 text-white px-6 py-8",children:(0,ju.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"\ud83d\udccb Secr\xe9taire Administratif"}),(0,ju.jsx)("p",{className:"text-teal-100",children:"Consultation et gestion de la base clients"})]}),(0,ju.jsxs)("button",{onClick:h,className:"flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors",children:[(0,ju.jsx)(Eu,{className:"h-5 w-5"}),"Actualiser"]})]})})}),(0,ju.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-teal-500",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Total Clients"}),(0,ju.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:t.totalClients})]}),(0,ju.jsx)("div",{className:"bg-teal-100 rounded-full p-3",children:(0,ju.jsx)(Ru,{className:"h-8 w-8 text-teal-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Comptes Actifs"}),(0,ju.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:t.activeAccounts})]}),(0,ju.jsx)("div",{className:"bg-green-100 rounded-full p-3",children:(0,ju.jsx)(Bu,{className:"h-8 w-8 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Mises \xe0 jour (7j)"}),(0,ju.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:t.pendingUpdates})]}),(0,ju.jsx)("div",{className:"bg-blue-100 rounded-full p-3",children:(0,ju.jsx)(Cu,{className:"h-8 w-8 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Documents R\xe9cents"}),(0,ju.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:t.recentDocuments})]}),(0,ju.jsx)("div",{className:"bg-purple-100 rounded-full p-3",children:(0,ju.jsx)(Hu,{className:"h-8 w-8 text-purple-600"})})]})})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[(0,ju.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Actions Rapides"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ju.jsxs)("button",{onClick:()=>x("clients"),className:"flex items-center gap-3 p-4 bg-teal-50 hover:bg-teal-100 rounded-lg transition-colors group",children:[(0,ju.jsx)(zu,{className:"h-6 w-6 text-teal-600 group-hover:scale-110 transition-transform"}),(0,ju.jsxs)("div",{className:"text-left",children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:"Rapport Clients"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Liste compl\xe8te"})]})]}),(0,ju.jsxs)("button",{onClick:()=>x("accounts"),className:"flex items-center gap-3 p-4 bg-green-50 hover:bg-green-100 rounded-lg transition-colors group",children:[(0,ju.jsx)(Hu,{className:"h-6 w-6 text-green-600 group-hover:scale-110 transition-transform"}),(0,ju.jsxs)("div",{className:"text-left",children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:"Rapport Comptes"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Tous les comptes"})]})]}),(0,ju.jsxs)("button",{onClick:()=>x("history"),className:"flex items-center gap-3 p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors group",children:[(0,ju.jsx)(Gu,{className:"h-6 w-6 text-blue-600 group-hover:scale-110 transition-transform"}),(0,ju.jsxs)("div",{className:"text-left",children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:"Historique"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"30 derniers jours"})]})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ju.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Base de Clients"}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",{type:"text",placeholder:"Rechercher un client...",value:l,onChange:e=>o(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 w-80"})]})]}),0===f.length?(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)(Su,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"Aucun client trouv\xe9"})]}):(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N\xb0 Compte"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"T\xe9l\xe9phone"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type de Compte"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Solde"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.accountNumber}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ju.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),e.email&&(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.phoneNumber}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.accountType}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Active"===e.accountStatus?"bg-green-100 text-green-800":"Inactive"===e.accountStatus?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"),children:e.accountStatus})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Intl.NumberFormat("fr-HT",{style:"currency",currency:"HTG"}).format(e.balance)}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ju.jsxs)("div",{className:"flex gap-2",children:[(0,ju.jsx)("button",{onClick:()=>(async e=>{try{const t=n.find(t=>t.id===e);t&&(d(t),m(!0))}catch(Sc){Ts.error("Erreur lors de la consultation du client")}})(e.id),className:"text-teal-600 hover:text-teal-900",title:"Consulter",children:(0,ju.jsx)(fi,{className:"h-5 w-5"})}),(0,ju.jsx)("button",{onClick:()=>p(e.id),className:"text-blue-600 hover:text-blue-900",title:"Mettre \xe0 jour",children:(0,ju.jsx)(Wu,{className:"h-5 w-5"})})]})})]},e.id))})]})})]})]}),u&&c&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsxs)("div",{className:"bg-teal-600 text-white px-6 py-4 rounded-t-xl flex items-center justify-between",children:[(0,ju.jsx)("h3",{className:"text-xl font-bold",children:"D\xe9tails du Client"}),(0,ju.jsx)("button",{onClick:()=>m(!1),className:"text-white hover:text-gray-200",children:"\u2715"})]}),(0,ju.jsxs)("div",{className:"p-6",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"N\xb0 de Compte"}),(0,ju.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:c.accountNumber})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Nom Complet"}),(0,ju.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[c.firstName," ",c.lastName]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"T\xe9l\xe9phone"}),(0,ju.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:c.phoneNumber})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),(0,ju.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:c.email||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Type de Compte"}),(0,ju.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:c.accountType})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Statut"}),(0,ju.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:c.accountStatus})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Solde Actuel"}),(0,ju.jsx)("p",{className:"text-lg font-semibold text-green-600",children:new Intl.NumberFormat("fr-HT",{style:"currency",currency:"HTG"}).format(c.balance)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Date d'Ouverture"}),(0,ju.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:new Date(c.openDate).toLocaleDateString("fr-FR")})]})]}),(0,ju.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,ju.jsx)("button",{onClick:()=>p(c.id),className:"flex-1 bg-teal-600 text-white px-4 py-2 rounded-lg hover:bg-teal-700 transition-colors",children:"Mettre \xe0 Jour"}),(0,ju.jsx)("button",{onClick:()=>m(!1),className:"flex-1 bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"Fermer"})]})]})]})})]})},$u=()=>(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Dashboard Agent de Cr\xe9dit"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"G\xe9rez les demandes de cr\xe9dit et suivez les remboursements"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ju.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,ju.jsx)("div",{className:"p-5",children:(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)("div",{className:"flex-shrink-0",children:(0,ju.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:(0,ju.jsx)("span",{className:"text-white text-sm font-medium",children:"D"})})}),(0,ju.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,ju.jsxs)("dl",{children:[(0,ju.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Demandes en attente"}),(0,ju.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:"12"})]})})]})})}),(0,ju.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,ju.jsx)("div",{className:"p-5",children:(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)("div",{className:"flex-shrink-0",children:(0,ju.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center",children:(0,ju.jsx)("span",{className:"text-white text-sm font-medium",children:"A"})})}),(0,ju.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,ju.jsxs)("dl",{children:[(0,ju.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Cr\xe9dits approuv\xe9s"}),(0,ju.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:"45"})]})})]})})}),(0,ju.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,ju.jsx)("div",{className:"p-5",children:(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)("div",{className:"flex-shrink-0",children:(0,ju.jsx)("div",{className:"w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center",children:(0,ju.jsx)("span",{className:"text-white text-sm font-medium",children:"R"})})}),(0,ju.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,ju.jsxs)("dl",{children:[(0,ju.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Remboursements"}),(0,ju.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:"156,000 HTG"})]})})]})})}),(0,ju.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,ju.jsx)("div",{className:"p-5",children:(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)("div",{className:"flex-shrink-0",children:(0,ju.jsx)("div",{className:"w-8 h-8 bg-red-500 rounded-md flex items-center justify-center",children:(0,ju.jsx)("span",{className:"text-white text-sm font-medium",children:"R"})})}),(0,ju.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,ju.jsxs)("dl",{children:[(0,ju.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Retards"}),(0,ju.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:"3"})]})})]})})})]}),(0,ju.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,ju.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,ju.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Demandes de cr\xe9dit r\xe9centes"}),(0,ju.jsx)("div",{className:"overflow-hidden",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Marie Dupont"}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"25,000 HTG"}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"En attente"})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"2025-10-05"})]})})]})})]})})]}),Ku=mi("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Xu=mi("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Yu=mi("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Ju=mi("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Zu=e=>{let t;const r=new Set,n=(e,n)=>{const s="function"===typeof e?e(t):e;if(!Object.is(s,t)){const e=t;t=(null!=n?n:"object"!==typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,a={setState:n,getState:s,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e))},i=t=e(n,s,a);return a},Qu=e=>e;const em=t=>{const r=(e=>e?Zu(e):Zu)(t),n=t=>function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qu;const n=e.useSyncExternalStore(t.subscribe,e.useCallback(()=>r(t.getState()),[t,r]),e.useCallback(()=>r(t.getInitialState()),[t,r]));return e.useDebugValue(n),n}(r,t);return Object.assign(n,r),n},tm=e=>e?em(e):em,rm=tm(e=>({user:null,token:null,loading:!0,setAuth:(t,r)=>{Di.setAuthToken(r),Di.setCurrentUser(t),e({user:t,token:r})},clearAuth:()=>{try{Di.removeAuthToken()}catch(t){}e({user:null,token:null})},hydrate:async()=>{const t=Di.getAuthToken(),r=Di.getCurrentUser();if(t&&r)try{const r=await Di.getProfile();return Di.setCurrentUser(r),void e({user:r,token:t,loading:!1})}catch(n){try{Di.removeAuthToken()}catch(s){}}e({user:null,token:null,loading:!1})}})),nm=()=>{const[t,r]=(0,e.useState)({todayTransactions:0,todayVolume:0,activeEmployees:0,activeCredits:0,pendingValidations:0,portfolioValue:0,monthlyPerformance:0,cashBalance:0}),[n,s]=(0,e.useState)([]),[a,i]=(0,e.useState)([]),[l,o]=(0,e.useState)({totalLoans:0,activeLoans:0,totalDisbursed:0,totalOutstanding:0,paymentsThisMonth:0,overdueLoans:0,averageTicket:0,portfolioAtRisk:0}),[c,d]=(0,e.useState)(!0),[u,m]=(0,e.useState)("dashboard");(0,e.useEffect)(()=>{h()},[]);const h=async()=>{try{d(!0);const e=await Di.getBranchSupervisorDashboard();e&&r({todayTransactions:e.todayTransactionCount||0,todayVolume:e.todayTransactionVolume||0,activeEmployees:e.activeCashiers||0,activeCredits:e.activeCredits||0,pendingValidations:e.pendingCreditApprovals||0,portfolioValue:e.branchCreditPortfolio||0,monthlyPerformance:e.averageTransactionTime||0,cashBalance:e.todayTransactionVolume||0});const t=rm.getState().user;if(null!==t&&void 0!==t&&t.branchId){const e=await Di.getRecentTransactions(t.branchId,10);s(e||[])}if(null!==t&&void 0!==t&&t.branchId){const e=await Di.getPendingAccounts(t.branchId);i(e||[])}o({totalLoans:156,activeLoans:142,totalDisbursed:875e4,totalOutstanding:624e4,paymentsThisMonth:45,overdueLoans:8,averageTicket:55e3,portfolioAtRisk:2.8})}catch(Sc){console.error("Error loading dashboard:",Sc),Ts.error("Erreur lors du chargement des donn\xe9es")}finally{d(!1)}},p=async(e,t)=>{try{t?Ts.success("Compte approuv\xe9 avec succ\xe8s"):Ts.error("Compte rejet\xe9"),h()}catch(Sc){Ts.error("Erreur lors de la validation")}},x=async e=>{try{Ts.loading("G\xe9n\xe9ration du rapport en cours..."),setTimeout(()=>{Ts.dismiss(),Ts.success("Rapport ".concat(e," g\xe9n\xe9r\xe9 avec succ\xe8s"))},1500)}catch(Sc){Ts.dismiss(),Ts.error("Erreur lors de la g\xe9n\xe9ration du rapport")}};return c?(0,ju.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,ju.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-600"})}):(0,ju.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ju.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-8",children:(0,ju.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[(0,ju.jsx)(Ku,{className:"h-8 w-8"}),"Chef de Succursale"]}),(0,ju.jsx)("p",{className:"text-green-100",children:"Supervision et gestion de la succursale"})]}),(0,ju.jsxs)("button",{onClick:h,className:"flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors",children:[(0,ju.jsx)(Eu,{className:"h-5 w-5"}),"Actualiser"]})]})})}),(0,ju.jsx)("div",{className:"bg-white border-b",children:(0,ju.jsx)("div",{className:"max-w-7xl mx-auto px-6",children:(0,ju.jsxs)("nav",{className:"flex gap-6",children:[(0,ju.jsx)("button",{onClick:()=>m("dashboard"),className:"py-4 px-2 border-b-2 font-medium transition-colors ".concat("dashboard"===u?"border-green-600 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Tableau de Bord"}),(0,ju.jsx)("button",{onClick:()=>m("transactions"),className:"py-4 px-2 border-b-2 font-medium transition-colors ".concat("transactions"===u?"border-green-600 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Historique Transactions"}),(0,ju.jsx)("button",{onClick:()=>m("portfolio"),className:"py-4 px-2 border-b-2 font-medium transition-colors ".concat("portfolio"===u?"border-green-600 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Portefeuille Cr\xe9dit"}),(0,ju.jsxs)("button",{onClick:()=>m("validations"),className:"py-4 px-2 border-b-2 font-medium transition-colors ".concat("validations"===u?"border-green-600 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"),children:["Validations (",a.length,")"]}),(0,ju.jsx)("button",{onClick:()=>m("reports"),className:"py-4 px-2 border-b-2 font-medium transition-colors ".concat("reports"===u?"border-green-600 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Rapports"})]})})}),(0,ju.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:["dashboard"===u&&(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Transactions Aujourd'hui"}),(0,ju.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:t.todayTransactions}),(0,ju.jsxs)("p",{className:"text-sm text-green-600 mt-1 flex items-center gap-1",children:[(0,ju.jsx)(Lu,{className:"h-4 w-4"}),"+12% vs hier"]})]}),(0,ju.jsx)("div",{className:"bg-green-100 rounded-full p-3",children:(0,ju.jsx)(Xu,{className:"h-8 w-8 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Volume du Jour"}),(0,ju.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:new Intl.NumberFormat("fr-HT",{style:"currency",currency:"HTG",maximumFractionDigits:0}).format(t.todayVolume)}),(0,ju.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"HTG"})]}),(0,ju.jsx)("div",{className:"bg-blue-100 rounded-full p-3",children:(0,ju.jsx)(Du,{className:"h-8 w-8 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Employ\xe9s Actifs"}),(0,ju.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[t.activeEmployees,"/12"]}),(0,ju.jsx)("p",{className:"text-sm text-purple-600 mt-1",children:"En service"})]}),(0,ju.jsx)("div",{className:"bg-purple-100 rounded-full p-3",children:(0,ju.jsx)(Ru,{className:"h-8 w-8 text-purple-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-orange-500",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Cr\xe9dits Actifs"}),(0,ju.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:l.activeLoans}),(0,ju.jsxs)("p",{className:"text-sm text-orange-600 mt-1",children:[l.overdueLoans," en retard"]})]}),(0,ju.jsx)("div",{className:"bg-orange-100 rounded-full p-3",children:(0,ju.jsx)(Tu,{className:"h-8 w-8 text-orange-600"})})]})})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Validations en Attente"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:t.pendingValidations})]}),(0,ju.jsx)(Su,{className:"h-6 w-6 text-yellow-600"})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Portefeuille Cr\xe9dit"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:new Intl.NumberFormat("fr-HT",{style:"currency",currency:"HTG",maximumFractionDigits:0}).format(l.totalOutstanding)})]}),(0,ju.jsx)(ku,{className:"h-6 w-6 text-green-600"})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Performance Mensuelle"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:"92%"})]}),(0,ju.jsx)(Yu,{className:"h-6 w-6 text-blue-600"})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Temps Moyen Transaction"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:"3.5 min"})]}),(0,ju.jsx)(Cu,{className:"h-6 w-6 text-purple-600"})]})})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,ju.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Derni\xe8res Transactions"}),(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Caissier"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Heure"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.slice(0,5).map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.type}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.clientName}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.cashier}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:new Intl.NumberFormat("fr-HT",{style:"currency",currency:e.currency}).format(e.amount)}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(e.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:e.status})})]},e.id))})]})})]})]}),"transactions"===u&&(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,ju.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Historique des Transactions"}),(0,ju.jsxs)("div",{className:"mb-4 flex gap-4",children:[(0,ju.jsx)("input",{type:"date",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),(0,ju.jsxs)("select",{className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[(0,ju.jsx)("option",{children:"Tous les types"}),(0,ju.jsx)("option",{children:"D\xe9p\xf4ts"}),(0,ju.jsx)("option",{children:"Retraits"}),(0,ju.jsx)("option",{children:"Paiements"})]}),(0,ju.jsx)("button",{className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Filtrer"})]}),(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date/Heure"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["#",e.id]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.type}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.clientName}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:new Intl.NumberFormat("fr-HT",{style:"currency",currency:e.currency}).format(e.amount)}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(e.timestamp).toLocaleString("fr-FR")}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,ju.jsx)("button",{className:"text-green-600 hover:text-green-900",children:(0,ju.jsx)(fi,{className:"h-5 w-5"})})})]},e.id))})]})})]}),"portfolio"===u&&(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Total Pr\xeats"}),(0,ju.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:l.totalLoans}),(0,ju.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[l.activeLoans," actifs"]})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Montant D\xe9caiss\xe9"}),(0,ju.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:new Intl.NumberFormat("fr-HT",{style:"currency",currency:"HTG",maximumFractionDigits:0}).format(l.totalDisbursed)})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Encours Total"}),(0,ju.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:new Intl.NumberFormat("fr-HT",{style:"currency",currency:"HTG",maximumFractionDigits:0}).format(l.totalOutstanding)})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,ju.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"PAR 30"}),(0,ju.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[l.portfolioAtRisk,"%"]}),(0,ju.jsxs)("p",{className:"text-sm text-red-600 mt-1",children:[l.overdueLoans," en retard"]})]})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,ju.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"D\xe9tails du Portefeuille"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,ju.jsx)("span",{className:"text-gray-700",children:"Paiements ce mois"}),(0,ju.jsx)("span",{className:"font-bold text-gray-900",children:l.paymentsThisMonth})]}),(0,ju.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,ju.jsx)("span",{className:"text-gray-700",children:"Ticket moyen"}),(0,ju.jsx)("span",{className:"font-bold text-gray-900",children:new Intl.NumberFormat("fr-HT",{style:"currency",currency:"HTG"}).format(l.averageTicket)})]})]}),(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"flex justify-between items-center p-4 bg-green-50 rounded-lg",children:[(0,ju.jsx)("span",{className:"text-green-700",children:"Taux de recouvrement"}),(0,ju.jsx)("span",{className:"font-bold text-green-900",children:"95.2%"})]}),(0,ju.jsxs)("div",{className:"flex justify-between items-center p-4 bg-blue-50 rounded-lg",children:[(0,ju.jsx)("span",{className:"text-blue-700",children:"Nouveaux pr\xeats (30j)"}),(0,ju.jsx)("span",{className:"font-bold text-blue-900",children:"23"})]})]})]})]})]}),"validations"===u&&(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,ju.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:["Comptes en Attente de Validation (",a.length,")"]}),0===a.length?(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)(Ju,{className:"mx-auto h-12 w-12 text-green-500 mb-4"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"Aucun compte en attente de validation"})]}):(0,ju.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,ju.jsx)("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:(0,ju.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.clientName}),(0,ju.jsx)("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-sm font-medium rounded-full",children:"En attente"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600",children:"N\xb0 de Compte"}),(0,ju.jsx)("p",{className:"font-medium text-gray-900",children:e.accountNumber})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600",children:"Type de Compte"}),(0,ju.jsx)("p",{className:"font-medium text-gray-900",children:e.accountType})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600",children:"Soumis par"}),(0,ju.jsx)("p",{className:"font-medium text-gray-900",children:e.submittedBy})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600",children:"Date de soumission"}),(0,ju.jsx)("p",{className:"font-medium text-gray-900",children:new Date(e.submittedDate).toLocaleDateString("fr-FR")})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600",children:"D\xe9p\xf4t Initial"}),(0,ju.jsx)("p",{className:"font-medium text-green-600",children:new Intl.NumberFormat("fr-HT",{style:"currency",currency:"HTG"}).format(e.amount)})]})]})]}),(0,ju.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,ju.jsxs)("button",{onClick:()=>p(e.id,!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,ju.jsx)(Ju,{className:"h-5 w-5"}),"Approuver"]}),(0,ju.jsxs)("button",{onClick:()=>p(e.id,!1),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2",children:[(0,ju.jsx)(Su,{className:"h-5 w-5"}),"Rejeter"]})]})]})},e.id))})]}),"reports"===u&&(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,ju.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Rapports de Performance"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,ju.jsxs)("button",{onClick:()=>x("Rapport Quotidien"),className:"p-6 border-2 border-gray-200 rounded-xl hover:border-green-500 hover:shadow-lg transition-all group",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsx)("div",{className:"bg-green-100 rounded-full p-3 group-hover:bg-green-200",children:(0,ju.jsx)(Hu,{className:"h-8 w-8 text-green-600"})}),(0,ju.jsxs)("div",{className:"text-left",children:[(0,ju.jsx)("h3",{className:"font-semibold text-gray-900",children:"Rapport Quotidien"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Activit\xe9s du jour"})]})]}),(0,ju.jsx)("div",{className:"mt-4 flex justify-end",children:(0,ju.jsx)(zu,{className:"h-5 w-5 text-gray-400 group-hover:text-green-600"})})]}),(0,ju.jsxs)("button",{onClick:()=>x("Rapport Hebdomadaire"),className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:shadow-lg transition-all group",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsx)("div",{className:"bg-blue-100 rounded-full p-3 group-hover:bg-blue-200",children:(0,ju.jsx)(Yu,{className:"h-8 w-8 text-blue-600"})}),(0,ju.jsxs)("div",{className:"text-left",children:[(0,ju.jsx)("h3",{className:"font-semibold text-gray-900",children:"Rapport Hebdomadaire"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"7 derniers jours"})]})]}),(0,ju.jsx)("div",{className:"mt-4 flex justify-end",children:(0,ju.jsx)(zu,{className:"h-5 w-5 text-gray-400 group-hover:text-blue-600"})})]}),(0,ju.jsxs)("button",{onClick:()=>x("Rapport Mensuel"),className:"p-6 border-2 border-gray-200 rounded-xl hover:border-purple-500 hover:shadow-lg transition-all group",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsx)("div",{className:"bg-purple-100 rounded-full p-3 group-hover:bg-purple-200",children:(0,ju.jsx)(ku,{className:"h-8 w-8 text-purple-600"})}),(0,ju.jsxs)("div",{className:"text-left",children:[(0,ju.jsx)("h3",{className:"font-semibold text-gray-900",children:"Rapport Mensuel"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Performance globale"})]})]}),(0,ju.jsx)("div",{className:"mt-4 flex justify-end",children:(0,ju.jsx)(zu,{className:"h-5 w-5 text-gray-400 group-hover:text-purple-600"})})]}),(0,ju.jsxs)("button",{onClick:()=>x("Rapport Transactions"),className:"p-6 border-2 border-gray-200 rounded-xl hover:border-orange-500 hover:shadow-lg transition-all group",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsx)("div",{className:"bg-orange-100 rounded-full p-3 group-hover:bg-orange-200",children:(0,ju.jsx)(Xu,{className:"h-8 w-8 text-orange-600"})}),(0,ju.jsxs)("div",{className:"text-left",children:[(0,ju.jsx)("h3",{className:"font-semibold text-gray-900",children:"Rapport Transactions"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"D\xe9tails complets"})]})]}),(0,ju.jsx)("div",{className:"mt-4 flex justify-end",children:(0,ju.jsx)(zu,{className:"h-5 w-5 text-gray-400 group-hover:text-orange-600"})})]}),(0,ju.jsxs)("button",{onClick:()=>x("Rapport Portefeuille"),className:"p-6 border-2 border-gray-200 rounded-xl hover:border-teal-500 hover:shadow-lg transition-all group",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsx)("div",{className:"bg-teal-100 rounded-full p-3 group-hover:bg-teal-200",children:(0,ju.jsx)(Tu,{className:"h-8 w-8 text-teal-600"})}),(0,ju.jsxs)("div",{className:"text-left",children:[(0,ju.jsx)("h3",{className:"font-semibold text-gray-900",children:"Rapport Portefeuille"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Cr\xe9dits et encours"})]})]}),(0,ju.jsx)("div",{className:"mt-4 flex justify-end",children:(0,ju.jsx)(zu,{className:"h-5 w-5 text-gray-400 group-hover:text-teal-600"})})]}),(0,ju.jsxs)("button",{onClick:()=>x("Rapport Performance"),className:"p-6 border-2 border-gray-200 rounded-xl hover:border-indigo-500 hover:shadow-lg transition-all group",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsx)("div",{className:"bg-indigo-100 rounded-full p-3 group-hover:bg-indigo-200",children:(0,ju.jsx)(Bu,{className:"h-8 w-8 text-indigo-600"})}),(0,ju.jsxs)("div",{className:"text-left",children:[(0,ju.jsx)("h3",{className:"font-semibold text-gray-900",children:"Rapport Performance"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"\xc9quipe et KPIs"})]})]}),(0,ju.jsx)("div",{className:"mt-4 flex justify-end",children:(0,ju.jsx)(zu,{className:"h-5 w-5 text-gray-400 group-hover:text-indigo-600"})})]})]})]})]})]})},sm=()=>(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Dashboard Manager R\xe9gional"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Vue d'ensemble r\xe9gionale"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ju.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Succursales"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"12"})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ju.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Volume r\xe9gional"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"15.2M HTG"})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ju.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Employ\xe9s"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"96"})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ju.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Performance"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"94%"})]})]})]}),am=()=>(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Dashboard Administrateur Syst\xe8me"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Administration et maintenance du syst\xe8me"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ju.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Serveurs actifs"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"3"})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ju.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Utilisateurs connect\xe9s"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"47"})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ju.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Taille de la DB"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"2.4 GB"})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ju.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Sauvegardes"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"Jour"})]})]})]}),im=()=>(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Dashboard Comptabilit\xe9"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Gestion financi\xe8re et comptable"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ju.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Revenus du mois"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"892,340 HTG"})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ju.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"D\xe9penses"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"156,780 HTG"})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ju.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"B\xe9n\xe9fice net"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"735,560 HTG"})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ju.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Marge"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"82.4%"})]})]})]}),lm=mi("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),om=mi("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),cm=mi("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),dm=mi("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),um=mi("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),mm=mi("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),hm=mi("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),pm=mi("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),xm=mi("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),fm=mi("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),gm=mi("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),vm=mi("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ym=mi("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),bm=mi("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Nm=tm((e,t)=>({globalLoading:!1,setGlobalLoading:t=>e({globalLoading:t}),withGlobalLoading:async e=>{const{setGlobalLoading:r}=t();r(!0);try{return await e()}finally{r(!1)}}}));let jm=function(e){return e.HTG="HTG",e.USD="USD",e}({}),wm=function(e){return e.CIN="CIN",e.PASSPORT="PASSPORT",e.DRIVING_LICENSE="DRIVING_LICENSE",e.BIRTH_CERTIFICATE="BIRTH_CERTIFICATE",e}({});const Sm=["Artibonite","Centre","Grand'Anse","Nippes","Nord","Nord-Est","Nord-Ouest","Ouest","Sud","Sud-Est"],Am={Ouest:["Port-au-Prince","Delmas","Tabarre","P\xe9tion-Ville","Carrefour","Gressier","L\xe9og\xe2ne","Grand-Go\xe2ve"],Artibonite:["Gona\xefves","Saint-Marc","Dessalines","Petite-Rivi\xe8re-de-l'Artibonite","Verrettes"],Nord:["Cap-Ha\xeftien","Fort-Dauphin","Ouanaminthe","Dondon","Milot"],Sud:["Cayes","Aquin","Saint-Louis-du-Sud","Cavaillon","Port-Salut"],Centre:["Hinche","Mirebalais","Lascahobas","Cerca-la-Source","Thomassique"],"Grand'Anse":["J\xe9r\xe9mie","Dame-Marie","Anse-d'Hainault","Corail","Pestel"],Nippes:["Mirago\xe2ne","Petit-Go\xe2ve","Anse-\xe0-Veau","Barad\xe8res","Plaisance-du-Sud"],"Nord-Est":["Fort-Dauphin","Trou-du-Nord","Sainte-Suzanne","Terrier-Rouge","Mombin-Crochu"],"Nord-Ouest":["Port-de-Paix","Jean-Rabel","M\xf4le-Saint-Nicolas","Bombardopolis","Bassin-Bleu"],"Sud-Est":["Jacmel","Cayes-Jacmel","Marigot","Bainet","Belle-Anse"]},Tm=(jm.HTG,jm.USD,jm.HTG,jm.USD,jm.HTG,jm.USD,jm.HTG,jm.USD,mi("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]])),Cm=mi("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Em=mi("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Dm=mi("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),km=t=>{let{onSave:r,onCancel:n}=t;const s=(0,e.useRef)(null),[a,i]=(0,e.useState)(!1),[l,o]=(0,e.useState)(!0);(0,e.useEffect)(()=>{const e=s.current;if(!e)return;const t=e.getContext("2d");t&&(t.lineCap="round",t.lineJoin="round",t.strokeStyle="#000000",t.lineWidth=2,t.fillStyle="#FFFFFF",t.fillRect(0,0,e.width,e.height))},[]);const c=e=>{const t=s.current;if(!t)return;const r=t.getContext("2d");if(!r)return;i(!0),o(!1);const n=t.getBoundingClientRect();let a,l;"touches"in e?(a=e.touches[0].clientX-n.left,l=e.touches[0].clientY-n.top):(a=e.clientX-n.left,l=e.clientY-n.top),r.beginPath(),r.moveTo(a,l)},d=e=>{if(!a)return;const t=s.current;if(!t)return;const r=t.getContext("2d");if(!r)return;const n=t.getBoundingClientRect();let i,l;"touches"in e?(i=e.touches[0].clientX-n.left,l=e.touches[0].clientY-n.top):(i=e.clientX-n.left,l=e.clientY-n.top),r.lineTo(i,l),r.stroke()},u=()=>{i(!1)};return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl max-w-2xl w-full",children:[(0,ju.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Signature Digitale"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Signez dans la zone ci-dessous (Siyen nan espas anba a)"})]}),(0,ju.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,ju.jsx)(vm,{className:"w-6 h-6"})})]}),(0,ju.jsxs)("div",{className:"p-6",children:[(0,ju.jsx)("div",{className:"border-4 border-dashed border-gray-300 rounded-lg overflow-hidden bg-white",children:(0,ju.jsx)("canvas",{ref:s,width:600,height:300,className:"touch-none cursor-crosshair w-full",onMouseDown:c,onMouseMove:d,onMouseUp:u,onMouseLeave:u,onTouchStart:c,onTouchMove:d,onTouchEnd:u})}),(0,ju.jsx)("p",{className:"text-center text-sm text-gray-500 mt-3",children:"Utilisez votre souris ou votre doigt pour signer"})]}),(0,ju.jsxs)("div",{className:"flex justify-between items-center p-6 border-t bg-gray-50",children:[(0,ju.jsxs)("button",{type:"button",onClick:()=>{const e=s.current;if(!e)return;const t=e.getContext("2d");t&&(t.fillStyle="#FFFFFF",t.fillRect(0,0,e.width,e.height),o(!0))},className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100",children:[(0,ju.jsx)(Em,{className:"w-4 h-4"}),(0,ju.jsx)("span",{children:"Effacer"})]}),(0,ju.jsxs)("div",{className:"flex space-x-3",children:[(0,ju.jsx)("button",{type:"button",onClick:n,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100",children:"Annuler"}),(0,ju.jsxs)("button",{type:"button",onClick:()=>{const e=s.current;if(!e)return;if(l)return void alert("Veuillez signer avant de sauvegarder");const t=e.toDataURL("image/png");r(t)},disabled:l,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,ju.jsx)(Tm,{className:"w-4 h-4"}),(0,ju.jsx)("span",{children:"Sauvegarder"})]})]})]})]})})},Rm="/api";let _m=function(e){return e[e.Male=0]="Male",e[e.Female=1]="Female",e}({}),Im=function(e){return e[e.CIN=0]="CIN",e[e.Passport=1]="Passport",e[e.DrivingLicense=2]="DrivingLicense",e[e.BirthCertificate=3]="BirthCertificate",e}({}),Pm=function(e){return e[e.IdentityCard=0]="IdentityCard",e[e.ProofOfResidence=1]="ProofOfResidence",e[e.ProofOfIncome=2]="ProofOfIncome",e[e.Photo=3]="Photo",e[e.Other=4]="Other",e}({});class Om extends wi.BaseApiService{constructor(e){super("/api"),this.api.defaults.baseURL=e}async getJson(e,t){return this.get(e,t)}}const Lm=new class{constructor(){this.baseUrl="".concat(Rm,"/SavingsCustomer"),this.ro=void 0,this.ro=new Om(this.baseUrl)}normalizePhoneForApi(e){if(!e)return e;const t=(e||"").replace(/\D+/g,"");return e.startsWith("+509")&&11===t.length||10===t.length&&t.startsWith("509")?"+".concat(t):8===t.length?"+509".concat(t):e.startsWith("+")?e:"+".concat(t)}getAuthToken(){return localStorage.getItem("token")||""}getAuthHeaders(){return{headers:{Authorization:"Bearer ".concat(this.getAuthToken()),"Content-Type":"application/json"}}}normalizeCustomer(e){var t,r,n,s,a,i,l,o,c,d;if(!e)return e;e.Id&&!e.id&&(e.id=e.Id),e.CustomerCode&&!e.customerCode&&(e.customerCode=e.CustomerCode);const u=null!==(t=null!==(r=e.firstName)&&void 0!==r?r:e.FirstName)&&void 0!==t?t:"",m=null!==(n=null!==(s=e.lastName)&&void 0!==s?s:e.LastName)&&void 0!==n?n:"",h="".concat(u||""," ").concat(m||"").trim();e.fullName&&"undefined undefined"!==e.fullName&&" "!==e.fullName||(e.fullName=h);const p=e.address||{street:e.street||"",commune:e.commune||"",department:e.department||"",country:e.country||"Ha\xefti",postalCode:e.postalCode||void 0};e.address={street:p.street||e.street||"",commune:p.commune||e.commune||"",department:p.department||e.department||"",country:p.country||e.country||"Ha\xefti",postalCode:p.postalCode||e.postalCode||void 0};const x=e.contact||{primaryPhone:e.primaryPhone||"",secondaryPhone:e.secondaryPhone||void 0,email:e.email||void 0,emergencyContactName:e.emergencyContactName||void 0,emergencyContactPhone:e.emergencyContactPhone||void 0};e.contact={primaryPhone:x.primaryPhone||e.primaryPhone||"",secondaryPhone:x.secondaryPhone||e.secondaryPhone||void 0,email:x.email||e.email||void 0,emergencyContactName:x.emergencyContactName||e.emergencyContactName||void 0,emergencyContactPhone:x.emergencyContactPhone||e.emergencyContactPhone||void 0};const f=e.identity||{documentType:null!==(a=e.documentType)&&void 0!==a?a:0,documentNumber:e.documentNumber||"",issuedDate:e.issuedDate||"",expiryDate:e.expiryDate||void 0,issuingAuthority:e.issuingAuthority||""};e.identity={documentType:null!==(i=null!==(l=f.documentType)&&void 0!==l?l:e.documentType)&&void 0!==i?i:0,documentNumber:f.documentNumber||e.documentNumber||"",issuedDate:f.issuedDate||e.issuedDate||"",expiryDate:f.expiryDate||e.expiryDate||void 0,issuingAuthority:f.issuingAuthority||e.issuingAuthority||""},void 0!==e.isActive&&null!==e.isActive||(e.isActive=!0),e.createdAt=e.createdAt||(new Date).toISOString(),e.updatedAt=e.updatedAt||e.createdAt;var g,v,y;(e.gender=(e=>{if(void 0===e||null===e||""===e)return _m.Male;if("number"===typeof e)return 1===e?_m.Female:_m.Male;const t=String(e).trim().toLowerCase();if("m"===t||"male"===t||"masculin"===t||"gason"===t)return _m.Male;if("f"===t||"female"===t||"feminin"===t||"fanm"===t)return _m.Female;const r=Number(t);return isNaN(r)?_m.Male:1===r?_m.Female:_m.Male})(null!==(o=null!==(c=null!==(d=e.gender)&&void 0!==d?d:e.Gender)&&void 0!==c?c:e.Gender)&&void 0!==o?o:e.gender),u||m)&&(null===(g=(v=console).debug)||void 0===g||g.call(v,"\ud83d\udccb Customer normalized:",{id:e.id,fullName:e.fullName,phone:null===(y=e.contact)||void 0===y?void 0:y.primaryPhone}));return e}async createCustomer(e){try{const t=await gi.A.post(this.baseUrl,e,this.getAuthHeaders());return this.normalizeCustomer(t.data)}catch(Sc){throw console.error("Error creating customer:",Sc),this.handleError(Sc)}}async getCustomer(e){try{const t=await this.ro.getJson("/".concat(e),{headers:{"x-cache-ttl":3e4}});return this.normalizeCustomer(t)}catch(Sc){throw console.error("Error fetching customer:",Sc),this.handleError(Sc)}}async getCustomerByPhone(e){try{const t=this.normalizePhoneForApi(e),r=encodeURIComponent(t),n=await this.ro.getJson("/by-phone/".concat(r),{headers:{"x-cache-ttl":6e4}});return this.normalizeCustomer(n)}catch(Sc){var t;if(404===(null===(t=Sc.response)||void 0===t?void 0:t.status))return null;throw console.error("Error fetching customer by phone:",Sc),this.handleError(Sc)}}async getCustomerByDocument(e,t){try{const r=await this.ro.getJson("/by-document",{params:{documentType:e,documentNumber:t},headers:{"x-cache-ttl":6e4}});return this.normalizeCustomer(r)}catch(Sc){var r;if(404===(null===(r=Sc.response)||void 0===r?void 0:r.status))return null;throw console.error("Error fetching customer by document:",Sc),this.handleError(Sc)}}async searchCustomers(e){try{return(await this.ro.getJson("/search",{params:{searchTerm:e},headers:{"x-cache-ttl":15e3}})||[]).map(e=>this.normalizeCustomer(e))}catch(Sc){throw console.error("Error searching customers:",Sc),this.handleError(Sc)}}async getAllCustomers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{return(await this.ro.getJson("/",{params:{page:e,pageSize:t},headers:{"x-cache-ttl":3e4}})||[]).map(e=>this.normalizeCustomer(e))}catch(Sc){throw console.error("Error getting all customers:",Sc),this.handleError(Sc)}}async checkPhoneUnique(e,t){try{const r=this.normalizePhoneForApi(e);return(await gi.A.get("".concat(this.baseUrl,"/check-phone-unique"),(0,s.A)((0,s.A)({},this.getAuthHeaders()),{},{params:{phone:r,excludeCustomerId:t}}))).data}catch(Sc){throw console.error("Error checking phone uniqueness:",Sc),this.handleError(Sc)}}async checkDocumentUnique(e,t,r){try{return(await gi.A.get("".concat(this.baseUrl,"/check-document-unique"),(0,s.A)((0,s.A)({},this.getAuthHeaders()),{},{params:{documentType:e,documentNumber:t,excludeCustomerId:r}}))).data}catch(Sc){throw console.error("Error checking document uniqueness:",Sc),this.handleError(Sc)}}async validateCustomer(e){try{return(await gi.A.post("".concat(this.baseUrl,"/").concat(e,"/validate"),{},this.getAuthHeaders())).data}catch(Sc){throw console.error("Error validating customer:",Sc),this.handleError(Sc)}}handleError(e){if(e.response){const t=e.response.data||{};if(t.errors&&"object"===typeof t.errors){const e=[];if(Object.entries(t.errors).forEach(t=>{let[r,n]=t;Array.isArray(n)?n.forEach(t=>e.push("".concat(r,": ").concat(t))):"string"===typeof n&&e.push("".concat(r,": ").concat(n))}),e.length)return new Error(e.join("\n"))}const r=t.message||t.title||e.response.statusText||"Requ\xeate invalide";return new Error(r)}return e.request?new Error("Aucune r\xe9ponse du serveur. V\xe9rifiez votre connexion."):new Error(e.message||"Une erreur inattendue s'est produite")}async uploadFile(e,t,r){try{const n=new FormData;n.append("file",e),n.append("customerId",t),n.append("fileType",r);return(await gi.A.post("".concat(Rm,"/FileUpload/upload"),n,{headers:{Authorization:"Bearer ".concat(this.getAuthToken()),"Content-Type":"multipart/form-data"}})).data.fileUrl}catch(Sc){throw console.error("Error uploading file:",Sc),this.handleError(Sc)}}async uploadSignature(e,t){try{return(await gi.A.post("".concat(Rm,"/FileUpload/upload-signature"),{base64Data:e,customerId:t},this.getAuthHeaders())).data.fileUrl}catch(Sc){throw console.error("Error uploading signature:",Sc),this.handleError(Sc)}}async updateCustomer(e,t){try{const r=await gi.A.put("".concat(this.baseUrl,"/").concat(e),t,this.getAuthHeaders());return this.normalizeCustomer(r.data)}catch(Sc){throw console.error("Error updating customer:",Sc),this.handleError(Sc)}}async toggleCustomerStatus(e,t){const r=async(e,t)=>{const r=t?"".concat(this.baseUrl,"/").concat(e,"/toggle-status?force=true"):"".concat(this.baseUrl,"/").concat(e,"/toggle-status"),n=await gi.A.patch(r,{},this.getAuthHeaders());return this.normalizeCustomer(n.data)},n=async e=>{const t=e.toLowerCase().startsWith("phone-")?e.substring(6):e,r=await this.getCustomerByPhone(t);if(!r)throw new Error("Client introuvable");return r.id};try{if("string"===typeof e&&e.toLowerCase().startsWith("phone-")){const s=await n(e);return await r(s,t)}try{return await r(e,t)}catch(a){var s;const i=404===(null===a||void 0===a||null===(s=a.response)||void 0===s?void 0:s.status),l="string"===typeof e&&/\+?509/.test(e)||/\d{8,11}/.test(e);if(i&&l){const s=await n(e);return await r(s,t)}throw a}}catch(Sc){throw console.error("Error toggling customer status:",Sc),this.handleError(Sc)}}async getCustomerFiles(e){try{return(await gi.A.get("".concat(Rm,"/FileUpload/customer/").concat(e),this.getAuthHeaders())).data}catch(Sc){throw console.error("Error fetching customer files:",Sc),this.handleError(Sc)}}static base64ToBlob(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";const r=atob(e.split(",")[1]),n=new ArrayBuffer(r.length),s=new Uint8Array(n);for(let a=0;a<r.length;a++)s[a]=r.charCodeAt(a);return new Blob([n],{type:t})}static convertGender(e){return"male"===e.toLowerCase()||"gason"===e.toLowerCase()?_m.Male:_m.Female}static convertDocumentType(e){return{CIN:Im.CIN,PASSPORT:Im.Passport,DRIVING_LICENSE:Im.DrivingLicense,BIRTH_CERTIFICATE:Im.BirthCertificate}[e.toUpperCase()]||Im.CIN}async uploadDocument(e,t,r,n,s){try{const a=new FormData;a.append("File",t),a.append("DocumentType",r.toString()),a.append("Name",n),s&&a.append("Description",s);return(await gi.A.post("".concat(this.baseUrl,"/").concat(e,"/documents"),a,{headers:{Authorization:"Bearer ".concat(this.getAuthToken()),"Content-Type":"multipart/form-data"}})).data}catch(Sc){throw console.error("Error uploading document:",Sc),this.handleError(Sc)}}async getCustomerDocuments(e){try{return(await gi.A.get("".concat(this.baseUrl,"/").concat(e,"/documents"),this.getAuthHeaders())).data}catch(Sc){throw console.error("Error fetching documents:",Sc),this.handleError(Sc)}}async downloadDocument(e,t){try{return(await gi.A.get("".concat(this.baseUrl,"/").concat(e,"/documents/").concat(t,"/download"),{headers:{Authorization:"Bearer ".concat(this.getAuthToken())},responseType:"blob"})).data}catch(Sc){throw console.error("Error downloading document:",Sc),this.handleError(Sc)}}async deleteDocument(e,t){try{await gi.A.delete("".concat(this.baseUrl,"/").concat(e,"/documents/").concat(t),this.getAuthHeaders())}catch(Sc){throw console.error("Error deleting document:",Sc),this.handleError(Sc)}}async saveSignature(e,t){try{await gi.A.post("".concat(this.baseUrl,"/").concat(e,"/signature"),{SignatureData:t},this.getAuthHeaders())}catch(Sc){throw console.error("Error saving signature:",Sc),this.handleError(Sc)}}async getSignature(e){try{return(await gi.A.get("".concat(this.baseUrl,"/").concat(e,"/signature"),this.getAuthHeaders())).data.signature}catch(Sc){var t;if(404===(null===(t=Sc.response)||void 0===t?void 0:t.status))return null;throw console.error("Error fetching signature:",Sc),this.handleError(Sc)}}},Fm=Lm,Mm=e=>(e=>Vd((0,s.A)({isBusiness:Ld().optional(),street:ud().min(5,"L'adresse doit contenir au moins 5 caract\xe8res"),commune:ud().min(1,"La commune est obligatoire"),department:ud().min(1,"Le d\xe9partement est obligatoire"),primaryPhone:ud().regex(/^(\+509\s?)?[234579]\d{7}$/i,"Format de num\xe9ro ha\xeftien invalide (ex: +509 3712 3456)"),email:ud().optional(),documentType:e?ud().optional():ud().min(1,"Le type de document est obligatoire"),documentNumber:e?ud().optional():ud().min(5,"Le num\xe9ro de document doit contenir au moins 5 caract\xe8res"),issuedDate:e?ud().optional():ud().min(1,"La date d'\xe9mission est obligatoire"),issuingAuthority:e?ud().optional():ud().min(1,"L'autorit\xe9 d'\xe9mission est obligatoire"),acceptTerms:Ld().refine(e=>!0===e,"Vous devez accepter les conditions"),signaturePlace:ud().min(1,"Le lieu de signature est obligatoire"),signatureDate:ud().min(1,"La date de signature est obligatoire")},e?{companyName:ud().min(2,"La raison sociale doit contenir au moins 2 caract\xe8res"),legalForm:ud().min(1,"La forme juridique est obligatoire"),headOfficeAddress:ud().min(1,"L'adresse du si\xe8ge social est obligatoire"),companyPhone:ud().min(1,"Le t\xe9l\xe9phone de l'entreprise est obligatoire"),companyEmail:ud().optional(),legalRepresentativeName:ud().min(1,"Nom du repr\xe9sentant obligatoire"),legalRepresentativeTitle:ud().min(1,"Titre du repr\xe9sentant obligatoire"),legalRepresentativeDocumentType:ud().min(1,"Type de document du repr\xe9sentant obligatoire"),legalRepresentativeDocumentNumber:ud().min(5,"Le num\xe9ro de document doit contenir au moins 5 caract\xe8res"),legalRepresentativeIssuedDate:ud().min(1,"La date d'\xe9mission du document est obligatoire"),legalRepresentativeExpiryDate:ud().optional().nullable(),legalRepresentativeIssuingAuthority:ud().min(1,"L'autorit\xe9 d'\xe9mission est obligatoire"),firstName:ud().optional(),lastName:ud().optional(),dateOfBirth:ud().optional(),gender:ud().optional()}:{firstName:ud().min(2,"Le pr\xe9nom doit contenir au moins 2 caract\xe8res"),lastName:ud().min(2,"Le nom doit contenir au moins 2 caract\xe8res"),dateOfBirth:ud().min(1,"La date de naissance est obligatoire"),gender:ud().regex(/^(M|F)$/),companyName:ud().optional(),legalForm:ud().optional(),headOfficeAddress:ud().optional(),companyPhone:ud().optional(),companyEmail:ud().optional(),legalRepresentativeName:ud().optional(),legalRepresentativeTitle:ud().optional(),legalRepresentativeDocumentType:ud().optional(),legalRepresentativeDocumentNumber:ud().optional(),legalRepresentativeIssuedDate:ud().optional(),legalRepresentativeExpiryDate:ud().optional().nullable(),legalRepresentativeIssuingAuthority:ud().optional()})).passthrough())(e),Um=t=>{let{signer:r,onSave:n,onCancel:a}=t;const[i,l]=e.useState(r||{fullName:"",documentType:wm.CIN,documentNumber:"",relationshipToCustomer:"",address:"",phoneNumber:"",authorizationLimit:void 0});return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,ju.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:r?"Modifier le signataire":"Ajouter un signataire autoris\xe9"})}),(0,ju.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(i)},className:"p-6",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom complet *"}),(0,ju.jsx)("input",{type:"text",required:!0,value:i.fullName,onChange:e=>l((0,s.A)((0,s.A)({},i),{},{fullName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Pr\xe9nom et nom"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fonction/Relation *"}),(0,ju.jsxs)("select",{required:!0,value:i.relationshipToCustomer,onChange:e=>l((0,s.A)((0,s.A)({},i),{},{relationshipToCustomer:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"Directeur G\xe9n\xe9ral",children:"Directeur G\xe9n\xe9ral"}),(0,ju.jsx)("option",{value:"Directeur Financier",children:"Directeur Financier"}),(0,ju.jsx)("option",{value:"Administrateur",children:"Administrateur"}),(0,ju.jsx)("option",{value:"Co-g\xe9rant",children:"Co-g\xe9rant"}),(0,ju.jsx)("option",{value:"Mandataire",children:"Mandataire"}),(0,ju.jsx)("option",{value:"Autre",children:"Autre"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Num\xe9ro de t\xe9l\xe9phone *"}),(0,ju.jsx)("input",{type:"tel",required:!0,value:i.phoneNumber,onChange:e=>l((0,s.A)((0,s.A)({},i),{},{phoneNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"+509 3712 3456"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de pi\xe8ce *"}),(0,ju.jsxs)("select",{required:!0,value:i.documentType,onChange:e=>l((0,s.A)((0,s.A)({},i),{},{documentType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:wm.CIN,children:"CIN"}),(0,ju.jsx)("option",{value:wm.PASSPORT,children:"Passeport"}),(0,ju.jsx)("option",{value:wm.DRIVING_LICENSE,children:"Permis de conduire"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Num\xe9ro de pi\xe8ce *"}),(0,ju.jsx)("input",{type:"text",required:!0,value:i.documentNumber,onChange:e=>l((0,s.A)((0,s.A)({},i),{},{documentNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Num\xe9ro du document"})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse *"}),(0,ju.jsx)("input",{type:"text",required:!0,value:i.address,onChange:e=>l((0,s.A)((0,s.A)({},i),{},{address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Adresse compl\xe8te"})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Limite d'autorisation (HTG) ",(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:"(Optionnel)"})]}),(0,ju.jsx)("input",{type:"number",min:"0",value:i.authorizationLimit||"",onChange:e=>l((0,s.A)((0,s.A)({},i),{},{authorizationLimit:e.target.value?Number(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Montant maximum autoris\xe9 par transaction"})]})]}),(0,ju.jsxs)("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t",children:[(0,ju.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Annuler"}),(0,ju.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:r?"Mettre \xe0 jour":"Ajouter"})]})]})]})})},Bm=t=>{var r,n;let{onSubmit:a,onCancel:i,isLoading:l=!1}=t;const[o,c]=(0,e.useState)(""),[d,u]=(0,e.useState)(1),[m,h]=(0,e.useState)(!1),[p,x]=(0,e.useState)(""),[f,g]=(0,e.useState)({}),[v,y]=(0,e.useState)([]),[b,N]=(0,e.useState)(!1),[j,w]=(0,e.useState)(!1),[S,A]=(0,e.useState)(null),T=Nm(e=>e.withGlobalLoading),C=e.useMemo(()=>Mm(j),[j]),{control:E,handleSubmit:D,watch:k,formState:{errors:R},setValue:_,reset:I}=ri({resolver:oi(C),defaultValues:{isBusiness:!1,companyName:"",legalForm:"",businessRegistrationNumber:"",companyNif:"",headOfficeAddress:"",companyPhone:"",companyEmail:"",legalRepresentativeName:"",legalRepresentativeTitle:"",legalRepresentativeDocumentType:wm.CIN,legalRepresentativeDocumentNumber:"",legalRepresentativeIssuedDate:"",legalRepresentativeExpiryDate:"",legalRepresentativeIssuingAuthority:"",firstName:"",lastName:"",dateOfBirth:"",birthPlace:"",nationality:"Ha\xeftienne",nif:"",gender:"M",street:"",postalAddress:"",commune:"",department:"",primaryPhone:"",secondaryPhone:"",email:"",emergencyContactName:"",emergencyContactPhone:"",documentType:wm.CIN,documentNumber:"",issuedDate:"",expiryDate:"",issuingAuthority:"",occupation:"",employerName:"",workAddress:"",incomeSource:"",monthlyIncome:0,transactionFrequency:"",accountPurpose:"",referencePerson:"",maritalStatus:void 0,spouseName:"",numberOfDependents:0,educationLevel:"",acceptTerms:!1,signaturePlace:"",signatureDate:(new Date).toISOString().split("T")[0]},mode:"onSubmit"}),P=k("department");e.useEffect(()=>{P&&P!==o&&(c(P),_("commune",""))},[P,o,_]),e.useEffect(()=>{j?(_("firstName",""),_("lastName",""),_("dateOfBirth",""),_("gender","M")):(_("companyName",""),_("legalForm",""),_("businessRegistrationNumber",""),_("companyNif",""),_("headOfficeAddress",""),_("companyPhone",""),_("companyEmail",""),_("legalRepresentativeName",""),_("legalRepresentativeTitle",""),_("legalRepresentativeDocumentNumber",""),y([]))},[j,_]);const O=o?Am[o]:[],L=async e=>T(async()=>{try{if(!e.acceptTerms)return void alert("Vous devez accepter la d\xe9claration et les conditions");if(!e.signaturePlace||!e.signatureDate)return void alert("Veuillez remplir le lieu et la date de signature");if(!p)return void alert("La signature est obligatoire");const t=(0,s.A)((0,s.A)({},e),{},{signature:void 0});if(e.isBusiness){if(t.tradeRegisterNumber=e.businessRegistrationNumber,delete t.businessRegistrationNumber,t.taxId=e.companyNif,delete t.companyNif,e.legalRepresentativeName){const r=e.legalRepresentativeName.trim().split(/\s+/);1===r.length?(t.representativeFirstName=void 0,t.representativeLastName=r[0]):r.length>1&&(t.representativeFirstName=r.slice(0,-1).join(" "),t.representativeLastName=r.slice(-1)[0])}e.legalRepresentativeTitle&&(t.representativeTitle=e.legalRepresentativeTitle),e.legalRepresentativeDocumentType&&(t.representativeDocumentType=e.legalRepresentativeDocumentType),e.legalRepresentativeDocumentNumber&&(t.representativeDocumentNumber=e.legalRepresentativeDocumentNumber),e.legalRepresentativeIssuedDate&&(t.representativeIssuedDate=e.legalRepresentativeIssuedDate),e.legalRepresentativeExpiryDate&&(t.representativeExpiryDate=e.legalRepresentativeExpiryDate),e.legalRepresentativeIssuingAuthority&&(t.representativeIssuingAuthority=e.legalRepresentativeIssuingAuthority),delete t.legalRepresentativeName,delete t.legalRepresentativeTitle,delete t.legalRepresentativeDocumentType,delete t.legalRepresentativeDocumentNumber,delete t.legalRepresentativeIssuedDate,delete t.legalRepresentativeExpiryDate,delete t.legalRepresentativeIssuingAuthority}t.transactionFrequency=e.transactionFrequency||"MONTHLY",t.accountPurpose=e.accountPurpose||"",t.referencePerson=e.referencePerson||"",t.maritalStatus=e.maritalStatus||"SINGLE",t.numberOfDependents=e.numberOfDependents||0,t.educationLevel=e.educationLevel||"SECONDARY";try{0}catch(mn){console.debug("ClientCreationForm - transformed payload (raw):",t)}const r=await a(t);if(r&&r.id){await(async e=>{const t=[];!j&&f.photo&&t.push(Fm.uploadDocument(e,f.photo,Pm.Photo,"Photo du client","Photo d'identit\xe9 du client")),f.idDocument&&t.push(Fm.uploadDocument(e,f.idDocument,Pm.IdentityCard,j?"Pi\xe8ce d'identit\xe9 du repr\xe9sentant":"Carte d'Identit\xe9","Document d'identification officiel"));const r=j?f.companyProofOfAddress:f.proofOfResidence;r&&t.push(Fm.uploadDocument(e,r,Pm.ProofOfResidence,j?"Justificatif domicile soci\xe9t\xe9":"Preuve de r\xe9sidence","Document justifiant l'adresse de r\xe9sidence")),j&&f.businessRegistrationDocument&&t.push(Fm.uploadDocument(e,f.businessRegistrationDocument,Pm.Other,"Registre de Commerce","Extrait du registre de commerce")),j&&f.fundsOriginDeclaration&&t.push(Fm.uploadDocument(e,f.fundsOriginDeclaration,Pm.Other,"D\xe9claration Origine des Fonds","Document d\xe9clarant l'origine des fonds")),p&&t.push(Fm.saveSignature(e,p));try{await Promise.all(t),console.log("Tous les documents ont \xe9t\xe9 upload\xe9s avec succ\xe8s")}catch(Sc){console.error("Erreur lors de l'upload des documents:",Sc)}})(r.id);const e=await Fm.getCustomer(r.id);return window.location.reload(),e}return window.location.reload(),r}catch(Sc){throw console.error("Erreur lors de la cr\xe9ation du client:",Sc),Sc}}),F=async()=>{await(async()=>{const e=k();if(1===d)if(j){if(!e.companyName||!e.legalForm)return alert("Veuillez remplir la raison sociale et la forme juridique"),!1}else{if(!e.firstName||!e.lastName||!e.gender)return alert("Veuillez remplir tous les champs obligatoires (pr\xe9nom, nom, genre)"),!1;if(!e.dateOfBirth)return alert("Veuillez remplir la date de naissance"),!1}if(2===d){if(!e.street||!e.department||!e.commune||!e.primaryPhone)return alert("Veuillez remplir tous les champs obligatoires (adresse, d\xe9partement, commune, t\xe9l\xe9phone)"),!1;if(!/^(\+509\s?)?[234579]\d{7}$/.test(e.primaryPhone))return alert("Format de num\xe9ro de t\xe9l\xe9phone invalide. Ex: +509 3712 3456"),!1}if(3===d)if(j){if(!e.legalRepresentativeDocumentType||!e.legalRepresentativeDocumentNumber||!e.legalRepresentativeIssuedDate||!e.legalRepresentativeIssuingAuthority)return alert("Veuillez remplir toutes les informations du document d'identit\xe9 du repr\xe9sentant l\xe9gal"),!1;if(!f.businessRegistrationDocument)return alert("Le registre de commerce est obligatoire pour une personne morale"),!1;if(!f.fundsOriginDeclaration)return alert("La d\xe9claration d'origine des fonds est obligatoire pour une personne morale"),!1}else if(!e.documentType||!e.documentNumber||!e.issuedDate||!e.issuingAuthority)return alert("Veuillez remplir toutes les informations du document d'identit\xe9"),!1;if(5===d){if(!e.acceptTerms)return alert("Vous devez accepter la d\xe9claration et les conditions"),!1;if(!e.signaturePlace||!e.signatureDate)return alert("Veuillez remplir le lieu et la date de signature"),!1;if(!p)return alert("La signature est obligatoire"),!1}return!0})()&&u(d+1)};return(0,ju.jsxs)("div",{className:"p-6",children:[(0,ju.jsxs)("div",{className:"mb-6",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de client"}),(0,ju.jsxs)("div",{className:"inline-flex rounded-md shadow-sm border border-gray-200",children:[(0,ju.jsx)("button",{type:"button",onClick:()=>{w(!1),_("isBusiness",!1)},className:"px-4 py-2 text-sm ".concat(j?"bg-white text-gray-700":"bg-blue-600 text-white"),children:"Personne Physique"}),(0,ju.jsx)("button",{type:"button",onClick:()=>{w(!0),_("isBusiness",!0)},className:"px-4 py-2 text-sm border-l ".concat(j?"bg-blue-600 text-white":"bg-white text-gray-700"),children:"Personne Morale"})]}),j&&(0,ju.jsx)("p",{className:"mt-2 text-xs text-blue-600 font-medium",children:"\ud83d\udccb Mode Entreprise : Documents additionnels requis (Registre commerce, D\xe9claration fonds)"})]}),(0,ju.jsx)("div",{className:"mb-8",children:(0,ju.jsx)("div",{className:"flex items-center justify-between",children:[1,2,3,4,5].map(t=>(0,ju.jsxs)(e.Fragment,{children:[(0,ju.jsxs)("div",{className:"flex flex-col items-center",children:[(0,ju.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-colors ".concat(t===d?"bg-blue-600 text-white":t<d?"bg-green-600 text-white":"bg-gray-200 text-gray-600"),children:t<d?(0,ju.jsx)(Tm,{className:"w-5 h-5"}):t}),(0,ju.jsxs)("span",{className:"text-xs mt-2 text-gray-600",children:[1===t&&"Identit\xe9",2===t&&"Contact",3===t&&"Documents",4===t&&"Professionnel",5===t&&"Confirmation"]})]}),t<5&&(0,ju.jsx)("div",{className:"flex-1 h-1 mx-2 ".concat(t<d?"bg-green-600":"bg-gray-200")})]},t))})}),(0,ju.jsxs)("form",{onSubmit:e=>{e.preventDefault(),5===d?D(L,e=>{console.error("Form validation errors:",e);const t=Object.values(e)[0];t&&t.message?alert("Erreur de validation: ".concat(t.message)):alert("Veuillez v\xe9rifier que tous les champs obligatoires sont remplis correctement.")})():F()},className:"space-y-6",children:[1===d&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Informations d'Identification du Client"}),j?(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Raison sociale *"}),(0,ju.jsx)(ya,{name:"companyName",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.companyName?"border-red-500":"border-gray-300"),placeholder:"Nom de l'entreprise"}))}}),R.companyName&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.companyName.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Forme juridique *"}),(0,ju.jsx)(ya,{name:"legalForm",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.legalForm?"border-red-500":"border-gray-300"),children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"SA",children:"S.A."}),(0,ju.jsx)("option",{value:"SEM",children:"S.E.M."}),(0,ju.jsx)("option",{value:"INDIVIDUAL",children:"Soci\xe9t\xe9 individuelle"}),(0,ju.jsx)("option",{value:"COOP",children:"Coop\xe9rative"})]}))}}),R.legalForm&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.legalForm.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Num\xe9ro de commerce"}),(0,ju.jsx)(ya,{name:"businessRegistrationNumber",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}))}})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"NIF de l'entreprise"}),(0,ju.jsx)(ya,{name:"companyNif",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}))}})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse du si\xe8ge social *"}),(0,ju.jsx)(ya,{name:"headOfficeAddress",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}))}})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone *"}),(0,ju.jsx)(ya,{name:"companyPhone",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}))}})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,ju.jsx)(ya,{name:"companyEmail",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}))}})]}),(0,ju.jsxs)("div",{className:"md:col-span-2 pt-2",children:[(0,ju.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Repr\xe9sentant l\xe9gal"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom complet *"}),(0,ju.jsx)(ya,{name:"legalRepresentativeName",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.legalRepresentativeName?"border-red-500":"border-gray-300")}))}}),R.legalRepresentativeName&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.legalRepresentativeName.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre/Fonction *"}),(0,ju.jsx)(ya,{name:"legalRepresentativeTitle",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.legalRepresentativeTitle?"border-red-500":"border-gray-300"),children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"Directeur G\xe9n\xe9ral",children:"Directeur G\xe9n\xe9ral"}),(0,ju.jsx)("option",{value:"Pr\xe9sident",children:"Pr\xe9sident"}),(0,ju.jsx)("option",{value:"G\xe9rant",children:"G\xe9rant"}),(0,ju.jsx)("option",{value:"Administrateur",children:"Administrateur"}),(0,ju.jsx)("option",{value:"Autre",children:"Autre"})]}))}}),R.legalRepresentativeTitle&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.legalRepresentativeTitle.message})]})]})]})]}):(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Pr\xe9nom * ",(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:"(Non)"})]}),(0,ju.jsx)(ya,{name:"firstName",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.firstName?"border-red-500":"border-gray-300"),placeholder:"Entrez le pr\xe9nom"}))}}),R.firstName&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.firstName.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nom de famille * ",(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:"(Siyati)"})]}),(0,ju.jsx)(ya,{name:"lastName",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.lastName?"border-red-500":"border-gray-300"),placeholder:"Entrez le nom de famille"}))}}),R.lastName&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.lastName.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date de naissance * ",(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:"(Dat nesans)"})]}),(0,ju.jsx)(ya,{name:"dateOfBirth",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",type:"date",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.dateOfBirth?"border-red-500":"border-gray-300")}))}}),R.dateOfBirth&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.dateOfBirth.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Lieu de naissance ",(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:"(Kote nesans)"})]}),(0,ju.jsx)(ya,{name:"birthPlace",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Port-au-Prince, Ha\xefti"}))}})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Genre * ",(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:"(S\xe8ks)"})]}),(0,ju.jsx)(ya,{name:"gender",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.gender?"border-red-500":"border-gray-300"),children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"M",children:"Masculin"}),(0,ju.jsx)("option",{value:"F",children:"F\xe9minin"})]}))}}),R.gender&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.gender.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nationalit\xe9 ",(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:"(Nasyonalite)"})]}),(0,ju.jsx)(ya,{name:"nationality",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Ha\xeftienne"}))}})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["NIF ",(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:"(Nimewo Idantifikasyon Fiskal)"})]}),(0,ju.jsx)(ya,{name:"nif",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: NIF-123456789"}))}})]})]})]}),2===d&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Adresse et Coordonn\xe9es"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Adresse compl\xe8te * ",(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:"(Adr\xe8s konpl\xe8)"})]}),(0,ju.jsx)(ya,{name:"street",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.street?"border-red-500":"border-gray-300"),placeholder:"Num\xe9ro, rue, quartier"}))}}),R.street&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.street.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["D\xe9partement * ",(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:"(Depatman)"})]}),(0,ju.jsx)(ya,{name:"department",control:E,render:e=>{let{field:t}=e;return(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},t),{},{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.department?"border-red-500":"border-gray-300"),children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),Sm.map(e=>(0,ju.jsx)("option",{value:e,children:e},e))]}))}}),R.department&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.department.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Commune * ",(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:"(Komin)"})]}),(0,ju.jsx)(ya,{name:"commune",control:E,render:e=>{let{field:t}=e;return(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},t),{},{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.commune?"border-red-500":"border-gray-300"),disabled:!o,children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),O.map(e=>(0,ju.jsx)("option",{value:e,children:e},e))]}))}}),R.commune&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.commune.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["T\xe9l\xe9phone principal * ",(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:"(Telef\xf2n)"})]}),(0,ju.jsx)(ya,{name:"primaryPhone",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"tel",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.primaryPhone?"border-red-500":"border-gray-300"),placeholder:"+509 3712 3456"}))}}),R.primaryPhone&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.primaryPhone.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["T\xe9l\xe9phone secondaire ",(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:"(Telef\xf2n 2)"})]}),(0,ju.jsx)(ya,{name:"secondaryPhone",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"+509 2222 3333"}))}})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:"(Adr\xe8s imel)"})]}),(0,ju.jsx)(ya,{name:"email",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"email",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.email?"border-red-500":"border-gray-300"),placeholder:"email@exemple.com"}))}}),R.email&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.email.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact d'urgence"}),(0,ju.jsx)(ya,{name:"emergencyContactName",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Nom du contact"}))}})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone d'urgence"}),(0,ju.jsx)(ya,{name:"emergencyContactPhone",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"+509 1234 5678"}))}})]})]})]}),3===d&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Documents et Pi\xe8ces d'Identit\xe9",j&&(0,ju.jsx)("span",{className:"block text-xs text-blue-700 font-medium mt-1",children:"Pi\xe8ce d'identit\xe9 du repr\xe9sentant l\xe9gal"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:j?"Type de pi\xe8ce (Repr\xe9sentant l\xe9gal) *":"Type de document *"}),j?(0,ju.jsx)(ya,{name:"legalRepresentativeDocumentType",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.legalRepresentativeDocumentType?"border-red-500":"border-gray-300"),children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:wm.CIN,children:"CIN (Carte d'Identit\xe9 Nationale)"}),(0,ju.jsx)("option",{value:wm.PASSPORT,children:"Passeport"}),(0,ju.jsx)("option",{value:wm.DRIVING_LICENSE,children:"Permis de Conduire"})]}))}}):(0,ju.jsx)(ya,{name:"documentType",control:E,render:e=>{let{field:t}=e;return(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},t),{},{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.documentType?"border-red-500":"border-gray-300"),children:[(0,ju.jsx)("option",{value:wm.CIN,children:"Carte d'Identit\xe9 Nationale"}),(0,ju.jsx)("option",{value:wm.PASSPORT,children:"Passeport"}),(0,ju.jsx)("option",{value:wm.DRIVING_LICENSE,children:"Permis de Conduire"})]}))}}),j?R.legalRepresentativeDocumentType&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.legalRepresentativeDocumentType.message}):R.documentType&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.documentType.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:j?"Num\xe9ro de pi\xe8ce (Repr\xe9sentant l\xe9gal) *":"Num\xe9ro de document *"}),j?(0,ju.jsx)(ya,{name:"legalRepresentativeDocumentNumber",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.legalRepresentativeDocumentNumber?"border-red-500":"border-gray-300"),placeholder:"Num\xe9ro du document"}))}}):(0,ju.jsx)(ya,{name:"documentNumber",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.documentNumber?"border-red-500":"border-gray-300"),placeholder:"Num\xe9ro du document"}))}}),j?R.legalRepresentativeDocumentNumber&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.legalRepresentativeDocumentNumber.message}):R.documentNumber&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.documentNumber.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:j?"Date d'\xe9mission (Repr\xe9sentant) *":"Date d'\xe9mission *"}),j?(0,ju.jsx)(ya,{name:"legalRepresentativeIssuedDate",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",type:"date",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.legalRepresentativeIssuedDate?"border-red-500":"border-gray-300")}))}}):(0,ju.jsx)(ya,{name:"issuedDate",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"date",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.issuedDate?"border-red-500":"border-gray-300")}))}}),j?R.legalRepresentativeIssuedDate&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.legalRepresentativeIssuedDate.message}):R.issuedDate&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.issuedDate.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:j?"Date d'expiration (Repr\xe9sentant)":"Date d'expiration"}),j?(0,ju.jsx)(ya,{name:"legalRepresentativeExpiryDate",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}))}}):(0,ju.jsx)(ya,{name:"expiryDate",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}))}})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:j?"Autorit\xe9 d'\xe9mission (Repr\xe9sentant) *":"Autorit\xe9 d'\xe9mission *"}),j?(0,ju.jsx)(ya,{name:"legalRepresentativeIssuingAuthority",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.legalRepresentativeIssuingAuthority?"border-red-500":"border-gray-300"),placeholder:"Ex: Office National d'Identification"}))}}):(0,ju.jsx)(ya,{name:"issuingAuthority",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(R.issuingAuthority?"border-red-500":"border-gray-300"),placeholder:"Ex: Office National d'Identification"}))}}),j?R.legalRepresentativeIssuingAuthority&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.legalRepresentativeIssuingAuthority.message}):R.issuingAuthority&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.issuingAuthority.message})]})]}),(0,ju.jsxs)("div",{className:"bg-green-50 p-6 rounded-lg border-2 border-green-200",children:[(0,ju.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"T\xe9l\xe9charger les documents"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[!j&&(0,ju.jsx)("div",{className:"bg-white p-4 rounded-lg border-2 border-dashed border-gray-300",children:(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)(Cm,{className:"w-10 h-10 mx-auto mb-2 text-gray-400"}),(0,ju.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Photo"}),f.photo?(0,ju.jsxs)("div",{className:"space-y-2",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-center text-green-600",children:[(0,ju.jsx)(Tm,{className:"w-4 h-4 mr-1"}),(0,ju.jsx)("span",{className:"text-sm",children:f.photo.name})]}),(0,ju.jsxs)("label",{className:"inline-flex items-center px-3 py-1 bg-gray-600 text-white text-sm rounded cursor-pointer hover:bg-gray-700",children:[(0,ju.jsx)(Em,{className:"w-3 h-3 mr-1"}),"Changer",(0,ju.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&r.size<=5242880&&g((0,s.A)((0,s.A)({},f),{},{photo:r}))}})]})]}):(0,ju.jsxs)("label",{className:"inline-flex items-center px-3 py-2 bg-green-600 text-white text-sm rounded cursor-pointer hover:bg-green-700",children:[(0,ju.jsx)(Dm,{className:"w-4 h-4 mr-1"}),"Charger",(0,ju.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&r.size<=5242880&&g((0,s.A)((0,s.A)({},f),{},{photo:r}))}})]})]})}),(0,ju.jsx)("div",{className:"bg-white p-4 rounded-lg border-2 border-dashed border-gray-300",children:(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)(Hu,{className:"w-10 h-10 mx-auto mb-2 text-gray-400"}),(0,ju.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:j?"Pi\xe8ce repr\xe9sentant":"Pi\xe8ce d'identit\xe9"}),f.idDocument?(0,ju.jsxs)("div",{className:"space-y-2",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-center text-green-600",children:[(0,ju.jsx)(Tm,{className:"w-4 h-4 mr-1"}),(0,ju.jsx)("span",{className:"text-sm",children:f.idDocument.name})]}),(0,ju.jsxs)("label",{className:"inline-flex items-center px-3 py-1 bg-gray-600 text-white text-sm rounded cursor-pointer hover:bg-gray-700",children:[(0,ju.jsx)(Em,{className:"w-3 h-3 mr-1"}),"Changer",(0,ju.jsx)("input",{type:"file",accept:"image/*,.pdf",className:"hidden",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&r.size<=5242880&&g((0,s.A)((0,s.A)({},f),{},{idDocument:r}))}})]})]}):(0,ju.jsxs)("label",{className:"inline-flex items-center px-3 py-2 bg-green-600 text-white text-sm rounded cursor-pointer hover:bg-green-700",children:[(0,ju.jsx)(Dm,{className:"w-4 h-4 mr-1"}),"Charger",(0,ju.jsx)("input",{type:"file",accept:"image/*,.pdf",className:"hidden",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&r.size<=5242880&&g((0,s.A)((0,s.A)({},f),{},{idDocument:r}))}})]})]})}),j&&(0,ju.jsx)("div",{className:"bg-white p-4 rounded-lg border-2 border-dashed border-gray-300",children:(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)(Hu,{className:"w-10 h-10 mx-auto mb-2 text-gray-400"}),(0,ju.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Registre de commerce *"}),f.businessRegistrationDocument?(0,ju.jsxs)("div",{className:"space-y-2",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-center text-green-600",children:[(0,ju.jsx)(Tm,{className:"w-4 h-4 mr-1"}),(0,ju.jsx)("span",{className:"text-sm",children:f.businessRegistrationDocument.name})]}),(0,ju.jsxs)("label",{className:"inline-flex items-center px-3 py-1 bg-gray-600 text-white text-sm rounded cursor-pointer hover:bg-gray-700",children:[(0,ju.jsx)(Em,{className:"w-3 h-3 mr-1"}),"Changer",(0,ju.jsx)("input",{type:"file",accept:"image/*,.pdf",className:"hidden",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&r.size<=5242880&&g((0,s.A)((0,s.A)({},f),{},{businessRegistrationDocument:r}))}})]})]}):(0,ju.jsxs)("label",{className:"inline-flex items-center px-3 py-2 bg-green-600 text-white text-sm rounded cursor-pointer hover:bg-green-700",children:[(0,ju.jsx)(Dm,{className:"w-4 h-4 mr-1"}),"Charger",(0,ju.jsx)("input",{type:"file",accept:"image/*,.pdf",className:"hidden",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&r.size<=5242880&&g((0,s.A)((0,s.A)({},f),{},{businessRegistrationDocument:r}))}})]})]})}),(0,ju.jsx)("div",{className:"bg-white p-4 rounded-lg border-2 border-dashed border-gray-300",children:(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)(Hu,{className:"w-10 h-10 mx-auto mb-2 text-gray-400"}),(0,ju.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:j?"Justificatif domicile soci\xe9t\xe9":"Preuve de r\xe9sidence"}),(j?f.companyProofOfAddress:f.proofOfResidence)?(0,ju.jsxs)("div",{className:"space-y-2",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-center text-green-600",children:[(0,ju.jsx)(Tm,{className:"w-4 h-4 mr-1"}),(0,ju.jsx)("span",{className:"text-sm",children:j?null===(r=f.companyProofOfAddress)||void 0===r?void 0:r.name:null===(n=f.proofOfResidence)||void 0===n?void 0:n.name})]}),(0,ju.jsxs)("label",{className:"inline-flex items-center px-3 py-1 bg-gray-600 text-white text-sm rounded cursor-pointer hover:bg-gray-700",children:[(0,ju.jsx)(Em,{className:"w-3 h-3 mr-1"}),"Changer",(0,ju.jsx)("input",{type:"file",accept:"image/*,.pdf",className:"hidden",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&r.size<=5242880&&g(j?(0,s.A)((0,s.A)({},f),{},{companyProofOfAddress:r}):(0,s.A)((0,s.A)({},f),{},{proofOfResidence:r}))}})]})]}):(0,ju.jsxs)("label",{className:"inline-flex items-center px-3 py-2 bg-green-600 text-white text-sm rounded cursor-pointer hover:bg-green-700",children:[(0,ju.jsx)(Dm,{className:"w-4 h-4 mr-1"}),"Charger",(0,ju.jsx)("input",{type:"file",accept:"image/*,.pdf",className:"hidden",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&r.size<=5242880&&g(j?(0,s.A)((0,s.A)({},f),{},{companyProofOfAddress:r}):(0,s.A)((0,s.A)({},f),{},{proofOfResidence:r}))}})]})]})}),j&&(0,ju.jsx)("div",{className:"bg-white p-4 rounded-lg border-2 border-dashed border-gray-300",children:(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)(Hu,{className:"w-10 h-10 mx-auto mb-2 text-gray-400"}),(0,ju.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Origine des fonds *"}),f.fundsOriginDeclaration?(0,ju.jsxs)("div",{className:"space-y-2",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-center text-green-600",children:[(0,ju.jsx)(Tm,{className:"w-4 h-4 mr-1"}),(0,ju.jsx)("span",{className:"text-sm",children:f.fundsOriginDeclaration.name})]}),(0,ju.jsxs)("label",{className:"inline-flex items-center px-3 py-1 bg-gray-600 text-white text-sm rounded cursor-pointer hover:bg-gray-700",children:[(0,ju.jsx)(Em,{className:"w-3 h-3 mr-1"}),"Changer",(0,ju.jsx)("input",{type:"file",accept:"image/*,.pdf",className:"hidden",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&r.size<=5242880&&g((0,s.A)((0,s.A)({},f),{},{fundsOriginDeclaration:r}))}})]})]}):(0,ju.jsxs)("label",{className:"inline-flex items-center px-3 py-2 bg-green-600 text-white text-sm rounded cursor-pointer hover:bg-green-700",children:[(0,ju.jsx)(Dm,{className:"w-4 h-4 mr-1"}),"Charger",(0,ju.jsx)("input",{type:"file",accept:"image/*,.pdf",className:"hidden",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&r.size<=5242880&&g((0,s.A)((0,s.A)({},f),{},{fundsOriginDeclaration:r}))}})]})]})}),(0,ju.jsx)("div",{className:"bg-white p-4 rounded-lg border-2 border-dashed border-gray-300",children:(0,ju.jsx)("div",{className:"text-center",children:p?(0,ju.jsxs)("div",{children:[(0,ju.jsx)("img",{src:p,alt:"Signature",className:"h-16 mx-auto mb-2"}),(0,ju.jsxs)("button",{type:"button",className:"inline-flex items-center px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-700",onClick:()=>h(!0),children:[(0,ju.jsx)(Em,{className:"w-3 h-3 mr-1"}),"Modifier"]})]}):(0,ju.jsxs)("div",{children:[(0,ju.jsx)(Hu,{className:"w-10 h-10 mx-auto mb-2 text-gray-400"}),(0,ju.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Signature"}),(0,ju.jsxs)("button",{type:"button",className:"inline-flex items-center px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",onClick:()=>h(!0),children:[(0,ju.jsx)(Au,{className:"w-4 h-4 mr-1"}),"Signer"]})]})})})]})]}),j&&(0,ju.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg border-2 border-blue-200",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsx)("h4",{className:"font-semibold text-gray-900",children:"Personnes autoris\xe9es \xe0 g\xe9rer le compte"}),(0,ju.jsxs)("button",{type:"button",onClick:()=>{A(null),N(!0)},className:"inline-flex items-center px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:[(0,ju.jsx)(mm,{className:"w-4 h-4 mr-1"}),"Ajouter signataire"]})]}),v.length>0?(0,ju.jsx)("div",{className:"space-y-3",children:v.map(e=>(0,ju.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"font-medium text-gray-900",children:e.fullName}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600",children:[e.relationshipToCustomer," | ",e.documentType,": ",e.documentNumber]}),(0,ju.jsx)("p",{className:"text-sm text-gray-500",children:e.phoneNumber})]}),(0,ju.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ju.jsx)("button",{type:"button",onClick:()=>(e=>{A(e),N(!0)})(e),className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200",children:"Modifier"}),(0,ju.jsx)("button",{type:"button",onClick:()=>(e=>{y(v.filter(t=>t.id!==e))})(e.id),className:"px-3 py-1 bg-red-100 text-red-700 text-sm rounded hover:bg-red-200",children:(0,ju.jsx)(vm,{className:"w-4 h-4"})})]})]},e.id))}):(0,ju.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Aucun signataire autoris\xe9 ajout\xe9"})]})]}),4===d&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Informations Professionnelles et Financi\xe8res (Optionnel)"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profession"}),(0,ju.jsx)(ya,{name:"occupation",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Enseignant, Commer\xe7ant"}))}})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employeur / Entreprise"}),(0,ju.jsx)(ya,{name:"employerName",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Nom de l'employeur"}))}})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse du travail/commerce"}),(0,ju.jsx)(ya,{name:"workAddress",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Adresse professionnelle"}))}})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Source de revenu"}),(0,ju.jsx)(ya,{name:"incomeSource",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"SALARY",children:"Salaire"}),(0,ju.jsx)("option",{value:"BUSINESS",children:"Commerce"}),(0,ju.jsx)("option",{value:"TRANSFER",children:"Transfert"}),(0,ju.jsx)("option",{value:"AGRICULTURE",children:"Agriculture"}),(0,ju.jsx)("option",{value:"OTHER",children:"Autre"})]}))}})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Revenu mensuel (HTG)"}),(0,ju.jsx)(ya,{name:"monthlyIncome",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},r),{},{type:"number",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:null!==(t=r.value)&&void 0!==t?t:"",placeholder:"Montant du revenu"}))}})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"But de l'ouverture du compte"}),(0,ju.jsx)(ya,{name:"accountPurpose",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: D\xe9p\xf4ts commerciaux, Paiement salaires"}))}})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fr\xe9quence des transactions"}),(0,ju.jsx)(ya,{name:"transactionFrequency",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"DAILY",children:"Quotidienne"}),(0,ju.jsx)("option",{value:"WEEKLY",children:"Hebdomadaire"}),(0,ju.jsx)("option",{value:"MONTHLY",children:"Mensuelle"}),(0,ju.jsx)("option",{value:"SEASONAL",children:"Saisonni\xe8re"})]}))}})]}),!j&&(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Situation matrimoniale"}),(0,ju.jsx)(ya,{name:"maritalStatus",control:E,render:e=>{let{field:t}=e;return(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},t),{},{value:t.value||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"SINGLE",children:"C\xe9libataire"}),(0,ju.jsx)("option",{value:"MARRIED",children:"Mari\xe9(e)"}),(0,ju.jsx)("option",{value:"DIVORCED",children:"Divorc\xe9(e)"}),(0,ju.jsx)("option",{value:"WIDOWED",children:"Veuf/Veuve"})]}))}})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de personnes \xe0 charge"}),(0,ju.jsx)(ya,{name:"numberOfDependents",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"number",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}))}})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Niveau d'\xe9ducation"}),(0,ju.jsx)(ya,{name:"educationLevel",control:E,render:e=>{var t;let{field:r}=e;return(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},r),{},{value:null!==(t=r.value)&&void 0!==t?t:"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"PRIMARY",children:"Primaire"}),(0,ju.jsx)("option",{value:"SECONDARY",children:"Secondaire"}),(0,ju.jsx)("option",{value:"VOCATIONAL",children:"Professionnel"}),(0,ju.jsx)("option",{value:"UNIVERSITY",children:"Universitaire"}),(0,ju.jsx)("option",{value:"NONE",children:"Aucun"})]}))}})]})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Personne de r\xe9f\xe9rence"}),(0,ju.jsx)(ya,{name:"referencePerson",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Nom et contact d'une r\xe9f\xe9rence"}))}})]})]})]}),5===d&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"V\xe9rification et Confirmation"}),(0,ju.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg space-y-4",children:[j?(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Informations de l'Entreprise"}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Raison sociale:"}),(0,ju.jsx)("p",{className:"font-medium",children:k("companyName")})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Forme juridique:"}),(0,ju.jsx)("p",{className:"font-medium",children:k("legalForm")})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Num\xe9ro de commerce:"}),(0,ju.jsx)("p",{className:"font-medium",children:k("businessRegistrationNumber")})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"NIF entreprise:"}),(0,ju.jsx)("p",{className:"font-medium",children:k("companyNif")})]}),(0,ju.jsxs)("div",{className:"col-span-2",children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Adresse du si\xe8ge:"}),(0,ju.jsx)("p",{className:"font-medium",children:k("headOfficeAddress")})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"T\xe9l\xe9phone entreprise:"}),(0,ju.jsx)("p",{className:"font-medium",children:k("companyPhone")})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Email entreprise:"}),(0,ju.jsx)("p",{className:"font-medium",children:k("companyEmail")})]})]}),k("legalRepresentativeName")&&(0,ju.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,ju.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Repr\xe9sentant l\xe9gal"}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Nom:"}),(0,ju.jsx)("p",{className:"font-medium",children:k("legalRepresentativeName")})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Titre:"}),(0,ju.jsx)("p",{className:"font-medium",children:k("legalRepresentativeTitle")})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Pi\xe8ce:"}),(0,ju.jsxs)("p",{className:"font-medium",children:[k("legalRepresentativeDocumentType")," - ",k("legalRepresentativeDocumentNumber")]})]})]})]})]}):(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Informations Personnelles"}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Nom complet:"}),(0,ju.jsxs)("p",{className:"font-medium",children:[k("firstName")," ",k("lastName")]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Date de naissance:"}),(0,ju.jsx)("p",{className:"font-medium",children:k("dateOfBirth")})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Genre:"}),(0,ju.jsx)("p",{className:"font-medium",children:"M"===k("gender")?"Masculin":"F\xe9minin"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"T\xe9l\xe9phone:"}),(0,ju.jsx)("p",{className:"font-medium",children:k("primaryPhone")})]})]})]}),(0,ju.jsxs)("div",{className:"border-t pt-4",children:[(0,ju.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Adresse"}),(0,ju.jsxs)("p",{className:"text-sm",children:[k("street"),", ",k("commune"),", ",k("department")]})]}),(0,ju.jsxs)("div",{className:"border-t pt-4",children:[(0,ju.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Document d'Identit\xe9"}),(0,ju.jsx)("div",{className:"text-sm",children:(e=>{const t=k(j?"legalRepresentativeDocumentType":"documentType"),r=k(j?"legalRepresentativeDocumentNumber":"documentNumber"),n=k(j?"legalRepresentativeIssuingAuthority":"issuingAuthority"),s={[wm.CIN]:"CIN (Carte d'Identit\xe9 Nationale)",[wm.PASSPORT]:"Passeport",[wm.DRIVING_LICENSE]:"Permis de Conduire"},a=t?null!==(e=s[t])&&void 0!==e?e:String(t):"";return(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("p",{children:[a,a&&r?" - ":"",r||""]}),(0,ju.jsxs)("p",{className:"text-gray-600",children:["\xc9mis par: ",n||"\u2014"]})]})})()})]}),(0,ju.jsxs)("div",{className:"border-t pt-4",children:[(0,ju.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Documents Upload\xe9s"}),(0,ju.jsxs)("div",{className:"space-y-2 text-sm",children:[f.photo&&(0,ju.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,ju.jsx)(Tm,{className:"w-4 h-4 mr-2"}),(0,ju.jsx)("span",{children:"Photo du client"})]}),f.idDocument&&(0,ju.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,ju.jsx)(Tm,{className:"w-4 h-4 mr-2"}),(0,ju.jsx)("span",{children:"Pi\xe8ce d'identit\xe9"})]}),f.businessRegistrationDocument&&(0,ju.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,ju.jsx)(Tm,{className:"w-4 h-4 mr-2"}),(0,ju.jsx)("span",{children:"Extrait du registre de commerce"})]}),(f.companyProofOfAddress||f.proofOfResidence)&&(0,ju.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,ju.jsx)(Tm,{className:"w-4 h-4 mr-2"}),(0,ju.jsx)("span",{children:"Justificatif de domicile"})]}),f.fundsOriginDeclaration&&(0,ju.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,ju.jsx)(Tm,{className:"w-4 h-4 mr-2"}),(0,ju.jsx)("span",{children:"D\xe9claration origine des fonds"})]}),p&&(0,ju.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,ju.jsx)(Tm,{className:"w-4 h-4 mr-2"}),(0,ju.jsx)("span",{children:"Signature"})]})]})]}),j&&v.length>0&&(0,ju.jsxs)("div",{className:"border-t pt-4",children:[(0,ju.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Signataires autoris\xe9s"}),(0,ju.jsx)("div",{className:"space-y-2 text-sm",children:v.map((e,t)=>(0,ju.jsxs)("div",{className:"flex items-start",children:[(0,ju.jsxs)("span",{className:"font-medium text-gray-700 mr-2",children:[t+1,"."]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"font-medium",children:e.fullName}),(0,ju.jsxs)("p",{className:"text-gray-600",children:[e.relationshipToCustomer," - ",e.phoneNumber]})]})]},e.id))})]})]}),(0,ju.jsxs)("div",{className:"bg-yellow-50 p-6 rounded-lg border-2 border-yellow-200",children:[(0,ju.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"D\xe9claration et Acceptation"}),(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"flex items-start",children:[(0,ju.jsx)(ya,{name:"acceptTerms",control:E,render:e=>{let{field:{value:t,onChange:r,onBlur:n,name:s,ref:a}}=e;return(0,ju.jsx)("input",{type:"checkbox",name:s,ref:a,checked:!!t,onChange:e=>r(e.target.checked),onBlur:n,className:"mt-1 mr-3 h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-800 font-medium mb-2",children:"Je certifie que les informations fournies dans ce formulaire sont exactes et compl\xe8tes."}),(0,ju.jsx)("p",{className:"text-xs text-gray-600",children:"Je comprends que la banque se r\xe9serve le droit de demander des documents suppl\xe9mentaires ou d'effectuer toute v\xe9rification jug\xe9e n\xe9cessaire."})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fait \xe0 *"}),(0,ju.jsx)(ya,{name:"signaturePlace",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ville"}))}})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Le *"}),(0,ju.jsx)(ya,{name:"signatureDate",control:E,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",(0,s.A)((0,s.A)({},t),{},{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}))}})]})]}),p&&(0,ju.jsxs)("div",{className:"pt-4 border-t",children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Signature du ",j?"repr\xe9sentant l\xe9gal":"client"]}),(0,ju.jsx)("img",{src:p,alt:"Signature",className:"h-20 border border-gray-300 rounded p-2 bg-white"})]})]})]})]}),(0,ju.jsxs)("div",{className:"flex justify-between pt-6 border-t",children:[(0,ju.jsx)("button",{type:"button",onClick:()=>d>1?u(d-1):i(),className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:l,children:1===d?"Annuler":"Pr\xe9c\xe9dent"}),d<5?(0,ju.jsx)("button",{type:"button",onClick:F,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Suivant"}):(0,ju.jsxs)("button",{type:"submit",disabled:l,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2",children:[l&&(0,ju.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,ju.jsx)("span",{children:"Cr\xe9er le Client"})]})]})]}),m&&(0,ju.jsx)(km,{onSave:e=>{x(e),h(!1)},onCancel:()=>h(!1)}),b&&(0,ju.jsx)(Um,{signer:S,onSave:e=>{y(S?v.map(t=>t.id===S.id?e:t):[...v,(0,s.A)((0,s.A)({},e),{},{id:Date.now().toString()})]),N(!1),A(null)},onCancel:()=>{N(!1),A(null)}})]})};function Hm(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={}),function(n,s,a){try{return Promise.resolve(function(i,l){try{var o=(t.context,Promise.resolve(e["sync"===r.mode?"validateSync":"validate"](n,Object.assign({abortEarly:!1},t,{context:s}))).then(function(e){return a.shouldUseNativeValidation&&si({},a),{values:r.raw?n:e,errors:{}}}))}catch(mn){return l(mn)}return o&&o.then?o.then(void 0,l):o}(0,function(e){if(!e.inner)throw e;return{values:{},errors:ai((t=e,r=!a.shouldUseNativeValidation&&"all"===a.criteriaMode,(t.inner||[]).reduce(function(e,t){if(e[t.path]||(e[t.path]={message:t.message,type:t.type}),r){var n=e[t.path].types,s=n&&n[t.type];e[t.path]=ba(t.path,r,e,t.type,s?[].concat(s,t.message):t.message)}return e},{})),a)};var t,r}))}catch(mn){return Promise.reject(mn)}}}var zm=r(8974),Gm=r(2816),Vm=r(2551),Wm=r.n(Vm);const qm=Object.prototype.toString,$m=Error.prototype.toString,Km=RegExp.prototype.toString,Xm="undefined"!==typeof Symbol?Symbol.prototype.toString:()=>"",Ym=/^Symbol\((.*)\)(.*)$/;function Jm(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||!0===e||!1===e)return""+e;const r=typeof e;if("number"===r)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===r)return t?'"'.concat(e,'"'):e;if("function"===r)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===r)return Xm.call(e).replace(Ym,"Symbol($1)");const n=qm.call(e).slice(8,-1);return"Date"===n?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===n||e instanceof Error?"["+$m.call(e)+"]":"RegExp"===n?Km.call(e):null}function Zm(e,t){let r=Jm(e,t);return null!==r?r:JSON.stringify(e,function(e,r){let n=Jm(this[e],t);return null!==n?n:r},2)}function Qm(e){return null==e?[]:[].concat(e)}let eh,th,rh,nh=/\$\{\s*(\w+)\s*\}/g;eh=Symbol.toStringTag;class sh{constructor(e,t,r,n){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[eh]="Error",this.name="ValidationError",this.value=t,this.path=r,this.type=n,this.errors=[],this.inner=[],Qm(e).forEach(e=>{if(ah.isError(e)){this.errors.push(...e.errors);const t=e.inner.length?e.inner:[e];this.inner.push(...t)}else this.errors.push(e)}),this.message=this.errors.length>1?"".concat(this.errors.length," errors occurred"):this.errors[0]}}th=Symbol.hasInstance,rh=Symbol.toStringTag;class ah extends Error{static formatError(e,t){const r=t.label||t.path||"this";return t=Object.assign({},t,{path:r,originalPath:t.path}),"string"===typeof e?e.replace(nh,(e,r)=>Zm(t[r])):"function"===typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,r,n,s){const a=new sh(e,t,r,n);if(s)return a;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[rh]="Error",this.name=a.name,this.message=a.message,this.type=a.type,this.value=a.value,this.path=a.path,this.errors=a.errors,this.inner=a.inner,Error.captureStackTrace&&Error.captureStackTrace(this,ah)}static[th](e){return sh[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let ih={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:e=>{let{path:t,type:r,value:n,originalValue:s}=e;const a=null!=s&&s!==n?" (cast from the value `".concat(Zm(s,!0),"`)."):".";return"mixed"!==r?"".concat(t," must be a `").concat(r,"` type, ")+"but the final value was: `".concat(Zm(n,!0),"`")+a:"".concat(t," must match the configured type. ")+"The validated value was: `".concat(Zm(n,!0),"`")+a}},lh={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},oh={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},ch={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},dh={isValue:"${path} field must be ${value}"},uh={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},mh={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},hh={notType:e=>{const{path:t,value:r,spec:n}=e,s=n.types.length;if(Array.isArray(r)){if(r.length<s)return"".concat(t," tuple value has too few items, expected a length of ").concat(s," but got ").concat(r.length," for value: `").concat(Zm(r,!0),"`");if(r.length>s)return"".concat(t," tuple value has too many items, expected a length of ").concat(s," but got ").concat(r.length," for value: `").concat(Zm(r,!0),"`")}return ah.formatError(ih.notType,e)}};Object.assign(Object.create(null),{mixed:ih,string:lh,number:oh,date:ch,object:uh,array:mh,boolean:dh,tuple:hh});const ph=e=>e&&e.__isYupSchema__;class xh{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:n,otherwise:s}=t,a="function"===typeof r?r:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(e=>e===r)};return new xh(e,(e,t)=>{var r;let i=a(...e)?n:s;return null!=(r=null==i?void 0:i(t))?r:t})}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let r=this.refs.map(e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context)),n=this.fn(r,e,t);if(void 0===n||n===e)return e;if(!ph(n))throw new TypeError("conditions must return a schema object");return n.resolve(t)}}const fh="$",gh=".";class vh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===fh,this.isValue=this.key[0]===gh,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?fh:this.isValue?gh:"";this.path=this.key.slice(r.length),this.getter=this.path&&(0,zm.getter)(this.path,!0),this.map=t.map}getValue(e,t,r){let n=this.isContext?r:this.isValue?e:t;return this.getter&&(n=this.getter(n||{})),this.map&&(n=this.map(n)),n}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return"Ref(".concat(this.key,")")}static isRef(e){return e&&e.__isYupRef}}vh.prototype.__isYupRef=!0;const yh=e=>null==e;function bh(e){function t(t,r,n){let{value:s,path:a="",options:i,originalValue:l,schema:o}=t;const{name:c,test:d,params:u,message:m,skipAbsent:h}=e;let{parent:p,context:x,abortEarly:f=o.spec.abortEarly,disableStackTrace:g=o.spec.disableStackTrace}=i;const v={value:s,parent:p,context:x};function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Nh(Object.assign({value:s,originalValue:l,label:o.spec.label,path:e.path||a,spec:o.spec,disableStackTrace:e.disableStackTrace||g},u,e.params),v),r=new ah(ah.formatError(e.message||m,t),s,t.path,e.type||c,t.disableStackTrace);return r.params=t,r}const b=f?r:n;let N={path:a,parent:p,type:c,from:i.from,createError:y,resolve:e=>jh(e,v),options:i,originalValue:l,schema:o};const j=e=>{ah.isError(e)?b(e):e?n(null):b(y())},w=e=>{ah.isError(e)?b(e):r(e)};if(h&&yh(s))return j(!0);let S;try{var A;if(S=d.call(N,s,N),"function"===typeof(null==(A=S)?void 0:A.then)){if(i.sync)throw new Error('Validation test of type: "'.concat(N.type,'" returned a Promise during a synchronous validate. ')+"This test will finish after the validate call has returned");return Promise.resolve(S).then(j,w)}}catch(T){return void w(T)}j(S)}return t.OPTIONS=e,t}function Nh(e,t){if(!e)return e;for(const r of Object.keys(e))e[r]=jh(e[r],t);return e}function jh(e,t){return vh.isRef(e)?e.getValue(t.value,t.parent,t.context):e}function wh(e,t,r){let n,s,a,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;return t?((0,zm.forEach)(t,(l,o,c)=>{let d=o?l.slice(1,l.length-1):l,u="tuple"===(e=e.resolve({context:i,parent:n,value:r})).type,m=c?parseInt(d,10):0;if(e.innerType||u){if(u&&!c)throw new Error('Yup.reach cannot implicitly index into a tuple type. the path part "'.concat(a,'" must contain an index to the tuple element, e.g. "').concat(a,'[0]"'));if(r&&m>=r.length)throw new Error("Yup.reach cannot resolve an array item at index: ".concat(l,", in the path: ").concat(t,". ")+"because there is no value at that index. ");n=r,r=r&&r[m],e=u?e.spec.types[m]:e.innerType}if(!c){if(!e.fields||!e.fields[d])throw new Error("The schema does not contain the path: ".concat(t,". ")+"(failed at: ".concat(a,' which is a type: "').concat(e.type,'")'));n=r,r=r&&r[d],e=e.fields[d]}s=d,a=o?"["+l+"]":"."+l}),{schema:e,parent:n,parentPath:s}):{parent:n,parentPath:t,schema:e}}class Sh extends Set{describe(){const e=[];for(const t of this.values())e.push(vh.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const r of this.values())t.push(e(r));return t}clone(){return new Sh(this.values())}merge(e,t){const r=this.clone();return e.forEach(e=>r.add(e)),t.forEach(e=>r.delete(e)),r}}function Ah(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(ph(e)||!e||"object"!==typeof e)return e;if(r.has(e))return r.get(e);if(e instanceof Date)t=new Date(e.getTime()),r.set(e,t);else if(e instanceof RegExp)t=new RegExp(e),r.set(e,t);else if(Array.isArray(e)){t=new Array(e.length),r.set(e,t);for(let n=0;n<e.length;n++)t[n]=Ah(e[n],r)}else if(e instanceof Map){t=new Map,r.set(e,t);for(const[n,s]of e.entries())t.set(n,Ah(s,r))}else if(e instanceof Set){t=new Set,r.set(e,t);for(const n of e)t.add(Ah(n,r))}else{if(!(e instanceof Object))throw Error("Unable to clone ".concat(e));t={},r.set(e,t);for(const[n,s]of Object.entries(e))t[n]=Ah(s,r)}return t}function Th(e){if(null==e||!e.length)return;const t=[];let r="",n=!1,s=!1;for(let a=0;a<e.length;a++){const i=e[a];"["!==i||s?"]"!==i||s?'"'!==i?"."!==i||n||s?r+=i:r&&(t.push(r),r=""):s=!s:(r&&(/^\d+$/.test(r)?t.push(r):t.push(r.replace(/^"|"$/g,"")),r=""),n=!1):(r&&(t.push(...r.split(".").filter(Boolean)),r=""),n=!0)}return r&&t.push(...r.split(".").filter(Boolean)),t}function Ch(e,t){var r;if((null==(r=e.inner)||!r.length)&&e.errors.length)return function(e,t){const r=t?"".concat(t,".").concat(e.path):e.path;return e.errors.map(e=>({message:e,path:Th(r)}))}(e,t);const n=t?"".concat(t,".").concat(e.path):e.path;return e.inner.flatMap(e=>Ch(e,n))}class Eh{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new Sh,this._blacklist=new Sh,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(ih.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},null==e?void 0:e.spec),this.withMutation(e=>{e.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=Ah(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(){if(0===arguments.length)return this.spec.meta;let e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},arguments.length<=0?void 0:arguments[0]),e}withMutation(e){let t=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=t,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError("You cannot `concat()` schema's of different types: ".concat(this.type," and ").concat(e.type));let t=this,r=e.clone();const n=Object.assign({},t.spec,r.spec);return r.spec=n,r.internalTests=Object.assign({},t.internalTests,r.internalTests),r._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),r.tests=t.tests,r.exclusiveTests=t.exclusiveTests,r.withMutation(t=>{e.tests.forEach(e=>{t.test(e.OPTIONS)})}),r.transforms=[...t.transforms,...r.transforms],r}isType(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let r=t.conditions;t=t.clone(),t.conditions=[],t=r.reduce((t,r)=>r.resolve(t,e),t),t=t.resolve(e)}return t}resolveOptions(e){var t,r,n,s;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(r=e.abortEarly)?r:this.spec.abortEarly,recursive:null!=(n=e.recursive)?n:this.spec.recursive,disableStackTrace:null!=(s=e.disableStackTrace)?s:this.spec.disableStackTrace})}cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.resolve(Object.assign({},t,{value:e})),n="ignore-optionality"===t.assert,s=r._cast(e,t);if(!1!==t.assert&&!r.isType(s)){if(n&&yh(s))return s;let a=Zm(e),i=Zm(s);throw new TypeError("The value of ".concat(t.path||"field"," could not be cast to a value ")+'that satisfies the schema type: "'.concat(r.type,'". \n\n')+"attempted value: ".concat(a," \n")+(i!==a?"result of cast: ".concat(i):""))}return s}_cast(e,t){let r=void 0===e?e:this.transforms.reduce((r,n)=>n.call(this,r,e,this,t),e);return void 0===r&&(r=this.getDefault(t)),r}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,{path:s,originalValue:a=e,strict:i=this.spec.strict}=t,l=e;i||(l=this._cast(l,Object.assign({assert:!1},t)));let o=[];for(let c of Object.values(this.internalTests))c&&o.push(c);this.runTests({path:s,value:l,originalValue:a,options:t,tests:o},r,e=>{if(e.length)return n(e,l);this.runTests({path:s,value:l,originalValue:a,options:t,tests:this.tests},r,n)})}runTests(e,t,r){let n=!1,{tests:s,value:a,originalValue:i,path:l,options:o}=e,c=e=>{n||(n=!0,t(e,a))},d=e=>{n||(n=!0,r(e,a))},u=s.length,m=[];if(!u)return d([]);let h={value:a,originalValue:i,path:l,options:o,schema:this};for(let p=0;p<s.length;p++){(0,s[p])(h,c,function(e){e&&(Array.isArray(e)?m.push(...e):m.push(e)),--u<=0&&d(m)})}}asNestedTest(e){let{key:t,index:r,parent:n,parentPath:s,originalParent:a,options:i}=e;const l=null!=t?t:r;if(null==l)throw TypeError("Must include `key` or `index` for nested validations");const o="number"===typeof l;let c=n[l];const d=Object.assign({},i,{strict:!0,parent:n,value:c,originalValue:a[l],key:void 0,[o?"index":"key"]:l,path:o||l.includes(".")?"".concat(s||"","[").concat(o?l:'"'.concat(l,'"'),"]"):(s?"".concat(s,"."):"")+t});return(e,t,r)=>this.resolve(d)._validate(c,d,t,r)}validate(e,t){var r;let n=this.resolve(Object.assign({},t,{value:e})),s=null!=(r=null==t?void 0:t.disableStackTrace)?r:n.spec.disableStackTrace;return new Promise((r,a)=>n._validate(e,t,(e,t)=>{ah.isError(e)&&(e.value=t),a(e)},(e,t)=>{e.length?a(new ah(e,t,void 0,void 0,s)):r(t)}))}validateSync(e,t){var r;let n,s=this.resolve(Object.assign({},t,{value:e})),a=null!=(r=null==t?void 0:t.disableStackTrace)?r:s.spec.disableStackTrace;return s._validate(e,Object.assign({},t,{sync:!0}),(e,t)=>{throw ah.isError(e)&&(e.value=t),e},(t,r)=>{if(t.length)throw new ah(t,e,void 0,void 0,a);n=r}),n}isValid(e,t){return this.validate(e,t).then(()=>!0,e=>{if(ah.isError(e))return!1;throw e})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(r){if(ah.isError(r))return!1;throw r}}_getDefault(e){let t=this.spec.default;return null==t?t:"function"===typeof t?t.call(this,e):Ah(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){if(0===arguments.length)return this._getDefault();return this.clone({default:e})}strict(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.clone({strict:e})}nullability(e,t){const r=this.clone({nullable:e});return r.internalTests.nullable=bh({message:t,name:"nullable",test(e){return null!==e||this.schema.spec.nullable}}),r}optionality(e,t){const r=this.clone({optional:e});return r.internalTests.optionality=bh({message:t,name:"optionality",test(e){return void 0!==e||this.schema.spec.optional}}),r}optional(){return this.optionality(!0)}defined(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ih.defined;return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ih.notNull;return this.nullability(!1,e)}required(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ih.required;return this.clone().withMutation(t=>t.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let t=this.clone();return t.transforms.push(e),t}test(){let e;if(e=1===arguments.length?"function"===typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]},void 0===e.message&&(e.message=ih.default),"function"!==typeof e.test)throw new TypeError("`test` is a required parameters");let t=this.clone(),r=bh(e),n=e.exclusive||e.name&&!0===t.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(t.exclusiveTests[e.name]=!!e.exclusive),t.tests=t.tests.filter(t=>{if(t.OPTIONS.name===e.name){if(n)return!1;if(t.OPTIONS.test===r.OPTIONS.test)return!1}return!0}),t.tests.push(r),t}when(e,t){Array.isArray(e)||"string"===typeof e||(t=e,e=".");let r=this.clone(),n=Qm(e).map(e=>new vh(e));return n.forEach(e=>{e.isSibling&&r.deps.push(e.key)}),r.conditions.push("function"===typeof t?new xh(n,t):xh.fromOptions(n,t)),r}typeError(e){let t=this.clone();return t.internalTests.typeError=bh({message:e,name:"typeError",skipAbsent:!0,test(e){return!!this.schema._typeCheck(e)||this.createError({params:{type:this.schema.type}})}}),t}oneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ih.oneOf,r=this.clone();return e.forEach(e=>{r._whitelist.add(e),r._blacklist.delete(e)}),r.internalTests.whiteList=bh({message:t,name:"oneOf",skipAbsent:!0,test(e){let t=this.schema._whitelist,r=t.resolveAll(this.resolve);return!!r.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:r}})}}),r}notOneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ih.notOneOf,r=this.clone();return e.forEach(e=>{r._blacklist.add(e),r._whitelist.delete(e)}),r.internalTests.blacklist=bh({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist,r=t.resolveAll(this.resolve);return!r.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:r}})}}),r}strip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:r,meta:n,optional:s,nullable:a}=t.spec,i={meta:n,label:r,optional:s,nullable:a,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.filter((e,t,r)=>r.findIndex(t=>t.OPTIONS.name===e.OPTIONS.name)===t).map(t=>{const r=t.OPTIONS.params&&e?Nh(Object.assign({},t.OPTIONS.params),e):t.OPTIONS.params;return{name:t.OPTIONS.name,params:r}})};return i}get"~standard"(){const e=this;return{version:1,vendor:"yup",async validate(t){try{return{value:await e.validate(t,{abortEarly:!1})}}catch(r){if(r instanceof ah)return{issues:Ch(r)};throw r}}}}}Eh.prototype.__isYupSchema__=!0;for(const r of["validate","validateSync"])Eh.prototype["".concat(r,"At")]=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{parent:s,parentPath:a,schema:i}=wh(this,e,t,n.context);return i[r](s&&s[a],Object.assign({},n,{parent:s,path:e}))};for(const r of["equals","is"])Eh.prototype[r]=Eh.prototype.oneOf;for(const r of["not","nope"])Eh.prototype[r]=Eh.prototype.notOneOf;const Dh=()=>!0;class kh extends Eh{constructor(e){super("function"===typeof e?{type:"mixed",check:e}:Object.assign({type:"mixed",check:Dh},e))}}kh.prototype;class Rh extends Eh{constructor(){super({type:"boolean",check:e=>(e instanceof Boolean&&(e=e.valueOf()),"boolean"===typeof e)}),this.withMutation(()=>{this.transform((e,t)=>{if(this.spec.coerce&&!this.isType(e)){if(/^(true|1)$/i.test(String(e)))return!0;if(/^(false|0)$/i.test(String(e)))return!1}return e})})}isTrue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dh.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"true"},test:e=>yh(e)||!0===e})}isFalse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dh.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"false"},test:e=>yh(e)||!1===e})}default(e){return super.default(e)}defined(e){return super.defined(e)}optional(){return super.optional()}required(e){return super.required(e)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(e){return super.nonNullable(e)}strip(e){return super.strip(e)}}Rh.prototype;const _h=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function Ih(e){var t,r;const n=_h.exec(e);return n?{year:Ph(n[1]),month:Ph(n[2],1)-1,day:Ph(n[3],1),hour:Ph(n[4]),minute:Ph(n[5]),second:Ph(n[6]),millisecond:n[7]?Ph(n[7].substring(0,3)):0,precision:null!=(t=null==(r=n[7])?void 0:r.length)?t:void 0,z:n[8]||void 0,plusMinus:n[9]||void 0,hourOffset:Ph(n[10]),minuteOffset:Ph(n[11])}:null}function Ph(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number(e)||t}let Oh=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Lh=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Fh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Mh=new RegExp("".concat("^\\d{4}-\\d{2}-\\d{2}","T").concat("\\d{2}:\\d{2}:\\d{2}","(\\.\\d+)?").concat("(([+-]\\d{2}(:?\\d{2})?)|Z)","$")),Uh=e=>yh(e)||e===e.trim(),Bh={}.toString();function Hh(){return new zh}class zh extends Eh{constructor(){super({type:"string",check:e=>(e instanceof String&&(e=e.valueOf()),"string"===typeof e)}),this.withMutation(()=>{this.transform((e,t)=>{if(!this.spec.coerce||this.isType(e))return e;if(Array.isArray(e))return e;const r=null!=e&&e.toString?e.toString():e;return r===Bh?e:r})})}required(e){return super.required(e).withMutation(t=>t.test({message:e||ih.required,name:"required",skipAbsent:!0,test:e=>!!e.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(e=>"required"!==e.OPTIONS.name),e))}length(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lh.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lh.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lh.max;return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}matches(e,t){let r,n,s=!1;return t&&("object"===typeof t?({excludeEmptyString:s=!1,message:r,name:n}=t):r=t),this.test({name:n||"matches",message:r||lh.matches,params:{regex:e},skipAbsent:!0,test:t=>""===t&&s||-1!==t.search(e)})}email(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lh.email;return this.matches(Oh,{name:"email",message:e,excludeEmptyString:!0})}url(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lh.url;return this.matches(Lh,{name:"url",message:e,excludeEmptyString:!0})}uuid(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lh.uuid;return this.matches(Fh,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t,r,n="";return e&&("object"===typeof e?({message:n="",allowOffset:t=!1,precision:r}=e):n=e),this.matches(Mh,{name:"datetime",message:n||lh.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||lh.datetime_offset,params:{allowOffset:t},skipAbsent:!0,test:e=>{if(!e||t)return!0;const r=Ih(e);return!!r&&!!r.z}}).test({name:"datetime_precision",message:n||lh.datetime_precision,params:{precision:r},skipAbsent:!0,test:e=>{if(!e||void 0==r)return!0;const t=Ih(e);return!!t&&t.precision===r}})}ensure(){return this.default("").transform(e=>null===e?"":e)}trim(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lh.trim;return this.transform(e=>null!=e?e.trim():e).test({message:e,name:"trim",test:Uh})}lowercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lh.lowercase;return this.transform(e=>yh(e)?e:e.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>yh(e)||e===e.toLowerCase()})}uppercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lh.uppercase;return this.transform(e=>yh(e)?e:e.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>yh(e)||e===e.toUpperCase()})}}Hh.prototype=zh.prototype;function Gh(){return new Vh}class Vh extends Eh{constructor(){super({type:"number",check:e=>(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&!(e=>e!=+e)(e))}),this.withMutation(()=>{this.transform((e,t)=>{if(!this.spec.coerce)return e;let r=e;if("string"===typeof r){if(r=r.replace(/\s/g,""),""===r)return NaN;r=+r}return this.isType(r)||null===r?r:parseFloat(r)})})}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oh.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t>=this.resolve(e)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oh.max;return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(t){return t<=this.resolve(e)}})}lessThan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oh.lessThan;return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(t){return t<this.resolve(e)}})}moreThan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oh.moreThan;return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(t){return t>this.resolve(e)}})}positive(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oh.positive;return this.moreThan(0,e)}negative(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oh.negative;return this.lessThan(0,e)}integer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oh.integer;return this.test({name:"integer",message:e,skipAbsent:!0,test:e=>Number.isInteger(e)})}truncate(){return this.transform(e=>yh(e)?e:0|e)}round(e){var t;let r=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===r.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+r.join(", "));return this.transform(t=>yh(t)?t:Math[e](t))}}Gh.prototype=Vh.prototype;let Wh=new Date("");function qh(){return new $h}class $h extends Eh{constructor(){super({type:"date",check(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}}),this.withMutation(()=>{this.transform((e,t)=>!this.spec.coerce||this.isType(e)||null===e?e:(e=function(e){const t=Ih(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(void 0===t.z&&void 0===t.plusMinus)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let r=0;return"Z"!==t.z&&void 0!==t.plusMinus&&(r=60*t.hourOffset+t.minuteOffset,"+"===t.plusMinus&&(r=0-r)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+r,t.second,t.millisecond)}(e),isNaN(e)?$h.INVALID_DATE:new Date(e)))})}prepareParam(e,t){let r;if(vh.isRef(e))r=e;else{let n=this.cast(e);if(!this._typeCheck(n))throw new TypeError("`".concat(t,"` must be a Date or a value that can be `cast()` to a Date"));r=n}return r}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ch.min,r=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(e){return e>=this.resolve(r)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ch.max,r=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(e){return e<=this.resolve(r)}})}}function Kh(e,t){let r=1/0;return e.some((e,n)=>{var s;if(null!=(s=t.path)&&s.includes(e))return r=n,!0}),r}function Xh(e){return(t,r)=>Kh(e,t)-Kh(e,r)}$h.INVALID_DATE=Wh,qh.prototype=$h.prototype,qh.INVALID_DATE=Wh;const Yh=(e,t,r)=>{if("string"!==typeof e)return e;let n=e;try{n=JSON.parse(e)}catch(s){}return r.isType(n)?n:e};function Jh(e){if("fields"in e){const t={};for(const[r,n]of Object.entries(e.fields))t[r]=Jh(n);return e.setFields(t)}if("array"===e.type){const t=e.optional();return t.innerType&&(t.innerType=Jh(t.innerType)),t}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map(Jh)}):"optional"in e?e.optional():e}let Zh=e=>"[object Object]"===Object.prototype.toString.call(e);function Qh(e,t){let r=Object.keys(e.fields);return Object.keys(t).filter(e=>-1===r.indexOf(e))}const ep=Xh([]);function tp(e){return new rp(e)}class rp extends Eh{constructor(e){super({type:"object",check:e=>Zh(e)||"function"===typeof e}),this.fields=Object.create(null),this._sortErrors=ep,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;let n=super._cast(e,t);if(void 0===n)return this.getDefault(t);if(!this._typeCheck(n))return n;let s=this.fields,a=null!=(r=t.stripUnknown)?r:this.spec.noUnknown,i=[].concat(this._nodes,Object.keys(n).filter(e=>!this._nodes.includes(e))),l={},o=Object.assign({},t,{parent:l,__validating:t.__validating||!1}),c=!1;for(const d of i){let e=s[d],r=d in n,i=n[d];if(e){let r;o.path=(t.path?"".concat(t.path,"."):"")+d,e=e.resolve({value:i,context:t.context,parent:l});let s=e instanceof Eh?e.spec:void 0,a=null==s?void 0:s.strict;if(null!=s&&s.strip){c=c||d in n;continue}r=t.__validating&&a?i:e.cast(i,o),void 0!==r&&(l[d]=r)}else r&&!a&&(l[d]=i);r===d in l&&l[d]===i||(c=!0)}return c?l:n}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,{from:s=[],originalValue:a=e,recursive:i=this.spec.recursive}=t;t.from=[{schema:this,value:a},...s],t.__validating=!0,t.originalValue=a,super._validate(e,t,r,(e,s)=>{if(!i||!Zh(s))return void n(e,s);a=a||s;let l=[];for(let r of this._nodes){let e=this.fields[r];e&&!vh.isRef(e)&&l.push(e.asNestedTest({options:t,key:r,parent:s,parentPath:t.path,originalParent:a}))}this.runTests({tests:l,value:s,originalValue:a,options:t},r,t=>{n(t.sort(this._sortErrors).concat(e),s)})})}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),r=t.fields;for(let[n,s]of Object.entries(this.fields)){const e=r[n];r[n]=void 0===e?s:e}return t.withMutation(t=>t.setFields(r,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach(r=>{var n;const s=this.fields[r];let a=e;null!=(n=a)&&n.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[r]})),t[r]=s&&"getDefault"in s?s.getDefault(a):void 0}),t}setFields(e,t){let r=this.clone();return r.fields=e,r._nodes=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[],n=new Set,s=new Set(t.map(e=>{let[t,r]=e;return"".concat(t,"-").concat(r)}));function a(e,t){let a=(0,zm.split)(e)[0];n.add(a),s.has("".concat(t,"-").concat(a))||r.push([t,a])}for(const i of Object.keys(e)){let t=e[i];n.add(i),vh.isRef(t)&&t.isSibling?a(t.path,i):ph(t)&&"deps"in t&&t.deps.forEach(e=>a(e,i))}return Wm().array(Array.from(n),r).reverse()}(e,t),r._sortErrors=Xh(Object.keys(e)),t&&(r._excludedEdges=t),r}shape(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.clone().withMutation(r=>{let n=r._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),n=[...r._excludedEdges,...t]),r.setFields(Object.assign(r.fields,e),n)})}partial(){const e={};for(const[t,r]of Object.entries(this.fields))e[t]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(e)}deepPartial(){return Jh(this)}pick(e){const t={};for(const r of e)this.fields[r]&&(t[r]=this.fields[r]);return this.setFields(t,this._excludedEdges.filter(t=>{let[r,n]=t;return e.includes(r)&&e.includes(n)}))}omit(e){const t=[];for(const r of Object.keys(this.fields))e.includes(r)||t.push(r);return this.pick(t)}from(e,t,r){let n=(0,zm.getter)(e,!0);return this.transform(s=>{if(!s)return s;let a=s;return((e,t)=>{const r=[...(0,zm.normalizePath)(t)];if(1===r.length)return r[0]in e;let n=r.pop(),s=(0,zm.getter)((0,zm.join)(r),!0)(e);return!(!s||!(n in s))})(s,e)&&(a=Object.assign({},s),r||delete a[e],a[t]=n(s)),a})}json(){return this.transform(Yh)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||uh.exact,test(e){if(null==e)return!0;const t=Qh(this.schema,e);return 0===t.length||this.createError({params:{properties:t.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uh.noUnknown;"boolean"!==typeof e&&(t=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const r=Qh(this.schema,t);return!e||0===r.length||this.createError({params:{unknown:r.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uh.noUnknown;return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>{if(!t)return t;const r={};for(const n of Object.keys(t))r[e(n)]=t[n];return r})}camelCase(){return this.transformKeys(Gm.camelCase)}snakeCase(){return this.transformKeys(Gm.snakeCase)}constantCase(){return this.transformKeys(e=>(0,Gm.snakeCase)(e).toUpperCase())}describe(e){const t=(e?this.resolve(e):this).clone(),r=super.describe(e);r.fields={};for(const[s,a]of Object.entries(t.fields)){var n;let t=e;null!=(n=t)&&n.value&&(t=Object.assign({},t,{parent:t.value,value:t.value[s]})),r.fields[s]=a.describe(t)}return r}}tp.prototype=rp.prototype;class np extends Eh{constructor(e){super({type:"array",spec:{types:e},check:e=>Array.isArray(e)}),this.innerType=void 0,this.innerType=e}_cast(e,t){const r=super._cast(e,t);if(!this._typeCheck(r)||!this.innerType)return r;let n=!1;const s=r.map((e,s)=>{const a=this.innerType.cast(e,Object.assign({},t,{path:"".concat(t.path||"","[").concat(s,"]"),parent:r,originalValue:e,value:e,index:s}));return a!==e&&(n=!0),a});return n?s:r}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;var s;let a=this.innerType,i=null!=(s=t.recursive)?s:this.spec.recursive;null!=t.originalValue&&t.originalValue,super._validate(e,t,r,(s,l)=>{var o;if(!i||!a||!this._typeCheck(l))return void n(s,l);let c=new Array(l.length);for(let r=0;r<l.length;r++){var d;c[r]=a.asNestedTest({options:t,index:r,parent:l,parentPath:t.path,originalParent:null!=(d=t.originalValue)?d:e})}this.runTests({value:l,tests:c,originalValue:null!=(o=t.originalValue)?o:e,options:t},r,e=>n(e.concat(s),l))})}clone(e){const t=super.clone(e);return t.innerType=this.innerType,t}json(){return this.transform(Yh)}concat(e){let t=super.concat(e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}of(e){let t=this.clone();if(!ph(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+Zm(e));return t.innerType=e,t.spec=Object.assign({},t.spec,{types:e}),t}length(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mh.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e,t){return t=t||mh.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e,t){return t=t||mh.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}ensure(){return this.default(()=>[]).transform((e,t)=>this._typeCheck(e)?e:null==t?[]:[].concat(t))}compact(e){let t=e?(t,r,n)=>!e(t,r,n):e=>!!e;return this.transform(e=>null!=e?e.filter(t):e)}describe(e){const t=(e?this.resolve(e):this).clone(),r=super.describe(e);if(t.innerType){var n;let s=e;null!=(n=s)&&n.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[0]})),r.innerType=t.innerType.describe(s)}return r}}np.prototype;class sp extends Eh{constructor(e){super({type:"tuple",spec:{types:e},check(e){const t=this.spec.types;return Array.isArray(e)&&e.length===t.length}}),this.withMutation(()=>{this.typeError(hh.notType)})}_cast(e,t){const{types:r}=this.spec,n=super._cast(e,t);if(!this._typeCheck(n))return n;let s=!1;const a=r.map((e,r)=>{const a=e.cast(n[r],Object.assign({},t,{path:"".concat(t.path||"","[").concat(r,"]"),parent:n,originalValue:n[r],value:n[r],index:r}));return a!==n[r]&&(s=!0),a});return s?a:n}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=this.spec.types;super._validate(e,t,r,(a,i)=>{var l;if(!this._typeCheck(i))return void n(a,i);let o=[];for(let[r,n]of s.entries()){var c;o[r]=n.asNestedTest({options:t,index:r,parent:i,parentPath:t.path,originalParent:null!=(c=t.originalValue)?c:e})}this.runTests({value:i,tests:o,originalValue:null!=(l=t.originalValue)?l:e,options:t},r,e=>n(e.concat(a),i))})}describe(e){const t=(e?this.resolve(e):this).clone(),r=super.describe(e);return r.innerType=t.spec.types.map((t,r)=>{var n;let s=e;return null!=(n=s)&&n.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[r]})),t.describe(s)}),r}}sp.prototype;const ap=mi("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),ip=mi("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),lp=mi("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);function op(){return op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},op.apply(null,arguments)}var cp=r(816);function dp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(0,cp.A)(n.key),n)}}function up(e,t){return up=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},up(e,t)}function mp(e){return mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mp(e)}function hp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(hp=function(){return!!e})()}var pp=r(2284);function xp(e,t){if(t&&("object"==(0,pp.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}var fp=r(1942);function gp(e,t,r){this.x=e,this.y=t,this.time=r||(new Date).getTime()}function vp(e,t,r,n){this.startPoint=e,this.control1=t,this.control2=r,this.endPoint=n}function yp(e,t){var r=this,n=t||{};this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.throttle?this._strokeMoveUpdate=function(e,t,r){var n,s,a,i=null,l=0;r||(r={});var o=function(){l=!1===r.leading?0:Date.now(),i=null,a=e.apply(n,s),i||(n=s=null)};return function(){var c=Date.now();l||!1!==r.leading||(l=c);var d=t-(c-l);return n=this,s=arguments,d<=0||d>t?(i&&(clearTimeout(i),i=null),l=c,a=e.apply(n,s),i||(n=s=null)):i||!1===r.trailing||(i=setTimeout(o,d)),a}}(yp.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=yp.prototype._strokeUpdate,this.dotSize=n.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this.onBegin=n.onBegin,this.onEnd=n.onEnd,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(e){1===e.which&&(r._mouseButtonDown=!0,r._strokeBegin(e))},this._handleMouseMove=function(e){r._mouseButtonDown&&r._strokeMoveUpdate(e)},this._handleMouseUp=function(e){1===e.which&&r._mouseButtonDown&&(r._mouseButtonDown=!1,r._strokeEnd(e))},this._handleTouchStart=function(e){if(1===e.targetTouches.length){var t=e.changedTouches[0];r._strokeBegin(t)}},this._handleTouchMove=function(e){e.preventDefault();var t=e.targetTouches[0];r._strokeMoveUpdate(t)},this._handleTouchEnd=function(e){e.target===r._canvas&&(e.preventDefault(),r._strokeEnd(e))},this.on()}gp.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1},gp.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},gp.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time},vp.prototype.length=function(){for(var e=0,t=void 0,r=void 0,n=0;n<=10;n+=1){var s=n/10,a=this._point(s,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),i=this._point(s,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(n>0){var l=a-t,o=i-r;e+=Math.sqrt(l*l+o*o)}t=a,r=i}return e},vp.prototype._point=function(e,t,r,n,s){return t*(1-e)*(1-e)*(1-e)+3*r*(1-e)*(1-e)*e+3*n*(1-e)*e*e+s*e*e*e},yp.prototype.clear=function(){var e=this._ctx,t=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0},yp.prototype.fromDataURL=function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Image,s=r.ratio||window.devicePixelRatio||1,a=r.width||this._canvas.width/s,i=r.height||this._canvas.height/s;this._reset(),n.src=e,n.onload=function(){t._ctx.drawImage(n,0,0,a,i)},this._isEmpty=!1},yp.prototype.toDataURL=function(e){var t;if("image/svg+xml"===e)return this._toSVG();for(var r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return(t=this._canvas).toDataURL.apply(t,[e].concat(n))},yp.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},yp.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},yp.prototype.isEmpty=function(){return this._isEmpty},yp.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),"function"===typeof this.onBegin&&this.onBegin(e)},yp.prototype._strokeUpdate=function(e){var t=e.clientX,r=e.clientY,n=this._createPoint(t,r),s=this._data[this._data.length-1],a=s&&s[s.length-1],i=a&&n.distanceTo(a)<this.minDistance;if(!a||!i){var l=this._addPoint(n),o=l.curve,c=l.widths;o&&c&&this._drawCurve(o,c.start,c.end),this._data[this._data.length-1].push({x:n.x,y:n.y,time:n.time,color:this.penColor})}},yp.prototype._strokeEnd=function(e){var t=this.points.length>2,r=this.points[0];if(!t&&r&&this._drawDot(r),r){var n=this._data[this._data.length-1],s=n[n.length-1];r.equals(s)||n.push({x:r.x,y:r.y,time:r.time,color:this.penColor})}"function"===typeof this.onEnd&&this.onEnd(e)},yp.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},yp.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},yp.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},yp.prototype._createPoint=function(e,t,r){var n=this._canvas.getBoundingClientRect();return new gp(e-n.left,t-n.top,r||(new Date).getTime())},yp.prototype._addPoint=function(e){var t=this.points;if(t.push(e),t.length>2){3===t.length&&t.unshift(t[0]);var r=this._calculateCurveControlPoints(t[0],t[1],t[2]).c2,n=this._calculateCurveControlPoints(t[1],t[2],t[3]).c1,s=new vp(t[1],r,n,t[2]),a=this._calculateCurveWidths(s);return t.shift(),{curve:s,widths:a}}return{}},yp.prototype._calculateCurveControlPoints=function(e,t,r){var n=e.x-t.x,s=e.y-t.y,a=t.x-r.x,i=t.y-r.y,l=(e.x+t.x)/2,o=(e.y+t.y)/2,c=(t.x+r.x)/2,d=(t.y+r.y)/2,u=Math.sqrt(n*n+s*s),m=Math.sqrt(a*a+i*i),h=m/(u+m),p=c+(l-c)*h,x=d+(o-d)*h,f=t.x-p,g=t.y-x;return{c1:new gp(l+f,o+g),c2:new gp(c+f,d+g)}},yp.prototype._calculateCurveWidths=function(e){var t=e.startPoint,r=e.endPoint,n={start:null,end:null},s=this.velocityFilterWeight*r.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,a=this._strokeWidth(s);return n.start=this._lastWidth,n.end=a,this._lastVelocity=s,this._lastWidth=a,n},yp.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)},yp.prototype._drawPoint=function(e,t,r){var n=this._ctx;n.moveTo(e,t),n.arc(e,t,r,0,2*Math.PI,!1),this._isEmpty=!1},yp.prototype._drawCurve=function(e,t,r){var n=this._ctx,s=r-t,a=Math.floor(e.length());n.beginPath();for(var i=0;i<a;i+=1){var l=i/a,o=l*l,c=o*l,d=1-l,u=d*d,m=u*d,h=m*e.startPoint.x;h+=3*u*l*e.control1.x,h+=3*d*o*e.control2.x,h+=c*e.endPoint.x;var p=m*e.startPoint.y;p+=3*u*l*e.control1.y,p+=3*d*o*e.control2.y,p+=c*e.endPoint.y;var x=t+c*s;this._drawPoint(h,p,x)}n.closePath(),n.fill()},yp.prototype._drawDot=function(e){var t=this._ctx,r="function"===typeof this.dotSize?this.dotSize():this.dotSize;t.beginPath(),this._drawPoint(e.x,e.y,r),t.closePath(),t.fill()},yp.prototype._fromData=function(e,t,r){for(var n=0;n<e.length;n+=1){var s=e[n];if(s.length>1)for(var a=0;a<s.length;a+=1){var i=s[a],l=new gp(i.x,i.y,i.time),o=i.color;if(0===a)this.penColor=o,this._reset(),this._addPoint(l);else if(a!==s.length-1){var c=this._addPoint(l),d=c.curve,u=c.widths;d&&u&&t(d,u,o)}}else this._reset(),r(s[0])}},yp.prototype._toSVG=function(){var e=this,t=this._data,r=this._canvas,n=Math.max(window.devicePixelRatio||1,1),s=r.width/n,a=r.height/n,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"width",r.width),i.setAttributeNS(null,"height",r.height),this._fromData(t,function(e,t,r){var n=document.createElement("path");if(!isNaN(e.control1.x)&&!isNaN(e.control1.y)&&!isNaN(e.control2.x)&&!isNaN(e.control2.y)){var s="M "+e.startPoint.x.toFixed(3)+","+e.startPoint.y.toFixed(3)+" C "+e.control1.x.toFixed(3)+","+e.control1.y.toFixed(3)+" "+e.control2.x.toFixed(3)+","+e.control2.y.toFixed(3)+" "+e.endPoint.x.toFixed(3)+","+e.endPoint.y.toFixed(3);n.setAttribute("d",s),n.setAttribute("stroke-width",(2.25*t.end).toFixed(3)),n.setAttribute("stroke",r),n.setAttribute("fill","none"),n.setAttribute("stroke-linecap","round"),i.appendChild(n)}},function(t){var r=document.createElement("circle"),n="function"===typeof e.dotSize?e.dotSize():e.dotSize;r.setAttribute("r",n),r.setAttribute("cx",t.x),r.setAttribute("cy",t.y),r.setAttribute("fill",t.color),i.appendChild(r)});var l='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+s+" "+a+'" width="'+s+'" height="'+a+'">',o=i.innerHTML;if(void 0===o){var c=document.createElement("dummy"),d=i.childNodes;c.innerHTML="";for(var u=0;u<d.length;u+=1)c.appendChild(d[u].cloneNode(!0));o=c.innerHTML}return"data:image/svg+xml;base64,"+btoa(l+o+"</svg>")},yp.prototype.fromData=function(e){var t=this;this.clear(),this._fromData(e,function(e,r){return t._drawCurve(e,r.start,r.end)},function(e){return t._drawDot(e)}),this._data=e},yp.prototype.toData=function(){return this._data};const bp=yp;var Np=r(677),jp=["canvasProps","clearOnResize"],wp=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&up(e,t)}(n,t);var r=function(e){var t=hp();return function(){var r,n=mp(e);if(t){var s=mp(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return xp(this,r)}}(n);function n(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=r.call.apply(r,[this].concat(a))).staticThis=t.constructor,t._sigPad=null,t._canvas=null,t.setRef=function(e){t._canvas=e,null===t._canvas&&(t._sigPad=null)},t._excludeOurProps=function(){var e=t.props;return e.canvasProps,e.clearOnResize,xt(e,jp)},t.componentDidMount=function(){var e=t.getCanvas();t._sigPad=new bp(e,t._excludeOurProps()),t._resizeCanvas(),t.on()},t.componentWillUnmount=function(){t.off()},t.componentDidUpdate=function(){Object.assign(t._sigPad,t._excludeOurProps())},t.getCanvas=function(){if(null===t._canvas)throw t.staticThis.refNullError;return t._canvas},t.getTrimmedCanvas=function(){var e=t.getCanvas(),r=document.createElement("canvas");return r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(e,0,0),Np(r)},t.getSignaturePad=function(){if(null===t._sigPad)throw t.staticThis.refNullError;return t._sigPad},t._checkClearOnResize=function(){t.props.clearOnResize&&t._resizeCanvas()},t._resizeCanvas=function(){var e,r,n=null!==(e=t.props.canvasProps)&&void 0!==e?e:{},s=n.width,a=n.height;if("undefined"===typeof s||"undefined"===typeof a){var i=t.getCanvas(),l=Math.max(null!==(r=window.devicePixelRatio)&&void 0!==r?r:1,1);"undefined"===typeof s&&(i.width=i.offsetWidth*l),"undefined"===typeof a&&(i.height=i.offsetHeight*l),i.getContext("2d").scale(l,l),t.clear()}},t.render=function(){var r=t.props.canvasProps;return e.createElement("canvas",op({ref:t.setRef},r))},t.on=function(){return window.addEventListener("resize",t._checkClearOnResize),t.getSignaturePad().on()},t.off=function(){return window.removeEventListener("resize",t._checkClearOnResize),t.getSignaturePad().off()},t.clear=function(){return t.getSignaturePad().clear()},t.isEmpty=function(){return t.getSignaturePad().isEmpty()},t.fromDataURL=function(e,r){return t.getSignaturePad().fromDataURL(e,r)},t.toDataURL=function(e,r){return t.getSignaturePad().toDataURL(e,r)},t.fromData=function(e){return t.getSignaturePad().fromData(e)},t.toData=function(){return t.getSignaturePad().toData()},t}return function(e,t,r){return t&&dp(e.prototype,t),r&&dp(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(n)}(e.Component);wp.propTypes={velocityFilterWeight:fp.number,minWidth:fp.number,maxWidth:fp.number,minDistance:fp.number,dotSize:fp.oneOfType([fp.number,fp.func]),penColor:fp.string,throttle:fp.number,onEnd:fp.func,onBegin:fp.func,canvasProps:fp.object,clearOnResize:fp.bool},wp.defaultProps={clearOnResize:!0},wp.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");const Sp=t=>{let{customer:r,onClose:n,onSuccess:s}=t;const[a,i]=(0,e.useState)("documents"),[l,o]=(0,e.useState)(!1),[c,d]=(0,e.useState)(r.documents||[]),[u,m]=(0,e.useState)(null),[h,p]=(0,e.useState)(Pm.IdentityCard),[x,f]=(0,e.useState)(""),[g,v]=(0,e.useState)(""),y=(0,e.useRef)(null),[b,N]=(0,e.useState)(!1),[j,w]=(0,e.useState)(r.signature||null),[S,A]=(0,e.useState)(null);(0,e.useEffect)(()=>{T(),r.signature&&(w(r.signature),N(!0))},[r.id]);const T=async()=>{try{const e=await Fm.getCustomerDocuments(r.id);d(e)}catch(Sc){console.error("Erreur lors du chargement des documents:",Sc)}},C=[{value:Pm.IdentityCard,label:"Carte d'Identit\xe9"},{value:Pm.ProofOfResidence,label:"Justificatif de R\xe9sidence"},{value:Pm.ProofOfIncome,label:"Justificatif de Revenu"},{value:Pm.Photo,label:"Photo"},{value:Pm.Other,label:"Autre"}];return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Documents & Signature"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:r.fullName})]}),(0,ju.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,ju.jsx)(vm,{className:"h-5 w-5"})})]}),(0,ju.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,ju.jsxs)("button",{onClick:()=>i("documents"),className:"flex-1 px-6 py-3 text-sm font-medium transition-colors ".concat("documents"===a?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"),children:[(0,ju.jsx)(Hu,{className:"h-4 w-4 inline mr-2"}),"Documents (",c.length,")"]}),(0,ju.jsxs)("button",{onClick:()=>i("signature"),className:"flex-1 px-6 py-3 text-sm font-medium transition-colors ".concat("signature"===a?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"),children:[(0,ju.jsx)(ap,{className:"h-4 w-4 inline mr-2"}),"Signature ",b&&(0,ju.jsx)(Tm,{className:"h-4 w-4 inline ml-1 text-green-600"})]})]}),(0,ju.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:"documents"===a?(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border-2 border-dashed border-gray-300",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"T\xe9l\xe9charger un Document"}),(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de Document"}),(0,ju.jsx)("select",{value:h,onChange:e=>p(Number(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:C.map(e=>(0,ju.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du Document"}),(0,ju.jsx)("input",{type:"text",value:x,onChange:e=>f(e.target.value),placeholder:"Ex: CIN Jean Dupont",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (optionnel)"}),(0,ju.jsx)("textarea",{value:g,onChange:e=>v(e.target.value),placeholder:"Description du document...",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fichier (PDF, JPG, PNG - Max 5MB)"}),(0,ju.jsx)("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];m(t),x||f(t.name.split(".")[0])}},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),u&&(0,ju.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Fichier s\xe9lectionn\xe9: ",u.name," (",(u.size/1024).toFixed(1)," KB)"]})]}),(0,ju.jsxs)("button",{onClick:async()=>{if(u&&x.trim()){o(!0);try{await Fm.uploadDocument(r.id,u,h,x,g||void 0),Ts.success("Document t\xe9l\xe9charg\xe9 avec succ\xe8s!"),m(null),f(""),v(""),await T(),s()}catch(Sc){console.error("Erreur lors de l'upload:",Sc),Ts.error(Sc.message||"Erreur lors de l'upload du document")}finally{o(!1)}}else Ts.error("Veuillez s\xe9lectionner un fichier et entrer un nom")},disabled:!u||l,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,ju.jsx)(Dm,{className:"h-5 w-5"}),l?"T\xe9l\xe9chargement...":"T\xe9l\xe9charger le Document"]})]})]}),c.length>0&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Documents T\xe9l\xe9charg\xe9s"}),(0,ju.jsx)("div",{className:"space-y-3",children:c.map(e=>{var t,n;const a=e.Id||e.id,i=e.documentTypeName||(e=>{switch("number"===typeof e?e:parseInt(e,10)){case 0:return"Carte d'Identit\xe9";case 1:return"Justificatif de R\xe9sidence";case 2:return"Justificatif de Revenu";case 3:return"Photo";default:return"Autre"}})(e.DocumentType),l=e.FileSize,o="number"!==typeof l||isNaN(l)?null:l/1024,c=e.UploadedAt,d=c?new Date(c):null,u=!(!d||isNaN(d.getTime())),m=e.name||e.name||(e.FilePath?String(e.FilePath).split(/[/\\]/).pop():"")||"Document",h=e.description||e.description,p=null!==(t=null!==(n=e.Verified)&&void 0!==n?n:e.verified)&&void 0!==t&&t;return(0,ju.jsx)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 hover:border-blue-300 transition-colors",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,ju.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,ju.jsx)(Hu,{className:"h-5 w-5 text-blue-600"})}),(0,ju.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ju.jsxs)("p",{className:"font-medium text-gray-900 truncate flex items-center gap-2",children:[(0,ju.jsx)("span",{className:"truncate",children:m}),(0,ju.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full whitespace-nowrap",children:i})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[null!==o&&(0,ju.jsxs)("span",{children:[o.toFixed(1)," KB"]}),null!==o&&u&&(0,ju.jsx)("span",{children:"\u2022"}),u&&(0,ju.jsx)("span",{children:d.toLocaleDateString("fr-FR")})]}),h&&(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:h})]})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[p&&(0,ju.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:"V\xe9rifi\xe9"}),(0,ju.jsx)("button",{onClick:()=>a&&(async(e,t)=>{try{const n=await Fm.downloadDocument(r.id,e),s=window.URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),Ts.success("Document t\xe9l\xe9charg\xe9!")}catch(Sc){Ts.error("Erreur lors du t\xe9l\xe9chargement")}})(a,m),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"T\xe9l\xe9charger",disabled:!a,children:(0,ju.jsx)(zu,{className:"h-4 w-4"})}),(0,ju.jsx)("button",{onClick:()=>a&&(async e=>{if(window.confirm("\xc8ske ou s\xe8ten ou vle efase dokiman sa a?"))try{A(e),console.log("Deleting document from modal:",{customerId:r.id,documentId:e}),await Fm.deleteDocument(r.id,e),Ts.success("Dokiman efase av\xe8k siks\xe8!"),await T(),s()}catch(Sc){var t,n;console.error("Delete document error:",Sc);const r=(null===Sc||void 0===Sc||null===(t=Sc.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||(null===Sc||void 0===Sc?void 0:Sc.message)||"Erreur lors de la suppression";Ts.error(r)}finally{A(null)}})(a),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors ".concat(S===a?"opacity-50 cursor-not-allowed":""),disabled:!a||S===a,title:"Supprimer",children:(0,ju.jsx)(bm,{className:"h-4 w-4"})})]})]})},a||m)})})]})]}):(0,ju.jsxs)("div",{className:"space-y-6",children:[j&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Signature Actuelle"}),(0,ju.jsx)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:(0,ju.jsx)("img",{src:j,alt:"Signature actuelle",className:"max-h-32 mx-auto"})})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:j?"Nouvelle Signature":"Capturer la Signature"}),(0,ju.jsx)("div",{className:"bg-white rounded-lg border-2 border-gray-300",children:(0,ju.jsx)(wp,{ref:y,canvasProps:{className:"w-full h-64 touch-action-none",style:{border:"1px solid #e5e7eb"}}})}),(0,ju.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,ju.jsxs)("button",{onClick:()=>{y.current&&y.current.clear()},className:"flex-1 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[(0,ju.jsx)(vm,{className:"h-5 w-5"}),"Effacer"]}),(0,ju.jsxs)("button",{onClick:async()=>{if(y.current)if(y.current.isEmpty())Ts.error("Veuillez signer d'abord");else try{const e=y.current.toDataURL();await Fm.saveSignature(r.id,e),w(e),N(!0),Ts.success("Signature sauvegard\xe9e avec succ\xe8s!"),s()}catch(Sc){Ts.error("Erreur lors de la sauvegarde de la signature")}},className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[(0,ju.jsx)(lp,{className:"h-5 w-5"}),"Sauvegarder"]})]})]})]})}),(0,ju.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-200",children:(0,ju.jsx)("button",{onClick:n,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Fermer"})})]})})};function Ap(e){if(void 0===e||null===e||""===e)return 0;if("number"===typeof e)return 1===e?1:0;const t=String(e).trim().toLowerCase();return"1"===t||"f"===t||"female"===t||"feminin"===t||"fem"===t||"fanm"===t?1:0}function Tp(e){return 0===Ap(e)?"Masculin":"F\xe9minin"}function Cp(e){return 0===Ap(e)?"M":"F"}const Ep={Ouest:["Port-au-Prince","P\xe9tion-Ville","Carrefour","Delmas","Kenscoff","Gressier","L\xe9og\xe2ne"],Artibonite:["Gona\xefves","Saint-Marc","Dessalines","Gros-Morne","Ennery"],Nord:["Cap-Ha\xeftien","Limb\xe9","Acul-du-Nord","Plaisance","Grande-Rivi\xe8re-du-Nord"],Sud:["Les Cayes","Port-Salut","Aquin","Saint-Louis-du-Sud","Chantal"],"Nord-Est":["Fort-Libert\xe9","Trou-du-Nord","Ouanaminthe","Terrier-Rouge"],"Nord-Ouest":["Port-de-Paix","Saint-Louis-du-Nord","M\xf4le-Saint-Nicolas","Bombardopolis"],"Sud-Est":["Jacmel","Marigot","Belle-Anse","Cayes-Jacmel"],"Grande-Anse":["J\xe9r\xe9mie","Dame-Marie","Anse-d-Hainault","Corail"],Nippes:["Mirago\xe2ne","Petit-Go\xe2ve","Anse-\xe0-Veau","Barad\xe8res"],Centre:["Hinche","Mirebalais","Lascahobas","Thomonde","Ma\xefssade"]},Dp=t=>{let{signer:r,onSave:n,onCancel:a}=t;const[i,l]=e.useState(r||{fullName:"",documentType:"CIN",documentNumber:"",relationshipToCustomer:"",address:"",phoneNumber:"",authorizationLimit:void 0});return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,ju.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:r?"Modifier le signataire":"Ajouter un signataire autoris\xe9"})}),(0,ju.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(i)},className:"p-6",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom complet *"}),(0,ju.jsx)("input",{type:"text",required:!0,value:i.fullName,onChange:e=>l((0,s.A)((0,s.A)({},i),{},{fullName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Pr\xe9nom et nom"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fonction/Relation *"}),(0,ju.jsxs)("select",{required:!0,value:i.relationshipToCustomer,onChange:e=>l((0,s.A)((0,s.A)({},i),{},{relationshipToCustomer:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"Directeur G\xe9n\xe9ral",children:"Directeur G\xe9n\xe9ral"}),(0,ju.jsx)("option",{value:"Directeur Financier",children:"Directeur Financier"}),(0,ju.jsx)("option",{value:"Administrateur",children:"Administrateur"}),(0,ju.jsx)("option",{value:"Co-g\xe9rant",children:"Co-g\xe9rant"}),(0,ju.jsx)("option",{value:"Mandataire",children:"Mandataire"}),(0,ju.jsx)("option",{value:"Autre",children:"Autre"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Num\xe9ro de t\xe9l\xe9phone *"}),(0,ju.jsx)("input",{type:"tel",required:!0,value:i.phoneNumber,onChange:e=>l((0,s.A)((0,s.A)({},i),{},{phoneNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"+509 3712 3456"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de pi\xe8ce *"}),(0,ju.jsxs)("select",{required:!0,value:i.documentType,onChange:e=>l((0,s.A)((0,s.A)({},i),{},{documentType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"CIN",children:"CIN"}),(0,ju.jsx)("option",{value:"Passport",children:"Passeport"}),(0,ju.jsx)("option",{value:"DrivingLicense",children:"Permis de conduire"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Num\xe9ro de pi\xe8ce *"}),(0,ju.jsx)("input",{type:"text",required:!0,value:i.documentNumber,onChange:e=>l((0,s.A)((0,s.A)({},i),{},{documentNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Num\xe9ro du document"})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse *"}),(0,ju.jsx)("input",{type:"text",required:!0,value:i.address,onChange:e=>l((0,s.A)((0,s.A)({},i),{},{address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Adresse compl\xe8te"})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Limite d'autorisation (HTG) ",(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:"(Optionnel)"})]}),(0,ju.jsx)("input",{type:"number",min:"0",value:i.authorizationLimit||"",onChange:e=>l((0,s.A)((0,s.A)({},i),{},{authorizationLimit:e.target.value?Number(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Montant maximum autoris\xe9 par transaction"})]})]}),(0,ju.jsxs)("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t",children:[(0,ju.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Annuler"}),(0,ju.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:r?"Mettre \xe0 jour":"Ajouter"})]})]})]})})},kp=t=>{var r,n,a,i,l,o,c,d,u,m,h,p,x,f,g,v,y,b,N,j,w,S,A,T;let{customer:C,onSubmit:E,onCancel:D}=t;const[k,R]=(0,e.useState)((null===C||void 0===C||null===(r=C.address)||void 0===r?void 0:r.department)||""),[_,I]=(0,e.useState)(!1),[P,O]=(0,e.useState)(!1),[L,F]=(0,e.useState)(C),[M,U]=(0,e.useState)((null===C||void 0===C?void 0:C.authorizedSigners)||[]),[B,H]=(0,e.useState)(!1),[z,G]=(0,e.useState)(null),V=e.useCallback(e=>{const t=e;return!!(null!==t&&void 0!==t&&t.companyName||null!==t&&void 0!==t&&t.legalForm||null!==t&&void 0!==t&&t.representativeFirstName||null!==t&&void 0!==t&&t.representativeLastName||null!==t&&void 0!==t&&t.taxId||null!==t&&void 0!==t&&t.tradeRegisterNumber)},[]),W=null!==(n=null===C||void 0===C?void 0:C.isBusiness)&&void 0!==n?n:V(C),q=void 0===(null===C||void 0===C?void 0:C.isBusiness)||null===(null===C||void 0===C?void 0:C.isBusiness)?"detected":"explicit",[$,K]=(0,e.useState)(!!W),[X,Y]=(0,e.useState)(q),J=e.useMemo(()=>(e=>tp().shape((0,s.A)({street:Hh().required("Adresse obligatoire"),department:Hh().required("D\xe9partement obligatoire"),commune:Hh().required("Commune obligatoire"),postalCode:Hh().nullable(),primaryPhone:Hh().required("T\xe9l\xe9phone obligatoire").matches(/^(\+509\s?)?[234579]\d{7}$/,"Format de t\xe9l\xe9phone invalide"),secondaryPhone:Hh().nullable().transform((e,t)=>""===t?null:e).matches(/^(\+509\s?)?[234579]\d{7}$/,{message:"Format de t\xe9l\xe9phone invalide",excludeEmptyString:!0}),email:Hh().email("Format email invalide").nullable(),emergencyContactName:Hh().nullable(),emergencyContactPhone:Hh().nullable().transform((e,t)=>""===t?null:e).matches(/^(\+509\s?)?[234579]\d{7}$/,{message:"Format de t\xe9l\xe9phone invalide",excludeEmptyString:!0}),documentType:Hh().required("Type de document obligatoire"),documentNumber:Hh().required("Num\xe9ro de document obligatoire").min(5,"Au moins 5 caract\xe8res"),issuedDate:Hh().required("Date d'\xe9mission obligatoire"),expiryDate:Hh().nullable(),issuingAuthority:Hh().required("Autorit\xe9 d'\xe9mission obligatoire")},e?{companyName:Hh().required("Raison sociale obligatoire").min(2,"Au moins 2 caract\xe8res"),legalForm:Hh().required("Forme juridique obligatoire"),businessRegistrationNumber:Hh().nullable(),companyNif:Hh().nullable(),headOfficeAddress:Hh().required("Adresse du si\xe8ge social obligatoire"),companyPhone:Hh().required("T\xe9l\xe9phone de l'entreprise obligatoire").matches(/^(\+509\s?)?[234579]\d{7}$/,"Format de t\xe9l\xe9phone invalide"),companyEmail:Hh().email("Format email invalide").required("Email de l'entreprise obligatoire"),legalRepresentativeName:Hh().required("Nom du repr\xe9sentant obligatoire"),legalRepresentativeTitle:Hh().required("Titre du repr\xe9sentant obligatoire"),legalRepresentativeDocumentType:Hh().required("Type de document du repr\xe9sentant obligatoire"),legalRepresentativeDocumentNumber:Hh().required("Num\xe9ro de document du repr\xe9sentant obligatoire").min(5,"Au moins 5 caract\xe8res"),legalRepresentativeIssuedDate:Hh().required("Date d'\xe9mission du document obligatoire"),legalRepresentativeExpiryDate:Hh().nullable(),legalRepresentativeIssuingAuthority:Hh().required("Autorit\xe9 d'\xe9mission obligatoire")}:{firstName:Hh().required("Pr\xe9nom obligatoire").min(2,"Au moins 2 caract\xe8res"),lastName:Hh().required("Nom obligatoire").min(2,"Au moins 2 caract\xe8res"),dateOfBirth:Hh().required("Date de naissance obligatoire"),gender:Hh().required("Genre obligatoire"),occupation:Hh().nullable(),monthlyIncome:Gh().nullable()})))($),[$]),{register:Z,handleSubmit:Q,watch:ee,reset:te,formState:{errors:re}}=ri({resolver:Hm(J),defaultValues:{street:(null===C||void 0===C||null===(a=C.address)||void 0===a?void 0:a.street)||"",department:(null===C||void 0===C||null===(i=C.address)||void 0===i?void 0:i.department)||"",commune:(null===C||void 0===C||null===(l=C.address)||void 0===l?void 0:l.commune)||"",postalCode:(null===C||void 0===C||null===(o=C.address)||void 0===o?void 0:o.postalCode)||"",primaryPhone:(null===C||void 0===C||null===(c=C.contact)||void 0===c?void 0:c.primaryPhone)||"",secondaryPhone:(null===C||void 0===C||null===(d=C.contact)||void 0===d?void 0:d.secondaryPhone)||"",email:(null===C||void 0===C||null===(u=C.contact)||void 0===u?void 0:u.email)||"",emergencyContactName:(null===C||void 0===C||null===(m=C.contact)||void 0===m?void 0:m.emergencyContactName)||"",emergencyContactPhone:(null===C||void 0===C||null===(h=C.contact)||void 0===h?void 0:h.emergencyContactPhone)||"",documentType:void 0!==(null===C||void 0===C||null===(p=C.identity)||void 0===p?void 0:p.documentType)&&["CIN","Passport","DrivingLicense"][C.identity.documentType]||"CIN",documentNumber:(null===C||void 0===C||null===(x=C.identity)||void 0===x?void 0:x.documentNumber)||"",issuedDate:null!==C&&void 0!==C&&null!==(f=C.identity)&&void 0!==f&&f.issuedDate?C.identity.issuedDate.split("T")[0]:"",expiryDate:null!==C&&void 0!==C&&null!==(g=C.identity)&&void 0!==g&&g.expiryDate?C.identity.expiryDate.split("T")[0]:"",issuingAuthority:(null===C||void 0===C||null===(v=C.identity)||void 0===v?void 0:v.issuingAuthority)||"",firstName:(null===C||void 0===C?void 0:C.firstName)||"",lastName:(null===C||void 0===C?void 0:C.lastName)||"",dateOfBirth:null!==C&&void 0!==C&&C.dateOfBirth?C.dateOfBirth.split("T")[0]:"",gender:Cp(null===C||void 0===C?void 0:C.gender),occupation:(null===C||void 0===C?void 0:C.occupation)||"",monthlyIncome:(null===C||void 0===C?void 0:C.monthlyIncome)||void 0,companyName:(null===C||void 0===C?void 0:C.companyName)||"",legalForm:(null===C||void 0===C?void 0:C.legalForm)||"",businessRegistrationNumber:(null===C||void 0===C?void 0:C.tradeRegisterNumber)||(null===C||void 0===C?void 0:C.businessRegistrationNumber)||"",companyNif:(null===C||void 0===C?void 0:C.taxId)||(null===C||void 0===C?void 0:C.companyNif)||"",headOfficeAddress:(null===C||void 0===C?void 0:C.headOfficeAddress)||"",companyPhone:(null===C||void 0===C?void 0:C.companyPhone)||"",companyEmail:(null===C||void 0===C?void 0:C.companyEmail)||"",legalRepresentativeName:null!==C&&void 0!==C&&null!==(y=C.legalRepresentative)&&void 0!==y&&y.firstName&&null!==C&&void 0!==C&&null!==(b=C.legalRepresentative)&&void 0!==b&&b.lastName?"".concat(C.legalRepresentative.firstName," ").concat(C.legalRepresentative.lastName):(null===C||void 0===C?void 0:C.legalRepresentativeName)||"",legalRepresentativeTitle:(null===C||void 0===C||null===(N=C.legalRepresentative)||void 0===N?void 0:N.title)||(null===C||void 0===C?void 0:C.legalRepresentativeTitle)||"",legalRepresentativeDocumentType:((e,t,r)=>{const n=null!==(e=null!==(t=null===C||void 0===C||null===(r=C.legalRepresentative)||void 0===r?void 0:r.documentType)&&void 0!==t?t:null===C||void 0===C?void 0:C.representativeDocumentType)&&void 0!==e?e:null===C||void 0===C?void 0:C.legalRepresentativeDocumentType;return 0===n||"CIN"===n?"CIN":1===n||"Passport"===n?"Passport":2===n||"DrivingLicense"===n?"DrivingLicense":""})(),legalRepresentativeDocumentNumber:(null===C||void 0===C||null===(j=C.legalRepresentative)||void 0===j?void 0:j.documentNumber)||(null===C||void 0===C?void 0:C.legalRepresentativeDocumentNumber)||"",legalRepresentativeIssuedDate:null!==C&&void 0!==C&&null!==(w=C.legalRepresentative)&&void 0!==w&&w.issuedDate?C.legalRepresentative.issuedDate.split("T")[0]:null!==C&&void 0!==C&&C.legalRepresentativeIssuedDate?C.legalRepresentativeIssuedDate.split("T")[0]:"",legalRepresentativeExpiryDate:null!==C&&void 0!==C&&null!==(S=C.legalRepresentative)&&void 0!==S&&S.expiryDate?C.legalRepresentative.expiryDate.split("T")[0]:null!==C&&void 0!==C&&C.legalRepresentativeExpiryDate?C.legalRepresentativeExpiryDate.split("T")[0]:"",legalRepresentativeIssuingAuthority:(null===C||void 0===C||null===(A=C.legalRepresentative)||void 0===A?void 0:A.issuingAuthority)||(null===C||void 0===C?void 0:C.legalRepresentativeIssuingAuthority)||""}}),ne=ee("department");(0,e.useEffect)(()=>{if(C){var e,t,r,n,s,a,i,l,o,c,d,u,m,h,p,x,f,g,v,y,b,N,j;const w=null!==(e=null===C||void 0===C?void 0:C.isBusiness)&&void 0!==e?e:V(C);K(!!w),Y(void 0===(null===C||void 0===C?void 0:C.isBusiness)||null===(null===C||void 0===C?void 0:C.isBusiness)?"detected":"explicit"),te({street:(null===C||void 0===C||null===(t=C.address)||void 0===t?void 0:t.street)||"",department:(null===C||void 0===C||null===(r=C.address)||void 0===r?void 0:r.department)||"",commune:(null===C||void 0===C||null===(n=C.address)||void 0===n?void 0:n.commune)||"",postalCode:(null===C||void 0===C||null===(s=C.address)||void 0===s?void 0:s.postalCode)||"",primaryPhone:(null===C||void 0===C||null===(a=C.contact)||void 0===a?void 0:a.primaryPhone)||"",secondaryPhone:(null===C||void 0===C||null===(i=C.contact)||void 0===i?void 0:i.secondaryPhone)||"",email:(null===C||void 0===C||null===(l=C.contact)||void 0===l?void 0:l.email)||"",emergencyContactName:(null===C||void 0===C||null===(o=C.contact)||void 0===o?void 0:o.emergencyContactName)||"",emergencyContactPhone:(null===C||void 0===C||null===(c=C.contact)||void 0===c?void 0:c.emergencyContactPhone)||"",documentType:void 0!==(null===C||void 0===C||null===(d=C.identity)||void 0===d?void 0:d.documentType)&&["CIN","Passport","DrivingLicense"][C.identity.documentType]||(w?"TradeRegister":"CIN"),documentNumber:(null===C||void 0===C||null===(u=C.identity)||void 0===u?void 0:u.documentNumber)||"",issuedDate:null!==C&&void 0!==C&&null!==(m=C.identity)&&void 0!==m&&m.issuedDate?C.identity.issuedDate.split("T")[0]:"",expiryDate:null!==C&&void 0!==C&&null!==(h=C.identity)&&void 0!==h&&h.expiryDate?C.identity.expiryDate.split("T")[0]:"",issuingAuthority:(null===C||void 0===C||null===(p=C.identity)||void 0===p?void 0:p.issuingAuthority)||"",firstName:(null===C||void 0===C?void 0:C.firstName)||"",lastName:(null===C||void 0===C?void 0:C.lastName)||"",dateOfBirth:null!==C&&void 0!==C&&C.dateOfBirth?C.dateOfBirth.split("T")[0]:"",gender:void 0!==(null===C||void 0===C?void 0:C.gender)?Cp(C.gender):"M",occupation:(null===C||void 0===C?void 0:C.occupation)||"",monthlyIncome:(null===C||void 0===C?void 0:C.monthlyIncome)||void 0,companyName:(null===C||void 0===C?void 0:C.companyName)||"",legalForm:(null===C||void 0===C?void 0:C.legalForm)||"",businessRegistrationNumber:(null===C||void 0===C?void 0:C.tradeRegisterNumber)||(null===C||void 0===C?void 0:C.businessRegistrationNumber)||"",companyNif:(null===C||void 0===C?void 0:C.taxId)||(null===C||void 0===C?void 0:C.companyNif)||"",headOfficeAddress:(null===C||void 0===C?void 0:C.headOfficeAddress)||"",companyPhone:(null===C||void 0===C?void 0:C.companyPhone)||"",companyEmail:(null===C||void 0===C?void 0:C.companyEmail)||"",legalRepresentativeName:null!==C&&void 0!==C&&null!==(x=C.legalRepresentative)&&void 0!==x&&x.firstName&&null!==C&&void 0!==C&&null!==(f=C.legalRepresentative)&&void 0!==f&&f.lastName?"".concat(C.legalRepresentative.firstName," ").concat(C.legalRepresentative.lastName):(null===C||void 0===C?void 0:C.legalRepresentativeName)||"",legalRepresentativeTitle:(null===C||void 0===C||null===(g=C.legalRepresentative)||void 0===g?void 0:g.title)||(null===C||void 0===C?void 0:C.legalRepresentativeTitle)||"",legalRepresentativeDocumentType:((e,t,r)=>{const n=null!==(e=null!==(t=null===C||void 0===C||null===(r=C.legalRepresentative)||void 0===r?void 0:r.documentType)&&void 0!==t?t:null===C||void 0===C?void 0:C.representativeDocumentType)&&void 0!==e?e:null===C||void 0===C?void 0:C.legalRepresentativeDocumentType;return 0===n||"CIN"===n?"CIN":1===n||"Passport"===n?"Passport":2===n||"DrivingLicense"===n?"DrivingLicense":""})(),legalRepresentativeDocumentNumber:(null===C||void 0===C||null===(v=C.legalRepresentative)||void 0===v?void 0:v.documentNumber)||(null===C||void 0===C?void 0:C.legalRepresentativeDocumentNumber)||"",legalRepresentativeIssuedDate:null!==C&&void 0!==C&&null!==(y=C.legalRepresentative)&&void 0!==y&&y.issuedDate?C.legalRepresentative.issuedDate.split("T")[0]:null!==C&&void 0!==C&&C.legalRepresentativeIssuedDate?C.legalRepresentativeIssuedDate.split("T")[0]:"",legalRepresentativeExpiryDate:null!==C&&void 0!==C&&null!==(b=C.legalRepresentative)&&void 0!==b&&b.expiryDate?C.legalRepresentative.expiryDate.split("T")[0]:null!==C&&void 0!==C&&C.legalRepresentativeExpiryDate?C.legalRepresentativeExpiryDate.split("T")[0]:"",legalRepresentativeIssuingAuthority:(null===C||void 0===C||null===(N=C.legalRepresentative)||void 0===N?void 0:N.issuingAuthority)||(null===C||void 0===C?void 0:C.legalRepresentativeIssuingAuthority)||""}),R((null===C||void 0===C||null===(j=C.address)||void 0===j?void 0:j.department)||"")}},[C,te]),(0,e.useEffect)(()=>{ne!==k&&R(ne)},[ne]),(0,e.useEffect)(()=>{const e=ee();te((0,s.A)((0,s.A)((0,s.A)((0,s.A)({},e),$?{}:{companyName:"",legalForm:"",businessRegistrationNumber:"",companyNif:"",headOfficeAddress:"",companyPhone:"",companyEmail:"",legalRepresentativeName:"",legalRepresentativeTitle:"",legalRepresentativeDocumentType:"",legalRepresentativeDocumentNumber:"",legalRepresentativeIssuedDate:"",legalRepresentativeExpiryDate:"",legalRepresentativeIssuingAuthority:""}),$?{firstName:"",lastName:"",dateOfBirth:"",gender:"",occupation:"",monthlyIncome:""}:{}),{},{documentType:$?e.documentType&&!["CIN","Passport","DrivingLicense"].includes(e.documentType)?e.documentType:"TradeRegister":e.documentType&&["CIN","Passport","DrivingLicense"].includes(e.documentType)?e.documentType:"CIN"}))},[$,te,ee]);return(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("form",{onSubmit:Q(async e=>{try{I(!0);const t=(0,s.A)({street:e.street,department:e.department,commune:e.commune,postalCode:e.postalCode,primaryPhone:e.primaryPhone,secondaryPhone:e.secondaryPhone,email:e.email,emergencyContactName:e.emergencyContactName,emergencyContactPhone:e.emergencyContactPhone,documentType:e.documentType,documentNumber:e.documentNumber,issuedDate:e.issuedDate,expiryDate:e.expiryDate,issuingAuthority:e.issuingAuthority,isBusiness:$},$?(0,s.A)((0,s.A)({companyName:e.companyName,legalForm:e.legalForm,tradeRegisterNumber:e.businessRegistrationNumber,taxId:e.companyNif,headOfficeAddress:e.headOfficeAddress,companyPhone:e.companyPhone,companyEmail:e.companyEmail},e.legalRepresentativeName?(()=>{const t=e.legalRepresentativeName.trim().split(/\s+/);return 1===t.length?{representativeFirstName:void 0,representativeLastName:t[0]}:{representativeFirstName:t.slice(0,-1).join(" "),representativeLastName:t.slice(-1)[0]}})():{}),{},{representativeTitle:e.legalRepresentativeTitle,representativeDocumentType:e.legalRepresentativeDocumentType,representativeDocumentNumber:e.legalRepresentativeDocumentNumber,representativeIssuedDate:e.legalRepresentativeIssuedDate,representativeExpiryDate:e.legalRepresentativeExpiryDate,representativeIssuingAuthority:e.legalRepresentativeIssuingAuthority,firstName:"",lastName:"",dateOfBirth:null,gender:null,occupation:null,monthlyIncome:null}):{firstName:e.firstName,lastName:e.lastName,dateOfBirth:e.dateOfBirth,gender:e.gender,occupation:e.occupation,monthlyIncome:e.monthlyIncome,companyName:"",legalForm:"",tradeRegisterNumber:"",taxId:"",headOfficeAddress:"",companyPhone:"",companyEmail:"",representativeFirstName:"",representativeLastName:"",representativeTitle:"",representativeDocumentType:"",representativeDocumentNumber:"",representativeIssuedDate:null,representativeExpiryDate:null,representativeIssuingAuthority:""});await E(t)}catch(Sc){console.error("Error submitting form:",Sc)}finally{I(!1)}}),className:"p-6",children:[(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:["Type de Client",(0,ju.jsx)("span",{className:"ml-3 align-middle text-xs px-2 py-0.5 rounded-full border ".concat("detected"===X?"bg-blue-50 text-blue-700 border-blue-200":"bg-gray-50 text-gray-700 border-gray-200"),title:"detected"===X?"D\xe9tect\xe9 automatiquement \xe0 partir des donn\xe9es existantes":"D\xe9fini manuellement",children:"detected"===X?"D\xe9tect\xe9 automatiquement":"Modifi\xe9 manuellement"})]}),(0,ju.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,ju.jsxs)("label",{className:"flex items-center",children:[(0,ju.jsx)("input",{type:"radio",name:"clientType",checked:!$,onChange:()=>{K(!1),Y("explicit")},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),(0,ju.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Personne Physique"})]}),(0,ju.jsxs)("label",{className:"flex items-center",children:[(0,ju.jsx)("input",{type:"radio",name:"clientType",checked:$,onChange:()=>{K(!0),Y("explicit")},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),(0,ju.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Personne Morale"})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"1. Informations d'Identification"}),$?(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Raison Sociale ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Z("companyName")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.companyName&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.companyName.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Forme Juridique ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},Z("legalForm")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"SA",children:"S.A. - Soci\xe9t\xe9 Anonyme"}),(0,ju.jsx)("option",{value:"SEM",children:"S.E.M. - Soci\xe9t\xe9 d'\xc9conomie Mixte"}),(0,ju.jsx)("option",{value:"INDIVIDUELLE",children:"Soci\xe9t\xe9 Individuelle"}),(0,ju.jsx)("option",{value:"COOPERATIVE",children:"Coop\xe9rative"})]})),re.legalForm&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.legalForm.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Num\xe9ro Registre Commerce"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Z("businessRegistrationNumber")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NIF"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Z("companyNif")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]})]}):(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Pr\xe9nom ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Z("firstName")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.firstName&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.firstName.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nom ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Z("lastName")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.lastName&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.lastName.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date de Naissance ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"date"},Z("dateOfBirth")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.dateOfBirth&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.dateOfBirth.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Genre ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},Z("gender")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"M",children:"Masculin"}),(0,ju.jsx)("option",{value:"F",children:"F\xe9minin"})]})),re.gender&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.gender.message})]})]})]}),$&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"2. Repr\xe9sentant L\xe9gal"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nom complet du Repr\xe9sentant ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Z("legalRepresentativeName")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.legalRepresentativeName&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.legalRepresentativeName.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Titre/Fonction ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},Z("legalRepresentativeTitle")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"Directeur G\xe9n\xe9ral",children:"Directeur G\xe9n\xe9ral"}),(0,ju.jsx)("option",{value:"Pr\xe9sident",children:"Pr\xe9sident"}),(0,ju.jsx)("option",{value:"G\xe9rant",children:"G\xe9rant"}),(0,ju.jsx)("option",{value:"Administrateur",children:"Administrateur"}),(0,ju.jsx)("option",{value:"Autre",children:"Autre"})]})),re.legalRepresentativeTitle&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.legalRepresentativeTitle.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Type de Document ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},Z("legalRepresentativeDocumentType")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner type..."}),(0,ju.jsx)("option",{value:"CIN",children:"CIN (Carte d'Identit\xe9 Nationale)"}),(0,ju.jsx)("option",{value:"Passport",children:"Passeport"}),(0,ju.jsx)("option",{value:"DrivingLicense",children:"Permis de Conduire"})]})),re.legalRepresentativeDocumentType&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.legalRepresentativeDocumentType.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Num\xe9ro de Document ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Z("legalRepresentativeDocumentNumber")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.legalRepresentativeDocumentNumber&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.legalRepresentativeDocumentNumber.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date d'\xc9mission ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"date"},Z("legalRepresentativeIssuedDate")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.legalRepresentativeIssuedDate&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.legalRepresentativeIssuedDate.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date d'Expiration"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"date"},Z("legalRepresentativeExpiryDate")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Autorit\xe9 d'\xc9mission ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Z("legalRepresentativeIssuingAuthority")),{},{placeholder:"Ex: ONI, Direction de l'Immigration",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.legalRepresentativeIssuingAuthority&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.legalRepresentativeIssuingAuthority.message})]})]})]}),$&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"3. Si\xe8ge Social"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Adresse du Si\xe8ge Social ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Z("headOfficeAddress")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.headOfficeAddress&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.headOfficeAddress.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["T\xe9l\xe9phone de l'Entreprise ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"tel"},Z("companyPhone")),{},{placeholder:"+509 XXXX XXXX",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.companyPhone&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.companyPhone.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email de l'Entreprise ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"email"},Z("companyEmail")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.companyEmail&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.companyEmail.message})]})]})]}),$&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"Signataires autoris\xe9s"}),(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Ajouter les personnes autoris\xe9es \xe0 g\xe9rer le compte de l'entreprise"}),(0,ju.jsxs)("button",{type:"button",onClick:()=>{G(null),H(!0)},className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:[(0,ju.jsx)(mm,{className:"h-4 w-4"}),"Ajouter signataire"]})]}),M.length>0?(0,ju.jsx)("div",{className:"space-y-3",children:M.map(e=>(0,ju.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"font-medium text-gray-900",children:e.fullName}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600",children:[e.relationshipToCustomer," | ",e.documentType,": ",e.documentNumber]}),(0,ju.jsx)("p",{className:"text-sm text-gray-500",children:e.phoneNumber})]}),(0,ju.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ju.jsx)("button",{type:"button",onClick:()=>{G(e),H(!0)},className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200",children:"Modifier"}),(0,ju.jsx)("button",{type:"button",onClick:()=>(e=>{U(M.filter(t=>t.id!==e))})(e.id),className:"px-3 py-1 bg-red-100 text-red-700 text-sm rounded hover:bg-red-200",children:(0,ju.jsx)(vm,{className:"w-4 h-4"})})]})]},e.id))}):(0,ju.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Aucun signataire autoris\xe9 ajout\xe9"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:[$?"4":"2",". Adresse et Contact"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Adresse Rue ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Z("street")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.street&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.street.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["D\xe9partement ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},Z("department")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner d\xe9partement..."}),Object.keys(Ep).map(e=>(0,ju.jsx)("option",{value:e,children:e},e))]})),re.department&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.department.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Commune ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},Z("commune")),{},{disabled:!k,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner commune..."}),k&&(null===(T=Ep[k])||void 0===T?void 0:T.map(e=>(0,ju.jsx)("option",{value:e,children:e},e)))]})),re.commune&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.commune.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["T\xe9l\xe9phone Principal ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"tel"},Z("primaryPhone")),{},{placeholder:"+509 XXXX XXXX",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.primaryPhone&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.primaryPhone.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xe9l\xe9phone Secondaire"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"tel"},Z("secondaryPhone")),{},{placeholder:"+509 XXXX XXXX",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.secondaryPhone&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.secondaryPhone.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"email"},Z("email")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.email&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.email.message})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:[$?"5":"3",". Documents ",$?"de l'Entreprise":"d'Identification"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Type de Document ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},Z("documentType")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner type..."}),$?(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)("option",{value:"TradeRegister",children:"Registre du Commerce"}),(0,ju.jsx)("option",{value:"TaxId",children:"NIF (Num\xe9ro d'Identification Fiscale)"}),(0,ju.jsx)("option",{value:"Statutes",children:"Statuts de l'Entreprise"}),(0,ju.jsx)("option",{value:"Other",children:"Autre"})]}):(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)("option",{value:"CIN",children:"CIN (Carte d'Identit\xe9 Nationale)"}),(0,ju.jsx)("option",{value:"Passport",children:"Passeport"}),(0,ju.jsx)("option",{value:"DrivingLicense",children:"Permis de Conduire"})]})]})),re.documentType&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.documentType.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Num\xe9ro de Document ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Z("documentNumber")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.documentNumber&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.documentNumber.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date d'\xc9mission ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"date"},Z("issuedDate")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.issuedDate&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.issuedDate.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date d'Expiration"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"date"},Z("expiryDate")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Autorit\xe9 d'\xc9mission ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Z("issuingAuthority")),{},{placeholder:$?"Ex: Chambre de Commerce, Minist\xe8re des Finances":"Ex: ONI, Direction de l'Immigration",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),re.issuingAuthority&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:re.issuingAuthority.message})]})]})]}),!$&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"4. Informations Professionnelles"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Occupation"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Z("occupation")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Revenu Mensuel (HTG)"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"number"},Z("monthlyIncome")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]})]})]})]}),$&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"Informations Professionnelles"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Activit\xe9 principale"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Z("occupation")),{},{placeholder:"Ex: Commerce de d\xe9tail, Services financiers",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chiffre d'affaires annuel (HTG)"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"number"},Z("monthlyIncome")),{},{placeholder:"Montant annuel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]})]})]}),(0,ju.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-6 border border-green-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,ju.jsx)(Hu,{className:"h-5 w-5 text-green-600"}),"Documents & Signature"]}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[null!==L&&void 0!==L&&L.documents&&L.documents.length>0?"".concat(L.documents.length," document(s) t\xe9l\xe9charg\xe9(s)"):"Aucun document t\xe9l\xe9charg\xe9",(null===L||void 0===L?void 0:L.signature)&&" \u2022 Signature enregistr\xe9e"]})]}),(0,ju.jsxs)("button",{type:"button",onClick:()=>O(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,ju.jsx)(ap,{className:"h-4 w-4"}),"G\xe9rer Documents"]})]})}),(0,ju.jsxs)("div",{className:"flex items-center justify-end gap-3 mt-8 pt-6 border-t border-gray-200",children:[(0,ju.jsx)("button",{type:"button",onClick:D,disabled:_,className:"px-6 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Annuler"}),(0,ju.jsx)("button",{type:"submit",disabled:_,className:"flex items-center gap-2 px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:_?(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)(ip,{className:"h-5 w-5 animate-spin"}),(0,ju.jsx)("span",{children:"Enregistrement..."})]}):(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)(lp,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Enregistrer les Modifications"})]})})]})]}),P&&L&&(0,ju.jsx)(Sp,{customer:L,onClose:()=>O(!1),onSuccess:async()=>{if(L){const e=await Fm.getCustomer(L.id);F(e),Ts.success("Documents mis \xe0 jour!")}}}),B&&(0,ju.jsx)(Dp,{signer:z,onSave:e=>{U(z?M.map(t=>t.id===z.id?e:t):[...M,(0,s.A)((0,s.A)({},e),{},{id:Date.now().toString()})]),H(!1),G(null)},onCancel:()=>{H(!1),G(null)}})]})};var Rp=r(847);const _p=t=>{var r;let{onSubmit:n,onCancel:a}=t;const[i,l]=(0,e.useState)(vi.SAVINGS),[o,c]=(0,e.useState)("HTG"),[d,u]=(0,e.useState)({}),[m,h]=(0,e.useState)(!1),p=Di.getCurrentUser(),x=(()=>{const e=((null===p||void 0===p?void 0:p.role)||"").toString();return["Cashier","BranchSupervisor","SuperAdmin","CAISSIER","CHEF_DE_SUCCURSALE","ChefDeSuccursale","SUPERADMIN"].includes(e)})(),[f,g]=(0,e.useState)(""),[v,y]=(0,e.useState)(!1),[b,N]=(0,e.useState)({}),j=(e,t)=>{u(r=>(0,s.A)((0,s.A)({},r),{},{[e]:t}))};return(0,e.useEffect)(()=>{let e=!0;const t=(f||"").trim();if(!t||t.length<2)return y(!1),N({}),j("customerId",""),()=>{e=!1};y(!0);const r=setTimeout(async()=>{try{const r=e=>(e||"").toString().trim().toLowerCase(),n=r(t);let s=null,a=[];if(a=await Fm.searchCustomers(t),!e)return;s=a.find(e=>{var t;if(!e)return!1;const s=(e=>{var t;if(console.log("\ud83d\udd0d computeDisplayId called with:",{id:e.id,customerCode:e.customerCode,hasCustomerCode:!!e.customerCode,firstName:e.firstName,lastName:e.lastName}),e.customerCode)return e.customerCode;if(null!==(t=e.identity)&&void 0!==t&&t.documentNumber&&e.identity.documentNumber.length<=8)return e.identity.documentNumber;const r=(e.firstName||"X").charAt(0).toUpperCase(),n=(e.lastName||"X").charAt(0).toUpperCase(),s="".concat(e.firstName).concat(e.lastName).concat(e.dateOfBirth||"");let a=0;for(let o=0;o<s.length;o++)a=(a<<5)-a+s.charCodeAt(o),a&=a;a=Math.abs(a);const i=(a%9e3+1e3).toString(),l="".concat(r).concat(n).concat(i);return console.log("\u26a0\ufe0f No customerCode, generated:",l),l})(e);return r(e.id)===n||r(null===(t=e.identity)||void 0===t?void 0:t.documentNumber)===n||r(s)===n})||null,!s&&Array.isArray(a)&&1===a.length&&(s=a[0]),j("customerId",s?s.id:""),s&&j("customerName",s.fullName),N({matched:s||void 0,count:a.length})}catch(r){if(!e)return;N({error:(null===r||void 0===r?void 0:r.message)||"Erreur de recherche"})}finally{e&&y(!1)}},400);return()=>{e=!1,clearTimeout(r)}},[f]),(0,ju.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0);try{if(!d.customerId||"string"!==typeof d.customerId||0===d.customerId.trim().length)return void Ts.error("Veuillez entrer un ID client valide et s\xe9lectionner un client existant");const e=(0,s.A)((0,s.A)({},d),{},{accountType:i,currency:o,branchId:1});await n(e)}catch(Sc){console.error("Error creating account:",Sc)}finally{h(!1)}},className:"p-6 space-y-6",children:[!x&&(0,ju.jsx)("div",{className:"rounded-lg border border-amber-300 bg-amber-50 p-3 text-amber-800",children:"Vous n'avez pas l'autorisation de cr\xe9er un compte. R\xf4le requis: Caissier, Chef de Succursale, ou SuperAdmin."}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de Compte *"}),(0,ju.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[vi.SAVINGS,vi.CURRENT,vi.TERM_SAVINGS].map(e=>(0,ju.jsx)("button",{type:"button",onClick:()=>l(e),className:"p-3 border rounded-lg text-center transition-colors ".concat(i===e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"),children:(0,ju.jsx)("div",{className:"font-medium",children:bi(e)})},e))})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Devise *"}),(0,ju.jsx)("div",{className:"grid grid-cols-2 gap-3",children:["HTG","USD"].map(e=>(0,ju.jsxs)("button",{type:"button",onClick:()=>c(e),className:"p-3 border rounded-lg text-center transition-colors ".concat(o===e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"),children:[(0,ju.jsx)("div",{className:"font-medium",children:e}),(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:"HTG"===e?"Gourde Ha\xeftienne":"Dollar Am\xe9ricain"})]},e))}),(0,ju.jsxs)("div",{className:"mt-3 rounded-lg bg-gray-50 border border-gray-200 p-3 text-sm text-gray-700",children:[(0,ju.jsx)("div",{className:"font-medium text-gray-800 mb-1",children:"Num\xe9ro de compte"}),(0,ju.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,ju.jsx)("li",{children:"G\xe9n\xe9r\xe9 automatiquement par le syst\xe8me au moment de la cr\xe9ation"}),(0,ju.jsx)("li",{children:"Format fixe selon la devise s\xe9lectionn\xe9e:"}),(0,ju.jsxs)("li",{className:"ml-4",children:["HTG \u2192 G + 11 chiffres (ex: ",(0,ju.jsx)("span",{className:"font-mono",children:"G12345678901"}),")"]}),(0,ju.jsxs)("li",{className:"ml-4",children:["USD \u2192 D + 11 chiffres (ex: ",(0,ju.jsx)("span",{className:"font-mono",children:"D12345678901"}),")"]})]})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID Client *"}),(0,ju.jsx)("input",{type:"text",required:!0,value:f,onChange:e=>{g(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Entrez l'ID du client (ex: FV2528)"}),(null===b||void 0===b?void 0:b.matched)&&(0,ju.jsx)("button",{type:"button",onClick:()=>{g(""),N({}),j("customerId","")},className:"mt-2 text-xs text-blue-700 hover:text-blue-900 underline",children:"Effacer la s\xe9lection"}),(0,ju.jsxs)("div",{className:"mt-1 min-h-[20px] text-xs",children:[v&&(0,ju.jsxs)("div",{className:"flex items-center text-blue-600",children:[(0,ju.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-2"}),(0,ju.jsx)("span",{children:"Recherche du client\u2026"})]}),!v&&(null===b||void 0===b?void 0:b.matched)&&(0,ju.jsxs)("div",{className:"flex items-center text-green-700",children:[(0,ju.jsx)(Ju,{className:"h-4 w-4 mr-1"}),(0,ju.jsxs)("span",{children:["Trouv\xe9: ",b.matched.fullName,null!==(r=b.matched.identity)&&void 0!==r&&r.documentNumber?" \u2022 ID: ".concat(b.matched.identity.documentNumber):""]})]}),!v&&!(null!==b&&void 0!==b&&b.matched)&&f.trim().length>=2&&"number"===typeof b.count&&b.count>1&&(0,ju.jsxs)("div",{className:"flex items-center text-amber-700",children:[(0,ju.jsx)(cm,{className:"h-4 w-4 mr-1"}),(0,ju.jsx)("span",{children:"Plusieurs r\xe9sultats. Sp\xe9cifiez l'ID exact ou le num\xe9ro de document."})]}),!v&&!(null!==b&&void 0!==b&&b.matched)&&f.trim().length>=2&&0===b.count&&(0,ju.jsx)("div",{className:"text-red-600",children:"Aucun client trouv\xe9"}),!v&&(null===b||void 0===b?void 0:b.error)&&(0,ju.jsx)("div",{className:"text-red-600",children:b.error})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du Client"}),(0,ju.jsx)("input",{type:"text",value:d.customerName||"",onChange:e=>j("customerName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nom du client",readOnly:!(null===b||void 0===b||!b.matched),disabled:!(null===b||void 0===b||!b.matched)}),d.customerId&&(0,ju.jsx)("div",{className:"mt-1 text-xs text-gray-500",children:"Rempli automatiquement apr\xe8s identification du client"})]})]}),null,(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Montant Initial (",o,") *"]}),(0,ju.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:d.initialDeposit||"",onChange:e=>j("initialDeposit",parseFloat(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Montant en ".concat(o)})]}),i===vi.SAVINGS&&(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Param\xe8tres du Compte d'\xc9pargne"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taux d'Int\xe9r\xeat (%)"}),(0,ju.jsx)("input",{type:"number",min:"0",max:"10",step:"0.01",value:d.interestRate||("HTG"===o?"3.0":"1.5"),onChange:e=>j("interestRate",parseFloat(e.target.value)/100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Solde Minimum (",o,")"]}),(0,ju.jsx)("input",{type:"number",min:"0",value:d.minimumBalance||("HTG"===o?"100":"5"),onChange:e=>j("minimumBalance",parseFloat(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Limite Retrait Quotidien (",o,")"]}),(0,ju.jsx)("input",{type:"number",min:"0",value:d.dailyWithdrawalLimit||("HTG"===o?"50000":"1000"),onChange:e=>j("dailyWithdrawalLimit",parseFloat(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),i===vi.CURRENT&&(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Param\xe8tres du Compte Courant"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Solde Minimum (",o,")"]}),(0,ju.jsx)("input",{type:"number",min:"0",value:d.minimumBalance||("HTG"===o?"500":"25"),onChange:e=>j("minimumBalance",parseFloat(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Limite Retrait Quotidien (",o,")"]}),(0,ju.jsx)("input",{type:"number",min:"0",value:d.dailyWithdrawalLimit||("HTG"===o?"100000":"2000"),onChange:e=>j("dailyWithdrawalLimit",parseFloat(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Limite Retrait Mensuel (",o,")"]}),(0,ju.jsx)("input",{type:"number",min:"0",value:d.monthlyWithdrawalLimit||("HTG"===o?"500000":"10000"),onChange:e=>j("monthlyWithdrawalLimit",parseFloat(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Code PIN"}),(0,ju.jsx)("input",{type:"password",maxLength:6,value:d.securityPin||"",onChange:e=>j("securityPin",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"4-6 chiffres"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question de s\xe9curit\xe9"}),(0,ju.jsx)("input",{type:"text",value:d.securityQuestion||"",onChange:e=>j("securityQuestion",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Ville de naissance?"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"R\xe9ponse"}),(0,ju.jsx)("input",{type:"text",value:d.securityAnswer||"",onChange:e=>j("securityAnswer",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mode de versement"}),(0,ju.jsxs)("select",{value:d.depositMethod||"",onChange:e=>j("depositMethod",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"CASH",children:"Cash"}),(0,ju.jsx)("option",{value:"TRANSFER",children:"Transfert"}),(0,ju.jsx)("option",{value:"CHEQUE",children:"Ch\xe8que"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Origine des fonds"}),(0,ju.jsxs)("select",{value:d.incomeSource||"",onChange:e=>j("incomeSource",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"SALARY",children:"Salaire"}),(0,ju.jsx)("option",{value:"BUSINESS",children:"Commerce"}),(0,ju.jsx)("option",{value:"TRANSFER",children:"Transfert"}),(0,ju.jsx)("option",{value:"AGRICULTURE",children:"Agriculture"}),(0,ju.jsx)("option",{value:"OTHER",children:"Autre"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fr\xe9quence des transactions"}),(0,ju.jsxs)("select",{value:d.transactionFrequency||"",onChange:e=>j("transactionFrequency",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"DAILY",children:"Quotidienne"}),(0,ju.jsx)("option",{value:"WEEKLY",children:"Hebdomadaire"}),(0,ju.jsx)("option",{value:"MONTHLY",children:"Mensuelle"}),(0,ju.jsx)("option",{value:"SEASONAL",children:"Saisonni\xe8re"})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"But de l'ouverture du compte"}),(0,ju.jsx)("input",{type:"text",value:d.accountPurpose||"",onChange:e=>j("accountPurpose",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Op\xe9rations commerciales, Paiement fournisseurs"})]}),(0,ju.jsxs)("div",{className:"mt-4",children:[(0,ju.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-2",children:"Personnes autoris\xe9es \xe0 signer (optionnel)"}),(0,ju.jsx)(Ip,{value:d.authorizedSigners||[],onChange:e=>j("authorizedSigners",e)})]})]}),i===vi.TERM_SAVINGS&&(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Param\xe8tres de l'\xc9pargne \xe0 Terme"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dur\xe9e du Terme *"}),(0,ju.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.values(yi).map(e=>(0,ju.jsxs)("button",{type:"button",onClick:()=>j("termType",e),className:"p-3 border rounded-lg text-center transition-colors ".concat(d.termType===e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"),children:[(0,ju.jsx)("div",{className:"font-medium",children:Ni(e)}),(0,ju.jsxs)("div",{className:"text-sm text-gray-500",children:[("HTG"===o?2.5:1.25)+Object.values(yi).indexOf(e)*("HTG"===o?1:.5),"%"]})]},e))})]}),(0,ju.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,ju.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,ju.jsx)(cm,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,ju.jsx)("p",{className:"font-medium",children:"Note importante:"}),(0,ju.jsx)("p",{children:"L'\xe9pargne \xe0 terme ne permet pas de retraits avant la date d'\xe9ch\xe9ance. Le taux d'int\xe9r\xeat affich\xe9 sera appliqu\xe9 automatiquement."})]})]})})]}),(0,ju.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,ju.jsx)("button",{type:"button",onClick:a,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",disabled:m,children:"Annuler"}),(0,ju.jsxs)("button",{type:"submit",disabled:m||!x,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[m&&(0,ju.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,ju.jsx)("span",{children:"Cr\xe9er le Compte"})]})]})]})},Ip=e=>{let{value:t,onChange:r}=e;const n=(e,n,s)=>{const a=[...t||[]];a[e][n]=s,r(a)};return(0,ju.jsxs)("div",{className:"space-y-3",children:[0===(t||[]).length&&(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:"Aucun signataire ajout\xe9."}),(t||[]).map((e,s)=>{var a;return(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Nom complet"}),(0,ju.jsx)("input",{type:"text",value:e.fullName,onChange:e=>n(s,"fullName",e.target.value),className:"w-full px-2 py-2 border border-gray-300 rounded"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type de pi\xe8ce"}),(0,ju.jsxs)("select",{value:e.documentType,onChange:e=>n(s,"documentType",e.target.value),className:"w-full px-2 py-2 border border-gray-300 rounded",children:[(0,ju.jsx)("option",{value:wm.CIN,children:"CIN"}),(0,ju.jsx)("option",{value:wm.PASSPORT,children:"Passeport"}),(0,ju.jsx)("option",{value:wm.DRIVING_LICENSE,children:"Permis"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Num\xe9ro"}),(0,ju.jsx)("input",{type:"text",value:e.documentNumber,onChange:e=>n(s,"documentNumber",e.target.value),className:"w-full px-2 py-2 border border-gray-300 rounded"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Relation"}),(0,ju.jsx)("input",{type:"text",value:e.relationshipToCustomer,onChange:e=>n(s,"relationshipToCustomer",e.target.value),className:"w-full px-2 py-2 border border-gray-300 rounded"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"T\xe9l\xe9phone"}),(0,ju.jsx)("input",{type:"tel",value:e.phoneNumber,onChange:e=>n(s,"phoneNumber",e.target.value),className:"w-full px-2 py-2 border border-gray-300 rounded"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Limite (HTG)"}),(0,ju.jsx)("input",{type:"number",min:0,value:null!==(a=e.authorizationLimit)&&void 0!==a?a:"",onChange:e=>n(s,"authorizationLimit",e.target.value?parseFloat(e.target.value):void 0),className:"w-full px-2 py-2 border border-gray-300 rounded"})]}),(0,ju.jsx)("div",{className:"md:col-span-6 flex justify-end",children:(0,ju.jsx)("button",{type:"button",onClick:()=>(e=>{const n=[...t||[]];n.splice(e,1),r(n)})(s),className:"text-xs text-red-600 hover:text-red-800",children:"Retirer"})})]},s)}),(0,ju.jsx)("button",{type:"button",onClick:()=>{r([...t||[],{fullName:"",documentType:wm.CIN,documentNumber:"",relationshipToCustomer:"",phoneNumber:"",authorizationLimit:void 0}])},className:"px-3 py-2 bg-gray-100 text-gray-800 rounded hover:bg-gray-200 text-sm",children:"+ Ajouter un signataire"})]})},Pp=()=>{var t,r,n,a,i,l,o,c,d,u,m,h;const[p,x]=(0,e.useState)("accounts"),[f,g]=(0,e.useState)([]),[v,y]=(0,e.useState)([]),[b,N]=(0,e.useState)(!0),[j,w]=(0,e.useState)(""),[S,A]=(0,e.useState)(""),[T,C]=(0,e.useState)({}),[E,D]=(0,e.useState)({branchId:void 0,status:"",customerType:"",dateFrom:"",dateTo:""}),[k,R]=(0,e.useState)(!1),[_,I]=(0,e.useState)({totalAccounts:0,activeAccounts:0,totalBalanceHTG:0,totalBalanceUSD:0,accountsByType:{SAVINGS:0,CURRENT:0,TERM_SAVINGS:0},accountsByCurrency:{HTG:0,USD:0},recentTransactions:0,dormantAccounts:0}),[P,O]=(0,e.useState)(!1),[L,F]=(0,e.useState)(!1),[M,U]=(0,e.useState)(!1),[B,H]=(0,e.useState)(!1),[z,G]=(0,e.useState)(!1),[V,W]=(0,e.useState)(null),[q,$]=(0,e.useState)(null),[K,X]=(0,e.useState)(!1),[Y,J]=(0,e.useState)([]);(0,e.useEffect)(()=>{"accounts"===p&&(N(!0),Z(),te(),de(1))},[p]),(0,e.useEffect)(()=>{"clients"===p&&(N(!0),se().finally(()=>N(!1)))},[p]),(0,e.useEffect)(()=>{"clients"===p&&se()},[S]);const Z=async()=>{try{console.log("\ud83d\udd0d Loading all client accounts...");const e=await Di.getClientAccounts({});console.log("\u2705 Client accounts loaded:",{isArray:Array.isArray(e),count:Array.isArray(e)?e.length:0,sample:Array.isArray(e)&&e.length>0?e[0]:null,allAccountTypes:Array.isArray(e)?e.map(e=>e.accountType):[]}),g(Array.isArray(e)?e:[])}catch(Sc){var e,t,r,n;console.error("\u274c Error loading accounts:",{message:null===Sc||void 0===Sc?void 0:Sc.message,response:null===Sc||void 0===Sc||null===(e=Sc.response)||void 0===e?void 0:e.data,status:null===Sc||void 0===Sc||null===(t=Sc.response)||void 0===t?void 0:t.status});const a=(null===Sc||void 0===Sc||null===(r=Sc.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||(null===Sc||void 0===Sc?void 0:Sc.message)||"Erreur lors du chargement des comptes";Ts.error(a),g([])}finally{N(!1)}},Q=e=>{switch("number"===typeof e?e:parseInt(e,10)){case 0:return"Carte d'Identit\xe9";case 1:return"Justificatif de R\xe9sidence";case 2:return"Justificatif de Revenu";case 3:return"Photo";default:return"Autre"}},ee=e=>{var t,r,n,s,a,i,l,o,c,d,u,m,h,p,x,f,g,v,y,b,N,j,w,S,A,T,C,E,D,k,R,_,I,P,O,L,F,M,U,B,H,z,G,V,W,q,$,K,X,Y,J,Z,ee,te,re,ne;if(!e)return{id:"",firstName:"",lastName:"",fullName:"N/A",dateOfBirth:"",gender:0,address:{street:"",commune:"",department:"",country:"Haiti",postalCode:void 0},contact:{primaryPhone:"",secondaryPhone:void 0,email:void 0,emergencyContactName:void 0,emergencyContactPhone:void 0},identity:{documentType:0,documentNumber:"",issuedDate:"",expiryDate:void 0,issuingAuthority:""},occupation:void 0,monthlyIncome:void 0,signature:void 0,documents:[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),isActive:!0};const se=(null===e||void 0===e?void 0:e.documents)||(null===e||void 0===e?void 0:e.documents)||[],ae=Array.isArray(se)?se.map(t=>{var r,n,s,a,i;const l=null!==(r=null===t||void 0===t?void 0:t.documentType)&&void 0!==r?r:null===t||void 0===t?void 0:t.documentType;return{id:(null===t||void 0===t?void 0:t.id)||(null===t||void 0===t?void 0:t.id),customerId:(null===t||void 0===t?void 0:t.customerId)||(null===t||void 0===t?void 0:t.customerId)||(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.id)||"",documentType:null!==l&&void 0!==l?l:4,documentTypeName:(null===t||void 0===t?void 0:t.documentTypeName)||(null===t||void 0===t?void 0:t.documentTypeName)||Q(l),name:(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.name)||"Document",description:(null===t||void 0===t?void 0:t.description)||(null===t||void 0===t?void 0:t.description),filePath:(null===t||void 0===t?void 0:t.filePath)||(null===t||void 0===t?void 0:t.filePath)||"",fileSize:null!==(n=null!==(s=null===t||void 0===t?void 0:t.fileSize)&&void 0!==s?s:null===t||void 0===t?void 0:t.fileSize)&&void 0!==n?n:0,mimeType:(null===t||void 0===t?void 0:t.mimeType)||(null===t||void 0===t?void 0:t.mimeType)||"",uploadedAt:(null===t||void 0===t?void 0:t.uploadedAt)||(null===t||void 0===t?void 0:t.uploadedAt)||(new Date).toISOString(),uploadedBy:(null===t||void 0===t?void 0:t.uploadedBy)||(null===t||void 0===t?void 0:t.uploadedBy)||"",verified:null!==(a=null!==(i=null===t||void 0===t?void 0:t.verified)&&void 0!==i?i:null===t||void 0===t?void 0:t.verified)&&void 0!==a&&a,verifiedAt:(null===t||void 0===t?void 0:t.verifiedAt)||(null===t||void 0===t?void 0:t.verifiedAt),verifiedBy:(null===t||void 0===t?void 0:t.verifiedBy)||(null===t||void 0===t?void 0:t.verifiedBy),downloadUrl:(null===t||void 0===t?void 0:t.downloadUrl)||(null===t||void 0===t?void 0:t.downloadUrl)}}):[];return{id:(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.Id)||"",customerCode:(null===e||void 0===e?void 0:e.customerCode)||(null===e||void 0===e?void 0:e.CustomerCode)||void 0,firstName:(null===e||void 0===e?void 0:e.FirstName)||(null===e||void 0===e?void 0:e.firstName)||"",lastName:(null===e||void 0===e?void 0:e.LastName)||(null===e||void 0===e?void 0:e.lastName)||"",fullName:(null===e||void 0===e?void 0:e.fullName)||(null===e||void 0===e?void 0:e.fullName)||"".concat((null===e||void 0===e?void 0:e.FirstName)||(null===e||void 0===e?void 0:e.firstName)||""," ").concat((null===e||void 0===e?void 0:e.LastName)||(null===e||void 0===e?void 0:e.lastName)||"").trim()||"N/A",dateOfBirth:(null===e||void 0===e?void 0:e.dateOfBirth)||(null===e||void 0===e?void 0:e.dateOfBirth)||"",gender:(e=>{if(void 0===e||null===e||""===e)return 0;if("number"===typeof e)return e;const t=String(e).trim().toLowerCase();if("m"===t||"male"===t||"masculin"===t||"gason"===t)return 0;if("f"===t||"female"===t||"feminin"===t||"fanm"===t)return 1;const r=Number(t);return isNaN(r)||0===r?0:1})(null!==(t=null!==(r=null!==(n=null===e||void 0===e?void 0:e.gender)&&void 0!==n?n:null===e||void 0===e?void 0:e.Gender)&&void 0!==r?r:null===e||void 0===e?void 0:e.Gender)&&void 0!==t?t:0),address:{street:(null===e||void 0===e||null===(s=e.address)||void 0===s?void 0:s.street)||(null===e||void 0===e||null===(a=e.address)||void 0===a?void 0:a.street)||"",commune:(null===e||void 0===e||null===(i=e.address)||void 0===i?void 0:i.commune)||(null===e||void 0===e||null===(l=e.address)||void 0===l?void 0:l.commune)||"",department:(null===e||void 0===e||null===(o=e.address)||void 0===o?void 0:o.department)||(null===e||void 0===e||null===(c=e.address)||void 0===c?void 0:c.department)||"",country:(null===e||void 0===e||null===(d=e.address)||void 0===d?void 0:d.Country)||(null===e||void 0===e||null===(u=e.address)||void 0===u?void 0:u.country)||"Haiti",postalCode:(null===e||void 0===e||null===(m=e.address)||void 0===m?void 0:m.postalCode)||(null===e||void 0===e||null===(h=e.address)||void 0===h?void 0:h.postalCode)||void 0},contact:{primaryPhone:(null===e||void 0===e||null===(p=e.Contact)||void 0===p?void 0:p.primaryPhone)||(null===e||void 0===e||null===(x=e.contact)||void 0===x?void 0:x.primaryPhone)||"",secondaryPhone:(null===e||void 0===e||null===(f=e.Contact)||void 0===f?void 0:f.secondaryPhone)||(null===e||void 0===e||null===(g=e.contact)||void 0===g?void 0:g.secondaryPhone)||void 0,email:(null===e||void 0===e||null===(v=e.Contact)||void 0===v?void 0:v.email)||(null===e||void 0===e||null===(y=e.contact)||void 0===y?void 0:y.email)||void 0,emergencyContactName:(null===e||void 0===e||null===(b=e.Contact)||void 0===b?void 0:b.emergencyContactName)||(null===e||void 0===e||null===(N=e.contact)||void 0===N?void 0:N.emergencyContactName)||void 0,emergencyContactPhone:(null===e||void 0===e||null===(j=e.Contact)||void 0===j?void 0:j.emergencyContactPhone)||(null===e||void 0===e||null===(w=e.contact)||void 0===w?void 0:w.emergencyContactPhone)||void 0},identity:{documentType:null!==(S=null!==(A=null===e||void 0===e||null===(T=e.identity)||void 0===T?void 0:T.documentType)&&void 0!==A?A:null===e||void 0===e||null===(C=e.identity)||void 0===C?void 0:C.documentType)&&void 0!==S?S:0,documentNumber:(null===e||void 0===e||null===(E=e.identity)||void 0===E?void 0:E.documentNumber)||(null===e||void 0===e||null===(D=e.identity)||void 0===D?void 0:D.documentNumber)||"",issuedDate:(null===e||void 0===e||null===(k=e.identity)||void 0===k?void 0:k.issuedDate)||(null===e||void 0===e||null===(R=e.identity)||void 0===R?void 0:R.issuedDate)||"",expiryDate:(null===e||void 0===e||null===(_=e.identity)||void 0===_?void 0:_.expiryDate)||(null===e||void 0===e||null===(I=e.identity)||void 0===I?void 0:I.expiryDate)||void 0,issuingAuthority:(null===e||void 0===e||null===(P=e.identity)||void 0===P?void 0:P.issuingAuthority)||(null===e||void 0===e||null===(O=e.identity)||void 0===O?void 0:O.issuingAuthority)||""},isBusiness:null!==(L=null!==(F=null===e||void 0===e?void 0:e.isBusiness)&&void 0!==F?F:null===e||void 0===e?void 0:e.IsBusiness)&&void 0!==L?L:void 0,companyName:(null===e||void 0===e?void 0:e.companyName)||(null===e||void 0===e?void 0:e.CompanyName)||void 0,legalForm:(null===e||void 0===e?void 0:e.legalForm)||(null===e||void 0===e?void 0:e.LegalForm)||void 0,tradeRegisterNumber:(null===e||void 0===e?void 0:e.tradeRegisterNumber)||(null===e||void 0===e?void 0:e.TradeRegisterNumber)||(null===e||void 0===e?void 0:e.businessRegistrationNumber)||void 0,taxId:(null===e||void 0===e?void 0:e.taxId)||(null===e||void 0===e?void 0:e.TaxId)||(null===e||void 0===e?void 0:e.companyNif)||void 0,headOfficeAddress:(null===e||void 0===e?void 0:e.headOfficeAddress)||(null===e||void 0===e?void 0:e.HeadOfficeAddress)||void 0,companyPhone:(null===e||void 0===e?void 0:e.companyPhone)||(null===e||void 0===e?void 0:e.CompanyPhone)||void 0,companyEmail:(null===e||void 0===e?void 0:e.companyEmail)||(null===e||void 0===e?void 0:e.CompanyEmail)||void 0,representativeFirstName:(null===e||void 0===e?void 0:e.representativeFirstName)||(null===e||void 0===e?void 0:e.RepresentativeFirstName)||(null===e||void 0===e||null===(M=e.legalRepresentative)||void 0===M?void 0:M.firstName)||void 0,representativeLastName:(null===e||void 0===e?void 0:e.representativeLastName)||(null===e||void 0===e?void 0:e.RepresentativeLastName)||(null===e||void 0===e||null===(U=e.legalRepresentative)||void 0===U?void 0:U.lastName)||void 0,representativeTitle:(null===e||void 0===e?void 0:e.representativeTitle)||(null===e||void 0===e?void 0:e.RepresentativeTitle)||(null===e||void 0===e||null===(B=e.legalRepresentative)||void 0===B?void 0:B.title)||void 0,representativeDocumentNumber:(null===e||void 0===e?void 0:e.representativeDocumentNumber)||(null===e||void 0===e?void 0:e.RepresentativeDocumentNumber)||(null===e||void 0===e||null===(H=e.legalRepresentative)||void 0===H?void 0:H.documentNumber)||void 0,legalRepresentative:{firstName:(null===e||void 0===e||null===(z=e.legalRepresentative)||void 0===z?void 0:z.firstName)||(null===e||void 0===e?void 0:e.representativeFirstName)||(null===e||void 0===e?void 0:e.RepresentativeFirstName)||void 0,lastName:(null===e||void 0===e||null===(G=e.legalRepresentative)||void 0===G?void 0:G.lastName)||(null===e||void 0===e?void 0:e.representativeLastName)||(null===e||void 0===e?void 0:e.RepresentativeLastName)||void 0,title:(null===e||void 0===e||null===(V=e.legalRepresentative)||void 0===V?void 0:V.title)||(null===e||void 0===e?void 0:e.representativeTitle)||(null===e||void 0===e?void 0:e.RepresentativeTitle)||void 0,documentType:null!==(W=null!==(q=null!==($=null===e||void 0===e||null===(K=e.legalRepresentative)||void 0===K?void 0:K.documentType)&&void 0!==$?$:null===e||void 0===e?void 0:e.representativeDocumentType)&&void 0!==q?q:null===e||void 0===e?void 0:e.RepresentativeDocumentType)&&void 0!==W?W:void 0,documentNumber:(null===e||void 0===e||null===(X=e.legalRepresentative)||void 0===X?void 0:X.documentNumber)||(null===e||void 0===e?void 0:e.representativeDocumentNumber)||(null===e||void 0===e?void 0:e.RepresentativeDocumentNumber)||void 0,issuedDate:(null===e||void 0===e||null===(Y=e.legalRepresentative)||void 0===Y?void 0:Y.issuedDate)||(null===e||void 0===e?void 0:e.representativeIssuedDate)||(null===e||void 0===e?void 0:e.RepresentativeIssuedDate)||void 0,expiryDate:(null===e||void 0===e||null===(J=e.legalRepresentative)||void 0===J?void 0:J.expiryDate)||(null===e||void 0===e?void 0:e.representativeExpiryDate)||(null===e||void 0===e?void 0:e.RepresentativeExpiryDate)||void 0,issuingAuthority:(null===e||void 0===e||null===(Z=e.legalRepresentative)||void 0===Z?void 0:Z.issuingAuthority)||(null===e||void 0===e?void 0:e.representativeIssuingAuthority)||(null===e||void 0===e?void 0:e.RepresentativeIssuingAuthority)||void 0},legalRepresentativeName:((t,r)=>{const n=(null===e||void 0===e||null===(t=e.legalRepresentative)||void 0===t?void 0:t.firstName)||(null===e||void 0===e?void 0:e.representativeFirstName)||(null===e||void 0===e?void 0:e.RepresentativeFirstName)||"",s=(null===e||void 0===e||null===(r=e.legalRepresentative)||void 0===r?void 0:r.lastName)||(null===e||void 0===e?void 0:e.representativeLastName)||(null===e||void 0===e?void 0:e.RepresentativeLastName)||"";return"".concat(n," ").concat(s).trim()||(null===e||void 0===e?void 0:e.legalRepresentativeName)||void 0})(),occupation:(null===e||void 0===e?void 0:e.occupation)||(null===e||void 0===e?void 0:e.occupation)||void 0,monthlyIncome:null!==(ee=null!==(te=null===e||void 0===e?void 0:e.monthlyIncome)&&void 0!==te?te:null===e||void 0===e?void 0:e.monthlyIncome)&&void 0!==ee?ee:void 0,signature:(null===e||void 0===e?void 0:e.signature)||(null===e||void 0===e?void 0:e.signature)||void 0,documents:ae,createdAt:(null===e||void 0===e?void 0:e.createdAt)||(null===e||void 0===e?void 0:e.createdAt)||(new Date).toISOString(),updatedAt:(null===e||void 0===e?void 0:e.UpdatedAt)||(null===e||void 0===e?void 0:e.updatedAt)||(new Date).toISOString(),isActive:null===(re=null!==(ne=null===e||void 0===e?void 0:e.isActive)&&void 0!==ne?ne:null===e||void 0===e?void 0:e.isActive)||void 0===re||re}},te=async()=>{try{console.log("\ud83d\udcca Loading client account statistics...");const e=await Di.getClientAccountStats();console.log("\u2705 Statistics loaded:",e),I(e)}catch(Sc){var e,t;console.error("\u274c Error loading stats:",{message:null===Sc||void 0===Sc?void 0:Sc.message,response:null===Sc||void 0===Sc||null===(e=Sc.response)||void 0===e?void 0:e.data,status:null===Sc||void 0===Sc||null===(t=Sc.response)||void 0===t?void 0:t.status})}};(0,e.useEffect)(()=>{let e=!0;return(async()=>{try{if(!e)return;await te()}catch(t){console.error("Error preloading client account stats on mount:",t)}})(),()=>{e=!1}},[]);const[re,ne]=(0,e.useState)([]);(0,e.useEffect)(()=>{let e=!0;return(async()=>{try{const t=await Di.getAllBranches();if(!e)return;ne(Array.isArray(t)?t:[])}catch(t){console.error("Error loading branches:",t),ne([])}})(),()=>{e=!1}},[]);const se=async()=>{try{if(S&&S.trim().length>=2){const e=await Fm.searchCustomers(S);let t=Array.isArray(e)?e.filter(e=>e).map(e=>ee(e)):[];const r=await Di.getClientAccounts({}),n=new Map;r.forEach(e=>{e.customerId&&e.branchId&&n.set(e.customerId,e.branchId)}),t=t.map(e=>(0,s.A)((0,s.A)({},e),{},{branchId:n.get(e.id)||1})),y(t)}else{const e=await Fm.getAllCustomers();let t=Array.isArray(e)?e.filter(e=>e).map(e=>ee(e)):[];const r=await Di.getClientAccounts({}),n=new Map;r.forEach(e=>{e.customerId&&e.branchId&&n.set(e.customerId,e.branchId)}),t=t.map(e=>(0,s.A)((0,s.A)({},e),{},{branchId:n.get(e.id)||1})),y(t)}}catch(Sc){console.error("Error loading customers:",Sc),Ts.error("Erreur lors du chargement des clients"),y([])}},ae=e=>{W(e),(async e=>{try{const t=f.find(t=>t.id===e),r=(null===t||void 0===t?void 0:t.accountNumber)||e,n=await Di.getAccountTransactions(r);J(n)}catch(Sc){console.error("Error loading transactions:",Sc),Ts.error("Erreur lors du chargement des transactions")}})(e.id),X(!0)},ie=e=>{var t;if(e.customerCode)return e.customerCode;if(null!==(t=e.identity)&&void 0!==t&&t.documentNumber&&e.identity.documentNumber.length<=8)return e.identity.documentNumber;const r=(e.firstName||"X").charAt(0).toUpperCase(),n=(e.lastName||"X").charAt(0).toUpperCase(),s=(e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return Math.abs(t)})("".concat(e.firstName).concat(e.lastName).concat(e.dateOfBirth||"")),a=(s%9e3+1e3).toString();return"".concat(r).concat(n).concat(a)},le=Array.isArray(f)?f.filter(e=>{if(!e)return!1;const t=(null===j||void 0===j?void 0:j.toLowerCase())||"",r=!t||((e.accountNumber||"").toLowerCase().includes(t)||(e.customerName||"").toLowerCase().includes(t)||(e.customerPhone||"").includes(j)),n=!T.accountType||e.accountType===T.accountType,s=!T.currency||e.currency===T.currency,a=!T.status||e.status===T.status,i=!T.branchId||e.branchId===T.branchId;return r&&n&&s&&a&&i}):[],oe=Array.isArray(le)?[...le].sort((e,t)=>{const r=e=>new Date((null===e||void 0===e?void 0:e.openingDate)||(null===e||void 0===e?void 0:e.lastTransactionDate)||(null===e||void 0===e?void 0:e.updatedAt)||(null===e||void 0===e?void 0:e.createdAt)||0).getTime();return r(t)-r(e)}):[],[ce,de]=(0,e.useState)(1),[ue,me]=(0,e.useState)(10),he=oe.length,pe=Math.max(1,Math.ceil(he/ue));(0,e.useEffect)(()=>{ce>pe&&de(pe)},[pe,ce]);const xe=oe.slice((ce-1)*ue,ce*ue);console.log("\ud83d\udcca Pagination Debug:",{totalAccounts:f.length,filteredCount:le.length,sortedCount:oe.length,totalFiltered:he,currentPage:ce,pageSize:ue,totalPages:pe,paginatedCount:xe.length,filters:T,sampleFilteredAccount:le[0],samplePaginatedAccount:xe[0]});const fe=Array.isArray(v)?v.filter(e=>{if(!e)return!1;if(S){var t,r,n;const s=S.toLowerCase();if(!((e.fullName||"").toLowerCase().includes(s)||(e.firstName||"").toLowerCase().includes(s)||(e.lastName||"").toLowerCase().includes(s)||((null===(t=e.contact)||void 0===t?void 0:t.primaryPhone)||"").includes(S)||(null===(r=e.contact)||void 0===r?void 0:r.email)&&e.contact.email.toLowerCase().includes(s)||((null===(n=e.identity)||void 0===n?void 0:n.documentNumber)||"").toLowerCase().includes(s)))return!1}if(E.branchId&&e.branchId!==E.branchId)return!1;if(E.status&&e.status!==E.status)return!1;if(E.customerType){const t=(e=>void 0!==(null===e||void 0===e?void 0:e.isBusiness)&&null!==(null===e||void 0===e?void 0:e.isBusiness)?!!e.isBusiness:!!(null!==e&&void 0!==e&&e.companyName||null!==e&&void 0!==e&&e.legalForm||null!==e&&void 0!==e&&e.tradeRegisterNumber||null!==e&&void 0!==e&&e.taxId||null!==e&&void 0!==e&&e.headOfficeAddress||null!==e&&void 0!==e&&e.companyPhone||null!==e&&void 0!==e&&e.companyEmail||null!==e&&void 0!==e&&e.representativeFirstName||null!==e&&void 0!==e&&e.representativeLastName||null!==e&&void 0!==e&&e.representativeTitle||null!==e&&void 0!==e&&e.representativeDocumentNumber))(e);if("BUSINESS"===E.customerType&&!t)return!1;if("PHYSICAL"===E.customerType&&t)return!1}if(E.dateFrom||E.dateTo){var s;const t=new Date(e.createdAt||(null===(s=e.identity)||void 0===s?void 0:s.issuedDate));if(E.dateFrom){if(t<new Date(E.dateFrom))return!1}if(E.dateTo){const e=new Date(E.dateTo);if(e.setHours(23,59,59,999),t>e)return!1}}return!0}):[],[ge,ve]=(0,e.useState)(1),[ye,be]=(0,e.useState)(10),Ne=fe.length,je=Math.max(1,Math.ceil(Ne/ye));(0,e.useEffect)(()=>{ge>je&&ve(1)},[Ne,ye]);const we=fe.slice((ge-1)*ye,ge*ye),Se=(e,t)=>{const r=Number(e||0);return"HTG"===t?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(r)+" HTG":new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(r)+" USD"},Ae=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("fr-FR")}catch(t){return"N/A"}},Te=(e,t)=>{if(!e)return t;try{const r=String(e).trim();if(/^\d{4}-\d{2}-\d{2}$/.test(r))return r;const n=r.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(n){const[e,t,r,s]=n;return"".concat(s,"-").concat(r,"-").concat(t)}const s=new Date(r);return isNaN(s.getTime())?t:s.toISOString().split("T")[0]}catch(r){return t}},Ce=e=>{const t={ACTIVE:{bg:"bg-green-100",text:"text-green-800",label:"Actif"},INACTIVE:{bg:"bg-red-100",text:"text-red-800",label:"Inactif"},CLOSED:{bg:"bg-gray-100",text:"text-gray-800",label:"Ferm\xe9"},SUSPENDED:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Suspendu"}},r=t[e]||t.ACTIVE;return(0,ju.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(r.bg," ").concat(r.text),children:r.label})};return b?(0,ju.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ju.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Comptes Clients"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"Cr\xe9er et g\xe9rer tous les types de comptes clients"})]}),(0,ju.jsxs)("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[(0,ju.jsxs)("button",{onClick:()=>F(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,ju.jsx)(mm,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Nouveau Client"})]}),(0,ju.jsxs)("button",{onClick:()=>O(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,ju.jsx)(Au,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Nouveau Compte"})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-1 inline-flex",children:[(0,ju.jsx)("button",{onClick:()=>x("accounts"),className:"px-6 py-2 rounded-md transition-colors ".concat("accounts"===p?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:(0,ju.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ju.jsx)(dm,{className:"h-4 w-4"}),(0,ju.jsx)("span",{children:"Comptes"})]})}),(0,ju.jsx)("button",{onClick:()=>x("clients"),className:"px-6 py-2 rounded-md transition-colors ".concat("clients"===p?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:(0,ju.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ju.jsx)(Ru,{className:"h-4 w-4"}),(0,ju.jsx)("span",{children:"Clients"})]})})]}),"accounts"===p&&(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Comptes"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:_.totalAccounts}),(0,ju.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:[_.activeAccounts," actifs"]})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(dm,{className:"h-6 w-6 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Solde Total HTG"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-green-600",children:Se(_.totalBalanceHTG,"HTG")})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(Du,{className:"h-6 w-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Solde Total USD"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:Se(_.totalBalanceUSD,"USD")})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(Du,{className:"h-6 w-6 text-blue-600"})})]})})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"R\xe9partition par Type"}),(0,ju.jsxs)("div",{className:"space-y-3",children:[(0,ju.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ju.jsx)("span",{className:"text-sm text-gray-600",children:"\xc9pargne"}),(0,ju.jsx)("span",{className:"font-medium",children:_.accountsByType.SAVINGS})]}),(0,ju.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ju.jsx)("span",{className:"text-sm text-gray-600",children:"Courant"}),(0,ju.jsx)("span",{className:"font-medium",children:_.accountsByType.CURRENT})]}),(0,ju.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ju.jsx)("span",{className:"text-sm text-gray-600",children:"\xc9pargne \xe0 Terme"}),(0,ju.jsx)("span",{className:"font-medium",children:_.accountsByType.TERM_SAVINGS})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"R\xe9partition par Devise"}),(0,ju.jsxs)("div",{className:"space-y-3",children:[(0,ju.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ju.jsx)("span",{className:"text-sm text-gray-600",children:"HTG"}),(0,ju.jsx)("span",{className:"font-medium",children:_.accountsByCurrency.HTG})]}),(0,ju.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ju.jsx)("span",{className:"text-sm text-gray-600",children:"USD"}),(0,ju.jsx)("span",{className:"font-medium",children:_.accountsByCurrency.USD})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actions Rapides"}),(0,ju.jsxs)("div",{className:"space-y-2",children:[(0,ju.jsx)("button",{onClick:()=>C((0,s.A)((0,s.A)({},T),{},{accountType:vi.SAVINGS})),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md",children:"Voir comptes d'\xe9pargne"}),(0,ju.jsx)("button",{onClick:()=>C((0,s.A)((0,s.A)({},T),{},{accountType:vi.CURRENT})),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md",children:"Voir comptes courants"}),(0,ju.jsx)("button",{onClick:()=>C((0,s.A)((0,s.A)({},T),{},{accountType:vi.TERM_SAVINGS})),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md",children:"Voir \xe9pargnes \xe0 terme"})]})]})]}),(0,ju.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ju.jsxs)("div",{className:"relative flex-1",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",{type:"text",placeholder:"Rechercher par num\xe9ro de compte, nom client, t\xe9l\xe9phone...",value:j,onChange:e=>w(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(hm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",{value:T.accountType||"",onChange:e=>C((0,s.A)((0,s.A)({},T),{},{accountType:e.target.value||void 0})),className:"pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"",children:"Tous types"}),(0,ju.jsx)("option",{value:vi.SAVINGS,children:"\xc9pargne"}),(0,ju.jsx)("option",{value:vi.CURRENT,children:"Courant"}),(0,ju.jsx)("option",{value:vi.TERM_SAVINGS,children:"\xc9pargne \xe0 Terme"})]})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",{value:null!==(t=T.branchId)&&void 0!==t?t:"",onChange:e=>{C((0,s.A)((0,s.A)({},T),{},{branchId:e.target.value?Number(e.target.value):void 0})),de(1)},className:"pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"",children:"Toutes succursales"}),re.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Du,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",{value:T.currency||"",onChange:e=>C((0,s.A)((0,s.A)({},T),{},{currency:e.target.value||void 0})),className:"pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"",children:"Toutes devises"}),(0,ju.jsx)("option",{value:"HTG",children:"HTG"}),(0,ju.jsx)("option",{value:"USD",children:"USD"})]})]}),(0,ju.jsx)("button",{onClick:()=>{w(""),C({}),de(1)},className:"px-4 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"R\xe9initialiser"})]}),(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ju.jsxs)("button",{onClick:()=>{try{if(!xe||0===xe.length)return void Ts.error("Aucune donn\xe9e de compte \xe0 exporter");const e=xe.map(e=>({"Num\xe9ro de compte":e.accountNumber||"","Nom du client":e.customerName||"",Solde:e.balance||0,Devise:e.currency||"",Statut:e.status||"",Succursale:e.branchName||"","Date d'ouverture":e.openingDate?new Date(e.openingDate).toLocaleDateString("fr-FR"):"","Derni\xe8re transaction":e.lastTransactionDate?new Date(e.lastTransactionDate).toLocaleDateString("fr-FR"):"","Type de compte":bi(e.accountType)||"","Solde disponible":e.availableBalance||0,"Taux d'int\xe9r\xeat":e.interestRate?"".concat((100*e.interestRate).toFixed(2),"%"):"","Solde minimum":e.minimumBalance||"","T\xe9l\xe9phone client":e.customerPhone||""})),t=(0,Rp.unparse)(e,{delimiter:";",header:!0}),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),s=URL.createObjectURL(r);n.setAttribute("href",s),n.setAttribute("download","comptes-clients-".concat((new Date).toISOString().split("T")[0],".csv")),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),Ts.success("Export CSV r\xe9ussi")}catch(Sc){console.error("Erreur lors de l'export CSV:",Sc),Ts.error("Erreur lors de l'export CSV")}},className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",disabled:!xe||0===xe.length,children:[(0,ju.jsx)(zu,{className:"h-4 w-4"}),(0,ju.jsx)("span",{children:"Exporter CSV"})]}),(0,ju.jsxs)("button",{onClick:()=>{try{if(!xe||0===xe.length)return void Ts.error("Aucune donn\xe9e de compte \xe0 exporter");const e=window.open("","_blank");if(!e)return void Ts.error("Veuillez autoriser les pop-ups pour exporter en PDF");const t='\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <meta charset="UTF-8">\n          <title>Liste des Comptes Clients - Kredi Ti Machann</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              padding: 20px;\n              line-height: 1.4;\n              color: #333;\n            }\n            .header {\n              text-align: center;\n              margin-bottom: 30px;\n              border-bottom: 3px solid #2563eb;\n              padding-bottom: 20px;\n            }\n            .header h1 {\n              color: #2563eb;\n              margin: 0;\n              font-size: 24px;\n            }\n            .header p {\n              color: #666;\n              margin: 5px 0;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              margin-top: 20px;\n              font-size: 12px;\n            }\n            th, td {\n              border: 1px solid #ddd;\n              padding: 8px;\n              text-align: left;\n              vertical-align: top;\n            }\n            th {\n              background-color: #2563eb;\n              color: white;\n              font-weight: bold;\n            }\n            tr:nth-child(even) {\n              background-color: #f9fafb;\n            }\n            .footer {\n              margin-top: 30px;\n              text-align: center;\n              color: #666;\n              font-size: 10px;\n              border-top: 1px solid #ddd;\n              padding-top: 20px;\n            }\n            .currency {\n              text-align: right;\n              font-family: \'Courier New\', monospace;\n            }\n            .status-active {\n              color: #059669;\n              font-weight: bold;\n            }\n            .status-inactive {\n              color: #dc2626;\n              font-weight: bold;\n            }\n            .status-closed {\n              color: #6b7280;\n              font-weight: bold;\n            }\n            .status-suspended {\n              color: #d97706;\n              font-weight: bold;\n            }\n            @media print {\n              body { padding: 10px; }\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <h1>LISTE DES COMPTES CLIENTS</h1>\n            <p>Kredi Ti Machann - Syst\xe8me de Micro-cr\xe9dit</p>\n            <p>Date d\'\xe9mission: '.concat((new Date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),"</p>\n            <p>Total des comptes: ").concat(xe.length,"</p>\n          </div>\n\n          <table>\n            <thead>\n              <tr>\n                <th>Num\xe9ro de compte</th>\n                <th>Client</th>\n                <th>Solde</th>\n                <th>Statut</th>\n                <th>Succursale</th>\n                <th>Date d'ouverture</th>\n                <th>Type</th>\n              </tr>\n            </thead>\n            <tbody>\n              ").concat(xe.map(e=>"\n                <tr>\n                  <td><strong>".concat(e.accountNumber||"","</strong></td>\n                  <td>\n                    ").concat(e.customerName||"",'<br/>\n                    <small style="color: #666;">').concat(e.customerPhone||"",'</small>\n                  </td>\n                  <td class="currency">\n                    ').concat(Se(e.balance,e.currency),'<br/>\n                    <small style="color: #666;">Disp: ').concat(Se(e.availableBalance,e.currency),'</small>\n                  </td>\n                  <td>\n                    <span class="').concat("ACTIVE"===e.status?"status-active":"INACTIVE"===e.status?"status-inactive":"CLOSED"===e.status?"status-closed":"status-suspended",'">\n                      ').concat("ACTIVE"===e.status?"Actif":"INACTIVE"===e.status?"Inactif":"CLOSED"===e.status?"Ferm\xe9":"Suspendu","\n                    </span>\n                  </td>\n                  <td>").concat(e.branchName||"","</td>\n                  <td>").concat(e.openingDate?new Date(e.openingDate).toLocaleDateString("fr-FR"):"","</td>\n                  <td>").concat(bi(e.accountType)||"","</td>\n                </tr>\n              ")).join(""),'\n            </tbody>\n          </table>\n\n          <div class="footer">\n            <p><strong>Kredi Ti Machann</strong> - Syst\xe8me de Micro-cr\xe9dit pour Ha\xefti</p>\n            <p>Document g\xe9n\xe9r\xe9 automatiquement le ').concat((new Date).toLocaleString("fr-FR"),'</p>\n            <p class="no-print">\n              <button onclick="window.print()" style="\n                background: #2563eb;\n                color: white;\n                padding: 10px 20px;\n                border: none;\n                border-radius: 5px;\n                cursor: pointer;\n                font-size: 14px;\n                margin-top: 10px;\n              ">\ud83d\udda8\ufe0f Imprimer / Enregistrer en PDF</button>\n            </p>\n          </div>\n        </body>\n        </html>\n      ');e.document.write(t),e.document.close(),e.onload=()=>{setTimeout(()=>{e.focus(),Ts.success("Fen\xeatre d'export PDF ouverte - Utilisez Ctrl+P ou le bouton Imprimer")},250)}}catch(Sc){console.error("Erreur lors de l'export PDF:",Sc),Ts.error("Erreur lors de l'export PDF")}},className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",disabled:!xe||0===xe.length,children:[(0,ju.jsx)(Hu,{className:"h-4 w-4"}),(0,ju.jsx)("span",{children:"Exporter PDF"})]})]}),(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:[he," compte(s) trouv\xe9(s)"]})]}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:0===he?(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)(dm,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,ju.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucun compte trouv\xe9"}),(0,ju.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:j||Object.keys(T).length>0?"Aucun compte ne correspond \xe0 votre recherche":"Aucun compte client pour le moment"})]}):(0,ju.jsx)("div",{className:"divide-y divide-gray-200",children:xe.map((e,t)=>(0,ju.jsx)("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:(0,ju.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["#",e.accountNumber]}),(0,ju.jsx)("span",{className:"text-sm text-gray-500",children:bi(e.accountType)}),Ce(e.status),(0,ju.jsx)("span",{className:"text-sm text-gray-500",children:e.currency})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-3",children:[(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(Ru,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"font-medium",children:e.customerName}),(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:e.customerPhone})]})]}),(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(Ku,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsx)("div",{className:"font-medium",children:e.branchName})]}),(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(Du,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"font-medium",children:Se(e.balance,e.currency)}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["Disponible: ",Se(e.availableBalance,e.currency)]})]})]}),(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(pm,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("div",{className:"font-medium",children:["Ouvert: ",Ae(e.openingDate)]}),e.lastTransactionDate&&(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["Derni\xe8re: ",Ae(e.lastTransactionDate)]})]})]})]}),(0,ju.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[e.accountType===vi.SAVINGS&&e.interestRate&&(0,ju.jsxs)("span",{children:["Taux int\xe9r\xeat: ",(100*e.interestRate).toFixed(2),"%"]}),e.accountType===vi.TERM_SAVINGS&&e.termType&&(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("span",{children:["Terme: ",Ni(e.termType)]}),e.maturityDate&&(0,ju.jsxs)("span",{children:["\xc9ch\xe9ance: ",Ae(e.maturityDate)]})]}),e.minimumBalance&&(0,ju.jsxs)("span",{children:["Solde min: ",Se(e.minimumBalance,e.currency)]})]})]}),(0,ju.jsxs)("div",{className:"ml-4 flex items-center space-x-2",children:[(0,ju.jsx)("button",{onClick:()=>ae(e),className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"Voir d\xe9tails et historique",children:(0,ju.jsx)(fi,{className:"h-4 w-4"})}),(0,ju.jsx)("button",{className:"p-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors",title:"Modifier",children:(0,ju.jsx)(xm,{className:"h-4 w-4"})})]})]})},"".concat(e.id,"-").concat(e.accountNumber,"-").concat(t)))})}),he>0&&(0,ju.jsx)("div",{className:"mt-3 bg-white rounded-md border border-gray-200",children:(0,ju.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:["Affichage ",Math.min((ce-1)*ue+1,he),"\u2013",Math.min(ce*ue,he)," de ",he," comptes"]}),(0,ju.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ju.jsx)("label",{className:"text-sm text-gray-600",children:"Afficher"}),(0,ju.jsxs)("select",{value:ue,onChange:e=>{me(Number(e.target.value)),de(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:[(0,ju.jsx)("option",{value:5,children:"5"}),(0,ju.jsx)("option",{value:10,children:"10"}),(0,ju.jsx)("option",{value:25,children:"25"}),(0,ju.jsx)("option",{value:50,children:"50"})]}),(0,ju.jsx)("button",{onClick:()=>de(e=>Math.max(1,e-1)),disabled:ce<=1,className:"px-3 py-1 bg-gray-100 text-sm rounded-md disabled:opacity-50",children:"Pr\xe9c"}),(0,ju.jsxs)("div",{className:"text-sm text-gray-700",children:[ce," / ",pe]}),(0,ju.jsx)("button",{onClick:()=>de(e=>Math.min(pe,e+1)),disabled:ce>=pe,className:"px-3 py-1 bg-gray-100 text-sm rounded-md disabled:opacity-50",children:"Suiv"})]})]})})]}),"clients"===p&&(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",{type:"text",placeholder:"Recherche par nom, t\xe9l\xe9phone ou num\xe9ro de document...",value:S,onChange:e=>A(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ju.jsxs)("button",{onClick:()=>R(!k),className:"mt-3 flex items-center space-x-2 text-blue-600 hover:text-blue-700 transition-colors text-sm font-medium",children:[(0,ju.jsx)(hm,{className:"h-4 w-4"}),(0,ju.jsx)("span",{children:"Filtres avanc\xe9s"}),k?(0,ju.jsx)(fm,{className:"h-4 w-4"}):(0,ju.jsx)(gm,{className:"h-4 w-4"})]}),k&&(0,ju.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Succursale"}),(0,ju.jsxs)("select",{value:null!==(r=E.branchId)&&void 0!==r?r:"",onChange:e=>D((0,s.A)((0,s.A)({},E),{},{branchId:e.target.value?Number(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"Toutes les succursales"}),re.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de Client"}),(0,ju.jsxs)("select",{value:E.customerType,onChange:e=>D((0,s.A)((0,s.A)({},E),{},{customerType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"Tous"}),(0,ju.jsx)("option",{value:"PHYSICAL",children:"Personne Physique"}),(0,ju.jsx)("option",{value:"BUSINESS",children:"Personne Morale"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estati"}),(0,ju.jsxs)("select",{value:E.status,onChange:e=>D((0,s.A)((0,s.A)({},E),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"Tous les statuts"}),(0,ju.jsx)("option",{value:"ACTIVE",children:"Actif"}),(0,ju.jsx)("option",{value:"INACTIVE",children:"Inactif"}),(0,ju.jsx)("option",{value:"PENDING",children:"En attente"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de d\xe9but"}),(0,ju.jsx)("input",{type:"date",value:E.dateFrom,onChange:e=>D((0,s.A)((0,s.A)({},E),{},{dateFrom:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de fin"}),(0,ju.jsx)("input",{type:"date",value:E.dateTo,onChange:e=>D((0,s.A)((0,s.A)({},E),{},{dateTo:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ju.jsxs)("div",{className:"mt-4 flex items-center space-x-3",children:[(0,ju.jsx)("button",{onClick:()=>D({branchId:void 0,status:"",customerType:"",dateFrom:"",dateTo:""}),className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Effacer les filtres"}),(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:[fe.length," client(s) trouv\xe9(s)"]})]})]})]}),(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ju.jsxs)("button",{onClick:()=>{try{if(!we||0===we.length)return void Ts.error("Aucune donn\xe9e client \xe0 exporter");const e=we.map(e=>{var t,r,n,s,a,i,l,o,c,d,u,m;return{"ID Client":ie(e)||"","Nom complet":e.fullName||"","Pr\xe9nom":e.firstName||"",Nom:e.lastName||"","Date de naissance":e.dateOfBirth?new Date(e.dateOfBirth).toLocaleDateString("fr-FR"):"",Genre:0===e.gender?"Masculin":1===e.gender?"F\xe9minin":"","T\xe9l\xe9phone principal":(null===(t=e.contact)||void 0===t?void 0:t.primaryPhone)||"","T\xe9l\xe9phone secondaire":(null===(r=e.contact)||void 0===r?void 0:r.secondaryPhone)||"",Email:(null===(n=e.contact)||void 0===n?void 0:n.email)||"",Rue:(null===(s=e.address)||void 0===s?void 0:s.street)||"",Commune:(null===(a=e.address)||void 0===a?void 0:a.commune)||"","D\xe9partement":(null===(i=e.address)||void 0===i?void 0:i.department)||"","Type de document":void 0!==(null===(l=e.identity)||void 0===l?void 0:l.documentType)&&["CIN","Passeport","Permis de Conduire"][e.identity.documentType]||"","Num\xe9ro de document":(null===(o=e.identity)||void 0===o?void 0:o.documentNumber)||"","Date d'\xe9mission":null!==(c=e.identity)&&void 0!==c&&c.issuedDate?new Date(e.identity.issuedDate).toLocaleDateString("fr-FR"):"","Date d'expiration":null!==(d=e.identity)&&void 0!==d&&d.expiryDate?new Date(e.identity.expiryDate).toLocaleDateString("fr-FR"):"","Autorit\xe9 d'\xe9mission":(null===(u=e.identity)||void 0===u?void 0:u.issuingAuthority)||"",Profession:e.occupation||"","Revenu mensuel":e.monthlyIncome?"".concat(e.monthlyIncome," HTG"):"","Personne morale":null!==e&&void 0!==e&&e.isBusiness||null!==e&&void 0!==e&&e.companyName?"Oui":"Non","Raison sociale":(null===e||void 0===e?void 0:e.companyName)||"","Forme juridique":(null===e||void 0===e?void 0:e.legalForm)||"","Num\xe9ro registre commerce":(null===e||void 0===e?void 0:e.tradeRegisterNumber)||"",NIF:(null===e||void 0===e?void 0:e.taxId)||"",Statut:e.isActive?"Actif":"Inactif","Date de cr\xe9ation":e.createdAt?new Date(e.createdAt).toLocaleDateString("fr-FR"):"","Nombre de documents":(null===(m=e.documents)||void 0===m?void 0:m.length)||0}}),t=(0,Rp.unparse)(e,{delimiter:";",header:!0}),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),s=URL.createObjectURL(r);n.setAttribute("href",s),n.setAttribute("download","clients-".concat((new Date).toISOString().split("T")[0],".csv")),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),Ts.success("Export CSV clients r\xe9ussi")}catch(Sc){console.error("Erreur lors de l'export CSV clients:",Sc),Ts.error("Erreur lors de l'export CSV clients")}},className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",disabled:!we||0===we.length,children:[(0,ju.jsx)(zu,{className:"h-4 w-4"}),(0,ju.jsx)("span",{children:"Exporter CSV"})]}),(0,ju.jsxs)("button",{onClick:()=>{try{if(!we||0===we.length)return void Ts.error("Aucune donn\xe9e client \xe0 exporter");const e=window.open("","_blank");if(!e)return void Ts.error("Veuillez autoriser les pop-ups pour exporter en PDF");const t='\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <meta charset="UTF-8">\n          <title>Liste des Clients - Kredi Ti Machann</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              padding: 20px;\n              line-height: 1.4;\n              color: #333;\n            }\n            .header {\n              text-align: center;\n              margin-bottom: 30px;\n              border-bottom: 3px solid #2563eb;\n              padding-bottom: 20px;\n            }\n            .header h1 {\n              color: #2563eb;\n              margin: 0;\n              font-size: 24px;\n            }\n            .header p {\n              color: #666;\n              margin: 5px 0;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              margin-top: 20px;\n              font-size: 10px;\n            }\n            th, td {\n              border: 1px solid #ddd;\n              padding: 6px;\n              text-align: left;\n              vertical-align: top;\n            }\n            th {\n              background-color: #2563eb;\n              color: white;\n              font-weight: bold;\n              font-size: 9px;\n            }\n            tr:nth-child(even) {\n              background-color: #f9fafb;\n            }\n            .footer {\n              margin-top: 30px;\n              text-align: center;\n              color: #666;\n              font-size: 10px;\n              border-top: 1px solid #ddd;\n              padding-top: 20px;\n            }\n            .status-active {\n              color: #059669;\n              font-weight: bold;\n            }\n            .status-inactive {\n              color: #dc2626;\n              font-weight: bold;\n            }\n            .business-badge {\n              background: #fef3c7;\n              color: #d97706;\n              padding: 2px 6px;\n              border-radius: 3px;\n              font-size: 8px;\n              font-weight: bold;\n            }\n            @media print {\n              body { padding: 10px; }\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <h1>LISTE DES CLIENTS</h1>\n            <p>Kredi Ti Machann - Syst\xe8me de Micro-cr\xe9dit</p>\n            <p>Date d\'\xe9mission: '.concat((new Date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),"</p>\n            <p>Total des clients: ").concat(we.length,"</p>\n          </div>\n\n          <table>\n            <thead>\n              <tr>\n                <th>ID Client</th>\n                <th>Nom complet</th>\n                <th>Contact</th>\n                <th>Adresse</th>\n                <th>Document</th>\n                <th>Statut</th>\n                <th>Type</th>\n              </tr>\n            </thead>\n            <tbody>\n              ").concat(we.map(e=>{var t,r,n,s,a,i;return"\n                <tr>\n                  <td><strong>".concat(ie(e)||"","</strong></td>\n                  <td>\n                    ").concat(e.fullName||"","\n                    ").concat(null!==e&&void 0!==e&&e.isBusiness||null!==e&&void 0!==e&&e.companyName?'<br/><span class="business-badge">PM</span>':"","\n                  </td>\n                  <td>\n                    ").concat((null===(t=e.contact)||void 0===t?void 0:t.primaryPhone)||"",'<br/>\n                    <small style="color: #666;">').concat((null===(r=e.contact)||void 0===r?void 0:r.email)||"","</small>\n                  </td>\n                  <td>\n                    ").concat((null===(n=e.address)||void 0===n?void 0:n.commune)||"",'<br/>\n                    <small style="color: #666;">').concat((null===(s=e.address)||void 0===s?void 0:s.department)||"","</small>\n                  </td>\n                  <td>\n                    ").concat((null===(a=e.identity)||void 0===a?void 0:a.documentNumber)||"",'<br/>\n                    <small style="color: #666;">\n                      ').concat(void 0!==(null===(i=e.identity)||void 0===i?void 0:i.documentType)&&["CIN","Passeport","Permis"][e.identity.documentType]||"",'\n                    </small>\n                  </td>\n                  <td>\n                    <span class="').concat(e.isActive?"status-active":"status-inactive",'">\n                      ').concat(e.isActive?"Actif":"Inactif","\n                    </span>\n                  </td>\n                  <td>\n                    ").concat(null!==e&&void 0!==e&&e.isBusiness||null!==e&&void 0!==e&&e.companyName?"Personne Morale":"Personne Physique","\n                  </td>\n                </tr>\n              ")}).join(""),'\n            </tbody>\n          </table>\n\n          <div class="footer">\n            <p><strong>Kredi Ti Machann</strong> - Syst\xe8me de Micro-cr\xe9dit pour Ha\xefti</p>\n            <p>Document g\xe9n\xe9r\xe9 automatiquement le ').concat((new Date).toLocaleString("fr-FR"),'</p>\n            <p class="no-print">\n              <button onclick="window.print()" style="\n                background: #2563eb;\n                color: white;\n                padding: 10px 20px;\n                border: none;\n                border-radius: 5px;\n                cursor: pointer;\n                font-size: 14px;\n                margin-top: 10px;\n              ">\ud83d\udda8\ufe0f Imprimer / Enregistrer en PDF</button>\n            </p>\n          </div>\n        </body>\n        </html>\n      ');e.document.write(t),e.document.close(),e.onload=()=>{setTimeout(()=>{e.focus(),Ts.success("Fen\xeatre d'export PDF clients ouverte - Utilisez Ctrl+P ou le bouton Imprimer")},250)}}catch(Sc){console.error("Erreur lors de l'export PDF clients:",Sc),Ts.error("Erreur lors de l'export PDF clients")}},className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",disabled:!we||0===we.length,children:[(0,ju.jsx)(Hu,{className:"h-4 w-4"}),(0,ju.jsx)("span",{children:"Exporter PDF"})]})]}),(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:[Ne," client(s) au total"]})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"w-full",children:[(0,ju.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Document"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Adresse"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===fe.length?(0,ju.jsx)("tr",{children:(0,ju.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center",children:(0,ju.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,ju.jsx)(Ru,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,ju.jsx)("p",{className:"text-gray-500",children:S?"Aucun client ne correspond \xe0 votre recherche":"Aucun client pour le moment"})]})})}):we.filter(e=>e&&e.id).map(e=>{var t,r,n,s;return(0,ju.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ju.jsx)(Ru,{className:"h-5 w-5 text-blue-600"})}),(0,ju.jsxs)("div",{className:"ml-4",children:[(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.fullName||"N/A"}),(0,ju.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",ie(e)]})]})]})}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:(null===(t=e.contact)||void 0===t?void 0:t.primaryPhone)||"N/A"}),(null===(r=e.contact)||void 0===r?void 0:r.email)&&(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:e.contact.email})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:e.documents&&e.documents.length>0?(0,ju.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,ju.jsxs)("span",{className:"font-medium",children:[e.documents.length," document(s)"]}),(0,ju.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.documents.slice(0,2).map((e,t)=>(0,ju.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded-full",children:e.documentTypeName||e.documentType||"Document"},t)),e.documents.length>2&&(0,ju.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",e.documents.length-2," autres"]})]})]}):(0,ju.jsx)("span",{className:"text-gray-500",children:"Aucun document"})})}),(0,ju.jsxs)("td",{className:"px-6 py-4",children:[(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:(null===(n=e.address)||void 0===n?void 0:n.commune)||"N/A"}),(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:(null===(s=e.address)||void 0===s?void 0:s.department)||"N/A"})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.isActive?(0,ju.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Actif"}):(0,ju.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Inactif"})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,ju.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,ju.jsx)("button",{onClick:()=>e.id&&(async e=>{try{const t=await Fm.getCustomer(e),r=ee(t);console.log("Client charg\xe9 pour \xe9dition:",r),$(r),U(!0)}catch(Sc){console.error("Erreur lors du chargement du client:",Sc),Ts.error("Impossible de charger les informations du client")}})(e.id),disabled:!e.id,className:"text-blue-600 hover:text-blue-900 transition-colors p-2 hover:bg-blue-50 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",title:"Modifier",children:(0,ju.jsx)(xm,{className:"h-5 w-5"})}),(0,ju.jsx)("button",{onClick:()=>e.id&&(async e=>{try{const t=await Fm.getCustomer(e),r=ee(t);$(r),H(!0)}catch(Sc){console.error("Erreur lors du chargement des d\xe9tails:",Sc),Ts.error("Impossible de charger les d\xe9tails du client")}})(e.id),disabled:!e.id,className:"text-gray-600 hover:text-gray-900 transition-colors p-2 hover:bg-gray-50 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",title:"Voir les d\xe9tails",children:(0,ju.jsx)(fi,{className:"h-5 w-5"})}),(0,ju.jsx)("button",{onClick:()=>e&&(e=>{var t,r,n,s,a,i,l,o,c,d,u,m,h;if(!e)return void Ts.error("Aucune donn\xe9e client \xe0 exporter");const p=window.open("","_blank");if(!p)return void Ts.error("Veuillez autoriser les pop-ups pour exporter en PDF");const x='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset="UTF-8">\n        <title>Profil Client - '.concat(e.fullName,'</title>\n        <style>\n          body { \n            font-family: Arial, sans-serif; \n            padding: 40px; \n            line-height: 1.6;\n            color: #333;\n          }\n          .header { \n            text-align: center; \n            margin-bottom: 30px; \n            border-bottom: 3px solid #2563eb;\n            padding-bottom: 20px;\n          }\n          .header h1 { \n            color: #2563eb; \n            margin: 0;\n            font-size: 28px;\n          }\n          .header p { \n            color: #666; \n            margin: 5px 0;\n          }\n          .section { \n            margin-bottom: 25px; \n            page-break-inside: avoid;\n          }\n          .section-title { \n            background: #2563eb; \n            color: white; \n            padding: 8px 12px; \n            margin-bottom: 15px;\n            font-weight: bold;\n            font-size: 16px;\n          }\n          .info-grid { \n            display: grid; \n            grid-template-columns: 1fr 1fr; \n            gap: 15px; \n          }\n          .info-item { \n            padding: 10px; \n            background: #f9fafb;\n            border-left: 3px solid #2563eb;\n          }\n          .info-label { \n            font-weight: bold; \n            color: #555; \n            font-size: 12px;\n            text-transform: uppercase;\n            margin-bottom: 3px;\n          }\n          .info-value { \n            color: #000;\n            font-size: 14px;\n          }\n          .footer { \n            margin-top: 40px; \n            text-align: center; \n            color: #666; \n            font-size: 12px;\n            border-top: 1px solid #ddd;\n            padding-top: 20px;\n          }\n          @media print {\n            body { padding: 20px; }\n            .no-print { display: none; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <h1>PROFIL CLIENT</h1>\n          <p>Kredi Ti Machann - Syst\xe8me de Micro-cr\xe9dit</p>\n          <p>Date d\'\xe9mission: ').concat((new Date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),'</p>\n        </div>\n\n          <div class="section">\n          <div class="section-title">\ud83d\udccb INFORMATIONS PERSONNELLES</div>\n          <div class="info-grid">\n            <div class="info-item">\n              <div class="info-label">Nom complet</div>\n              <div class="info-value">').concat(e.fullName||"N/A",'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">Date de naissance</div>\n              <div class="info-value">').concat(e.dateOfBirth?new Date(e.dateOfBirth).toLocaleDateString("fr-FR"):"N/A",'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">Genre</div>\n              <div class="info-value">').concat(0===e.gender?"Masculin":"F\xe9minin",'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">ID Client</div>\n              <div class="info-value">').concat(ie(e),'</div>\n            </div>\n          </div>\n        </div>        <div class="section">\n          <div class="section-title">\ud83d\udccd ADRESSE</div>\n          <div class="info-grid">\n            <div class="info-item">\n              <div class="info-label">Adresse</div>\n              <div class="info-value">').concat((null===(t=e.address)||void 0===t?void 0:t.street)||"N/A",'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">Commune</div>\n              <div class="info-value">').concat((null===(r=e.address)||void 0===r?void 0:r.commune)||"N/A",'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">D\xe9partement</div>\n              <div class="info-value">').concat((null===(n=e.address)||void 0===n?void 0:n.department)||"N/A","</div>\n            </div>\n            ").concat(null!==(s=e.address)&&void 0!==s&&s.postalCode?'\n            <div class="info-item">\n              <div class="info-label">Code postal</div>\n              <div class="info-value">'.concat(e.address.postalCode,"</div>\n            </div>\n            "):"",'\n          </div>\n        </div>\n\n        <div class="section">\n          <div class="section-title">\ud83d\udcde CONTACT</div>\n          <div class="info-grid">\n            <div class="info-item">\n              <div class="info-label">T\xe9l\xe9phone principal</div>\n              <div class="info-value">').concat((null===(a=e.contact)||void 0===a?void 0:a.primaryPhone)||"N/A","</div>\n            </div>\n            ").concat(null!==(i=e.contact)&&void 0!==i&&i.secondaryPhone?'\n            <div class="info-item">\n              <div class="info-label">T\xe9l\xe9phone secondaire</div>\n              <div class="info-value">'.concat(e.contact.secondaryPhone,"</div>\n            </div>\n            "):"","\n            ").concat(null!==(l=e.contact)&&void 0!==l&&l.email?'\n            <div class="info-item">\n              <div class="info-label">Email</div>\n              <div class="info-value">'.concat(e.contact.email,"</div>\n            </div>\n            "):"","\n            ").concat(null!==(o=e.contact)&&void 0!==o&&o.emergencyContactName?'\n            <div class="info-item">\n              <div class="info-label">Contact d\'urgence</div>\n              <div class="info-value">'.concat(e.contact.emergencyContactName," - ").concat(e.contact.emergencyContactPhone||"","</div>\n            </div>\n            "):"",'\n          </div>\n        </div>\n\n        <div class="section">\n          <div class="section-title">\ud83e\udeaa DOCUMENT D\'IDENTIT\xc9</div>\n          <div class="info-grid">\n            <div class="info-item">\n              <div class="info-label">Type de document</div>\n              <div class="info-value">').concat(void 0!==(null===(c=e.identity)||void 0===c?void 0:c.documentType)?(e=>{switch(e){case Im.CIN:return"CIN";case Im.Passport:return"Passeport";case Im.DrivingLicense:return"Permis de conduire";default:return"Autre"}})(e.identity.documentType):"N/A",'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">Num\xe9ro</div>\n              <div class="info-value">').concat((null===(d=e.identity)||void 0===d?void 0:d.documentNumber)||"N/A",'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">Date d\'\xe9mission</div>\n              <div class="info-value">').concat(null!==(u=e.identity)&&void 0!==u&&u.issuedDate?new Date(e.identity.issuedDate).toLocaleDateString("fr-FR"):"N/A","</div>\n            </div>\n            ").concat(null!==(m=e.identity)&&void 0!==m&&m.expiryDate?'\n            <div class="info-item">\n              <div class="info-label">Date d\'expiration</div>\n              <div class="info-value">'.concat(new Date(e.identity.expiryDate).toLocaleDateString("fr-FR"),"</div>\n            </div>\n            "):"",'\n            <div class="info-item">\n              <div class="info-label">Autorit\xe9 \xe9mettrice</div>\n              <div class="info-value">').concat((null===(h=e.identity)||void 0===h?void 0:h.issuingAuthority)||"N/A","</div>\n            </div>\n          </div>\n        </div>\n\n        ").concat(e.occupation||e.monthlyIncome?'\n        <div class="section">\n          <div class="section-title">\ud83d\udcbc INFORMATIONS PROFESSIONNELLES</div>\n          <div class="info-grid">\n            '.concat(e.occupation?'\n            <div class="info-item">\n              <div class="info-label">Profession</div>\n              <div class="info-value">'.concat(e.occupation,"</div>\n            </div>\n            "):"","\n            ").concat(e.monthlyIncome?'\n            <div class="info-item">\n              <div class="info-label">Revenu mensuel</div>\n              <div class="info-value">'.concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD"}).format(e.monthlyIncome).replace("$","HTG "),"</div>\n            </div>\n            "):"","\n          </div>\n        </div>\n        "):"",'\n\n        <div class="footer">\n          <p><strong>Kredi Ti Machann</strong> - Syst\xe8me de Micro-cr\xe9dit pour Ha\xefti</p>\n          <p>Document g\xe9n\xe9r\xe9 automatiquement le ').concat((new Date).toLocaleString("fr-FR"),'</p>\n          <p class="no-print">\n            <button onclick="window.print()" style="\n              background: #2563eb;\n              color: white;\n              padding: 10px 20px;\n              border: none;\n              border-radius: 5px;\n              cursor: pointer;\n              font-size: 14px;\n              margin-top: 10px;\n            ">\ud83d\udda8\ufe0f Imprimer / Enregistrer en PDF</button>\n          </p>\n        </div>\n      </body>\n      </html>\n    ');p.document.write(x),p.document.close(),p.onload=()=>{setTimeout(()=>{p.focus(),Ts.success("Fen\xeatre d'export ouverte - Utilisez Ctrl+P ou le bouton Imprimer")},250)}})(e),disabled:!e,className:"text-green-600 hover:text-green-900 transition-colors p-2 hover:bg-green-50 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",title:"Eksp\xf2 PDF",children:(0,ju.jsx)(zu,{className:"h-5 w-5"})})]})})]},e.id)})})]})}),(0,ju.jsxs)("div",{className:"px-4 py-3 bg-white border-t flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:["Affichage ",(ge-1)*ye+1," \u2013 ",Math.min(ge*ye,Ne)," sur ",Ne]}),(0,ju.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ju.jsx)("label",{className:"text-sm text-gray-600",children:"Lignes"}),(0,ju.jsxs)("select",{value:ye,onChange:e=>{be(Number(e.target.value)),ve(1)},className:"px-2 py-1 border rounded",children:[(0,ju.jsx)("option",{value:10,children:"10"}),(0,ju.jsx)("option",{value:20,children:"20"}),(0,ju.jsx)("option",{value:50,children:"50"}),(0,ju.jsx)("option",{value:100,children:"100"})]}),(0,ju.jsx)("button",{onClick:()=>ve(e=>Math.max(1,e-1)),disabled:ge<=1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Pr\xe9c"}),(0,ju.jsx)("span",{className:"text-sm",children:"Page"}),(0,ju.jsx)("select",{value:ge,onChange:e=>ve(Number(e.target.value)),className:"px-2 py-1 border rounded",children:Array.from({length:je}).map((e,t)=>(0,ju.jsx)("option",{value:t+1,children:t+1},t))}),(0,ju.jsx)("button",{onClick:()=>ve(e=>Math.min(je,e+1)),disabled:ge>=je,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Suiv"})]})]})]})]}),L&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Cr\xe9er un Nouveau Client"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Formulaire complet de cr\xe9ation de client"})]}),(0,ju.jsx)("button",{onClick:()=>F(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,ju.jsx)(vm,{className:"h-5 w-5"})})]}),(0,ju.jsx)(Bm,{onSubmit:async e=>{try{const t=e=>{if(void 0===e||null===e||""===e)return 0;const t=String(e).trim().toLowerCase();if("m"===t||"male"===t||"masculin"===t||"gason"===t)return 0;if("f"===t||"female"===t||"feminin"===t||"fanm"===t)return 1;const r=Number(t);return isNaN(r)||0===r?0:1},r=e=>{if(!e)return Im.CIN;return{CIN:Im.CIN,PASSPORT:Im.Passport,DRIVING_LICENSE:Im.DrivingLicense,BIRTH_CERTIFICATE:Im.BirthCertificate}[e.toUpperCase()]||Im.CIN},n=e=>e?e.replace(/[\s-]/g,""):void 0,a=!(null===e||void 0===e||!e.isBusiness);if(!a&&(null===e||void 0===e||!e.dateOfBirth)){const e="La date de naissance est obligatoire pour une personne physique";throw Ts.error(e),new Error(e)}const i=null===e||void 0===e?void 0:e.dateOfBirth,l=a?"2000-01-01":Te(i,"")||"",o=(null===e||void 0===e?void 0:e.companyName)||"",c=(null===e||void 0===e?void 0:e.legalForm)||"",d=a?o||"Entreprise":(null===e||void 0===e?void 0:e.firstName)||"",u=a?c||"PM":(null===e||void 0===e?void 0:e.lastName)||"",m=(null===e||void 0===e?void 0:e.legalRepresentativeName)||"",h=m?m.trim().split(" ")[0]:void 0,p=m&&m.trim().split(" ").slice(1).join(" ")||void 0,x=((e,t)=>{const r=(e||"X").charAt(0).toUpperCase(),n=(t||"X").charAt(0).toUpperCase(),s=Math.floor(1e3+9e3*Math.random());return"".concat(r).concat(n).concat(s)})(d||"",u||"");let f={customerCode:x,firstName:d,lastName:u,dateOfBirth:l,gender:t((null===e||void 0===e?void 0:e.gender)||"M"),street:(null===e||void 0===e?void 0:e.street)||"",commune:(null===e||void 0===e?void 0:e.commune)||"",department:(null===e||void 0===e?void 0:e.department)||"",postalCode:(null===e||void 0===e?void 0:e.postalCode)||void 0,primaryPhone:n(null===e||void 0===e?void 0:e.primaryPhone)||"",secondaryPhone:n(null===e||void 0===e?void 0:e.secondaryPhone),email:(null===e||void 0===e?void 0:e.email)||void 0,emergencyContactName:(null===e||void 0===e?void 0:e.emergencyContactName)||void 0,emergencyContactPhone:n(null===e||void 0===e?void 0:e.emergencyContactPhone),documentType:r(null===e||void 0===e?void 0:e.documentType),documentNumber:(null===e||void 0===e?void 0:e.documentNumber)||x,issuedDate:(null===e||void 0===e?void 0:e.issuedDate)||(new Date).toISOString().split("T")[0],expiryDate:(null===e||void 0===e?void 0:e.expiryDate)||void 0,issuingAuthority:(null===e||void 0===e?void 0:e.issuingAuthority)||"Kredi Ti Machann",occupation:(null===e||void 0===e?void 0:e.occupation)||void 0,monthlyIncome:null!==e&&void 0!==e&&e.monthlyIncome?parseFloat(e.monthlyIncome):void 0,isBusiness:a,companyName:o||void 0,legalForm:c||void 0,tradeRegisterNumber:(null===e||void 0===e?void 0:e.tradeRegisterNumber)||(null===e||void 0===e?void 0:e.businessRegistrationNumber)||void 0,taxId:(null===e||void 0===e?void 0:e.taxId)||(null===e||void 0===e?void 0:e.companyNif)||void 0,headOfficeAddress:(null===e||void 0===e?void 0:e.headOfficeAddress)||void 0,companyPhone:n(null===e||void 0===e?void 0:e.companyPhone)||void 0,companyEmail:(null===e||void 0===e?void 0:e.companyEmail)||void 0,representativeFirstName:a&&((null===e||void 0===e?void 0:e.representativeFirstName)||(null===e||void 0===e?void 0:e.legalRepresentativeFirstName)||h)||void 0,representativeLastName:a&&((null===e||void 0===e?void 0:e.representativeLastName)||(null===e||void 0===e?void 0:e.legalRepresentativeLastName)||p)||void 0,representativeTitle:a&&((null===e||void 0===e?void 0:e.representativeTitle)||(null===e||void 0===e?void 0:e.legalRepresentativeTitle))||void 0,representativeDocumentType:a?null!==e&&void 0!==e&&e.representativeDocumentType?r(e.representativeDocumentType):null!==e&&void 0!==e&&e.legalRepresentativeDocumentType?r(e.legalRepresentativeDocumentType):r(null===e||void 0===e?void 0:e.documentType):void 0,representativeDocumentNumber:a&&((null===e||void 0===e?void 0:e.representativeDocumentNumber)||(null===e||void 0===e?void 0:e.legalRepresentativeDocumentNumber)||(null===e||void 0===e?void 0:e.documentNumber))||void 0,representativeIssuedDate:a?Te(null===e||void 0===e?void 0:e.representativeIssuedDate)||Te(null===e||void 0===e?void 0:e.legalRepresentativeIssuedDate)||Te(null===e||void 0===e?void 0:e.issuedDate):void 0,representativeExpiryDate:a?Te(null===e||void 0===e?void 0:e.representativeExpiryDate)||Te(null===e||void 0===e?void 0:e.legalRepresentativeExpiryDate)||Te(null===e||void 0===e?void 0:e.expiryDate):void 0,representativeIssuingAuthority:a&&((null===e||void 0===e?void 0:e.representativeIssuingAuthority)||(null===e||void 0===e?void 0:e.legalRepresentativeIssuingAuthority)||(null===e||void 0===e?void 0:e.issuingAuthority))||void 0,birthPlace:(null===e||void 0===e?void 0:e.birthPlace)||void 0,nationality:(null===e||void 0===e?void 0:e.nationality)||void 0,personalNif:(null===e||void 0===e?void 0:e.nif)||void 0,employerName:(null===e||void 0===e?void 0:e.employerName)||void 0,workAddress:(null===e||void 0===e?void 0:e.workAddress)||void 0,incomeSource:(null===e||void 0===e?void 0:e.incomeSource)||void 0,maritalStatus:(null===e||void 0===e?void 0:e.maritalStatus)||void 0,numberOfDependents:void 0!==(null===e||void 0===e?void 0:e.numberOfDependents)?Number(e.numberOfDependents):void 0,educationLevel:(null===e||void 0===e?void 0:e.educationLevel)||void 0,acceptTerms:!(null===e||void 0===e||!e.acceptTerms),signaturePlace:(null===e||void 0===e?void 0:e.signaturePlace)||void 0,signatureDate:(null===e||void 0===e?void 0:e.signatureDate)||void 0,referencePersonName:(null===e||void 0===e?void 0:e.referencePerson)||void 0,referencePersonPhone:void 0};a&&(f=(0,s.A)((0,s.A)({},f),{},{occupation:void 0,monthlyIncome:void 0,birthPlace:void 0,nationality:void 0,personalNif:void 0,employerName:void 0,workAddress:void 0,incomeSource:void 0,maritalStatus:void 0,numberOfDependents:void 0,educationLevel:void 0,signaturePlace:void 0,signatureDate:void 0,referencePersonName:void 0,referencePersonPhone:void 0}));try{0}catch(mn){console.debug("Creating customer payload (raw):",f)}const g=await Fm.createCustomer(f),v=ee(g);console.log("Client cr\xe9\xe9 avec succ\xe8s:",v);const y=(null===e||void 0===e?void 0:e.documentNumber)||x;return Ts.success("Client ".concat(v.fullName," cr\xe9\xe9 avec succ\xe8s!\nID Client: ").concat(y),{duration:5e3}),F(!1),v}catch(Sc){console.error("Erreur lors de la cr\xe9ation du client:",Sc);const t=Sc.message||"Erreur lors de la cr\xe9ation du client";throw Ts.error(t),Sc}},onCancel:()=>F(!1)})]})}),M&&q&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Modifier Client"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:q.fullName})]}),(0,ju.jsx)("button",{onClick:()=>{U(!1),$(null)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,ju.jsx)(vm,{className:"h-5 w-5"})})]}),(0,ju.jsx)(kp,{customer:q,onSubmit:async e=>{if(q)try{var t,r,n,a,i,l,o,c,d,u;const m=e=>{if(void 0===e||null===e||""===e)return 0;const t=String(e).trim().toLowerCase();if("m"===t||"male"===t||"masculin"===t||"gason"===t)return 0;if("f"===t||"female"===t||"feminin"===t||"fanm"===t)return 1;const r=Number(t);return isNaN(r)||0===r?0:1},h=e=>{if(!e)return Im.CIN;return{CIN:Im.CIN,PASSPORT:Im.Passport,DRIVING_LICENSE:Im.DrivingLicense,BIRTH_CERTIFICATE:Im.BirthCertificate}[e.toUpperCase()]||Im.CIN},x=e=>e?e.replace(/[\s-]/g,""):void 0,f=!(null===e||void 0===e||!e.isBusiness)||!(null===q||void 0===q||!q.isBusiness);if(!f&&(null===e||void 0===e||!e.dateOfBirth)&&(null===q||void 0===q||!q.dateOfBirth))return void Ts.error("La date de naissance est obligatoire pour une personne physique");const g=(null===e||void 0===e?void 0:e.dateOfBirth)||(null===q||void 0===q?void 0:q.dateOfBirth),v=f?Te(g,"2000-01-01")||"2000-01-01":Te(g,"")||"",y=(null===e||void 0===e?void 0:e.companyName)||(null===q||void 0===q?void 0:q.companyName)||"",b=(null===e||void 0===e?void 0:e.legalForm)||(null===q||void 0===q?void 0:q.legalForm)||"",N=f?y||"Entreprise":(null===e||void 0===e?void 0:e.firstName)||"",j=f?b||"PM":(null===e||void 0===e?void 0:e.lastName)||"",w=(null===e||void 0===e?void 0:e.legalRepresentativeName)||"",S=w?w.trim().split(" ")[0]:void 0,A=w&&w.trim().split(" ").slice(1).join(" ")||void 0;let T={firstName:N,lastName:j,dateOfBirth:v,gender:m((null===e||void 0===e?void 0:e.gender)||"M"),street:(null===e||void 0===e?void 0:e.street)||"",commune:(null===e||void 0===e?void 0:e.commune)||"",department:(null===e||void 0===e?void 0:e.department)||"",postalCode:(null===e||void 0===e?void 0:e.postalCode)||void 0,primaryPhone:x(null===e||void 0===e?void 0:e.primaryPhone)||"",secondaryPhone:x(null===e||void 0===e?void 0:e.secondaryPhone),email:(null===e||void 0===e?void 0:e.email)||void 0,emergencyContactName:(null===e||void 0===e?void 0:e.emergencyContactName)||void 0,emergencyContactPhone:x(null===e||void 0===e?void 0:e.emergencyContactPhone),documentType:h(null===e||void 0===e?void 0:e.documentType),documentNumber:(null===e||void 0===e?void 0:e.documentNumber)||"",issuedDate:(null===e||void 0===e?void 0:e.issuedDate)||"",expiryDate:(null===e||void 0===e?void 0:e.expiryDate)||void 0,issuingAuthority:(null===e||void 0===e?void 0:e.issuingAuthority)||"",occupation:(null===e||void 0===e?void 0:e.occupation)||void 0,monthlyIncome:null!==e&&void 0!==e&&e.monthlyIncome?parseFloat(e.monthlyIncome):void 0,isBusiness:f,companyName:y||void 0,legalForm:b||void 0,tradeRegisterNumber:(null===e||void 0===e?void 0:e.businessRegistrationNumber)||(null===q||void 0===q?void 0:q.tradeRegisterNumber)||void 0,taxId:(null===e||void 0===e?void 0:e.companyNif)||(null===q||void 0===q?void 0:q.taxId)||void 0,headOfficeAddress:(null===e||void 0===e?void 0:e.headOfficeAddress)||(null===q||void 0===q?void 0:q.headOfficeAddress)||void 0,companyPhone:x(null===e||void 0===e?void 0:e.companyPhone)||(null===q||void 0===q?void 0:q.companyPhone)||void 0,companyEmail:(null===e||void 0===e?void 0:e.companyEmail)||(null===q||void 0===q?void 0:q.companyEmail)||void 0,representativeFirstName:f&&((null===e||void 0===e?void 0:e.representativeFirstName)||S||(null===q||void 0===q||null===(t=q.legalRepresentative)||void 0===t?void 0:t.firstName))||void 0,representativeLastName:f&&((null===e||void 0===e?void 0:e.representativeLastName)||A||(null===q||void 0===q||null===(r=q.legalRepresentative)||void 0===r?void 0:r.lastName))||void 0,representativeTitle:f&&((null===e||void 0===e?void 0:e.representativeTitle)||(null===q||void 0===q||null===(n=q.legalRepresentative)||void 0===n?void 0:n.title))||void 0,representativeDocumentType:f?null!==e&&void 0!==e&&e.representativeDocumentType?h(e.representativeDocumentType):null!==e&&void 0!==e&&e.documentType?h(e.documentType):null===q||void 0===q||null===(a=q.legalRepresentative)||void 0===a?void 0:a.documentType:void 0,representativeDocumentNumber:f&&((null===e||void 0===e?void 0:e.representativeDocumentNumber)||(null===e||void 0===e?void 0:e.documentNumber)||(null===q||void 0===q||null===(i=q.legalRepresentative)||void 0===i?void 0:i.documentNumber))||void 0,representativeIssuedDate:f?Te(null===e||void 0===e?void 0:e.representativeIssuedDate)||Te(null===e||void 0===e?void 0:e.issuedDate)||Te(null===q||void 0===q||null===(l=q.legalRepresentative)||void 0===l?void 0:l.issuedDate):void 0,representativeExpiryDate:f?Te(null===e||void 0===e?void 0:e.representativeExpiryDate)||Te(null===e||void 0===e?void 0:e.expiryDate)||Te(null===q||void 0===q||null===(o=q.legalRepresentative)||void 0===o?void 0:o.expiryDate):void 0,representativeIssuingAuthority:f&&((null===e||void 0===e?void 0:e.representativeIssuingAuthority)||(null===e||void 0===e?void 0:e.issuingAuthority)||(null===q||void 0===q||null===(c=q.legalRepresentative)||void 0===c?void 0:c.issuingAuthority))||void 0,birthPlace:(null===e||void 0===e?void 0:e.birthPlace)||(null===q||void 0===q?void 0:q.birthPlace)||void 0,nationality:(null===e||void 0===e?void 0:e.nationality)||(null===q||void 0===q?void 0:q.nationality)||void 0,personalNif:(null===e||void 0===e?void 0:e.nif)||(null===q||void 0===q?void 0:q.personalNif)||void 0,employerName:(null===e||void 0===e?void 0:e.employerName)||(null===q||void 0===q?void 0:q.employerName)||void 0,workAddress:(null===e||void 0===e?void 0:e.workAddress)||(null===q||void 0===q?void 0:q.workAddress)||void 0,incomeSource:(null===e||void 0===e?void 0:e.incomeSource)||(null===q||void 0===q?void 0:q.incomeSource)||void 0,maritalStatus:(null===e||void 0===e?void 0:e.maritalStatus)||(null===q||void 0===q?void 0:q.maritalStatus)||void 0,numberOfDependents:void 0!==(null===e||void 0===e?void 0:e.numberOfDependents)?Number(e.numberOfDependents):null===q||void 0===q?void 0:q.numberOfDependents,educationLevel:(null===e||void 0===e?void 0:e.educationLevel)||(null===q||void 0===q?void 0:q.educationLevel)||void 0,acceptTerms:null!==(d=null!==(u=null===e||void 0===e?void 0:e.acceptTerms)&&void 0!==u?u:null===q||void 0===q?void 0:q.acceptTerms)&&void 0!==d?d:void 0,signaturePlace:(null===e||void 0===e?void 0:e.signaturePlace)||(null===q||void 0===q?void 0:q.signaturePlace)||void 0,signatureDate:(null===e||void 0===e?void 0:e.signatureDate)||(null===q||void 0===q?void 0:q.signatureDate)||void 0,referencePersonName:(null===e||void 0===e?void 0:e.referencePerson)||(null===q||void 0===q?void 0:q.referencePersonName)||void 0,referencePersonPhone:(null===q||void 0===q?void 0:q.referencePersonPhone)||void 0};f&&(T=(0,s.A)((0,s.A)({},T),{},{occupation:void 0,monthlyIncome:void 0,birthPlace:void 0,nationality:void 0,personalNif:void 0,employerName:void 0,workAddress:void 0,incomeSource:void 0,maritalStatus:void 0,numberOfDependents:void 0,educationLevel:void 0,signaturePlace:void 0,signatureDate:void 0,referencePersonName:void 0,referencePersonPhone:void 0})),console.log("Donn\xe9es \xe0 envoyer pour modification:",T);const C=await Fm.updateCustomer(q.id,T),E=ee(C);console.log("Client mis \xe0 jour avec succ\xe8s:",E),Ts.success("Client ".concat(E.fullName," modifi\xe9 avec succ\xe8s!")),U(!1),$(null),"clients"===p?await se():await Z()}catch(Sc){console.error("Erreur lors de la modification du client:",Sc);const t=Sc.message||"Erreur lors de la modification du client";Ts.error(t)}},onCancel:()=>{U(!1),$(null)}})]})}),B&&q&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"D\xe9tails du Client"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:q.fullName})]}),(0,ju.jsx)("button",{onClick:()=>{H(!1),$(null)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,ju.jsx)(vm,{className:"h-5 w-5"})})]}),(0,ju.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Ru,{className:"h-5 w-5 mr-2 text-blue-600"}),null!==q&&void 0!==q&&q.isBusiness||null!==q&&void 0!==q&&q.companyName||null!==q&&void 0!==q&&q.legalForm?"Informations de l'Entreprise":"Informations Personnelles"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[null!==q&&void 0!==q&&q.isBusiness||null!==q&&void 0!==q&&q.companyName||null!==q&&void 0!==q&&q.legalForm?(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Raison sociale"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===q||void 0===q?void 0:q.companyName)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Forme juridique"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===q||void 0===q?void 0:q.legalForm)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Num\xe9ro de registre commerce"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===q||void 0===q?void 0:q.tradeRegisterNumber)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"NIF"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===q||void 0===q?void 0:q.taxId)||"N/A"})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Adresse du si\xe8ge social"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===q||void 0===q?void 0:q.headOfficeAddress)||"N/A"})]})]}):(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Pr\xe9nom"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:q.firstName})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Nom"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:q.lastName})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Date de Naissance"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:q.dateOfBirth?new Date(q.dateOfBirth).toLocaleDateString("fr-FR"):"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Genre"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:"Masculin"===Tp(q.gender)?"Homme":"F\xe9minin"===Tp(q.gender)?"Femme":"\u2014"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"ID Client"}),(0,ju.jsx)("p",{className:"text-base text-gray-900 font-mono bg-blue-50 px-2 py-1 rounded inline-block",children:ie(q)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Statut"}),(0,ju.jsx)("p",{className:"text-base",children:q.isActive?(0,ju.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Actif"}):(0,ju.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Inactif"})})]})]})]}),((null===q||void 0===q?void 0:q.isBusiness)||(null===q||void 0===q?void 0:q.companyName)||(null===q||void 0===q?void 0:q.legalForm))&&(e=>{const t=(null===q||void 0===q?void 0:q.legalRepresentative)||{},r=((null===t||void 0===t?void 0:t.firstName)||(null===q||void 0===q?void 0:q.representativeFirstName)||(null===q||void 0===q?void 0:q.representativeFirst)||"").toString().trim(),n=((null===t||void 0===t?void 0:t.lastName)||(null===q||void 0===q?void 0:q.representativeLastName)||(null===q||void 0===q?void 0:q.representativeLast)||"").toString().trim(),s=r||n?"".concat(r," ").concat(n).trim():"N/A",a=(null===t||void 0===t?void 0:t.title)||(null===q||void 0===q?void 0:q.representativeTitle)||"N/A",i=null!==(e=null===t||void 0===t?void 0:t.documentType)&&void 0!==e?e:null===q||void 0===q?void 0:q.representativeDocumentType,l=void 0!==i&&null!==i?{0:"CIN (Carte d'Identit\xe9 Nationale)",1:"Passeport",2:"Permis de Conduire"}[i]||String(i):"N/A",o=(null===t||void 0===t?void 0:t.documentNumber)||(null===q||void 0===q?void 0:q.representativeDocumentNumber)||"N/A",c=(null===t||void 0===t?void 0:t.issuedDate)||(null===q||void 0===q?void 0:q.representativeIssuedDate)||null,d=(null===t||void 0===t?void 0:t.expiryDate)||(null===q||void 0===q?void 0:q.representativeExpiryDate)||null,u=(null===t||void 0===t?void 0:t.issuingAuthority)||(null===q||void 0===q?void 0:q.representativeIssuingAuthority)||"N/A";return(0,ju.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(ym,{className:"h-5 w-5 mr-2 text-blue-600"}),"Repr\xe9sentant L\xe9gal"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Nom complet"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:s})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Titre/Fonction"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:a})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Type de document"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:l})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Num\xe9ro de document"}),(0,ju.jsx)("p",{className:"text-base text-gray-900 font-mono",children:o})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Date d'\xe9mission"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:c?new Date(c).toLocaleDateString("fr-FR"):"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Date d'expiration"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:d?new Date(d).toLocaleDateString("fr-FR"):"N/A"})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Autorit\xe9 d'\xe9mission"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:u})]})]})]})})(),(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Ku,{className:"h-5 w-5 mr-2 text-blue-600"}),"Adresse"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Rue"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===(n=q.address)||void 0===n?void 0:n.street)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Commune"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===(a=q.address)||void 0===a?void 0:a.commune)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"D\xe9partement"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===(i=q.address)||void 0===i?void 0:i.department)||"N/A"})]})]})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Du,{className:"h-5 w-5 mr-2 text-blue-600"}),"Informations de Contact"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"T\xe9l\xe9phone Principal"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===(l=q.contact)||void 0===l?void 0:l.primaryPhone)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"T\xe9l\xe9phone Secondaire"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===(o=q.contact)||void 0===o?void 0:o.secondaryPhone)||"N/A"})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Email"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===(c=q.contact)||void 0===c?void 0:c.email)||"N/A"})]})]})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(pm,{className:"h-5 w-5 mr-2 text-blue-600"}),"Documents d'Identification"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Type de Document"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:((e,t,r)=>{const n=null===(e=q.documents)||void 0===e?void 0:e.find(e=>0===e.documentType||"0"===e.documentType);if(n)return n.documentTypeName||"Carte d'Identit\xe9";const s=null===(t=q.documents)||void 0===t?void 0:t.find(e=>{var t,r,n,s,a,i;return(null===(t=e.documentTypeName)||void 0===t?void 0:t.toLowerCase().includes("carte"))||(null===(r=e.documentTypeName)||void 0===r?void 0:r.toLowerCase().includes("cin"))||(null===(n=e.documentTypeName)||void 0===n?void 0:n.toLowerCase().includes("identit\xe9"))||(null===(s=e.documentTypeName)||void 0===s?void 0:s.toLowerCase().includes("passeport"))||(null===(a=e.documentTypeName)||void 0===a?void 0:a.toLowerCase().includes("permis"))||(null===(i=e.documentTypeName)||void 0===i?void 0:i.toLowerCase().includes("acte"))});return s?s.documentTypeName:void 0!==(null===(r=q.identity)||void 0===r?void 0:r.documentType)?["CIN","Passeport","Permis de Conduire"][q.identity.documentType]:"N/A"})()})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Num\xe9ro de Document"}),(0,ju.jsx)("p",{className:"text-base text-gray-900 font-mono",children:(null===(d=q.identity)||void 0===d?void 0:d.documentNumber)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Date d'\xc9mission"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:null!==(u=q.identity)&&void 0!==u&&u.issuedDate?new Date(q.identity.issuedDate).toLocaleDateString("fr-FR"):"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Date d'Expiration"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:null!==(m=q.identity)&&void 0!==m&&m.expiryDate?new Date(q.identity.expiryDate).toLocaleDateString("fr-FR"):"N/A"})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Autorit\xe9 d'\xc9mission"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===(h=q.identity)||void 0===h?void 0:h.issuingAuthority)||"N/A"})]})]})]}),q.documents&&q.documents.length>0&&(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Hu,{className:"h-5 w-5 mr-2 text-blue-600"}),"Documents T\xe9l\xe9charg\xe9s (",q.documents.length,")"]}),(0,ju.jsx)("div",{className:"space-y-3",children:q.documents.map(e=>{var t;const r=e.Id||e.id,n=e.Name||e.name||(e.FilePath||e.filePath?String(e.FilePath||e.filePath).split(/[/\\]/).pop():"")||"Document",s=e.documentTypeName||e.documentTypeName||"Document",a=null!==(t=e.FileSize)&&void 0!==t?t:e.fileSize,i="number"!==typeof a||isNaN(a)?null:a/1024,l=e.UploadedAt||e.uploadedAt,o=l?new Date(l):null,c=!(!o||isNaN(o.getTime())),d=e.Description||e.description,u=e.Verified||e.verified||!1;return(0,ju.jsx)("div",{className:"bg-white rounded-lg p-3 border border-gray-200 hover:border-blue-300 transition-colors",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,ju.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,ju.jsx)(Hu,{className:"h-5 w-5 text-blue-600"})}),(0,ju.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ju.jsxs)("p",{className:"font-medium text-gray-900 truncate flex items-center gap-2",children:[(0,ju.jsx)("span",{className:"truncate",children:n}),(0,ju.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full whitespace-nowrap",children:s})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[null!==i&&(0,ju.jsx)(ju.Fragment,{children:(0,ju.jsxs)("span",{children:[i.toFixed(1)," KB"]})}),null!==i&&c&&(0,ju.jsx)("span",{children:"\u2022"}),c&&(0,ju.jsx)("span",{children:o.toLocaleDateString("fr-FR")})]}),d&&(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:d})]})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[u&&(0,ju.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full whitespace-nowrap",children:"V\xe9rifi\xe9"}),(0,ju.jsx)("button",{onClick:()=>(async(e,t,r)=>{try{const n=await Fm.downloadDocument(e,t),s=window.URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),Ts.success("Document t\xe9l\xe9charg\xe9 avec succ\xe8s!")}catch(Sc){console.error("Erreur lors du t\xe9l\xe9chargement du document:",Sc),Ts.error("Erreur lors du t\xe9l\xe9chargement du document")}})(q.id,r,n),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"T\xe9l\xe9charger",children:(0,ju.jsx)(zu,{className:"h-4 w-4"})}),(0,ju.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("\xc8ske ou s\xe8ten ou vle efase dokiman sa a?"))try{if(console.log("Deleting document:",{customerId:e,documentId:t}),await Fm.deleteDocument(e,t),q){const e=await Fm.getCustomer(q.id),t=ee(e);$(t)}Ts.success("Document effac\xe9 avec succ\xe8s!")}catch(Sc){var r,n;console.error("Erreur lors de la suppression du document:",Sc);const t=(null===Sc||void 0===Sc||null===(r=Sc.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||(null===Sc||void 0===Sc?void 0:Sc.message)||"Erreur lors de la suppression du document";Ts.error(t)}})(q.id,r),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:(0,ju.jsx)(bm,{className:"h-4 w-4"})})]})]})},r)})})]}),q.signature&&(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(xm,{className:"h-5 w-5 mr-2 text-blue-600"}),"Signature du Client"]}),(0,ju.jsx)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:(0,ju.jsx)("img",{src:q.signature,alt:"Signature",className:"max-h-32 mx-auto"})})]}),(q.occupation||q.monthlyIncome)&&(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(ku,{className:"h-5 w-5 mr-2 text-blue-600"}),"Informations Professionnelles"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[q.occupation&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Occupation"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:q.occupation})]}),q.monthlyIncome&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Revenu Mensuel"}),(0,ju.jsxs)("p",{className:"text-base text-gray-900",children:[q.monthlyIncome," HTG"]})]})]})]})]}),(0,ju.jsxs)("div",{className:"flex justify-between p-6 border-t border-gray-200",children:[(0,ju.jsx)("button",{onClick:()=>{H(!1),$(null)},className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Fermer"}),(0,ju.jsx)("div",{className:"flex gap-3",children:(0,ju.jsxs)("button",{onClick:()=>{H(!1),U(!0)},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,ju.jsx)(xm,{className:"h-5 w-5"}),"Modifier"]})})]})]})}),z&&q&&(0,ju.jsx)(Sp,{customer:q,onClose:()=>{G(!1)},onSuccess:async()=>{const e=await Fm.getCustomer(q.id),t=ee(e);$(t),Ts.success("Documents mis \xe0 jour avec succ\xe8s!")}}),P&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,ju.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Cr\xe9er un Nouveau Compte"}),(0,ju.jsx)("button",{onClick:()=>O(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,ju.jsx)(vm,{className:"h-5 w-5"})})]}),(0,ju.jsx)(_p,{onSubmit:async e=>{try{var t;let r;switch(e.accountType){case vi.SAVINGS:r=await Di.createSavingsAccount({customerId:e.customerId,branchId:e.branchId,currency:e.currency,initialDeposit:e.initialDeposit,interestRate:e.interestRate,minimumBalance:e.minimumBalance,dailyWithdrawalLimit:e.dailyWithdrawalLimit});break;case vi.CURRENT:r=await Di.createCurrentAccount({customerId:e.customerId,branchId:e.branchId,currency:e.currency,initialDeposit:e.initialDeposit,minimumBalance:e.minimumBalance,dailyWithdrawalLimit:e.dailyWithdrawalLimit,monthlyWithdrawalLimit:e.monthlyWithdrawalLimit,dailyDepositLimit:e.dailyDepositLimit,overdraftLimit:e.overdraftLimit,pin:e.securityPin,securityQuestion:e.securityQuestion,securityAnswer:e.securityAnswer,depositMethod:e.depositMethod,originOfFunds:e.incomeSource,transactionFrequency:e.transactionFrequency,accountPurpose:e.accountPurpose,authorizedSigners:Array.isArray(e.authorizedSigners)?e.authorizedSigners.map(e=>({fullName:e.fullName,role:e.relationshipToCustomer,documentNumber:e.documentNumber,phone:e.phoneNumber})):void 0});break;case vi.TERM_SAVINGS:r=await Di.createTermSavingsAccount({customerId:e.customerId,branchId:e.branchId,currency:e.currency,initialDeposit:e.initialDeposit,termType:e.termType});break;default:throw new Error("Type de compte non valide")}Ts.success("Compte cr\xe9\xe9 avec succ\xe8s \u2022 Num\xe9ro: ".concat((null===(t=r)||void 0===t?void 0:t.accountNumber)||"\u2014")),O(!1),Z(),te()}catch(Sc){var r,n;console.error("Error creating account:",Sc);const t=Sc,s=null===t||void 0===t||null===(r=t.response)||void 0===r?void 0:r.status,a=null===t||void 0===t||null===(n=t.response)||void 0===n?void 0:n.data,i=(null===a||void 0===a?void 0:a.message)||(null!==a&&void 0!==a&&a.errors?Object.values(a.errors).flat().join("; "):"string"===typeof a?a:JSON.stringify(a));if(403===s)Ts.error("Acc\xe8s refus\xe9 (403). R\xf4le requis: Caissier, Chef de Succursale, ou SuperAdmin.");else if(401===s)Ts.error("Session expir\xe9e. Veuillez vous reconnecter.");else if(400===s)Ts.error("Requ\xeate invalide: ".concat(i||"V\xe9rifiez les champs requis (client, devise, d\xe9p\xf4t initial, succursale)."));else{const e=i||(null===t||void 0===t?void 0:t.message);Ts.error(e||"Erreur lors de la cr\xe9ation du compte")}}},onCancel:()=>O(!1)})]})}),K&&V&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["D\xe9tails du Compte #",V.accountNumber]}),(0,ju.jsxs)("p",{className:"text-gray-600 mt-1",children:[V.customerName," - ",bi(V.accountType)]})]}),(0,ju.jsx)("button",{onClick:()=>X(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,ju.jsx)(vm,{className:"h-5 w-5"})})]}),(0,ju.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"R\xe9sum\xe9 du Compte"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Solde Actuel"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-green-600",children:Se(V.balance,V.currency)})]}),(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Solde Disponible"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:Se(V.availableBalance,V.currency)})]}),(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Statut"}),(0,ju.jsx)("div",{className:"mt-1",children:Ce(V.status)})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg",children:[(0,ju.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Transactions R\xe9centes"})}),(0,ju.jsx)("div",{className:"divide-y divide-gray-200",children:0===Y.length?(0,ju.jsxs)("div",{className:"text-center py-8",children:[(0,ju.jsx)(ku,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),(0,ju.jsx)("p",{className:"text-gray-500",children:"Aucune transaction trouv\xe9e"})]}):Y.map(e=>(0,ju.jsx)("div",{className:"p-4 hover:bg-gray-50",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ju.jsx)("div",{className:"p-2 rounded-full ".concat("DEPOSIT"===e.type?"bg-green-100":"WITHDRAWAL"===e.type?"bg-red-100":"bg-blue-100"),children:"DEPOSIT"===e.type?(0,ju.jsx)(ku,{className:"h-4 w-4 text-green-600"}):"WITHDRAWAL"===e.type?(0,ju.jsx)(ku,{className:"h-4 w-4 text-red-600"}):(0,ju.jsx)(Du,{className:"h-4 w-4 text-blue-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"font-medium text-gray-900",children:e.description}),(0,ju.jsxs)("p",{className:"text-sm text-gray-500",children:[Ae(e.processedAt)," \u2022 ",e.processedByName]})]})]}),(0,ju.jsxs)("div",{className:"text-right",children:[(0,ju.jsxs)("p",{className:"font-medium ".concat("DEPOSIT"===e.type?"text-green-600":"WITHDRAWAL"===e.type?"text-red-600":"text-gray-900"),children:["DEPOSIT"===e.type?"+":"WITHDRAWAL"===e.type?"-":"",Se(e.amount,e.currency)]}),(0,ju.jsxs)("p",{className:"text-sm text-gray-500",children:["Solde: ",Se(e.balanceAfter,e.currency)]})]})]})},e.id))})]})]}),(0,ju.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-200",children:(0,ju.jsx)("button",{onClick:()=>X(!1),className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Fermer"})})]})})]})},Op=mi("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),Lp=mi("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Fp=mi("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);var Mp={version:"0.18.5"},Up=1200,Bp=1252,Hp=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],zp={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Gp=function(e){-1!=Hp.indexOf(e)&&(Bp=zp[0]=e)};var Vp=function(e){Up=e,Gp(e)};function Wp(){Vp(1200),Gp(1252)}function qp(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var $p,Kp=function(e){return String.fromCharCode(e)},Xp=function(e){return String.fromCharCode(e)};var Yp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Jp(e){for(var t="",r=0,n=0,s=0,a=0,i=0,l=0,o=0,c=0;c<e.length;)a=(r=e.charCodeAt(c++))>>2,i=(3&r)<<4|(n=e.charCodeAt(c++))>>4,l=(15&n)<<2|(s=e.charCodeAt(c++))>>6,o=63&s,isNaN(n)?l=o=64:isNaN(s)&&(o=64),t+=Yp.charAt(a)+Yp.charAt(i)+Yp.charAt(l)+Yp.charAt(o);return t}function Zp(e){var t="",r=0,n=0,s=0,a=0,i=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var o=0;o<e.length;)r=Yp.indexOf(e.charAt(o++))<<2|(a=Yp.indexOf(e.charAt(o++)))>>4,t+=String.fromCharCode(r),n=(15&a)<<4|(i=Yp.indexOf(e.charAt(o++)))>>2,64!==i&&(t+=String.fromCharCode(n)),s=(3&i)<<6|(l=Yp.indexOf(e.charAt(o++))),64!==l&&(t+=String.fromCharCode(s));return t}var Qp=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),ex=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(mn){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function tx(e){return Qp?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function rx(e){return Qp?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var nx=function(e){return Qp?ex(e,"binary"):e.split("").map(function(e){return 255&e.charCodeAt(0)})};function sx(e){if("undefined"===typeof ArrayBuffer)return nx(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=255&e.charCodeAt(n);return t}function ax(e){if(Array.isArray(e))return e.map(function(e){return String.fromCharCode(e)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}var ix=Qp?function(e){return Buffer.concat(e.map(function(e){return Buffer.isBuffer(e)?e:ex(e)}))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if("string"==typeof e[t])throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(e){return Array.isArray(e)?e:[].slice.call(e)}))};var lx=/\u0000/g,ox=/[\u0001-\u0006]/g;function cx(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function dx(e,t){var r=""+e;return r.length>=t?r:wf("0",t-r.length)+r}function ux(e,t){var r=""+e;return r.length>=t?r:wf(" ",t-r.length)+r}function mx(e,t){var r=""+e;return r.length>=t?r:r+wf(" ",t-r.length)}var hx=Math.pow(2,32);function px(e,t){return e>hx||e<-hx?function(e,t){var r=""+Math.round(e);return r.length>=t?r:wf("0",t-r.length)+r}(e,t):function(e,t){var r=""+e;return r.length>=t?r:wf("0",t-r.length)+r}(Math.round(e),t)}function xx(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var fx=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],gx=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var vx={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},yx={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},bx={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Nx(e,t,r){for(var n=e<0?-1:1,s=e*n,a=0,i=1,l=0,o=1,c=0,d=0,u=Math.floor(s);c<t&&(l=(u=Math.floor(s))*i+a,d=u*c+o,!(s-u<5e-8));)s=1/(s-u),a=i,i=l,o=c,c=d;if(d>t&&(c>t?(d=o,l=a):(d=c,l=i)),!r)return[0,n*l,d];var m=Math.floor(n*l/d);return[m,n*l-m*d,d]}function jx(e,t,r){if(e>2958465||e<0)return null;var n=0|e,s=Math.floor(86400*(e-n)),a=0,i=[],l={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,86400==++s&&(l.T=s=0,++n,++l.D)),60===n)i=r?[1317,10,29]:[1900,2,29],a=3;else if(0===n)i=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var o=new Date(1900,0,1);o.setDate(o.getDate()+n-1),i=[o.getFullYear(),o.getMonth()+1,o.getDate()],a=o.getDay(),n<60&&(a=(a+6)%7),r&&(a=function(e,t){t[0]-=581;var r=e.getDay();e<60&&(r=(r+6)%7);return r}(o,i))}return l.y=i[0],l.m=i[1],l.d=i[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=a,l}var wx=new Date(1899,11,31,0,0,0),Sx=wx.getTime(),Ax=new Date(1900,2,1,0,0,0);function Tx(e,t){var r=e.getTime();return t?r-=1262304e5:e>=Ax&&(r+=864e5),(r-(Sx+6e4*(e.getTimezoneOffset()-wx.getTimezoneOffset())))/864e5}function Cx(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Ex(e){var t,r=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=r>=-4&&r<=-1?e.toPrecision(10+r):Math.abs(r)<=9?function(e){var t=e<0?12:11,r=Cx(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10)).length<=t?r:e.toExponential(5)}(e):10===r?e.toFixed(10).substr(0,12):function(e){var t=Cx(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),Cx(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function Dx(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):Ex(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return Yx(14,Tx(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function kx(e,t,r,n){var s,a="",i=0,l=0,o=r.y,c=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:s=o%100,c=2;break;default:s=o%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:s=r.m,c=t.length;break;case 3:return gx[r.m-1][1];case 5:return gx[r.m-1][0];default:return gx[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:s=r.d,c=t.length;break;case 3:return fx[r.q][0];default:return fx[r.q][1]}break;case 104:switch(t.length){case 1:case 2:s=1+(r.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:s=r.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:s=r.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==r.u||"s"!=t&&"ss"!=t?(l=n>=2?3===n?1e3:100:1===n?10:1,(i=Math.round(l*(r.S+r.u)))>=60*l&&(i=0),"s"===t?0===i?"0":""+i/l:(a=dx(i,2+n),"ss"===t?a.substr(0,2):"."+a.substr(2,t.length-1))):dx(r.S,t.length);case 90:switch(t){case"[h]":case"[hh]":s=24*r.D+r.H;break;case"[m]":case"[mm]":s=60*(24*r.D+r.H)+r.M;break;case"[s]":case"[ss]":s=60*(60*(24*r.D+r.H)+r.M)+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:s=o,c=1}return c>0?dx(s,c):""}function Rx(e){if(e.length<=3)return e;for(var t=e.length%3,r=e.substr(0,t);t!=e.length;t+=3)r+=(r.length>0?",":"")+e.substr(t,3);return r}var _x=/%/g;function Ix(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+Ix(e,-t);var s=e.indexOf(".");-1===s&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),-1===(r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s)).indexOf("e")){var i=Math.floor(Math.log(t)*Math.LOG10E);for(-1===r.indexOf(".")?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a);"0."===r.substr(0,2);)r=(r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,r,n){return t+r+n.substr(0,(s+a)%s)+"."+n.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Px=/# (\?+)( ?)\/( ?)(\d+)/;var Ox=/^#*0*\.([0#]+)/,Lx=/\).*[0#]/,Fx=/\(###\) ###\\?-####/;function Mx(e){for(var t,r="",n=0;n!=e.length;++n)switch(t=e.charCodeAt(n)){case 35:break;case 63:r+=" ";break;case 48:r+="0";break;default:r+=String.fromCharCode(t)}return r}function Ux(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function Bx(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Hx(e,t,r){if(40===e.charCodeAt(0)&&!t.match(Lx)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Hx("n",n,r):"("+Hx("n",n,-r)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,r){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return Vx(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}(e,t,r);if(-1!==t.indexOf("%"))return function(e,t,r){var n=t.replace(_x,""),s=t.length-n.length;return Vx(e,n,r*Math.pow(10,2*s))+wf("%",s)}(e,t,r);if(-1!==t.indexOf("E"))return Ix(t,r);if(36===t.charCodeAt(0))return"$"+Hx(e,t.substr(" "==t.charAt(1)?2:1),r);var s,a,i,l,o=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+px(o,t.length);if(t.match(/^[#?]+$/))return"0"===(s=px(r,0))&&(s=""),s.length>t.length?s:Mx(t.substr(0,t.length-s.length))+s;if(a=t.match(Px))return function(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),a=Math.floor(s/n),i=s-a*n,l=n;return r+(0===a?"":""+a)+" "+(0===i?wf(" ",e[1].length+1+e[4].length):ux(i,e[1].length)+e[2]+"/"+e[3]+dx(l,e[4].length))}(a,o,c);if(t.match(/^#+0+$/))return c+px(o,t.length-t.indexOf("0"));if(a=t.match(Ox))return s=Ux(r,a[1].length).replace(/^([^\.]+)$/,"$1."+Mx(a[1])).replace(/\.$/,"."+Mx(a[1])).replace(/\.(\d*)$/,function(e,t){return"."+t+wf("0",Mx(a[1]).length-t.length)}),-1!==t.indexOf("0.")?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+Ux(o,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+Rx(px(o,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Hx(e,t,-r):Rx(""+(Math.floor(r)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(r,a[1].length)))+"."+dx(Bx(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return Hx(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=cx(Hx(e,t.replace(/[\\-]/g,""),r)),i=0,cx(cx(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return i<s.length?s.charAt(i++):"0"===e?"0":""}));if(t.match(Fx))return"("+(s=Hx(e,"##########",r)).substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),l=Nx(o,Math.pow(10,i)-1,!1),s=""+c," "==(d=Vx("n",a[1],l[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],(d=mx(l[2],i)).length<a[4].length&&(d=Mx(a[4].substr(a[4].length-d.length))+d),s+=d;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),c+((l=Nx(o,Math.pow(10,i)-1,!0))[0]||(l[1]?"":"0"))+" "+(l[1]?ux(l[1],i)+a[2]+"/"+a[3]+mx(l[2],i):wf(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=px(r,0),t.length<=s.length?s:Mx(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var u=t.indexOf(".")-i,m=t.length-s.length-u;return Mx(t.substr(0,u)+s+t.substr(t.length-m))}if(a=t.match(/^00,000\.([#0]*0)$/))return i=Bx(r,a[1].length),r<0?"-"+Hx(e,t,-r):Rx(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?dx(0,3-e.length):"")+e})+"."+dx(i,a[1].length);switch(t){case"###,##0.00":return Hx(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=Rx(px(o,0));return"0"!==h?c+h:"";case"###,###.00":return Hx(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Hx(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function zx(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+zx(e,-t);var s=e.indexOf(".");-1===s&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),!(r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s)).match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);-1===r.indexOf(".")?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,r,n){return t+r+n.substr(0,(s+a)%s)+"."+n.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Gx(e,t,r){if(40===e.charCodeAt(0)&&!t.match(Lx)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Gx("n",n,r):"("+Gx("n",n,-r)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,r){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return Vx(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}(e,t,r);if(-1!==t.indexOf("%"))return function(e,t,r){var n=t.replace(_x,""),s=t.length-n.length;return Vx(e,n,r*Math.pow(10,2*s))+wf("%",s)}(e,t,r);if(-1!==t.indexOf("E"))return zx(t,r);if(36===t.charCodeAt(0))return"$"+Gx(e,t.substr(" "==t.charAt(1)?2:1),r);var s,a,i,l,o=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+dx(o,t.length);if(t.match(/^[#?]+$/))return s=""+r,0===r&&(s=""),s.length>t.length?s:Mx(t.substr(0,t.length-s.length))+s;if(a=t.match(Px))return function(e,t,r){return r+(0===t?"":""+t)+wf(" ",e[1].length+2+e[4].length)}(a,o,c);if(t.match(/^#+0+$/))return c+dx(o,t.length-t.indexOf("0"));if(a=t.match(Ox))return s=(s=(""+r).replace(/^([^\.]+)$/,"$1."+Mx(a[1])).replace(/\.$/,"."+Mx(a[1]))).replace(/\.(\d*)$/,function(e,t){return"."+t+wf("0",Mx(a[1]).length-t.length)}),-1!==t.indexOf("0.")?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+(""+o).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+Rx(""+o);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Gx(e,t,-r):Rx(""+r)+"."+wf("0",a[1].length);if(a=t.match(/^#,#*,#0/))return Gx(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=cx(Gx(e,t.replace(/[\\-]/g,""),r)),i=0,cx(cx(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return i<s.length?s.charAt(i++):"0"===e?"0":""}));if(t.match(Fx))return"("+(s=Gx(e,"##########",r)).substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),l=Nx(o,Math.pow(10,i)-1,!1),s=""+c," "==(d=Vx("n",a[1],l[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],(d=mx(l[2],i)).length<a[4].length&&(d=Mx(a[4].substr(a[4].length-d.length))+d),s+=d;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),c+((l=Nx(o,Math.pow(10,i)-1,!0))[0]||(l[1]?"":"0"))+" "+(l[1]?ux(l[1],i)+a[2]+"/"+a[3]+mx(l[2],i):wf(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Mx(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var u=t.indexOf(".")-i,m=t.length-s.length-u;return Mx(t.substr(0,u)+s+t.substr(t.length-m))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Gx(e,t,-r):Rx(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?dx(0,3-e.length):"")+e})+"."+dx(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var h=Rx(""+o);return"0"!==h?c+h:"";default:if(t.match(/\.[0#?]*$/))return Gx(e,t.slice(0,t.lastIndexOf(".")),r)+Mx(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Vx(e,t,r){return(0|r)===r?Gx(e,t,r):Hx(e,t,r)}var Wx=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function qx(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":xx(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(n=r;"]"!==e.charAt(t++)&&t<e.length;)n+=e.charAt(t);if(n.match(Wx))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||"\\"==r&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var $x=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Kx(e,t){if(null==t)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0}return!1}function Xx(e,t){var r=function(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),!0===r)throw new Error("Format |"+e+"| unterminated string ");return t}(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if("number"!==typeof t)return[4,4===r.length||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"]}var a=t>0?r[0]:t<0?r[1]:r[2];if(-1===r[0].indexOf("[")&&-1===r[1].indexOf("["))return[n,a];if(null!=r[0].match(/\[[=<>]/)||null!=r[1].match(/\[[=<>]/)){var i=r[0].match($x),l=r[1].match($x);return Kx(t,i)?[n,r[0]]:Kx(t,l)?[n,r[1]]:[n,r[null!=i&&null!=l?2:1]]}return[n,a]}function Yx(e,t,r){null==r&&(r={});var n="";switch(typeof e){case"string":n="m/d/yy"==e&&r.dateNF?r.dateNF:e;break;case"number":null==(n=14==e&&r.dateNF?r.dateNF:(null!=r.table?r.table:vx)[e])&&(n=r.table&&r.table[yx[e]]||vx[yx[e]]),null==n&&(n=bx[e]||"General")}if(xx(n,0))return Dx(t,r);t instanceof Date&&(t=Tx(t,r.date1904));var s=Xx(n,t);if(xx(s[1]))return Dx(t,r);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,r,n){for(var s,a,i,l=[],o="",c=0,d="",u="t",m="H";c<e.length;)switch(d=e.charAt(c)){case"G":if(!xx(e,c))throw new Error("unrecognized character "+d+" in "+e);l[l.length]={t:"G",v:"General"},c+=7;break;case'"':for(o="";34!==(i=e.charCodeAt(++c))&&c<e.length;)o+=String.fromCharCode(i);l[l.length]={t:"t",v:o},++c;break;case"\\":var h=e.charAt(++c),p="("===h||")"===h?h:"t";l[l.length]={t:p,v:h},++c;break;case"_":l[l.length]={t:"t",v:" "},c+=2;break;case"@":l[l.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==s&&null==(s=jx(t,r,"2"===e.charAt(c+1))))return"";l[l.length]={t:"X",v:e.substr(c,2)},u=d,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==s&&null==(s=jx(t,r)))return"";for(o=d;++c<e.length&&e.charAt(c).toLowerCase()===d;)o+=d;"m"===d&&"h"===u.toLowerCase()&&(d="M"),"h"===d&&(d=m),l[l.length]={t:d,v:o},u=d;break;case"A":case"a":case"\u4e0a":var x={t:d,v:d};if(null==s&&(s=jx(t,r)),"A/P"===e.substr(c,3).toUpperCase()?(null!=s&&(x.v=s.H>=12?"P":"A"),x.t="T",m="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=s&&(x.v=s.H>=12?"PM":"AM"),x.t="T",c+=5,m="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=s&&(x.v=s.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),x.t="T",c+=5,m="h"):(x.t="t",++c),null==s&&"T"===x.t)return"";l[l.length]=x,u=d;break;case"[":for(o=d;"]"!==e.charAt(c++)&&c<e.length;)o+=e.charAt(c);if("]"!==o.slice(-1))throw'unterminated "[" block: |'+o+"|";if(o.match(Wx)){if(null==s&&null==(s=jx(t,r)))return"";l[l.length]={t:"Z",v:o.toLowerCase()},u=o.charAt(1)}else o.indexOf("$")>-1&&(o=(o.match(/\$([^-\[\]]*)/)||[])[1]||"$",qx(e)||(l[l.length]={t:"t",v:o}));break;case".":if(null!=s){for(o=d;++c<e.length&&"0"===(d=e.charAt(c));)o+=d;l[l.length]={t:"s",v:o};break}case"0":case"#":for(o=d;++c<e.length&&"0#?.,E+-%".indexOf(d=e.charAt(c))>-1;)o+=d;l[l.length]={t:"n",v:o};break;case"?":for(o=d;e.charAt(++c)===d;)o+=d;l[l.length]={t:d,v:o},u=d;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":l[l.length]={t:1===n?"t":d,v:d},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(o=d;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)o+=e.charAt(c);l[l.length]={t:"D",v:o};break;case" ":l[l.length]={t:d,v:d},++c;break;case"$":l[l.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(d))throw new Error("unrecognized character "+d+" in "+e);l[l.length]={t:"t",v:d},++c}var f,g=0,v=0;for(c=l.length-1,u="t";c>=0;--c)switch(l[c].t){case"h":case"H":l[c].t=m,u="h",g<1&&(g=1);break;case"s":(f=l[c].v.match(/\.0+$/))&&(v=Math.max(v,f[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":u=l[c].t;break;case"m":"s"===u&&(l[c].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&l[c].v.match(/[Hh]/)&&(g=1),g<2&&l[c].v.match(/[Mm]/)&&(g=2),g<3&&l[c].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:s.u>=.5&&(s.u=0,++s.S),s.S>=60&&(s.S=0,++s.M),s.M>=60&&(s.M=0,++s.H);break;case 2:s.u>=.5&&(s.u=0,++s.S),s.S>=60&&(s.S=0,++s.M)}var y,b="";for(c=0;c<l.length;++c)switch(l[c].t){case"t":case"T":case" ":case"D":break;case"X":l[c].v="",l[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":l[c].v=kx(l[c].t.charCodeAt(0),l[c].v,s,v),l[c].t="t";break;case"n":case"?":for(y=c+1;null!=l[y]&&("?"===(d=l[y].t)||"D"===d||(" "===d||"t"===d)&&null!=l[y+1]&&("?"===l[y+1].t||"t"===l[y+1].t&&"/"===l[y+1].v)||"("===l[c].t&&(" "===d||"n"===d||")"===d)||"t"===d&&("/"===l[y].v||" "===l[y].v&&null!=l[y+1]&&"?"==l[y+1].t));)l[c].v+=l[y].v,l[y]={v:"",t:";"},++y;b+=l[c].v,c=y-1;break;case"G":l[c].t="t",l[c].v=Dx(t,r)}var N,j,w="";if(b.length>0){40==b.charCodeAt(0)?(N=t<0&&45===b.charCodeAt(0)?-t:t,j=Vx("n",b,N)):(j=Vx("n",b,N=t<0&&n>1?-t:t),N<0&&l[0]&&"t"==l[0].t&&(j=j.substr(1),l[0].v="-"+l[0].v)),y=j.length-1;var S=l.length;for(c=0;c<l.length;++c)if(null!=l[c]&&"t"!=l[c].t&&l[c].v.indexOf(".")>-1){S=c;break}var A=l.length;if(S===l.length&&-1===j.indexOf("E")){for(c=l.length-1;c>=0;--c)null!=l[c]&&-1!=="n?".indexOf(l[c].t)&&(y>=l[c].v.length-1?(y-=l[c].v.length,l[c].v=j.substr(y+1,l[c].v.length)):y<0?l[c].v="":(l[c].v=j.substr(0,y+1),y=-1),l[c].t="t",A=c);y>=0&&A<l.length&&(l[A].v=j.substr(0,y+1)+l[A].v)}else if(S!==l.length&&-1===j.indexOf("E")){for(y=j.indexOf(".")-1,c=S;c>=0;--c)if(null!=l[c]&&-1!=="n?".indexOf(l[c].t)){for(a=l[c].v.indexOf(".")>-1&&c===S?l[c].v.indexOf(".")-1:l[c].v.length-1,w=l[c].v.substr(a+1);a>=0;--a)y>=0&&("0"===l[c].v.charAt(a)||"#"===l[c].v.charAt(a))&&(w=j.charAt(y--)+w);l[c].v=w,l[c].t="t",A=c}for(y>=0&&A<l.length&&(l[A].v=j.substr(0,y+1)+l[A].v),y=j.indexOf(".")+1,c=S;c<l.length;++c)if(null!=l[c]&&(-1!=="n?(".indexOf(l[c].t)||c===S)){for(a=l[c].v.indexOf(".")>-1&&c===S?l[c].v.indexOf(".")+1:0,w=l[c].v.substr(0,a);a<l[c].v.length;++a)y<j.length&&(w+=j.charAt(y++));l[c].v=w,l[c].t="t",A=c}}}for(c=0;c<l.length;++c)null!=l[c]&&"n?".indexOf(l[c].t)>-1&&(N=n>1&&t<0&&c>0&&"-"===l[c-1].v?-t:t,l[c].v=Vx(l[c].t,l[c].v,N),l[c].t="t");var T="";for(c=0;c!==l.length;++c)null!=l[c]&&(T+=l[c].v);return T}(s[1],t,r,s[0])}function Jx(e,t){if("number"!=typeof t){t=+t||-1;for(var r=0;r<392;++r)if(void 0!=vx[r]){if(vx[r]==e){t=r;break}}else t<0&&(t=r);t<0&&(t=391)}return vx[t]=e,t}function Zx(e){for(var t=0;392!=t;++t)void 0!==e[t]&&Jx(e[t],t)}function Qx(){vx=function(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',e}()}var ef=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var tf=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var r=function(e){var t=0,r=0,n=0,s="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(n=0;256!=n;++n)s[n]=e[n];for(n=0;256!=n;++n)for(r=e[n],t=256+n;t<4096;t+=256)r=s[t]=r>>>8^e[255&r];var a=[];for(n=1;16!=n;++n)a[n-1]="undefined"!==typeof Int32Array?s.subarray(256*n,256*n+256):s.slice(256*n,256*n+256);return a}(t),n=r[0],s=r[1],a=r[2],i=r[3],l=r[4],o=r[5],c=r[6],d=r[7],u=r[8],m=r[9],h=r[10],p=r[11],x=r[12],f=r[13],g=r[14];return e.table=t,e.bstr=function(e,r){for(var n=-1^r,s=0,a=e.length;s<a;)n=n>>>8^t[255&(n^e.charCodeAt(s++))];return~n},e.buf=function(e,r){for(var v=-1^r,y=e.length-15,b=0;b<y;)v=g[e[b++]^255&v]^f[e[b++]^v>>8&255]^x[e[b++]^v>>16&255]^p[e[b++]^v>>>24]^h[e[b++]]^m[e[b++]]^u[e[b++]]^d[e[b++]]^c[e[b++]]^o[e[b++]]^l[e[b++]]^i[e[b++]]^a[e[b++]]^s[e[b++]]^n[e[b++]]^t[e[b++]];for(y+=15;b<y;)v=v>>>8^t[255&(v^e[b++])];return~v},e.str=function(e,r){for(var n=-1^r,s=0,a=e.length,i=0,l=0;s<a;)(i=e.charCodeAt(s++))<128?n=n>>>8^t[255&(n^i)]:i<2048?n=(n=n>>>8^t[255&(n^(192|i>>6&31))])>>>8^t[255&(n^(128|63&i))]:i>=55296&&i<57344?(i=64+(1023&i),l=1023&e.charCodeAt(s++),n=(n=(n=(n=n>>>8^t[255&(n^(240|i>>8&7))])>>>8^t[255&(n^(128|i>>2&63))])>>>8^t[255&(n^(128|l>>6&15|(3&i)<<4))])>>>8^t[255&(n^(128|63&l))]):n=(n=(n=n>>>8^t[255&(n^(224|i>>12&15))])>>>8^t[255&(n^(128|i>>6&63))])>>>8^t[255&(n^(128|63&i))];return~n},e}(),rf=function(){var e,t={};function r(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function n(e){if("/"==e.charAt(e.length-1))return n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function s(e,t){"string"===typeof t&&(t=new Date(t));var r=t.getHours();r=(r=r<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,r);var n=t.getFullYear()-1980;n=(n=n<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,n)}function a(e){Zg(e,0);for(var t={},r=0;e.l<=e.length-4;){var n=e.read_shift(2),s=e.read_shift(2),a=e.l+s,i={};if(21589===n)1&(r=e.read_shift(1))&&(i.mtime=e.read_shift(4)),s>5&&(2&r&&(i.atime=e.read_shift(4)),4&r&&(i.ctime=e.read_shift(4))),i.mtime&&(i.mt=new Date(1e3*i.mtime));e.l=a,t[n]=i}return t}function i(){return e||(e={})}function l(e,t){if(80==e[0]&&75==e[1])return ne(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=j(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var r=t&&t.root||"",n=(Qp&&Buffer.isBuffer(e)?e.toString("binary"):j(e)).split("\r\n"),s=0,a="";for(s=0;s<n.length;++s)if(a=n[s],/^Content-Location:/i.test(a)&&(a=a.slice(a.indexOf("file")),r||(r=a.slice(0,a.lastIndexOf("/")+1)),a.slice(0,r.length)!=r))for(;r.length>0&&(r=(r=r.slice(0,r.length-1)).slice(0,r.lastIndexOf("/")+1),a.slice(0,r.length)!=r););var i=(n[1]||"").match(/boundary="(.*?)"/);if(!i)throw new Error("MAD cannot find boundary");var l="--"+(i[1]||""),o=[],c=[],d={FileIndex:o,FullPaths:c};m(d);var u,h=0;for(s=0;s<n.length;++s){var p=n[s];p!==l&&p!==l+"--"||(h++&&ce(d,n.slice(u,s),r),u=s)}return d}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var r,n,s,a,i,l,h=512,p=[],x=e.slice(0,512);Zg(x,0);var f=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(v,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(x);switch(r=f[0]){case 3:h=512;break;case 4:h=4096;break;case 0:if(0==f[1])return ne(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+r)}512!==h&&Zg(x=e.slice(0,h),28);var y=e.slice(0,h);!function(e,t){var r=9;switch(e.l+=2,r=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+r);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+r);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+r)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(x,r);var b=x.read_shift(4,"i");if(3===r&&0!==b)throw new Error("# Directory Sectors: Expected 0 saw "+b);x.l+=4,a=x.read_shift(4,"i"),x.l+=4,x.chk("00100000","Mini Stream Cutoff Size: "),i=x.read_shift(4,"i"),n=x.read_shift(4,"i"),l=x.read_shift(4,"i"),s=x.read_shift(4,"i");for(var N=-1,w=0;w<109&&!((N=x.read_shift(4,"i"))<0);++w)p[w]=N;var S=function(e,t){for(var r=Math.ceil(e.length/t)-1,n=[],s=1;s<r;++s)n[s-1]=e.slice(s*t,(s+1)*t);return n[r-1]=e.slice(r*t),n}(e,h);c(l,s,S,h,p);var A=function(e,t,r,n){var s=e.length,a=[],i=[],l=[],o=[],c=n-1,d=0,u=0,m=0,h=0;for(d=0;d<s;++d)if(l=[],(m=d+t)>=s&&(m-=s),!i[m]){o=[];var p=[];for(u=m;u>=0;){p[u]=!0,i[u]=!0,l[l.length]=u,o.push(e[u]);var x=r[Math.floor(4*u/n)];if(n<4+(h=4*u&c))throw new Error("FAT boundary crossed: "+u+" 4 "+n);if(!e[x])break;if(p[u=Vg(e[x],h)])break}a[m]={nodes:l,data:yg([o])}}return a}(S,a,p,h);A[a].name="!Directory",n>0&&i!==g&&(A[i].name="!MiniFAT"),A[p[0]].name="!FAT",A.fat_addrs=p,A.ssz=h;var T=[],C=[],E=[];!function(e,t,r,n,s,a,i,l){for(var c,m=0,h=n.length?2:0,p=t[e].data,x=0,f=0;x<p.length;x+=128){var v=p.slice(x,x+128);Zg(v,64),f=v.read_shift(2),c=Ng(v,0,f-h),n.push(c);var y={name:c,type:v.read_shift(1),color:v.read_shift(1),L:v.read_shift(4,"i"),R:v.read_shift(4,"i"),C:v.read_shift(4,"i"),clsid:v.read_shift(16),state:v.read_shift(4,"i"),start:0,size:0};0!==v.read_shift(2)+v.read_shift(2)+v.read_shift(2)+v.read_shift(2)&&(y.ct=u(v,v.l-8)),0!==v.read_shift(2)+v.read_shift(2)+v.read_shift(2)+v.read_shift(2)&&(y.mt=u(v,v.l-8)),y.start=v.read_shift(4,"i"),y.size=v.read_shift(4,"i"),y.size<0&&y.start<0&&(y.size=y.type=0,y.start=g,y.name=""),5===y.type?(m=y.start,s>0&&m!==g&&(t[m].name="!StreamData")):y.size>=4096?(y.storage="fat",void 0===t[y.start]&&(t[y.start]=d(r,y.start,t.fat_addrs,t.ssz)),t[y.start].name=y.name,y.content=t[y.start].data.slice(0,y.size)):(y.storage="minifat",y.size<0?y.size=0:m!==g&&y.start!==g&&t[m]&&(y.content=o(y,t[m].data,(t[l]||{}).data))),y.content&&Zg(y.content,0),a[c]=y,i.push(y)}}(a,A,S,T,n,{},C,i),function(e,t,r){for(var n=0,s=0,a=0,i=0,l=0,o=r.length,c=[],d=[];n<o;++n)c[n]=d[n]=n,t[n]=r[n];for(;l<d.length;++l)s=e[n=d[l]].L,a=e[n].R,i=e[n].C,c[n]===n&&(-1!==s&&c[s]!==s&&(c[n]=c[s]),-1!==a&&c[a]!==a&&(c[n]=c[a])),-1!==i&&(c[i]=n),-1!==s&&n!=c[n]&&(c[s]=c[n],d.lastIndexOf(s)<l&&d.push(s)),-1!==a&&n!=c[n]&&(c[a]=c[n],d.lastIndexOf(a)<l&&d.push(a));for(n=1;n<o;++n)c[n]===n&&(-1!==a&&c[a]!==a?c[n]=c[a]:-1!==s&&c[s]!==s&&(c[n]=c[s]));for(n=1;n<o;++n)if(0!==e[n].type){if((l=n)!=c[l])do{l=c[l],t[n]=t[l]+"/"+t[n]}while(0!==l&&-1!==c[l]&&l!=c[l]);c[n]=-1}for(t[0]+="/",n=1;n<o;++n)2!==e[n].type&&(t[n]+="/")}(C,E,T),T.shift();var D={FileIndex:C,FullPaths:E};return t&&t.raw&&(D.raw={header:y,sectors:S}),D}function o(e,t,r){for(var n=e.start,s=e.size,a=[],i=n;r&&s>0&&i>=0;)a.push(t.slice(i*f,i*f+f)),s-=f,i=Vg(r,4*i);return 0===a.length?ev(0):ix(a).slice(0,e.size)}function c(e,t,r,n,s){var a=g;if(e===g){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var i=r[e],l=(n>>>2)-1;if(!i)return;for(var o=0;o<l&&(a=Vg(i,4*o))!==g;++o)s.push(a);c(Vg(i,n-4),t-1,r,n,s)}}function d(e,t,r,n,s){var a=[],i=[];s||(s=[]);var l=n-1,o=0,c=0;for(o=t;o>=0;){s[o]=!0,a[a.length]=o,i.push(e[o]);var d=r[Math.floor(4*o/n)];if(n<4+(c=4*o&l))throw new Error("FAT boundary crossed: "+o+" 4 "+n);if(!e[d])break;o=Vg(e[d],c)}return{nodes:a,data:yg([i])}}function u(e,t){return new Date(1e3*(Gg(e,t+4)/1e7*Math.pow(2,32)+Gg(e,t)/1e7-11644473600))}function m(e,t){var r=t||{},n=r.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=n+"/",e.FileIndex[0]={name:n,type:5}),r.CLSID&&(e.FileIndex[0].clsid=r.CLSID),function(e){var t="\x01Sh33tJ5";if(rf.find(e,"/"+t))return;var r=ev(4);r[0]=55,r[1]=r[3]=50,r[2]=54,e.FileIndex.push({name:t,type:2,content:r,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),h(e)}(e)}function h(e,t){m(e);for(var s=!1,a=!1,i=e.FullPaths.length-1;i>=0;--i){var l=e.FileIndex[i];switch(l.type){case 0:a?s=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:a=!0,isNaN(l.R*l.L*l.C)&&(s=!0),l.R>-1&&l.L>-1&&l.R==l.L&&(s=!0);break;default:s=!0}}if(s||t){var o=new Date(1987,1,19),c=0,d=Object.create?Object.create(null):{},u=[];for(i=0;i<e.FullPaths.length;++i)d[e.FullPaths[i]]=!0,0!==e.FileIndex[i].type&&u.push([e.FullPaths[i],e.FileIndex[i]]);for(i=0;i<u.length;++i){var h=r(u[i][0]);(a=d[h])||(u.push([h,{name:n(h).replace("/",""),type:1,clsid:b,ct:o,mt:o,content:null}]),d[h]=!0)}for(u.sort(function(e,t){return function(e,t){for(var r=e.split("/"),n=t.split("/"),s=0,a=0,i=Math.min(r.length,n.length);s<i;++s){if(a=r[s].length-n[s].length)return a;if(r[s]!=n[s])return r[s]<n[s]?-1:1}return r.length-n.length}(e[0],t[0])}),e.FullPaths=[],e.FileIndex=[],i=0;i<u.length;++i)e.FullPaths[i]=u[i][0],e.FileIndex[i]=u[i][1];for(i=0;i<u.length;++i){var p=e.FileIndex[i],x=e.FullPaths[i];if(p.name=n(x).replace("/",""),p.L=p.R=p.C=-(p.color=1),p.size=p.content?p.content.length:0,p.start=0,p.clsid=p.clsid||b,0===i)p.C=u.length>1?1:-1,p.size=0,p.type=5;else if("/"==x.slice(-1)){for(c=i+1;c<u.length&&r(e.FullPaths[c])!=x;++c);for(p.C=c>=u.length?-1:c,c=i+1;c<u.length&&r(e.FullPaths[c])!=r(x);++c);p.R=c>=u.length?-1:c,p.type=1}else r(e.FullPaths[i+1]||"")==r(x)&&(p.R=i+1),p.type=2}}}function p(e,t){var r=t||{};if("mad"==r.fileType)return function(e,t){for(var r=t||{},n=r.boundary||"SheetJS",s=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(n="------="+n).slice(2)+'"',"","",""],a=e.FullPaths[0],i=a,l=e.FileIndex[0],o=1;o<e.FullPaths.length;++o)if(i=e.FullPaths[o].slice(a.length),(l=e.FileIndex[o]).size&&l.content&&"\x01Sh33tJ5"!=i){i=i.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"});for(var c=l.content,d=Qp&&Buffer.isBuffer(c)?c.toString("binary"):j(c),u=0,m=Math.min(1024,d.length),h=0,p=0;p<=m;++p)(h=d.charCodeAt(p))>=32&&h<128&&++u;var x=u>=4*m/5;s.push(n),s.push("Content-Location: "+(r.root||"file:///C:/SheetJS/")+i),s.push("Content-Transfer-Encoding: "+(x?"quoted-printable":"base64")),s.push("Content-Type: "+ie(l,i)),s.push(""),s.push(x?oe(d):le(d))}return s.push(n+"--\r\n"),s.join("\r\n")}(e,r);if(h(e),"zip"===r.fileType)return function(e,t){var r=t||{},n=[],a=[],i=ev(1),l=r.compression?8:0,o=0;0;var c=0,d=0,u=0,m=0,h=e.FullPaths[0],p=h,x=e.FileIndex[0],f=[],g=0;for(c=1;c<e.FullPaths.length;++c)if(p=e.FullPaths[c].slice(h.length),(x=e.FileIndex[c]).size&&x.content&&"\x01Sh33tJ5"!=p){var v=u,y=ev(p.length);for(d=0;d<p.length;++d)y.write_shift(1,127&p.charCodeAt(d));y=y.slice(0,y.l),f[m]=tf.buf(x.content,0);var b=x.content;8==l&&(b=w(b)),(i=ev(30)).write_shift(4,67324752),i.write_shift(2,20),i.write_shift(2,o),i.write_shift(2,l),x.mt?s(i,x.mt):i.write_shift(4,0),i.write_shift(-4,8&o?0:f[m]),i.write_shift(4,8&o?0:b.length),i.write_shift(4,8&o?0:x.content.length),i.write_shift(2,y.length),i.write_shift(2,0),u+=i.length,n.push(i),u+=y.length,n.push(y),u+=b.length,n.push(b),8&o&&((i=ev(12)).write_shift(-4,f[m]),i.write_shift(4,b.length),i.write_shift(4,x.content.length),u+=i.l,n.push(i)),(i=ev(46)).write_shift(4,33639248),i.write_shift(2,0),i.write_shift(2,20),i.write_shift(2,o),i.write_shift(2,l),i.write_shift(4,0),i.write_shift(-4,f[m]),i.write_shift(4,b.length),i.write_shift(4,x.content.length),i.write_shift(2,y.length),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(4,0),i.write_shift(4,v),g+=i.l,a.push(i),g+=y.length,a.push(y),++m}return i=ev(22),i.write_shift(4,101010256),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,m),i.write_shift(2,m),i.write_shift(4,g),i.write_shift(4,u),i.write_shift(2,0),ix([ix(n),ix(a),i])}(e,r);var n=function(e){for(var t=0,r=0,n=0;n<e.FileIndex.length;++n){var s=e.FileIndex[n];if(s.content){var a=s.content.length;a>0&&(a<4096?t+=a+63>>6:r+=a+511>>9)}}for(var i=e.FullPaths.length+3>>2,l=t+127>>7,o=(t+7>>3)+r+i+l,c=o+127>>7,d=c<=109?0:Math.ceil((c-109)/127);o+c+d+127>>7>c;)d=++c<=109?0:Math.ceil((c-109)/127);var u=[1,d,c,l,i,r,t,0];return e.FileIndex[0].size=t<<6,u[7]=(e.FileIndex[0].start=u[0]+u[1]+u[2]+u[3]+u[4]+u[5])+(u[6]+7>>3),u}(e),a=ev(n[7]<<9),i=0,l=0;for(i=0;i<8;++i)a.write_shift(1,y[i]);for(i=0;i<8;++i)a.write_shift(2,0);for(a.write_shift(2,62),a.write_shift(2,3),a.write_shift(2,65534),a.write_shift(2,9),a.write_shift(2,6),i=0;i<3;++i)a.write_shift(2,0);for(a.write_shift(4,0),a.write_shift(4,n[2]),a.write_shift(4,n[0]+n[1]+n[2]+n[3]-1),a.write_shift(4,0),a.write_shift(4,4096),a.write_shift(4,n[3]?n[0]+n[1]+n[2]-1:g),a.write_shift(4,n[3]),a.write_shift(-4,n[1]?n[0]-1:g),a.write_shift(4,n[1]),i=0;i<109;++i)a.write_shift(-4,i<n[2]?n[1]+i:-1);if(n[1])for(l=0;l<n[1];++l){for(;i<236+127*l;++i)a.write_shift(-4,i<n[2]?n[1]+i:-1);a.write_shift(-4,l===n[1]-1?g:l+1)}var o=function(e){for(l+=e;i<l-1;++i)a.write_shift(-4,i+1);e&&(++i,a.write_shift(-4,g))};for(l=i=0,l+=n[1];i<l;++i)a.write_shift(-4,N.DIFSECT);for(l+=n[2];i<l;++i)a.write_shift(-4,N.FATSECT);o(n[3]),o(n[4]);for(var c=0,d=0,u=e.FileIndex[0];c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&((d=u.content.length)<4096||(u.start=l,o(d+511>>9)));for(o(n[6]+7>>3);511&a.l;)a.write_shift(-4,N.ENDOFCHAIN);for(l=i=0,c=0;c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&(!(d=u.content.length)||d>=4096||(u.start=l,o(d+63>>6)));for(;511&a.l;)a.write_shift(-4,N.ENDOFCHAIN);for(i=0;i<n[4]<<2;++i){var m=e.FullPaths[i];if(m&&0!==m.length){u=e.FileIndex[i],0===i&&(u.start=u.size?u.start-1:g);var p=0===i&&r.root||u.name;if(d=2*(p.length+1),a.write_shift(64,p,"utf16le"),a.write_shift(2,d),a.write_shift(1,u.type),a.write_shift(1,u.color),a.write_shift(-4,u.L),a.write_shift(-4,u.R),a.write_shift(-4,u.C),u.clsid)a.write_shift(16,u.clsid,"hex");else for(c=0;c<4;++c)a.write_shift(4,0);a.write_shift(4,u.state||0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,u.start),a.write_shift(4,u.size),a.write_shift(4,0)}else{for(c=0;c<17;++c)a.write_shift(4,0);for(c=0;c<3;++c)a.write_shift(4,-1);for(c=0;c<12;++c)a.write_shift(4,0)}}for(i=1;i<e.FileIndex.length;++i)if((u=e.FileIndex[i]).size>=4096)if(a.l=u.start+1<<9,Qp&&Buffer.isBuffer(u.content))u.content.copy(a,a.l,0,u.size),a.l+=u.size+511&-512;else{for(c=0;c<u.size;++c)a.write_shift(1,u.content[c]);for(;511&c;++c)a.write_shift(1,0)}for(i=1;i<e.FileIndex.length;++i)if((u=e.FileIndex[i]).size>0&&u.size<4096)if(Qp&&Buffer.isBuffer(u.content))u.content.copy(a,a.l,0,u.size),a.l+=u.size+63&-64;else{for(c=0;c<u.size;++c)a.write_shift(1,u.content[c]);for(;63&c;++c)a.write_shift(1,0)}if(Qp)a.l=a.length;else for(;a.l<a.length;)a.write_shift(1,0);return a}t.version="1.2.1";var x,f=64,g=-2,v="d0cf11e0a1b11ae1",y=[208,207,17,224,161,177,26,225],b="00000000000000000000000000000000",N={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:g,FREESECT:-1,HEADER_SIGNATURE:v,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:b,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function j(e){for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function w(e){return x?x.deflateRawSync(e):K(e)}var S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],A=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],T=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function C(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var E="undefined"!==typeof Uint8Array,D=E?new Uint8Array(256):[],k=0;k<256;++k)D[k]=C(k);function R(e,t){var r=D[255&e];return t<=8?r>>>8-t:(r=r<<8|D[e>>8&255],t<=16?r>>>16-t:(r=r<<8|D[e>>16&255])>>>24-t)}function _(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=6?0:e[n+1]<<8))>>>r&3}function I(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=5?0:e[n+1]<<8))>>>r&7}function P(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=3?0:e[n+1]<<8))>>>r&31}function O(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=1?0:e[n+1]<<8))>>>r&127}function L(e,t,r){var n=7&t,s=t>>>3,a=(1<<r)-1,i=e[s]>>>n;return r<8-n?i&a:(i|=e[s+1]<<8-n,r<16-n?i&a:(i|=e[s+2]<<16-n,r<24-n?i&a:(i|=e[s+3]<<24-n)&a))}function F(e,t,r){var n=7&t,s=t>>>3;return n<=5?e[s]|=(7&r)<<n:(e[s]|=r<<n&255,e[s+1]=(7&r)>>8-n),t+3}function M(e,t,r){return r=(1&r)<<(7&t),e[t>>>3]|=r,t+1}function U(e,t,r){var n=t>>>3;return r<<=7&t,e[n]|=255&r,r>>>=8,e[n+1]=r,t+8}function B(e,t,r){var n=t>>>3;return r<<=7&t,e[n]|=255&r,r>>>=8,e[n+1]=255&r,e[n+2]=r>>>8,t+16}function H(e,t){var r=e.length,n=2*r>t?2*r:t+5,s=0;if(r>=t)return e;if(Qp){var a=rx(n);if(e.copy)e.copy(a);else for(;s<e.length;++s)a[s]=e[s];return a}if(E){var i=new Uint8Array(n);if(i.set)i.set(e);else for(;s<r;++s)i[s]=e[s];return i}return e.length=n,e}function z(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=0;return t}function G(e,t,r){var n=1,s=0,a=0,i=0,l=0,o=e.length,c=E?new Uint16Array(32):z(32);for(a=0;a<32;++a)c[a]=0;for(a=o;a<r;++a)e[a]=0;o=e.length;var d=E?new Uint16Array(o):z(o);for(a=0;a<o;++a)c[s=e[a]]++,n<s&&(n=s),d[a]=0;for(c[0]=0,a=1;a<=n;++a)c[a+16]=l=l+c[a-1]<<1;for(a=0;a<o;++a)0!=(l=e[a])&&(d[a]=c[l+16]++);var u=0;for(a=0;a<o;++a)if(0!=(u=e[a]))for(l=R(d[a],n)>>n-u,i=(1<<n+4-u)-1;i>=0;--i)t[l|i<<u]=15&u|a<<4;return n}var V=E?new Uint16Array(512):z(512),W=E?new Uint16Array(32):z(32);if(!E){for(var q=0;q<512;++q)V[q]=0;for(q=0;q<32;++q)W[q]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);G(e,W,32);var r=[];for(t=0;t<=143;t++)r.push(8);for(;t<=255;t++)r.push(9);for(;t<=279;t++)r.push(7);for(;t<=287;t++)r.push(8);G(r,V,288)}();var $=function(){for(var e=E?new Uint8Array(32768):[],t=0,r=0;t<T.length-1;++t)for(;r<T[t+1];++r)e[r]=t;for(;r<32768;++r)e[r]=29;var n=E?new Uint8Array(259):[];for(t=0,r=0;t<A.length-1;++t)for(;r<A[t+1];++r)n[r]=t;return function(t,r){return t.length<8?function(e,t){for(var r=0;r<e.length;){var n=Math.min(65535,e.length-r),s=r+n==e.length;for(t.write_shift(1,+s),t.write_shift(2,n),t.write_shift(2,65535&~n);n-- >0;)t[t.l++]=e[r++]}return t.l}(t,r):function(t,r){for(var s=0,a=0,i=E?new Uint16Array(32768):[];a<t.length;){var l=Math.min(65535,t.length-a);if(l<10){for(7&(s=F(r,s,+!(a+l!=t.length)))&&(s+=8-(7&s)),r.l=s/8|0,r.write_shift(2,l),r.write_shift(2,65535&~l);l-- >0;)r[r.l++]=t[a++];s=8*r.l}else{s=F(r,s,+!(a+l!=t.length)+2);for(var o=0;l-- >0;){var c=t[a],d=-1,u=0;if((d=i[o=32767&(o<<5^c)])&&((d|=-32768&a)>a&&(d-=32768),d<a))for(;t[d+u]==t[a+u]&&u<250;)++u;if(u>2){(c=n[u])<=22?s=U(r,s,D[c+1]>>1)-1:(U(r,s,3),U(r,s+=5,D[c-23]>>5),s+=3);var m=c<8?0:c-4>>2;m>0&&(B(r,s,u-A[c]),s+=m),c=e[a-d],s=U(r,s,D[c]>>3),s-=3;var h=c<4?0:c-2>>1;h>0&&(B(r,s,a-d-T[c]),s+=h);for(var p=0;p<u;++p)i[o]=32767&a,o=32767&(o<<5^t[a]),++a;l-=u-1}else c<=143?c+=48:s=M(r,s,1),s=U(r,s,D[c]),i[o]=32767&a,++a}s=U(r,s,0)-1}}return r.l=(s+7)/8|0,r.l}(t,r)}}();function K(e){var t=ev(50+Math.floor(1.1*e.length)),r=$(e,t);return t.slice(0,r)}var X=E?new Uint16Array(32768):z(32768),Y=E?new Uint16Array(32768):z(32768),J=E?new Uint16Array(128):z(128),Z=1,Q=1;function ee(e,t){var r=P(e,t)+257,n=P(e,t+=5)+1,s=function(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=4?0:e[n+1]<<8))>>>r&15}(e,t+=5)+4;t+=4;for(var a=0,i=E?new Uint8Array(19):z(19),l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=1,c=E?new Uint8Array(8):z(8),d=E?new Uint8Array(8):z(8),u=i.length,m=0;m<s;++m)i[S[m]]=a=I(e,t),o<a&&(o=a),c[a]++,t+=3;var h=0;for(c[0]=0,m=1;m<=o;++m)d[m]=h=h+c[m-1]<<1;for(m=0;m<u;++m)0!=(h=i[m])&&(l[m]=d[h]++);var p=0;for(m=0;m<u;++m)if(0!=(p=i[m])){h=D[l[m]]>>8-p;for(var x=(1<<7-p)-1;x>=0;--x)J[h|x<<p]=7&p|m<<3}var f=[];for(o=1;f.length<r+n;)switch(t+=7&(h=J[O(e,t)]),h>>>=3){case 16:for(a=3+_(e,t),t+=2,h=f[f.length-1];a-- >0;)f.push(h);break;case 17:for(a=3+I(e,t),t+=3;a-- >0;)f.push(0);break;case 18:for(a=11+O(e,t),t+=7;a-- >0;)f.push(0);break;default:f.push(h),o<h&&(o=h)}var g=f.slice(0,r),v=f.slice(r);for(m=r;m<286;++m)g[m]=0;for(m=n;m<30;++m)v[m]=0;return Z=G(g,X,286),Q=G(v,Y,30),t}function te(e,t){var r=function(e,t){if(3==e[0]&&!(3&e[1]))return[tx(t),2];for(var r=0,n=0,s=rx(t||1<<18),a=0,i=s.length>>>0,l=0,o=0;0==(1&n);)if(n=I(e,r),r+=3,n>>>1!=0)for(n>>1==1?(l=9,o=5):(r=ee(e,r),l=Z,o=Q);;){!t&&i<a+32767&&(i=(s=H(s,a+32767)).length);var c=L(e,r,l),d=n>>>1==1?V[c]:X[c];if(r+=15&d,0===((d>>>=4)>>>8&255))s[a++]=d;else{if(256==d)break;var u=(d-=257)<8?0:d-4>>2;u>5&&(u=0);var m=a+A[d];u>0&&(m+=L(e,r,u),r+=u),c=L(e,r,o),r+=15&(d=n>>>1==1?W[c]:Y[c]);var h=(d>>>=4)<4?0:d-2>>1,p=T[d];for(h>0&&(p+=L(e,r,h),r+=h),!t&&i<m&&(i=(s=H(s,m+100)).length);a<m;)s[a]=s[a-p],++a}}else{7&r&&(r+=8-(7&r));var x=e[r>>>3]|e[(r>>>3)+1]<<8;if(r+=32,x>0)for(!t&&i<a+x&&(i=(s=H(s,a+x)).length);x-- >0;)s[a++]=e[r>>>3],r+=8}return t?[s,r+7>>>3]:[s.slice(0,a),r+7>>>3]}(e.slice(e.l||0),t);return e.l+=r[1],r[0]}function re(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function ne(e,t){var r=e;Zg(r,0);var n={FileIndex:[],FullPaths:[]};m(n,{root:t.root});for(var s=r.length-4;(80!=r[s]||75!=r[s+1]||5!=r[s+2]||6!=r[s+3])&&s>=0;)--s;r.l=s+4,r.l+=4;var i=r.read_shift(2);r.l+=6;var l=r.read_shift(4);for(r.l=l,s=0;s<i;++s){r.l+=20;var o=r.read_shift(4),c=r.read_shift(4),d=r.read_shift(2),u=r.read_shift(2),h=r.read_shift(2);r.l+=8;var p=r.read_shift(4),x=a(r.slice(r.l+d,r.l+d+u));r.l+=d+u+h;var f=r.l;r.l=p+4,se(r,o,c,n,x),r.l=f}return n}function se(e,t,r,n,s){e.l+=2;var i=e.read_shift(2),l=e.read_shift(2),o=function(e){var t=65535&e.read_shift(2),r=65535&e.read_shift(2),n=new Date,s=31&r,a=15&(r>>>=5);r>>>=4,n.setMilliseconds(0),n.setFullYear(r+1980),n.setMonth(a-1),n.setDate(s);var i=31&t,l=63&(t>>>=5);return t>>>=6,n.setHours(t),n.setMinutes(l),n.setSeconds(i<<1),n}(e);if(8257&i)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),d=e.read_shift(4),u=e.read_shift(2),m=e.read_shift(2),h="",p=0;p<u;++p)h+=String.fromCharCode(e[e.l++]);if(m){var f=a(e.slice(e.l,e.l+m));(f[21589]||{}).mt&&(o=f[21589].mt),((s||{})[21589]||{}).mt&&(o=s[21589].mt)}e.l+=m;var g=e.slice(e.l,e.l+c);switch(l){case 8:g=function(e,t){if(!x)return te(e,t);var r=new(0,x.InflateRaw),n=r._processChunk(e.slice(e.l),r._finishFlushFlag);return e.l+=r.bytesRead,n}(e,d);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+l)}var v=!1;8&i&&(134695760==e.read_shift(4)&&(e.read_shift(4),v=!0),c=e.read_shift(4),d=e.read_shift(4)),c!=t&&re(v,"Bad compressed size: "+t+" != "+c),d!=r&&re(v,"Bad uncompressed size: "+r+" != "+d),de(n,h,g,{unsafe:!0,mt:o})}var ae={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ie(e,t){if(e.ctype)return e.ctype;var r=e.name||"",n=r.match(/\.([^\.]+)$/);return n&&ae[n[1]]||t&&(n=(r=t).match(/[\.\\]([^\.\\])+$/))&&ae[n[1]]?ae[n[1]]:"application/octet-stream"}function le(e){for(var t=Jp(e),r=[],n=0;n<t.length;n+=76)r.push(t.slice(n,n+76));return r.join("\r\n")+"\r\n"}function oe(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)});"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var r=[],n=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),s=0;s<n.length;++s){var a=n[s];if(0!=a.length)for(var i=0;i<a.length;){var l=76,o=a.slice(i,i+l);"="==o.charAt(l-1)?l--:"="==o.charAt(l-2)?l-=2:"="==o.charAt(l-3)&&(l-=3),o=a.slice(i,i+l),(i+=l)<a.length&&(o+="="),r.push(o)}else r.push("")}return r.join("\r\n")}function ce(e,t,r){for(var n,s="",a="",i="",l=0;l<10;++l){var o=t[l];if(!o||o.match(/^\s*$/))break;var c=o.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":s=c[2].trim();break;case"content-type":i=c[2].trim();break;case"content-transfer-encoding":a=c[2].trim()}}switch(++l,a.toLowerCase()){case"base64":n=nx(Zp(t.slice(l).join("")));break;case"quoted-printable":n=function(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r];r<=e.length&&"="==n.charAt(n.length-1);)n=n.slice(0,n.length-1)+e[++r];t.push(n)}for(var s=0;s<t.length;++s)t[s]=t[s].replace(/[=][0-9A-Fa-f]{2}/g,function(e){return String.fromCharCode(parseInt(e.slice(1),16))});return nx(t.join("\r\n"))}(t.slice(l));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+a)}var d=de(e,s.slice(r.length),n,{unsafe:!0});i&&(d.ctype=i)}function de(e,t,r,s){var a=s&&s.unsafe;a||m(e);var i=!a&&rf.find(e,t);if(!i){var l=e.FullPaths[0];t.slice(0,l.length)==l?l=t:("/"!=l.slice(-1)&&(l+="/"),l=(l+t).replace("//","/")),i={name:n(t),type:2},e.FileIndex.push(i),e.FullPaths.push(l),a||rf.utils.cfb_gc(e)}return i.content=r,i.size=r?r.length:0,s&&(s.CLSID&&(i.clsid=s.CLSID),s.mt&&(i.mt=s.mt),s.ct&&(i.ct=s.ct)),i}return t.find=function(e,t){var r=e.FullPaths.map(function(e){return e.toUpperCase()}),n=r.map(function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]}),s=!1;47===t.charCodeAt(0)?(s=!0,t=r[0].slice(0,-1)+t):s=-1!==t.indexOf("/");var a=t.toUpperCase(),i=!0===s?r.indexOf(a):n.indexOf(a);if(-1!==i)return e.FileIndex[i];var l=!a.match(ox);for(a=a.replace(lx,""),l&&(a=a.replace(ox,"!")),i=0;i<r.length;++i){if((l?r[i].replace(ox,"!"):r[i]).replace(lx,"")==a)return e.FileIndex[i];if((l?n[i].replace(ox,"!"):n[i]).replace(lx,"")==a)return e.FileIndex[i]}return null},t.read=function(t,r){var n=r&&r.type;switch(n||Qp&&Buffer.isBuffer(t)&&(n="buffer"),n||"base64"){case"file":return function(t,r){return i(),l(e.readFileSync(t),r)}(t,r);case"base64":return l(nx(Zp(t)),r);case"binary":return l(nx(t),r)}return l(t,r)},t.parse=l,t.write=function(t,r){var n=p(t,r);switch(r&&r.type||"buffer"){case"file":return i(),e.writeFileSync(r.filename,n),n;case"binary":return"string"==typeof n?n:j(n);case"base64":return Jp("string"==typeof n?n:j(n));case"buffer":if(Qp)return Buffer.isBuffer(n)?n:ex(n);case"array":return"string"==typeof n?nx(n):n}return n},t.writeFile=function(t,r,n){i();var s=p(t,n);e.writeFileSync(r,s)},t.utils={cfb_new:function(e){var t={};return m(t,e),t},cfb_add:de,cfb_del:function(e,t){m(e);var r=rf.find(e,t);if(r)for(var n=0;n<e.FileIndex.length;++n)if(e.FileIndex[n]==r)return e.FileIndex.splice(n,1),e.FullPaths.splice(n,1),!0;return!1},cfb_mov:function(e,t,r){m(e);var s=rf.find(e,t);if(s)for(var a=0;a<e.FileIndex.length;++a)if(e.FileIndex[a]==s)return e.FileIndex[a].name=n(r),e.FullPaths[a]=r,!0;return!1},cfb_gc:function(e){h(e,!0)},ReadShift:qg,CheckField:Jg,prep_blob:Zg,bconcat:ix,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");x=e}catch(mn){console.error("cannot use native zlib: "+(mn.message||mn))}},_deflateRaw:K,_inflateRaw:te,consts:N},t}();let nf;function sf(e){return"string"===typeof e?sx(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function af(e,t,r){if("undefined"!==typeof nf&&nf.writeFileSync)return r?nf.writeFileSync(e,t,r):nf.writeFileSync(e,t);if("undefined"!==typeof Deno){if(r&&"string"==typeof t)switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=sx(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n="utf8"==r?Vf(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(n,e);if("undefined"!==typeof Blob){var s=new Blob([sf(n)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if("undefined"!==typeof saveAs)return saveAs(s,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var i=document.createElement("a");if(null!=i.download)return i.download=e,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=ax(t)),l.write(t),l.close(),t}catch(mn){if(!mn.message||!mn.message.match(/onstruct/))throw mn}throw new Error("cannot save file "+e)}function lf(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function of(e,t){for(var r=[],n=lf(e),s=0;s!==n.length;++s)null==r[e[n[s]][t]]&&(r[e[n[s]][t]]=n[s]);return r}function cf(e){for(var t=[],r=lf(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function df(e){for(var t=[],r=lf(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}var uf=new Date(1899,11,30,0,0,0);function mf(e,t){var r=e.getTime();return t&&(r-=1263168e5),(r-(uf.getTime()+6e4*(e.getTimezoneOffset()-uf.getTimezoneOffset())))/864e5}var hf=new Date,pf=uf.getTime()+6e4*(hf.getTimezoneOffset()-uf.getTimezoneOffset()),xf=hf.getTimezoneOffset();function ff(e){var t=new Date;return t.setTime(24*e*60*60*1e3+pf),t.getTimezoneOffset()!==xf&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-xf)),t}var gf=new Date("2017-02-19T19:06:09.000Z"),vf=isNaN(gf.getFullYear())?new Date("2/19/17"):gf,yf=2017==vf.getFullYear();function bf(e,t){var r=new Date(e);if(yf)return t>0?r.setTime(r.getTime()+60*r.getTimezoneOffset()*1e3):t<0&&r.setTime(r.getTime()-60*r.getTimezoneOffset()*1e3),r;if(e instanceof Date)return e;if(1917==vf.getFullYear()&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-60*a.getTimezoneOffset()*1e3)),a}function Nf(e,t){if(Qp&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return Vf(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return Vf(qp(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return Vf(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return Vf(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(e){return r[e]||e})}catch(mn){}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function jf(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=jf(e[r]));return t}function wf(e,t){for(var r="";r.length<t;)r+=e;return r}function Sf(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return isNaN(t=Number(n))?(n=n.replace(/[(](.*)[)]/,function(e,t){return r=-r,t}),isNaN(t=Number(n))?t:t/r):t/r}var Af=["january","february","march","april","may","june","july","august","september","october","november","december"];function Tf(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==Af.indexOf(i))return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&101!=n?t:e.match(/[^-0-9:,\/\\]/)?r:t}function Cf(e,t,r){if(e.FullPaths){var n;if("string"==typeof r)return n=Qp?ex(r):function(e){for(var t=[],r=0,n=e.length+250,s=tx(e.length+255),a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i<128)s[r++]=i;else if(i<2048)s[r++]=192|i>>6&31,s[r++]=128|63&i;else if(i>=55296&&i<57344){i=64+(1023&i);var l=1023&e.charCodeAt(++a);s[r++]=240|i>>8&7,s[r++]=128|i>>2&63,s[r++]=128|l>>6&15|(3&i)<<4,s[r++]=128|63&l}else s[r++]=224|i>>12&15,s[r++]=128|i>>6&63,s[r++]=128|63&i;r>n&&(t.push(s.slice(0,r)),r=0,s=tx(65535),n=65530)}return t.push(s.slice(0,r)),ix(t)}(r),rf.utils.cfb_add(e,t,n);rf.utils.cfb_add(e,t,r)}else e.file(t,r)}function Ef(){return rf.utils.cfb_new()}var Df='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';var kf={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Rf=cf(kf),_f=/[&<>'"]/g,If=/[\u0000-\u0008\u000b-\u001f]/g;function Pf(e){return(e+"").replace(_f,function(e){return Rf[e]}).replace(If,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Of(e){return Pf(e).replace(/ /g,"_x0020_")}var Lf=/[\u0000-\u001f]/g;function Ff(e){return(e+"").replace(_f,function(e){return Rf[e]}).replace(/\n/g,"<br/>").replace(Lf,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function Mf(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Uf(e){for(var t="",r=0,n=0,s=0,a=0,i=0,l=0;r<e.length;)(n=e.charCodeAt(r++))<128?t+=String.fromCharCode(n):(s=e.charCodeAt(r++),n>191&&n<224?(i=(31&n)<<6,i|=63&s,t+=String.fromCharCode(i)):(a=e.charCodeAt(r++),n<240?t+=String.fromCharCode((15&n)<<12|(63&s)<<6|63&a):(l=((7&n)<<18|(63&s)<<12|(63&a)<<6|63&(i=e.charCodeAt(r++)))-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(1023&l)))));return t}function Bf(e){var t,r,n,s=tx(2*e.length),a=1,i=0,l=0;for(r=0;r<e.length;r+=a)a=1,(n=e.charCodeAt(r))<128?t=n:n<224?(t=64*(31&n)+(63&e.charCodeAt(r+1)),a=2):n<240?(t=4096*(15&n)+64*(63&e.charCodeAt(r+1))+(63&e.charCodeAt(r+2)),a=3):(a=4,t=262144*(7&n)+4096*(63&e.charCodeAt(r+1))+64*(63&e.charCodeAt(r+2))+(63&e.charCodeAt(r+3)),l=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==l&&(s[i++]=255&l,s[i++]=l>>>8,l=0),s[i++]=t%256,s[i++]=t>>>8;return s.slice(0,i).toString("ucs2")}function Hf(e){return ex(e,"binary").toString("utf8")}var zf="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",Gf=Qp&&(Hf(zf)==Uf(zf)&&Hf||Bf(zf)==Uf(zf)&&Bf)||Uf,Vf=Qp?function(e){return ex(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(63&n)));break;case n>=55296&&n<57344:n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(63&s)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(63&n)))}return t.join("")},Wf=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),n=0;n<e.length;++n)r=r.replace(e[n][0],e[n][1]);return r}}();var qf=/(^\s|\s$|\n)/;function $f(e,t){return"<"+e+(t.match(qf)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Kf(e){return lf(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Xf(e,t,r){return"<"+e+(null!=r?Kf(r):"")+(null!=t?(t.match(qf)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Yf(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(mn){if(t)throw mn}return""}var Jf="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",Zf="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",Qf="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",eg="http://schemas.openxmlformats.org/package/2006/content-types",tg="http://schemas.openxmlformats.org/package/2006/relationships",rg="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",ng="http://purl.org/dc/elements/1.1/",sg="http://purl.org/dc/terms/",ag="http://purl.org/dc/dcmitype/",ig="http://schemas.openxmlformats.org/officeDocument/2006/relationships",lg="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",og="http://www.w3.org/2001/XMLSchema-instance",cg="http://www.w3.org/2001/XMLSchema",dg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ug="urn:schemas-microsoft-com:office:office",mg="urn:schemas-microsoft-com:office:excel",hg="urn:schemas-microsoft-com:office:spreadsheet",pg="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",xg="http://macVmlSchemaUri",fg="urn:schemas-microsoft-com:vml",gg="http://www.w3.org/TR/REC-html40";var vg=function(e){for(var t=[],r=0;r<e[0].length;++r)if(e[0][r])for(var n=0,s=e[0][r].length;n<s;n+=10240)t.push.apply(t,e[0][r].slice(n,n+10240));return t},yg=Qp?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(e){return Buffer.isBuffer(e)?e:ex(e)})):vg(e)}:vg,bg=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(Hg(e,s)));return n.join("").replace(lx,"")},Ng=Qp?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(lx,""):bg(e,t,r)}:bg,jg=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},wg=Qp?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):jg(e,t,r)}:jg,Sg=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(Bg(e,s)));return n.join("")},Ag=Qp?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):Sg(e,t,r)}:Sg,Tg=function(e,t){var r=Gg(e,t);return r>0?Ag(e,t+4,t+4+r-1):""},Cg=Tg,Eg=function(e,t){var r=Gg(e,t);return r>0?Ag(e,t+4,t+4+r-1):""},Dg=Eg,kg=function(e,t){var r=2*Gg(e,t);return r>0?Ag(e,t+4,t+4+r-1):""},Rg=kg,_g=function(e,t){var r=Gg(e,t);return r>0?Ng(e,t+4,t+4+r):""},Ig=_g,Pg=function(e,t){var r=Gg(e,t);return r>0?Ag(e,t+4,t+4+r):""},Og=Pg,Lg=function(e,t){return function(e,t){for(var r=1-2*(e[t+7]>>>7),n=((127&e[t+7])<<4)+(e[t+6]>>>4&15),s=15&e[t+6],a=5;a>=0;--a)s=256*s+e[t+a];return 2047==n?0==s?r*(1/0):NaN:(0==n?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}(e,t)},Fg=Lg,Mg=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function Ug(){Ng=function(e,t,r){return $p.utils.decode(1200,e.slice(t,r)).replace(lx,"")},Ag=function(e,t,r){return $p.utils.decode(65001,e.slice(t,r))},Cg=function(e,t){var r=Gg(e,t);return r>0?$p.utils.decode(Bp,e.slice(t+4,t+4+r-1)):""},Dg=function(e,t){var r=Gg(e,t);return r>0?$p.utils.decode(Up,e.slice(t+4,t+4+r-1)):""},Rg=function(e,t){var r=2*Gg(e,t);return r>0?$p.utils.decode(1200,e.slice(t+4,t+4+r-1)):""},Ig=function(e,t){var r=Gg(e,t);return r>0?$p.utils.decode(1200,e.slice(t+4,t+4+r)):""},Og=function(e,t){var r=Gg(e,t);return r>0?$p.utils.decode(65001,e.slice(t+4,t+4+r)):""}}Qp&&(Cg=function(e,t){if(!Buffer.isBuffer(e))return Tg(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},Dg=function(e,t){if(!Buffer.isBuffer(e))return Eg(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},Rg=function(e,t){if(!Buffer.isBuffer(e))return kg(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},Ig=function(e,t){if(!Buffer.isBuffer(e))return _g(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},Og=function(e,t){if(!Buffer.isBuffer(e))return Pg(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},Fg=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):Lg(e,t)},Mg=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof $p&&Ug();var Bg=function(e,t){return e[t]},Hg=function(e,t){return 256*e[t+1]+e[t]},zg=function(e,t){var r=256*e[t+1]+e[t];return r<32768?r:-1*(65535-r+1)},Gg=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Vg=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Wg=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function qg(e,t){var r,n,s,a,i,l,o="",c=[];switch(t){case"dbcs":if(l=this.l,Qp&&Buffer.isBuffer(this))o=this.slice(this.l,this.l+2*e).toString("utf16le");else for(i=0;i<e;++i)o+=String.fromCharCode(Hg(this,l)),l+=2;e*=2;break;case"utf8":o=Ag(this,this.l,this.l+e);break;case"utf16le":e*=2,o=Ng(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof $p)return qg.call(this,e,"dbcs");o=$p.utils.decode(Up,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":o=Cg(this,this.l),e=4+Gg(this,this.l);break;case"lpstr-cp":o=Dg(this,this.l),e=4+Gg(this,this.l);break;case"lpwstr":o=Rg(this,this.l),e=4+2*Gg(this,this.l);break;case"lpp4":e=4+Gg(this,this.l),o=Ig(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+Gg(this,this.l),o=Og(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,o="";0!==(s=Bg(this,this.l+e++));)c.push(Kp(s));o=c.join("");break;case"_wstr":for(e=0,o="";0!==(s=Hg(this,this.l+e));)c.push(Kp(s)),e+=2;e+=2,o=c.join("");break;case"dbcs-cont":for(o="",l=this.l,i=0;i<e;++i){if(this.lens&&-1!==this.lens.indexOf(l))return s=Bg(this,l),this.l=l+1,a=qg.call(this,e-i,s?"dbcs-cont":"sbcs-cont"),c.join("")+a;c.push(Kp(Hg(this,l))),l+=2}o=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof $p){o=$p.utils.decode(Up,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(o="",l=this.l,i=0;i!=e;++i){if(this.lens&&-1!==this.lens.indexOf(l))return s=Bg(this,l),this.l=l+1,a=qg.call(this,e-i,s?"dbcs-cont":"sbcs-cont"),c.join("")+a;c.push(Kp(Bg(this,l))),l+=1}o=c.join("");break;default:switch(e){case 1:return r=Bg(this,this.l),this.l++,r;case 2:return r=("i"===t?zg:Hg)(this,this.l),this.l+=2,r;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(r=(e>0?Vg:Wg)(this,this.l),this.l+=4,r):(n=Gg(this,this.l),this.l+=4,n);case 8:case-8:if("f"===t)return n=8==e?Fg(this,this.l):Fg([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:o=wg(this,this.l,e)}}return this.l+=e,o}var $g=function(e,t,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Kg=function(e,t,r){e[r]=255&t,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Xg=function(e,t,r){e[r]=255&t,e[r+1]=t>>>8&255};function Yg(e,t,r){var n=0,s=0;if("dbcs"===r){for(s=0;s!=t.length;++s)Xg(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if("sbcs"===r){if("undefined"!==typeof $p&&874==Bp)for(s=0;s!=t.length;++s){var a=$p.utils.encode(Bp,t.charAt(s));this[this.l+s]=a[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=255&t.charCodeAt(s);n=t.length}else{if("hex"===r){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}if("utf16le"===r){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var l=t.charCodeAt(s);this[this.l++]=255&l,this[this.l++]=l>>8}for(;this.l<i;)this[this.l++]=0;return this}switch(e){case 1:n=1,this[this.l]=255&t;break;case 2:n=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:n=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:n=4,$g(this,t,this.l);break;case 8:if(n=8,"f"===r){!function(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,a=0,i=n?-t:t;isFinite(i)?0==i?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(t)?26985:0);for(var l=0;l<=5;++l,a/=256)e[r+l]=255&a;e[r+6]=(15&s)<<4|15&a,e[r+7]=s>>4|n}(this,t,this.l);break}case 16:break;case-4:n=4,Kg(this,t,this.l)}}return this.l+=n,this}function Jg(e,t){var r=wg(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Zg(e,t){e.l=t,e.read_shift=qg,e.chk=Jg,e.write_shift=Yg}function Qg(e,t){e.l+=t}function ev(e){var t=tx(e);return Zg(t,0),t}function tv(){var e=[],t=Qp?256:2048,r=function(e){var t=ev(e);return Zg(t,0),t},n=r(t),s=function(){n&&(n.length>n.l&&((n=n.slice(0,n.l)).l=n.length),n.length>0&&e.push(n),n=null)},a=function(e){return n&&e<n.length-n.l?n:(s(),n=r(Math.max(e+1,t)))};return{next:a,push:function(e){s(),null==(n=e).l&&(n.l=n.length),a(t)},end:function(){return s(),ix(e)},_bufs:e}}function rv(e,t,r,n){var s,a=+t;if(!isNaN(a)){n||(n=gj[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,128+(127&a)),i.write_shift(1,a>>7));for(var l=0;4!=l;++l){if(!(n>=128)){i.write_shift(1,n);break}i.write_shift(1,128+(127&n)),n>>=7}n>0&&Mg(r)&&e.push(r)}}function nv(e,t,r){var n=jf(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function sv(e,t,r){var n=jf(e);return n.s=nv(n.s,t.s,r),n.e=nv(n.e,t.s,r),n}function av(e,t){if(e.cRel&&e.c<0)for(e=jf(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=jf(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=mv(e);return e.cRel||null==e.cRel||(r=r.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(r=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(r)),r}function iv(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?av(e.s,t.biff)+":"+av(e.e,t.biff):(e.s.rRel?"":"$")+ov(e.s.r)+":"+(e.e.rRel?"":"$")+ov(e.e.r):(e.s.cRel?"":"$")+dv(e.s.c)+":"+(e.e.cRel?"":"$")+dv(e.e.c)}function lv(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function ov(e){return""+(e+1)}function cv(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function dv(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function uv(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function mv(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function hv(e){var t=e.indexOf(":");return-1==t?{s:uv(e),e:uv(e)}:{s:uv(e.slice(0,t)),e:uv(e.slice(t+1))}}function pv(e,t){return"undefined"===typeof t||"number"===typeof t?pv(e.s,e.e):("string"!==typeof e&&(e=mv(e)),"string"!==typeof t&&(t=mv(t)),e==t?e:e+":"+t)}function xv(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=e.length;for(r=0;n<a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===a||10!=s)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function fv(e,t){var r="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=Yx(e.z,r?mf(t):t)}catch(mn){}try{return e.w=Yx((e.XF||{}).numFmtId||(r?14:0),r?mf(t):t)}catch(mn){return""+t}}function gv(e,t,r){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),"e"==e.t?Zv[e.v]||e.v:fv(e,void 0==t?e.v:t))}function vv(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function yv(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense;var a=e||(s?[]:{}),i=0,l=0;if(a&&null!=n.origin){if("number"==typeof n.origin)i=n.origin;else{var o="string"==typeof n.origin?uv(n.origin):n.origin;i=o.r,l=o.c}a["!ref"]||(a["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=xv(a["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),-1==i&&(c.e.r=i=d.e.r+1)}for(var u=0;u!=t.length;++u)if(t[u]){if(!Array.isArray(t[u]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[u].length;++m)if("undefined"!==typeof t[u][m]){var h={v:t[u][m]},p=i+u,x=l+m;if(c.s.r>p&&(c.s.r=p),c.s.c>x&&(c.s.c=x),c.e.r<p&&(c.e.r=p),c.e.c<x&&(c.e.c=x),!t[u][m]||"object"!==typeof t[u][m]||Array.isArray(t[u][m])||t[u][m]instanceof Date)if(Array.isArray(h.v)&&(h.f=t[u][m][1],h.v=h.v[0]),null===h.v)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else{if(!n.sheetStubs)continue;h.t="z"}else"number"===typeof h.v?h.t="n":"boolean"===typeof h.v?h.t="b":h.v instanceof Date?(h.z=n.dateNF||vx[14],n.cellDates?(h.t="d",h.w=Yx(h.z,mf(h.v))):(h.t="n",h.v=mf(h.v),h.w=Yx(h.z,h.v))):h.t="s";else h=t[u][m];if(s)a[p]||(a[p]=[]),a[p][x]&&a[p][x].z&&(h.z=a[p][x].z),a[p][x]=h;else{var f=mv({c:x,r:p});a[f]&&a[f].z&&(h.z=a[f].z),a[f]=h}}}return c.s.c<1e7&&(a["!ref"]=pv(c)),a}function bv(e,t){return yv(null,e,t)}function Nv(e,t){return t||(t=ev(4)),t.write_shift(4,e),t}function jv(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function wv(e,t){var r=!1;return null==t&&(r=!0,t=ev(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Sv(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Av(e,t){var r=e.l,n=e.read_shift(1),s=jv(e),a=[],i={t:s,h:s};if(0!==(1&n)){for(var l=e.read_shift(4),o=0;o!=l;++o)a.push(Sv(e));i.r=a}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}var Tv=Av;function Cv(e,t){var r=!1;return null==t&&(r=!0,t=ev(23+4*e.t.length)),t.write_shift(1,1),wv(e.t,t),t.write_shift(4,1),function(e,t){t||(t=ev(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),r?t.slice(0,t.l):t}function Ev(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Dv(e,t){return null==t&&(t=ev(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function kv(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Rv(e,t){return null==t&&(t=ev(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var _v=jv,Iv=wv;function Pv(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function Ov(e,t){var r=!1;return null==t&&(r=!0,t=ev(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Lv=jv,Fv=Pv,Mv=Ov;function Uv(e){var t=e.slice(e.l,e.l+4),r=1&t[0],n=2&t[0];e.l+=4;var s=0===n?Fg([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):Vg(t,0)>>2;return r?s/100:s}function Bv(e,t){null==t&&(t=ev(4));var r=0,n=0,s=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?n=1:s==(0|s)&&s>=-(1<<29)&&s<1<<29&&(n=1,r=1),!n)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((r?s:e)<<2)+(r+2))}function Hv(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var zv=Hv,Gv=function(e,t){return t||(t=ev(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function Vv(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Wv(e,t){return(t||ev(8)).write_shift(8,e,"f")}function qv(e,t){if(t||(t=ev(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),e.rgb&&null==e.theme){var n=e.rgb||"FFFFFF";"number"==typeof n&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var $v=80,Kv={1:{n:"CodePage",t:2},2:{n:"Category",t:$v},3:{n:"PresentationFormat",t:$v},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:$v},15:{n:"Company",t:$v},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:$v},27:{n:"ContentStatus",t:$v},28:{n:"Language",t:$v},29:{n:"Version",t:$v},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},Xv={1:{n:"CodePage",t:2},2:{n:"Title",t:$v},3:{n:"Subject",t:$v},4:{n:"Author",t:$v},5:{n:"Keywords",t:$v},6:{n:"Comments",t:$v},7:{n:"Template",t:$v},8:{n:"LastAuthor",t:$v},9:{n:"RevNumber",t:$v},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:$v},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function Yv(e){return e.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var Jv=jf(Yv([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),Zv={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Qv={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},ey={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function ty(e,t){var r,n=function(e){for(var t=[],r=lf(e),n=0;n!==r.length;++n)null==t[e[r[n]]]&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}(Qv),s=[];s[s.length]=Df,s[s.length]=Xf("Types",null,{xmlns:eg,"xmlns:xsd":cg,"xmlns:xsi":og}),s=s.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(e){return Xf("Default",null,{Extension:e[0],ContentType:e[1]})}));var a=function(n){e[n]&&e[n].length>0&&(r=e[n][0],s[s.length]=Xf("Override",null,{PartName:("/"==r[0]?"":"/")+r,ContentType:ey[n][t.bookType]||ey[n].xlsx}))},i=function(r){(e[r]||[]).forEach(function(e){s[s.length]=Xf("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:ey[r][t.bookType]||ey[r].xlsx})})},l=function(t){(e[t]||[]).forEach(function(e){s[s.length]=Xf("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:n[t][0]})})};return a("workbooks"),i("sheets"),i("charts"),l("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),i("metadata"),l("people"),s.length>2&&(s[s.length]="</Types>",s[1]=s[1].replace("/>",">")),s.join("")}var ry={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function ny(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function sy(e){var t=[Df,Xf("Relationships",null,{xmlns:tg})];return lf(e["!id"]).forEach(function(r){t[t.length]=Xf("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ay(e,t,r,n,s,a){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,a?s.TargetMode=a:[ry.HLINK,ry.XPATH,ry.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}function iy(e,t,r){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function ly(e,t){return['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+'"/>\n',"  </rdf:Description>\n"].join("")}function oy(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Mp.version+"</meta:generator></office:meta></office:document-meta>"}var cy=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function dy(e,t,r,n,s){null==s[e]&&null!=t&&""!==t&&(s[e]=t,t=Pf(t),n[n.length]=r?Xf(e,t,r):$f(e,t))}function uy(e,t){var r=t||{},n=[Df,Xf("cp:coreProperties",null,{"xmlns:cp":Jf,"xmlns:dc":ng,"xmlns:dcterms":sg,"xmlns:dcmitype":ag,"xmlns:xsi":og})],s={};if(!e&&!r.Props)return n.join("");e&&(null!=e.CreatedDate&&dy("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:Yf(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),null!=e.ModifiedDate&&dy("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:Yf(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=cy.length;++a){var i=cy[a],l=r.Props&&null!=r.Props[i[1]]?r.Props[i[1]]:e?e[i[1]]:null;!0===l?l="1":!1===l?l="0":"number"==typeof l&&(l=String(l)),null!=l&&dy(i[0],l,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var my=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],hy=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function py(e){var t=[],r=Xf;return e||(e={}),e.Application="SheetJS",t[t.length]=Df,t[t.length]=Xf("Properties",null,{xmlns:Qf,"xmlns:vt":lg}),my.forEach(function(n){if(void 0!==e[n[1]]){var s;switch(n[2]){case"string":s=Pf(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false"}void 0!==s&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(e){return"<vt:lpstr>"+Pf(e)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function xy(e){var t=[Df,Xf("Properties",null,{xmlns:Zf,"xmlns:vt":lg})];if(!e)return t.join("");var r=1;return lf(e).forEach(function(n){++r,t[t.length]=Xf("property",function(e,t){switch(typeof e){case"string":var r=Xf("vt:lpwstr",Pf(e));return t&&(r=r.replace(/&quot;/g,"_x0022_")),r;case"number":return Xf((0|e)==e?"vt:i4":"vt:r8",Pf(String(e)));case"boolean":return Xf("vt:bool",e?"true":"false")}if(e instanceof Date)return Xf("vt:filetime",Yf(e));throw new Error("Unable to serialize "+e)}(e[n],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Pf(n)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var fy={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function gy(e,t){var r=ev(4),n=ev(4);switch(r.write_shift(4,80==e?31:e),e){case 3:n.write_shift(-4,t);break;case 5:(n=ev(8)).write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,r=t%Math.pow(2,32),n=(t-r)/Math.pow(2,32);n*=1e7;var s=(r*=1e7)/Math.pow(2,32)|0;s>0&&(r%=Math.pow(2,32),n+=s);var a=ev(8);return a.write_shift(4,r),a.write_shift(4,n),a}(t);break;case 31:case 80:for((n=ev(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return ix([r,n])}var vy=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function yy(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function by(e,t,r){var n=ev(8),s=[],a=[],i=8,l=0,o=ev(8),c=ev(8);if(o.write_shift(4,2),o.write_shift(4,1200),c.write_shift(4,1),a.push(o),s.push(c),i+=8+o.length,!t){(c=ev(8)).write_shift(4,0),s.unshift(c);var d=[ev(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var u=e[l][0];for((o=ev(8+2*(u.length+1)+(u.length%2?0:2))).write_shift(4,l+2),o.write_shift(4,u.length+1),o.write_shift(0,u,"dbcs");o.l!=o.length;)o.write_shift(1,0);d.push(o)}o=ix(d),a.unshift(o),i+=8+o.length}for(l=0;l<e.length;++l)if((!t||t[e[l][0]])&&!(vy.indexOf(e[l][0])>-1||hy.indexOf(e[l][0])>-1)&&null!=e[l][1]){var m=e[l][1],h=0;if(t){var p=r[h=+t[e[l][0]]];if("version"==p.p&&"string"==typeof m){var x=m.split(".");m=(+x[0]<<16)+(+x[1]||0)}o=gy(p.t,m)}else{var f=yy(m);-1==f&&(f=31,m=String(m)),o=gy(f,m)}a.push(o),(c=ev(8)).write_shift(4,t?h:2+l),s.push(c),i+=8+o.length}var g=8*(a.length+1);for(l=0;l<a.length;++l)s[l].write_shift(4,g),g+=a[l].length;return n.write_shift(4,i),n.write_shift(4,a.length),ix([n].concat(s).concat(a))}function Ny(e,t,r,n,s,a){var i=ev(s?68:48),l=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,rf.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,s?68:48);var o=by(e,r,n);if(l.push(o),s){var c=by(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+o.length),l.push(c)}return ix(l)}function jy(e,t){return 1===e.read_shift(t)}function wy(e,t){return t||(t=ev(2)),t.write_shift(2,+!!e),t}function Sy(e){return e.read_shift(2,"u")}function Ay(e,t){return t||(t=ev(2)),t.write_shift(2,e),t}function Ty(e,t,r){return r||(r=ev(2)),r.write_shift(1,"e"==t?+e:+!!e),r.write_shift(1,"e"==t?1:0),r}function Cy(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont",a=Up;(r&&r.biff>=8&&(Up=1200),r&&8!=r.biff)?12==r.biff&&(s="wstr"):e.read_shift(1)&&(s="dbcs-cont");r.biff>=2&&r.biff<=5&&(s="cpstr");var i=n?e.read_shift(n,s):"";return Up=a,i}function Ey(e){var t=e.t||"",r=ev(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=ev(2*t.length);return n.write_shift(2*t.length,t,"utf16le"),ix([r,n])}function Dy(e,t,r){if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function ky(e,t,r){var n=e.read_shift(r&&2==r.biff?1:2);return 0===n?(e.l++,""):Dy(e,n,r)}function Ry(e,t,r){if(r.biff>5)return ky(e,0,r);var n=e.read_shift(1);return 0===n?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function _y(e,t,r){return r||(r=ev(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Iy(e,t){t||(t=ev(6+2*e.length)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Py(e){var t=ev(512),r=0,n=e.Target;"file://"==n.slice(0,7)&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3}t.write_shift(4,2),t.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(28==a)Iy(n=n.slice(1),t);else if(2&a){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var l=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),8&a&&Iy(s>-1?n.slice(s+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var o=0;"../"==n.slice(3*o,3*o+3)||"..\\"==n.slice(3*o,3*o+3);)++o;for(t.write_shift(2,o),t.write_shift(4,n.length-3*o+1),r=0;r<n.length-3*o;++r)t.write_shift(1,255&n.charCodeAt(r+3*o));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Oy(e,t,r,n){return n||(n=ev(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function Ly(e,t,r){var n=r.biff>8?4:2;return[e.read_shift(n),e.read_shift(n,"i"),e.read_shift(n,"i")]}function Fy(e){var t=e.read_shift(2),r=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:r}}}function My(e,t){return t||(t=ev(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Uy(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":case"xla":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;default:throw new Error("unsupported BIFF version")}var a=ev(s);return a.write_shift(2,n),a.write_shift(2,t),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function By(e,t){var r=!t||t.biff>=8?2:1,n=ev(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function Hy(e,t,r,n){var s=r&&5==r.biff;n||(n=ev(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return null==a.l&&(a.l=a.length),a}function zy(e,t,r,n){var s=r&&5==r.biff;n||(n=ev(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function Gy(e,t,r){if(r.biff<8)return function(e,t,r){3==e[e.l+1]&&e[e.l]++;var n=Cy(e,0,r);return 3==n.charCodeAt(0)?n.slice(1):n}(e,0,r);for(var n=[],s=e.l+t,a=e.read_shift(r.biff>8?4:2);0!==a--;)n.push(Ly(e,r.biff,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function Vy(e){var t=ev(24),r=uv(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return ix([t,Py(e[1])])}function Wy(e){var t=e[1].Tooltip,r=ev(10+2*(t.length+1));r.write_shift(2,2048);var n=uv(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function qy(e,t,r){if(!r.cellStyles)return Qg(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),a=e.read_shift(n),i=e.read_shift(n),l=e.read_shift(n),o=e.read_shift(2);2==n&&(e.l+=2);var c={s:s,e:a,w:i,ixfe:l,flags:o};return(r.biff>=5||!r.biff)&&(c.level=o>>8&7),c}var $y=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=cf({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(t,r){var n=r||{};n.dateNF||(n.dateNF="yyyymmdd");var s=bv(function(t,r){var n=[],s=tx(1);switch(r.type){case"base64":s=nx(Zp(t));break;case"binary":s=nx(t);break;case"buffer":case"array":s=t}Zg(s,0);var a=s.read_shift(1),i=!!(136&a),l=!1,o=!1;switch(a){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:l=!0,i=!0;break;case 140:o=!0;break;default:throw new Error("DBF Unsupported Version: "+a.toString(16))}var c=0,d=521;2==a&&(c=s.read_shift(2)),s.l+=3,2!=a&&(c=s.read_shift(4)),c>1048576&&(c=1e6),2!=a&&(d=s.read_shift(2));var u=s.read_shift(2),m=r.codepage||1252;2!=a&&(s.l+=16,s.read_shift(1),0!==s[s.l]&&(m=e[s[s.l]]),s.l+=1,s.l+=2),o&&(s.l+=36);for(var h=[],p={},x=Math.min(s.length,2==a?521:d-10-(l?264:0)),f=o?32:11;s.l<x&&13!=s[s.l];)switch((p={}).name=$p.utils.decode(m,s.slice(s.l,s.l+f)).replace(/[\u0000\r\n].*$/g,""),s.l+=f,p.type=String.fromCharCode(s.read_shift(1)),2==a||o||(p.offset=s.read_shift(4)),p.len=s.read_shift(1),2==a&&(p.offset=s.read_shift(2)),p.dec=s.read_shift(1),p.name.length&&h.push(p),2!=a&&(s.l+=o?13:14),p.type){case"B":l&&8==p.len||!r.WTF||console.log("Skipping "+p.name+":"+p.type);break;case"G":case"P":r.WTF&&console.log("Skipping "+p.name+":"+p.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+p.type)}if(13!==s[s.l]&&(s.l=d-1),13!==s.read_shift(1))throw new Error("DBF Terminator not found "+s.l+" "+s[s.l]);s.l=d;var g=0,v=0;for(n[0]=[],v=0;v!=h.length;++v)n[0][v]=h[v].name;for(;c-- >0;)if(42!==s[s.l])for(++s.l,n[++g]=[],v=0,v=0;v!=h.length;++v){var y=s.slice(s.l,s.l+h[v].len);s.l+=h[v].len,Zg(y,0);var b=$p.utils.decode(m,y);switch(h[v].type){case"C":b.trim().length&&(n[g][v]=b.replace(/\s+$/,""));break;case"D":8===b.length?n[g][v]=new Date(+b.slice(0,4),+b.slice(4,6)-1,+b.slice(6,8)):n[g][v]=b;break;case"F":n[g][v]=parseFloat(b.trim());break;case"+":case"I":n[g][v]=o?2147483648^y.read_shift(-4,"i"):y.read_shift(4,"i");break;case"L":switch(b.trim().toUpperCase()){case"Y":case"T":n[g][v]=!0;break;case"N":case"F":n[g][v]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+b+"|")}break;case"M":if(!i)throw new Error("DBF Unexpected MEMO for type "+a.toString(16));n[g][v]="##MEMO##"+(o?parseInt(b.trim(),10):y.read_shift(4));break;case"N":(b=b.replace(/\u0000/g,"").trim())&&"."!=b&&(n[g][v]=+b||0);break;case"@":n[g][v]=new Date(y.read_shift(-8,"f")-621356832e5);break;case"T":n[g][v]=new Date(864e5*(y.read_shift(4)-2440588)+y.read_shift(4));break;case"Y":n[g][v]=y.read_shift(4,"i")/1e4+y.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":n[g][v]=-y.read_shift(-8,"f");break;case"B":if(l&&8==h[v].len){n[g][v]=y.read_shift(8,"f");break}case"G":case"P":y.l+=h[v].len;break;case"0":if("_NullFlags"===h[v].name)break;default:throw new Error("DBF Unsupported data type "+h[v].type)}}else s.l+=u;if(2!=a&&s.l<s.length&&26!=s[s.l++])throw new Error("DBF EOF Marker missing "+(s.l-1)+" of "+s.length+" "+s[s.l-1].toString(16));return r&&r.sheetRows&&(n=n.slice(0,r.sheetRows)),r.DBF=h,n}(t,n),n);return s["!cols"]=n.DBF.map(function(e){return{wch:e.len,DBF:e}}),delete n.DBF,s}var n={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return vv(r(e,t),t)}catch(mn){if(t&&t.WTF)throw mn}return{SheetNames:[],Sheets:{}}},to_sheet:r,from_sheet:function(e,r){var s=r||{};if(+s.codepage>=0&&Vp(+s.codepage),"string"==s.type)throw new Error("Cannot write DBF to JS string");var a=tv(),i=xw(e,{header:1,raw:!0,cellDates:!0}),l=i[0],o=i.slice(1),c=e["!cols"]||[],d=0,u=0,m=0,h=1;for(d=0;d<l.length;++d)if(((c[d]||{}).DBF||{}).name)l[d]=c[d].DBF.name,++m;else if(null!=l[d]){if(++m,"number"===typeof l[d]&&(l[d]=l[d].toString(10)),"string"!==typeof l[d])throw new Error("DBF Invalid column name "+l[d]+" |"+typeof l[d]+"|");if(l.indexOf(l[d])!==d)for(u=0;u<1024;++u)if(-1==l.indexOf(l[d]+"_"+u)){l[d]+="_"+u;break}}var p=xv(e["!ref"]),x=[],f=[],g=[];for(d=0;d<=p.e.c-p.s.c;++d){var v="",y="",b=0,N=[];for(u=0;u<o.length;++u)null!=o[u][d]&&N.push(o[u][d]);if(0!=N.length&&null!=l[d]){for(u=0;u<N.length;++u){switch(typeof N[u]){case"number":y="B";break;case"string":default:y="C";break;case"boolean":y="L";break;case"object":y=N[u]instanceof Date?"D":"C"}b=Math.max(b,String(N[u]).length),v=v&&v!=y?"C":y}b>250&&(b=250),"C"==(y=((c[d]||{}).DBF||{}).type)&&c[d].DBF.len>b&&(b=c[d].DBF.len),"B"==v&&"N"==y&&(v="N",g[d]=c[d].DBF.dec,b=c[d].DBF.len),f[d]="C"==v||"N"==y?b:n[v]||0,h+=f[d],x[d]=v}else x[d]="?"}var j=a.next(32);for(j.write_shift(4,318902576),j.write_shift(4,o.length),j.write_shift(2,296+32*m),j.write_shift(2,h),d=0;d<4;++d)j.write_shift(4,0);for(j.write_shift(4,(+t[Bp]||3)<<8),d=0,u=0;d<l.length;++d)if(null!=l[d]){var w=a.next(32),S=(l[d].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);w.write_shift(1,S,"sbcs"),w.write_shift(1,"?"==x[d]?"C":x[d],"sbcs"),w.write_shift(4,u),w.write_shift(1,f[d]||n[x[d]]||0),w.write_shift(1,g[d]||0),w.write_shift(1,2),w.write_shift(4,0),w.write_shift(1,0),w.write_shift(4,0),w.write_shift(4,0),u+=f[d]||n[x[d]]||0}var A=a.next(264);for(A.write_shift(4,13),d=0;d<65;++d)A.write_shift(4,0);for(d=0;d<o.length;++d){var T=a.next(h);for(T.write_shift(1,0),u=0;u<l.length;++u)if(null!=l[u])switch(x[u]){case"L":T.write_shift(1,null==o[d][u]?63:o[d][u]?84:70);break;case"B":T.write_shift(8,o[d][u]||0,"f");break;case"N":var C="0";for("number"==typeof o[d][u]&&(C=o[d][u].toFixed(g[u]||0)),m=0;m<f[u]-C.length;++m)T.write_shift(1,32);T.write_shift(1,C,"sbcs");break;case"D":o[d][u]?(T.write_shift(4,("0000"+o[d][u].getFullYear()).slice(-4),"sbcs"),T.write_shift(2,("00"+(o[d][u].getMonth()+1)).slice(-2),"sbcs"),T.write_shift(2,("00"+o[d][u].getDate()).slice(-2),"sbcs")):T.write_shift(8,"00000000","sbcs");break;case"C":var E=String(null!=o[d][u]?o[d][u]:"").slice(0,f[u]);for(T.write_shift(1,E,"sbcs"),m=0;m<f[u]-E.length;++m)T.write_shift(1,32)}}return a.next(1).write_shift(1,26),a.end()}}}(),Ky=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+lf(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(t,r){var n=e[r];return"number"==typeof n?Xp(n):n},n=function(e,t,r){var n=t.charCodeAt(0)-32<<4|r.charCodeAt(0)-48;return 59==n?e:Xp(n)};function s(e,s){var a,i=e.split(/[\n\r]+/),l=-1,o=-1,c=0,d=0,u=[],m=[],h=null,p={},x=[],f=[],g=[],v=0;for(+s.codepage>=0&&Vp(+s.codepage);c!==i.length;++c){v=0;var y,b=i[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),N=b.replace(/;;/g,"\0").split(";").map(function(e){return e.replace(/\u0000/g,";")}),j=N[0];if(b.length>0)switch(j){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==N[1].charAt(0)&&m.push(b.slice(3).replace(/;;/g,";"));break;case"C":var w=!1,S=!1,A=!1,T=!1,C=-1,E=-1;for(d=1;d<N.length;++d)switch(N[d].charAt(0)){case"A":case"G":break;case"X":o=parseInt(N[d].slice(1))-1,S=!0;break;case"Y":for(l=parseInt(N[d].slice(1))-1,S||(o=0),a=u.length;a<=l;++a)u[a]=[];break;case"K":'"'===(y=N[d].slice(1)).charAt(0)?y=y.slice(1,y.length-1):"TRUE"===y?y=!0:"FALSE"===y?y=!1:isNaN(Sf(y))?isNaN(Tf(y).getDate())||(y=bf(y)):(y=Sf(y),null!==h&&qx(h)&&(y=ff(y))),"undefined"!==typeof $p&&"string"==typeof y&&"string"!=(s||{}).type&&(s||{}).codepage&&(y=$p.utils.decode(s.codepage,y)),w=!0;break;case"E":T=!0;var D=Ub(N[d].slice(1),{r:l,c:o});u[l][o]=[u[l][o],D];break;case"S":A=!0,u[l][o]=[u[l][o],"S5S"];break;case"R":C=parseInt(N[d].slice(1))-1;break;case"C":E=parseInt(N[d].slice(1))-1;break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+b)}if(w&&(u[l][o]&&2==u[l][o].length?u[l][o][0]=y:u[l][o]=y,h=null),A){if(T)throw new Error("SYLK shared formula cannot have own formula");var k=C>-1&&u[C][E];if(!k||!k[1])throw new Error("SYLK shared formula cannot find base");u[l][o][1]=zb(k[1],{r:l-C,c:o-E})}break;case"F":var R=0;for(d=1;d<N.length;++d)switch(N[d].charAt(0)){case"X":o=parseInt(N[d].slice(1))-1,++R;break;case"Y":for(l=parseInt(N[d].slice(1))-1,a=u.length;a<=l;++a)u[a]=[];break;case"M":v=parseInt(N[d].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":h=m[parseInt(N[d].slice(1))];break;case"W":for(g=N[d].slice(1).split(" "),a=parseInt(g[0],10);a<=parseInt(g[1],10);++a)v=parseInt(g[2],10),f[a-1]=0===v?{hidden:!0}:{wch:v},ub(f[a-1]);break;case"C":f[o=parseInt(N[d].slice(1))-1]||(f[o]={});break;case"R":x[l=parseInt(N[d].slice(1))-1]||(x[l]={}),v>0?(x[l].hpt=v,x[l].hpx=pb(v)):0===v&&(x[l].hidden=!0);break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+b)}R<1&&(h=null);break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+b)}}return x.length>0&&(p["!rows"]=x),f.length>0&&(p["!cols"]=f),s&&s.sheetRows&&(u=u.slice(0,s.sheetRows)),[u,p]}function a(e,t){var r=function(e,t){switch(t.type){case"base64":return s(Zp(e),t);case"binary":return s(e,t);case"buffer":return s(Qp&&Buffer.isBuffer(e)?e.toString("binary"):ax(e),t);case"array":return s(Nf(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),n=r[0],a=r[1],i=bv(n,t);return lf(a).forEach(function(e){i[e]=a[e]}),i}function i(e,t,r,n){var s="C;Y"+(r+1)+";X"+(n+1)+";K";switch(e.t){case"n":s+=e.v||0,e.f&&!e.F&&(s+=";E"+Hb(e.f,{r:r,c:n}));break;case"b":s+=e.v?"TRUE":"FALSE";break;case"e":s+=e.w||e.v;break;case"d":s+='"'+(e.w||e.v)+'"';break;case"s":s+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return s}return e["|"]=254,{to_workbook:function(e,t){return vv(a(e,t),t)},to_sheet:a,from_sheet:function(e,t){var r,n,s=["ID;PWXL;N;E"],a=[],l=xv(e["!ref"]),o=Array.isArray(e),c="\r\n";s.push("P;PGeneral"),s.push("F;P0;DG0G8;M255"),e["!cols"]&&(n=s,e["!cols"].forEach(function(e,t){var r="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?r+="0":("number"!=typeof e.width||e.wpx||(e.wpx=ob(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=cb(e.wpx)),"number"==typeof e.wch&&(r+=Math.round(e.wch)))," "!=r.charAt(r.length-1)&&n.push(r)})),e["!rows"]&&function(e,t){t.forEach(function(t,r){var n="F;";t.hidden?n+="M0;":t.hpt?n+="M"+20*t.hpt+";":t.hpx&&(n+="M"+20*hb(t.hpx)+";"),n.length>2&&e.push(n+"R"+(r+1))})}(s,e["!rows"]),s.push("B;Y"+(l.e.r-l.s.r+1)+";X"+(l.e.c-l.s.c+1)+";D"+[l.s.c,l.s.r,l.e.c,l.e.r].join(" "));for(var d=l.s.r;d<=l.e.r;++d)for(var u=l.s.c;u<=l.e.c;++u){var m=mv({r:d,c:u});(r=o?(e[d]||[])[u]:e[m])&&(null!=r.v||r.f&&!r.F)&&a.push(i(r,0,d,u))}return s.join(c)+c+a.join(c)+c+"E"+c}}}(),Xy=function(){function e(e,t){for(var r=e.split("\n"),n=-1,s=-1,a=0,i=[];a!==r.length;++a)if("BOT"!==r[a].trim()){if(!(n<0)){for(var l=r[a].trim().split(","),o=l[0],c=l[1],d=r[++a]||"";1&(d.match(/["]/g)||[]).length&&a<r.length-1;)d+="\n"+r[++a];switch(d=d.trim(),+o){case-1:if("BOT"===d){i[++n]=[],s=0;continue}if("EOD"!==d)throw new Error("Unrecognized DIF special command "+d);break;case 0:"TRUE"===d?i[n][s]=!0:"FALSE"===d?i[n][s]=!1:isNaN(Sf(c))?isNaN(Tf(c).getDate())?i[n][s]=c:i[n][s]=bf(c):i[n][s]=Sf(c),++s;break;case 1:(d=(d=d.slice(1,d.length-1)).replace(/""/g,'"'))&&d.match(/^=".*"$/)&&(d=d.slice(2,-1)),i[n][s++]=""!==d?d:null}if("EOD"===d)break}}else i[++n]=[],s=0;return t&&t.sheetRows&&(i=i.slice(0,t.sheetRows)),i}function t(t,r){return bv(function(t,r){switch(r.type){case"base64":return e(Zp(t),r);case"binary":return e(t,r);case"buffer":return e(Qp&&Buffer.isBuffer(t)?t.toString("binary"):ax(t),r);case"array":return e(Nf(t),r)}throw new Error("Unrecognized type "+r.type)}(t,r),r)}var r=function(){var e=function(e,t,r,n,s){e.push(t),e.push(r+","+n),e.push('"'+s.replace(/"/g,'""')+'"')},t=function(e,t,r,n){e.push(t+","+r),e.push(1==t?'"'+n.replace(/"/g,'""')+'"':n)};return function(r){var n,s=[],a=xv(r["!ref"]),i=Array.isArray(r);e(s,"TABLE",0,1,"sheetjs"),e(s,"VECTORS",0,a.e.r-a.s.r+1,""),e(s,"TUPLES",0,a.e.c-a.s.c+1,""),e(s,"DATA",0,0,"");for(var l=a.s.r;l<=a.e.r;++l){t(s,-1,0,"BOT");for(var o=a.s.c;o<=a.e.c;++o){var c=mv({r:l,c:o});if(n=i?(r[l]||[])[o]:r[c])switch(n.t){case"n":var d=n.w;d||null==n.v||(d=n.v),null==d?n.f&&!n.F?t(s,1,0,"="+n.f):t(s,1,0,""):t(s,0,d,"V");break;case"b":t(s,0,n.v?1:0,n.v?"TRUE":"FALSE");break;case"s":t(s,1,0,isNaN(n.v)?n.v:'="'+n.v+'"');break;case"d":n.w||(n.w=Yx(n.z||vx[14],mf(bf(n.v)))),t(s,0,n.w,"V");break;default:t(s,1,0,"")}else t(s,1,0,"")}}t(s,-1,0,"EOD");return s.join("\r\n")}}();return{to_workbook:function(e,r){return vv(t(e,r),r)},to_sheet:t,from_sheet:r}}(),Yy=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(t,r){return bv(function(t,r){for(var n=t.split("\n"),s=-1,a=-1,i=0,l=[];i!==n.length;++i){var o=n[i].trim().split(":");if("cell"===o[0]){var c=uv(o[1]);if(l.length<=c.r)for(s=l.length;s<=c.r;++s)l[s]||(l[s]=[]);switch(s=c.r,a=c.c,o[2]){case"t":l[s][a]=e(o[3]);break;case"v":l[s][a]=+o[3];break;case"vtf":var d=o[o.length-1];case"vtc":"nl"===o[3]?l[s][a]=!!+o[4]:l[s][a]=+o[4],"vtf"==o[2]&&(l[s][a]=[l[s][a],d])}}}return r&&r.sheetRows&&(l=l.slice(0,r.sheetRows)),l}(t,r),r)}var n=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),i="--SocialCalcSpreadsheetControlSave--";function l(e){if(!e||!e["!ref"])return"";for(var r,n=[],s=[],a="",i=hv(e["!ref"]),l=Array.isArray(e),o=i.s.r;o<=i.e.r;++o)for(var c=i.s.c;c<=i.e.c;++c)if(a=mv({r:o,c:c}),(r=l?(e[o]||[])[c]:e[a])&&null!=r.v&&"z"!==r.t){switch(s=["cell",a,"t"],r.t){case"s":case"str":s.push(t(r.v));break;case"n":r.f?(s[2]="vtf",s[3]="n",s[4]=r.v,s[5]=t(r.f)):(s[2]="v",s[3]=r.v);break;case"b":s[2]="vt"+(r.f?"f":"c"),s[3]="nl",s[4]=r.v?"1":"0",s[5]=t(r.f||(r.v?"TRUE":"FALSE"));break;case"d":var d=mf(bf(r.v));s[2]="vtc",s[3]="nd",s[4]=""+d,s[5]=r.w||Yx(r.z||vx[14],d);break;case"e":continue}n.push(s.join(":"))}return n.push("sheet:c:"+(i.e.c-i.s.c+1)+":r:"+(i.e.r-i.s.r+1)+":tvf:1"),n.push("valueformat:1:text-wiki"),n.join("\n")}return{to_workbook:function(e,t){return vv(r(e,t),t)},to_sheet:r,from_sheet:function(e){return[n,s,a,s,l(e),i].join("\n")}}}(),Jy=function(){function e(e,t,r,n,s){s.raw?t[r][n]=e:""===e||("TRUE"===e?t[r][n]=!0:"FALSE"===e?t[r][n]=!1:isNaN(Sf(e))?isNaN(Tf(e).getDate())?t[r][n]=e:t[r][n]=bf(e):t[r][n]=Sf(e))}var t={44:",",9:"\t",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function n(e){for(var n={},s=!1,a=0,i=0;a<e.length;++a)34==(i=e.charCodeAt(a))?s=!s:!s&&i in t&&(n[i]=(n[i]||0)+1);for(a in i=[],n)Object.prototype.hasOwnProperty.call(n,a)&&i.push([n[a],a]);if(!i.length)for(a in n=r)Object.prototype.hasOwnProperty.call(n,a)&&i.push([n[a],a]);return i.sort(function(e,t){return e[0]-t[0]||r[e[1]]-r[t[1]]}),t[i.pop()[1]]||44}function s(e,t){var r=t||{},s="";var a=r.dense?[]:{},i={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(s=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(s=e.charAt(4),e=e.slice(6)):s=n(e.slice(0,1024)):s=r&&r.FS?r.FS:n(e.slice(0,1024));var l=0,o=0,c=0,d=0,u=0,m=s.charCodeAt(0),h=!1,p=0,x=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var f=null!=r.dateNF?function(e){var t="number"==typeof e?vx[e]:e;return t=t.replace(ef,"(\\d+)"),new RegExp("^"+t+"$")}(r.dateNF):null;function g(){var t=e.slice(d,u),n={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)n.t="z";else if(r.raw)n.t="s",n.v=t;else if(0===t.trim().length)n.t="s",n.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(n.t="s",n.v=t.slice(2,-1).replace(/""/g,'"')):!function(e){return 1!=e.length}(t)?(n.t="s",n.v=t):(n.t="n",n.f=t.slice(1));else if("TRUE"==t)n.t="b",n.v=!0;else if("FALSE"==t)n.t="b",n.v=!1;else if(isNaN(c=Sf(t)))if(!isNaN(Tf(t).getDate())||f&&t.match(f)){n.z=r.dateNF||vx[14];var s=0;f&&t.match(f)&&(t=function(e,t,r){var n=-1,s=-1,a=-1,i=-1,l=-1,o=-1;(t.match(ef)||[]).forEach(function(e,t){var c=parseInt(r[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":n=c;break;case"d":a=c;break;case"h":i=c;break;case"s":o=c;break;case"m":i>=0?l=c:s=c}}),o>=0&&-1==l&&s>=0&&(l=s,s=-1);var c=(""+(n>=0?n:(new Date).getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2);return-1==i&&-1==l&&-1==o?c:-1==n&&-1==s&&-1==a?d:c+"T"+d}(0,r.dateNF,t.match(f)||[]),s=1),r.cellDates?(n.t="d",n.v=bf(t,s)):(n.t="n",n.v=mf(bf(t,s))),!1!==r.cellText&&(n.w=Yx(n.z,n.v instanceof Date?mf(n.v):n.v)),r.cellNF||delete n.z}else n.t="s",n.v=t;else n.t="n",!1!==r.cellText&&(n.w=t),n.v=c;if("z"==n.t||(r.dense?(a[l]||(a[l]=[]),a[l][o]=n):a[mv({c:o,r:l})]=n),d=u+1,x=e.charCodeAt(d),i.e.c<o&&(i.e.c=o),i.e.r<l&&(i.e.r=l),p==m)++o;else if(o=0,++l,r.sheetRows&&r.sheetRows<=l)return!0}e:for(;u<e.length;++u)switch(p=e.charCodeAt(u)){case 34:34===x&&(h=!h);break;case m:case 10:case 13:if(!h&&g())break e}return u-d>0&&g(),a["!ref"]=pv(i),a}function a(t,r){return r&&r.PRN?r.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?s(t,r):bv(function(t,r){var n=r||{},s=[];if(!t||0===t.length)return s;for(var a=t.split(/[\r\n]/),i=a.length-1;i>=0&&0===a[i].length;)--i;for(var l=10,o=0,c=0;c<=i;++c)-1==(o=a[c].indexOf(" "))?o=a[c].length:o++,l=Math.max(l,o);for(c=0;c<=i;++c){s[c]=[];var d=0;for(e(a[c].slice(0,l).trim(),s,c,d,n),d=1;d<=(a[c].length-l)/10+1;++d)e(a[c].slice(l+10*(d-1),l+10*d).trim(),s,c,d,n)}return n.sheetRows&&(s=s.slice(0,n.sheetRows)),s}(t,r),r):s(t,r)}function i(e,t){var r="",n="string"==t.type?[0,0,0,0]:iw(e,t);switch(t.type){case"base64":r=Zp(e);break;case"binary":case"string":r=e;break;case"buffer":r=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof $p?$p.utils.decode(t.codepage,e):Qp&&Buffer.isBuffer(e)?e.toString("binary"):ax(e);break;case"array":r=Nf(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==n[0]&&187==n[1]&&191==n[2]?r=Gf(r.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?r=Gf(r):"binary"==t.type&&"undefined"!==typeof $p&&t.codepage&&(r=$p.utils.decode(t.codepage,$p.utils.encode(28591,r))),"socialcalc:version:"==r.slice(0,19)?Yy.to_sheet("string"==t.type?r:Gf(r),t):a(r,t)}return{to_workbook:function(e,t){return vv(i(e,t),t)},to_sheet:i,from_sheet:function(e){for(var t,r=[],n=xv(e["!ref"]),s=Array.isArray(e),a=n.s.r;a<=n.e.r;++a){for(var i=[],l=n.s.c;l<=n.e.c;++l){var o=mv({r:a,c:l});if((t=s?(e[a]||[])[l]:e[o])&&null!=t.v){for(var c=(t.w||(gv(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";i.push(c+(0===l?" ":""))}else i.push("          ")}r.push(i.join(""))}return r.join("\n")}}}();var Zy=function(){function e(e,t,r){if(e){Zg(e,e.l||0);for(var n=r.Enum||g;e.l<e.length;){var s=e.read_shift(2),a=n[s]||n[65535],i=e.read_shift(2),l=e.l+i,o=a.f&&a.f(e,i,r);if(e.l=l,t(o,a,s))return}}}function t(t,r){if(!t)return t;var n=r||{};var s=n.dense?[]:{},a="Sheet1",i="",l=0,o={},c=[],d=[],u={s:{r:0,c:0},e:{r:0,c:0}},m=n.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])n.Enum=g,e(t,function(e,t,r){switch(r){case 0:n.vers=e,e>=4096&&(n.qpro=!0);break;case 6:u=e;break;case 204:e&&(i=e);break;case 222:i=e;break;case 15:case 51:n.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==r&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=n.dateNF||vx[14],n.cellDates&&(e[1].t="d",e[1].v=ff(e[1].v))),n.qpro&&e[3]>l&&(s["!ref"]=pv(u),o[a]=s,c.push(a),s=n.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},l=e[3],a=i||"Sheet"+(l+1),i="");var d=n.dense?(s[e[0].r]||[])[e[0].c]:s[mv(e[0])];if(d){d.t=e[1].t,d.v=e[1].v,null!=e[1].z&&(d.z=e[1].z),null!=e[1].f&&(d.f=e[1].f);break}n.dense?(s[e[0].r]||(s[e[0].r]=[]),s[e[0].r][e[0].c]=e[1]):s[mv(e[0])]=e[1]}},n);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);n.Enum=v,14==t[2]&&(n.qpro=!0,t.l=0),e(t,function(e,t,r){switch(r){case 204:a=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>l&&(s["!ref"]=pv(u),o[a]=s,c.push(a),s=n.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},l=e[3],a="Sheet"+(l+1)),m>0&&e[0].r>=m)break;n.dense?(s[e[0].r]||(s[e[0].r]=[]),s[e[0].r][e[0].c]=e[1]):s[mv(e[0])]=e[1],u.e.c<e[0].c&&(u.e.c=e[0].c),u.e.r<e[0].r&&(u.e.r=e[0].r);break;case 27:e[14e3]&&(d[e[14e3][0]]=e[14e3][1]);break;case 1537:d[e[0]]=e[1],e[0]==l&&(a=e[1])}},n)}if(s["!ref"]=pv(u),o[i||a]=s,c.push(i||a),!d.length)return{SheetNames:c,Sheets:o};for(var h={},p=[],x=0;x<d.length;++x)o[c[x]]?(p.push(d[x]||c[x]),h[d[x]]=o[d[x]]||o[c[x]]):(p.push(d[x]),h[d[x]]={"!ref":"A1"});return{SheetNames:p,Sheets:h}}function r(e,t,r){var n=[{c:0,r:0},{t:"n",v:0},0,0];return r.qpro&&20768!=r.vers?(n[0].c=e.read_shift(1),n[3]=e.read_shift(1),n[0].r=e.read_shift(2),e.l+=2):(n[2]=e.read_shift(1),n[0].c=e.read_shift(2),n[0].r=e.read_shift(2)),n}function n(e,t,n){var s=e.l+t,a=r(e,0,n);if(a[1].t="s",20768==n.vers){e.l++;var i=e.read_shift(1);return a[1].v=e.read_shift(i,"utf8"),a}return n.qpro&&e.l++,a[1].v=e.read_shift(s-e.l,"cstr"),a}function s(e,t,r){var n=ev(7+r.length);n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(1,39);for(var s=0;s<n.length;++s){var a=r.charCodeAt(s);n.write_shift(1,a>=128?95:a)}return n.write_shift(1,0),n}function a(e,t,r){var n=ev(7);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r,"i"),n}function i(e,t,r){var n=ev(13);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(8,r,"f"),n}function l(e,t,r){var n=32768&t;return t=(n?e:0)+((t&=-32769)>=8192?t-16384:t),(n?"":"$")+(r?dv(t):ov(t))}var o={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function d(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function u(e,t,r,n){var s=ev(6+n.length);s.write_shift(2,e),s.write_shift(1,r),s.write_shift(1,t),s.write_shift(1,39);for(var a=0;a<n.length;++a){var i=n.charCodeAt(a);s.write_shift(1,i>=128?95:i)}return s.write_shift(1,0),s}function m(e,t){var r=d(e),n=e.read_shift(4),s=e.read_shift(4),a=e.read_shift(2);if(65535==a)return 0===n&&3221225472===s?(r[1].t="e",r[1].v=15):0===n&&3489660928===s?(r[1].t="e",r[1].v=42):r[1].v=0,r;var i=32768&a;return a=(32767&a)-16446,r[1].v=(1-2*i)*(s*Math.pow(2,a+32)+n*Math.pow(2,a)),r}function h(e,t,r,n){var s=ev(14);if(s.write_shift(2,e),s.write_shift(1,r),s.write_shift(1,t),0==n)return s.write_shift(4,0),s.write_shift(4,0),s.write_shift(2,65535),s;var a,i=0,l=0,o=0;return n<0&&(i=1,n=-n),l=0|Math.log2(n),0==(2147483648&(o=(n/=Math.pow(2,l-31))>>>0))&&(++l,o=(n/=2)>>>0),n-=o,o|=2147483648,o>>>=0,a=(n*=Math.pow(2,32))>>>0,s.write_shift(4,a),s.write_shift(4,o),l+=16383+(i?32768:0),s.write_shift(2,l),s}function p(e,t){var r=d(e),n=e.read_shift(8,"f");return r[1].v=n,r}function x(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function f(e,t){var r=ev(5+e.length);r.write_shift(2,14e3),r.write_shift(2,t);for(var n=0;n<e.length;++n){var s=e.charCodeAt(n);r[r.l++]=s>127?95:s}return r[r.l++]=0,r}var g={0:{n:"BOF",f:Sy},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,r){var n={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&r.qpro?(n.s.c=e.read_shift(1),e.l++,n.s.r=e.read_shift(2),n.e.c=e.read_shift(1),e.l++,n.e.r=e.read_shift(2),n):(n.s.c=e.read_shift(2),n.s.r=e.read_shift(2),12==t&&r.qpro&&(e.l+=2),n.e.c=e.read_shift(2),n.e.r=e.read_shift(2),12==t&&r.qpro&&(e.l+=2),65535==n.s.c&&(n.s.c=n.e.c=n.s.r=n.e.r=0),n)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,n){var s=r(e,0,n);return s[1].v=e.read_shift(2,"i"),s}},14:{n:"NUMBER",f:function(e,t,n){var s=r(e,0,n);return s[1].v=e.read_shift(8,"f"),s}},15:{n:"LABEL",f:n},16:{n:"FORMULA",f:function(e,t,n){var s=e.l+t,a=r(e,0,n);if(a[1].v=e.read_shift(8,"f"),n.qpro)e.l=s;else{var i=e.read_shift(2);!function(e,t){Zg(e,0);var r=[],n=0,s="",a="",i="",d="";for(;e.l<e.length;){var u=e[e.l++];switch(u){case 0:r.push(e.read_shift(8,"f"));break;case 1:a=l(t[0].c,e.read_shift(2),!0),s=l(t[0].r,e.read_shift(2),!1),r.push(a+s);break;case 2:var m=l(t[0].c,e.read_shift(2),!0),h=l(t[0].r,e.read_shift(2),!1);a=l(t[0].c,e.read_shift(2),!0),s=l(t[0].r,e.read_shift(2),!1),r.push(m+h+":"+a+s);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:r.push("("+r.pop()+")");break;case 5:r.push(e.read_shift(2));break;case 6:for(var p="";u=e[e.l++];)p+=String.fromCharCode(u);r.push('"'+p.replace(/"/g,'""')+'"');break;case 8:r.push("-"+r.pop());break;case 23:r.push("+"+r.pop());break;case 22:r.push("NOT("+r.pop()+")");break;case 20:case 21:d=r.pop(),i=r.pop(),r.push(["AND","OR"][u-20]+"("+i+","+d+")");break;default:if(u<32&&c[u])d=r.pop(),i=r.pop(),r.push(i+c[u]+d);else{if(!o[u])return u<=7?console.error("WK1 invalid opcode "+u.toString(16)):u<=24?console.error("WK1 unsupported op "+u.toString(16)):u<=30?console.error("WK1 invalid opcode "+u.toString(16)):u<=115?console.error("WK1 unsupported function opcode "+u.toString(16)):console.error("WK1 unrecognized opcode "+u.toString(16));if(69==(n=o[u][1])&&(n=e[e.l++]),n>r.length)return void console.error("WK1 bad formula parse 0x"+u.toString(16)+":|"+r.join("|")+"|");var x=r.slice(-n);r.length-=n,r.push(o[u][0]+"("+x.join(",")+")")}}}1==r.length?t[1].f=""+r[0]:console.error("WK1 bad formula parse |"+r.join("|")+"|")}(e.slice(e.l,e.l+i),a),e.l+=i}return a}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:n},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:x},222:{n:"SHEETNAMELP",f:function(e,t){var r=e[e.l++];r>t-1&&(r=t-1);for(var n="";n.length<r;)n+=String.fromCharCode(e[e.l++]);return n}},65535:{n:""}},v={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var r=d(e);return r[1].t="s",r[1].v=e.read_shift(t-4,"cstr"),r}},23:{n:"NUMBER17",f:m},24:{n:"NUMBER18",f:function(e,t){var r=d(e);r[1].v=e.read_shift(2);var n=r[1].v>>1;if(1&r[1].v)switch(7&n){case 0:n=5e3*(n>>3);break;case 1:n=500*(n>>3);break;case 2:n=(n>>3)/20;break;case 3:n=(n>>3)/200;break;case 4:n=(n>>3)/2e3;break;case 5:n=(n>>3)/2e4;break;case 6:n=(n>>3)/16;break;case 7:n=(n>>3)/64}return r[1].v=n,r}},25:{n:"FORMULA19",f:function(e,t){var r=m(e);return e.l+=t-14,r}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var r={},n=e.l+t;e.l<n;){var s=e.read_shift(2);if(14e3==s){for(r[s]=[0,""],r[s][0]=e.read_shift(2);e[e.l];)r[s][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return r}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var r=d(e),n=e.read_shift(4);return r[1].v=n>>6,r}},38:{n:"??"},39:{n:"NUMBER27",f:p},40:{n:"FORMULA28",f:function(e,t){var r=p(e);return e.l+=t-10,r}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:x},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,r){if(r.qpro&&!(t<21)){var n=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[n,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var r=t||{};if(+r.codepage>=0&&Vp(+r.codepage),"string"==r.type)throw new Error("Cannot write WK1 to JS string");var n=tv(),l=xv(e["!ref"]),o=Array.isArray(e),c=[];vj(n,0,function(e){var t=ev(2);return t.write_shift(2,e),t}(1030)),vj(n,6,function(e){var t=ev(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(l));for(var d=Math.min(l.e.r,8191),u=l.s.r;u<=d;++u)for(var m=ov(u),h=l.s.c;h<=l.e.c;++h){u===l.s.r&&(c[h]=dv(h));var p=c[h]+m,x=o?(e[u]||[])[h]:e[p];if(x&&"z"!=x.t)if("n"==x.t)(0|x.v)==x.v&&x.v>=-32768&&x.v<=32767?vj(n,13,a(u,h,x.v)):vj(n,14,i(u,h,x.v));else vj(n,15,s(u,h,gv(x).slice(0,239)))}return vj(n,1),n.end()},book_to_wk3:function(e,t){var r=t||{};if(+r.codepage>=0&&Vp(+r.codepage),"string"==r.type)throw new Error("Cannot write WK3 to JS string");var n=tv();vj(n,0,function(e){var t=ev(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var r=0,n=0,s=0,a=0;a<e.SheetNames.length;++a){var i=e.SheetNames[a],l=e.Sheets[i];if(l&&l["!ref"]){++s;var o=hv(l["!ref"]);r<o.e.r&&(r=o.e.r),n<o.e.c&&(n=o.e.c)}}r>8191&&(r=8191);return t.write_shift(2,r),t.write_shift(1,s),t.write_shift(1,n),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var s=0,a=0;s<e.SheetNames.length;++s)(e.Sheets[e.SheetNames[s]]||{})["!ref"]&&vj(n,27,f(e.SheetNames[s],a++));var i=0;for(s=0;s<e.SheetNames.length;++s){var l=e.Sheets[e.SheetNames[s]];if(l&&l["!ref"]){for(var o=xv(l["!ref"]),c=Array.isArray(l),d=[],m=Math.min(o.e.r,8191),p=o.s.r;p<=m;++p)for(var x=ov(p),g=o.s.c;g<=o.e.c;++g){p===o.s.r&&(d[g]=dv(g));var v=d[g]+x,y=c?(l[p]||[])[g]:l[v];if(y&&"z"!=y.t)if("n"==y.t)vj(n,23,h(p,g,i,y.v));else vj(n,22,u(p,g,i,gv(y).slice(0,239)))}++i}}return vj(n,1),n.end()},to_workbook:function(e,r){switch(r.type){case"base64":return t(nx(Zp(e)),r);case"binary":return t(nx(e),r);case"buffer":case"array":return t(e,r)}throw"Unsupported type "+r.type}}}();var Qy=/^\s|\s$|[\t\n\r]/;function eb(e,t){if(!t.bookSST)return"";var r=[Df];r[r.length]=Xf("sst",null,{xmlns:dg[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(null!=e[n]){var s=e[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(Qy)&&(a+=' xml:space="preserve"'),a+=">"+Pf(s.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}var tb=function(e,t){var r=!1;return null==t&&(r=!0,t=ev(15+4*e.t.length)),t.write_shift(1,0),wv(e.t,t),r?t.slice(0,t.l):t};function rb(e){var t=tv();rv(t,159,function(e,t){return t||(t=ev(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var r=0;r<e.length;++r)rv(t,19,tb(e[r]));return rv(t,160),t.end()}function nb(e){if("undefined"!==typeof $p)return $p.utils.encode(Bp,e);for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function sb(e){var t,r,n=0,s=nb(e),a=s.length+1;for((t=tx(a))[0]=s.length,r=1;r!=a;++r)t[r]=s[r-1];for(r=a-1;r>=0;--r)n=((0===(16384&n)?0:1)|n<<1&32767)^t[r];return 52811^n}var ab=function(){function e(e,r){switch(r.type){case"base64":return t(Zp(e),r);case"binary":return t(e,r);case"buffer":return t(Qp&&Buffer.isBuffer(e)?e.toString("binary"):ax(e),r);case"array":return t(Nf(e),r)}throw new Error("Unrecognized type "+r.type)}function t(e,t){var r=(t||{}).dense?[]:{},n=e.match(/\\trowd.*?\\row\b/g);if(!n.length)throw new Error("RTF missing table");var s={s:{c:0,r:0},e:{c:0,r:n.length-1}};return n.forEach(function(e,t){Array.isArray(r)&&(r[t]=[]);for(var n,a=/\\\w+\b/g,i=0,l=-1;n=a.exec(e);){if("\\cell"===n[0]){var o=e.slice(i,a.lastIndex-n[0].length);if(" "==o[0]&&(o=o.slice(1)),++l,o.length){var c={v:o,t:"s"};Array.isArray(r)?r[t][l]=c:r[mv({r:t,c:l})]=c}}i=a.lastIndex}l>s.e.c&&(s.e.c=l)}),r["!ref"]=pv(s),r}return{to_workbook:function(t,r){return vv(e(t,r),r)},to_sheet:e,from_sheet:function(e){for(var t,r=["{\\rtf1\\ansi"],n=xv(e["!ref"]),s=Array.isArray(e),a=n.s.r;a<=n.e.r;++a){r.push("\\trowd\\trautofit1");for(var i=n.s.c;i<=n.e.c;++i)r.push("\\cellx"+(i+1));for(r.push("\\pard\\intbl"),i=n.s.c;i<=n.e.c;++i){var l=mv({r:a,c:i});(t=s?(e[a]||[])[i]:e[l])&&(null!=t.v||t.f&&!t.F)&&(r.push(" "+(t.w||(gv(t),t.w))),r.push("\\cell"))}r.push("\\pard\\intbl\\row")}return r.join("")+"}"}}}();function ib(e){for(var t=0,r=1;3!=t;++t)r=256*r+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var lb=6;function ob(e){return Math.floor((e+Math.round(128/lb)/256)*lb)}function cb(e){return Math.floor((e-5)/lb*100+.5)/100}function db(e){return Math.round((e*lb+5)/lb*256)/256}function ub(e){e.width?(e.wpx=ob(e.width),e.wch=cb(e.wpx),e.MDW=lb):e.wpx?(e.wch=cb(e.wpx),e.width=db(e.wch),e.MDW=lb):"number"==typeof e.wch&&(e.width=db(e.wch),e.wpx=ob(e.width),e.MDW=lb),e.customWidth&&delete e.customWidth}var mb=96;function hb(e){return 96*e/mb}function pb(e){return e*mb/96}function xb(e,t){var r,n=[Df,Xf("styleSheet",null,{xmlns:dg[0],"xmlns:vt":lg})];return e.SSF&&null!=(r=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)null!=e[n]&&(t[t.length]=Xf("numFmt",null,{numFmtId:n,formatCode:Pf(e[n])}))}),1===t.length?"":(t[t.length]="</numFmts>",t[0]=Xf("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=function(e){var t=[];return t[t.length]=Xf("cellXfs",null),e.forEach(function(e){t[t.length]=Xf("xf",null,e)}),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=Xf("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function fb(e,t,r){r||(r=ev(6+4*t.length)),r.write_shift(2,e),wv(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return null==r.l&&(r.l=r.length),n}function gb(e,t){t||(t=ev(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=ev(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,r),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var r=0;"superscript"==e.vertAlign?r=1:"subscript"==e.vertAlign&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),qv(e.color,t);var n=0;return"major"==e.scheme&&(n=1),"minor"==e.scheme&&(n=2),t.write_shift(1,n),wv(e.name,t),t.length>t.l?t.slice(0,t.l):t}var vb,yb=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],bb=Qg;function Nb(e,t){t||(t=ev(84)),vb||(vb=cf(yb));var r=vb[e.patternType];null==r&&(r=40),t.write_shift(4,r);var n=0;if(40!=r)for(qv({auto:1},t),qv({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function jb(e,t,r){r||(r=ev(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);return r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function wb(e,t){return t||(t=ev(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Sb=Qg;function Ab(e){rv(e,613,Nv(1)),rv(e,46,function(e,t){return t||(t=ev(51)),t.write_shift(1,0),wb(0,t),wb(0,t),wb(0,t),wb(0,t),wb(0,t),t.length>t.l?t.slice(0,t.l):t}()),rv(e,614)}function Tb(e){rv(e,619,Nv(1)),rv(e,48,function(e,t){return t||(t=ev(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,+e.builtinId),t.write_shift(1,0),Ov(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}({xfId:0,builtinId:0,name:"Normal"})),rv(e,620)}function Cb(e){rv(e,508,function(e,t,r){var n=ev(2052);return n.write_shift(4,e),Ov(t,n),Ov(r,n),n.length>n.l?n.slice(0,n.l):n}(0,"TableStyleMedium9","PivotStyleMedium4")),rv(e,509)}function Eb(e,t){var r=tv();return rv(r,278),function(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var n=e[0];n<=e[1];++n)null!=t[n]&&++r}),0!=r&&(rv(e,615,Nv(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)null!=t[n]&&rv(e,44,fb(n,t[n]))}),rv(e,616))}}(r,e.SSF),function(e){rv(e,611,Nv(1)),rv(e,43,gb({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),rv(e,612)}(r),function(e){rv(e,603,Nv(2)),rv(e,45,Nb({patternType:"none"})),rv(e,45,Nb({patternType:"gray125"})),rv(e,604)}(r),Ab(r),function(e){rv(e,626,Nv(1)),rv(e,47,jb({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),rv(e,627)}(r),function(e,t){rv(e,617,Nv(t.length)),t.forEach(function(t){rv(e,47,jb(t,0))}),rv(e,618)}(r,t.cellXfs),Tb(r),function(e){rv(e,505,Nv(0)),rv(e,506)}(r),Cb(r),rv(r,279),r.end()}function Db(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var r=[Df];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',r[r.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',r[r.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',r[r.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',r[r.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',r[r.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',r[r.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function kb(){var e=tv();return rv(e,332),rv(e,334,Nv(1)),rv(e,335,function(e){var t=ev(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),wv(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),rv(e,336),rv(e,339,function(e,t){var r=ev(8+2*t.length);return r.write_shift(4,e),wv(t,r),r.slice(0,r.l)}(1,"XLDAPR")),rv(e,52),rv(e,35,Nv(514)),rv(e,4096,Nv(0)),rv(e,4097,Ay(1)),rv(e,36),rv(e,53),rv(e,340),rv(e,337,function(e,t){var r=ev(8);return r.write_shift(4,e),r.write_shift(4,t?1:0),r}(1,!0)),rv(e,51,function(e){var t=ev(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}([[1,0]])),rv(e,338),rv(e,333),e.end()}function Rb(){var e=[Df];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var _b=1024;function Ib(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[Xf("xml",null,{"xmlns:v":fg,"xmlns:o":ug,"xmlns:x":mg,"xmlns:mv":xg}).replace(/\/>/,">"),Xf("o:shapelayout",Xf("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Xf("v:shapetype",[Xf("v:stroke",null,{joinstyle:"miter"}),Xf("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];_b<1e3*e;)_b+=1e3;return t.forEach(function(e){var t=uv(e[0]),r={color2:"#BEFF82",type:"gradient"};"gradient"==r.type&&(r.angle="-180");var n="gradient"==r.type?Xf("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,a=Xf("v:fill",n,r);++_b,s=s.concat(["<v:shape"+Kf({id:"_x0000_s"+_b,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",a,Xf("v:shadow",null,{on:"t",obscured:"t"}),Xf("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",$f("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),$f("x:AutoFill","False"),$f("x:Row",String(t.r)),$f("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function Pb(e){var t=[Df,Xf("comments",null,{xmlns:dg[0]})],r=[];return t.push("<authors>"),e.forEach(function(e){e[1].forEach(function(e){var n=Pf(e.a);-1==r.indexOf(n)&&(r.push(n),t.push("<author>"+n+"</author>")),e.T&&e.ID&&-1==r.indexOf("tc="+e.ID)&&(r.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))})}),0==r.length&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(e){var n=0,s=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?n=r.indexOf("tc="+e[1][0].ID):e[1].forEach(function(e){e.a&&(n=r.indexOf(Pf(e.a))),s.push(e.t||"")}),t.push('<comment ref="'+e[0]+'" authorId="'+n+'"><text>'),s.length<=1)t.push($f("t",Pf(s[0]||"")));else{for(var a="Comment:\n    "+s[0]+"\n",i=1;i<s.length;++i)a+="Reply:\n    "+s[i]+"\n";t.push($f("t",Pf(a)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Ob(e,t,r){var n=[Df,Xf("ThreadedComments",null,{xmlns:rg}).replace(/[\/]>/,">")];return e.forEach(function(e){var s="";(e[1]||[]).forEach(function(a,i){if(a.T){a.a&&-1==t.indexOf(a.a)&&t.push(a.a);var l={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};0==i?s=l.id:l.parentId=s,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(a.a)).slice(-12)+"}"),n.push(Xf("threadedComment",$f("text",a.t||""),l))}else delete a.ID})}),n.push("</ThreadedComments>"),n.join("")}var Lb=jv;function Fb(e){var t=tv(),r=[];return rv(t,628),rv(t,630),e.forEach(function(e){e[1].forEach(function(e){r.indexOf(e.a)>-1||(r.push(e.a.slice(0,54)),rv(t,632,function(e){return wv(e.slice(0,54))}(e.a)))})}),rv(t,631),rv(t,633),e.forEach(function(e){e[1].forEach(function(n){n.iauthor=r.indexOf(n.a);var s={s:uv(e[0]),e:uv(e[0])};rv(t,635,function(e,t){return null==t&&(t=ev(36)),t.write_shift(4,e[1].iauthor),Gv(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([s,n])),n.t&&n.t.length>0&&rv(t,637,Cv(n)),rv(t,636),delete n.iauthor})}),rv(t,634),rv(t,629),t.end()}var Mb=["xlsb","xlsm","xlam","biff8","xla"];var Ub=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(e,r,n,s){var a=!1,i=!1;0==n.length?i=!0:"["==n.charAt(0)&&(i=!0,n=n.slice(1,-1)),0==s.length?a=!0:"["==s.charAt(0)&&(a=!0,s=s.slice(1,-1));var l=n.length>0?0|parseInt(n,10):0,o=s.length>0?0|parseInt(s,10):0;return a?o+=t.c:--o,i?l+=t.r:--l,r+(a?"":"$")+dv(o)+(i?"":"$")+ov(l)}return function(n,s){return t=s,n.replace(e,r)}}(),Bb=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Hb=function(){return function(e,t){return e.replace(Bb,function(e,r,n,s,a,i){var l=cv(s)-(n?0:t.c),o=lv(i)-(a?0:t.r);return r+"R"+(0==o?"":a?o+1:"["+o+"]")+"C"+(0==l?"":n?l+1:"["+l+"]")})}}();function zb(e,t){return e.replace(Bb,function(e,r,n,s,a,i){return r+("$"==n?n+s:dv(cv(s)+t.c))+("$"==a?a+i:ov(lv(i)+t.r))})}function Gb(e){e.l+=1}function Vb(e,t){var r=e.read_shift(1==t?1:2);return[16383&r,r>>14&1,r>>15&1]}function Wb(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return qb(e);12==r.biff&&(n=4)}var s=e.read_shift(n),a=e.read_shift(n),i=Vb(e,2),l=Vb(e,2);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:l[0],cRel:l[1],rRel:l[2]}}}function qb(e){var t=Vb(e,2),r=Vb(e,2),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function $b(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return function(e){var t=Vb(e,2),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}(e);var n=e.read_shift(r&&12==r.biff?4:2),s=Vb(e,2);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function Kb(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:255&r,fQuoted:!!(16384&r),cRel:r>>15,rRel:r>>15}}function Xb(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function Yb(e){return[e.read_shift(1),e.read_shift(1)]}function Jb(e,t){var r=[e.read_shift(1)];if(12==t)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2}switch(r[0]){case 4:r[1]=jy(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:r[1]=Zv[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Vv(e);break;case 2:r[1]=Ry(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Zb(e,t,r){for(var n=e.read_shift(12==r.biff?4:2),s=[],a=0;a!=n;++a)s.push((12==r.biff?zv:Fy)(e,8));return s}function Qb(e,t,r){var n=0,s=0;12==r.biff?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,0==--s&&(s=256));for(var a=0,i=[];a!=n&&(i[a]=[]);++a)for(var l=0;l!=s;++l)i[a][l]=Jb(e,r.biff);return i}function eN(e,t,r){return e.l+=2,[Kb(e)]}function tN(e){return e.l+=6,[]}function rN(e){return e.l+=2,[Sy(e),1&e.read_shift(2)]}var nN=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var sN={1:{n:"PtgExp",f:function(e,t,r){return e.l++,r&&12==r.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(r&&2==r.biff?1:2)]}},2:{n:"PtgTbl",f:Qg},3:{n:"PtgAdd",f:Gb},4:{n:"PtgSub",f:Gb},5:{n:"PtgMul",f:Gb},6:{n:"PtgDiv",f:Gb},7:{n:"PtgPower",f:Gb},8:{n:"PtgConcat",f:Gb},9:{n:"PtgLt",f:Gb},10:{n:"PtgLe",f:Gb},11:{n:"PtgEq",f:Gb},12:{n:"PtgGe",f:Gb},13:{n:"PtgGt",f:Gb},14:{n:"PtgNe",f:Gb},15:{n:"PtgIsect",f:Gb},16:{n:"PtgUnion",f:Gb},17:{n:"PtgRange",f:Gb},18:{n:"PtgUplus",f:Gb},19:{n:"PtgUminus",f:Gb},20:{n:"PtgPercent",f:Gb},21:{n:"PtgParen",f:Gb},22:{n:"PtgMissArg",f:Gb},23:{n:"PtgStr",f:function(e,t,r){return e.l++,Cy(e,0,r)}},26:{n:"PtgSheet",f:function(e,t,r){return e.l+=5,e.l+=2,e.l+=2==r.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,r){return e.l+=2==r.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,Zv[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,Vv(e)}},32:{n:"PtgArray",f:function(e,t,r){var n=(96&e[e.l++])>>5;return e.l+=2==r.biff?6:12==r.biff?14:7,[n]}},33:{n:"PtgFunc",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[wN[s],jN[s],n]}},34:{n:"PtgFuncVar",f:function(e,t,r){var n=e[e.l++],s=e.read_shift(1),a=r&&r.biff<=3?[88==n?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[s,(0===a[0]?jN:NN)[a[1]]]}},35:{n:"PtgName",f:function(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[n,0,a]}},36:{n:"PtgRef",f:function(e,t,r){var n=(96&e[e.l])>>5;return e.l+=1,[n,$b(e,0,r)]}},37:{n:"PtgArea",f:function(e,t,r){return[(96&e[e.l++])>>5,Wb(e,r.biff>=2&&r.biff,r)]}},38:{n:"PtgMemArea",f:function(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=r&&2==r.biff?3:4,[n,e.read_shift(r&&2==r.biff?1:2)]}},39:{n:"PtgMemErr",f:Qg},40:{n:"PtgMemNoMem",f:Qg},41:{n:"PtgMemFunc",f:function(e,t,r){return[e.read_shift(1)>>>5&3,e.read_shift(r&&2==r.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,12==r.biff&&(e.l+=2),[n]}},43:{n:"PtgAreaErr",f:function(e,t,r){var n=(96&e[e.l++])>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}},44:{n:"PtgRefN",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var s=function(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return function(e){var t=e.read_shift(2),r=e.read_shift(1),n=(32768&t)>>15,s=(16384&t)>>14;return t&=16383,1==n&&t>=8192&&(t-=16384),1==s&&r>=128&&(r-=256),{r:t,c:r,cRel:s,rRel:n}}(e);var s=e.read_shift(n>=12?4:2),a=e.read_shift(2),i=(16384&a)>>14,l=(32768&a)>>15;if(a&=16383,1==l)for(;s>524287;)s-=1048576;if(1==i)for(;a>8191;)a-=16384;return{r:s,c:a,cRel:i,rRel:l}}(e,0,r);return[n,s]}},45:{n:"PtgAreaN",f:function(e,t,r){var n=(96&e[e.l++])>>5,s=function(e,t,r){if(r.biff<8)return qb(e);var n=e.read_shift(12==r.biff?4:2),s=e.read_shift(12==r.biff?4:2),a=Vb(e,2),i=Vb(e,2);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}(e,0,r);return[n,s]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,r){return 5==r.biff?function(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var s=e.read_shift(2);return r&&5==r.biff&&(e.l+=12),[n,s,$b(e,0,r)]}},59:{n:"PtgArea3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,s=e.read_shift(2,"i");if(r)switch(r.biff){case 5:e.l+=12;break;case 12:0}return[n,s,Wb(e,0,r)]}},60:{n:"PtgRefErr3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,s=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6}return e.l+=a,[n,s]}},61:{n:"PtgAreaErr3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,s=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12}return e.l+=a,[n,s]}},255:{}},aN={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},iN={1:{n:"PtgElfLel",f:rN},2:{n:"PtgElfRw",f:eN},3:{n:"PtgElfCol",f:eN},6:{n:"PtgElfRwV",f:eN},7:{n:"PtgElfColV",f:eN},10:{n:"PtgElfRadical",f:eN},11:{n:"PtgElfRadicalS",f:tN},13:{n:"PtgElfColS",f:tN},15:{n:"PtgElfColSV",f:tN},16:{n:"PtgElfRadicalLel",f:rN},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),a=e.read_shift(2);return{ixti:t,coltype:3&r,rt:nN[r>>2&31],idx:n,c:s,C:a}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},lN={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=r&&2==r.biff?3:4,[n]}},2:{n:"PtgAttrIf",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(r&&2==r.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,r){e.l+=2;for(var n=e.read_shift(r&&2==r.biff?1:2),s=[],a=0;a<=n;++a)s.push(e.read_shift(r&&2==r.biff?1:2));return s}},8:{n:"PtgAttrGoto",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(r&&2==r.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,r){e.l+=r&&2==r.biff?3:4}},32:{n:"PtgAttrBaxcel",f:Xb},33:{n:"PtgAttrBaxcel",f:Xb},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),Yb(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),Yb(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function oN(e,t,r,n){if(n.biff<8)return Qg(e,t);for(var s=e.l+t,a=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=Qb(e,0,n),a.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Zb(e,r[i][1],n),a.push(r[i][2]);break;case"PtgExp":n&&12==n.biff&&(r[i][1][1]=e.read_shift(4),a.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return 0!==(t=s-e.l)&&a.push(Qg(e,t)),a}function cN(e,t,r){for(var n,s,a=e.l+t,i=[];a!=e.l;)t=a-e.l,s=e[e.l],n=sN[s]||sN[aN[s]],24!==s&&25!==s||(n=(24===s?iN:lN)[e[e.l+1]]),n&&n.f?i.push([n.n,n.f(e,t,r)]):Qg(e,t);return i}function dN(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],a=0;a<n.length;++a){var i=n[a];if(i)if(2===i[0])s.push('"'+i[1].replace(/"/g,'""')+'"');else s.push(i[1]);else s.push("")}t.push(s.join(","))}return t.join(";")}var uN={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function mN(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=-1==n[1]?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return null!=r.SID?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=-1==n[1]?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(e){return e.Name}).join(";;");default:return e[n[0]][0][3]?(s=-1==n[1]?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function hN(e,t,r){var n=mN(e,t,r);return"#REF"==n?n:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(n,r)}function pN(e,t,r,n,s){var a,i,l,o,c=s&&s.biff||8,d={s:{c:0,r:0},e:{c:0,r:0}},u=[],m=0,h=0,p="";if(!e[0]||!e[0][0])return"";for(var x=-1,f="",g=0,v=e[0].length;g<v;++g){var y=e[0][g];switch(y[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(a=u.pop(),i=u.pop(),x>=0){switch(e[0][x][1][0]){case 0:f=wf(" ",e[0][x][1][1]);break;case 1:f=wf("\r",e[0][x][1][1]);break;default:if(f="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}i+=f,x=-1}u.push(i+uN[y[0]]+a);break;case"PtgIsect":a=u.pop(),i=u.pop(),u.push(i+" "+a);break;case"PtgUnion":a=u.pop(),i=u.pop(),u.push(i+","+a);break;case"PtgRange":a=u.pop(),i=u.pop(),u.push(i+":"+a);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":l=nv(y[1][1],d,s),u.push(av(l,c));break;case"PtgRefN":l=r?nv(y[1][1],r,s):y[1][1],u.push(av(l,c));break;case"PtgRef3d":m=y[1][1],l=nv(y[1][2],d,s);p=hN(n,m,s);u.push(p+"!"+av(l,c));break;case"PtgFunc":case"PtgFuncVar":var b=y[1][0],N=y[1][1];b||(b=0);var j=0==(b&=127)?[]:u.slice(-b);u.length-=b,"User"===N&&(N=j.shift()),u.push(N+"("+j.join(",")+")");break;case"PtgBool":u.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":u.push(y[1]);break;case"PtgNum":u.push(String(y[1]));break;case"PtgStr":u.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":o=sv(y[1][1],r?{s:r}:d,s),u.push(iv(o,s));break;case"PtgArea":o=sv(y[1][1],d,s),u.push(iv(o,s));break;case"PtgArea3d":m=y[1][1],o=y[1][2],p=hN(n,m,s),u.push(p+"!"+iv(o,s));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgName":h=y[1][2];var w=(n.names||[])[h-1]||(n[0]||[])[h],S=w?w.Name:"SH33TJSNAME"+String(h);S&&"_xlfn."==S.slice(0,6)&&!s.xlfn&&(S=S.slice(6)),u.push(S);break;case"PtgNameX":var A,T=y[1][1];if(h=y[1][2],!(s.biff<=5)){var C="";if(14849==((n[T]||[])[0]||[])[0]||(1025==((n[T]||[])[0]||[])[0]?n[T][h]&&n[T][h].itab>0&&(C=n.SheetNames[n[T][h].itab-1]+"!"):C=n.SheetNames[h-1]+"!"),n[T]&&n[T][h])C+=n[T][h].Name;else if(n[0]&&n[0][h])C+=n[0][h].Name;else{var E=(mN(n,T,s)||"").split(";;");E[h-1]?C=E[h-1]:C+="SH33TJSERRX"}u.push(C);break}T<0&&(T=-T),n[T]&&(A=n[T][h]),A||(A={Name:"SH33TJSERRY"}),u.push(A.Name);break;case"PtgParen":var D="(",k=")";if(x>=0){switch(f="",e[0][x][1][0]){case 2:D=wf(" ",e[0][x][1][1])+D;break;case 3:D=wf("\r",e[0][x][1][1])+D;break;case 4:k=wf(" ",e[0][x][1][1])+k;break;case 5:k=wf("\r",e[0][x][1][1])+k;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}u.push(D+u.pop()+k);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":u.push("#REF!");break;case"PtgExp":l={c:y[1][1],r:y[1][0]};var R={c:r.c,r:r.r};if(n.sharedf[mv(l)]){var _=n.sharedf[mv(l)];u.push(pN(_,d,R,n,s))}else{var I=!1;for(a=0;a!=n.arrayf.length;++a)if(i=n.arrayf[a],!(l.c<i[0].s.c||l.c>i[0].e.c)&&!(l.r<i[0].s.r||l.r>i[0].e.r)){u.push(pN(i[1],d,R,n,s)),I=!0;break}I||u.push(y[1])}break;case"PtgArray":u.push("{"+dN(y[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=g;break;case"PtgMissArg":u.push("");break;case"PtgList":u.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(y))}if(3!=s.biff&&x>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][g][0])){var P=!0;switch((y=e[0][x])[1][0]){case 4:P=!1;case 0:f=wf(" ",y[1][1]);break;case 5:P=!1;case 1:f=wf("\r",y[1][1]);break;default:if(f="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}u.push((P?f:"")+u.pop()+(P?"":f)),x=-1}}if(u.length>1&&s.WTF)throw new Error("bad formula stack");return u[0]}function xN(e,t,r,n,s){var a=Oy(t,r,s),i=function(e){if(null==e){var t=ev(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return Wv("number"==typeof e?e:0)}(e.v),l=ev(6);l.write_shift(2,33),l.write_shift(4,0);for(var o=ev(e.bf.length),c=0;c<e.bf.length;++c)o[c]=e.bf[c];return ix([a,i,l,o])}function fN(e,t,r){var n=e.read_shift(4),s=cN(e,n,r),a=e.read_shift(4);return[s,a>0?oN(e,a,s,r):null]}var gN=fN,vN=fN,yN=fN,bN=fN,NN={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},jN={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},wN={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function SN(e){return("of:="+e.replace(Bb,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function AN(e){return e.replace(/\./,"!")}var TN="undefined"!==typeof Map;function CN(e,t,r){var n=0,s=e.length;if(r){if(TN?r.has(t):Object.prototype.hasOwnProperty.call(r,t))for(var a=TN?r.get(t):r[t];n<a.length;++n)if(e[a[n]].t===t)return e.Count++,a[n]}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t:t},e.Count++,e.Unique++,r&&(TN?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function EN(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(lb=t.MDW),null!=t.width?r.customWidth=1:null!=t.wpx?n=cb(t.wpx):null!=t.wch&&(n=t.wch),n>-1?(r.width=db(n),r.customWidth=1):null!=t.width&&(r.width=t.width),t.hidden&&(r.hidden=!0),null!=t.level&&(r.outlineLevel=r.level=t.level),r}function DN(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(r=[1,1,1,1,.5,.5]),null==e.left&&(e.left=r[0]),null==e.right&&(e.right=r[1]),null==e.top&&(e.top=r[2]),null==e.bottom&&(e.bottom=r[3]),null==e.header&&(e.header=r[4]),null==e.footer&&(e.footer=r[5])}}function kN(e,t,r){var n=r.revssf[null!=t.z?t.z:"General"],s=60,a=e.length;if(null==n&&r.ssf)for(;s<392;++s)if(null==r.ssf[s]){Jx(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}for(s=0;s!=a;++s)if(e[s].numFmtId===n)return s;return e[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function RN(e,t,r){if(e&&e["!ref"]){var n=xv(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}var _N=["objects","scenarios","selectLockedCells","selectUnlockedCells"],IN=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function PN(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var s="",a=e.t,i=e.v;if("z"!==e.t)switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=Zv[e.v];break;case"d":n&&n.cellDates?s=bf(e.v,-1).toISOString():((e=jf(e)).t="n",s=""+(e.v=mf(bf(e.v)))),"undefined"===typeof e.z&&(e.z=vx[14]);break;default:s=e.v}var l=$f("v",Pf(s)),o={r:t},c=kN(n.cellXfs,e,n);switch(0!==c&&(o.s=c),e.t){case"n":case"z":break;case"d":o.t="d";break;case"b":o.t="b";break;case"e":o.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=$f("v",""+CN(n.Strings,e.v,n.revStrings)),o.t="s";break}o.t="str"}if(e.t!=a&&(e.t=a,e.v=i),"string"==typeof e.f&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=Xf("f",Pf(e.f),d)+(null!=e.v?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(o.cm=1),Xf("c",l,o)}function ON(e,t,r,n){var s,a=[Df,Xf("worksheet",null,{xmlns:dg[0],"xmlns:r":ig})],i=r.SheetNames[e],l="",o=r.Sheets[i];null==o&&(o={});var c=o["!ref"]||"A1",d=xv(c);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=pv(d)}n||(n={}),o["!comments"]=[];var u=[];!function(e,t,r,n,s){var a=!1,i={},l=null;if("xlsx"!==n.bookType&&t.vbaraw){var o=t.SheetNames[r];try{t.Workbook&&(o=t.Workbook.Sheets[r].CodeName||o)}catch(mn){}a=!0,i.codeName=Vf(Pf(o))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),l=(l||"")+Xf("outlinePr",null,c)}(a||l)&&(s[s.length]=Xf("sheetPr",l,i))}(o,r,e,t,a),a[a.length]=Xf("dimension",null,{ref:c}),a[a.length]=function(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Xf("sheetViews",Xf("sheetView",null,s),{})}(0,0,0,r),t.sheetFormat&&(a[a.length]=Xf("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=o["!cols"]&&o["!cols"].length>0&&(a[a.length]=function(e,t){for(var r,n=["<cols>"],s=0;s!=t.length;++s)(r=t[s])&&(n[n.length]=Xf("col",null,EN(s,r)));return n[n.length]="</cols>",n.join("")}(0,o["!cols"])),a[s=a.length]="<sheetData/>",o["!links"]=[],null!=o["!ref"]&&(l=function(e,t){var r,n,s=[],a=[],i=xv(e["!ref"]),l="",o="",c=[],d=0,u=0,m=e["!rows"],h=Array.isArray(e),p={r:o},x=-1;for(u=i.s.c;u<=i.e.c;++u)c[u]=dv(u);for(d=i.s.r;d<=i.e.r;++d){for(a=[],o=ov(d),u=i.s.c;u<=i.e.c;++u){r=c[u]+o;var f=h?(e[d]||[])[u]:e[r];void 0!==f&&null!=(l=PN(f,r,e,t))&&a.push(l)}(a.length>0||m&&m[d])&&(p={r:o},m&&m[d]&&((n=m[d]).hidden&&(p.hidden=1),x=-1,n.hpx?x=hb(n.hpx):n.hpt&&(x=n.hpt),x>-1&&(p.ht=x,p.customHeight=1),n.level&&(p.outlineLevel=n.level)),s[s.length]=Xf("row",a.join(""),p))}if(m)for(;d<m.length;++d)m&&m[d]&&(p={r:d+1},(n=m[d]).hidden&&(p.hidden=1),x=-1,n.hpx?x=hb(n.hpx):n.hpt&&(x=n.hpt),x>-1&&(p.ht=x,p.customHeight=1),n.level&&(p.outlineLevel=n.level),s[s.length]=Xf("row","",p));return s.join("")}(o,t,0,0),l.length>0&&(a[a.length]=l)),a.length>s+1&&(a[a.length]="</sheetData>",a[s]=a[s].replace("/>",">")),o["!protect"]&&(a[a.length]=function(e){var t={sheet:1};return _N.forEach(function(r){null!=e[r]&&e[r]&&(t[r]="1")}),IN.forEach(function(r){null==e[r]||e[r]||(t[r]="0")}),e.password&&(t.password=sb(e.password).toString(16).toUpperCase()),Xf("sheetProtection",null,t)}(o["!protect"])),null!=o["!autofilter"]&&(a[a.length]=function(e,t,r,n){var s="string"==typeof e.ref?e.ref:pv(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,i=hv(s);i.s.r==i.e.r&&(i.e.r=hv(t["!ref"]).e.r,s=pv(i));for(var l=0;l<a.length;++l){var o=a[l];if("_xlnm._FilterDatabase"==o.Name&&o.Sheet==n){o.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Xf("autoFilter",null,{ref:s})}(o["!autofilter"],o,r,e)),null!=o["!merges"]&&o["!merges"].length>0&&(a[a.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+pv(e[r])+'"/>';return t+"</mergeCells>"}(o["!merges"]));var m,h,p=-1,x=-1;return o["!links"].length>0&&(a[a.length]="<hyperlinks>",o["!links"].forEach(function(e){e[1].Target&&(m={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(x=ay(n,-1,Pf(e[1].Target).replace(/#.*$/,""),ry.HLINK),m["r:id"]="rId"+x),(p=e[1].Target.indexOf("#"))>-1&&(m.location=Pf(e[1].Target.slice(p+1))),e[1].Tooltip&&(m.tooltip=Pf(e[1].Tooltip)),a[a.length]=Xf("hyperlink",null,m))}),a[a.length]="</hyperlinks>"),delete o["!links"],null!=o["!margins"]&&(a[a.length]=(DN(h=o["!margins"]),Xf("pageMargins",null,h))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(a[a.length]=$f("ignoredErrors",Xf("ignoredError",null,{numberStoredAsText:1,sqref:c}))),u.length>0&&(x=ay(n,-1,"../drawings/drawing"+(e+1)+".xml",ry.DRAW),a[a.length]=Xf("drawing",null,{"r:id":"rId"+x}),o["!drawing"]=u),o["!comments"].length>0&&(x=ay(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",ry.VML),a[a.length]=Xf("legacyDrawing",null,{"r:id":"rId"+x}),o["!legacy"]=x),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function LN(e,t,r,n){var s=function(e,t,r){var n=ev(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var a=320;s.hpx?a=20*hb(s.hpx):s.hpt&&(a=20*s.hpt),n.write_shift(2,a),n.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var l=0,o=n.l;n.l+=4;for(var c={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var u=-1,m=-1,h=d<<10;h<d+1<<10;++h)c.c=h,(Array.isArray(r)?(r[c.r]||[])[c.c]:r[mv(c)])&&(u<0&&(u=h),m=h);u<0||(++l,n.write_shift(4,u),n.write_shift(4,m))}var p=n.l;return n.l=o,n.write_shift(4,l),n.l=p,n.length>n.l?n.slice(0,n.l):n}(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&rv(e,0,s)}var FN=zv,MN=Gv;function UN(e){return[kv(e),Vv(e),"n"]}var BN=zv,HN=Gv;var zN=["left","right","top","bottom","header","footer"];function GN(e,t,r,n,s,a,i){if(void 0===t.v)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":(t=jf(t)).z=t.z||vx[14],t.v=mf(bf(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v}var o={r:r,c:n};switch(o.s=kN(s.cellXfs,t,s),t.l&&a["!links"].push([mv(o),t.l]),t.c&&a["!comments"].push([mv(o),t.c]),t.t){case"s":case"str":return s.bookSST?(l=CN(s.Strings,t.v,s.revStrings),o.t="s",o.v=l,i?rv(e,18,function(e,t,r){return null==r&&(r=ev(8)),Rv(t,r),r.write_shift(4,t.v),r}(0,o)):rv(e,7,function(e,t,r){return null==r&&(r=ev(12)),Dv(t,r),r.write_shift(4,t.v),r}(0,o))):(o.t="str",i?rv(e,17,function(e,t,r){return null==r&&(r=ev(8+4*e.v.length)),Rv(t,r),wv(e.v,r),r.length>r.l?r.slice(0,r.l):r}(t,o)):rv(e,6,function(e,t,r){return null==r&&(r=ev(12+4*e.v.length)),Dv(t,r),wv(e.v,r),r.length>r.l?r.slice(0,r.l):r}(t,o))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?i?rv(e,13,function(e,t,r){return null==r&&(r=ev(8)),Rv(t,r),Bv(e.v,r),r}(t,o)):rv(e,2,function(e,t,r){return null==r&&(r=ev(12)),Dv(t,r),Bv(e.v,r),r}(t,o)):i?rv(e,16,function(e,t,r){return null==r&&(r=ev(12)),Rv(t,r),Wv(e.v,r),r}(t,o)):rv(e,5,function(e,t,r){return null==r&&(r=ev(16)),Dv(t,r),Wv(e.v,r),r}(t,o)),!0;case"b":return o.t="b",i?rv(e,15,function(e,t,r){return null==r&&(r=ev(5)),Rv(t,r),r.write_shift(1,e.v?1:0),r}(t,o)):rv(e,4,function(e,t,r){return null==r&&(r=ev(9)),Dv(t,r),r.write_shift(1,e.v?1:0),r}(t,o)),!0;case"e":return o.t="e",i?rv(e,14,function(e,t,r){return null==r&&(r=ev(8)),Rv(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}(t,o)):rv(e,3,function(e,t,r){return null==r&&(r=ev(9)),Dv(t,r),r.write_shift(1,e.v),r}(t,o)),!0}return i?rv(e,12,function(e,t,r){return null==r&&(r=ev(4)),Rv(t,r)}(0,o)):rv(e,1,function(e,t,r){return null==r&&(r=ev(8)),Dv(t,r)}(0,o)),!0}function VN(e,t){t&&t["!merges"]&&(rv(e,177,function(e,t){return null==t&&(t=ev(4)),t.write_shift(4,e),t}(t["!merges"].length)),t["!merges"].forEach(function(t){rv(e,176,HN(t))}),rv(e,178))}function WN(e,t){t&&t["!cols"]&&(rv(e,390),t["!cols"].forEach(function(t,r){t&&rv(e,60,function(e,t,r){null==r&&(r=ev(18));var n=EN(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,256*(n.width||10)),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),"number"==typeof n.width&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}(r,t))}),rv(e,391))}function qN(e,t){t&&t["!ref"]&&(rv(e,648),rv(e,649,function(e){var t=ev(24);return t.write_shift(4,4),t.write_shift(4,1),Gv(e,t),t}(xv(t["!ref"]))),rv(e,650))}function $N(e,t,r){t["!links"].forEach(function(t){if(t[1].Target){var n=ay(r,-1,t[1].Target.replace(/#.*$/,""),ry.HLINK);rv(e,494,function(e,t){var r=ev(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Gv({s:uv(e[0]),e:uv(e[0])},r),Mv("rId"+t,r);var n=e[1].Target.indexOf("#");return wv((-1==n?"":e[1].Target.slice(n+1))||"",r),wv(e[1].Tooltip||"",r),wv("",r),r.slice(0,r.l)}(t,n))}}),delete t["!links"]}function KN(e,t,r){rv(e,133),rv(e,137,function(e,t,r){null==r&&(r=ev(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}(0,r)),rv(e,138),rv(e,134)}function XN(e,t){t["!protect"]&&rv(e,535,function(e,t){return null==t&&(t=ev(66)),t.write_shift(2,e.password?sb(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,null==e[r[0]]||e[r[0]]?0:1):t.write_shift(4,null!=e[r[0]]&&e[r[0]]?0:1)}),t}(t["!protect"]))}function YN(e,t,r,n){var s=tv(),a=r.SheetNames[e],i=r.Sheets[a]||{},l=a;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch(mn){}var o=xv(i["!ref"]||"A1");if(o.e.c>16383||o.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");o.e.c=Math.min(o.e.c,16383),o.e.r=Math.min(o.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],rv(s,129),(r.vbaraw||i["!outline"])&&rv(s,147,function(e,t,r){null==r&&(r=ev(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return qv({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Iv(e,r),r.slice(0,r.l)}(l,i["!outline"])),rv(s,148,MN(o)),KN(s,0,r.Workbook),WN(s,i),function(e,t,r,n){var s,a=xv(t["!ref"]||"A1"),i="",l=[];rv(e,145);var o=Array.isArray(t),c=a.e.r;t["!rows"]&&(c=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=c;++d){i=ov(d),LN(e,t,a,d);var u=!1;if(d<=a.e.r)for(var m=a.s.c;m<=a.e.c;++m){d===a.s.r&&(l[m]=dv(m)),s=l[m]+i;var h=o?(t[d]||[])[m]:t[s];u=!!h&&GN(e,h,d,m,n,t,u)}}rv(e,146)}(s,i,0,t),XN(s,i),function(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],a="string"===typeof s.ref?s.ref:pv(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,l=hv(a);l.s.r==l.e.r&&(l.e.r=hv(t["!ref"]).e.r,a=pv(l));for(var o=0;o<i.length;++o){var c=i[o];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),rv(e,161,Gv(xv(a))),rv(e,162)}}(s,i,r,e),VN(s,i),$N(s,i,n),i["!margins"]&&rv(s,476,function(e,t){return null==t&&(t=ev(48)),DN(e),zN.forEach(function(r){Wv(e[r],t)}),t}(i["!margins"])),t&&!t.ignoreEC&&void 0!=t.ignoreEC||qN(s,i),function(e,t,r,n){if(t["!comments"].length>0){var s=ay(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",ry.VML);rv(e,551,Mv("rId"+s)),t["!legacy"]=s}}(s,i,e,n),rv(s,130),s.end()}var JN=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var ZN="][*?/\\".split("");function QN(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var r=!0;return ZN.forEach(function(n){if(-1!=e.indexOf(n)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");r=!1}}),r}function ej(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];!function(e,t,r){e.forEach(function(n,s){QN(n);for(var a=0;a<s;++a)if(n==e[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[s]&&t[s].CodeName||n;if(95==i.charCodeAt(0)&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)RN(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function tj(e){var t=[Df];t[t.length]=Xf("workbook",null,{xmlns:dg[0],"xmlns:r":ig});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(JN.forEach(function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(n[t[0]]=e.Workbook.WBProps[t[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Xf("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&s[a]&&s[a].Hidden;++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var i={name:Pf(e.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden"}t[t.length]=Xf("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(e){var r={name:e.Name};e.Comment&&(r.comment=e.Comment),null!=e.Sheet&&(r.localSheetId=""+e.Sheet),e.Hidden&&(r.hidden="1"),e.Ref&&(t[t.length]=Xf("definedName",Pf(e.Ref),r))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function rj(e,t){return t||(t=ev(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),Mv(e.strRelID,t),wv(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function nj(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var r=t.Workbook.Sheets,n=0,s=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&-1==s?s=n:1==r[n].Hidden&&-1==a&&(a=n);a>s||(rv(e,135),rv(e,158,function(e,t){return t||(t=ev(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e),t.write_shift(1,120),t.length>t.l?t.slice(0,t.l):t}(s)),rv(e,136))}}function sj(e,t){var r=tv();return rv(r,131),rv(r,128,function(e,t){t||(t=ev(127));for(var r=0;4!=r;++r)t.write_shift(4,0);return wv("SheetJS",t),wv(Mp.version,t),wv(Mp.version,t),wv("7262",t),t.length>t.l?t.slice(0,t.l):t}()),rv(r,153,function(e,t){t||(t=ev(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Iv(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),nj(r,e),function(e,t){rv(e,143);for(var r=0;r!=t.SheetNames.length;++r)rv(e,156,rj({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]}));rv(e,144)}(r,e),rv(r,132),r.end()}function aj(e,t,r,n,s){return(".bin"===t.slice(-4)?YN:ON)(e,r,n,s)}function ij(e,t,r){return(".bin"===t.slice(-4)?Fb:Pb)(e,r)}function lj(e,t){var r=[];return e.Props&&r.push(function(e,t){var r=[];return lf(fy).map(function(e){for(var t=0;t<cy.length;++t)if(cy[t][1]==e)return cy[t];for(t=0;t<my.length;++t)if(my[t][1]==e)return my[t];throw e}).forEach(function(n){if(null!=e[n[1]]){var s=t&&t.Props&&null!=t.Props[n[1]]?t.Props[n[1]]:e[n[1]];"date"===n[2]&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof s?s=String(s):!0===s||!1===s?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push($f(fy[n[1]]||n[1],s))}}),Xf("DocumentProperties",r.join(""),{xmlns:ug})}(e.Props,t)),e.Custprops&&r.push(function(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&lf(e).forEach(function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var n=0;n<cy.length;++n)if(t==cy[n][1])return;for(n=0;n<my.length;++n)if(t==my[n][1])return;for(n=0;n<r.length;++n)if(t==r[n])return;var a=e[t],i="string";"number"==typeof a?(i="float",a=String(a)):!0===a||!1===a?(i="boolean",a=a?"1":"0"):a=String(a),s.push(Xf(Of(t),a,{"dt:dt":i}))}}),t&&lf(t).forEach(function(r){if(Object.prototype.hasOwnProperty.call(t,r)&&(!e||!Object.prototype.hasOwnProperty.call(e,r))){var n=t[r],a="string";"number"==typeof n?(a="float",n=String(n)):!0===n||!1===n?(a="boolean",n=n?"1":"0"):n instanceof Date?(a="dateTime.tz",n=n.toISOString()):n=String(n),s.push(Xf(Of(r),n,{"dt:dt":a}))}}),"<"+n+' xmlns="'+ug+'">'+s.join("")+"</"+n+">"}(e.Props,e.Custprops)),r.join("")}function oj(e){return Xf("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+Hb(e.Ref,{r:0,c:0})})}function cj(e,t,r,n,s,a,i){if(!e||void 0==e.v&&void 0==e.f)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Pf(Hb(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var o=uv(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(o.r==i.r?"":"["+(o.r-i.r)+"]")+"C"+(o.c==i.c?"":"["+(o.c-i.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Pf(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Pf(e.l.Tooltip))),r["!merges"])for(var c=r["!merges"],d=0;d!=c.length;++d)c[d].s.c==i.c&&c[d].s.r==i.r&&(c[d].e.c>c[d].s.c&&(l["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(l["ss:MergeDown"]=c[d].e.r-c[d].s.r));var u="",m="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":u="Number",m=String(e.v);break;case"b":u="Boolean",m=e.v?"1":"0";break;case"e":u="Error",m=Zv[e.v];break;case"d":u="DateTime",m=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||vx[14]);break;case"s":u="String",m=((e.v||"")+"").replace(_f,function(e){return Rf[e]}).replace(Lf,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}var h=kN(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+h),l["ss:Index"]=i.c+1;var p=null!=e.v?m:"",x="z"==e.t?"":'<Data ss:Type="'+u+'">'+p+"</Data>";return(e.c||[]).length>0&&(x+=e.c.map(function(e){var t=Xf("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return Xf("Comment",t,{"ss:Author":e.a})}).join("")),Xf("Cell",x,l)}function dj(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=pb(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function uj(e,t,r){var n=[],s=r.SheetNames[e],a=r.Sheets[s],i=a?function(e,t,r,n){if(!e)return"";if(!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],i=0;i<s.length;++i){var l=s[i];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||a.push(oj(l)))}return a.join("")}(a,0,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=a?function(e,t){if(!e["!ref"])return"";var r=xv(e["!ref"]),n=e["!merges"]||[],s=0,a=[];e["!cols"]&&e["!cols"].forEach(function(e,t){ub(e);var r=!!e.width,n=EN(t,e),s={"ss:Index":t+1};r&&(s["ss:Width"]=ob(n.width)),e.hidden&&(s["ss:Hidden"]="1"),a.push(Xf("Column",null,s))});for(var i=Array.isArray(e),l=r.s.r;l<=r.e.r;++l){for(var o=[dj(l,(e["!rows"]||[])[l])],c=r.s.c;c<=r.e.c;++c){var d=!1;for(s=0;s!=n.length;++s)if(!(n[s].s.c>c)&&!(n[s].s.r>l)&&!(n[s].e.c<c)&&!(n[s].e.r<l)){n[s].s.c==c&&n[s].s.r==l||(d=!0);break}if(!d){var u={r:l,c:c},m=mv(u),h=i?(e[l]||[])[c]:e[m];o.push(cj(h,m,e,t,0,0,u))}}o.push("</Row>"),o.length>2&&a.push(o.join(""))}return a.join("")}(a,t):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(function(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(Xf("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(Xf("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(Xf("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(Xf("Visible",1==n.Workbook.Sheets[r].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&(!n.Workbook.Sheets[a]||n.Workbook.Sheets[a].Hidden);++a);a==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push($f("ProtectContents","True")),e["!protect"].objects&&s.push($f("ProtectObjects","True")),e["!protect"].scenarios&&s.push($f("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||s.push($f("EnableSelection","UnlockedCells")):s.push($f("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(t){e["!protect"][t[0]]&&s.push("<"+t[1]+"/>")})),0==s.length?"":Xf("WorksheetOptions",s.join(""),{xmlns:mg})}(a,0,e,r)),n.join("")}function mj(e,t){t||(t={}),e.SSF||(e.SSF=jf(vx)),e.SSF&&(Qx(),Zx(e.SSF),t.revssf=df(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],kN(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(lj(e,t)),r.push(""),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Xf("Worksheet",uj(n,t,e),{"ss:Name":Pf(e.SheetNames[n])}));return r[2]=function(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(e,t){var n=[];n.push(Xf("NumberFormat",null,{"ss:Format":Pf(vx[e.numFmtId])}));var s={"ss:ID":"s"+(21+t)};r.push(Xf("Style",n.join(""),s))}),Xf("Styles",r.join(""))}(0,t),r[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];null==s.Sheet&&(s.Name.match(/^_xlfn\./)||r.push(oj(s)))}return Xf("Names",r.join(""))}(e),Df+Xf("Workbook",r.join(""),{xmlns:hg,"xmlns:o":ug,"xmlns:x":mg,"xmlns:ss":hg,"xmlns:dt":pg,"xmlns:html":gg})}var hj="e0859ff2f94f6810ab9108002b27b3d9",pj="02d5cdd59c2e1b10939708002b2cf9ae",xj="05d5cdd59c2e1b10939708002b2cf9ae";function fj(e,t){var r=t||{},n=rf.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return rf.utils.cfb_add(n,s,Cj(e,r)),8==r.biff&&(e.Props||e.Custprops)&&function(e,t){var r,n=[],s=[],a=[],i=0,l=of(Kv,"n"),o=of(Xv,"n");if(e.Props)for(r=lf(e.Props),i=0;i<r.length;++i)(Object.prototype.hasOwnProperty.call(l,r[i])?n:Object.prototype.hasOwnProperty.call(o,r[i])?s:a).push([r[i],e.Props[r[i]]]);if(e.Custprops)for(r=lf(e.Custprops),i=0;i<r.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},r[i])||(Object.prototype.hasOwnProperty.call(l,r[i])?n:Object.prototype.hasOwnProperty.call(o,r[i])?s:a).push([r[i],e.Custprops[r[i]]]);var c=[];for(i=0;i<a.length;++i)vy.indexOf(a[i][0])>-1||hy.indexOf(a[i][0])>-1||null!=a[i][1]&&c.push(a[i]);s.length&&rf.utils.cfb_add(t,"/\x05SummaryInformation",Ny(s,hj,o,Xv)),(n.length||c.length)&&rf.utils.cfb_add(t,"/\x05DocumentSummaryInformation",Ny(n,pj,l,Kv,c.length?c:null,xj))}(e,n),8==r.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach(function(r,n){if(0!=n){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==s.slice(-1)&&rf.utils.cfb_add(e,s,t.FileIndex[n].content)}})}(n,rf.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),n}var gj={0:{f:function(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,7&a&&(r.level=7&a),16&a&&(r.hidden=!0),32&a&&(r.hpt=s/20),r}},1:{f:function(e){return[Ev(e)]}},2:{f:function(e){return[Ev(e),Uv(e),"n"]}},3:{f:function(e){return[Ev(e),e.read_shift(1),"e"]}},4:{f:function(e){return[Ev(e),e.read_shift(1),"b"]}},5:{f:function(e){return[Ev(e),Vv(e),"n"]}},6:{f:function(e){return[Ev(e),jv(e),"str"]}},7:{f:function(e){return[Ev(e),e.read_shift(4),"s"]}},8:{f:function(e,t,r){var n=e.l+t,s=Ev(e);s.r=r["!row"];var a=[s,jv(e),"str"];if(r.cellFormula){e.l+=2;var i=vN(e,n-e.l,r);a[3]=pN(i,0,s,r.supbooks,r)}else e.l=n;return a}},9:{f:function(e,t,r){var n=e.l+t,s=Ev(e);s.r=r["!row"];var a=[s,Vv(e),"n"];if(r.cellFormula){e.l+=2;var i=vN(e,n-e.l,r);a[3]=pN(i,0,s,r.supbooks,r)}else e.l=n;return a}},10:{f:function(e,t,r){var n=e.l+t,s=Ev(e);s.r=r["!row"];var a=[s,e.read_shift(1),"b"];if(r.cellFormula){e.l+=2;var i=vN(e,n-e.l,r);a[3]=pN(i,0,s,r.supbooks,r)}else e.l=n;return a}},11:{f:function(e,t,r){var n=e.l+t,s=Ev(e);s.r=r["!row"];var a=[s,e.read_shift(1),"e"];if(r.cellFormula){e.l+=2;var i=vN(e,n-e.l,r);a[3]=pN(i,0,s,r.supbooks,r)}else e.l=n;return a}},12:{f:function(e){return[kv(e)]}},13:{f:function(e){return[kv(e),Uv(e),"n"]}},14:{f:function(e){return[kv(e),e.read_shift(1),"e"]}},15:{f:function(e){return[kv(e),e.read_shift(1),"b"]}},16:{f:UN},17:{f:function(e){return[kv(e),jv(e),"str"]}},18:{f:function(e){return[kv(e),e.read_shift(4),"s"]}},19:{f:Av},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),a=Lv(e),i=yN(e,0,r),l=Pv(e);e.l=n;var o={Name:a,Ptg:i};return s<268435455&&(o.Sheet=s),l&&(o.Comment=l),o}},40:{},42:{},43:{f:function(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1),700===e.read_shift(2)&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript"}var a=e.read_shift(1);0!=a&&(n.underline=a);var i=e.read_shift(1);i>0&&(n.family=i);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=function(e){var t={},r=e.read_shift(1)>>>1,n=e.read_shift(1),s=e.read_shift(2,"i"),a=e.read_shift(1),i=e.read_shift(1),l=e.read_shift(1);switch(e.l++,r){case 0:t.auto=1;break;case 1:t.index=n;var o=Jv[n];o&&(t.rgb=ib(o));break;case 2:t.rgb=ib([a,i,l]);break;case 3:t.theme=n}return 0!=s&&(t.tint=s>0?s/32767:s/32768),t}(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor"}return n.name=jv(e),n}},44:{f:function(e,t){return[e.read_shift(2),jv(e)]}},45:{f:bb},46:{f:Sb},47:{f:function(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:qy},62:{f:function(e){return[Ev(e),Av(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=mv(r);var n=e.read_shift(1);return 2&n&&(t.l="1"),8&n&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Qg,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var r={},n=e[e.l];return++e.l,r.above=!(64&n),r.left=!(128&n),e.l+=18,r.name=_v(e,t-19),r}},148:{f:FN,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?jv(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(65536&n),r.backupFile=!!(64&n),r.checkCompatibility=!!(4096&n),r.date1904=!!(1&n),r.filterPrivacy=!!(8&n),r.hidePivotFieldList=!!(1024&n),r.promptedSolutions=!!(16&n),r.publishItems=!!(2048&n),r.refreshAllConnections=!!(262144&n),r.saveExternalLinkValues=!!(128&n),r.showBorderUnselectedTables=!!(4&n),r.showInkAnnotation=!!(32&n),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(32768&n),r.updateLinks=["userSet","never","always"][n>>8&3],r}},154:{},155:{},156:{f:function(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=Fv(e,t-8),r.name=jv(e),r}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:zv},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:BN},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:jv(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Fv},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Gy},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,r){var n=e.l+t,s=Hv(e),a=e.read_shift(1),i=[s];if(i[2]=a,r.cellFormula){var l=gN(e,n-e.l,r);i[1]=l}else e.l=n;return i}},427:{f:function(e,t,r){var n=e.l+t,s=[zv(e,16)];if(r.cellFormula){var a=bN(e,n-e.l,r);s[1]=a,e.l=n}else e.l=n;return s}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return zN.forEach(function(r){t[r]=Vv(e)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var r=e.l+t,n=zv(e,16),s=Pv(e),a=jv(e),i=jv(e),l=jv(e);e.l=r;var o={rfx:n,relId:s,loc:a,display:l};return i&&(o.Tooltip=i),o}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Fv},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Lb},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var r=zv(e,16);return t.rfx=r.s,t.ref=mv(r.s),e.l+=16,t}},636:{T:-1},637:{f:Tv},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:jv(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function vj(e,t,r,n){var s=t;if(!isNaN(s)){var a=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&Mg(r)&&e.push(r)}}function yj(e,t,r){return e||(e=ev(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function bj(e,t,r,n){if(null!=t.v)switch(t.t){case"d":case"n":var s="d"==t.t?mf(bf(t.v)):t.v;return void(s==(0|s)&&s>=0&&s<65536?vj(e,2,function(e,t,r){var n=ev(9);return yj(n,e,t),n.write_shift(2,r),n}(r,n,s)):vj(e,3,function(e,t,r){var n=ev(15);return yj(n,e,t),n.write_shift(8,r,"f"),n}(r,n,s)));case"b":case"e":return void vj(e,5,function(e,t,r,n){var s=ev(9);return yj(s,e,t),Ty(r,n||"b",s),s}(r,n,t.v,t.t));case"s":case"str":return void vj(e,4,function(e,t,r){var n=ev(8+2*r.length);return yj(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}(r,n,(t.v||"").slice(0,255)))}vj(e,1,yj(null,r,n))}function Nj(e,t){var r=t||{};for(var n=tv(),s=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==r.sheet&&(s=a);if(0==s&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return vj(n,4==r.biff?1033:3==r.biff?521:9,Uy(0,16,r)),function(e,t,r,n){var s,a=Array.isArray(t),i=xv(t["!ref"]||"A1"),l="",o=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),s=pv(i)}for(var c=i.s.r;c<=i.e.r;++c){l=ov(c);for(var d=i.s.c;d<=i.e.c;++d){c===i.s.r&&(o[d]=dv(d)),s=o[d]+l;var u=a?(t[c]||[])[d]:t[s];u&&bj(e,u,c,d)}}}(n,e.Sheets[e.SheetNames[s]],0,r),vj(n,10),n.end()}function jj(e,t,r){vj(e,49,function(e,t){var r=e.name||"Arial",n=t&&5==t.biff,s=ev(n?15+r.length:16+2*r.length);return s.write_shift(2,20*(e.sz||12)),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},r))}function wj(e,t){if(t){var r=0;t.forEach(function(t,n){++r<=256&&t&&vj(e,125,function(e,t){var r=ev(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,256*e.width),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}(EN(n,t),n))})}}function Sj(e,t,r,n,s){var a=16+kN(s.cellXfs,t,s);if(null!=t.v||t.bf)if(t.bf)vj(e,6,xN(t,r,n,0,a));else switch(t.t){case"d":case"n":vj(e,515,function(e,t,r,n){var s=ev(14);return Oy(e,t,n,s),Wv(r,s),s}(r,n,"d"==t.t?mf(bf(t.v)):t.v,a));break;case"b":case"e":vj(e,517,function(e,t,r,n,s,a){var i=ev(8);return Oy(e,t,n,i),Ty(r,a,i),i}(r,n,t.v,a,0,t.t));break;case"s":case"str":if(s.bookSST)vj(e,253,function(e,t,r,n){var s=ev(10);return Oy(e,t,n,s),s.write_shift(4,r),s}(r,n,CN(s.Strings,t.v,s.revStrings),a));else vj(e,516,function(e,t,r,n,s){var a=!s||8==s.biff,i=ev(+a+8+(1+a)*r.length);return Oy(e,t,n,i),i.write_shift(2,r.length),a&&i.write_shift(1,1),i.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),i}(r,n,(t.v||"").slice(0,255),a,s));break;default:vj(e,513,Oy(r,n,a))}else vj(e,513,Oy(r,n,a))}function Aj(e,t,r){var n,s=tv(),a=r.SheetNames[e],i=r.Sheets[a]||{},l=(r||{}).Workbook||{},o=(l.Sheets||[])[e]||{},c=Array.isArray(i),d=8==t.biff,u="",m=[],h=xv(i["!ref"]||"A1"),p=d?65536:16384;if(h.e.c>255||h.e.r>=p){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,p-1)}vj(s,2057,Uy(0,16,t)),vj(s,13,Ay(1)),vj(s,12,Ay(100)),vj(s,15,wy(!0)),vj(s,17,wy(!1)),vj(s,16,Wv(.001)),vj(s,95,wy(!0)),vj(s,42,wy(!1)),vj(s,43,wy(!1)),vj(s,130,Ay(1)),vj(s,128,function(e){var t=ev(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),vj(s,131,wy(!1)),vj(s,132,wy(!1)),d&&wj(s,i["!cols"]),vj(s,512,function(e,t){var r=8!=t.biff&&t.biff?2:4,n=ev(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}(h,t)),d&&(i["!links"]=[]);for(var x=h.s.r;x<=h.e.r;++x){u=ov(x);for(var f=h.s.c;f<=h.e.c;++f){x===h.s.r&&(m[f]=dv(f)),n=m[f]+u;var g=c?(i[x]||[])[f]:i[n];g&&(Sj(s,g,x,f,t),d&&g.l&&i["!links"].push([n,g.l]))}}var v=o.CodeName||o.name||a;return d&&vj(s,574,function(e){var t=ev(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((l.Views||[])[0])),d&&(i["!merges"]||[]).length&&vj(s,229,function(e){var t=ev(2+8*e.length);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)My(e[r],t);return t}(i["!merges"])),d&&function(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];vj(e,440,Vy(n)),n[1].Tooltip&&vj(e,2048,Wy(n))}delete t["!links"]}(s,i),vj(s,442,_y(v)),d&&function(e,t){var r=ev(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),vj(e,2151,r),(r=ev(39)).write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),My(xv(t["!ref"]||"A1"),r),r.write_shift(4,4),vj(e,2152,r)}(s,i),vj(s,10),s.end()}function Tj(e,t,r){var n=tv(),s=(e||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},l=8==r.biff,o=5==r.biff;(vj(n,2057,Uy(0,5,r)),"xla"==r.bookType&&vj(n,135),vj(n,225,l?Ay(1200):null),vj(n,193,function(e,t){t||(t=ev(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}(2)),o&&vj(n,191),o&&vj(n,192),vj(n,226),vj(n,92,function(e,t){var r=!t||8==t.biff,n=ev(r?112:54);for(n.write_shift(8==t.biff?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}(0,r)),vj(n,66,Ay(l?1200:1252)),l&&vj(n,353,Ay(0)),l&&vj(n,448),vj(n,317,function(e){for(var t=ev(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}(e.SheetNames.length)),l&&e.vbaraw&&vj(n,211),l&&e.vbaraw)&&vj(n,442,_y(i.CodeName||"ThisWorkbook"));vj(n,156,Ay(17)),vj(n,25,wy(!1)),vj(n,18,wy(!1)),vj(n,19,Ay(0)),l&&vj(n,431,wy(!1)),l&&vj(n,444,Ay(0)),vj(n,61,function(){var e=ev(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),vj(n,64,wy(!1)),vj(n,141,Ay(0)),vj(n,34,wy("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&Mf(e.Workbook.WBProps.date1904)?"true":"false"}(e))),vj(n,14,wy(!0)),l&&vj(n,439,wy(!1)),vj(n,218,Ay(0)),jj(n,0,r),function(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)null!=t[s]&&vj(e,1054,Hy(s,t[s],r))})}(n,e.SSF,r),function(e,t){for(var r=0;r<16;++r)vj(e,224,zy({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(r){vj(e,224,zy(r,0,t))})}(n,r),l&&vj(n,352,wy(!1));var c=n.end(),d=tv();l&&vj(d,140,function(e){return e||(e=ev(4)),e.write_shift(2,1),e.write_shift(2,1),e}()),l&&r.Strings&&function(e,t,r,n){var s=n||(r||[]).length||0;if(s<=8224)return vj(e,t,r,s);var a=t;if(!isNaN(a)){for(var i=r.parts||[],l=0,o=0,c=0;c+(i[l]||8224)<=8224;)c+=i[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,a),d.write_shift(2,c),e.push(r.slice(o,o+c)),o+=c;o<s;){for((d=e.next(4)).write_shift(2,60),c=0;c+(i[l]||8224)<=8224;)c+=i[l]||8224,l++;d.write_shift(2,c),e.push(r.slice(o,o+c)),o+=c}}}(d,252,function(e){var t=ev(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var r=[],n=0;n<e.length;++n)r[n]=Ey(e[n]);var s=ix([t].concat(r));return s.parts=[t.length].concat(r.map(function(e){return e.length})),s}(r.Strings)),vj(d,10);var u=d.end(),m=tv(),h=0,p=0;for(p=0;p<e.SheetNames.length;++p)h+=(l?12:11)+(l?2:1)*e.SheetNames[p].length;var x=c.length+h+u.length;for(p=0;p<e.SheetNames.length;++p){vj(m,133,By({pos:x,hs:(a[p]||{}).Hidden||0,dt:0,name:e.SheetNames[p]},r)),x+=t[p].length}var f=m.end();if(h!=f.length)throw new Error("BS8 "+h+" != "+f.length);var g=[];return c.length&&g.push(c),f.length&&g.push(f),u.length&&g.push(u),ix(g)}function Cj(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(n&&n["!ref"])hv(n["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}var s=t||{};switch(s.biff||2){case 8:case 5:return function(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=jf(vx)),e&&e.SSF&&(Qx(),Zx(e.SSF),r.revssf=df(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,nw(r),r.cellXfs=[],kN(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=Aj(s,r,e);return n.unshift(Tj(e,n,r)),ix(n)}(e,t);case 4:case 3:case 2:return Nj(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function Ej(e,t,r,n){for(var s=e["!merges"]||[],a=[],i=t.s.c;i<=t.e.c;++i){for(var l=0,o=0,c=0;c<s.length;++c)if(!(s[c].s.r>r||s[c].s.c>i)&&!(s[c].e.r<r||s[c].e.c<i)){if(s[c].s.r<r||s[c].s.c<i){l=-1;break}l=s[c].e.r-s[c].s.r+1,o=s[c].e.c-s[c].s.c+1;break}if(!(l<0)){var d=mv({r:r,c:i}),u=n.dense?(e[r]||[])[i]:e[d],m=u&&null!=u.v&&(u.h||Ff(u.w||(gv(u),u.w)||""))||"",h={};l>1&&(h.rowspan=l),o>1&&(h.colspan=o),n.editable?m='<span contenteditable="true">'+m+"</span>":u&&(h["data-t"]=u&&u.t||"z",null!=u.v&&(h["data-v"]=u.v),null!=u.z&&(h["data-z"]=u.z),u.l&&"#"!=(u.l.Target||"#").charAt(0)&&(m='<a href="'+u.l.Target+'">'+m+"</a>")),h.id=(n.id||"sjs")+"-"+d,a.push(Xf("td",m,h))}}return"<tr>"+a.join("")+"</tr>"}var Dj='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',kj="</body></html>";function Rj(e,t,r){return[].join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function _j(e,t){var r=t||{},n=null!=r.header?r.header:Dj,s=null!=r.footer?r.footer:kj,a=[n],i=hv(e["!ref"]);r.dense=Array.isArray(e),a.push(Rj(0,0,r));for(var l=i.s.r;l<=i.e.r;++l)a.push(Ej(e,i,l,r));return a.push("</table>"+s),a.join("")}function Ij(e,t,r){var n=r||{};var s=0,a=0;if(null!=n.origin)if("number"==typeof n.origin)s=n.origin;else{var i="string"==typeof n.origin?uv(n.origin):n.origin;s=i.r,a=i.c}var l=t.getElementsByTagName("tr"),o=Math.min(n.sheetRows||1e7,l.length),c={s:{r:0,c:0},e:{r:s,c:a}};if(e["!ref"]){var d=hv(e["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),-1==s&&(c.e.r=s=d.e.r+1)}var u=[],m=0,h=e["!rows"]||(e["!rows"]=[]),p=0,x=0,f=0,g=0,v=0,y=0;for(e["!cols"]||(e["!cols"]=[]);p<l.length&&x<o;++p){var b=l[p];if(Oj(b)){if(n.display)continue;h[x]={hidden:!0}}var N=b.children;for(f=g=0;f<N.length;++f){var j=N[f];if(!n.display||!Oj(j)){var w=j.hasAttribute("data-v")?j.getAttribute("data-v"):j.hasAttribute("v")?j.getAttribute("v"):Wf(j.innerHTML),S=j.getAttribute("data-z")||j.getAttribute("z");for(m=0;m<u.length;++m){var A=u[m];A.s.c==g+a&&A.s.r<x+s&&x+s<=A.e.r&&(g=A.e.c+1-a,m=-1)}y=+j.getAttribute("colspan")||1,((v=+j.getAttribute("rowspan")||1)>1||y>1)&&u.push({s:{r:x+s,c:g+a},e:{r:x+s+(v||1)-1,c:g+a+(y||1)-1}});var T={t:"s",v:w},C=j.getAttribute("data-t")||j.getAttribute("t")||"";null!=w&&(0==w.length?T.t=C||"z":n.raw||0==w.trim().length||"s"==C||("TRUE"===w?T={t:"b",v:!0}:"FALSE"===w?T={t:"b",v:!1}:isNaN(Sf(w))?isNaN(Tf(w).getDate())||(T={t:"d",v:bf(w)},n.cellDates||(T={t:"n",v:mf(T.v)}),T.z=n.dateNF||vx[14]):T={t:"n",v:Sf(w)})),void 0===T.z&&null!=S&&(T.z=S);var E="",D=j.getElementsByTagName("A");if(D&&D.length)for(var k=0;k<D.length&&(!D[k].hasAttribute("href")||"#"==(E=D[k].getAttribute("href")).charAt(0));++k);E&&"#"!=E.charAt(0)&&(T.l={Target:E}),n.dense?(e[x+s]||(e[x+s]=[]),e[x+s][g+a]=T):e[mv({c:g+a,r:x+s})]=T,c.e.c<g+a&&(c.e.c=g+a),g+=y}}++x}return u.length&&(e["!merges"]=(e["!merges"]||[]).concat(u)),c.e.r=Math.max(c.e.r,x-1+s),e["!ref"]=pv(c),x>=o&&(e["!fullref"]=pv((c.e.r=l.length-p+x-1+s,c))),e}function Pj(e,t){return Ij((t||{}).dense?[]:{},e,t)}function Oj(e){var t="",r=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}var Lj=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Kf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Df+t}}(),Fj=function(){var e=function(e){return Pf(e).replace(/  +/g,function(e){return'<text:s text:c="'+e.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t="          <table:table-cell />\n",r=function(r,n,s){var a=[];a.push('      <table:table table:name="'+Pf(n.SheetNames[s])+'" table:style-name="ta1">\n');var i=0,l=0,o=hv(r["!ref"]||"A1"),c=r["!merges"]||[],d=0,u=Array.isArray(r);if(r["!cols"])for(l=0;l<=o.e.c;++l)a.push("        <table:table-column"+(r["!cols"][l]?' table:style-name="co'+r["!cols"][l].ods+'"':"")+"></table:table-column>\n");var m="",h=r["!rows"]||[];for(i=0;i<o.s.r;++i)m=h[i]?' table:style-name="ro'+h[i].ods+'"':"",a.push("        <table:table-row"+m+"></table:table-row>\n");for(;i<=o.e.r;++i){for(m=h[i]?' table:style-name="ro'+h[i].ods+'"':"",a.push("        <table:table-row"+m+">\n"),l=0;l<o.s.c;++l)a.push(t);for(;l<=o.e.c;++l){var p=!1,x={},f="";for(d=0;d!=c.length;++d)if(!(c[d].s.c>l)&&!(c[d].s.r>i)&&!(c[d].e.c<l)&&!(c[d].e.r<i)){c[d].s.c==l&&c[d].s.r==i||(p=!0),x["table:number-columns-spanned"]=c[d].e.c-c[d].s.c+1,x["table:number-rows-spanned"]=c[d].e.r-c[d].s.r+1;break}if(p)a.push("          <table:covered-table-cell/>\n");else{var g=mv({r:i,c:l}),v=u?(r[i]||[])[l]:r[g];if(v&&v.f&&(x["table:formula"]=Pf(SN(v.f)),v.F&&v.F.slice(0,g.length)==g)){var y=hv(v.F);x["table:number-matrix-columns-spanned"]=y.e.c-y.s.c+1,x["table:number-matrix-rows-spanned"]=y.e.r-y.s.r+1}if(v){switch(v.t){case"b":f=v.v?"TRUE":"FALSE",x["office:value-type"]="boolean",x["office:boolean-value"]=v.v?"true":"false";break;case"n":f=v.w||String(v.v||0),x["office:value-type"]="float",x["office:value"]=v.v||0;break;case"s":case"str":f=null==v.v?"":v.v,x["office:value-type"]="string";break;case"d":f=v.w||bf(v.v).toISOString(),x["office:value-type"]="date",x["office:date-value"]=bf(v.v).toISOString(),x["table:style-name"]="ce1";break;default:a.push(t);continue}var b=e(f);if(v.l&&v.l.Target){var N=v.l.Target;"#"==(N="#"==N.charAt(0)?"#"+AN(N.slice(1)):N).charAt(0)||N.match(/^\w+:/)||(N="../"+N),b=Xf("text:a",b,{"xlink:href":N.replace(/&/g,"&amp;")})}a.push("          "+Xf("table:table-cell",Xf("text:p",b,{}),x)+"\n")}else a.push(t)}}a.push("        </table:table-row>\n")}return a.push("      </table:table>\n"),a.join("")};return function(e,t){var n=[Df],s=Kf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),a=Kf({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==t.bookType?(n.push("<office:document"+s+a+">\n"),n.push(oy().replace(/office:document-meta/g,"office:meta"))):n.push("<office:document-content"+s+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var r=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!cols"])for(var n=0;n<t["!cols"].length;++n)if(t["!cols"][n]){var s=t["!cols"][n];if(null==s.width&&null==s.wpx&&null==s.wch)continue;ub(s),s.ods=r;var a=t["!cols"][n].wpx+"px";e.push('  <style:style style:name="co'+r+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+a+'"/>\n'),e.push("  </style:style>\n"),++r}});var n=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!rows"])for(var r=0;r<t["!rows"].length;++r)if(t["!rows"][r]){t["!rows"][r].ods=n;var s=t["!rows"][r].hpx+"px";e.push('  <style:style style:name="ro'+n+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+s+'"/>\n'),e.push("  </style:style>\n"),++n}}),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(n,e),n.push("  <office:body>\n"),n.push("    <office:spreadsheet>\n");for(var i=0;i!=e.SheetNames.length;++i)n.push(r(e.Sheets[e.SheetNames[i]],e,i));return n.push("    </office:spreadsheet>\n"),n.push("  </office:body>\n"),"fods"==t.bookType?n.push("</office:document>"):n.push("</office:document-content>"),n.join("")}}();function Mj(e,t){if("fods"==t.bookType)return Fj(e,t);var r=Ef(),n="",s=[],a=[];return Cf(r,n="mimetype","application/vnd.oasis.opendocument.spreadsheet"),Cf(r,n="content.xml",Fj(e,t)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),Cf(r,n="styles.xml",Lj(e,t)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),Cf(r,n="meta.xml",Df+oy()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),Cf(r,n="manifest.rdf",function(e){var t=[Df];t.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var r=0;r!=e.length;++r)t.push(iy(e[r][0],e[r][1])),t.push(ly("",e[r][0]));return t.push(iy("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}(a)),s.push([n,"application/rdf+xml"]),Cf(r,n="META-INF/manifest.xml",function(e){var t=[Df];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(s)),r}function Uj(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Bj(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):nx(Vf(e))}function Hj(e){var t=e.reduce(function(e,t){return e+t.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(e){r.set(e,n),n+=e.length}),r}function zj(e,t){var r=t?t[0]:0,n=127&e[r];e:if(e[r++]>=128){if(n|=(127&e[r])<<7,e[r++]<128)break e;if(n|=(127&e[r])<<14,e[r++]<128)break e;if(n|=(127&e[r])<<21,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,28),++r,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,35),++r,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,42),++r,e[r++]<128)break e}return t&&(t[0]=r),n}function Gj(e){var t=new Uint8Array(7);t[0]=127&e;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383)break e;if(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)break e;if(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)break e;if(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)break e;if(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103)break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Vj(e){var t=0,r=127&e[t];e:if(e[t++]>=128){if(r|=(127&e[t])<<7,e[t++]<128)break e;if(r|=(127&e[t])<<14,e[t++]<128)break e;if(r|=(127&e[t])<<21,e[t++]<128)break e;r|=(127&e[t])<<28}return r}function Wj(e){for(var t=[],r=[0];r[0]<e.length;){var n,s=r[0],a=zj(e,r),i=7&a,l=0;if(0==(a=Math.floor(a/8)))break;switch(i){case 0:for(var o=r[0];e[r[0]++]>=128;);n=e.slice(o,r[0]);break;case 5:l=4,n=e.slice(r[0],r[0]+l),r[0]+=l;break;case 1:l=8,n=e.slice(r[0],r[0]+l),r[0]+=l;break;case 2:l=zj(e,r),n=e.slice(r[0],r[0]+l),r[0]+=l;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(s))}var c={data:n,type:i};null==t[a]?t[a]=[c]:t[a].push(c)}return t}function qj(e){var t=[];return e.forEach(function(e,r){e.forEach(function(e){e.data&&(t.push(Gj(8*r+e.type)),2==e.type&&t.push(Gj(e.data.length)),t.push(e.data))})}),Hj(t)}function $j(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=zj(e,n),a=Wj(e.slice(n[0],n[0]+s));n[0]+=s;var i={id:Vj(a[1][0].data),messages:[]};a[2].forEach(function(t){var r=Wj(t.data),s=Vj(r[3][0].data);i.messages.push({meta:r,data:e.slice(n[0],n[0]+s)}),n[0]+=s}),(null==(t=a[3])?void 0:t[0])&&(i.merge=Vj(a[3][0].data)>>>0>0),r.push(i)}return r}function Kj(e){var t=[];return e.forEach(function(e){var r=[];r[1]=[{data:Gj(e.id),type:0}],r[2]=[],null!=e.merge&&(r[3]=[{data:Gj(+!!e.merge),type:0}]);var n=[];e.messages.forEach(function(e){n.push(e.data),e.meta[3]=[{type:0,data:Gj(e.data.length)}],r[2].push({data:qj(e.meta),type:2})});var s=qj(r);t.push(Gj(s.length)),t.push(s),n.forEach(function(e){return t.push(e)})}),Hj(t)}function Xj(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=zj(t,r),s=[];r[0]<t.length;){var a=3&t[r[0]];if(0!=a){var i=0,l=0;if(1==a?(l=4+(t[r[0]]>>2&7),i=(224&t[r[0]++])<<3,i|=t[r[0]++]):(l=1+(t[r[0]++]>>2),2==a?(i=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(i=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Hj(s)],0==i)throw new Error("Invalid offset 0");if(i>s[0].length)throw new Error("Invalid offset beyond length");if(l>=i)for(s.push(s[0].slice(-i)),l-=i;l>=s[s.length-1].length;)s.push(s[s.length-1]),l-=s[s.length-1].length;s.push(s[0].slice(-i,-i+l))}else{var o=t[r[0]++]>>2;if(o<60)++o;else{var c=o-59;o=t[r[0]],c>1&&(o|=t[r[0]+1]<<8),c>2&&(o|=t[r[0]+2]<<16),c>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=c}s.push(t.slice(r[0],r[0]+o)),r[0]+=o}}var d=Hj(s);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Yj(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Xj(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Hj(t)}function Jj(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var a=Gj(n),i=a.length;t.push(a),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,s[0]=0,s[1]=255&i,s[2]=i>>8&255,s[3]=i>>16&255,r+=n}return Hj(t)}function Zj(e,t){var r=new Uint8Array(32),n=Uj(r),s=12,a=0;switch(r[0]=5,e.t){case"n":r[1]=2,function(e,t,r){var n=Math.floor(0==r?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(127&n)<<1;for(var a=0;s>=1;++a,s/=256)e[t+a]=255&s;e[t+15]|=r>=0?0:128}(r,s,e.v),a|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),a|=2,s+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,a,!0),r.slice(0,s)}function Qj(e,t){var r=new Uint8Array(32),n=Uj(r),s=12,a=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),a|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),a|=32,s+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,a,!0),r.slice(0,s)}function ew(e){return zj(Wj(e)[1][0].data)}function tw(e,t,r){var n,s,a,i;if(!(null==(n=e[6])?void 0:n[0])||!(null==(s=e[7])?void 0:s[0]))throw"Mutation only works on post-BNC storages!";if((null==(i=null==(a=e[8])?void 0:a[0])?void 0:i.data)&&Vj(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var l=0,o=Uj(e[7][0].data),c=0,d=[],u=Uj(e[4][0].data),m=0,h=[],p=0;p<t.length;++p)if(null!=t[p]){var x,f;switch(o.setUint16(2*p,c,!0),u.setUint16(2*p,m,!0),typeof t[p]){case"string":x=Zj({t:"s",v:t[p]},r),f=Qj({t:"s",v:t[p]},r);break;case"number":x=Zj({t:"n",v:t[p]},r),f=Qj({t:"n",v:t[p]},r);break;case"boolean":x=Zj({t:"b",v:t[p]},r),f=Qj({t:"b",v:t[p]},r);break;default:throw new Error("Unsupported value "+t[p])}d.push(x),c+=x.length,h.push(f),m+=f.length,++l}else o.setUint16(2*p,65535,!0),u.setUint16(2*p,65535);for(e[2][0].data=Gj(l);p<e[7][0].data.length/2;++p)o.setUint16(2*p,65535,!0),u.setUint16(2*p,65535,!0);return e[6][0].data=Hj(d),e[3][0].data=Hj(h),l}function rw(e){return function(t){for(var r=0;r!=e.length;++r){var n=e[r];void 0===t[n[0]]&&(t[n[0]]=n[1]),"n"===n[2]&&(t[n[0]]=Number(t[n[0]]))}}}function nw(e){rw([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function sw(e,t){return"ods"==t.bookType?Mj(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=hv(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(pv(n)));var a=xw(r,{range:n,header:1}),i=["~Sh33tJ5~"];a.forEach(function(e){return e.forEach(function(e){"string"==typeof e&&i.push(e)})});var l={},o=[],c=rf.read(t.numbers,{type:"base64"});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0],r=e[1];2==t.type&&t.name.match(/\.iwa/)&&$j(Yj(t.content)).forEach(function(e){o.push(e.id),l[e.id]={deps:[],location:r,type:Vj(e.messages[0].meta[1][0].data)}})}),o.sort(function(e,t){return e-t});var d=o.filter(function(e){return e>1}).map(function(e){return[e,Gj(e)]});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&$j(Yj(t.content)).forEach(function(e){e.messages.forEach(function(t){d.forEach(function(t){e.messages.some(function(e){return 11006!=Vj(e.meta[1][0].data)&&function(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}(e.data,t[1])})&&l[t[0]].deps.push(e.id)})})})});for(var u,m=rf.find(c,l[1].location),h=$j(Yj(m.content)),p=0;p<h.length;++p){var x=h[p];1==x.id&&(u=x)}var f=ew(Wj(u.messages[0].data)[1][0].data);for(h=$j(Yj((m=rf.find(c,l[f].location)).content)),p=0;p<h.length;++p)(x=h[p]).id==f&&(u=x);for(f=ew(Wj(u.messages[0].data)[2][0].data),h=$j(Yj((m=rf.find(c,l[f].location)).content)),p=0;p<h.length;++p)(x=h[p]).id==f&&(u=x);for(f=ew(Wj(u.messages[0].data)[2][0].data),h=$j(Yj((m=rf.find(c,l[f].location)).content)),p=0;p<h.length;++p)(x=h[p]).id==f&&(u=x);var g=Wj(u.messages[0].data);g[6][0].data=Gj(n.e.r+1),g[7][0].data=Gj(n.e.c+1);for(var v=ew(g[46][0].data),y=rf.find(c,l[v].location),b=$j(Yj(y.content)),N=0;N<b.length&&b[N].id!=v;++N);if(b[N].id!=v)throw"Bad ColumnRowUIDMapArchive";var j=Wj(b[N].messages[0].data);j[1]=[],j[2]=[],j[3]=[];for(var w=0;w<=n.e.c;++w){var S=[];S[1]=S[2]=[{type:0,data:Gj(w+420690)}],j[1].push({type:2,data:qj(S)}),j[2].push({type:0,data:Gj(w)}),j[3].push({type:0,data:Gj(w)})}j[4]=[],j[5]=[],j[6]=[];for(var A=0;A<=n.e.r;++A)(S=[])[1]=S[2]=[{type:0,data:Gj(A+726270)}],j[4].push({type:2,data:qj(S)}),j[5].push({type:0,data:Gj(A)}),j[6].push({type:0,data:Gj(A)});b[N].messages[0].data=qj(j),y.content=Jj(Kj(b)),y.size=y.content.length,delete g[46];var T=Wj(g[4][0].data);T[7][0].data=Gj(n.e.r+1);var C=ew(Wj(T[1][0].data)[2][0].data);if((b=$j(Yj((y=rf.find(c,l[C].location)).content)))[0].id!=C)throw"Bad HeaderStorageBucket";var E=Wj(b[0].messages[0].data);for(A=0;A<a.length;++A){var D=Wj(E[2][0].data);D[1][0].data=Gj(A),D[4][0].data=Gj(a[A].length),E[2][A]={type:E[2][0].type,data:qj(D)}}b[0].messages[0].data=qj(E),y.content=Jj(Kj(b)),y.size=y.content.length;var k=ew(T[2][0].data);if((b=$j(Yj((y=rf.find(c,l[k].location)).content)))[0].id!=k)throw"Bad HeaderStorageBucket";for(E=Wj(b[0].messages[0].data),w=0;w<=n.e.c;++w)(D=Wj(E[2][0].data))[1][0].data=Gj(w),D[4][0].data=Gj(n.e.r+1),E[2][w]={type:E[2][0].type,data:qj(D)};b[0].messages[0].data=qj(E),y.content=Jj(Kj(b)),y.size=y.content.length;var R=ew(T[4][0].data);!function(){for(var e,t=rf.find(c,l[R].location),r=$j(Yj(t.content)),n=0;n<r.length;++n){var s=r[n];s.id==R&&(e=s)}var a=Wj(e.messages[0].data);a[3]=[];var o=[];i.forEach(function(e,t){o[1]=[{type:0,data:Gj(t)}],o[2]=[{type:0,data:Gj(1)}],o[3]=[{type:2,data:Bj(e)}],a[3].push({type:2,data:qj(o)})}),e.messages[0].data=qj(a);var d=Jj(Kj(r));t.content=d,t.size=t.content.length}();var _=Wj(T[3][0].data),I=_[1][0];delete _[2];var P=Wj(I.data),O=ew(P[2][0].data);!function(){for(var e,t=rf.find(c,l[O].location),r=$j(Yj(t.content)),s=0;s<r.length;++s){var o=r[s];o.id==O&&(e=o)}var d=Wj(e.messages[0].data);delete d[6],delete _[7];var u=new Uint8Array(d[5][0].data);d[5]=[];for(var m=0,h=0;h<=n.e.r;++h){var p=Wj(u);m+=tw(p,a[h],i),p[1][0].data=Gj(h),d[5].push({data:qj(p),type:2})}d[1]=[{type:0,data:Gj(n.e.c+1)}],d[2]=[{type:0,data:Gj(n.e.r+1)}],d[3]=[{type:0,data:Gj(m)}],d[4]=[{type:0,data:Gj(n.e.r+1)}],e.messages[0].data=qj(d);var x=Jj(Kj(r));t.content=x,t.size=t.content.length}(),I.data=qj(P),T[3][0].data=qj(_),g[4][0].data=qj(T),u.messages[0].data=qj(g);var L=Jj(Kj(h));return m.content=L,m.size=m.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){_b=1024,e&&!e.SSF&&(e.SSF=jf(vx));e&&e.SSF&&(Qx(),Zx(e.SSF),t.revssf=df(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,TN?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xlsb"==t.bookType?"bin":"xml",n=Mb.indexOf(t.bookType)>-1,s={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};nw(t=t||{});var a=Ef(),i="",l=0;t.cellXfs=[],kN(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(i="docProps/core.xml",Cf(a,i,uy(e.Props,t)),s.coreprops.push(i),ay(t.rels,2,i,ry.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var o=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&o.push(e.SheetNames[c]);e.Props.SheetNames=o}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,Cf(a,i,py(e.Props)),s.extprops.push(i),ay(t.rels,3,i,ry.EXT_PROPS),e.Custprops!==e.Props&&lf(e.Custprops||{}).length>0&&(Cf(a,i="docProps/custom.xml",xy(e.Custprops)),s.custprops.push(i),ay(t.rels,4,i,ry.CUST_PROPS));for(l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},u=e.Sheets[e.SheetNames[l-1]];(u||{})["!type"];if(Cf(a,i="xl/worksheets/sheet"+l+"."+r,aj(l-1,i,t,e,d)),s.sheets.push(i),ay(t.wbrels,-1,"worksheets/sheet"+l+"."+r,ry.WS[0]),u){var m=u["!comments"],h=!1,p="";m&&m.length>0&&(Cf(a,p="xl/comments"+l+"."+r,ij(m,p,t)),s.comments.push(p),ay(d,-1,"../comments"+l+"."+r,ry.CMNT),h=!0),u["!legacy"]&&h&&Cf(a,"xl/drawings/vmlDrawing"+l+".vml",Ib(l,u["!comments"])),delete u["!comments"],delete u["!legacy"]}d["!id"].rId1&&Cf(a,ny(i),sy(d))}null!=t.Strings&&t.Strings.length>0&&(Cf(a,i="xl/sharedStrings."+r,function(e,t,r){return(".bin"===t.slice(-4)?rb:eb)(e,r)}(t.Strings,i,t)),s.strs.push(i),ay(t.wbrels,-1,"sharedStrings."+r,ry.SST));i="xl/workbook."+r,Cf(a,i,function(e,t,r){return(".bin"===t.slice(-4)?sj:tj)(e,r)}(e,i,t)),s.workbooks.push(i),ay(t.rels,1,i,ry.WB),i="xl/theme/theme1.xml",Cf(a,i,Db(e.Themes,t)),s.themes.push(i),ay(t.wbrels,-1,"theme/theme1.xml",ry.THEME),i="xl/styles."+r,Cf(a,i,function(e,t,r){return(".bin"===t.slice(-4)?Eb:xb)(e,r)}(e,i,t)),s.styles.push(i),ay(t.wbrels,-1,"styles."+r,ry.STY),e.vbaraw&&n&&(Cf(a,i="xl/vbaProject.bin",e.vbaraw),s.vba.push(i),ay(t.wbrels,-1,"vbaProject.bin",ry.VBA));return i="xl/metadata."+r,Cf(a,i,function(e){return(".bin"===e.slice(-4)?kb:Rb)()}(i)),s.metadata.push(i),ay(t.wbrels,-1,"metadata."+r,ry.XLMETA),Cf(a,"[Content_Types].xml",ty(s,t)),Cf(a,"_rels/.rels",sy(t.rels)),Cf(a,"xl/_rels/workbook."+r+".rels",sy(t.wbrels)),delete t.revssf,delete t.ssf,a}(e,t):aw(e,t)}function aw(e,t){_b=1024,e&&!e.SSF&&(e.SSF=jf(vx)),e&&e.SSF&&(Qx(),Zx(e.SSF),t.revssf=df(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,TN?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Mb.indexOf(t.bookType)>-1,s={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};nw(t=t||{});var a=Ef(),i="",l=0;if(t.cellXfs=[],kN(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),Cf(a,i="docProps/core.xml",uy(e.Props,t)),s.coreprops.push(i),ay(t.rels,2,i,ry.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var o=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&o.push(e.SheetNames[c]);e.Props.SheetNames=o}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,Cf(a,i,py(e.Props)),s.extprops.push(i),ay(t.rels,3,i,ry.EXT_PROPS),e.Custprops!==e.Props&&lf(e.Custprops||{}).length>0&&(Cf(a,i="docProps/custom.xml",xy(e.Custprops)),s.custprops.push(i),ay(t.rels,4,i,ry.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var u={"!id":{}},m=e.Sheets[e.SheetNames[l-1]];(m||{})["!type"];if(Cf(a,i="xl/worksheets/sheet"+l+"."+r,ON(l-1,t,e,u)),s.sheets.push(i),ay(t.wbrels,-1,"worksheets/sheet"+l+"."+r,ry.WS[0]),m){var h=m["!comments"],p=!1,x="";if(h&&h.length>0){var f=!1;h.forEach(function(e){e[1].forEach(function(e){1==e.T&&(f=!0)})}),f&&(Cf(a,x="xl/threadedComments/threadedComment"+l+"."+r,Ob(h,d,t)),s.threadedcomments.push(x),ay(u,-1,"../threadedComments/threadedComment"+l+"."+r,ry.TCMNT)),Cf(a,x="xl/comments"+l+"."+r,Pb(h)),s.comments.push(x),ay(u,-1,"../comments"+l+"."+r,ry.CMNT),p=!0}m["!legacy"]&&p&&Cf(a,"xl/drawings/vmlDrawing"+l+".vml",Ib(l,m["!comments"])),delete m["!comments"],delete m["!legacy"]}u["!id"].rId1&&Cf(a,ny(i),sy(u))}return null!=t.Strings&&t.Strings.length>0&&(Cf(a,i="xl/sharedStrings."+r,eb(t.Strings,t)),s.strs.push(i),ay(t.wbrels,-1,"sharedStrings."+r,ry.SST)),Cf(a,i="xl/workbook."+r,tj(e)),s.workbooks.push(i),ay(t.rels,1,i,ry.WB),Cf(a,i="xl/theme/theme1.xml",Db(e.Themes,t)),s.themes.push(i),ay(t.wbrels,-1,"theme/theme1.xml",ry.THEME),Cf(a,i="xl/styles."+r,xb(e,t)),s.styles.push(i),ay(t.wbrels,-1,"styles."+r,ry.STY),e.vbaraw&&n&&(Cf(a,i="xl/vbaProject.bin",e.vbaraw),s.vba.push(i),ay(t.wbrels,-1,"vbaProject.bin",ry.VBA)),Cf(a,i="xl/metadata."+r,Rb()),s.metadata.push(i),ay(t.wbrels,-1,"metadata."+r,ry.XLMETA),d.length>1&&(Cf(a,i="xl/persons/person.xml",function(e){var t=[Df,Xf("personList",null,{xmlns:rg,"xmlns:x":dg[0]}).replace(/[\/]>/,">")];return e.forEach(function(e,r){t.push(Xf("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}(d)),s.people.push(i),ay(t.wbrels,-1,"persons/person.xml",ry.PEOPLE)),Cf(a,"[Content_Types].xml",ty(s,t)),Cf(a,"_rels/.rels",sy(t.rels)),Cf(a,"xl/_rels/workbook.xml.rels",sy(t.wbrels)),delete t.revssf,delete t.ssf,a}function iw(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Zp(e.slice(0,12));break;case"binary":r=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function lw(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return af(t.file,rf.write(e,{type:Qp?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return rf.write(e,t)}function ow(e,t){var r={},n=Qp?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?rf.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if("undefined"!==typeof Deno&&"string"==typeof s){if("binary"==t.type||"base64"==t.type)return s;s=new Uint8Array(sx(s))}return t.password&&"undefined"!==typeof encrypt_agile?lw(encrypt_agile(s,t.password),t):"file"===t.type?af(t.file,s):"string"==t.type?Gf(s):s}function cw(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Jp(Vf(n));case"binary":return Vf(n);case"string":return e;case"file":return af(t.file,n,"utf8");case"buffer":return Qp?ex(n,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(n):cw(n,{type:"binary"}).split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function dw(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return"base64"==t.type?Jp(r):"string"==t.type?Gf(r):r;case"file":return af(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function uw(e,t){Wp(),ej(e);var r=jf(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),"array"==r.type){r.type="binary";var n=uw(e,r);return r.type="array",sx(n)}var s=0;if(r.sheet&&(s="number"==typeof r.sheet?r.sheet:e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return cw(mj(e,r),r);case"slk":case"sylk":return cw(Ky.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return cw(_j(e.Sheets[e.SheetNames[s]],r),r);case"txt":return function(e,t){switch(t.type){case"base64":return Jp(e);case"binary":case"string":return e;case"file":return af(t.file,e,"binary");case"buffer":return Qp?ex(e,"binary"):e.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}(yw(e.Sheets[e.SheetNames[s]],r),r);case"csv":return cw(vw(e.Sheets[e.SheetNames[s]],r),r,"\ufeff");case"dif":return cw(Xy.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return dw($y.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return cw(Jy.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return cw(ab.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return cw(Yy.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return cw(Mj(e,r),r);case"wk1":return dw(Zy.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return dw(Zy.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),dw(Cj(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),function(e,t){var r=t||{};return lw(fj(e,r),r)}(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var r=jf(t||{});return ow(sw(e,r),r)}(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function mw(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function hw(e,t,r){var n=r||{};return n.type="file",n.file=t,mw(n),uw(e,n)}function pw(e,t,r,n,s,a,i,l){var o=ov(r),c=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),u=!0,m=1===s?[]:{};if(1!==s)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch(mn){m.__rowNum__=r}else m.__rowNum__=r;if(!i||e[r])for(var h=t.s.c;h<=t.e.c;++h){var p=i?e[r][h]:e[n[h]+o];if(void 0!==p&&void 0!==p.t){var x=p.v;switch(p.t){case"z":if(null==x)break;continue;case"e":x=0==x?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(null!=a[h]){if(null==x)if("e"==p.t&&null===x)m[a[h]]=null;else if(void 0!==c)m[a[h]]=c;else{if(!d||null!==x)continue;m[a[h]]=null}else m[a[h]]=d&&("n"!==p.t||"n"===p.t&&!1!==l.rawNumbers)?x:gv(p,x,l);null!=x&&(u=!1)}}else{if(void 0===c)continue;null!=a[h]&&(m[a[h]]=c)}}return{row:m,isempty:u}}function xw(e,t){if(null==e||null==e["!ref"])return[];var r={t:"n",v:0},n=0,s=1,a=[],i=0,l="",o={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},d=null!=c.range?c.range:e["!ref"];switch(1===c.header?n=1:"A"===c.header?n=2:Array.isArray(c.header)?n=3:null==c.header&&(n=0),typeof d){case"string":o=xv(d);break;case"number":(o=xv(e["!ref"])).s.r=d;break;default:o=d}n>0&&(s=0);var u=ov(o.s.r),m=[],h=[],p=0,x=0,f=Array.isArray(e),g=o.s.r,v=0,y={};f&&!e[g]&&(e[g]=[]);var b=c.skipHidden&&e["!cols"]||[],N=c.skipHidden&&e["!rows"]||[];for(v=o.s.c;v<=o.e.c;++v)if(!(b[v]||{}).hidden)switch(m[v]=dv(v),r=f?e[g][v]:e[m[v]+u],n){case 1:a[v]=v-o.s.c;break;case 2:a[v]=m[v];break;case 3:a[v]=c.header[v-o.s.c];break;default:if(null==r&&(r={w:"__EMPTY",t:"s"}),l=i=gv(r,null,c),x=y[i]||0){do{l=i+"_"+x++}while(y[l]);y[i]=x,y[l]=1}else y[i]=1;a[v]=l}for(g=o.s.r+s;g<=o.e.r;++g)if(!(N[g]||{}).hidden){var j=pw(e,o,g,m,n,a,f,c);(!1===j.isempty||(1===n?!1!==c.blankrows:c.blankrows))&&(h[p++]=j.row)}return h.length=p,h}var fw=/"/g;function gw(e,t,r,n,s,a,i,l){for(var o=!0,c=[],d="",u=ov(r),m=t.s.c;m<=t.e.c;++m)if(n[m]){var h=l.dense?(e[r]||[])[m]:e[n[m]+u];if(null==h)d="";else if(null!=h.v){o=!1,d=""+(l.rawNumbers&&"n"==h.t?h.v:gv(h,null,l));for(var p=0,x=0;p!==d.length;++p)if((x=d.charCodeAt(p))===s||x===a||34===x||l.forceQuotes){d='"'+d.replace(fw,'""')+'"';break}"ID"==d&&(d='"ID"')}else null==h.f||h.F?d="":(o=!1,(d="="+h.f).indexOf(",")>=0&&(d='"'+d.replace(fw,'""')+'"'));c.push(d)}return!1===l.blankrows&&o?null:c.join(i)}function vw(e,t){var r=[],n=null==t?{}:t;if(null==e||null==e["!ref"])return"";var s=xv(e["!ref"]),a=void 0!==n.FS?n.FS:",",i=a.charCodeAt(0),l=void 0!==n.RS?n.RS:"\n",o=l.charCodeAt(0),c=new RegExp(("|"==a?"\\|":a)+"+$"),d="",u=[];n.dense=Array.isArray(e);for(var m=n.skipHidden&&e["!cols"]||[],h=n.skipHidden&&e["!rows"]||[],p=s.s.c;p<=s.e.c;++p)(m[p]||{}).hidden||(u[p]=dv(p));for(var x=0,f=s.s.r;f<=s.e.r;++f)(h[f]||{}).hidden||null!=(d=gw(e,s,f,u,i,o,a,n))&&(n.strip&&(d=d.replace(c,"")),(d||!1!==n.blankrows)&&r.push((x++?l:"")+d));return delete n.dense,r.join("")}function yw(e,t){t||(t={}),t.FS="\t",t.RS="\n";var r=vw(e,t);if("undefined"==typeof $p||"string"==t.type)return r;var n=$p.utils.encode(1200,r,"str");return String.fromCharCode(255)+String.fromCharCode(254)+n}function bw(e,t,r){var n,s=r||{},a=+!s.skipHeader,i=e||{},l=0,o=0;if(i&&null!=s.origin)if("number"==typeof s.origin)l=s.origin;else{var c="string"==typeof s.origin?uv(s.origin):s.origin;l=c.r,o=c.c}var d={s:{c:0,r:0},e:{c:o,r:l+t.length-1+a}};if(i["!ref"]){var u=xv(i["!ref"]);d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),-1==l&&(l=u.e.r+1,d.e.r=l+t.length-1+a)}else-1==l&&(l=0,d.e.r=t.length-1+a);var m=s.header||[],h=0;t.forEach(function(e,t){lf(e).forEach(function(r){-1==(h=m.indexOf(r))&&(m[h=m.length]=r);var c=e[r],d="z",u="",p=mv({c:o+h,r:l+t+a});n=Nw(i,p),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?d="n":"boolean"==typeof c?d="b":"string"==typeof c?d="s":c instanceof Date?(d="d",s.cellDates||(d="n",c=mf(c)),u=s.dateNF||vx[14]):null===c&&s.nullError&&(d="e",c=0),n?(n.t=d,n.v=c,delete n.w,delete n.R,u&&(n.z=u)):i[p]=n={t:d,v:c},u&&(n.z=u)):i[p]=c})}),d.e.c=Math.max(d.e.c,o+m.length-1);var p=ov(l);if(a)for(h=0;h<m.length;++h)i[dv(h+o)+p]={t:"s",v:m[h]};return i["!ref"]=pv(d),i}function Nw(e,t,r){if("string"==typeof t){if(Array.isArray(e)){var n=uv(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return Nw(e,mv("number"!=typeof t?t:{r:t,c:r||0}))}function jw(){return{SheetNames:[],Sheets:{}}}function ww(e,t,r,n){var s=1;if(!r)for(;s<=65535&&-1!=e.SheetNames.indexOf(r="Sheet"+s);++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||r;for(++s;s<=65535&&-1!=e.SheetNames.indexOf(r=i+s);++s);}if(QN(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Sw(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}var Aw={encode_col:dv,encode_row:ov,encode_cell:mv,encode_range:pv,decode_col:cv,decode_row:lv,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:uv,decode_range:hv,format_cell:gv,sheet_add_aoa:yv,sheet_add_json:bw,sheet_add_dom:Ij,aoa_to_sheet:bv,json_to_sheet:function(e,t){return bw(null,e,t)},table_to_sheet:Pj,table_to_book:function(e,t){return vv(Pj(e,t),t)},sheet_to_csv:vw,sheet_to_txt:yw,sheet_to_json:xw,sheet_to_html:_j,sheet_to_formulae:function(e){var t,r="",n="";if(null==e||null==e["!ref"])return[];var s,a=xv(e["!ref"]),i="",l=[],o=[],c=Array.isArray(e);for(s=a.s.c;s<=a.e.c;++s)l[s]=dv(s);for(var d=a.s.r;d<=a.e.r;++d)for(i=ov(d),s=a.s.c;s<=a.e.c;++s)if(r=l[s]+i,n="",void 0!==(t=c?(e[d]||[])[s]:e[r])){if(null!=t.F){if(r=t.F,!t.f)continue;n=t.f,-1==r.indexOf(":")&&(r=r+":"+r)}if(null!=t.f)n=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)n=""+t.v;else if("b"==t.t)n=t.v?"TRUE":"FALSE";else if(void 0!==t.w)n="'"+t.w;else{if(void 0===t.v)continue;n="s"==t.t?"'"+t.v:""+t.v}}o[o.length]=r+"="+n}return o},sheet_to_row_object_array:xw,sheet_get_cell:Nw,book_new:jw,book_append_sheet:ww,book_set_sheet_visibility:function(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:Sw,cell_set_internal_link:function(e,t,r){return Sw(e,"#"+t,r)},cell_add_comment:function(e,t,r){e.c||(e.c=[]),e.c.push({t:t,a:r||"SheetJS"})},sheet_set_array_formula:function(e,t,r,n){for(var s="string"!=typeof t?t:xv(t),a="string"==typeof t?t:pv(t),i=s.s.r;i<=s.e.r;++i)for(var l=s.s.c;l<=s.e.c;++l){var o=Nw(e,i,l);o.t="n",o.F=a,delete o.v,i==s.s.r&&l==s.s.c&&(o.f=r,n&&(o.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};Mp.version;const Tw=e=>1===e?"F\xe9minin":"Masculin",Cw=e=>{var t,r,n;let{customer:s,isOpen:a,onClose:i,onEdit:l}=e;return a&&s?(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"D\xe9tails du Client"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:s.fullName})]}),(0,ju.jsx)("button",{onClick:()=>{i()},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,ju.jsx)(vm,{className:"h-5 w-5"})})]}),(0,ju.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Ru,{className:"h-5 w-5 mr-2 text-blue-600"}),null!==s&&void 0!==s&&s.isBusiness||null!==s&&void 0!==s&&s.companyName||null!==s&&void 0!==s&&s.legalForm?"Informations de l'Entreprise":"Informations Personnelles"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[null!==s&&void 0!==s&&s.isBusiness||null!==s&&void 0!==s&&s.companyName||null!==s&&void 0!==s&&s.legalForm?(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Raison sociale"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===s||void 0===s?void 0:s.companyName)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Forme juridique"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===s||void 0===s?void 0:s.legalForm)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Num\xe9ro de registre commerce"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===s||void 0===s?void 0:s.tradeRegisterNumber)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"NIF"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===s||void 0===s?void 0:s.taxId)||"N/A"})]})]}):(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Pr\xe9nom"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:s.firstName})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Nom"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:s.lastName})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Date de Naissance"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:s.dateOfBirth?new Date(s.dateOfBirth).toLocaleDateString("fr-FR"):"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Genre"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:Tw(s.gender)})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"ID Client"}),(0,ju.jsx)("p",{className:"text-base text-gray-900 font-mono bg-blue-50 px-2 py-1 rounded inline-block",children:s.customerCode||s.id})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Statut"}),(0,ju.jsx)("p",{className:"text-base",children:s.isActive?(0,ju.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Actif"}):(0,ju.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Inactif"})})]})]})]}),((null===s||void 0===s?void 0:s.isBusiness)||(null===s||void 0===s?void 0:s.companyName)||(null===s||void 0===s?void 0:s.legalForm))&&((e,t,r)=>{const n=(null===s||void 0===s?void 0:s.legalRepresentative)||{},a=null===(e=(null===n||void 0===n?void 0:n.firstName)||(null===s||void 0===s?void 0:s.representativeFirstName)||"")||void 0===e?void 0:e.toString().trim(),i=null===(t=(null===n||void 0===n?void 0:n.lastName)||(null===s||void 0===s?void 0:s.representativeLastName)||"")||void 0===t?void 0:t.toString().trim(),l=a||i?"".concat(a," ").concat(i).trim():"N/A",o=(null===n||void 0===n?void 0:n.title)||(null===s||void 0===s?void 0:s.representativeTitle)||"N/A",c=null!==(r=null===n||void 0===n?void 0:n.documentType)&&void 0!==r?r:null===s||void 0===s?void 0:s.representativeDocumentType,d=void 0!==c&&null!==c?{0:"CIN (Carte d'Identit\xe9 Nationale)",1:"Passeport",2:"Permis de Conduire"}[c]||String(c):"N/A",u=(null===n||void 0===n?void 0:n.documentNumber)||(null===s||void 0===s?void 0:s.representativeDocumentNumber)||"N/A",m=(null===n||void 0===n?void 0:n.issuedDate)||(null===s||void 0===s?void 0:s.representativeIssuedDate)||null,h=(null===n||void 0===n?void 0:n.expiryDate)||(null===s||void 0===s?void 0:s.representativeExpiryDate)||null,p=(null===n||void 0===n?void 0:n.issuingAuthority)||(null===s||void 0===s?void 0:s.representativeIssuingAuthority)||"N/A";return(0,ju.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(ym,{className:"h-5 w-5 mr-2 text-blue-600"}),"Repr\xe9sentant L\xe9gal"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Nom complet"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:l})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Titre/Fonction"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:o})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Type de document"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:d})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Num\xe9ro de document"}),(0,ju.jsx)("p",{className:"text-base text-gray-900 font-mono",children:u})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Date d'\xe9mission"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:m?new Date(m).toLocaleDateString("fr-FR"):"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Date d'expiration"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:h?new Date(h).toLocaleDateString("fr-FR"):"N/A"})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Autorit\xe9 d'\xe9mission"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:p})]})]})]})})(),(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Ku,{className:"h-5 w-5 mr-2 text-blue-600"}),"Adresse"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Adresse"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===(t=s.address)||void 0===t?void 0:t.street)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Commune"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===(r=s.address)||void 0===r?void 0:r.commune)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"D\xe9partement"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===(n=s.address)||void 0===n?void 0:n.department)||"N/A"})]})]})]})]}),(0,ju.jsxs)("div",{className:"px-6 py-4 border-t flex items-center justify-end gap-3",children:[(0,ju.jsx)("button",{onClick:i,className:"px-4 py-2 rounded-lg border hover:bg-gray-50",children:"Fermer"}),(0,ju.jsx)("button",{onClick:()=>{i(),l(s)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Modifier"})]})]})}):null},Ew=t=>{let{customer:r,isOpen:n,onClose:s,onSuccess:a}=t;const[i,l]=(0,e.useState)(!1);if(!n||!r)return null;return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,ju.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Modifier Client"}),(0,ju.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded",children:"\xd7"})]}),(0,ju.jsx)(kp,{customer:r,onSubmit:async e=>{await(async e=>{l(!0);try{await Fm.updateCustomer(r.id||r.Id,e),Ts.success("Client modifi\xe9 avec succ\xe8s"),s(),await a()}catch(i){var t,n;throw console.error("Error updating customer:",i),Ts.error((null===i||void 0===i||null===(t=i.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Erreur lors de la modification"),i}finally{l(!1)}})(e)},onCancel:s})]})})},Dw=e=>{if(!e)return"N/A";try{const t=new Date(e);return isNaN(t.getTime())?"N/A":t.toLocaleDateString("fr-FR")}catch(t){return"N/A"}},kw=e=>{try{var t,r;if(!e)return"N/A";if(e.customerCode)return e.customerCode;const n=(null===(t=e.identity)||void 0===t?void 0:t.documentNumber)||(null===(r=e.identity)||void 0===r?void 0:r.DocumentNumber);if(n&&String(n).length<=8)return String(n);const s=(e.firstName||e.FirstName||"X").toString().charAt(0).toUpperCase(),a=(e.lastName||e.LastName||"X").toString().charAt(0).toUpperCase(),i="".concat(e.firstName||"").concat(e.lastName||"").concat(e.dateOfBirth||"");let l=0;for(let e=0;e<i.length;e++){l=(l<<5)-l+i.charCodeAt(e),l&=l}l=Math.abs(l);const o=(l%9e3+1e3).toString();return"".concat(s).concat(a).concat(o)}catch(mn){return e&&(e.customerCode||e.id)||"N/A"}};function Rw(e){try{var t,r,n,s,a,i,l,o,c,d,u,m,h;if(!e)return void Ts.error("Aucune donn\xe9e client \xe0 exporter");const p=window.open("","_blank");if(!p)return void Ts.error("Veuillez autoriser les pop-ups pour exporter en PDF");const x='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset="UTF-8">\n        <title>Profil Client - '.concat(e.fullName||"",'</title>\n        <style>\n          body { font-family: Arial, sans-serif; padding: 40px; line-height: 1.6; color: #333; }\n          .header { text-align: center; margin-bottom: 30px; border-bottom: 3px solid #2563eb; padding-bottom: 20px; }\n          .header h1 { color: #2563eb; margin: 0; font-size: 28px; }\n          .section { margin-bottom: 25px; page-break-inside: avoid; }\n          .section-title { background: #2563eb; color: white; padding: 8px 12px; margin-bottom: 15px; font-weight: bold; font-size: 16px; }\n          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }\n          .info-item { padding: 10px; background: #f9fafb; border-left: 3px solid #2563eb; }\n          .info-label { font-weight: bold; color: #555; font-size: 12px; text-transform: uppercase; margin-bottom: 3px; }\n          .info-value { color: #000; font-size: 14px; }\n          .footer { margin-top: 40px; text-align: center; color: #666; font-size: 12px; border-top: 1px solid #ddd; padding-top: 20px; }\n          @media print { body { padding: 20px; } .no-print { display: none; } }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <h1>PROFIL CLIENT</h1>\n          <p>Kredi Ti Machann - Syst\xe8me de Micro-cr\xe9dit</p>\n          <p>Date d\'\xe9mission: ').concat((new Date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),'</p>\n        </div>\n\n        <div class="section">\n          <div class="section-title">\ud83d\udccb INFORMATIONS PERSONNELLES</div>\n          <div class="info-grid">\n            <div class="info-item">\n              <div class="info-label">Nom complet</div>\n              <div class="info-value">').concat(e.fullName||"N/A",'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">Date de naissance</div>\n              <div class="info-value">').concat(e.dateOfBirth?Dw(e.dateOfBirth):"N/A",'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">Genre</div>\n              <div class="info-value">').concat(0===e.gender?"Masculin":1===e.gender?"F\xe9minin":"\u2014",'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">ID Client</div>\n              <div class="info-value">').concat(kw(e),'</div>\n            </div>\n          </div>\n        </div>\n\n        <div class="section">\n          <div class="section-title">\ud83d\udccd ADRESSE</div>\n          <div class="info-grid">\n            <div class="info-item"><div class="info-label">Adresse</div><div class="info-value">').concat((null===(t=e.address)||void 0===t?void 0:t.street)||"N/A",'</div></div>\n            <div class="info-item"><div class="info-label">Commune</div><div class="info-value">').concat((null===(r=e.address)||void 0===r?void 0:r.commune)||"N/A",'</div></div>\n            <div class="info-item"><div class="info-label">D\xe9partement</div><div class="info-value">').concat((null===(n=e.address)||void 0===n?void 0:n.department)||"N/A","</div></div>\n            ").concat(null!==(s=e.address)&&void 0!==s&&s.postalCode?'<div class="info-item"><div class="info-label">Code postal</div><div class="info-value">'.concat(e.address.postalCode,"</div></div>"):"",'\n          </div>\n        </div>\n\n        <div class="section">\n          <div class="section-title">\ud83d\udcde CONTACT</div>\n          <div class="info-grid">\n            <div class="info-item"><div class="info-label">T\xe9l\xe9phone principal</div><div class="info-value">').concat((null===(a=e.contact)||void 0===a?void 0:a.primaryPhone)||"N/A","</div></div>\n            ").concat(null!==(i=e.contact)&&void 0!==i&&i.secondaryPhone?'<div class="info-item"><div class="info-label">T\xe9l\xe9phone secondaire</div><div class="info-value">'.concat(e.contact.secondaryPhone,"</div></div>"):"","\n            ").concat(null!==(l=e.contact)&&void 0!==l&&l.email?'<div class="info-item"><div class="info-label">Email</div><div class="info-value">'.concat(e.contact.email,"</div></div>"):"","\n            ").concat(null!==(o=e.contact)&&void 0!==o&&o.emergencyContactName?'<div class="info-item"><div class="info-label">Contact d\'urgence</div><div class="info-value">'.concat(e.contact.emergencyContactName," - ").concat(e.contact.emergencyContactPhone||"","</div></div>"):"",'\n          </div>\n        </div>\n\n        <div class="section">\n          <div class="section-title">\ud83e\udeaa DOCUMENT D\'IDENTIT\xc9</div>\n          <div class="info-grid">\n            <div class="info-item"><div class="info-label">Type de document</div><div class="info-value">').concat(void 0!==(null===(c=e.identity)||void 0===c?void 0:c.documentType)?(e=>{switch(e){case 0:return"CIN";case 1:return"Passeport";case 2:return"Permis de conduire";default:return"Autre"}})(e.identity.documentType):"N/A",'</div></div>\n            <div class="info-item"><div class="info-label">Num\xe9ro</div><div class="info-value">').concat((null===(d=e.identity)||void 0===d?void 0:d.documentNumber)||"N/A",'</div></div>\n            <div class="info-item"><div class="info-label">Date d\'\xe9mission</div><div class="info-value">').concat(null!==(u=e.identity)&&void 0!==u&&u.issuedDate?Dw(e.identity.issuedDate):"N/A","</div></div>\n            ").concat(null!==(m=e.identity)&&void 0!==m&&m.expiryDate?'<div class="info-item"><div class="info-label">Date d\'expiration</div><div class="info-value">'.concat(Dw(e.identity.expiryDate),"</div></div>"):"",'\n            <div class="info-item"><div class="info-label">Autorit\xe9 \xe9mettrice</div><div class="info-value">').concat((null===(h=e.identity)||void 0===h?void 0:h.issuingAuthority)||"N/A",'</div></div>\n          </div>\n        </div>\n\n        <div class="footer">\n          <p><strong>Kredi Ti Machann</strong> - Syst\xe8me de Micro-cr\xe9dit pour Ha\xefti</p>\n          <p>Document g\xe9n\xe9r\xe9 automatiquement le ').concat((new Date).toLocaleString("fr-FR"),'</p>\n          <p class="no-print"><button onclick="window.print()" style="background: #2563eb; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; margin-top: 10px;">\ud83d\udda8\ufe0f Imprimer / Enregistrer en PDF</button></p>\n        </div>\n      </body>\n      </html>\n    ');p.document.write(x),p.document.close(),p.onload=()=>{setTimeout(()=>{p.focus(),Ts.success("Fen\xeatre d'export ouverte - Utilisez Ctrl+P ou le bouton Imprimer")},250)}}catch(Sc){console.error("PDF export error",Sc),Ts.error("Erreur lors de l'export PDF")}}function _w(e,t){try{if(!Array.isArray(e)||0===e.length)return void Ts.error("Aucune donn\xe9e client \xe0 exporter");const r=window.open("","_blank");if(!r)return void Ts.error("Veuillez autoriser les pop-ups pour exporter en PDF");const n=e.map(e=>{var t,r,n,s,a;const i=kw(e),l=e.fullName||"".concat(e.firstName||""," ").concat(e.lastName||"").trim(),o=(null===(t=e.contact)||void 0===t?void 0:t.primaryPhone)||"",c=(null===(r=e.contact)||void 0===r?void 0:r.email)||"",d=(null===(n=e.identity)||void 0===n?void 0:n.documentNumber)||"",u=e.accountBranchName||e.branchName||e.branch||"",m=(null===(s=e.address)||void 0===s?void 0:s.commune)||"",h=(null===(a=e.address)||void 0===a?void 0:a.department)||"",p=e.createdAt?Dw(e.createdAt):"",x=e.isActive?"Actif":"Inactif";return"\n        <tr>\n          <td>".concat(i,"</td>\n          <td>").concat(l,"</td>\n          <td>").concat(o,"</td>\n          <td>").concat(c,"</td>\n          <td>").concat(d,"</td>\n          <td>").concat(u,"</td>\n          <td>").concat(m,"</td>\n          <td>").concat(h,"</td>\n          <td>").concat(p,"</td>\n          <td>").concat(x,"</td>\n        </tr>")}).join(""),s=t||"Liste des clients",a='<!doctype html>\n      <html>\n        <head>\n          <meta charset="utf-8" />\n          <title>'.concat(s,'</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; color: #222; }\n            .header { text-align:center; margin-bottom: 12px; }\n            h1 { margin:0; color:#2563eb; }\n            table { width:100%; border-collapse: collapse; font-size:12px; }\n            thead { background:#f3f4f6; display: table-header-group; }\n            th, td { border: 1px solid #e5e7eb; padding: 6px 8px; text-align:left; }\n            th { font-weight:600; font-size:12px; }\n            tr { page-break-inside: avoid; }\n            @media print { thead { display: table-header-group; } .no-print { display:none; } }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <h1>').concat(s,'</h1>\n            <div style="font-size:12px;color:#444;margin-top:6px">G\xe9n\xe9r\xe9 le ').concat((new Date).toLocaleString("fr-FR"),'</div>\n          </div>\n          <div class="no-print" style="text-align:center;margin-bottom:8px">\n            <button onclick="window.print()" style="background:#2563eb;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer">\ud83d\udda8\ufe0f Imprimer / Enregistrer en PDF</button>\n          </div>\n          <table>\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>Nom</th>\n                <th>T\xe9l\xe9phone</th>\n                <th>Email</th>\n                <th>Document</th>\n                <th>Succursale</th>\n                <th>Commune</th>\n                <th>D\xe9partement</th>\n                <th>Cr\xe9\xe9 le</th>\n                <th>Statut</th>\n              </tr>\n            </thead>\n            <tbody>\n              ').concat(n,"\n            </tbody>\n          </table>\n        </body>\n      </html>");r.document.write(a),r.document.close(),r.onload=()=>{setTimeout(()=>{try{r.focus(),r.print()}catch(mn){}},300)}}catch(mn){console.error("Export clients PDF error",mn),Ts.error("Erreur lors de la g\xe9n\xe9ration du PDF")}}const Iw=mi("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Pw=mi("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Ow=t=>{var r,n,a,i,l,o,c,d,u,m,h;let{accountId:p,onClose:x,onUpdate:f}=t;const[g,v]=(0,e.useState)(null),[y,b]=(0,e.useState)([]),[N,j]=(0,e.useState)(!0),[w,S]=(0,e.useState)("info"),[A,T]=(0,e.useState)(!1),[C,E]=(0,e.useState)({}),[D,k]=(0,e.useState)(!1),[R,_]=(0,e.useState)(""),[I,P]=(0,e.useState)(!1),[O,L]=(0,e.useState)(!1),[F,M]=(0,e.useState)(null),[U,B]=(0,e.useState)(!1),H=e=>{if(void 0===e||null===e)return"";const t=String(e).toUpperCase();return"0"===t||"HTG"===t?"HTG":"1"===t||"USD"===t?"USD":t},z=e=>{var t,r;const n=(e.type||"").toString().toLowerCase().replace(/\s+/g,""),s=new Set(["deposit","credit","interest","transferin","openingdeposit","initialdeposit"]),a=new Set(["withdrawal","debit","fee","charge","transferout"]);if(s.has(n))return!0;if(a.has(n))return!1;const i=Number(null!==(t=e.balanceBefore)&&void 0!==t?t:0);return Number(null!==(r=e.balanceAfter)&&void 0!==r?r:0)>=i},G=e=>{var t,r;const n=Number(null!==(t=e.balanceBefore)&&void 0!==t?t:0),s=Number(null!==(r=e.balanceAfter)&&void 0!==r?r:0)-n,a=void 0===e.amount||null===e.amount||0===e.amount?s:Number(e.amount);return Math.abs(a)};(0,e.useEffect)(()=>{V();try{var e;const t=null===(e=Ei.getCurrentUser)||void 0===e?void 0:e.call(Ei);t&&M(t)}catch(t){}},[p]);const V=async()=>{j(!0);try{var e,t,r,n,a,i,l,o,c,d,u,m,h,x,f,g;const[j,w]=await Promise.all([Ei.getSavingsAccount(p),Ei.getSavingsTransactions({accountId:p})]);let S=j;try{if(!S.customerCode&&S.customerId){var y;const e=await(null===(y=Lm.getCustomer)||void 0===y?void 0:y.call(Lm,S.customerId));null!==e&&void 0!==e&&e.customerCode&&(S=(0,s.A)((0,s.A)({},S),{},{customerCode:e.customerCode}))}}catch(N){}v(S),b(w||[]);const A=S.accountLimits||{};E({interestRate:null!==(e=S.interestRate)&&void 0!==e?e:"",minimumBalance:null!==(t=S.minimumBalance)&&void 0!==t?t:"",withdrawalLimit:null!==(r=S.withdrawalLimit)&&void 0!==r?r:"",dailyWithdrawalLimit:null!==(n=null!==(a=null!==(i=A.dailyWithdrawalLimit)&&void 0!==i?i:S.dailyWithdrawalLimit)&&void 0!==a?a:S.withdrawalLimit)&&void 0!==n?n:"",monthlyWithdrawalLimit:null!==(l=null!==(o=A.monthlyWithdrawalLimit)&&void 0!==o?o:S.monthlyWithdrawalLimit)&&void 0!==l?l:"",dailyDepositLimit:null!==(c=A.dailyDepositLimit)&&void 0!==c?c:"",maxBalance:null!==(d=null!==(u=A.maxBalance)&&void 0!==u?u:S.maxBalance)&&void 0!==d?d:"",maxWithdrawalAmount:null!==(m=null!==(h=A.maxWithdrawalAmount)&&void 0!==h?h:S.maxWithdrawalAmount)&&void 0!==m?m:"",minWithdrawalAmount:null!==(x=null!==(f=A.minWithdrawalAmount)&&void 0!==f?f:S.minWithdrawalAmount)&&void 0!==x?x:"",notes:null!==(g=S.notes)&&void 0!==g?g:""})}catch(w){Ts.error("Erreur lors du chargement du compte")}finally{j(!1)}},W=()=>{const e=[];if(!g)return{amount:0,days:0,from:"",to:"",eligible:!1,reasons:["Compte introuvable"]};const t=g.status;"Active"!==("number"===typeof t?{0:"Active",1:"Inactive",2:"Closed",3:"Suspended"}[t]:t)&&e.push("Le compte doit \xeatre actif");const r=Number(g.interestRate||0);(!r||r<=0)&&e.push("Taux d'int\xe9r\xeat absent ou nul");const n=Number(g.balance||0);n<=0&&e.push("Solde nul");const s=g.lastInterestCalculation||g.openedDate,a=s?new Date(s):null,i=new Date,l=a?Math.max(0,Math.floor((i.getTime()-a.getTime())/864e5)):0,o=a?n*(r/100)*(l/365):0,c=0===e.length;return{amount:o,days:l,from:s||"",to:i.toISOString(),eligible:c,reasons:e}},q=async()=>{try{L(!0);if(!W().eligible)return void Ts.error("Conditions non remplies pour le calcul");Ts.success("Int\xe9r\xeats calcul\xe9s"),P(!1),null===f||void 0===f||f()}catch(e){Ts.error("Erreur lors du calcul d'int\xe9r\xeats")}finally{L(!1)}},$=async()=>{const e=prompt("Raison de la suspension:");if(e)try{await Ei.updateSavingsAccount(p,{status:"Suspended",notes:e}),Ts.success("Compte suspendu avec succ\xe8s"),V(),null===f||void 0===f||f()}catch(Sc){Ts.error("Erreur lors de la suspension")}},K=async()=>{try{await Ei.updateSavingsAccount(p,{status:"Active"}),Ts.success("Compte r\xe9activ\xe9 avec succ\xe8s"),V(),null===f||void 0===f||f()}catch(Sc){Ts.error("Erreur lors de la r\xe9activation")}},X=()=>{k(!0),_("")},Y=async()=>{try{Ts.success("Relev\xe9 g\xe9n\xe9r\xe9 (fonctionnalit\xe9 \xe0 venir)")}catch(Sc){Ts.error("Erreur lors de la g\xe9n\xe9ration du relev\xe9")}};return N?(0,ju.jsx)("div",{className:"flex items-center justify-center p-12",children:(0,ju.jsx)(Du,{className:"h-8 w-8 text-blue-600 animate-spin"})}):g?(0,ju.jsxs)(ju.Fragment,{children:[I&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[(0,ju.jsxs)("div",{className:"mb-4",children:[(0,ju.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Calcul des int\xe9r\xeats"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"Pr\xe9visualisez et confirmez le calcul des int\xe9r\xeats pour ce compte."})]}),((e,t)=>{const r=W(),n=H(g.currency);return(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-sm border border-gray-200",children:[!r.eligible&&null!==(e=r.reasons)&&void 0!==e&&e.length?(0,ju.jsxs)("div",{className:"mb-3 p-2 rounded border border-yellow-300 bg-yellow-50 text-yellow-800 text-xs",children:[(0,ju.jsx)("p",{className:"font-medium",children:"Non \xe9ligible au calcul pour le moment:"}),(0,ju.jsx)("ul",{className:"list-disc ml-5 mt-1",children:r.reasons.map((e,t)=>(0,ju.jsx)("li",{children:e},t))})]}):null,(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Taux annuel"}),(0,ju.jsx)("div",{className:"text-gray-900 font-medium",children:g.interestRate?"".concat(g.interestRate,"%"):"\u2014"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"P\xe9riode estim\xe9e"}),(0,ju.jsxs)("div",{className:"text-gray-900 font-medium",children:[r.days," jours"]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Solde actuel"}),(0,ju.jsx)("div",{className:"text-gray-900 font-medium",children:Lw(null!==(t=g.balance)&&void 0!==t?t:0,n)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Int\xe9r\xeat estim\xe9"}),(0,ju.jsx)("div",{className:"text-gray-900 font-semibold",children:Lw(r.amount,n)})]})]}),(0,ju.jsxs)("div",{className:"text-[11px] text-gray-500 mt-2",children:["De: ",r.from?new Date(r.from).toLocaleDateString("fr-FR"):"\u2014"," \u2014 \xc0: ",r.to?new Date(r.to).toLocaleDateString("fr-FR"):"\u2014"]})]})})(),(0,ju.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ju.jsx)("button",{type:"button",onClick:()=>P(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Annuler"}),(()=>{const e=W(),t=O||!e.eligible;return(0,ju.jsx)("button",{type:"button",onClick:q,disabled:t,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",title:e.eligible?void 0:"Conditions non remplies (voir d\xe9tails)",children:O?"Calcul en cours\u2026":"Confirmer"})})()]})]})}),D&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[(0,ju.jsxs)("div",{className:"mb-4",children:[(0,ju.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Fermer le compte"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"Veuillez indiquer la raison de la fermeture :"}),(0,ju.jsx)("textarea",{className:"w-full mt-2 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,value:R,onChange:e=>_(e.target.value)})]}),(0,ju.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,ju.jsx)("button",{type:"button",onClick:()=>k(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Annuler"}),(0,ju.jsx)("button",{type:"button",onClick:async()=>{if(R)try{await Ei.closeSavingsAccount(p,R),Ts.success("Compte ferm\xe9 avec succ\xe8s"),k(!1),V(),null===f||void 0===f||f()}catch(Sc){Ts.error("Erreur lors de la fermeture")}else Ts.error("Veuillez indiquer une raison de fermeture.")},className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Confirmer"})]})]})}),(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,ju.jsxs)("div",{className:"px-4 py-3 border-b",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:g.accountNumber}),(0,ju.jsx)("p",{className:"text-sm text-gray-500",children:g.customerName})]}),(0,ju.jsx)("button",{onClick:x,className:"p-1.5 rounded hover:bg-gray-100","aria-label":"Fermer",children:(0,ju.jsx)(vm,{className:"h-5 w-5 text-gray-600"})})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-3 gap-3 mt-3 text-sm",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-gray-500",children:"Solde"}),(0,ju.jsx)("div",{className:"font-semibold",children:Lw(null!==(r=g.balance)&&void 0!==r?r:0,H(g.currency))})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-gray-500",children:"Taux"}),(0,ju.jsx)("div",{className:"font-semibold",children:g.interestRate&&g.interestRate>0?"".concat(g.interestRate,"%"):"\u2014"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-gray-500",children:"Statut"}),(()=>{const e=g.status,t="number"===typeof e?{0:"Active",1:"Inactive",2:"Closed",3:"Suspended"}[e]:e;return(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium border ".concat(Fw(t)),children:[Mw(t),t]})})()]})]})]}),(0,ju.jsx)("div",{className:"border-b border-gray-200 bg-gray-50 px-4",children:(0,ju.jsxs)("div",{className:"flex gap-4",children:[(0,ju.jsx)("button",{onClick:()=>S("info"),className:"py-2 px-3 text-sm font-medium transition-colors ".concat("info"===w?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"),children:"Informations"}),(0,ju.jsxs)("button",{onClick:()=>S("transactions"),className:"py-2 px-3 text-sm font-medium transition-colors ".concat("transactions"===w?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"),children:["Transactions (",y.length,")"]}),(0,ju.jsx)("button",{onClick:()=>S("history"),className:"py-2 px-3 text-sm font-medium transition-colors ".concat("history"===w?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"),children:"Historique"})]})}),(0,ju.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:["info"===w&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,ju.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Informations du compte"}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Type de compte"}),(0,ju.jsx)("div",{className:"text-gray-900",children:(e=>{if(void 0===e||null===e||""===e)return"Compte d'\xc9pargne";if("number"===typeof e){return{0:"Compte d'\xc9pargne",1:"Compte Courant",2:"\xc9pargne \xe0 Terme"}[e]||String(e)}return{SAVINGS:"Compte d'\xc9pargne",SAVING:"Compte d'\xc9pargne",REGULAR:"Compte d'\xc9pargne",CURRENT:"Compte Courant",CHECKING:"Compte Courant",TERM:"\xc9pargne \xe0 Terme",TERM_SAVINGS:"\xc9pargne \xe0 Terme",TERMSAVINGS:"\xc9pargne \xe0 Terme"}[String(e).toUpperCase()]||e})(g.accountType)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Devise"}),(0,ju.jsx)("div",{className:"text-gray-900",children:H(g.currency)||"\u2014"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Date d'ouverture"}),(0,ju.jsx)("div",{className:"text-gray-900",children:g.openedDate||g.openingDate||g.createdAt?new Date(g.openedDate||g.openingDate||g.createdAt).toLocaleDateString("fr-FR"):"\u2014"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Derni\xe8re transaction"}),(0,ju.jsx)("div",{className:"text-gray-900",children:g.lastTransactionDate?new Date(g.lastTransactionDate).toLocaleDateString("fr-FR"):"Aucune"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Solde minimum"}),(0,ju.jsx)("div",{className:"text-gray-900",children:Lw(null!==(n=g.minimumBalance)&&void 0!==n?n:0,H(g.currency))})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Limite de retrait"}),((e,t,r)=>{const n=null!==(e=null!==(t=null===(r=g.accountLimits)||void 0===r?void 0:r.dailyWithdrawalLimit)&&void 0!==t?t:g.dailyWithdrawalLimit)&&void 0!==e?e:g.withdrawalLimit,s=void 0!==n&&null!==n&&!Number.isNaN(Number(n));return(0,ju.jsx)("div",{className:"text-gray-900",children:s?Lw(Number(n),H(g.currency)):"Aucune"})})()]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Plafond retrait mensuel"}),((e,t)=>{const r=null!==(e=null===(t=g.accountLimits)||void 0===t?void 0:t.monthlyWithdrawalLimit)&&void 0!==e?e:g.monthlyWithdrawalLimit,n=void 0!==r&&null!==r&&!Number.isNaN(Number(r));return(0,ju.jsx)("div",{className:"text-gray-900",children:n?Lw(Number(r),H(g.currency)):"Aucun"})})()]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Solde maximum"}),((e,t)=>{const r=null!==(e=null===(t=g.accountLimits)||void 0===t?void 0:t.maxBalance)&&void 0!==e?e:g.maxBalance,n=void 0!==r&&null!==r&&!Number.isNaN(Number(r));return(0,ju.jsx)("div",{className:"text-gray-900",children:n?Lw(Number(r),H(g.currency)):"Aucun"})})()]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Plafond d\xe9p\xf4t quotidien"}),(0,ju.jsx)("div",{className:"text-gray-900",children:void 0!==(null===(a=g.accountLimits)||void 0===a?void 0:a.dailyDepositLimit)&&null!==(null===(i=g.accountLimits)||void 0===i?void 0:i.dailyDepositLimit)?Lw(g.accountLimits.dailyDepositLimit,H(g.currency)):"Aucun"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Montant max. retrait"}),((e,t)=>{const r=null!==(e=null===(t=g.accountLimits)||void 0===t?void 0:t.maxWithdrawalAmount)&&void 0!==e?e:g.maxWithdrawalAmount,n=void 0!==r&&null!==r&&!Number.isNaN(Number(r));return(0,ju.jsx)("div",{className:"text-gray-900",children:n?Lw(Number(r),H(g.currency)):"Aucun"})})()]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Montant min. retrait"}),((e,t)=>{const r=null!==(e=null===(t=g.accountLimits)||void 0===t?void 0:t.minWithdrawalAmount)&&void 0!==e?e:g.minWithdrawalAmount,n=void 0!==r&&null!==r&&!Number.isNaN(Number(r));return(0,ju.jsx)("div",{className:"text-gray-900",children:n?Lw(Number(r),H(g.currency)):"Aucun"})})()]}),g.branchName&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Succursale"}),(0,ju.jsx)("div",{className:"text-gray-900",children:g.branchName})]})]}),g.notes&&(0,ju.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 text-sm",children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Notes"}),(0,ju.jsx)("div",{className:"text-gray-900 whitespace-pre-wrap",children:g.notes})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,ju.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Informations du client"}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Nom complet"}),(0,ju.jsx)("div",{className:"text-gray-900",children:g.customerName})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Code Client"}),(0,ju.jsx)("div",{className:"text-gray-900",children:g.customerCode||g.CustomerCode||"\u2014"})]})]})]})]}),"transactions"===w&&(0,ju.jsx)("div",{className:"space-y-4",children:0===y.length?(0,ju.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,ju.jsx)(Hu,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune transaction"}),(0,ju.jsx)("p",{className:"text-gray-500",children:"Ce compte n'a pas encore de transactions"})]}):(0,ju.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,ju.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsx)("div",{className:"p-1.5 rounded ".concat(z(e)?"bg-green-100":"bg-red-100"),children:z(e)?(0,ju.jsx)(Lu,{className:"h-4 w-4 text-green-600"}):(0,ju.jsx)(Op,{className:"h-4 w-4 text-red-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:"Deposit"===e.type?"D\xe9p\xf4t":"Withdrawal"===e.type?"Retrait":e.type}),(0,ju.jsx)("p",{className:"text-xs text-gray-500",children:e.description}),void 0!==e.reference&&null!==e.reference&&""!==String(e.reference).trim()&&"0"!==String(e.reference)&&(0,ju.jsxs)("p",{className:"text-[11px] text-gray-400 mt-1",children:["R\xe9f: ",e.reference]}),(0,ju.jsxs)("div",{className:"flex items-center gap-3 text-[11px] text-gray-500 mt-1",children:[(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,ju.jsx)(Pw,{className:"w-3 h-3"}),e.branchName||e.BranchName||g.branchName||(e.branchId?"#".concat(e.branchId):"\u2014")]}),(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,ju.jsx)(ym,{className:"w-3 h-3"}),e.processedByName||e.processedByFullName||e.receivedBy||e.processedBy||"\u2014"]})]})]})]}),(0,ju.jsxs)("div",{className:"text-right",children:[(0,ju.jsxs)("p",{className:"text-base font-semibold ".concat(z(e)?"text-green-600":"text-red-600"),children:[z(e)?"+":"-",Lw(G(e),H(e.currency))]}),(0,ju.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Solde: ",Lw(e.balanceAfter,H(e.currency))]}),(0,ju.jsx)("p",{className:"text-[11px] text-gray-400 mt-1",children:new Date(e.processedAt).toLocaleString("fr-FR")})]})]})},e.id))})}),"history"===w&&(()=>{const e=[],t=g.openedDate||g.openingDate||g.createdAt;t&&e.push({id:"opened-".concat(g.id),when:t,title:"Compte ouvert",subtitle:g.branchName?"Succursale: ".concat(g.branchName):void 0,kind:"opened"});for(const r of y){const t=z(r),n="".concat(t?"+":"-").concat(Lw(G(r),H(r.currency))),s=r.processedByName||r.processedByFullName||r.receivedBy||r.processedBy,a=r.branchName||r.BranchName||g.branchName||(r.branchId?"#".concat(r.branchId):void 0),i=void 0!==r.reference&&null!==r.reference&&""!==String(r.reference).trim()&&"0"!==String(r.reference)?"R\xe9f: ".concat(r.reference):void 0,l=[t?"D\xe9p\xf4t":"Withdrawal"===r.type?"Retrait":r.type||"Transaction",n,s?"Effectu\xe9 par: ".concat(s):void 0,a?"Succursale: ".concat(a):void 0,i].filter(Boolean);e.push({id:"tx-".concat(r.id),when:r.processedAt,title:l.shift(),subtitle:l.length?l.join(" \u2014 "):void 0,kind:"tx",credit:t})}return g.closedDate&&e.push({id:"closed-".concat(g.id),when:g.closedDate,title:"Compte ferm\xe9",subtitle:g.notes?"Raison: ".concat(g.notes):void 0,kind:"closed"}),e.sort((e,t)=>new Date(t.when).getTime()-new Date(e.when).getTime()),0===e.length?(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[(0,ju.jsx)(pm,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Historique complet"}),(0,ju.jsx)("p",{className:"text-gray-500",children:"Aucun \xe9v\xe9nement d'historique disponible"})]}):(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)("div",{className:"absolute left-4 top-0 bottom-0 w-px bg-gray-200"}),(0,ju.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,ju.jsxs)("div",{className:"relative pl-12",children:[(0,ju.jsx)("div",{className:"absolute left-2 top-2 -ml-1.5",children:(0,ju.jsx)("div",{className:"h-6 w-6 rounded-full flex items-center justify-center border ".concat("tx"===e.kind?e.credit?"bg-green-100 border-green-200":"bg-red-100 border-red-200":"bg-blue-100 border-blue-200"),children:"tx"===e.kind?e.credit?(0,ju.jsx)(Lu,{className:"h-3.5 w-3.5 text-green-600"}):(0,ju.jsx)(Op,{className:"h-3.5 w-3.5 text-red-600"}):(0,ju.jsx)(pm,{className:"h-3.5 w-3.5 text-blue-600"})})}),(0,ju.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),e.subtitle&&(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.subtitle})]}),(0,ju.jsx)("div",{className:"text-[11px] text-gray-500",children:new Date(e.when).toLocaleString("fr-FR")})]})})]},e.id))})]})})()]}),(0,ju.jsx)("div",{className:"border-t border-gray-200 bg-gray-50 p-4",children:(0,ju.jsx)("div",{className:"flex flex-wrap gap-2",children:(()=>{const e=g.status,t="number"===typeof e?{0:"Active",1:"Inactive",2:"Closed",3:"Suspended"}[e]:e,r="Active"===t,n="Suspended"===t,s="Inactive"===t;return(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("button",{onClick:()=>T(!0),className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors flex items-center gap-2 text-sm",children:[(0,ju.jsx)(Wu,{className:"h-4 w-4"}),"Modifier"]}),(e=>{const t=((null===F||void 0===F?void 0:F.role)||(null===F||void 0===F?void 0:F.Role)||"").toString(),n="Admin"===t||"SuperAdmin"===t,s=!r||(null!==(e=g.interestRate)&&void 0!==e?e:0)<=0||!n;return(0,ju.jsxs)("button",{onClick:()=>P(!0),disabled:s,className:"px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-md transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed text-sm",title:n?void 0:"R\xe9serv\xe9 aux Admin/SuperAdmin",children:[(0,ju.jsx)(ku,{className:"h-4 w-4"}),"Calculer int\xe9r\xeats"]})})(),(0,ju.jsxs)("button",{onClick:Y,className:"px-3 py-1.5 bg-gray-600 hover:bg-gray-700 text-white rounded-md transition-colors flex items-center gap-2 text-sm",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"}),"Relev\xe9"]}),r&&(0,ju.jsxs)("button",{onClick:$,className:"px-3 py-1.5 bg-yellow-600 hover:bg-yellow-700 text-white rounded-md transition-colors flex items-center gap-2 text-sm",children:[(0,ju.jsx)(hi,{className:"h-4 w-4"}),"Suspendre"]}),n&&(0,ju.jsxs)("button",{onClick:K,className:"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors flex items-center gap-2 text-sm",children:[(0,ju.jsx)(Iw,{className:"h-4 w-4"}),"R\xe9activer"]}),(r||s)&&(0,ju.jsxs)("button",{onClick:X,className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors flex items-center gap-2 text-sm",children:[(0,ju.jsx)(Lp,{className:"h-4 w-4"}),"Fermer"]})]})})()})})]})}),A&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[80vh] overflow-hidden flex flex-col",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,ju.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Modifier le compte"}),(0,ju.jsx)("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:(0,ju.jsx)(vm,{className:"h-6 w-6"})})]}),(0,ju.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,ju.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={};void 0!==C.interestRate&&(e.interestRate=Number(C.interestRate)),void 0!==C.minimumBalance&&(e.minimumBalance=Number(C.minimumBalance)),void 0!==C.withdrawalLimit&&null!==C.withdrawalLimit&&""!==C.withdrawalLimit&&(e.withdrawalLimit=Number(C.withdrawalLimit)),void 0!==C.notes&&(e.notes=C.notes);const t={};void 0!==C.dailyDepositLimit&&null!==C.dailyDepositLimit&&""!==C.dailyDepositLimit&&(t.DailyDepositLimit=Number(C.dailyDepositLimit));void 0!==C.dailyWithdrawalLimit&&null!==C.dailyWithdrawalLimit&&""!==C.dailyWithdrawalLimit&&(t.DailyWithdrawalLimit=Number(C.dailyWithdrawalLimit)),void 0!==C.monthlyWithdrawalLimit&&null!==C.monthlyWithdrawalLimit&&""!==C.monthlyWithdrawalLimit&&(t.MonthlyWithdrawalLimit=Number(C.monthlyWithdrawalLimit)),void 0!==C.maxBalance&&null!==C.maxBalance&&""!==C.maxBalance&&(t.MaxBalance=Number(C.maxBalance)),void 0!==C.maxWithdrawalAmount&&null!==C.maxWithdrawalAmount&&""!==C.maxWithdrawalAmount&&(t.MaxWithdrawalAmount=Number(C.maxWithdrawalAmount)),void 0!==C.minWithdrawalAmount&&null!==C.minWithdrawalAmount&&""!==C.minWithdrawalAmount&&(t.MinWithdrawalAmount=Number(C.minWithdrawalAmount)),Object.keys(t).length&&(e.AccountLimits=t),await Ei.updateSavingsAccount(p,e),Ts.success("Compte mis \xe0 jour avec succ\xe8s"),T(!1),V(),null===f||void 0===f||f()}catch(Sc){Ts.error("Erreur lors de la mise \xe0 jour")}},className:"space-y-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Taux d'int\xe9r\xeat (%)"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:C.interestRate,onChange:e=>E((0,s.A)((0,s.A)({},C),{},{interestRate:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Solde minimum"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:C.minimumBalance,onChange:e=>E((0,s.A)((0,s.A)({},C),{},{minimumBalance:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Limite de retrait"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:null!==(l=null!==(o=C.dailyWithdrawalLimit)&&void 0!==o?o:C.withdrawalLimit)&&void 0!==l?l:"",onChange:e=>E((0,s.A)((0,s.A)({},C),{},{dailyWithdrawalLimit:""===e.target.value?"":parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plafond retrait mensuel"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:null!==(c=C.monthlyWithdrawalLimit)&&void 0!==c?c:"",onChange:e=>E((0,s.A)((0,s.A)({},C),{},{monthlyWithdrawalLimit:""===e.target.value?"":parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plafond d\xe9p\xf4t quotidien"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:null!==(d=C.dailyDepositLimit)&&void 0!==d?d:"",onChange:e=>E((0,s.A)((0,s.A)({},C),{},{dailyDepositLimit:""===e.target.value?"":parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"D\xe9finissez une valeur > 0 pour autoriser les d\xe9p\xf4ts quotidiens"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Solde maximum"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:null!==(u=C.maxBalance)&&void 0!==u?u:"",onChange:e=>E((0,s.A)((0,s.A)({},C),{},{maxBalance:""===e.target.value?"":parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Laissez vide pour aucun plafond ou d\xe9finissez un maximum autoris\xe9"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant max. retrait"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:null!==(m=C.maxWithdrawalAmount)&&void 0!==m?m:"",onChange:e=>E((0,s.A)((0,s.A)({},C),{},{maxWithdrawalAmount:""===e.target.value?"":parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant min. retrait"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:null!==(h=C.minWithdrawalAmount)&&void 0!==h?h:"",onChange:e=>E((0,s.A)((0,s.A)({},C),{},{minWithdrawalAmount:""===e.target.value?"":parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,ju.jsx)("textarea",{value:C.notes||"",onChange:e=>E((0,s.A)((0,s.A)({},C),{},{notes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,ju.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ju.jsx)("button",{type:"button",onClick:()=>T(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Annuler"}),(0,ju.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Enregistrer"})]})]})})]})})]}):null},Lw=(e,t)=>{const r=(e=>{if(void 0===e||null===e)return"";const t=String(e).toUpperCase();return"0"===t||"HTG"===t?"HTG":"1"===t||"USD"===t?"USD":""})(t),n=new Intl.NumberFormat("fr-FR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);return r?"".concat(n," ").concat(r):n},Fw=e=>{switch(e){case"Active":return"bg-green-100 text-green-800";case"Inactive":default:return"bg-gray-100 text-gray-800";case"Closed":return"bg-red-100 text-red-800";case"Suspended":return"bg-yellow-100 text-yellow-800"}},Mw=e=>{switch(e){case"Active":return(0,ju.jsx)(Ju,{className:"h-4 w-4"});case"Inactive":return(0,ju.jsx)(Lp,{className:"h-4 w-4"});case"Closed":return(0,ju.jsx)(hi,{className:"h-4 w-4"});case"Suspended":return(0,ju.jsx)(Su,{className:"h-4 w-4"});default:return null}},Uw=t=>{let{onClose:r,onSuccess:n}=t;const[a,i]=(0,e.useState)(!1),[l,o]=(0,e.useState)("customer"),[c,d]=(0,e.useState)(""),[u,m]=(0,e.useState)([]),[h,p]=(0,e.useState)(null),[x,f]=(0,e.useState)([]),[g,v]=(0,e.useState)(!1),y=(0,e.useRef)(null),b=(0,e.useRef)(""),N=/^[A-Z]{2}\d{3,}$/,[j,w]=(0,e.useState)({branchId:1,currency:0,initialDeposit:0,interestRatePercent:2,notes:"",limits:{dailyWithdrawalLimit:"",dailyDepositLimit:"",monthlyWithdrawalLimit:"",maxBalance:"",minWithdrawalAmount:"",maxWithdrawalAmount:""}}),S=async()=>{const e=null===c||void 0===c?void 0:c.trim();if(e&&!(e.length<2))try{i(!0);const t=e.toUpperCase();if(b.current===t)return;b.current=t;const r=await Ei.getSavingsCustomers(t);m(r||[])}catch(Sc){Ts.error("Erreur lors de la recherche du client")}finally{i(!1)}};(0,e.useEffect)(()=>{u.length>0&&y.current&&y.current.scrollIntoView({behavior:"smooth",block:"start"})},[u.length]),(0,e.useEffect)(()=>{"customer"===l&&(b.current="")},[l]),(0,e.useEffect)(()=>{if("customer"!==l)return;const e=null===c||void 0===c?void 0:c.trim();if(!e||e.length<2)return;const t=e.toUpperCase(),r=N.test(t)?200:500,n=setTimeout(()=>{b.current!==t&&S()},r);return()=>clearTimeout(n)},[c,l]),(0,e.useEffect)(()=>{"account"===l&&(async()=>{try{const e=(await Ei.getAllBranches()||[]).map(e=>({id:e.id||e.Id,name:e.name||e.Name}));f(e),e.length&&!j.branchId&&w(t=>(0,s.A)((0,s.A)({},t),{},{branchId:e[0].id}))}catch(e){}})()},[l]);return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold",children:"Ouvrir un Compte d'\xc9pargne"}),(0,ju.jsx)("p",{className:"text-blue-100 mt-1",children:"customer"===l?"\xc9tape 1: S\xe9lectionner le client":"\xc9tape 2: Configurer le compte"})]}),(0,ju.jsx)("button",{onClick:r,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:(0,ju.jsx)(Lp,{className:"h-6 w-6"})})]})}),(0,ju.jsxs)("div",{className:"p-6 md:p-8",children:["customer"===l&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rechercher un client"}),(0,ju.jsxs)("div",{className:"flex gap-2 flex-col sm:flex-row",children:[(0,ju.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),S())},placeholder:"Nom, t\xe9l\xe9phone, code client (ex: TD5765) ou document...",className:"flex-1 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,ju.jsxs)("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,ju.jsx)(Vu,{className:"h-4 w-4"}),"Chercher"]})]}),a&&(0,ju.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Recherche en cours..."}),!a&&0===u.length&&c.trim().length>=2&&(0,ju.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Aucun client trouv\xe9"})]}),u.length>0&&(0,ju.jsx)("div",{ref:y,className:"space-y-2 max-h-[50vh] overflow-y-auto border border-gray-200 rounded-lg p-2 mt-2",children:u.map(e=>(0,ju.jsx)("div",{onClick:()=>(e=>{p(e),o("account")})(e),className:"p-4 border-2 rounded-lg cursor-pointer transition-all ".concat((null===h||void 0===h?void 0:h.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"),children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:e.fullName}),(0,ju.jsx)("p",{className:"text-sm text-gray-500",children:e.primaryPhone}),(e.customerCode||e.CustomerCode)&&(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:["Code: ",e.customerCode||e.CustomerCode]}),(0,ju.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[e.documentType,": ",e.documentNumber]})]}),(null===h||void 0===h?void 0:h.id)===e.id&&(0,ju.jsx)(Ju,{className:"h-6 w-6 text-blue-600"})]})},e.id))}),(0,ju.jsx)("div",{className:"flex justify-end pt-4",children:(0,ju.jsx)("button",{onClick:()=>o("account"),disabled:!h,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Continuer"})})]}),"account"===l&&h&&(0,ju.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!h)return void Ts.error("Veuillez s\xe9lectionner un client");if(!j.initialDeposit||j.initialDeposit<=0)return void Ts.error("Le d\xe9p\xf4t initial doit \xeatre sup\xe9rieur \xe0 0");if(!j.branchId)return void Ts.error("Veuillez s\xe9lectionner une succursale");const t={ExistingCustomerId:h.id||h.Id,Currency:j.currency,InitialDeposit:j.initialDeposit,BranchId:j.branchId};if(void 0!==j.interestRatePercent&&null!==j.interestRatePercent&&j.interestRatePercent>=0&&(t.InterestRate=Number((j.interestRatePercent/100).toFixed(6))),g){const e=j.limits,r={};e.dailyWithdrawalLimit&&(r.DailyWithdrawalLimit=Number(e.dailyWithdrawalLimit)),e.dailyDepositLimit&&(r.DailyDepositLimit=Number(e.dailyDepositLimit)),e.monthlyWithdrawalLimit&&(r.MonthlyWithdrawalLimit=Number(e.monthlyWithdrawalLimit)),e.maxBalance&&(r.MaxBalance=Number(e.maxBalance)),e.minWithdrawalAmount&&(r.MinWithdrawalAmount=Number(e.minWithdrawalAmount)),e.maxWithdrawalAmount&&(r.MaxWithdrawalAmount=Number(e.maxWithdrawalAmount)),Object.keys(r).length&&(t.AccountLimits=r)}i(!0);try{await Ei.openSavingsAccount(t),Ts.success("Compte d'\xe9pargne ouvert avec succ\xe8s"),n()}catch(Sc){var r,s;Ts.error((null===(r=Sc.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Erreur lors de l'ouverture du compte")}finally{i(!1)}},className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Client s\xe9lectionn\xe9:"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:h.fullName}),(0,ju.jsx)("button",{type:"button",onClick:()=>o("customer"),className:"text-sm text-blue-600 hover:underline mt-1",children:"Changer de client"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Devise"}),(0,ju.jsxs)("select",{value:j.currency,onChange:e=>(e=>{const t=0===e?2:1.5;w((0,s.A)((0,s.A)({},j),{},{currency:e,interestRatePercent:t}))})(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,ju.jsx)("option",{value:0,children:"HTG (Gourdes)"}),(0,ju.jsx)("option",{value:1,children:"USD (Dollars)"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Succursale"}),(0,ju.jsx)("select",{value:j.branchId,onChange:e=>w((0,s.A)((0,s.A)({},j),{},{branchId:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:0===x.length?(0,ju.jsxs)("option",{value:j.branchId,children:["#",j.branchId]}):x.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"D\xe9p\xf4t initial (requis)"}),(0,ju.jsx)("input",{type:"number",step:"0.01",min:"0.01",value:j.initialDeposit,onChange:e=>w((0,s.A)((0,s.A)({},j),{},{initialDeposit:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taux d'int\xe9r\xeat (% / an)"}),(0,ju.jsx)("input",{type:"number",step:"0.01",min:"0",max:"15",value:j.interestRatePercent,onChange:e=>w((0,s.A)((0,s.A)({},j),{},{interestRatePercent:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Suggestion: ",0===j.currency?"2.00% (HTG)":"1.50% (USD)"]})]})]}),(0,ju.jsxs)("div",{className:"pt-2",children:[(0,ju.jsx)("button",{type:"button",onClick:()=>v(!g),className:"text-sm text-gray-700 hover:text-gray-900",children:g?"Masquer options avanc\xe9es":"Afficher options avanc\xe9es"}),g&&(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plafond Retrait Quotidien"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:j.limits.dailyWithdrawalLimit,onChange:e=>w((0,s.A)((0,s.A)({},j),{},{limits:(0,s.A)((0,s.A)({},j.limits),{},{dailyWithdrawalLimit:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plafond D\xe9p\xf4t Quotidien"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:j.limits.dailyDepositLimit,onChange:e=>w((0,s.A)((0,s.A)({},j),{},{limits:(0,s.A)((0,s.A)({},j.limits),{},{dailyDepositLimit:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plafond Retrait Mensuel"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:j.limits.monthlyWithdrawalLimit,onChange:e=>w((0,s.A)((0,s.A)({},j),{},{limits:(0,s.A)((0,s.A)({},j.limits),{},{monthlyWithdrawalLimit:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Solde Maximum"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:j.limits.maxBalance,onChange:e=>w((0,s.A)((0,s.A)({},j),{},{limits:(0,s.A)((0,s.A)({},j.limits),{},{maxBalance:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant Min. Retrait"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:j.limits.minWithdrawalAmount,onChange:e=>w((0,s.A)((0,s.A)({},j),{},{limits:(0,s.A)((0,s.A)({},j.limits),{},{minWithdrawalAmount:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant Max. Retrait"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:j.limits.maxWithdrawalAmount,onChange:e=>w((0,s.A)((0,s.A)({},j),{},{limits:(0,s.A)((0,s.A)({},j.limits),{},{maxWithdrawalAmount:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (optionnel)"}),(0,ju.jsx)("textarea",{value:j.notes,onChange:e=>w((0,s.A)((0,s.A)({},j),{},{notes:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Notes additionnelles..."})]}),(0,ju.jsxs)("div",{className:"flex gap-4 pt-6 border-t border-gray-200 mt-6",children:[(0,ju.jsx)("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),(0,ju.jsx)("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2",children:a?(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)(Eu,{className:"h-4 w-4 animate-spin"}),"Ouverture..."]}):(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)(Ju,{className:"h-4 w-4"}),"Ouvrir le compte"]})})]})]})]})]})})},Bw=()=>{var t,r,n;const[a,i]=(0,e.useState)([]),[l,o]=(0,e.useState)(!1),[c,d]=(0,e.useState)(null),[u,m]=(0,e.useState)(!1),[h,p]=(0,e.useState)(!1),[x,f]=(0,e.useState)(!1),[g,v]=(0,e.useState)(!1),[y,b]=(0,e.useState)(""),[N,j]=(0,e.useState)({}),[w,S]=(0,e.useState)(null),[A,T]=(0,e.useState)(null),[C,E]=(0,e.useState)([]),[D,k]=(0,e.useState)(1),[R,_]=(0,e.useState)(10);(0,e.useEffect)(()=>{I(),P(),O();try{var e;const t=null===(e=Ei.getCurrentUser)||void 0===e?void 0:e.call(Ei);t&&T(t)}catch(t){}},[N]),(0,e.useEffect)(()=>{k(1)},[y,N]);const I=async()=>{o(!0);try{const e=await Ei.getSavingsAccounts(N);i(e)}catch(Sc){console.error("Error loading accounts:",Sc),Ts.error("Erreur lors du chargement des comptes")}finally{o(!1)}},P=async()=>{try{const e=await Ei.getSavingsAccountStatistics();S(e)}catch(Sc){console.error("Error loading statistics:",Sc)}},O=async()=>{try{const e=(await Ei.getAllBranches()||[]).map(e=>({id:e.id||e.Id,name:e.name||e.Name}));E(e)}catch(Sc){console.error("Error loading branches:",Sc)}},L=a.filter(e=>e.accountNumber.toLowerCase().includes(y.toLowerCase())||e.customerName.toLowerCase().includes(y.toLowerCase())||e.customerPhone.includes(y)).filter(e=>(!N.branchId||e.branchId===N.branchId)&&((void 0===N.currency||e.currency===(0===N.currency?"HTG":"USD"))&&(void 0===N.status||e.status===(0===N.status?"Active":1===N.status?"Inactive":2===N.status?"Closed":"Suspended")))),F=L.length,M=Math.ceil(F/R),U=L.slice((D-1)*R,D*R),B=a.filter(e=>{const t=String(e.currency).toUpperCase();return"HTG"===t||"0"===t}).length,H=a.filter(e=>{const t=String(e.currency).toUpperCase();return"USD"===t||"1"===t}).length;return(0,ju.jsxs)("div",{className:"space-y-6",children:[w&&(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[(0,ju.jsx)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Total Comptes"}),(0,ju.jsx)("p",{className:"text-3xl font-bold",children:w.totalAccounts||0}),(0,ju.jsxs)("p",{className:"text-xs mt-1 opacity-75",children:[(0,ju.jsx)("span",{className:"font-bold",children:B})," Compte(s) HTG | ",(0,ju.jsx)("span",{className:"font-bold",children:H})," Compte(s) USD"]}),(0,ju.jsxs)("p",{className:"text-xs mt-1 opacity-75",children:[w.activeAccounts||0," actifs"]})]}),(0,ju.jsx)(Du,{className:"h-12 w-12 opacity-80"})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Solde Total HTG"}),(0,ju.jsx)("p",{className:"text-2xl font-bold",children:new Intl.NumberFormat("fr-FR").format(w.totalBalanceHTG)}),(0,ju.jsx)("p",{className:"text-xs mt-1 opacity-75",children:"Gourdes"})]}),(0,ju.jsx)(ku,{className:"h-12 w-12 opacity-80"})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Solde Total USD"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold",children:["$",new Intl.NumberFormat("fr-FR").format(w.totalBalanceUSD)]}),(0,ju.jsx)("p",{className:"text-xs mt-1 opacity-75",children:"Dollars US"})]}),(0,ju.jsx)(Du,{className:"h-12 w-12 opacity-80"})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Cr\xe9\xe9s aujourd'hui"}),(0,ju.jsx)("p",{className:"text-3xl font-bold",children:(()=>{const e=new Date;return e.setHours(0,0,0,0),a.filter(t=>{const r=t.createdAt||t.openingDate;if(!r)return!1;const n=new Date(r);return n.setHours(0,0,0,0),n.getTime()===e.getTime()}).length})()}),(0,ju.jsx)("p",{className:"text-xs mt-1 opacity-75",children:"Comptes ouverts"})]}),(0,ju.jsx)(pm,{className:"h-12 w-12 opacity-80"})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Nouveaux ce Mois"}),(0,ju.jsx)("p",{className:"text-3xl font-bold",children:w.newAccountsThisMonth||0}),(0,ju.jsx)("p",{className:"text-xs mt-1 opacity-75",children:"Comptes ouverts"})]}),(0,ju.jsx)(pm,{className:"h-12 w-12 opacity-80"})]})})]}),(0,ju.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsxs)("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[(0,ju.jsx)("div",{className:"flex-1 min-w-[300px]",children:(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,ju.jsx)("input",{type:"text",placeholder:"Rechercher par num\xe9ro, nom client ou t\xe9l\xe9phone...",value:y,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,ju.jsxs)("div",{className:"flex gap-2",children:[(0,ju.jsxs)("button",{onClick:()=>v(!g),className:"px-4 py-2 rounded-lg border-2 transition-colors flex items-center gap-2 ".concat(g?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-300 hover:border-blue-500"),children:[(0,ju.jsx)(hm,{className:"h-4 w-4"}),"Filtres",g?(0,ju.jsx)(fm,{className:"h-4 w-4"}):(0,ju.jsx)(gm,{className:"h-4 w-4"})]}),(0,ju.jsxs)("button",{onClick:async()=>{try{const e=await Ei.calculateAllSavingsInterest();Ts.success("Int\xe9r\xeats calcul\xe9s pour ".concat(e.message||"tous les comptes")),I(),P()}catch(Sc){Ts.error("Erreur lors du calcul des int\xe9r\xeats")}},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,ju.jsx)(ku,{className:"h-4 w-4"}),"Calculer Int\xe9r\xeats"]}),(0,ju.jsxs)("button",{onClick:I,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors flex items-center gap-2",children:[(0,ju.jsx)(Eu,{className:"h-4 w-4"}),"Actualiser"]}),(0,ju.jsxs)("div",{className:"hidden sm:flex items-center gap-2",children:[(0,ju.jsxs)("button",{onClick:()=>(()=>{try{const e=L.map(e=>({id:e.id,accountNumber:e.accountNumber,customerName:e.customerName,phone:e.customerPhone,branch:e.branchName,currency:e.currency,balance:e.balance,status:e.status,opened:e.openingDate})),t=(0,Rp.unparse)(e),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download="accounts_savings_".concat((new Date).toISOString().slice(0,10),".csv"),s.click(),URL.revokeObjectURL(n)}catch(e){console.error(e),Ts.error("Erreur lors de l'export CSV")}})(),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors flex items-center gap-2",title:"Exporter CSV",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"})," CSV"]}),(0,ju.jsxs)("button",{onClick:()=>(()=>{try{const e=L.map(e=>({ID:e.id,NumeroCompte:e.accountNumber,Client:e.customerName,Telephone:e.customerPhone,Succursale:e.branchName,Devise:e.currency,Solde:e.balance,Statut:e.status,OuvertLe:e.openingDate})),t=Aw.json_to_sheet(e),r=Aw.book_new();Aw.book_append_sheet(r,t,"Comptes"),hw(r,"accounts_savings_".concat((new Date).toISOString().slice(0,10),".xlsx"))}catch(e){console.error(e),Ts.error("Erreur lors de l'export Excel")}})(),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors flex items-center gap-2",title:"Exporter Excel",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"})," XLSX"]}),(0,ju.jsxs)("button",{onClick:()=>(()=>{try{const e=window.open("","_blank");if(!e)return void Ts.error("Veuillez autoriser les pop-ups pour exporter en PDF");const t=L.map(e=>'\n        <tr>\n          <td style="padding:8px;border:1px solid #ddd">'.concat(e.accountNumber,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.customerName,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.branchName,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.currency,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.balance,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.status,"</td>\n        </tr>\n      ")).join(""),r='\n        <html><head><meta charset="utf-8"><title>Comptes \xc9pargne</title>\n        <style>table{border-collapse:collapse;width:100%;font-family:Arial,Helvetica,sans-serif}th,td{border:1px solid #ddd;padding:8px}th{background:#f3f4f6;text-align:left}</style>\n        </head><body>\n        <h2>Liste Comptes \xc9pargne</h2>\n        <p>Export\xe9 le '.concat((new Date).toLocaleString("fr-FR"),"</p>\n        <table>\n          <thead><tr><th>Compte</th><th>Client</th><th>Succursale</th><th>Devise</th><th>Solde</th><th>Statut</th></tr></thead>\n          <tbody>").concat(t,"</tbody>\n        </table>\n        <script>window.onload = ()=>{ setTimeout(()=>{ window.print(); },300); };<\/script>\n        </body></html>\n      ");e.document.write(r),e.document.close(),Ts.success("Fen\xeatre d'export ouverte - utilisez Imprimer pour sauver en PDF")}catch(e){console.error(e),Ts.error("Erreur lors de l'export PDF")}})(),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors flex items-center gap-2",title:"Exporter PDF",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"})," PDF"]})]}),(0,ju.jsxs)("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,ju.jsx)(Au,{className:"h-4 w-4"}),"Nouveau Compte"]}),(0,ju.jsxs)("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,ju.jsx)(Au,{className:"h-4 w-4"}),"Nouveau Client + Compte"]})]})]}),g&&(0,ju.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,ju.jsx)(Ku,{className:"h-4 w-4"}),"Succursale"]}),(0,ju.jsxs)("select",{value:null!==(t=N.branchId)&&void 0!==t?t:"",onChange:e=>j((0,s.A)((0,s.A)({},N),{},{branchId:e.target.value?parseInt(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"Toutes succursales"}),C.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,ju.jsx)(Du,{className:"h-4 w-4"}),"Devise"]}),(0,ju.jsxs)("select",{value:null!==(r=N.currency)&&void 0!==r?r:"",onChange:e=>j((0,s.A)((0,s.A)({},N),{},{currency:e.target.value?parseInt(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"Toutes devises"}),(0,ju.jsx)("option",{value:"0",children:"HTG"}),(0,ju.jsx)("option",{value:"1",children:"USD"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,ju.jsx)(Ju,{className:"h-4 w-4"}),"Statut"]}),(0,ju.jsxs)("select",{value:null!==(n=N.status)&&void 0!==n?n:"",onChange:e=>j((0,s.A)((0,s.A)({},N),{},{status:e.target.value?parseInt(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"Tous statuts"}),(0,ju.jsx)("option",{value:"0",children:"Actifs"}),(0,ju.jsx)("option",{value:"1",children:"Inactifs"}),(0,ju.jsx)("option",{value:"2",children:"Ferm\xe9s"}),(0,ju.jsx)("option",{value:"3",children:"Suspendus"})]})]}),(0,ju.jsx)("div",{className:"flex items-end",children:(0,ju.jsx)("button",{onClick:()=>j({}),className:"w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"R\xe9initialiser"})})]})]}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:l?(0,ju.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,ju.jsx)(Eu,{className:"h-8 w-8 text-blue-600 animate-spin"})}):0===L.length?(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)(Hu,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun compte trouv\xe9"}),(0,ju.jsx)("p",{className:"text-gray-500",children:"Essayez de modifier vos crit\xe8res de recherche"})]}):(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Num\xe9ro Compte"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Succursale"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Devise"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Solde"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Int\xe9r\xeats"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:U.map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ju.jsx)("div",{className:"font-medium text-gray-900",children:e.accountNumber}),(0,ju.jsxs)("div",{className:"text-sm text-gray-500",children:["Ouvert le ",new Date(e.openingDate).toLocaleDateString("fr-FR")]})]}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ju.jsx)("div",{className:"font-medium text-gray-900",children:e.customerName&&""!==e.customerName.trim()?e.customerName:e.customerCode||e.CustomerCode||e.customerId?(0,ju.jsx)("span",{className:"italic text-gray-400",children:e.customerCode||e.CustomerCode||e.customerId}):(0,ju.jsx)("span",{className:"italic text-gray-400",children:"Nom inconnu"})}),(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:e.customerCode||e.CustomerCode?"Code: ".concat(e.customerCode||e.CustomerCode):e.customerPhone})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.branchName}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("HTG"===String(e.currency).toUpperCase()||"0"===String(e.currency)?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:"HTG"===String(e.currency).toUpperCase()||"0"===String(e.currency)?"HTG":"USD"})}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[(0,ju.jsx)("div",{className:"font-semibold text-gray-900",children:Lw(e.balance,e.currency)}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["Dispo: ",Lw(e.availableBalance,e.currency)]})]}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[(0,ju.jsx)("div",{className:"text-sm font-medium text-purple-600",children:Lw(e.accruedInterest,e.currency)}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:[e.interestRate,"% / an"]})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(()=>{const t="number"===typeof e.status?{0:"Active",1:"Inactive",2:"Closed",3:"Suspended"}[e.status]:e.status;return(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(Fw(t)),children:[Mw(t),t]})})()}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,ju.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,ju.jsx)("button",{onClick:()=>(async e=>{d(e),m(!0)})(e),className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Voir d\xe9tails",children:(0,ju.jsx)(fi,{className:"h-4 w-4"})}),(0,ju.jsx)("button",{onClick:()=>(async e=>{try{await Ei.calculateSavingsAccountInterest(e),Ts.success("Int\xe9r\xeats calcul\xe9s avec succ\xe8s"),I()}catch(Sc){var t,r,n;const s=Sc,a=null===s||void 0===s||null===(t=s.response)||void 0===t?void 0:t.status,i=(null===s||void 0===s||null===(r=s.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||(null===s||void 0===s?void 0:s.message);403===a?Ts.error("Vous n'avez pas l'autorisation (Admin/SuperAdmin requis)"):400===a||404===a?Ts.error(i||"Requ\xeate invalide lors du calcul des int\xe9r\xeats"):Ts.error("Erreur lors du calcul des int\xe9r\xeats")}})(e.id),className:"p-1 text-purple-600 hover:bg-purple-50 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:(()=>{const t=((null===A||void 0===A?void 0:A.role)||(null===A||void 0===A?void 0:A.Role)||"").toString(),r="Admin"===t||"SuperAdmin"===t,n=new Date(e.openingDate),s=e.lastInterestCalculation?new Date(e.lastInterestCalculation):n,a=Math.floor((Date.now()-s.getTime())/864e5),i="Active"===e.status&&e.interestRate>0&&a>=30;return r?i?"Calculer int\xe9r\xeats":"Non \xe9ligible: compte actif, taux > 0, et \u2265 30 jours requis":"R\xe9serv\xe9 aux Admin/SuperAdmin"})(),disabled:(()=>{const t=((null===A||void 0===A?void 0:A.role)||(null===A||void 0===A?void 0:A.Role)||"").toString(),r="Admin"===t||"SuperAdmin"===t,n=new Date(e.openingDate),s=e.lastInterestCalculation?new Date(e.lastInterestCalculation):n,a=Math.floor((Date.now()-s.getTime())/864e5),i="Active"===e.status&&e.interestRate>0&&a>=30;return!r||!i})(),children:(0,ju.jsx)(ku,{className:"h-4 w-4"})}),"Active"===e.status&&(0,ju.jsx)("button",{onClick:()=>(async e=>{const t=prompt("Raison de la fermeture du compte:");if(t)try{await Ei.closeSavingsAccount(e,t),Ts.success("Compte ferm\xe9 avec succ\xe8s"),I()}catch(Sc){Ts.error("Erreur lors de la fermeture du compte")}})(e.id),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Fermer compte",children:(0,ju.jsx)(hi,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),F>0&&(0,ju.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,ju.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,ju.jsx)("button",{onClick:()=>k(Math.max(1,D-1)),disabled:1===D,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Pr\xe9c\xe9dent"}),(0,ju.jsx)("button",{onClick:()=>k(Math.min(M,D+1)),disabled:D===M,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Suivant"})]}),(0,ju.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("label",{htmlFor:"pageSize",className:"text-sm text-gray-700",children:"\xc9l\xe9ments par page:"}),(0,ju.jsxs)("select",{id:"pageSize",value:R,onChange:e=>{_(Number(e.target.value)),k(1)},className:"border border-gray-300 rounded-md px-2 py-1 text-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,ju.jsx)("option",{value:5,children:"5"}),(0,ju.jsx)("option",{value:10,children:"10"}),(0,ju.jsx)("option",{value:25,children:"25"}),(0,ju.jsx)("option",{value:50,children:"50"})]})]}),(0,ju.jsxs)("div",{className:"text-sm text-gray-700",children:["Affichage de ",Math.min((D-1)*R+1,F)," \xe0 ",Math.min(D*R,F)," sur ",F," r\xe9sultats"]})]}),(0,ju.jsx)("div",{children:(0,ju.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,ju.jsxs)("button",{onClick:()=>k(Math.max(1,D-1)),disabled:1===D,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,ju.jsx)("span",{className:"sr-only",children:"Pr\xe9c\xe9dent"}),(0,ju.jsx)(fm,{className:"h-5 w-5 rotate-[-90deg]"})]}),(0,ju.jsxs)("div",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:["Page ",D," sur ",M]}),(0,ju.jsxs)("button",{onClick:()=>k(Math.min(M,D+1)),disabled:D===M,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,ju.jsx)("span",{className:"sr-only",children:"Suivant"}),(0,ju.jsx)(fm,{className:"h-5 w-5 rotate-90"})]})]})})]})]}),h&&(0,ju.jsx)(Uw,{onClose:()=>p(!1),onSuccess:()=>{p(!1),I(),P()}}),x&&(0,ju.jsx)(Hw,{onClose:()=>f(!1),onSuccess:()=>{f(!1),I(),P()}}),u&&c&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[95vh] overflow-y-auto relative",children:(0,ju.jsx)(Ow,{accountId:c.id,onClose:()=>{m(!1),d(null)},onUpdate:()=>{I(),P&&P()}})})})]})},Hw=t=>{let{onClose:r,onSuccess:n}=t;const[a,i]=(0,e.useState)(!1),[l,o]=(0,e.useState)("customer"),[c,d]=(0,e.useState)([]),[u,m]=(0,e.useState)(null),[h,p]=(0,e.useState)(null),[x,f]=(0,e.useState)({branchId:1,currency:0,initialDeposit:0,interestRatePercent:2,limits:{dailyWithdrawalLimit:"",dailyDepositLimit:"",monthlyWithdrawalLimit:"",maxBalance:"",minWithdrawalAmount:"",maxWithdrawalAmount:""}}),[g,v]=(0,e.useState)(!1);(0,e.useEffect)(()=>{"account"===l&&(async()=>{try{const e=(await Ei.getAllBranches()||[]).map(e=>({id:e.id||e.Id,name:e.name||e.Name}));d(e),e.length&&!x.branchId&&f(t=>(0,s.A)((0,s.A)({},t),{},{branchId:e[0].id}))}catch(e){}})()},[l]);return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-green-600 to-green-700 p-6 text-white",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold",children:"Nouveau Client + Compte d'\xc9pargne"}),(0,ju.jsx)("p",{className:"text-green-100 mt-1",children:"customer"===l?"\xc9tape 1: Cr\xe9er le client":"\xc9tape 2: Configurer le compte"})]}),(0,ju.jsx)("button",{onClick:r,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:(0,ju.jsx)(Lp,{className:"h-6 w-6"})})]})}),(0,ju.jsxs)("div",{className:"p-6 md:p-8",children:["customer"===l&&(0,ju.jsx)(Bm,{onSubmit:async e=>{i(!0);try{const t=(e=>{var t,r;const n=e=>Number(e),a=(0,s.A)((0,s.A)({isBusiness:!!e.isBusiness,firstName:e.firstName||e.legalRepresentativeFirstName||"",lastName:e.lastName||e.legalRepresentativeLastName||"",dateOfBirth:e.dateOfBirth||"1900-01-01",gender:(e=>"F"===String(e).toUpperCase()?1:0)(e.gender||"M"),street:e.street,commune:e.commune,department:e.department,postalCode:e.postalAddress||e.postalCode||void 0,primaryPhone:e.primaryPhone||e.companyPhone,secondaryPhone:e.secondaryPhone||void 0,email:e.email||e.companyEmail||void 0,emergencyContactName:e.emergencyContactName||(null===(t=e.emergencyContact)||void 0===t?void 0:t.name)||void 0,emergencyContactPhone:e.emergencyContactPhone||(null===(r=e.emergencyContact)||void 0===r?void 0:r.phone)||void 0,documentType:n(e.documentType||e.legalRepresentativeDocumentType),documentNumber:e.documentNumber||e.legalRepresentativeDocumentNumber,issuedDate:e.issuedDate||e.legalRepresentativeIssuedDate,expiryDate:e.expiryDate||e.legalRepresentativeExpiryDate||void 0,issuingAuthority:e.issuingAuthority||e.legalRepresentativeIssuingAuthority,occupation:e.occupation||void 0,monthlyIncome:e.monthlyIncome?Number(e.monthlyIncome):void 0},e.isBusiness&&{companyName:e.companyName||void 0,legalForm:e.legalForm||void 0,tradeRegisterNumber:e.tradeRegisterNumber||e.businessRegistrationNumber||void 0,taxId:e.taxId||e.companyNif||void 0,headOfficeAddress:e.headOfficeAddress||void 0,companyPhone:e.companyPhone||void 0,companyEmail:e.companyEmail||void 0,representativeFirstName:e.legalRepresentativeFirstName||void 0,representativeLastName:e.legalRepresentativeLastName||void 0,representativeTitle:e.legalRepresentativeTitle||void 0,representativeDocumentType:n(e.legalRepresentativeDocumentType),representativeDocumentNumber:e.legalRepresentativeDocumentNumber||void 0,representativeIssuedDate:e.legalRepresentativeIssuedDate||void 0,representativeExpiryDate:e.legalRepresentativeExpiryDate||void 0,representativeIssuingAuthority:e.legalRepresentativeIssuingAuthority||void 0}),{},{birthPlace:e.birthPlace||void 0,nationality:e.nationality||"Ha\xeftienne",personalNif:e.nif||void 0,employerName:e.employerName||void 0,workAddress:e.workAddress||void 0,incomeSource:e.incomeSource||void 0,maritalStatus:e.maritalStatus||void 0,numberOfDependents:e.numberOfDependents||void 0,educationLevel:e.educationLevel||void 0,acceptTerms:e.acceptTerms||!1,signaturePlace:e.signaturePlace||void 0,signatureDate:e.signatureDate||void 0,referencePersonName:e.referencePerson||void 0,referencePersonPhone:e.referencePersonPhone||void 0});return a})(e),r=await Fm.createCustomer(t),i=r.id;if(e.uploadedFiles)try{if(e.uploadedFiles.photo&&(await Fm.uploadFile(e.uploadedFiles.photo,i,"photo"),console.log("Photo uploaded successfully")),e.uploadedFiles.idDocument&&(await Fm.uploadDocument(i,e.uploadedFiles.idDocument,0,"Pi\xe8ce d'identit\xe9","Document d'identit\xe9 du client"),console.log("ID document uploaded successfully")),e.uploadedFiles.proofOfResidence&&(await Fm.uploadDocument(i,e.uploadedFiles.proofOfResidence,1,"Justificatif de domicile","Preuve de r\xe9sidence"),console.log("Proof of residence uploaded successfully")),e.uploadedFiles.businessRegistrationDocument&&(await Fm.uploadDocument(i,e.uploadedFiles.businessRegistrationDocument,4,"Registre de commerce","Extrait du registre de commerce"),console.log("Business registration document uploaded successfully")),e.uploadedFiles.companyProofOfAddress&&(await Fm.uploadDocument(i,e.uploadedFiles.companyProofOfAddress,1,"Justificatif domicile soci\xe9t\xe9","Preuve d'adresse de l'entreprise"),console.log("Company proof of address uploaded successfully")),e.uploadedFiles.fundsOriginDeclaration&&(await Fm.uploadDocument(i,e.uploadedFiles.fundsOriginDeclaration,4,"D\xe9claration origine fonds","D\xe9claration d'origine des fonds"),console.log("Funds origin declaration uploaded successfully")),e.uploadedFiles.otherDocuments&&e.uploadedFiles.otherDocuments.length>0){for(let t=0;t<e.uploadedFiles.otherDocuments.length;t++){const r=e.uploadedFiles.otherDocuments[t];await Fm.uploadDocument(i,r,4,"Document suppl\xe9mentaire ".concat(t+1),"Document suppl\xe9mentaire")}console.log("Other documents uploaded successfully")}}catch(n){console.error("Error uploading files:",n),Ts.error("Client cr\xe9\xe9 mais erreur lors de l'upload des fichiers")}if(e.signature)try{await Fm.saveSignature(i,e.signature),console.log("Signature saved successfully")}catch(a){console.error("Error saving signature:",a),Ts.error("Client cr\xe9\xe9 mais erreur lors de la sauvegarde de la signature")}return m(t),p(i),o("account"),r}catch(Sc){var t,r;throw console.error("Error creating customer:",Sc),Ts.error((null===Sc||void 0===Sc||null===(t=Sc.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||(null===Sc||void 0===Sc?void 0:Sc.message)||"Erreur lors de la cr\xe9ation du client"),Sc}finally{i(!1)}},onCancel:r,isLoading:a}),"account"===l&&(0,ju.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!u)return void Ts.error("Veuillez compl\xe9ter la cr\xe9ation du client");if(!x.initialDeposit||x.initialDeposit<=0)return void Ts.error("Le d\xe9p\xf4t initial doit \xeatre sup\xe9rieur \xe0 0");if(!x.branchId)return void Ts.error("Veuillez s\xe9lectionner une succursale");const t={CustomerId:h,Currency:x.currency,InitialDeposit:x.initialDeposit,BranchId:x.branchId};if(void 0!==x.interestRatePercent&&null!==x.interestRatePercent&&x.interestRatePercent>=0&&(t.InterestRate=Number((x.interestRatePercent/100).toFixed(6))),g){const e=x.limits,r={};e.dailyWithdrawalLimit&&(r.DailyWithdrawalLimit=Number(e.dailyWithdrawalLimit)),e.dailyDepositLimit&&(r.DailyDepositLimit=Number(e.dailyDepositLimit)),e.monthlyWithdrawalLimit&&(r.MonthlyWithdrawalLimit=Number(e.monthlyWithdrawalLimit)),e.maxBalance&&(r.MaxBalance=Number(e.maxBalance)),e.minWithdrawalAmount&&(r.MinWithdrawalAmount=Number(e.minWithdrawalAmount)),e.maxWithdrawalAmount&&(r.MaxWithdrawalAmount=Number(e.maxWithdrawalAmount)),Object.keys(r).length&&(t.AccountLimits=r)}i(!0);try{await Ei.openSavingsAccount(t),Ts.success("Client cr\xe9\xe9 et compte d'\xe9pargne ouvert avec succ\xe8s"),n()}catch(Sc){var r,s;Ts.error((null===Sc||void 0===Sc||null===(r=Sc.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Erreur lors de l'ouverture du compte")}finally{i(!1)}},className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Devise"}),(0,ju.jsxs)("select",{value:x.currency,onChange:e=>(e=>{const t=0===e?2:1.5;f((0,s.A)((0,s.A)({},x),{},{currency:e,interestRatePercent:t}))})(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,ju.jsx)("option",{value:0,children:"HTG (Gourdes)"}),(0,ju.jsx)("option",{value:1,children:"USD (Dollars)"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Succursale"}),(0,ju.jsx)("select",{value:x.branchId,onChange:e=>f((0,s.A)((0,s.A)({},x),{},{branchId:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:0===c.length?(0,ju.jsxs)("option",{value:x.branchId,children:["#",x.branchId]}):c.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"D\xe9p\xf4t initial (requis)"}),(0,ju.jsx)("input",{type:"number",step:"0.01",min:"0.01",value:x.initialDeposit,onChange:e=>f((0,s.A)((0,s.A)({},x),{},{initialDeposit:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taux d'int\xe9r\xeat (% / an)"}),(0,ju.jsx)("input",{type:"number",step:"0.01",min:"0",max:"15",value:x.interestRatePercent,onChange:e=>f((0,s.A)((0,s.A)({},x),{},{interestRatePercent:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Suggestion: ",0===x.currency?"2.00% (HTG)":"1.50% (USD)"]})]})]}),(0,ju.jsxs)("div",{className:"pt-2",children:[(0,ju.jsx)("button",{type:"button",onClick:()=>v(!g),className:"text-sm text-gray-700 hover:text-gray-900",children:g?"Masquer options avanc\xe9es":"Afficher options avanc\xe9es"}),g&&(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plafond Retrait Quotidien"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:x.limits.dailyWithdrawalLimit,onChange:e=>f((0,s.A)((0,s.A)({},x),{},{limits:(0,s.A)((0,s.A)({},x.limits),{},{dailyWithdrawalLimit:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plafond D\xe9p\xf4t Quotidien"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:x.limits.dailyDepositLimit,onChange:e=>f((0,s.A)((0,s.A)({},x),{},{limits:(0,s.A)((0,s.A)({},x.limits),{},{dailyDepositLimit:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plafond Retrait Mensuel"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:x.limits.monthlyWithdrawalLimit,onChange:e=>f((0,s.A)((0,s.A)({},x),{},{limits:(0,s.A)((0,s.A)({},x.limits),{},{monthlyWithdrawalLimit:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Solde Maximum"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:x.limits.maxBalance,onChange:e=>f((0,s.A)((0,s.A)({},x),{},{limits:(0,s.A)((0,s.A)({},x.limits),{},{maxBalance:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant Min. Retrait"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:x.limits.minWithdrawalAmount,onChange:e=>f((0,s.A)((0,s.A)({},x),{},{limits:(0,s.A)((0,s.A)({},x.limits),{},{minWithdrawalAmount:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant Max. Retrait"}),(0,ju.jsx)("input",{type:"number",step:"0.01",value:x.limits.maxWithdrawalAmount,onChange:e=>f((0,s.A)((0,s.A)({},x),{},{limits:(0,s.A)((0,s.A)({},x.limits),{},{maxWithdrawalAmount:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,ju.jsxs)("div",{className:"flex gap-4 pt-6 border-t border-gray-200 mt-6",children:[(0,ju.jsx)("button",{type:"button",onClick:()=>o("customer"),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Retour"}),(0,ju.jsx)("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2",children:a?(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)(Eu,{className:"h-4 w-4 animate-spin"}),"Ouverture..."]}):(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)(Ju,{className:"h-4 w-4"}),"Cr\xe9er client et ouvrir compte"]})})]})]})]})]})})},zw=t=>{var r,n,a,i,l,o,c,d,u,m,h,p,x,f,g,v,y,b;let{accountId:N,onClose:j,onUpdate:w}=t;const[S,A]=(0,e.useState)(null),[T,C]=(0,e.useState)([]),[E,D]=(0,e.useState)(!0),[k,R]=(0,e.useState)("info"),[_,I]=(0,e.useState)(!1),[P,O]=(0,e.useState)(""),[L,F]=(0,e.useState)(!1),[M,U]=(0,e.useState)({overdraftLimit:0,minimumBalance:0,dailyWithdrawalLimit:0,monthlyWithdrawalLimit:0,allowOverdraft:!1}),[B,H]=(0,e.useState)(!1),[z,G]=(0,e.useState)({}),[V,W]=(0,e.useState)(null);(0,e.useEffect)(()=>{q()},[N]);const q=async()=>{D(!0);try{var e,t;const D=await Di.getAccountDetails(N);try{console.log("Account raw:",D),console.log("Account keys:",Object.keys(D||{}))}catch(mn){console.log("Account debug error",mn)}let k=D||null;try{var r,n,a,i,l,o,c,d,u,m,h;const e=null!==(r=null!==(n=null!==(a=null===(i=k)||void 0===i?void 0:i.customerId)&&void 0!==a?a:null===(l=k)||void 0===l?void 0:l.CustomerId)&&void 0!==n?n:null===(o=k)||void 0===o?void 0:o.clientId)&&void 0!==r?r:null===(c=k)||void 0===c?void 0:c.ClientId,t=e?String(e).trim():"",N=!!(null!==(d=k)&&void 0!==d&&d.clientId||null!==(u=k)&&void 0!==u&&u.clientCode||null!==(m=k)&&void 0!==m&&m.customerCode||null!==(h=k)&&void 0!==h&&h.customerNumber);console.log("Enrichment check:",{rawCustId:e,custId:t,hasCode:N});let A=null;if(!N){if(t){console.log("Fetching customer by id for enrichment...",t);try{var p;A=await(null===(p=Lm.getCustomer)||void 0===p?void 0:p.call(Lm,String(t)))}catch(E){console.log("Customer fetch by id failed",E),A=null}}if(!A){var x,f,g,v,y;const e=(null===(x=k)||void 0===x?void 0:x.customerPhone)||(null===(f=k)||void 0===f?void 0:f.primaryPhone)||(null===(g=k)||void 0===g||null===(v=g.contact)||void 0===v?void 0:v.primaryPhone)||(null===(y=k)||void 0===y?void 0:y.phone);if(e){console.log("Attempting customer lookup by phone for enrichment...",e);try{var b;A=await(null===(b=Lm.getCustomerByPhone)||void 0===b?void 0:b.call(Lm,String(e)))}catch(E){console.log("Customer fetch by phone failed",E),A=null}}}if(!A){var j,w,S;const e=(null===(j=k)||void 0===j?void 0:j.customerName)||(null===(w=k)||void 0===w?void 0:w.fullName)||(null===(S=k)||void 0===S?void 0:S.name);if(e&&String(e).trim().length>2){console.log("Attempting customer search by name for enrichment...",e);try{var T;const t=await(null===(T=Lm.searchCustomers)||void 0===T?void 0:T.call(Lm,String(e)));t&&t.length>0&&(A=t[0],console.log("Customer search results count:",t.length))}catch(E){console.log("Customer search by name failed",E),A=null}}}if(A){try{console.log("Customer raw:",A),console.log("Customer keys:",Object.keys(A||{}))}catch(mn){console.log("Customer debug error",mn)}k=(0,s.A)((0,s.A)({},k),{},{clientId:A.clientId||A.customerId||A.id||A.CustomerId,clientCode:A.clientCode||A.customerCode||A.CustomerCode||A.code||A.client_number,customerName:A.fullName||A.customerName||A.name||A.FullName,customerCode:A.customerCode||A.CustomerCode||A.code||A.clientCode||A.client_number})}}}catch(mn){console.error("Enrichment error:",mn)}try{console.log("Account after enrichment (raw):",k),console.log("Account after enrichment keys:",Object.keys(k||{}))}catch(mn){console.log("Account after enrichment debug error",mn)}A(k||null);const R=(null===(e=k)||void 0===e?void 0:e.accountNumber)||(null===(t=k)||void 0===t?void 0:t.AccountNumber)||String(N||"");if(R){const e=await Di.getAccountTransactions(R);C(e||[])}else C([])}catch(E){console.error("Error loading current account details",E),Ts.error("Erreur lors du chargement du compte"),A(null),C([])}finally{D(!1)}},$=async()=>{G({});const e={overdraftLimit:Number(M.overdraftLimit||0),minimumBalance:Number(M.minimumBalance||0),dailyWithdrawalLimit:Number(M.dailyWithdrawalLimit||0),monthlyWithdrawalLimit:Number(M.monthlyWithdrawalLimit||0),allowOverdraft:!!M.allowOverdraft},t={};if((Number.isNaN(e.overdraftLimit)||e.overdraftLimit<0)&&(t.overdraftLimit="La limite de d\xe9couvert doit \xeatre un nombre \u2265 0"),(Number.isNaN(e.minimumBalance)||e.minimumBalance<0)&&(t.minimumBalance="Le solde minimum doit \xeatre un nombre \u2265 0"),(Number.isNaN(e.dailyWithdrawalLimit)||e.dailyWithdrawalLimit<0)&&(t.dailyWithdrawalLimit="La limite journali\xe8re doit \xeatre un nombre \u2265 0"),(Number.isNaN(e.monthlyWithdrawalLimit)||e.monthlyWithdrawalLimit<0)&&(t.monthlyWithdrawalLimit="La limite mensuelle doit \xeatre un nombre \u2265 0"),Object.keys(t).length>0)G(t);else{H(!0);try{await Di.updateCurrentAccount(String(S.id),e),Ts.success("Compte mis \xe0 jour"),F(!1),await q(),null===w||void 0===w||w()}catch(mn){console.error(mn),Ts.error("Erreur lors de la mise \xe0 jour")}finally{H(!1)}}};if(E)return(0,ju.jsx)("div",{className:"flex items-center justify-center p-12",children:(0,ju.jsx)("div",{className:"animate-spin h-8 w-8 border-b-2 border-blue-600 rounded-full"})});if(!S)return null;const K=(e=>{if(!e)return"";const t=String(e).toUpperCase();switch(t){case"ACTIVE":case"ACTIVE ":return"Active";case"INACTIVE":return"Inactive";case"SUSPENDED":case"SUSPENDU":return"Suspended";case"CLOSED":case"FERM\xc9":return"Closed";default:return t.charAt(0)+t.slice(1).toLowerCase()}})(S.status),X=(()=>{if(!T||0===T.length)return null;try{const e=T.reduce((e,t)=>{const r=new Date(e.processedAt||e.transactionDate||e.date||0).getTime();return new Date(t.processedAt||t.transactionDate||t.date||0).getTime()>r?t:e},T[0]);return new Date(e.processedAt||e.transactionDate||e.date||null)}catch(mn){return null}})();return(0,ju.jsxs)(ju.Fragment,{children:[_&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Fermer le compte"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Indiquez la raison de la fermeture :"}),(0,ju.jsx)("textarea",{className:"w-full border rounded p-2",rows:4,value:P,onChange:e=>O(e.target.value)}),(0,ju.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,ju.jsx)("button",{className:"flex-1 px-3 py-2 border rounded",onClick:()=>I(!1),children:"Annuler"}),(0,ju.jsx)("button",{className:"flex-1 px-3 py-2 bg-red-600 text-white rounded",onClick:async()=>{if(P)try{await Di.closeClientAccount(String(S.id),P),Ts.success("Compte ferm\xe9"),I(!1),null===w||void 0===w||w(),j()}catch(mn){console.error(mn),Ts.error("Erreur lors de la fermeture")}else Ts.error("Veuillez indiquer une raison")},children:"Confirmer"})]})]})}),L&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70] p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold",children:"Modifier les param\xe8tres du compte"}),(0,ju.jsx)("button",{onClick:()=>F(!1),className:"p-1 rounded hover:bg-gray-100",children:(0,ju.jsx)(vm,{className:"h-5 w-5"})})]}),(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-xs text-gray-600",children:"Autoriser d\xe9couvert"}),(0,ju.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,ju.jsx)("input",{id:"allowOverdraft",type:"checkbox",checked:!!M.allowOverdraft,onChange:e=>U((0,s.A)((0,s.A)({},M),{},{allowOverdraft:e.target.checked})),className:"h-4 w-4"}),(0,ju.jsx)("label",{htmlFor:"allowOverdraft",className:"text-sm",children:"Autoriser le d\xe9couvert pour ce compte"})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-xs text-gray-600",children:"Limite de d\xe9couvert"}),(0,ju.jsx)("input",{type:"number",min:0,step:"0.01",value:null!==(r=M.overdraftLimit)&&void 0!==r?r:"",onChange:e=>{const t=e.target.value;U((0,s.A)((0,s.A)({},M),{},{overdraftLimit:t}));const r=Number(t);G(e=>{const t=(0,s.A)({},e);return Number.isNaN(r)||r<0?t.overdraftLimit="La limite de d\xe9couvert doit \xeatre un nombre \u2265 0":delete t.overdraftLimit,t})},className:"w-full border rounded px-2 py-2 mt-1",disabled:!M.allowOverdraft}),(0,ju.jsx)("div",{className:"mt-1 text-xs text-gray-500",children:Lw(Number(M.overdraftLimit||0),S.currency)}),z.overdraftLimit&&(0,ju.jsx)("div",{className:"text-red-600 text-xs mt-1",children:z.overdraftLimit})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-xs text-gray-600",children:"Solde minimum"}),(0,ju.jsx)("input",{type:"number",min:0,step:"0.01",value:null!==(n=M.minimumBalance)&&void 0!==n?n:"",onChange:e=>{const t=e.target.value;U((0,s.A)((0,s.A)({},M),{},{minimumBalance:t}));const r=Number(t);G(e=>{const t=(0,s.A)({},e);return Number.isNaN(r)||r<0?t.minimumBalance="Le solde minimum doit \xeatre un nombre \u2265 0":delete t.minimumBalance,t})},className:"w-full border rounded px-2 py-2 mt-1"}),(0,ju.jsx)("div",{className:"mt-1 text-xs text-gray-500",children:Lw(Number(M.minimumBalance||0),S.currency)}),z.minimumBalance&&(0,ju.jsx)("div",{className:"text-red-600 text-xs mt-1",children:z.minimumBalance})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-xs text-gray-600",children:"Limite retrait journali\xe8re"}),(0,ju.jsx)("input",{type:"number",min:0,step:"0.01",value:null!==(a=M.dailyWithdrawalLimit)&&void 0!==a?a:"",onChange:e=>{const t=e.target.value;U((0,s.A)((0,s.A)({},M),{},{dailyWithdrawalLimit:t}));const r=Number(t);G(e=>{const t=(0,s.A)({},e);return Number.isNaN(r)||r<0?t.dailyWithdrawalLimit="La limite journali\xe8re doit \xeatre un nombre \u2265 0":delete t.dailyWithdrawalLimit,t})},className:"w-full border rounded px-2 py-2 mt-1"}),z.dailyWithdrawalLimit&&(0,ju.jsx)("div",{className:"text-red-600 text-xs mt-1",children:z.dailyWithdrawalLimit})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-xs text-gray-600",children:"Limite retrait mensuelle"}),(0,ju.jsx)("input",{type:"number",min:0,step:"0.01",value:null!==(i=M.monthlyWithdrawalLimit)&&void 0!==i?i:"",onChange:e=>{const t=e.target.value;U((0,s.A)((0,s.A)({},M),{},{monthlyWithdrawalLimit:t}));const r=Number(t);G(e=>{const t=(0,s.A)({},e);return Number.isNaN(r)||r<0?t.monthlyWithdrawalLimit="La limite mensuelle doit \xeatre un nombre \u2265 0":delete t.monthlyWithdrawalLimit,t})},className:"w-full border rounded px-2 py-2 mt-1"}),z.monthlyWithdrawalLimit&&(0,ju.jsx)("div",{className:"text-red-600 text-xs mt-1",children:z.monthlyWithdrawalLimit})]})]})]}),(0,ju.jsxs)("div",{className:"mt-6 flex gap-2",children:[(0,ju.jsx)("button",{onClick:()=>F(!1),className:"px-4 py-2 border rounded",disabled:B,children:"Annuler"}),(()=>{const e=Object.keys(z).length>0,t=!V||JSON.stringify(M)!==JSON.stringify(V),r=B||e||!t;return(0,ju.jsxs)("button",{onClick:$,className:"px-4 py-2 bg-blue-600 text-white rounded flex items-center gap-2 ".concat(r?"opacity-60 cursor-not-allowed":""),disabled:r,children:[B?(0,ju.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"}):null,(0,ju.jsx)("span",{children:B?"Enregistrement\u2026":"Enregistrer"})]})})()]})]})}),(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,ju.jsxs)("div",{className:"px-4 py-3 border-b flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-lg font-semibold",children:S.accountNumber}),(0,ju.jsx)("div",{className:"text-sm text-gray-600",children:S.customerName})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("button",{onClick:()=>{var e,t,r,n;const s={overdraftLimit:String(null!==(e=S.overdraftLimit)&&void 0!==e?e:0),minimumBalance:String(null!==(t=S.minimumBalance)&&void 0!==t?t:0),dailyWithdrawalLimit:String(null!==(r=S.dailyWithdrawalLimit)&&void 0!==r?r:0),monthlyWithdrawalLimit:String(null!==(n=S.monthlyWithdrawalLimit)&&void 0!==n?n:0),allowOverdraft:!!S.allowOverdraft};U(s),W(s),F(!0)},className:"px-2 py-1 rounded bg-blue-600 text-white text-sm",children:"Modifier"}),(0,ju.jsx)("button",{onClick:j,className:"p-1 rounded hover:bg-gray-100",children:(0,ju.jsx)(vm,{className:"h-5 w-5"})})]})]}),(0,ju.jsx)("div",{className:"border-b bg-gray-50 px-4",children:(0,ju.jsxs)("div",{className:"flex gap-2",children:[(0,ju.jsx)("button",{onClick:()=>R("info"),className:"py-2 px-3 ".concat("info"===k?"text-blue-600 border-b-2 border-blue-600":"text-gray-600"),children:"Informations"}),(0,ju.jsxs)("button",{onClick:()=>R("transactions"),className:"py-2 px-3 ".concat("transactions"===k?"text-blue-600 border-b-2 border-blue-600":"text-gray-600"),children:["Transactions (",T.length,")"]}),(0,ju.jsx)("button",{onClick:()=>R("history"),className:"py-2 px-3 ".concat("history"===k?"text-blue-600 border-b-2 border-blue-600":"text-gray-600"),children:"Historique"})]})}),(0,ju.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:["info"===k&&(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsx)("h3",{className:"text-sm font-semibold",children:"Informations du compte"}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Type de compte"}),(0,ju.jsx)("div",{className:"text-gray-900",children:S.accountType||S.type||"\u2014"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Devise"}),(0,ju.jsx)("div",{className:"text-gray-900",children:S.currency||"\u2014"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Date d'ouverture"}),(0,ju.jsx)("div",{className:"text-gray-900",children:S.openingDate?new Date(S.openingDate).toLocaleDateString("fr-FR"):"\u2014"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Derni\xe8re transaction"}),(0,ju.jsx)("div",{className:"text-gray-900",children:X?X.toLocaleDateString("fr-FR"):"\u2014"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Solde minimum"}),(0,ju.jsx)("div",{className:"text-gray-900",children:Lw(null!==(l=null!==(o=S.minimumBalance)&&void 0!==o?o:S.minBalance)&&void 0!==l?l:0,S.currency)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Limite de retrait"}),(0,ju.jsx)("div",{className:"text-gray-900",children:Lw(null!==(c=null!==(d=S.withdrawalLimit)&&void 0!==d?d:S.dailyWithdrawalLimit)&&void 0!==c?c:0,S.currency)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Plafond retrait mensuel"}),(0,ju.jsx)("div",{className:"text-gray-900",children:Lw(null!==(u=null!==(m=S.monthlyWithdrawalLimit)&&void 0!==m?m:S.monthlyLimit)&&void 0!==u?u:0,S.currency)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Solde maximum"}),(0,ju.jsx)("div",{className:"text-gray-900",children:Lw(null!==(h=null!==(p=S.maxBalance)&&void 0!==p?p:S.maximumBalance)&&void 0!==h?h:0,S.currency)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Plafond d\xe9p\xf4t quotidien"}),(0,ju.jsx)("div",{className:"text-gray-900",children:Lw(null!==(x=null!==(f=S.dailyDepositLimit)&&void 0!==f?f:S.depositDailyLimit)&&void 0!==x?x:0,S.currency)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Montant max. retrait"}),(0,ju.jsx)("div",{className:"text-gray-900",children:Lw(null!==(g=null!==(v=S.maxWithdrawalAmount)&&void 0!==v?v:S.maximumWithdrawal)&&void 0!==g?g:0,S.currency)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Montant min. retrait"}),(0,ju.jsx)("div",{className:"text-gray-900",children:Lw(null!==(y=null!==(b=S.minWithdrawalAmount)&&void 0!==b?b:S.minimumWithdrawal)&&void 0!==y?y:0,S.currency)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Succursale"}),(0,ju.jsx)("div",{className:"text-gray-900",children:S.branchName||S.branch||"\u2014"})]})]}),(0,ju.jsxs)("div",{className:"pt-4 border-t",children:[(0,ju.jsx)("h4",{className:"text-sm font-semibold",children:"Informations du client"}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Nom complet"}),(0,ju.jsx)("div",{className:"text-gray-900",children:S.customerName||S.fullName||"\u2014"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Code Client"}),(0,ju.jsx)("div",{className:"text-gray-900",children:S.customerCode||S.CustomerCode||S.clientId||S.clientCode||S.customerNumber||"\u2014"})]})]})]})]}),"transactions"===k&&(0,ju.jsx)("div",{className:"space-y-2",children:0===T.length?(0,ju.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Aucune transaction"}):T.map(e=>{var t,r,n,s;const a=String(e.type||e.transactionType||"").toLowerCase().includes("deposit")||e.amount>=0,i=Math.abs(Number(null!==(t=null!==(r=e.amount)&&void 0!==r?r:e.balanceAfter-e.balanceBefore)&&void 0!==t?t:0)),l=e.type||e.transactionType||(e.description?String(e.description).split("\n")[0]:"Transaction"),o=e.subType||e.memo||e.note||e.description&&String(e.description).split("\n")[1]||"",c=e.reference||e.transactionReference||e.id||"",d=e.branchName||e.branch||S.branchName||"",u=e.performedBy||e.processedBy||e.operatorEmail||e.userEmail||"",m=(null!==(n=null!==(s=e.balanceAfter)&&void 0!==s?s:e.balance)&&void 0!==n?n:S.balance)||0;return(0,ju.jsxs)("div",{className:"bg-white border rounded p-3 flex items-start justify-between",children:[(0,ju.jsxs)("div",{className:"flex items-start gap-4",children:[(0,ju.jsx)("div",{className:"p-2 rounded ".concat(a?"bg-green-100":"bg-red-100"),children:a?(0,ju.jsx)(Lu,{className:"h-5 w-5 text-green-600"}):(0,ju.jsx)(Op,{className:"h-5 w-5 text-red-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"font-medium text-sm",children:l}),o&&(0,ju.jsx)("div",{className:"text-xs text-gray-600",children:o}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["R\xe9f: ",(0,ju.jsx)("span",{className:"font-mono",children:c})]}),(0,ju.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:d}),u&&(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:u})]})]}),(0,ju.jsxs)("div",{className:"text-right",children:[(0,ju.jsxs)("div",{className:"font-semibold text-lg ".concat(a?"text-green-600":"text-red-600"),children:[a?"+":"-",Lw(i,e.currency||S.currency)]}),(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:["Solde: ",Lw(m,e.currency||S.currency)]}),(0,ju.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:new Date(e.processedAt||e.transactionDate||e.date||Date.now()).toLocaleString("fr-FR")})]})]},e.id||e.reference)})}),"history"===k&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-sm text-gray-600",children:"Historique simplifi\xe9 \u2014 voir onglet Transactions pour plus de d\xe9tails."}),(0,ju.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,ju.jsxs)("div",{className:"bg-white border rounded p-3 flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"font-medium",children:"Compte cr\xe9\xe9"}),(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:S.openingDate?new Date(S.openingDate).toLocaleString("fr-FR"):"\u2014"})]}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["Succursale: ",S.branchName||"\u2014"]})]}),S.closedDate&&(0,ju.jsxs)("div",{className:"bg-white border rounded p-3",children:[(0,ju.jsx)("div",{className:"font-medium",children:"Compte ferm\xe9"}),(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:new Date(S.closedDate).toLocaleString("fr-FR")})]})]})]})]}),(0,ju.jsx)("div",{className:"border-t p-4 bg-gray-50",children:(0,ju.jsxs)("div",{className:"flex gap-2",children:["Active"===K&&(0,ju.jsxs)("button",{onClick:async()=>{if(null===S||void 0===S||!S.id)return;if(window.confirm("Confirmer la suspension du compte ?"))try{await Di.updateAccountStatus(String(S.id),!1,S.accountNumber||S.accountNumber||void 0),Ts.success("Compte suspendu"),await q(),null===w||void 0===w||w()}catch(mn){console.error(mn),Ts.error("Erreur lors de la suspension")}},className:"px-3 py-2 bg-yellow-600 text-white rounded flex items-center gap-2",children:[(0,ju.jsx)(hi,{className:"h-4 w-4"}),"Suspendre"]}),"Suspended"===K&&(0,ju.jsxs)("button",{onClick:async()=>{if(null!==S&&void 0!==S&&S.id)try{await Di.updateAccountStatus(String(S.id),!0,S.accountNumber||S.accountNumber||void 0),Ts.success("Compte r\xe9activ\xe9"),await q(),null===w||void 0===w||w()}catch(mn){console.error(mn),Ts.error("Erreur lors de la r\xe9activation")}},className:"px-3 py-2 bg-green-600 text-white rounded flex items-center gap-2",children:[(0,ju.jsx)(Iw,{className:"h-4 w-4"}),"R\xe9activer"]}),("Active"===K||"Inactive"===K)&&(0,ju.jsxs)("button",{onClick:()=>{I(!0),O("")},className:"px-3 py-2 bg-red-600 text-white rounded flex items-center gap-2",children:[(0,ju.jsx)(vm,{className:"h-4 w-4"}),"Fermer"]}),(0,ju.jsxs)("button",{onClick:()=>{try{const e=window.open("","_blank");if(!e)return void Ts.error("Veuillez autoriser les pop-ups pour exporter le relev\xe9");const t=T.map(e=>{var t;return'\n        <tr>\n          <td style="padding:8px;border:1px solid #ddd">'.concat(e.reference||e.id||"",'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(new Date(e.transactionDate||e.processedAt||Date.now()).toLocaleString("fr-FR"),'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.transactionType||e.type||"",'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.performedBy||e.processedBy||"",'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.amount||0===e.amount?Lw(Math.abs(Number(e.amount||0)),e.currency||S.currency):"",'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(Lw((null!==(t=e.balanceAfter)&&void 0!==t?t:e.balance)||0,e.currency||S.currency),"</td>\n        </tr>\n      ")}).join(""),r='\n        <html><head><meta charset="utf-8"><title>Relev\xe9 '.concat(S.accountNumber,"</title>\n        <style>table{border-collapse:collapse;width:100%;font-family:Arial,Helvetica,sans-serif}th,td{border:1px solid #ddd;padding:8px}th{background:#f3f4f6;text-align:left}</style>\n        </head><body>\n        <h2>Relev\xe9 du compte ").concat(S.accountNumber,"</h2>\n        <p>Client: ").concat(S.customerName||"\u2014","</p>\n        <p>G\xe9n\xe9r\xe9 le ").concat((new Date).toLocaleString("fr-FR"),"</p>\n        <table>\n          <thead><tr><th>R\xe9f</th><th>Date</th><th>Type</th><th>Op\xe9rateur</th><th>Montant</th><th>Solde</th></tr></thead>\n          <tbody>").concat(t,"</tbody>\n        </table>\n        <script>window.onload = ()=>{ setTimeout(()=>{ window.print(); },300); };<\/script>\n        </body></html>\n      ");e.document.write(r),e.document.close(),Ts.success("Fen\xeatre d'export ouverte - utilisez Imprimer pour sauver en PDF")}catch(mn){console.error(mn),Ts.error("Erreur lors de la g\xe9n\xe9ration du relev\xe9")}},className:"px-3 py-2 bg-gray-700 text-white rounded flex items-center gap-2",children:[(0,ju.jsx)(Hu,{className:"h-4 w-4"}),"Relev\xe9"]}),(0,ju.jsxs)("div",{className:"ml-auto text-sm text-gray-600 flex items-center gap-2",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"}),S.accountNumber]})]})})]})})]})},Gw=mi("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),Vw=()=>{const[t,r]=(0,e.useState)(!1),[n,a]=(0,e.useState)("summary"),[i,l]=(0,e.useState)("month"),[o,c]=(0,e.useState)({}),[d,u]=(0,e.useState)({startDate:"",endDate:""}),[m,h]=(0,e.useState)({currency:"",branchId:"",status:"",accountNumber:"",txType:""}),[p,x]=(0,e.useState)([]),[f,g]=(0,e.useState)(1e3);(0,e.useEffect)(()=>{(async()=>{try{const e=(await Di.getAllBranches()||[]).map(e=>{var t,r,n,s,a,i,l,o;return{id:Number(null!==(t=null!==(r=e.id)&&void 0!==r?r:e.branchId)&&void 0!==t?t:e.BranchId),name:String(null!==(n=null!==(s=null!==(a=null!==(i=e.name)&&void 0!==i?i:e.branchName)&&void 0!==a?a:e.BranchName)&&void 0!==s?s:e.code)&&void 0!==n?n:"#".concat(null!==(l=null!==(o=e.id)&&void 0!==o?o:e.branchId)&&void 0!==l?l:e.BranchId))}}).filter(e=>!Number.isNaN(e.id));x(e)}catch(e){}})(),v()},[]),(0,e.useEffect)(()=>{v()},[n,i,JSON.stringify(m),d.startDate,d.endDate]);const v=async()=>{r(!0);try{let e,t;if("custom"===i&&d.startDate&&d.endDate)e=d.startDate,t=d.endDate;else if("all"!==i){const r=new Date,n=new Date;switch(i){case"day":n.setDate(n.getDate()-1);break;case"week":n.setDate(n.getDate()-7);break;case"month":n.setMonth(n.getMonth()-1);break;case"quarter":n.setMonth(n.getMonth()-3);break;case"year":n.setFullYear(n.getFullYear()-1)}e=n.toISOString().split("T")[0],t=r.toISOString().split("T")[0]}else{const r=new Date;e=new Date(2e3,0,1).toISOString().split("T")[0],t=r.toISOString().split("T")[0]}if("summary"===n){const e=await Di.getClientAccounts({accountType:vi.CURRENT,branchId:m.branchId||void 0,currency:m.currency||void 0});let t=[];if(m.accountNumber&&String(m.accountNumber).trim())try{t=await Di.getAccountTransactions(String(m.accountNumber).trim())}catch(mn){t=[]}else{const r=(e||[]).slice(0,20),n=await Promise.all(r.map(e=>Di.getAccountTransactions(e.accountNumber||e.AccountNumber||"")));t=[].concat(...n)}const r=Array.isArray(e)?e:[],n=r.filter(e=>"ACTIVE"===(e.status||e.Status||"").toString().toUpperCase()),s=r.reduce((e,t)=>e+Number(t.balance||0),0),a=t.filter(e=>String(e.transactionType||e.type||"").toLowerCase().includes("deposit")||"0"===String(e.type)),i=t.filter(e=>String(e.transactionType||e.type||"").toLowerCase().includes("withdraw")||"1"===String(e.type));c({totalAccounts:r.length,activeAccounts:n.length,totalBalance:s,totalDeposits:a.reduce((e,t)=>e+Number(t.amount||t.Amount||0),0),totalWithdrawals:i.reduce((e,t)=>e+Number(t.amount||t.Amount||0),0),avgBalance:s/(r.length||1),accounts:r,transactions:t})}else if("accounts"===n){const e=await Di.getClientAccounts({accountType:vi.CURRENT,branchId:m.branchId||void 0}),t=[{name:"Actif",value:e.filter(e=>"ACTIVE"===(e.status||"").toString().toUpperCase()).length},{name:"Inactif",value:e.filter(e=>"INACTIVE"===(e.status||"").toString().toUpperCase()).length},{name:"Ferm\xe9",value:e.filter(e=>"CLOSED"===(e.status||"").toString().toUpperCase()).length},{name:"Suspendu",value:e.filter(e=>"SUSPENDED"===(e.status||"").toString().toUpperCase()).length}];c({accountsByStatus:t,accounts:e})}else if("transactions"===n){let e=[];if(m.accountNumber&&String(m.accountNumber).trim())e=await Di.getAccountTransactions(String(m.accountNumber).trim());else{const t=(await Di.getClientAccounts({accountType:vi.CURRENT,page:1,pageSize:50})||[]).slice(0,30),r=await Promise.all(t.map(e=>Di.getAccountTransactions(e.accountNumber||e.AccountNumber||"")));e=[].concat(...r)}if(""!==m.txType){const t=Number(m.txType);e=e.filter(e=>{const r=String(e.transactionType||e.type||"").toLowerCase();return 0===t?r.includes("deposit")||"0"===r:1!==t||(r.includes("withdraw")||"1"===r)})}const t=[{name:"D\xe9p\xf4ts",value:e.filter(e=>(e.transactionType||e.type||"").toString().toLowerCase().includes("deposit")||"Deposit"===e.type).length},{name:"Retraits",value:e.filter(e=>(e.transactionType||e.type||"").toString().toLowerCase().includes("withdraw")||"Withdrawal"===e.type).length}];c({transactionsByType:t,transactions:e})}}catch(Sc){var e,t;const n=(null===Sc||void 0===Sc||null===(e=Sc.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||(null===Sc||void 0===Sc?void 0:Sc.message)||"";console.error("Error loading current account report data:",n||Sc),Ts.error("Erreur lors du chargement du rapport".concat(n?": ".concat(n):""))}finally{r(!1)}},y=e=>{const t=b(e);return"ACTIVE"===t?"bg-green-100 text-green-800":"INACTIVE"===t?"bg-gray-100 text-gray-700":"CLOSED"===t?"bg-red-100 text-red-700":"SUSPENDED"===t?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-700"},b=e=>{if("number"===typeof e){return{0:"ACTIVE",1:"INACTIVE",2:"CLOSED",3:"SUSPENDED"}[e]||"INACTIVE"}return String(e||"").trim().toUpperCase()||"INACTIVE"},N=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR")};return(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsx)("div",{className:"flex justify-between items-start",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Rapports et Statistiques - Comptes Courants"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"Analyses d\xe9taill\xe9es des comptes courants"})]})}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de rapport"}),(0,ju.jsxs)("select",{value:n,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"summary",children:"R\xe9sum\xe9 g\xe9n\xe9ral"}),(0,ju.jsx)("option",{value:"accounts",children:"Rapport des comptes"}),(0,ju.jsx)("option",{value:"transactions",children:"Rapport des transactions"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"P\xe9riode"}),(0,ju.jsxs)("select",{value:i,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"day",children:"Aujourd hui"}),(0,ju.jsx)("option",{value:"week",children:"7 derniers jours"}),(0,ju.jsx)("option",{value:"month",children:"30 derniers jours"}),(0,ju.jsx)("option",{value:"quarter",children:"3 derniers mois"}),(0,ju.jsx)("option",{value:"year",children:"Derni\xe8re ann\xe9e"}),(0,ju.jsx)("option",{value:"all",children:"Toute la p\xe9riode"}),(0,ju.jsx)("option",{value:"custom",children:"Personnalis\xe9e"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Devise"}),(0,ju.jsxs)("select",{value:m.currency,onChange:e=>h((0,s.A)((0,s.A)({},m),{},{currency:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"Toutes"}),(0,ju.jsx)("option",{value:"0",children:"HTG"}),(0,ju.jsx)("option",{value:"1",children:"USD"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N\xb0 de compte"}),(0,ju.jsx)("input",{type:"text",value:m.accountNumber,onChange:e=>h((0,s.A)((0,s.A)({},m),{},{accountNumber:e.target.value})),placeholder:"Ex: CC-001234",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Succursale"}),(0,ju.jsxs)("select",{value:m.branchId,onChange:e=>h((0,s.A)((0,s.A)({},m),{},{branchId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"Toutes"}),p.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),"transactions"===n&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de transaction"}),(0,ju.jsxs)("select",{value:m.txType,onChange:e=>h((0,s.A)((0,s.A)({},m),{},{txType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"Tous"}),(0,ju.jsx)("option",{value:"0",children:"D\xe9p\xf4t"}),(0,ju.jsx)("option",{value:"1",children:"Retrait"})]})]}),(0,ju.jsx)("div",{className:"flex items-end",children:(0,ju.jsxs)("button",{onClick:v,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,ju.jsx)(Eu,{className:"h-4 w-4 ".concat(t?"animate-spin":"")}),"Actualiser"]})})]}),"custom"===i&&(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 pt-4 border-t border-gray-200",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de d\xe9but"}),(0,ju.jsx)("input",{type:"date",value:d.startDate,onChange:e=>u((0,s.A)((0,s.A)({},d),{},{startDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de fin"}),(0,ju.jsx)("input",{type:"date",value:d.endDate,onChange:e=>u((0,s.A)((0,s.A)({},d),{},{endDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),t?(0,ju.jsx)("div",{className:"bg-white p-12 rounded-xl shadow-sm border border-gray-200 flex items-center justify-center",children:(0,ju.jsx)(Eu,{className:"h-8 w-8 text-blue-600 animate-spin"})}):(0,ju.jsxs)(ju.Fragment,{children:["summary"===n&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,ju.jsxs)("div",{className:"flex items-center gap-2 text-blue-800",children:[(0,ju.jsx)(pm,{className:"h-5 w-5"}),(0,ju.jsxs)("span",{className:"font-medium",children:["P\xe9riode: ",(()=>{switch(i){case"day":return"Aujourd hui";case"week":return"7 derniers jours";case"month":return"30 derniers jours";case"quarter":return"3 derniers mois";case"year":return"Derni\xe8re ann\xe9e";case"all":return"Toute la p\xe9riode";case"custom":return"P\xe9riode personnalis\xe9e";default:return""}})()]})]})}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,ju.jsx)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Total des comptes"}),(0,ju.jsx)("p",{className:"text-3xl font-bold mt-1",children:o.totalAccounts||0}),(0,ju.jsxs)("p",{className:"text-xs mt-2 opacity-75",children:[o.activeAccounts||0," actifs"]})]}),(0,ju.jsx)(Ru,{className:"h-12 w-12 opacity-80"})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Solde total"}),(0,ju.jsx)("p",{className:"text-2xl font-bold mt-1",children:new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o.totalBalance||0)}),(0,ju.jsxs)("p",{className:"text-xs mt-2 opacity-75",children:["Moy: ",new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o.avgBalance||0)]})]}),(0,ju.jsx)(Du,{className:"h-12 w-12 opacity-80"})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Activit\xe9 ce mois"}),(0,ju.jsx)("p",{className:"text-3xl font-bold mt-1",children:(o.totalDeposits||0)+(o.totalWithdrawals||0)>0?"Actif":"Faible"}),(0,ju.jsxs)("p",{className:"text-xs mt-2 opacity-75",children:[(o.totalDeposits||0)+(o.totalWithdrawals||0)," transactions"]})]}),(0,ju.jsx)(ku,{className:"h-12 w-12 opacity-80"})]})})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,ju.jsx)(Lu,{className:"h-6 w-6 text-green-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Total d\xe9p\xf4ts"}),(0,ju.jsx)("p",{className:"text-xl font-bold text-gray-900",children:new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o.totalDeposits||0)})]})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsx)("div",{className:"p-3 bg-red-100 rounded-lg",children:(0,ju.jsx)(Op,{className:"h-6 w-6 text-red-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Total retraits"}),(0,ju.jsx)("p",{className:"text-xl font-bold text-gray-900",children:new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o.totalWithdrawals||0)})]})]})})]})]}),"accounts"===n&&o.accountsByStatus&&(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,ju.jsx)(Gw,{className:"h-5 w-5 text-blue-600"}),"Comptes par statut"]}),(0,ju.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.accountsByStatus.map(e=>(0,ju.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:e.value}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.name})]},e.name))})]}),"accounts"===n&&Array.isArray(o.accounts)&&(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 overflow-x-auto",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Liste des comptes"}),(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Compte"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Devise"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Solde"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Solde dispo"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Succursale"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Ouverture"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.accounts.slice(0,f).map(e=>(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 font-mono",children:e.accountNumber}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 text-blue-700 text-xs font-bold",children:(e.customerName||e.customerCode||"?").toString().slice(0,2).toUpperCase()}),(0,ju.jsx)("span",{children:e.customerName||e.customerCode||e.customerId})]})}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.currency}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:Number(e.balance||0).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:Number(e.availableBalance||e.balance||0).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm",children:(0,ju.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(y(e.status)),children:b(e.status)})}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.branchName||""}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:N(e.openedDate||e.openingDate||e.createdAt)})]},e.id||e.accountNumber))})]}),Array.isArray(o.accounts)&&o.accounts.length>f&&(0,ju.jsx)("div",{className:"mt-4 flex justify-center",children:(0,ju.jsx)("button",{onClick:()=>g(e=>e+1e3),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Afficher plus"})})]}),"transactions"===n&&o.transactionsByType&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,ju.jsx)(Xu,{className:"h-5 w-5 text-blue-600"}),"Transactions par type"]}),(0,ju.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.transactionsByType.map(e=>(0,ju.jsxs)("div",{className:"text-center p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-4xl font-bold text-blue-900",children:e.value}),(0,ju.jsx)("p",{className:"text-sm text-blue-700 mt-2 font-medium",children:e.name})]},e.name))})]}),Array.isArray(o.transactions)&&(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 overflow-x-auto",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aper\xe7u d\xe9taill\xe9"}),(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date/Heure"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"R\xe9f\xe9rence"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Compte"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Montant"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Devise"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Succursale"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Par"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.transactions.map(e=>(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:new Date(e.processedAt||e.transactionDate).toLocaleString("fr-FR")}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700 font-mono",children:e.reference}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.accountNumber}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.transactionType||e.type}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:Number(e.amount||0).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.currency||e.Currency||"HTG"}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.branchName||e.BranchName||(e.branchId?"#".concat(e.branchId):"")}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.processedByName||e.processedBy||""}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.status})]},e.id||"".concat(e.reference,"-").concat(e.accountNumber,"-").concat(e.processedAt)))})]})]})]})]})]})};const Ww={loadCustomersHavingAccounts:async function(e){let t=[];if("SAVINGS"===e)try{t=await Di.getSavingsAccounts({})}catch(mn){console.error("Failed to fetch savings accounts:",mn),t=[]}else if("TERM_SAVINGS"===e)try{t=await Di.getClientAccounts({accountType:vi.TERM_SAVINGS}),console.log("\ud83d\udd0d Raw term savings accounts fetched:",t.length,t),t.length>0&&console.log("\ud83d\udd0e First account details:",{id:t[0].id,accountNumber:t[0].accountNumber,customerId:t[0].customerId,customerName:t[0].customerName,customerPhone:t[0].customerPhone,allKeys:Object.keys(t[0])})}catch(mn){console.error("Failed to fetch term savings accounts:",mn),t=[]}else try{t=await Di.getClientAccounts({accountType:vi.CURRENT}),console.log("\ud83d\udd0d Raw current accounts fetched:",t.length,t)}catch(mn){console.error("Failed to fetch current accounts:",mn),t=[]}const r=Array.from(new Set((t||[]).map(e=>e.customerId).filter(e=>void 0!==e&&null!==e&&""!==String(e).trim()&&"undefined"!==String(e).toLowerCase()).map(e=>String(e)))),n=Array.from(new Set((t||[]).filter(e=>!e.customerId||"undefined"===String(e.customerId).toLowerCase()).map(e=>e.customerPhone).filter(e=>!!e).map(e=>String(e))));console.log("\ud83d\udcca Collected from accounts:",{totalAccounts:t.length,validIds:r.length,phones:n.length}),console.log("\ud83c\udd94 Valid IDs:",r),console.log("\ud83d\udcde Phones:",n);const s=[];for(const m of r)try{const e=await Fm.getCustomer(m);e&&s.push(e)}catch(l){console.warn("Customer fetch by id failed, attempting fallback for id=",m,l);const e=(t||[]).find(e=>String(e.customerId)===m);if(null!==e&&void 0!==e&&e.customerPhone)try{const t=await Fm.getCustomerByPhone(String(e.customerPhone));if(t){s.push(t);continue}}catch(o){}e&&s.push({id:m,customerCode:e.customerCode||e.CustomerCode,firstName:(e.customerName||"").split(" ")[0]||"",lastName:(e.customerName||"").split(" ").slice(1).join(" ")||"",fullName:e.customerName||"Nom inconnu",dateOfBirth:"",gender:0,address:{street:"",commune:"",department:"",country:"Ha\xefti"},contact:{primaryPhone:e.customerPhone||"",secondaryPhone:"",email:""},identity:{documentType:0,documentNumber:"",issuedDate:"",issuingAuthority:""},occupation:"",monthlyIncome:0,signature:void 0,documents:void 0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),isActive:!1})}for(const m of n)try{const e=await Fm.getCustomerByPhone(m);if(e&&!s.find(t=>String(t.id)===String(e.id))&&s.push(e),!e){const e=(t||[]).find(e=>String(e.customerPhone)===m);e&&(console.warn("\u26a0\ufe0f Creating fallback customer for phone ".concat(m," - no SavingsCustomer record found")),s.push({id:e.id||"fallback-".concat(m),customerCode:e.customerCode||"",firstName:(e.customerName||"").split(" ")[0]||"",lastName:(e.customerName||"").split(" ").slice(1).join(" ")||"",fullName:e.customerName||"Client sans profil",dateOfBirth:"",gender:0,address:{street:"",commune:"",department:"",country:"Ha\xefti"},contact:{primaryPhone:m,secondaryPhone:"",email:""},identity:{documentType:0,documentNumber:"",issuedDate:"",issuingAuthority:""},occupation:"",monthlyIncome:0,signature:void 0,documents:void 0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),isActive:!1,_isFallback:!0}))}}catch(l){console.warn("Customer fetch by phone failed for",m,l);const e=(t||[]).find(e=>String(e.customerPhone)===m);e&&(console.warn("\u26a0\ufe0f Creating fallback customer for phone ".concat(m," after error")),s.push({id:e.id||"fallback-".concat(m),customerCode:e.customerCode||"",firstName:(e.customerName||"").split(" ")[0]||"",lastName:(e.customerName||"").split(" ").slice(1).join(" ")||"",fullName:e.customerName||"Client sans profil",dateOfBirth:"",gender:0,address:{street:"",commune:"",department:"",country:"Ha\xefti"},contact:{primaryPhone:m,secondaryPhone:"",email:""},identity:{documentType:0,documentNumber:"",issuedDate:"",issuingAuthority:""},occupation:"",monthlyIncome:0,signature:void 0,documents:void 0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),isActive:!1,_isFallback:!0}))}const a=new Set,i=[];for(const m of s){const e=String(m.id);a.has(e)||(a.add(e),i.push(m))}try{for(const e of t||[])try{const t=null!=e.customerId?String(e.customerId):void 0,r=e.customerPhone?String(e.customerPhone).replace(/\D+/g,""):void 0,n=e.branchName||e.branch||e.BranchName||"",s=e.branchId||e.BranchId||void 0;let a=null;if(t&&(a=i.find(e=>String(e.id)===t)),!a&&r&&(a=i.find(e=>{var t;const n=String((null===(t=e.contact)||void 0===t?void 0:t.primaryPhone)||e.primaryPhone||"").replace(/\D+/g,"");return n&&n===r})),a){try{a.accountBranchName||(a.accountBranchName=n||"")}catch(c){}try{a.accountBranchId||(a.accountBranchId=s)}catch(d){}}}catch(u){}}catch(mn){}return console.log("\u2705 Final deduped customers:",i.length,i),i}},qw=t=>{var r,n,s,a,i,l,o,c;let{showTabs:d=!0}=t;const[u,m]=dn(),[h,p]=(0,e.useState)([]),[x,f]=(0,e.useState)(!0),[g,v]=(0,e.useState)(""),[y,b]=(0,e.useState)("ALL"),[N,j]=(0,e.useState)(""),[w,S]=(0,e.useState)(""),[A,T]=(0,e.useState)(!1),[C,E]=(0,e.useState)(!1),[D,k]=(0,e.useState)(null),[R,_]=(0,e.useState)(!1),[I,P]=(0,e.useState)("overview"),[O,L]=(0,e.useState)(null),[F,M]=(0,e.useState)({totalAccounts:0,activeAccounts:0,totalBalanceHTG:0,totalBalanceUSD:0,accountsWithOverdraft:0,totalOverdraftUsed:0,accountsByCurrency:{HTG:0,USD:0},recentTransactions:0}),[U,B]=(0,e.useState)({depositsHTG:0,depositsUSD:0,withdrawalsHTG:0,withdrawalsUSD:0});(0,e.useEffect)(()=>{const e=u.get("accSearch")||"",t=(u.get("accCurrency")||"").toUpperCase(),r=(u.get("accStatus")||"").toUpperCase(),n=(u.get("tab")||"").toLowerCase();e&&v(e),"HTG"!==t&&"USD"!==t&&"ALL"!==t||b(t),["ACTIVE","INACTIVE","SUSPENDED","CLOSED"].includes(r)&&j(r),"clients"!==n&&"accounts"!==n&&"overview"!==n&&"transactions"!==n&&"rapports"!==n||P(n)},[]),(0,e.useEffect)(()=>{const e=new URLSearchParams(u);e.set("accSearch",g||""),e.set("accCurrency",y),e.set("accStatus",N||""),e.set("accBranch",w||""),m(e,{replace:!0}),$()},[y,N,g,w]),(0,e.useEffect)(()=>{const e=new URLSearchParams(u);e.set("tab",I),m(e,{replace:!0})},[I]),(0,e.useEffect)(()=>{B({depositsHTG:0,depositsUSD:0,withdrawalsHTG:0,withdrawalsUSD:0})},[]);const[H,z]=(0,e.useState)([]),[G,V]=(0,e.useState)(1),[W,q]=(0,e.useState)(10);(0,e.useEffect)(()=>{let e=!0;return(async()=>{try{const t=(await Di.getAllBranches()||[]).map(e=>({id:e.id||e.Id,name:e.name||e.Name}));e&&z(t)}catch(mn){}})(),()=>{e=!1}},[]);const $=async()=>{try{f(!0);const e={accountType:"CURRENT"};"ALL"!==y&&(e.currency=y),N&&(e.status=N),w&&(e.branchId=w),g&&(e.customerName=g);const t=(await Di.getClientAccounts(e)||[]).map(e=>{var t,r,n,s,a,i;return{id:e.id,accountNumber:e.accountNumber,customerId:(null===(t=e.customerId)||void 0===t||null===(r=t.toString)||void 0===r?void 0:r.call(t))||"",customerName:e.customerName,customerPhone:e.customerPhone,branchId:(null===(n=e.branchId)||void 0===n||null===(s=n.toString)||void 0===s?void 0:s.call(n))||"",currency:e.currency,balance:e.balance,minimumBalance:e.minimumBalance,dailyWithdrawalLimit:e.dailyWithdrawalLimit,monthlyWithdrawalLimit:e.monthlyWithdrawalLimit,overdraftLimit:e.overdraftLimit,currentOverdraft:null!==(a=e.currentOverdraft)&&void 0!==a?a:0,allowOverdraft:null!==(i=e.allowOverdraft)&&void 0!==i?i:e.overdraftLimit>0,status:e.status,openDate:e.openingDate,lastTransactionDate:e.lastTransactionDate}});p(t),await K(t)}catch(Sc){console.error("Erreur lors du chargement des comptes:",Sc),Ts.error("Erreur lors du chargement des comptes courants")}finally{f(!1)}},K=async e=>{try{const t=e||h,r=t.length,n=t.filter(e=>"ACTIVE"===e.status).length,s=t.filter(e=>"HTG"===e.currency).reduce((e,t)=>e+t.balance,0),a=t.filter(e=>"USD"===e.currency).reduce((e,t)=>e+t.balance,0),i=t.filter(e=>{var t;return(null!==(t=e.overdraftLimit)&&void 0!==t?t:0)>0}).length,l=t.reduce((e,t)=>{var r;return e+(null!==(r=t.currentOverdraft)&&void 0!==r?r:0)},0),o={HTG:t.filter(e=>"HTG"===e.currency).length,USD:t.filter(e=>"USD"===e.currency).length};M({totalAccounts:r,activeAccounts:n,totalBalanceHTG:s,totalBalanceUSD:a,accountsWithOverdraft:i,totalOverdraftUsed:l,accountsByCurrency:o,recentTransactions:0})}catch(Sc){console.error("Erreur lors du calcul des statistiques:",Sc)}},X=h.filter(e=>{const t=e.accountNumber.toLowerCase().includes(g.toLowerCase())||e.customerName.toLowerCase().includes(g.toLowerCase())||e.customerPhone.includes(g),r="ALL"===y||e.currency===y,n=!N||e.status===N,s=!w||String(e.branchId)===String(w);return t&&r&&n&&s}),Y=X.length,J=Math.max(1,Math.ceil(Y/W)),Z=X.slice((G-1)*W,G*W);(0,e.useEffect)(()=>{V(1)},[g,y,N,w]);const Q=(e,t)=>"HTG"===t?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" HTG":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(e),ee=e=>{const t={ACTIVE:{bg:"bg-green-100",text:"text-green-800",label:"Actif"},INACTIVE:{bg:"bg-red-100",text:"text-red-800",label:"Inactif"},CLOSED:{bg:"bg-gray-100",text:"text-gray-800",label:"Ferm\xe9"},SUSPENDED:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Suspendu"}},r=t[e]||t.ACTIVE;return(0,ju.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(r.bg," ").concat(r.text),children:r.label})};return x?(0,ju.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ju.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,ju.jsxs)("div",{className:"space-y-6",children:[d&&(0,ju.jsx)("div",{className:"flex gap-2 border-b",children:[{k:"overview",label:"Vue d'ensemble"},{k:"clients",label:"Clients"},{k:"accounts",label:"Comptes"},{k:"transactions",label:"Transactions"},{k:"rapports",label:"Rapports"}].map(e=>(0,ju.jsx)("button",{onClick:()=>P(e.k),className:"px-4 py-2 -mb-px border-b-2 ".concat(I===e.k?"border-blue-600 text-blue-700":"border-transparent text-gray-600 hover:text-gray-800"),children:e.label},e.k))}),"overview"===I&&d&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Vue d'ensemble - Comptes Courants"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"R\xe9sum\xe9 des comptes courants, par devise et actions rapides"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Comptes Courants HTG"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:null!==(r=null===(n=F.accountsByCurrency)||void 0===n?void 0:n.HTG)&&void 0!==r?r:0})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(dm,{className:"h-6 w-6 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Comptes Courants USD"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:null!==(s=null===(a=F.accountsByCurrency)||void 0===a?void 0:a.USD)&&void 0!==s?s:0})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(dm,{className:"h-6 w-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Solde Total HTG"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:2}).format(F.totalBalanceHTG)," HTG"]})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(Du,{className:"h-6 w-6 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Solde Total USD"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:2}).format(F.totalBalanceUSD)," USD"]})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(Du,{className:"h-6 w-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Comptes"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:F.totalAccounts})]}),(0,ju.jsx)("div",{className:"p-3 bg-purple-100 rounded-full",children:(0,ju.jsx)(Tu,{className:"h-6 w-6 text-purple-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"HTG Dominance"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-blue-700",children:[(()=>{const e=(F.totalBalanceHTG||0)+(F.totalBalanceUSD||0);return(e>0?F.totalBalanceHTG/e*100:0).toFixed(1)})(),"%"]})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-50 rounded-full",children:(0,ju.jsx)(ku,{className:"h-6 w-6 text-blue-600"})})]})})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,ju.jsx)(Du,{className:"h-5 w-5 mr-2 text-blue-600"}),"R\xe9partition par Devise"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ju.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-lg",children:"HTG"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Gourde Ha\xeftienne"}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:[null!==(i=null===(l=F.accountsByCurrency)||void 0===l?void 0:l.HTG)&&void 0!==i?i:0," comptes"]})]})]}),(0,ju.jsx)("div",{className:"text-right",children:(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[(()=>{const e=(F.totalBalanceHTG||0)+(F.totalBalanceUSD||0);return(e>0?F.totalBalanceHTG/e*100:0).toFixed(1)})(),"%"]})})]}),(0,ju.jsx)("div",{className:"relative w-full h-3 bg-gray-200 rounded-full overflow-hidden mb-2",children:(0,ju.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-500",style:{width:"".concat((()=>{const e=(F.totalBalanceHTG||0)+(F.totalBalanceUSD||0);return e>0?F.totalBalanceHTG/e*100:0})(),"%")}})}),(0,ju.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Solde total"}),(0,ju.jsxs)("span",{className:"font-bold text-blue-600",children:[new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:2}).format(F.totalBalanceHTG)," HTG"]})]})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ju.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-lg",children:"USD"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Dollar Am\xe9ricain"}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:[null!==(o=null===(c=F.accountsByCurrency)||void 0===c?void 0:c.USD)&&void 0!==o?o:0," comptes"]})]})]}),(0,ju.jsx)("div",{className:"text-right",children:(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[(()=>{const e=(F.totalBalanceHTG||0)+(F.totalBalanceUSD||0);return(e>0?F.totalBalanceUSD/e*100:0).toFixed(1)})(),"%"]})})]}),(0,ju.jsx)("div",{className:"relative w-full h-3 bg-gray-200 rounded-full overflow-hidden mb-2",children:(0,ju.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-green-500 to-green-600 rounded-full transition-all duration-500",style:{width:"".concat((()=>{const e=(F.totalBalanceHTG||0)+(F.totalBalanceUSD||0);return e>0?F.totalBalanceUSD/e*100:0})(),"%")}})}),(0,ju.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Solde total"}),(0,ju.jsxs)("span",{className:"font-bold text-green-600",children:[new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:2}).format(F.totalBalanceUSD)," USD"]})]})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actions Rapides"}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,ju.jsxs)("button",{onClick:()=>P("clients"),className:"flex flex-col items-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors",children:[(0,ju.jsx)(Ru,{className:"h-8 w-8 text-blue-600 mb-2"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Rechercher Client"})]}),(0,ju.jsxs)("button",{onClick:()=>P("accounts"),className:"flex flex-col items-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-400 hover:bg-green-50 transition-colors",children:[(0,ju.jsx)(Au,{className:"h-8 w-8 text-green-600 mb-2"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Ouvrir Compte"})]}),(0,ju.jsxs)("button",{onClick:()=>{const e=new URLSearchParams(u);e.set("tab","transactions"),m(e,{replace:!0})},className:"flex flex-col items-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-400 hover:bg-purple-50 transition-colors",children:[(0,ju.jsx)(ku,{className:"h-8 w-8 text-purple-600 mb-2"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Transactions"})]}),(0,ju.jsxs)("button",{onClick:()=>P("accounts"),className:"flex flex-col items-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-indigo-400 hover:bg-indigo-50 transition-colors",children:[(0,ju.jsx)(Tu,{className:"h-8 w-8 text-indigo-600 mb-2"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"G\xe9rer Comptes"})]})]})]})]}),"accounts"===I&&(0,ju.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Comptes Courants"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"Gestion des comptes courants avec d\xe9couvert autoris\xe9"})]}),(0,ju.jsxs)("div",{className:"mt-4 sm:mt-0 flex items-center gap-3",children:[(0,ju.jsxs)("button",{onClick:()=>T(!0),className:"bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,ju.jsx)(Au,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Nouveau Compte Courant"})]}),(0,ju.jsxs)("button",{onClick:()=>E(!0),className:"bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,ju.jsx)(mm,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Nouveau Client + Compte"})]})]})]}),"accounts"===I&&(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Comptes"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:F.totalAccounts}),(0,ju.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:[F.activeAccounts," actifs"]})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(Tu,{className:"h-6 w-6 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Solde Total HTG"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-green-600",children:Q(F.totalBalanceHTG,"HTG")})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(Du,{className:"h-6 w-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Solde Total USD"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:Q(F.totalBalanceUSD,"USD")})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(Du,{className:"h-6 w-6 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"D\xe9couverts Utilis\xe9s"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:F.accountsWithOverdraft}),(0,ju.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:Q(F.totalOverdraftUsed,"USD")})]}),(0,ju.jsx)("div",{className:"p-3 bg-orange-100 rounded-full",children:(0,ju.jsx)(cm,{className:"h-6 w-6 text-orange-600"})})]})})]}),"accounts"===I&&(0,ju.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ju.jsxs)("div",{className:"relative flex-1",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",{type:"text",placeholder:"Rechercher par num\xe9ro de compte, nom client, t\xe9l\xe9phone...",value:g,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ju.jsx)("div",{className:"flex items-center gap-2",children:X.length>0&&(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("button",{onClick:()=>(()=>{try{const e=window.open("","_blank");if(!e)return void Ts.error("Veuillez autoriser les pop-ups pour exporter en PDF");const t=X.map(e=>{var t;return'\n        <tr>\n          <td style="padding:8px;border:1px solid #ddd">'.concat(e.accountNumber,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.customerName,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat((null===(t=H.find(t=>String(t.id)===String(e.branchId)))||void 0===t?void 0:t.name)||"",'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.currency,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.balance,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.status,"</td>\n        </tr>\n      ")}).join(""),r='\n        <html><head><meta charset="utf-8"><title>Comptes Courants</title>\n        <style>table{border-collapse:collapse;width:100%;font-family:Arial,Helvetica,sans-serif}th,td{border:1px solid #ddd;padding:8px}th{background:#f3f4f6;text-align:left}</style>\n        </head><body>\n        <h2>Liste Comptes Courants</h2>\n        <p>Export\xe9 le '.concat((new Date).toLocaleString("fr-FR"),"</p>\n        <table>\n          <thead><tr><th>Compte</th><th>Client</th><th>Succursale</th><th>Devise</th><th>Solde</th><th>Statut</th></tr></thead>\n          <tbody>").concat(t,"</tbody>\n        </table>\n        <script>window.onload = ()=>{ setTimeout(()=>{ window.print(); },300); };<\/script>\n        </body></html>\n      ");e.document.write(r),e.document.close(),Ts.success("Fen\xeatre d'export ouverte - utilisez Imprimer pour sauver en PDF")}catch(e){console.error(e),Ts.error("Erreur lors de l'export PDF")}})(),className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2 text-sm",children:[(0,ju.jsx)(Hu,{className:"h-4 w-4"})," PDF"]}),(0,ju.jsxs)("button",{onClick:()=>(()=>{try{const e=X.map(e=>{var t;return{id:e.id,accountNumber:e.accountNumber,customerName:e.customerName,phone:e.customerPhone,branch:(null===(t=H.find(t=>String(t.id)===String(e.branchId)))||void 0===t?void 0:t.name)||"",currency:e.currency,balance:e.balance,status:e.status,opened:e.openDate}}),t=(0,Rp.unparse)(e),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download="accounts_current_".concat((new Date).toISOString().slice(0,10),".csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s),setTimeout(()=>{try{URL.revokeObjectURL(n)}catch(e){}},2e3),Ts.success("Export CSV pr\xeat")}catch(e){console.error(e),Ts.error("Erreur lors de l'export CSV")}})(),className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2 text-sm",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"})," CSV"]}),(0,ju.jsxs)("button",{onClick:()=>(()=>{try{const e=X.map(e=>{var t;return{ID:e.id,NumeroCompte:e.accountNumber,Client:e.customerName,Telephone:e.customerPhone,Succursale:(null===(t=H.find(t=>String(t.id)===String(e.branchId)))||void 0===t?void 0:t.name)||"",Devise:e.currency,Solde:e.balance,Statut:e.status,OuvertLe:e.openDate}}),t=Aw.json_to_sheet(e),r=Aw.book_new();Aw.book_append_sheet(r,t,"Comptes"),hw(r,"accounts_current_".concat((new Date).toISOString().slice(0,10),".xlsx")),Ts.success("Export XLSX pr\xeat")}catch(e){console.error(e),Ts.error("Erreur lors de l'export Excel")}})(),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"})," XLSX"]})]})}),(0,ju.jsxs)("select",{value:y,onChange:e=>b(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"ALL",children:"Toutes devises"}),(0,ju.jsx)("option",{value:"HTG",children:"HTG"}),(0,ju.jsx)("option",{value:"USD",children:"USD"})]}),(0,ju.jsxs)("select",{value:w,onChange:e=>S(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"Toutes succursales"}),H.map(e=>(0,ju.jsx)("option",{value:String(e.id),children:e.name},e.id))]}),(0,ju.jsxs)("select",{value:N,onChange:e=>j(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"Tous statuts"}),(0,ju.jsx)("option",{value:"ACTIVE",children:"Actif"}),(0,ju.jsx)("option",{value:"INACTIVE",children:"Inactif"}),(0,ju.jsx)("option",{value:"SUSPENDED",children:"Suspendu"}),(0,ju.jsx)("option",{value:"CLOSED",children:"Ferm\xe9"})]})]}),"accounts"===I&&(0,ju.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:0===X.length?(0,ju.jsxs)("div",{className:"p-12 text-center",children:[(0,ju.jsx)(Tu,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun compte trouv\xe9"}),(0,ju.jsx)("p",{className:"text-gray-500 mb-6",children:g?"Aucun compte ne correspond \xe0 votre recherche":"Commencez par cr\xe9er un nouveau compte courant"})]}):(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"w-full",children:[(0,ju.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Compte"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Solde"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"D\xe9couvert"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ju.jsx)(Tu,{className:"h-5 w-5 text-blue-600"})}),(0,ju.jsxs)("div",{className:"ml-4",children:[(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.accountNumber}),(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:e.currency})]})]})}),(0,ju.jsxs)("td",{className:"px-6 py-4",children:[(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:e.customerName}),(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:e.customerPhone})]}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:Q(e.balance,e.currency)}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["Min: ",Q(e.minimumBalance||0,e.currency)]})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.allowOverdraft?(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-sm font-medium ".concat(e.currentOverdraft>0?"text-orange-600":"text-gray-900"),children:Q(e.currentOverdraft,e.currency)}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["/ ",Q(e.overdraftLimit||0,e.currency)]})]}):(0,ju.jsx)("span",{className:"text-sm text-gray-500",children:"Non autoris\xe9"})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:ee(e.status)}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,ju.jsx)("button",{onClick:()=>(e=>{k(e),_(!0)})(e),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Voir d\xe9tails",children:(0,ju.jsx)(fi,{className:"h-5 w-5"})}),(0,ju.jsx)("button",{onClick:()=>{const t={tab:"transactions",account:e.accountNumber,accSearch:u.get("accSearch")||"",accCurrency:u.get("accCurrency")||y,accStatus:u.get("accStatus")||N};m(t,{replace:!0})},className:"ml-3 text-purple-600 hover:text-purple-900 transition-colors",title:"Voir transactions",children:(0,ju.jsx)(ku,{className:"h-5 w-5"})}),"ACTIVE"===e.status&&(0,ju.jsx)("button",{onClick:()=>(async e=>{const t=prompt("Raison de la fermeture du compte:");if(t)try{f(!0);try{await Di.closeClientAccount(e,t)}catch(n){var r;if(403!==(null===n||void 0===n||null===(r=n.response)||void 0===r?void 0:r.status))throw n;Ts.error("Vous n'avez pas l'autorisation pour fermer ce compte")}Ts.success("Compte ferm\xe9 avec succ\xe8s"),await $(),await K()}catch(Sc){console.error("Erreur lors de la fermeture du compte:",Sc),Ts.error("Erreur lors de la fermeture du compte")}finally{f(!1)}})(e.id),className:"ml-3 text-red-600 hover:text-red-900 transition-colors",title:"Fermer compte",children:(0,ju.jsx)(hi,{className:"h-5 w-5"})})]})]},e.id))})]})}),(0,ju.jsxs)("div",{className:"p-4 border-t bg-white flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:["Affichage ",Math.min((G-1)*W+1,Y)," - ",Math.min(G*W,Y)," sur ",Y," comptes"]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("select",{value:W,onChange:e=>q(Number(e.target.value)),className:"px-3 py-2 border rounded",children:[10,20,50,100].map(e=>(0,ju.jsxs)("option",{value:e,children:[e," / page"]},e))}),(0,ju.jsx)("button",{onClick:()=>V(Math.max(1,G-1)),disabled:G<=1,className:"px-3 py-2 border rounded disabled:opacity-50",children:"Pr\xe9c"}),(0,ju.jsxs)("span",{className:"px-2 text-sm",children:[G," / ",J]}),(0,ju.jsx)("button",{onClick:()=>V(Math.min(J,G+1)),disabled:G>=J,className:"px-3 py-2 border rounded disabled:opacity-50",children:"Suiv"})]})]})]})}),"clients"===I&&d&&(0,ju.jsx)($w,{onOpenCurrent:e=>{L(e),T(!0)}}),"transactions"===I&&d&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Transactions - Comptes Courants"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"R\xe9sum\xe9 des transactions des comptes courants, par devise et actions rapides"})]}),(0,ju.jsx)(Kw,{})]}),"rapports"===I&&d&&(0,ju.jsx)("div",{className:"space-y-6",children:(0,ju.jsx)(Vw,{})}),A&&(0,ju.jsx)(Xw,{initialCustomer:O||void 0,onClose:()=>{T(!1),L(null)},onSuccess:async()=>{T(!1),L(null),await $(),Ts.success("Compte courant cr\xe9\xe9")}}),C&&(0,ju.jsx)(Yw,{onClose:()=>E(!1),onSuccess:async()=>{E(!1),await $(),Ts.success("Client cr\xe9\xe9 et compte courant ouvert")}}),R&&D&&(0,ju.jsx)(zw,{accountId:D.id,onClose:()=>{_(!1),k(null)},onUpdate:async()=>{await $(),await K()}})]})},$w=t=>{let{onOpenCurrent:r}=t;const[n,a]=(0,e.useState)(!1),[i,l]=(0,e.useState)(""),[o,c]=(0,e.useState)([]),[d,u]=(0,e.useState)(null),[m,h]=(0,e.useState)(!1),[p,x]=(0,e.useState)(!1),f=(0,e.useRef)(""),[g,v]=(0,e.useState)({branch:"",status:"",dateFrom:"",dateTo:""}),[y,b]=(0,e.useState)(!1),[N,j]=(0,e.useState)(1),[w,S]=(0,e.useState)(20),[A,T]=(0,e.useState)([]);(0,e.useEffect)(()=>{let e=!0;return(async()=>{try{const t=(await Di.getAllBranches()||[]).map(e=>({id:e.id||e.Id,name:e.name||e.Name}));e&&T(t)}catch(mn){}})(),()=>{e=!1}},[]);const C=/^[A-Z]{2}\d{3,}$/,E=e=>{try{var t,r;if(!e)return"N/A";if(e.customerCode)return e.customerCode;const n=(null===(t=e.identity)||void 0===t?void 0:t.documentNumber)||(null===(r=e.identity)||void 0===r?void 0:r.DocumentNumber);if(n&&String(n).length<=8)return String(n);const s=(e.firstName||e.FirstName||"X").toString().charAt(0).toUpperCase(),a=(e.lastName||e.LastName||"X").toString().charAt(0).toUpperCase(),i="".concat(e.firstName||"").concat(e.lastName||"").concat(e.dateOfBirth||"");let l=0;for(let e=0;e<i.length;e++){l=(l<<5)-l+i.charCodeAt(e),l&=l}l=Math.abs(l);const o=(l%9e3+1e3).toString();return"".concat(s).concat(a).concat(o)}catch(mn){return e.customerCode||e.id||"N/A"}},D=e=>{u(e),x(!0)},k=async()=>{a(!0);try{const e=await Ww.loadCustomersHavingAccounts("CURRENT");c(e||[]),null!==e&&void 0!==e&&e.length||Ts("Aucun client trouv\xe9 avec compte courant")}catch(mn){console.error("\u274c Error loading current clients:",mn),Ts.error("Erreur lors du chargement des clients (courants)"),c([])}finally{a(!1)}};e.useEffect(()=>{k()},[]),e.useEffect(()=>{const e=i.trim();if(!e||e.length<2)return;const t=e.toUpperCase(),r=C.test(t)?200:500,n=setTimeout(()=>{f.current!==t&&(async()=>{const e=i.trim();if(e&&!(e.length<2))try{const t=e.toUpperCase();if(f.current===t)return;f.current=t,a(!0);const r=await Fm.searchCustomers(t);c(r||[])}catch(mn){console.error(mn),Ts.error("Erreur de recherche client")}finally{a(!1)}})()},r);return()=>clearTimeout(n)},[i]);const R=Array.isArray(o)?o.filter(e=>{if(g.branch){if((e.accountBranchName||e.branchName||e.branch||"")!==g.branch)return!1}if(g.status&&e.status!==g.status)return!1;if(g.dateFrom||g.dateTo){var t;const r=new Date(e.createdAt||(null===(t=e.identity)||void 0===t?void 0:t.issuedDate)||e.dateOfBirth);if(g.dateFrom){if(r<new Date(g.dateFrom))return!1}if(g.dateTo){const e=new Date(g.dateTo);if(e.setHours(23,59,59,999),r>e)return!1}}return!0}):[],_=R.length,I=Math.max(1,Math.ceil(_/w));(0,e.useEffect)(()=>{N>I&&j(1)},[_,w]);const P=R.slice((N-1)*w,N*w);return(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Clients Comptes Courants"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"Rechercher, filtrer et g\xe9rer tous les clients avec comptes courants"})]})}),(0,ju.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",{type:"text",placeholder:"Rechercher par nom, t\xe9l\xe9phone, ou num\xe9ro de document...",value:i,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),R.length>0&&(0,ju.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,ju.jsxs)("button",{onClick:()=>_w(R,"Liste Clients - Comptes Courants"),className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2 text-sm",children:[(0,ju.jsx)(Hu,{className:"h-4 w-4"})," PDF"]}),(0,ju.jsxs)("button",{onClick:()=>{try{const e=R.map(e=>{var t,r,n,s,a;return{id:e.id||"",fullName:e.fullName||"".concat(e.firstName||""," ").concat(e.lastName||"").trim(),phone:(null===(t=e.contact)||void 0===t?void 0:t.primaryPhone)||"",email:(null===(r=e.contact)||void 0===r?void 0:r.email)||"",documentNumber:(null===(n=e.identity)||void 0===n?void 0:n.documentNumber)||"",branch:e.accountBranchName||e.branchName||e.branch||"",commune:(null===(s=e.address)||void 0===s?void 0:s.commune)||"",department:(null===(a=e.address)||void 0===a?void 0:a.department)||"",createdAt:e.createdAt||"",status:e.isActive?"Actif":"Inactif"}}),t=(0,Rp.unparse)(e),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),s=URL.createObjectURL(r);n.href=s,n.download="clients_current_".concat((new Date).toISOString().slice(0,10),".csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout(()=>{try{URL.revokeObjectURL(s)}catch(e){}},2e3),Ts.success("Export CSV pr\xeat")}catch(mn){console.error("CSV export error",mn),Ts.error("Erreur lors de l'export CSV")}},className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2 text-sm",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"})," CSV"]}),(0,ju.jsxs)("button",{onClick:()=>{try{const e=R.map(e=>{var t,r,n,s,a;return{id:e.id||"",fullName:e.fullName||"".concat(e.firstName||""," ").concat(e.lastName||"").trim(),phone:(null===(t=e.contact)||void 0===t?void 0:t.primaryPhone)||"",email:(null===(r=e.contact)||void 0===r?void 0:r.email)||"",documentNumber:(null===(n=e.identity)||void 0===n?void 0:n.documentNumber)||"",branch:e.accountBranchName||e.branchName||e.branch||"",commune:(null===(s=e.address)||void 0===s?void 0:s.commune)||"",department:(null===(a=e.address)||void 0===a?void 0:a.department)||"",createdAt:e.createdAt||"",status:e.isActive?"Actif":"Inactif"}}),t=Aw.json_to_sheet(e),r=Aw.book_new();Aw.book_append_sheet(r,t,"Clients"),hw(r,"clients_current_".concat((new Date).toISOString().slice(0,10),".xlsx")),Ts.success("Export XLSX pr\xeat")}catch(mn){console.error("XLSX export error",mn),Ts.error("Erreur lors de l'export XLSX")}},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"})," XLSX"]})]}),(0,ju.jsxs)("button",{onClick:()=>b(!y),className:"mt-3 flex items-center space-x-2 text-blue-600 hover:text-blue-700 transition-colors text-sm font-medium",children:[(0,ju.jsx)(hm,{className:"h-4 w-4"}),(0,ju.jsx)("span",{children:"Filtres avanc\xe9s"}),y?(0,ju.jsx)(gm,{className:"h-4 w-4"}):(0,ju.jsx)(fm,{className:"h-4 w-4"})]}),y&&(0,ju.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Succursale"}),(0,ju.jsxs)("select",{value:g.branch,onChange:e=>v((0,s.A)((0,s.A)({},g),{},{branch:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"Toutes les succursales"}),A.map(e=>(0,ju.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut"}),(0,ju.jsxs)("select",{value:g.status,onChange:e=>v((0,s.A)((0,s.A)({},g),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"Tous les statuts"}),(0,ju.jsx)("option",{value:"ACTIVE",children:"Actif"}),(0,ju.jsx)("option",{value:"INACTIVE",children:"Inactif"}),(0,ju.jsx)("option",{value:"PENDING",children:"En attente"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de d\xe9but"}),(0,ju.jsx)("input",{type:"date",value:g.dateFrom,onChange:e=>v((0,s.A)((0,s.A)({},g),{},{dateFrom:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de fin"}),(0,ju.jsx)("input",{type:"date",value:g.dateTo,onChange:e=>v((0,s.A)((0,s.A)({},g),{},{dateTo:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ju.jsxs)("div",{className:"mt-4 flex items-center space-x-3",children:[(0,ju.jsx)("button",{onClick:()=>v({branch:"",status:"",dateFrom:"",dateTo:""}),className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"R\xe9initialiser les filtres"}),(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:[R.length," client",R.length>1?"s":""," trouv\xe9",R.length>1?"s":""]})]})]})]}),n&&(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:"Recherche en cours..."}),!n&&0===R.length&&(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)(Tu,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun client trouv\xe9"}),(0,ju.jsx)("p",{className:"text-gray-500",children:"Essayez de modifier vos crit\xe8res de recherche"})]}),R.length>0&&(0,ju.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"w-full",children:[(0,ju.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Document"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Adresse"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===R.length?(0,ju.jsx)("tr",{children:(0,ju.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center",children:(0,ju.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,ju.jsx)(Ru,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,ju.jsx)("p",{className:"text-gray-500",children:"Aucun client pour le moment"})]})})}):P.filter(e=>e&&e.id).map(e=>{var t,r,n,s;return(0,ju.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ju.jsx)(Ru,{className:"h-5 w-5 text-blue-600"})}),(0,ju.jsxs)("div",{className:"ml-4",children:[(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.fullName||"N/A"}),(0,ju.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",E(e)]})]})]})}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:(null===(t=e.contact)||void 0===t?void 0:t.primaryPhone)||"N/A"}),(null===(r=e.contact)||void 0===r?void 0:r.email)&&(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:e.contact.email})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:e.documents&&e.documents.length>0?(0,ju.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,ju.jsxs)("span",{className:"font-medium",children:[e.documents.length," document(s)"]}),(0,ju.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.documents.slice(0,2).map((e,t)=>(0,ju.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded-full",children:e.documentTypeName||e.documentType||"Document"},t)),e.documents.length>2&&(0,ju.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",e.documents.length-2," autres"]})]})]}):(0,ju.jsx)("span",{className:"text-gray-500",children:"Aucun document"})})}),(0,ju.jsxs)("td",{className:"px-6 py-4",children:[(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:(null===(n=e.address)||void 0===n?void 0:n.commune)||"N/A"}),(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:(null===(s=e.address)||void 0===s?void 0:s.department)||"N/A"})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.isActive?(0,ju.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Actif"}):(0,ju.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Inactif"})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,ju.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,ju.jsx)("button",{onClick:()=>D(e),disabled:!e.id,className:"text-blue-600 hover:text-blue-900 transition-colors p-2 hover:bg-blue-50 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",title:"Modifier",children:(0,ju.jsx)(xm,{className:"h-5 w-5"})}),(0,ju.jsx)("button",{onClick:()=>(e=>{u(e),h(!0)})(e),disabled:!e.id,className:"text-gray-600 hover:text-gray-900 transition-colors p-2 hover:bg-gray-50 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",title:"Voir les d\xe9tails",children:(0,ju.jsx)(fi,{className:"h-5 w-5"})}),(0,ju.jsx)("button",{onClick:()=>e&&Rw(e),disabled:!e,className:"text-green-600 hover:text-green-900 transition-colors p-2 hover:bg-green-50 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",title:"Eksp\xf2 PDF",children:(0,ju.jsx)(zu,{className:"h-5 w-5"})})]})})]},e.id)})})]})}),(0,ju.jsxs)("div",{className:"px-4 py-3 bg-white border-t flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:["Affichage ",(N-1)*w+1," \u2013 ",Math.min(N*w,_)," sur ",_]}),(0,ju.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ju.jsx)("label",{className:"text-sm text-gray-600",children:"Lignes"}),(0,ju.jsxs)("select",{value:w,onChange:e=>{S(Number(e.target.value)),j(1)},className:"px-2 py-1 border rounded",children:[(0,ju.jsx)("option",{value:5,children:"5"}),(0,ju.jsx)("option",{value:10,children:"10"}),(0,ju.jsx)("option",{value:20,children:"20"}),(0,ju.jsx)("option",{value:50,children:"50"}),(0,ju.jsx)("option",{value:100,children:"100"})]}),(0,ju.jsx)("button",{onClick:()=>j(e=>Math.max(1,e-1)),disabled:N<=1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Pr\xe9c"}),(0,ju.jsx)("span",{className:"text-sm",children:"Page"}),(0,ju.jsx)("select",{value:N,onChange:e=>j(Number(e.target.value)),className:"px-2 py-1 border rounded",children:Array.from({length:I}).map((e,t)=>(0,ju.jsx)("option",{value:t+1,children:t+1},t))}),(0,ju.jsx)("button",{onClick:()=>j(e=>Math.min(I,e+1)),disabled:N>=I,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Suiv"})]})]})]}),m&&d&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[92vh] overflow-auto",children:[(0,ju.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-xl font-bold",children:d.fullName||"Nom inconnu"}),(d.customerCode||d.CustomerCode)&&(0,ju.jsxs)("p",{className:"text-blue-100",children:["Code Client: ",d.customerCode||d.CustomerCode]})]}),(0,ju.jsx)("button",{onClick:()=>h(!1),className:"text-white/90 hover:text-white text-2xl leading-none",children:"\xd7"})]}),(0,ju.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Informations Personnelles"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Code Client"}),(0,ju.jsx)("div",{className:"text-gray-900",children:d.customerCode||d.CustomerCode||"\u2014"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Pr\xe9nom"}),(0,ju.jsx)("div",{className:"text-gray-900",children:d.firstName||d.FirstName||"\u2014"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Nom"}),(0,ju.jsx)("div",{className:"text-gray-900",children:d.lastName||d.LastName||"\u2014"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Date de Naissance"}),(0,ju.jsx)("div",{className:"text-gray-900",children:(e=>{if(!e)return"\u2014";const t=new Date(e);return isNaN(t.getTime())?"\u2014":t.toLocaleDateString("fr-FR")})(d.dateOfBirth||d.DateOfBirth)})]})]})]}),(0,ju.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,ju.jsx)("button",{onClick:()=>Rw(d),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Exporter en PDF"}),(0,ju.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Fermer"})]})]})]})}),(0,ju.jsx)(Cw,{customer:d,isOpen:m,onClose:()=>h(!1),onEdit:D}),(0,ju.jsx)(Ew,{customer:d,isOpen:p,onClose:()=>x(!1),onSuccess:k})]})},Kw=()=>{const[t,r]=(0,e.useState)(!1),[n,a]=(0,e.useState)(""),[i,l]=(0,e.useState)([]),[o,c]=(0,e.useState)([]),[d,u]=(0,e.useState)(1),[m,h]=(0,e.useState)(20),[p,x]=(0,e.useState)("ALL"),[f,g]=(0,e.useState)("ALL"),[v,y]=(0,e.useState)(""),[b,N]=(0,e.useState)(""),[j,w]=(0,e.useState)(""),[S,A]=(0,e.useState)(""),[T,C]=(0,e.useState)(!1),[E,D]=dn(),k=(0,e.useRef)(null),[R,_]=(0,e.useState)(!1),I=(0,e.useRef)(null),[P,O]=(0,e.useState)({accountNumber:"",type:"DEPOSIT",currency:"HTG",amount:"",description:"",clientPresent:!0,verificationMethod:"",notes:""}),[L,F]=(0,e.useState)(""),[M,U]=(0,e.useState)(!1),B=(0,e.useRef)(null),[H,z]=(0,e.useState)(null),[G,V]=(0,e.useState)(!1),[W,q]=(0,e.useState)(null),[$,K]=(0,e.useState)([]),X=e=>{if(null==e)return"COMPLETED";if("number"===typeof e)switch(e){case 0:return"PENDING";case 1:return"PROCESSING";case 2:return"COMPLETED";case 3:return"CANCELLED";case 4:return"FAILED";default:return String(e)}const t=String(e).trim().toUpperCase();return t.includes("ANNUL")||t.includes("CANCEL")?"CANCELLED":t.includes("FAIL")||t.includes("ECHEC")||t.includes("\xc9CHEC")||t.includes("ECHOU")?"FAILED":t.includes("PROCESS")?"PROCESSING":t.includes("PEND")||t.includes("ATTENT")?"PENDING":t.includes("COMPLETE")||t.includes("COMPLET")?"COMPLETED":t},Y=e=>{const t=X(e||"");switch(t){case"COMPLETED":return"Compl\xe9t\xe9";case"CANCELLED":return"Annul\xe9";case"PENDING":return"En attente";case"PROCESSING":return"En cours";case"FAILED":return"\xc9chou\xe9";default:return t||"\u2014"}},J=async e=>{try{const t=await Di.getCurrentAccountBalance(e);q(t)}catch(mn){}},Z=async e=>{const t=(null!==e&&void 0!==e?e:n).trim();if(t)try{r(!0);const e=await Di.getAccountTransactions(t),a=(e||[]).map(e=>{var t,r,s,a,i,l,o,c,d,u,m,h,p,x,f,g,v,y,b,N;const j=Number(null!==(t=null!==(r=null!==(s=null!==(a=null!==(i=null!==(l=e.amount)&&void 0!==l?l:e.Amount)&&void 0!==i?i:e.initialDeposit)&&void 0!==a?a:e.InitialDeposit)&&void 0!==s?s:e.openingDeposit)&&void 0!==r?r:e.OpeningDeposit)&&void 0!==t?t:0),w=Number(null!==(o=null!==(c=null!==(d=null!==(u=e.balanceAfter)&&void 0!==u?u:e.BalanceAfter)&&void 0!==d?d:e.balanceAfterAmount)&&void 0!==c?c:e.balance)&&void 0!==o?o:0),S=null!=e.balanceBefore?Number(e.balanceBefore):null!=e.BalanceBefore?Number(e.BalanceBefore):w-j,A=null!==(m=null!==(h=null!==(p=e.status)&&void 0!==p?p:e.Status)&&void 0!==h?h:e.state)&&void 0!==m?m:e.State;return{id:null!==(x=null!==(f=null!==(g=null!==(v=null!==(y=null!==(b=null!==(N=e.id)&&void 0!==N?N:e.Id)&&void 0!==b?b:e.transactionId)&&void 0!==y?y:e.TransactionId)&&void 0!==v?v:e.txId)&&void 0!==g?g:e.TxId)&&void 0!==f?f:e.sourceId)&&void 0!==x?x:e.SourceId,transactionDate:e.transactionDate||e.date||e.Date||e.timestamp||e.openingDate||e.createdAt||e.CreatedAt||e.processedAt,transactionType:e.transactionType||e.type||e.Type||e.kind||e.operation,amount:j,currency:e.currency||"HTG",balanceAfter:w,balanceBefore:S,reference:e.reference||e.ref||e.transactionRef||e.referenceNumber||e.openingReference||"TXN-".concat(e.id||e.Id),account:e.accountNumber||e.account||n,performedBy:e.performedBy||e.user||e.User||e.cashier||e.processedByName||e.processedBy||"Syst\xe8me",branch:e.branchName||e.branch||e.BranchName||e.Branch||"",status:X(A),description:e.description||e.memo||""}});console.log("[DEBUG] Mapped transactions:",a);const i=a.sort((e,t)=>{const r=new Date(e.transactionDate).getTime();return new Date(t.transactionDate).getTime()-r});console.log("[DEBUG] Final sorted transactions:",i),l(i);try{const e=new URLSearchParams(E);e.set("tab","transactions"),e.set("account",t),D(e,{replace:!0})}catch(s){}J(t)}catch(Sc){console.error("Error loading transactions:",Sc),Ts.error("Erreur lors du chargement des transactions"),l([])}finally{r(!1)}};(0,e.useEffect)(()=>{const e=(E.get("account")||"").trim();e&&e!==n&&(a(e),Z(e),J(e))},[E]),(0,e.useEffect)(()=>{(async()=>{try{const e=(await Di.getAllBranches()||[]).map(e=>({id:e.id||e.Id,name:e.name||e.Name}));K(e)}catch(mn){console.error("Error fetching branches:",mn)}})()},[]),(0,e.useEffect)(()=>{const e=()=>{_(!0),O(e=>(0,s.A)((0,s.A)({},e),{},{accountNumber:n||e.accountNumber})),setTimeout(()=>{I.current&&(I.current.focus(),I.current.select())},50)};return window.addEventListener("start-new-transaction",e),()=>window.removeEventListener("start-new-transaction",e)},[]),(0,e.useEffect)(()=>{const e=(P.accountNumber||"").trim();if(B.current&&(clearTimeout(B.current),B.current=null),!e||e.length<3)return F(""),U(!1),void z(null);B.current=setTimeout(async()=>{try{U(!0);const t=(await Di.getClientAccounts({accountType:vi.CURRENT,accountNumber:e})||[])[0],r=(null===t||void 0===t?void 0:t.customerName)||"";F(r),z(t?{name:r,currency:t.currency||"HTG",balance:"number"===typeof t.balance?t.balance:Number(t.balance||0),status:t.status||""}:null)}catch(mn){F(""),z(null)}finally{U(!1)}},350)},[P.accountNumber]),(0,e.useEffect)(()=>{(async()=>{try{if(n&&n.trim().length>0)return;r(!0);const e=(await Di.getClientAccounts({accountType:vi.CURRENT})||[]).slice(0,20),t=await Promise.all(e.map(e=>Di.getAccountTransactions(e.accountNumber||e.AccountNumber||""))),s=[].concat(...t).map(e=>{var t,r,n,s,a,i,l,o,c,d,u,m,h,p,x,f,g,v,y,b;const N=Number(null!==(t=null!==(r=null!==(n=null!==(s=null!==(a=null!==(i=e.amount)&&void 0!==i?i:e.Amount)&&void 0!==a?a:e.initialDeposit)&&void 0!==s?s:e.InitialDeposit)&&void 0!==n?n:e.openingDeposit)&&void 0!==r?r:e.OpeningDeposit)&&void 0!==t?t:0),j=Number(null!==(l=null!==(o=null!==(c=null!==(d=e.balanceAfter)&&void 0!==d?d:e.BalanceAfter)&&void 0!==c?c:e.balanceAfterAmount)&&void 0!==o?o:e.balance)&&void 0!==l?l:0),w=null!=e.balanceBefore?Number(e.balanceBefore):null!=e.BalanceBefore?Number(e.BalanceBefore):j-N,S=null!==(u=null!==(m=null!==(h=e.status)&&void 0!==h?h:e.Status)&&void 0!==m?m:e.state)&&void 0!==u?u:e.State;return{id:null!==(p=null!==(x=null!==(f=null!==(g=null!==(v=null!==(y=null!==(b=e.id)&&void 0!==b?b:e.Id)&&void 0!==y?y:e.transactionId)&&void 0!==v?v:e.TransactionId)&&void 0!==g?g:e.txId)&&void 0!==f?f:e.TxId)&&void 0!==x?x:e.sourceId)&&void 0!==p?p:e.SourceId,transactionDate:e.transactionDate||e.date||e.Date||e.timestamp||e.openingDate||e.createdAt||e.CreatedAt||e.processedAt,transactionType:e.transactionType||e.type||e.Type||e.kind||e.operation,amount:N,currency:e.currency||"HTG",balanceAfter:j,balanceBefore:w,reference:e.reference||e.ref||e.transactionRef||e.referenceNumber||e.openingReference||"TXN-".concat(e.id||e.Id),account:e.accountNumber||e.account||"",performedBy:e.performedBy||e.user||e.User||e.cashier||e.processedByName||e.processedBy||"Syst\xe8me",branch:e.branchName||e.branch||e.BranchName||e.Branch||"",status:X(S),description:e.description||e.memo||""}}),a=s.sort((e,t)=>{const r=new Date(e.transactionDate).getTime();return new Date(t.transactionDate).getTime()-r});l(a)}catch(mn){console.error("Error auto-loading transactions:",mn)}finally{r(!1)}})()},[]);const Q=e=>{const t=(e=>e?e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase():"")(String(e||""));return t.includes("DEPOSIT")||t.includes("DEPOT")||t.includes("VERSEMENT")||t.includes("CREDIT")||t.includes("INITIAL")||t.includes("OPENING")||t.includes("OUVERTURE")?"DEPOSIT":t.includes("WITHDRAW")||t.includes("RETRAIT")||t.includes("DEBIT")?"WITHDRAWAL":"OTHER"},ee=e.useMemo(()=>{if($.length>0)return $.map(e=>e.name);const e=new Set;for(const t of i){const r=(t.branch||"").trim();r&&e.add(r)}return Array.from(e).sort((e,t)=>e.localeCompare(t))},[$,i]);(0,e.useEffect)(()=>{const e=v?new Date(v):null,t=b?new Date(b):null,r=j?Number(j):null,n=S?Number(S):null,s=(i||[]).filter(s=>{if("CANCELLED"===p){if("CANCELLED"!==X(s.status))return!1}else if("ALL"!==p&&Q(s.transactionType)!==p)return!1;if("ALL"!==f){if(String(s.branch||"").toLowerCase()!==String(f).toLowerCase())return!1}if(e||t){const r=new Date(s.transactionDate);if(isNaN(r.getTime()))return!1;if(e&&r<e)return!1;if(t){const e=new Date(t);if(e.setHours(23,59,59,999),r>e)return!1}}return!(null!=r&&!isNaN(r)&&s.amount<r)&&!(null!=n&&!isNaN(n)&&s.amount>n)});c(s),u(1)},[i,p,f,v,b,j,S]);const te=o.length,re=Math.max(1,Math.ceil(te/m));(0,e.useEffect)(()=>{d>re&&u(1)},[te,m]);const ne=o.slice((d-1)*m,d*m),se=e.useMemo(()=>{const e=o.filter(e=>"DEPOSIT"===Q(e.transactionType)).reduce((e,t)=>e+(t.amount||0),0),t=o.filter(e=>"WITHDRAWAL"===Q(e.transactionType)).reduce((e,t)=>e+(t.amount||0),0);return{deposits:e,withdrawals:t,count:o.length}},[o]),ae=e.useMemo(()=>o.length?o.reduce((e,t)=>{const r=String(t.branch||"").trim()||"Sans succursale";return e[r]=(e[r]||0)+1,e},{}):{},[o]),ie=e.useMemo(()=>{const e={deposits:{HTG:0,USD:0},withdrawals:{HTG:0,USD:0}};if(null===o||void 0===o||!o.length)return e;const t=(new Date).toDateString();for(const r of o){if(new Date(r.transactionDate).toDateString()!==t)continue;const n="USD"===r.currency?"USD":"HTG",s=Math.max(0,Number(r.amount||0)),a=Q(r.transactionType);"DEPOSIT"===a?e.deposits[n]+=s:"WITHDRAWAL"===a&&(e.withdrawals[n]+=s)}return e},[o]);e.useEffect(()=>{if(i.length>0){const e=i.reduce((e,t)=>{const r=String(t.branch||"").trim()||"Sans succursale";return e[r]=(e[r]||0)+1,e},{});if(console.log("V\xe9rification des associations de succursales dans les transactions:",e),$.length>0){const t=$.map(e=>e.name),r=Object.keys(e).filter(e=>"Sans succursale"!==e&&!t.includes(e));r.length>0&&console.warn("Transactions avec succursales inconnues:",r)}}},[i,$]);e.useCallback(e=>{if(!e||"DEPOSIT"!==Q(e.transactionType))return!1;const t=(e.account||"").toUpperCase(),r=Number(e.amount||0),n=e.currency,s=new Date(e.transactionDate).getTime(),a=String(e.reference||"").toUpperCase(),l=(String(e.description||"").toUpperCase(),["REV","REVERSE","REVERSAL","CANCEL","ANNUL"]);return i.some(e=>{if(!e)return!1;if(String(e.account||"").toUpperCase()!==t)return!1;if(e.currency!==n)return!1;if("WITHDRAWAL"!==Q(e.transactionType))return!1;if(Number(e.amount||0)!==r)return!1;const i=new Date(e.transactionDate).getTime();if(!(i>=s)||i-s>864e5)return!1;const o=String(e.reference||"").toUpperCase(),c=String(e.description||"").toUpperCase(),d=l.some(e=>o.includes(e)||c.includes(e)),u=a&&o&&(a.includes(o)||o.includes(a));return d||u})},[i]);const le=(e,t)=>"CANCELLED"===t&&"DEPOSIT"===Q(e.transactionType)?"COMPLETED":t;return(0,ju.jsxs)("div",{id:"transactions-section",className:"space-y-4",children:[o.length>0&&(0,ju.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ju.jsx)("div",{className:"bg-white border border-green-200 p-4 rounded-xl",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Total D\xe9p\xf4ts HTG"}),(0,ju.jsxs)("p",{className:"text-xl font-bold text-gray-900 mt-1",children:[new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(ie.deposits.HTG)," HTG"]}),(0,ju.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"Aujourd'hui"})]}),(0,ju.jsx)(Lu,{className:"h-8 w-8 text-green-600"})]})}),(0,ju.jsx)("div",{className:"bg-white border border-green-200 p-4 rounded-xl",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Total D\xe9p\xf4ts USD"}),(0,ju.jsxs)("p",{className:"text-xl font-bold text-gray-900 mt-1",children:[new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(ie.deposits.USD)," USD"]}),(0,ju.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"Aujourd'hui"})]}),(0,ju.jsx)(Lu,{className:"h-8 w-8 text-green-600"})]})}),(0,ju.jsx)("div",{className:"bg-white border border-red-200 p-4 rounded-xl",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Total Retraits HTG"}),(0,ju.jsxs)("p",{className:"text-xl font-bold text-gray-900 mt-1",children:[new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(ie.withdrawals.HTG)," HTG"]}),(0,ju.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"Aujourd'hui"})]}),(0,ju.jsx)(Op,{className:"h-8 w-8 text-red-600"})]})}),(0,ju.jsx)("div",{className:"bg-white border border-red-200 p-4 rounded-xl",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Total Retraits USD"}),(0,ju.jsxs)("p",{className:"text-xl font-bold text-gray-900 mt-1",children:[new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(ie.withdrawals.USD)," USD"]}),(0,ju.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"Aujourd'hui"})]}),(0,ju.jsx)(Op,{className:"h-8 w-8 text-red-600"})]})})]}),(0,ju.jsx)("div",{className:"flex justify-end",children:(0,ju.jsxs)("button",{onClick:()=>{const e=document.getElementById("transactions-section");e&&e.scrollIntoView({behavior:"smooth",block:"start"}),window.dispatchEvent(new CustomEvent("start-new-transaction"))},className:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[(0,ju.jsx)(Au,{className:"h-4 w-4"}),(0,ju.jsx)("span",{children:"Nouvelle Transaction"})]})}),(0,ju.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border space-y-3",children:[(0,ju.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-3 items-center",children:(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Num\xe9ro de compte"}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,ju.jsx)("input",{type:"text",value:n,onChange:e=>a(e.target.value),onKeyDown:e=>{"Enter"===e.key&&Z()},placeholder:"CC-001234",className:"w-full pl-9 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",ref:k}),(0,ju.jsx)("button",{onClick:()=>Z(),className:"absolute right-1 top-1/2 -translate-y-1/2 px-2 py-1 text-xs border rounded-md hover:bg-gray-50",children:"Charger"})]})]})}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Succursale"}),(0,ju.jsxs)("select",{value:f,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",title:"Filtrer par succursale",children:[(0,ju.jsx)("option",{value:"ALL",children:"Toutes"}),ee.map(e=>(0,ju.jsx)("option",{value:e,children:e},e))]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),(0,ju.jsxs)("select",{value:p,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",title:"Filtrer par type",children:[(0,ju.jsx)("option",{value:"ALL",children:"Tous types"}),(0,ju.jsx)("option",{value:"DEPOSIT",children:"D\xe9p\xf4ts"}),(0,ju.jsx)("option",{value:"WITHDRAWAL",children:"Retraits"}),(0,ju.jsx)("option",{value:"OTHER",children:"Autres"}),(0,ju.jsx)("option",{value:"CANCELLED",children:"Annul\xe9es"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date d\xe9but"}),(0,ju.jsx)("input",{type:"date",value:v,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date fin"}),(0,ju.jsx)("input",{type:"date",value:b,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Montant min"}),(0,ju.jsx)("input",{type:"number",inputMode:"decimal",placeholder:"0",value:j,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Montant max"}),(0,ju.jsx)("input",{type:"number",inputMode:"decimal",placeholder:"0",value:S,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),(0,ju.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 pt-1",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("button",{onClick:()=>{x("ALL"),g("ALL"),y(""),N(""),w(""),A("")},className:"px-3 py-2 border rounded-lg hover:bg-gray-50",title:"R\xe9initialiser les filtres",children:"R\xe9initialiser"}),(0,ju.jsx)("button",{onClick:()=>C(e=>!e),className:"px-3 py-2 border rounded-lg hover:bg-gray-50",title:"Plus d'options",children:T?"Masquer options":"Options avanc\xe9es"})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[o.length>0&&(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("button",{onClick:()=>{if(0===o.length)return;const e=o.map(e=>[new Date(e.transactionDate).toLocaleString("fr-FR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),e.reference||"",e.account||"",e.performedBy||"",e.branch||"","DEPOSIT"===Q(e.transactionType)?"D\xe9p\xf4t":"WITHDRAWAL"===Q(e.transactionType)?"Retrait":e.transactionType||"","".concat("DEPOSIT"===Q(e.transactionType)?"+":"WITHDRAWAL"===Q(e.transactionType)?"-":"").concat(new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.amount)," ").concat(e.currency),null!=e.balanceBefore?"".concat(new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.balanceBefore)," ").concat(e.currency):"","".concat(new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.balanceAfter)," ").concat(e.currency),(()=>{const t=X(e.status),r=le(e,t);return Y(r)})(),e.description||""]),t=[["Date/Heure","R\xe9f\xe9rence","Compte","Par","Succursale","Type","Montant","Solde Avant","Solde Apr\xe8s","Statut","Description"],...e].map(e=>e.join(",")).join("\n"),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");s.href=URL.createObjectURL(r),s.download="transactions-compte-".concat(n||"tous",".csv"),s.click()},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"}),"Exporter CSV"]}),(0,ju.jsxs)("button",{onClick:()=>{if(0===o.length)return;const e='\n<!DOCTYPE html>\n<html lang="fr">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Transactions - '.concat(n||"Tous les comptes","</title>\n    <style>\n        body { font-family: Arial, sans-serif; margin: 20px; }\n        h1 { color: #333; text-align: center; }\n        table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n        th { background-color: #f2f2f2; font-weight: bold; }\n        tr:nth-child(even) { background-color: #f9f9f9; }\n        .deposit { color: green; }\n        .withdrawal { color: red; }\n        .summary { margin-top: 20px; padding: 10px; background-color: #e9ecef; border-radius: 5px; }\n    </style>\n</head>\n<body>\n    <h1>Historique des Transactions - ").concat(n||"Tous les comptes",'</h1>\n    <div class="summary">\n        <p><strong>Total des transactions:</strong> ').concat(se.count,"</p>\n        <p><strong>D\xe9p\xf4ts totaux:</strong> ").concat(new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(se.deposits),"</p>\n        <p><strong>Retraits totaux:</strong> ").concat(new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(se.withdrawals),"</p>\n        <p><strong>G\xe9n\xe9r\xe9 le:</strong> ").concat((new Date).toLocaleString("fr-FR"),"</p>\n    </div>\n    <table>\n        <thead>\n            <tr>\n                <th>Date/Heure</th>\n                <th>R\xe9f\xe9rence</th>\n                <th>Compte</th>\n                <th>Par</th>\n                <th>Succursale</th>\n                <th>Type</th>\n                <th>Montant</th>\n                <th>Solde Avant</th>\n                <th>Solde Apr\xe8s</th>\n                <th>Statut</th>\n                <th>Description</th>\n            </tr>\n        </thead>\n        <tbody>\n            ").concat(o.map(e=>"\n                <tr>\n                    <td>".concat(new Date(e.transactionDate).toLocaleString("fr-FR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),"</td>\n                    <td>").concat(e.reference||"\u2014","</td>\n                    <td>").concat(e.account||"\u2014","</td>\n                    <td>").concat(e.performedBy||"\u2014","</td>\n                    <td>").concat(e.branch||"\u2014","</td>\n                    <td>").concat("DEPOSIT"===Q(e.transactionType)?"D\xe9p\xf4t":"WITHDRAWAL"===Q(e.transactionType)?"Retrait":e.transactionType||"\u2014",'</td>\n                    <td class="').concat("DEPOSIT"===Q(e.transactionType)?"deposit":"WITHDRAWAL"===Q(e.transactionType)?"withdrawal":"",'">\n                        ').concat("DEPOSIT"===Q(e.transactionType)?"+":"WITHDRAWAL"===Q(e.transactionType)?"-":"").concat(new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.amount)," ").concat(e.currency,"\n                    </td>\n                    <td>").concat(null!=e.balanceBefore?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.balanceBefore)+" "+e.currency:"\u2014","</td>\n                    <td>").concat(new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.balanceAfter)," ").concat(e.currency,"</td>\n                    <td>").concat((()=>{const t=X(e.status),r=le(e,t);return Y(r)})(),"</td>\n                    <td>").concat(e.description||"\u2014","</td>\n                </tr>\n            ")).join(""),"\n        </tbody>\n    </table>\n</body>\n</html>"),t=new Blob([e],{type:"text/html;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(t),r.download="transactions-compte-".concat(n||"tous",".html"),r.click()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ju.jsx)(Hu,{className:"h-4 w-4"}),"Exporter HTML"]})]}),(0,ju.jsx)("button",{onClick:()=>Z(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",title:"Actualiser",children:"Actualiser"})]})]}),T&&(0,ju.jsx)("div",{className:"pt-2 text-sm text-gray-500",children:"Astuce: tapez Entr\xe9e dans le champ Num\xe9ro de compte pour charger rapidement un seul compte. D'autres filtres pourront \xeatre ajout\xe9s ici (agent, statut...)."})]}),!(null===n||void 0===n||!n.trim())&&W&&(0,ju.jsxs)("div",{className:"text-sm text-gray-700 flex flex-wrap items-center gap-4",children:[(0,ju.jsxs)("span",{className:"font-medium",children:["Solde actuel: ",new Intl.NumberFormat("fr-FR",{maximumFractionDigits:2}).format(W.balance)," ",W.currency]}),(0,ju.jsxs)("span",{children:["Disponible: ",new Intl.NumberFormat("fr-FR",{maximumFractionDigits:2}).format(W.availableBalance)," ",W.currency]}),W.status&&(0,ju.jsxs)("span",{children:["Statut: ",(0,ju.jsx)("span",{className:"uppercase",children:W.status})]})]}),o.length>0&&(0,ju.jsxs)("div",{className:"text-sm text-gray-700 flex flex-wrap items-center gap-4",children:[(0,ju.jsxs)("span",{children:[(0,ju.jsx)("strong",{children:se.count})," transaction(s)"]}),(0,ju.jsxs)("span",{className:"text-green-700",children:["D\xe9p\xf4ts: ",new Intl.NumberFormat("fr-FR",{maximumFractionDigits:2}).format(se.deposits)]}),(0,ju.jsxs)("span",{className:"text-red-700",children:["Retraits: ",new Intl.NumberFormat("fr-FR",{maximumFractionDigits:2}).format(se.withdrawals)]})]}),Object.keys(ae).length>0&&(0,ju.jsxs)("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:[(0,ju.jsx)("div",{className:"font-medium mb-2",children:"Distribution par succursale:"}),(0,ju.jsx)("div",{className:"flex flex-wrap gap-3",children:Object.entries(ae).sort((e,t)=>{let[,r]=e,[,n]=t;return n-r}).map(e=>{let[t,r]=e;return(0,ju.jsxs)("span",{className:"bg-white px-2 py-1 rounded border",children:[(0,ju.jsx)("span",{className:"font-medium",children:t}),": ",r]},t)})})]}),t&&(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:"Chargement des transactions..."}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DATE/HEURE"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"R\xc9F\xc9RENCE"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"COMPTE"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PAR"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SUCCURSALE"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"TYPE"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MONTANT"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SOLDE AVANT"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SOLDE APR\xc8S"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"STATUT"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ACTIONS"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length>0?ne.map((e,t)=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-900",children:new Date(e.transactionDate).toLocaleString("fr-FR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),(0,ju.jsx)("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-900",children:e.reference||"\u2014"}),(0,ju.jsx)("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-900",children:e.account||"\u2014"}),(0,ju.jsx)("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-900",children:e.performedBy||"\u2014"}),(0,ju.jsx)("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-900",children:e.branch||"\u2014"}),(0,ju.jsx)("td",{className:"px-6 py-3 whitespace-nowrap",children:(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("DEPOSIT"===Q(e.transactionType)?"bg-green-100 text-green-800":"WITHDRAWAL"===Q(e.transactionType)?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:["DEPOSIT"===Q(e.transactionType)?(0,ju.jsx)(Lu,{className:"h-4 w-4"}):"WITHDRAWAL"===Q(e.transactionType)?(0,ju.jsx)(Op,{className:"h-4 w-4"}):(0,ju.jsx)(Du,{className:"h-4 w-4"}),"DEPOSIT"===Q(e.transactionType)?"D\xe9p\xf4t":"WITHDRAWAL"===Q(e.transactionType)?"Retrait":e.transactionType||"\u2014"]})}),(0,ju.jsxs)("td",{className:"px-6 py-3 whitespace-nowrap text-sm font-semibold "+("DEPOSIT"===Q(e.transactionType)?"text-green-600":"WITHDRAWAL"===Q(e.transactionType)?"text-red-600":"text-gray-900"),children:["DEPOSIT"===Q(e.transactionType)?"+":"WITHDRAWAL"===Q(e.transactionType)?"-":"",new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.amount)," ",e.currency]}),(0,ju.jsx)("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-900",children:null!=e.balanceBefore?"".concat(new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.balanceBefore)," ").concat(e.currency):"\u2014"}),(0,ju.jsxs)("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-900",children:[new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.balanceAfter)," ",e.currency]}),(0,ju.jsx)("td",{className:"px-6 py-3 whitespace-nowrap",children:(()=>{const t=X(e.status),r=le(e,t),n="COMPLETED"===r?"bg-green-100 text-green-800":"PENDING"===r?"bg-yellow-100 text-yellow-800":"PROCESSING"===r?"bg-blue-100 text-blue-800":"FAILED"===r?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800",s="COMPLETED"===r?(0,ju.jsx)(Ju,{className:"h-4 w-4"}):"PENDING"===r?(0,ju.jsx)(Cu,{className:"h-4 w-4"}):"PROCESSING"===r?(0,ju.jsx)(Eu,{className:"h-4 w-4 animate-spin"}):"CANCELLED"===r?(0,ju.jsx)(Lp,{className:"h-4 w-4"}):(0,ju.jsx)(Su,{className:"h-4 w-4"});return(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(n),children:[s,Y(r)]})})()}),(0,ju.jsx)("td",{className:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium",children:(0,ju.jsxs)("div",{className:"inline-flex items-center justify-end gap-2",children:[(0,ju.jsx)("button",{onClick:()=>(e=>{try{const t='<!DOCTYPE html>\n        <html lang="fr">\n          <head>\n            <meta charset="utf-8" />\n            <meta name="viewport" content="width=device-width, initial-scale=1" />\n            <title>Re\xe7u - '.concat(e.reference||"",'</title>\n            <style>\n              body { font-family: Arial, sans-serif; padding: 20px; }\n              .header { text-align: center; margin-bottom: 20px }\n              .line { display:flex; justify-content:space-between; margin:6px 0 }\n              .muted { color: #666; font-size: 0.9rem }\n              .actions { margin-top: 24px; text-align: center; }\n              .btn { display:inline-block; padding:8px 14px; border:1px solid #2563eb; color:#2563eb; border-radius:6px; text-decoration:none }\n              .btn:hover { background:#2563eb; color:#fff }\n            </style>\n          </head>\n          <body>\n            <div class="header">\n              <h2>Re\xe7u de transaction</h2>\n              <div class="muted">R\xe9f\xe9rence: ').concat(e.reference||"\u2014",'</div>\n            </div>\n            <div class="line"><div>Date/Heure</div><div>').concat(new Date(e.transactionDate).toLocaleString("fr-FR"),'</div></div>\n            <div class="line"><div>Compte</div><div>').concat(e.account||"\u2014",'</div></div>\n            <div class="line"><div>Par</div><div>').concat(e.performedBy||"\u2014",'</div></div>\n            <div class="line"><div>Type</div><div>').concat("DEPOSIT"===Q(e.transactionType)?"D\xe9p\xf4t":"WITHDRAWAL"===Q(e.transactionType)?"Retrait":e.transactionType||"\u2014",'</div></div>\n            <div class="line"><div>Montant</div><div>').concat("DEPOSIT"===Q(e.transactionType)?"+":"WITHDRAWAL"===Q(e.transactionType)?"-":"").concat(new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.amount)," ").concat(e.currency,'</div></div>\n            <div class="line"><div>Solde Avant</div><div>').concat(null!=e.balanceBefore?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.balanceBefore):"\u2014"," ").concat(e.currency,'</div></div>\n            <div class="line"><div>Solde Apr\xe8s</div><div>').concat(null!=e.balanceAfter?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.balanceAfter):"\u2014"," ").concat(e.currency,'</div></div>\n            <div style="margin-top:20px;" class="muted">Statut: ').concat((()=>{const t=X(e.status),r=le(e,t);return Y(r)})(),'</div>\n            <div style="margin-top:40px; font-size:0.9rem;" class="muted">G\xe9n\xe9r\xe9 le ').concat((new Date).toLocaleString("fr-FR"),'</div>\n            <div class="actions">\n              <a href="#" class="btn" onclick="window.print(); return false;">Imprimer</a>\n            </div>\n          </body>\n        </html>'),r=new Blob([t],{type:"text/html"}),n=URL.createObjectURL(r);if(!window.open(n,"_blank")){const e=document.createElement("a");return e.href=n,e.target="_blank",e.rel="noopener noreferrer",document.body.appendChild(e),e.click(),document.body.removeChild(e),void setTimeout(()=>{try{URL.revokeObjectURL(n)}catch(e){}},2e3)}setTimeout(()=>{try{URL.revokeObjectURL(n)}catch(e){}},2e3)}catch(t){console.error("View receipt error",t),Ts.error("Erreur lors de l'affichage du re\xe7u")}})(e),className:"text-gray-600 hover:text-gray-900 transition-colors",title:"Voir re\xe7u",children:(0,ju.jsx)(Hu,{className:"h-5 w-5"})}),(0,ju.jsx)("button",{onClick:()=>(e=>{try{const t='<!DOCTYPE html>\n        <html lang="fr">\n          <head>\n            <meta charset="utf-8" />\n            <meta name="viewport" content="width=device-width, initial-scale=1" />\n            <title>Re\xe7u - '.concat(e.reference||"",'</title>\n            <style>\n              body { font-family: Arial, sans-serif; padding: 20px; }\n              .header { text-align: center; margin-bottom: 20px }\n              .line { display:flex; justify-content:space-between; margin:6px 0 }\n              .muted { color: #666; font-size: 0.9rem }\n              @media print { .no-print { display: none; } }\n            </style>\n            <script>\n              window.addEventListener(\'load\', function(){\n                try { window.print(); } catch(e) {}\n                setTimeout(function(){ try { window.close(); } catch(e) {} }, 300);\n              });\n            <\/script>\n          </head>\n          <body>\n            <div class="header">\n              <h2>Re\xe7u de transaction</h2>\n              <div class="muted">R\xe9f\xe9rence: ').concat(e.reference||"\u2014",'</div>\n            </div>\n            <div class="line"><div>Date/Heure</div><div>').concat(new Date(e.transactionDate).toLocaleString("fr-FR"),'</div></div>\n            <div class="line"><div>Compte</div><div>').concat(e.account||"\u2014",'</div></div>\n            <div class="line"><div>Par</div><div>').concat(e.performedBy||"\u2014",'</div></div>\n            <div class="line"><div>Type</div><div>').concat("DEPOSIT"===Q(e.transactionType)?"D\xe9p\xf4t":"WITHDRAWAL"===Q(e.transactionType)?"Retrait":e.transactionType||"\u2014",'</div></div>\n            <div class="line"><div>Montant</div><div>').concat("DEPOSIT"===Q(e.transactionType)?"+":"WITHDRAWAL"===Q(e.transactionType)?"-":"").concat(new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.amount)," ").concat(e.currency,'</div></div>\n            <div class="line"><div>Solde Avant</div><div>').concat(null!=e.balanceBefore?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.balanceBefore):"\u2014"," ").concat(e.currency,'</div></div>\n            <div class="line"><div>Solde Apr\xe8s</div><div>').concat(null!=e.balanceAfter?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.balanceAfter):"\u2014"," ").concat(e.currency,'</div></div>\n            <div style="margin-top:20px;" class="muted">Statut: ').concat((()=>{const t=X(e.status),r=le(e,t);return Y(r)})(),'</div>\n            <div style="margin-top:40px; font-size:0.9rem;" class="muted">Imprim\xe9 le ').concat((new Date).toLocaleString("fr-FR"),'</div>\n            <div class="no-print" style="margin-top:24px; text-align:center; color:#666">Cette fen\xeatre se fermera apr\xe8s l\'impression.</div>\n          </body>\n        </html>'),r=new Blob([t],{type:"text/html"}),n=URL.createObjectURL(r);if(window.open(n,"_blank"))return void setTimeout(()=>{try{URL.revokeObjectURL(n)}catch(e){}},2e3);const s=document.createElement("iframe");s.style.position="fixed",s.style.right="0",s.style.bottom="0",s.style.width="0",s.style.height="0",s.style.border="0",s.src=n;const a=()=>{try{document.body.removeChild(s)}catch(e){}try{URL.revokeObjectURL(n)}catch(t){}};s.onload=()=>{try{const e=s.contentWindow;e&&(e.focus(),e.print())}catch(e){}setTimeout(a,1e3)},document.body.appendChild(s)}catch(t){console.error("Print error",t),Ts.error("Erreur lors de la pr\xe9paration du re\xe7u")}})(e),className:"text-gray-600 hover:text-gray-900 transition-colors",title:"Imprimer re\xe7u",children:(0,ju.jsx)(Fp,{className:"h-5 w-5"})}),("COMPLETED"===X(e.status)||"PENDING"===X(e.status))&&!!e.id&&(0,ju.jsx)("button",{onClick:()=>(async e=>{if(!e.id)return void Ts.error("Identifiant de transaction manquant \u2014 impossible d'annuler depuis cette vue");if(!window.confirm("Confirmer l'annulation de cette transaction ? Cette action peut \xeatre irr\xe9versible."))return;const t=window.prompt("Raison de l'annulation (optionnelle)")||"";try{await Di.cancelCurrentAccountTransaction(String(e.id),t),Ts.success("Transaction annul\xe9e avec succ\xe8s"),l(t=>t.map(t=>t.id===e.id?(0,s.A)((0,s.A)({},t),{},{status:"CANCELLED"}):t)),(n||"").trim()&&(Z(n||void 0),J(n))}catch(Sc){var r,a;console.error("Cancel transaction error",Sc);const t=(null===Sc||void 0===Sc||null===(r=Sc.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||(null===Sc||void 0===Sc?void 0:Sc.message)||"Impossible d'annuler la transaction via l'API";Ts.error(t)}})(e),className:"text-red-600 hover:text-red-900 transition-colors",title:"Annuler transaction",children:(0,ju.jsx)(cm,{className:"h-5 w-5"})}),"CANCELLED"===X(e.status)&&"DEPOSIT"===Q(e.transactionType)&&(0,ju.jsx)("span",{className:"text-gray-400 cursor-default",title:"D\xe9j\xe0 annul\xe9e \u2014 affich\xe9e comme 'Compl\xe9t\xe9' pour l'historique",children:(0,ju.jsx)(Lp,{className:"h-5 w-5"})}),(0,ju.jsx)("button",{className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Voir d\xe9tails",children:(0,ju.jsx)(fi,{className:"h-5 w-5"})})]})})]},e.id||t)):(0,ju.jsx)("tr",{children:(0,ju.jsx)("td",{colSpan:11,className:"px-6 py-6 text-center text-sm text-gray-500",children:t?"Chargement des transactions...":"Aucune transaction trouv\xe9e"})})})]})})}),(0,ju.jsxs)("div",{className:"px-4 py-3 bg-white border-t flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:["Affichage ",0===te?0:Math.min((d-1)*m+1,te)," - ",Math.min(d*m,te)," sur ",te," transactions"]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("select",{value:m,onChange:e=>{h(Number(e.target.value)),u(1)},className:"px-2 py-1 border rounded",children:[10,20,50,100].map(e=>(0,ju.jsxs)("option",{value:e,children:[e," / page"]},e))}),(0,ju.jsx)("button",{onClick:()=>u(Math.max(1,d-1)),disabled:d<=1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Pr\xe9c"}),(0,ju.jsxs)("span",{className:"px-2 text-sm",children:[d," / ",re]}),(0,ju.jsx)("button",{onClick:()=>u(Math.min(re,d+1)),disabled:d>=re,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Suiv"})]})]}),R&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-5 border-b",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Nouvelle Transaction"}),(0,ju.jsx)("button",{onClick:()=>_(!1),className:"p-2 hover:bg-gray-100 rounded",children:"\xd7"})]}),(0,ju.jsx)("div",{className:"p-6 space-y-6",children:(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Num\xe9ro de compte"}),(0,ju.jsx)("input",{ref:I,type:"text",value:P.accountNumber,onChange:e=>O((0,s.A)((0,s.A)({},P),{},{accountNumber:e.target.value})),className:"mt-1 w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"CC-001234"}),(0,ju.jsx)("div",{className:"mt-1 text-xs text-gray-600 min-h-[1.25rem]",children:M?"Recherche du compte\u2026":H?(0,ju.jsxs)("span",{children:["Client: ",(0,ju.jsx)("span",{className:"font-medium text-gray-800",children:H.name}),"number"===typeof H.balance&&H.currency?(0,ju.jsxs)(ju.Fragment,{children:[" ","\u2022 Solde: ",(0,ju.jsx)("span",{className:"font-medium text-gray-800",children:(oe=H.balance,ce=H.currency,"HTG"===ce?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(oe)+" HTG":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(oe))})]}):null,H.status?(0,ju.jsxs)(ju.Fragment,{children:[" ","\u2022 Statut: ",(0,ju.jsx)("span",{className:"uppercase",children:H.status})]}):null]}):L?"Client: ".concat(L):""})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,ju.jsxs)("select",{value:P.type,onChange:e=>O((0,s.A)((0,s.A)({},P),{},{type:e.target.value})),className:"mt-1 w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"DEPOSIT",children:"D\xe9p\xf4t"}),(0,ju.jsx)("option",{value:"WITHDRAWAL",children:"Retrait"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Devise"}),(0,ju.jsxs)("select",{value:P.currency,onChange:e=>O((0,s.A)((0,s.A)({},P),{},{currency:e.target.value})),className:"mt-1 w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"HTG",children:"HTG"}),(0,ju.jsx)("option",{value:"USD",children:"USD"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Montant"}),(0,ju.jsx)("input",{type:"number",inputMode:"decimal",step:"0.01",value:P.amount,onChange:e=>O((0,s.A)((0,s.A)({},P),{},{amount:e.target.value})),className:"mt-1 w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description (optionnel)"}),(0,ju.jsx)("input",{type:"text",value:P.description,onChange:e=>O((0,s.A)((0,s.A)({},P),{},{description:e.target.value})),className:"mt-1 w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Motif de la transaction"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Client pr\xe9sent"}),(0,ju.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,ju.jsx)("input",{id:"client-present",type:"checkbox",checked:P.clientPresent,onChange:e=>O((0,s.A)((0,s.A)({},P),{},{clientPresent:e.target.checked})),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),(0,ju.jsx)("label",{htmlFor:"client-present",className:"text-sm text-gray-700",children:"Oui, client pr\xe9sent"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"M\xe9thode de v\xe9rification"}),(0,ju.jsxs)("select",{value:P.verificationMethod,onChange:e=>O((0,s.A)((0,s.A)({},P),{},{verificationMethod:e.target.value})),className:"mt-1 w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner\u2026"}),(0,ju.jsx)("option",{value:"CIN",children:"CIN"}),(0,ju.jsx)("option",{value:"Passeport",children:"Passeport"}),(0,ju.jsx)("option",{value:"Permis",children:"Permis"}),(0,ju.jsx)("option",{value:"Signature",children:"Signature"}),(0,ju.jsx)("option",{value:"PIN",children:"PIN"}),(0,ju.jsx)("option",{value:"Autre",children:"Autre"})]})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Notes (optionnel)"}),(0,ju.jsx)("textarea",{rows:3,value:P.notes,onChange:e=>O((0,s.A)((0,s.A)({},P),{},{notes:e.target.value})),className:"mt-1 w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ajouter des notes\u2026"})]})]})}),(0,ju.jsxs)("div",{className:"px-6 py-4 border-t flex items-center justify-end gap-3",children:[(0,ju.jsx)("button",{onClick:()=>_(!1),className:"px-4 py-2 rounded-lg border hover:bg-gray-50",children:"Annuler"}),(0,ju.jsx)("button",{onClick:async()=>{var e;const t=Number(P.amount);if(null!==(e=P.accountNumber)&&void 0!==e&&e.trim())if(P.type)if(P.currency)if(!P.amount||isNaN(t)||t<=0)Ts.error("Montant invalide");else try{var r,n;V(!0),await Di.processCurrentAccountTransaction({accountNumber:P.accountNumber.trim(),type:P.type,currency:P.currency,amount:Number(P.amount),description:(null===(r=P.description)||void 0===r?void 0:r.trim())||void 0,clientPresent:P.clientPresent,verificationMethod:P.verificationMethod||void 0,notes:(null===(n=P.notes)||void 0===n?void 0:n.trim())||void 0}),Ts.success("Transaction trait\xe9e avec succ\xe8s"),_(!1),a(P.accountNumber),await Z(P.accountNumber),await J(P.accountNumber)}catch(mn){var s,i;console.error("Process new transaction error",mn);const t=(null===mn||void 0===mn||null===(s=mn.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message)||(null===mn||void 0===mn?void 0:mn.message)||"Erreur lors du traitement";Ts.error(t)}finally{V(!1)}else Ts.error("Devise requise");else Ts.error("Type requis");else Ts.error("Num\xe9ro de compte requis")},disabled:G,className:"px-4 py-2 rounded-lg text-white ".concat(G?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:G?"Traitement\u2026":"Traiter"})]})]})})]});var oe,ce};function Xw(t){let{onClose:r,onSuccess:n,initialCustomer:a}=t;const[i,l]=(0,e.useState)("customer"),[o,c]=(0,e.useState)(""),[d,u]=(0,e.useState)([]),[m,h]=(0,e.useState)(null),[p,x]=(0,e.useState)([]),[f,g]=(0,e.useState)(!1),v=(0,e.useRef)(null),y=(0,e.useRef)(""),b=/^[A-Z]{2}\d{3,}$/,[N,j]=(0,e.useState)({branchId:1,currency:"HTG",initialDeposit:0,minimumBalance:"",dailyWithdrawalLimit:"",monthlyWithdrawalLimit:"",allowOverdraft:!1,overdraftLimit:""});(0,e.useEffect)(()=>{a&&(a.id||a.Id)&&(h(a),l("account"))},[a]);const w=async()=>{if(o&&!(o.trim().length<2))try{g(!0);const e=o.trim().toUpperCase();if(y.current===e)return;y.current=e;const t=await Di.getSavingsCustomers(e);u(t||[])}catch(mn){console.error(mn),Ts.error("Erreur lors de la recherche du client")}finally{g(!1)}};(0,e.useEffect)(()=>{d.length>0&&v.current&&v.current.scrollIntoView({behavior:"smooth",block:"start"})},[d.length]),(0,e.useEffect)(()=>{"customer"===i&&(y.current="")},[i]),(0,e.useEffect)(()=>{if("customer"!==i)return;const e=null===o||void 0===o?void 0:o.trim();if(!e||e.length<2)return;const t=e.toUpperCase(),r=b.test(t)?200:500,n=setTimeout(()=>{y.current!==t&&w()},r);return()=>clearTimeout(n)},[o,i]);(0,e.useEffect)(()=>{"account"===i&&(async()=>{try{const e=(await Di.getAllBranches()||[]).map(e=>({id:e.id||e.Id,name:e.name||e.Name}));x(e),e.length&&!N.branchId&&j(t=>(0,s.A)((0,s.A)({},t),{},{branchId:e[0].id}))}catch(e){}})()},[i]);return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold",children:"Ouvrir un Compte Courant"}),(0,ju.jsx)("p",{className:"text-blue-100 mt-1",children:"customer"===i?"\xc9tape 1: S\xe9lectionner le client":"\xc9tape 2: Configurer le compte"})]}),(0,ju.jsx)("button",{onClick:r,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:"\xd7"})]})}),(0,ju.jsxs)("div",{className:"p-6 md:p-8",children:["customer"===i&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rechercher un client"}),(0,ju.jsxs)("div",{className:"flex gap-2 flex-col sm:flex-row",children:[(0,ju.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),w())},placeholder:"Nom, t\xe9l\xe9phone, code client (ex: TD5765) ou document...",className:"flex-1 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,ju.jsxs)("button",{onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,ju.jsx)(Vu,{className:"h-4 w-4"}),"Chercher"]})]}),f&&(0,ju.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Recherche en cours..."}),!f&&0===d.length&&o.trim().length>=2&&(0,ju.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Aucun client trouv\xe9"})]}),d.length>0&&(0,ju.jsx)("div",{ref:v,className:"space-y-2 max-h-[50vh] overflow-y-auto border border-gray-200 rounded-lg p-2 mt-2",children:d.map(e=>(0,ju.jsx)("div",{onClick:()=>(e=>{h(e)})(e),className:"p-4 border-2 rounded-lg cursor-pointer transition-all ".concat(((null===m||void 0===m?void 0:m.id)||(null===m||void 0===m?void 0:m.Id))===(e.id||e.Id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"),children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:e.fullName||"".concat(e.firstName," ").concat(e.lastName)}),(0,ju.jsx)("p",{className:"text-sm text-gray-500",children:e.primaryPhone||e.phone}),(e.customerCode||e.CustomerCode)&&(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:["Code: ",e.customerCode||e.CustomerCode]}),(0,ju.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[e.documentType,": ",e.documentNumber]})]}),((null===m||void 0===m?void 0:m.id)||(null===m||void 0===m?void 0:m.Id))===(e.id||e.Id)&&(0,ju.jsx)(Ju,{className:"h-6 w-6 text-blue-600"})]})},e.id||e.Id))}),(0,ju.jsx)("div",{className:"flex justify-end pt-4",children:(0,ju.jsx)("button",{onClick:()=>l("account"),disabled:!m,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Continuer"})})]}),"account"===i&&m&&(0,ju.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(null===m||void 0===m||!m.id)&&(null===m||void 0===m||!m.Id))return;if(!N.initialDeposit||Number(N.initialDeposit)<=0)return void Ts.error("Le d\xe9p\xf4t initial doit \xeatre sup\xe9rieur \xe0 0");if(!N.branchId)return void Ts.error("Veuillez s\xe9lectionner une succursale");const t={customerId:m.id||m.Id,currency:N.currency,initialDeposit:Number(N.initialDeposit),branchId:Number(N.branchId)};N.minimumBalance&&(t.minimumBalance=Number(N.minimumBalance)),N.dailyWithdrawalLimit&&(t.dailyWithdrawalLimit=Number(N.dailyWithdrawalLimit)),N.monthlyWithdrawalLimit&&(t.monthlyWithdrawalLimit=Number(N.monthlyWithdrawalLimit)),N.allowOverdraft&&N.overdraftLimit&&(t.overdraftLimit=Number(N.overdraftLimit));try{g(!0),await Di.createCurrentAccount(t),Ts.success("Compte courant ouvert avec succ\xe8s"),n()}catch(Sc){var r,s;console.error(Sc),Ts.error((null===Sc||void 0===Sc||null===(r=Sc.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Erreur lors de l'ouverture du compte")}finally{g(!1)}},className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Client s\xe9lectionn\xe9:"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:m.fullName||"".concat(m.firstName," ").concat(m.lastName)}),(0,ju.jsx)("button",{type:"button",onClick:()=>l("customer"),className:"text-sm text-blue-600 hover:underline mt-1",children:"Changer de client"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Devise"}),(0,ju.jsxs)("select",{value:N.currency,onChange:e=>j((0,s.A)((0,s.A)({},N),{},{currency:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,ju.jsx)("option",{value:"HTG",children:"HTG (Gourdes)"}),(0,ju.jsx)("option",{value:"USD",children:"USD (Dollars)"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Succursale"}),(0,ju.jsx)("select",{value:N.branchId,onChange:e=>j((0,s.A)((0,s.A)({},N),{},{branchId:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:0===p.length?(0,ju.jsxs)("option",{value:N.branchId,children:["#",N.branchId]}):p.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"D\xe9p\xf4t initial (requis)"}),(0,ju.jsx)("input",{type:"number",step:"0.01",min:"0.01",value:N.initialDeposit,onChange:e=>j((0,s.A)((0,s.A)({},N),{},{initialDeposit:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Solde minimum (optionnel)"}),(0,ju.jsx)("input",{type:"number",step:"0.01",min:"0",value:N.minimumBalance,onChange:e=>j((0,s.A)((0,s.A)({},N),{},{minimumBalance:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plafond Retrait Quotidien (opt.)"}),(0,ju.jsx)("input",{type:"number",step:"0.01",min:"0",value:N.dailyWithdrawalLimit,onChange:e=>j((0,s.A)((0,s.A)({},N),{},{dailyWithdrawalLimit:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plafond Retrait Mensuel (opt.)"}),(0,ju.jsx)("input",{type:"number",step:"0.01",min:"0",value:N.monthlyWithdrawalLimit,onChange:e=>j((0,s.A)((0,s.A)({},N),{},{monthlyWithdrawalLimit:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[(0,ju.jsx)("input",{type:"checkbox",checked:N.allowOverdraft,onChange:e=>j((0,s.A)((0,s.A)({},N),{},{allowOverdraft:e.target.checked}))}),"Autoriser le d\xe9couvert"]}),N.allowOverdraft&&(0,ju.jsx)("input",{type:"number",step:"0.01",min:"0",placeholder:"Limite de d\xe9couvert",value:N.overdraftLimit,onChange:e=>j((0,s.A)((0,s.A)({},N),{},{overdraftLimit:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,ju.jsxs)("div",{className:"flex gap-4 pt-6 border-t border-gray-200 mt-6",children:[(0,ju.jsx)("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),(0,ju.jsx)("button",{type:"submit",disabled:f,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:f?"Ouverture...":"Ouvrir le compte"})]})]})]})]})})}const Yw=t=>{let{onClose:r,onSuccess:n}=t;const[a,i]=(0,e.useState)("customer"),[l,o]=(0,e.useState)(!1),[c,d]=(0,e.useState)([]),[u,m]=(0,e.useState)(null),[h,p]=(0,e.useState)({branchId:1,currency:"HTG",initialDeposit:0,minimumBalance:"",dailyWithdrawalLimit:"",monthlyWithdrawalLimit:"",allowOverdraft:!1,overdraftLimit:""});(0,e.useEffect)(()=>{"account"===a&&(async()=>{try{const e=(await Di.getAllBranches()||[]).map(e=>({id:e.id||e.Id,name:e.name||e.Name}));d(e),e.length&&!h.branchId&&p(t=>(0,s.A)((0,s.A)({},t),{},{branchId:e[0].id}))}catch(e){}})()},[a]);const x=e=>{var t,r;const n=e=>{var t;if("number"===typeof e)return e;return null!==(t={CIN:0,PASSPORT:1,DRIVING_LICENSE:2,BIRTH_CERTIFICATE:3}[String(e).toUpperCase()])&&void 0!==t?t:0},s={isBusiness:!!e.isBusiness,street:e.street,commune:e.commune,department:e.department,postalCode:e.postalAddress||e.postalCode||void 0,primaryPhone:e.primaryPhone,secondaryPhone:e.secondaryPhone||void 0,email:e.email||void 0,emergencyContactName:e.emergencyContactName||(null===(t=e.emergencyContact)||void 0===t?void 0:t.name)||void 0,emergencyContactPhone:e.emergencyContactPhone||(null===(r=e.emergencyContact)||void 0===r?void 0:r.phone)||void 0,documentType:n(e.documentType),documentNumber:e.documentNumber,issuedDate:e.issuedDate,expiryDate:e.expiryDate||void 0,issuingAuthority:e.issuingAuthority,occupation:e.occupation||void 0,employerName:e.employerName||void 0,workAddress:e.workAddress||void 0,incomeSource:e.incomeSource||void 0,monthlyIncome:e.monthlyIncome?Number(e.monthlyIncome):void 0,birthPlace:e.birthPlace||void 0,nationality:e.nationality||void 0,personalNif:e.nif||void 0,maritalStatus:e.maritalStatus||void 0,numberOfDependents:e.numberOfDependents?Number(e.numberOfDependents):void 0,educationLevel:e.educationLevel||void 0,acceptTerms:!!e.acceptTerms,signaturePlace:e.signaturePlace||void 0,signatureDate:e.signatureDate||void 0,referencePersonName:e.referencePerson||void 0,referencePersonPhone:void 0};return e.isBusiness?(s.companyName=e.companyName||"",s.legalForm=e.legalForm||"",s.tradeRegisterNumber=e.businessRegistrationNumber||void 0,s.taxId=e.companyNif||void 0,s.headOfficeAddress=e.headOfficeAddress||void 0,s.companyPhone=e.companyPhone||void 0,s.companyEmail=e.companyEmail||void 0,s.representativeFirstName=e.legalRepresentativeName||void 0,s.representativeLastName=e.companyName||void 0,s.representativeTitle=e.legalRepresentativeTitle||void 0,s.representativeDocumentType=e.legalRepresentativeDocumentType?n(e.legalRepresentativeDocumentType):void 0,s.representativeDocumentNumber=e.legalRepresentativeDocumentNumber||void 0,s.firstName=e.companyName||"Entreprise",s.lastName=e.legalForm||"Soci\xe9t\xe9",s.dateOfBirth="1900-01-01",s.gender=0):(s.firstName=e.firstName,s.lastName=e.lastName,s.dateOfBirth=e.dateOfBirth,s.gender=(e=>"F"===String(e).toUpperCase()?1:0)(e.gender)),s};return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold",children:"Nouveau Client + Compte Courant"}),(0,ju.jsx)("p",{className:"text-blue-100 mt-1",children:"customer"===a?"\xc9tape 1: Cr\xe9er le client":"\xc9tape 2: Configurer le compte"})]}),(0,ju.jsx)("button",{onClick:r,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:"\xd7"})]})}),(0,ju.jsxs)("div",{className:"p-6 md:p-8",children:["customer"===a&&(0,ju.jsx)(Bm,{onSubmit:async e=>{o(!0);try{const t=x(e),r=await Di.createSavingsCustomer(t);return m(r),Ts.success("Client cr\xe9\xe9 avec succ\xe8s"),i("account"),r}catch(Sc){var t,r;throw console.error("Erreur cr\xe9ation client:",Sc),Ts.error((null===Sc||void 0===Sc||null===(t=Sc.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Erreur lors de la cr\xe9ation du client"),Sc}finally{o(!1)}},onCancel:r,isLoading:l}),"account"===a&&(0,ju.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(null===u||void 0===u||!u.id)&&(null===u||void 0===u||!u.Id))return void Ts.error("Client invalide");if(!h.initialDeposit||Number(h.initialDeposit)<=0)return void Ts.error("Le d\xe9p\xf4t initial doit \xeatre sup\xe9rieur \xe0 0");if(!h.branchId)return void Ts.error("Veuillez s\xe9lectionner une succursale");const t={customerId:u.id||u.Id,currency:h.currency,initialDeposit:Number(h.initialDeposit),branchId:Number(h.branchId)};h.minimumBalance&&(t.minimumBalance=Number(h.minimumBalance)),h.dailyWithdrawalLimit&&(t.dailyWithdrawalLimit=Number(h.dailyWithdrawalLimit)),h.monthlyWithdrawalLimit&&(t.monthlyWithdrawalLimit=Number(h.monthlyWithdrawalLimit)),h.allowOverdraft&&h.overdraftLimit&&(t.overdraftLimit=Number(h.overdraftLimit)),o(!0);try{await Di.createCurrentAccount(t),n()}catch(Sc){var r,s;console.error("Erreur ouverture compte courant:",Sc),Ts.error((null===Sc||void 0===Sc||null===(r=Sc.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Erreur lors de l'ouverture du compte")}finally{o(!1)}},className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Succursale"}),(0,ju.jsx)("select",{value:h.branchId,onChange:e=>p((0,s.A)((0,s.A)({},h),{},{branchId:Number(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:c.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Devise"}),(0,ju.jsxs)("select",{value:h.currency,onChange:e=>p((0,s.A)((0,s.A)({},h),{},{currency:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"HTG",children:"HTG"}),(0,ju.jsx)("option",{value:"USD",children:"USD"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"D\xe9p\xf4t initial"}),(0,ju.jsx)("input",{type:"number",min:0,value:h.initialDeposit,onChange:e=>p((0,s.A)((0,s.A)({},h),{},{initialDeposit:Number(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Solde minimum (optionnel)"}),(0,ju.jsx)("input",{type:"number",min:0,value:h.minimumBalance,onChange:e=>p((0,s.A)((0,s.A)({},h),{},{minimumBalance:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Limite retrait journalier (opt.)"}),(0,ju.jsx)("input",{type:"number",min:0,value:h.dailyWithdrawalLimit,onChange:e=>p((0,s.A)((0,s.A)({},h),{},{dailyWithdrawalLimit:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Limite retrait mensuel (opt.)"}),(0,ju.jsx)("input",{type:"number",min:0,value:h.monthlyWithdrawalLimit,onChange:e=>p((0,s.A)((0,s.A)({},h),{},{monthlyWithdrawalLimit:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[(0,ju.jsx)("input",{type:"checkbox",checked:h.allowOverdraft,onChange:e=>p((0,s.A)((0,s.A)({},h),{},{allowOverdraft:e.target.checked}))}),"Autoriser le d\xe9couvert"]}),h.allowOverdraft&&(0,ju.jsx)("input",{type:"number",min:0,placeholder:"Limite de d\xe9couvert",value:h.overdraftLimit,onChange:e=>p((0,s.A)((0,s.A)({},h),{},{overdraftLimit:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,ju.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ju.jsx)("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),(0,ju.jsx)("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:l?"Ouverture...":"Ouvrir le compte"})]})]})]})]})})},Jw=mi("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Zw=mi("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Qw=()=>{const[t,r]=(0,e.useState)([]),[n,a]=(0,e.useState)(!1),[i,l]=(0,e.useState)(!1),[o,c]=(0,e.useState)(!0),[d,u]=(0,e.useState)([]),[m,h]=(0,e.useState)(""),[p,x]=(0,e.useState)({branchId:"",status:"",dateFrom:"",dateTo:""}),[f,g]=(0,e.useState)(!1),[v,y]=(0,e.useState)(!1),[b,N]=(0,e.useState)(!1),[j,w]=(0,e.useState)(!1),[S,A]=(0,e.useState)(null),[T,C]=(0,e.useState)([]),[E,D]=(0,e.useState)(1),[k,R]=(0,e.useState)(10);(0,e.useEffect)(()=>{c(!0),I().finally(()=>c(!1))},[]),(0,e.useEffect)(()=>{(m&&m.length>=2||0===m.length)&&I()},[m]),(0,e.useEffect)(()=>{let e=!0;return(async()=>{try{const t=await Ei.getAllBranches();if(!e)return;C(Array.isArray(t)?t:[])}catch(t){console.error("Error loading branches:",t),C([])}})(),()=>{e=!1}},[]),(0,e.useEffect)(()=>{c(!0),I().finally(()=>c(!1))},[]),(0,e.useEffect)(()=>{(m&&m.length>=2||0===m.length)&&I()},[m]);const _=e=>{var t,r,n,s,a,i,l,o,c,d,u,m,h,p,x,f,g,v,y,b,N;return{id:e.id||"",customerCode:e.customerCode||void 0,firstName:e.firstName||"",lastName:e.lastName||"",fullName:e.fullName||"".concat(e.firstName||""," ").concat(e.lastName||"").trim(),dateOfBirth:e.dateOfBirth||"",gender:Ap(null!==(t=null!==(r=e.gender)&&void 0!==r?r:e.Gender)&&void 0!==t?t:0),address:{street:(null===(n=e.address)||void 0===n?void 0:n.street)||e.street||"",commune:(null===(s=e.address)||void 0===s?void 0:s.commune)||e.commune||"",department:(null===(a=e.address)||void 0===a?void 0:a.department)||e.department||"",country:(null===(i=e.address)||void 0===i?void 0:i.country)||e.country||"Ha\xefti",postalCode:(null===(l=e.address)||void 0===l?void 0:l.postalCode)||e.postalCode||void 0},contact:{primaryPhone:(null===(o=e.contact)||void 0===o?void 0:o.primaryPhone)||e.primaryPhone||"",secondaryPhone:(null===(c=e.contact)||void 0===c?void 0:c.secondaryPhone)||e.secondaryPhone||void 0,email:(null===(d=e.contact)||void 0===d?void 0:d.email)||e.email||void 0,emergencyContactName:(null===(u=e.contact)||void 0===u?void 0:u.emergencyContactName)||e.emergencyContactName||void 0,emergencyContactPhone:(null===(m=e.contact)||void 0===m?void 0:m.emergencyContactPhone)||e.emergencyContactPhone||void 0},identity:{documentType:null!==(h=null!==(p=null===(x=e.identity)||void 0===x?void 0:x.documentType)&&void 0!==p?p:e.documentType)&&void 0!==h?h:0,documentNumber:(null===(f=e.identity)||void 0===f?void 0:f.documentNumber)||e.documentNumber||"",issuedDate:(null===(g=e.identity)||void 0===g?void 0:g.issuedDate)||e.issuedDate||"",expiryDate:(null===(v=e.identity)||void 0===v?void 0:v.expiryDate)||e.expiryDate||void 0,issuingAuthority:(null===(y=e.identity)||void 0===y?void 0:y.issuingAuthority)||e.issuingAuthority||""},occupation:e.occupation||void 0,monthlyIncome:null!==(b=e.monthlyIncome)&&void 0!==b?b:void 0,signature:e.signature||void 0,documents:e.documents||void 0,createdAt:e.createdAt||"",updatedAt:e.updatedAt||"",isActive:null===(N=e.isActive)||void 0===N||N}},I=async()=>{try{if(l(!0),m&&m.trim().length>=2){const e=await Fm.searchCustomers(m.trim()),t=await Ei.getSavingsAccounts({}),n=new Set(t.map(e=>e.customerId)),s=e.filter(e=>n.has(e.id)).map(_);r(Array.isArray(s)?s:[]),u(t)}else{const e=await Ww.loadCustomersHavingAccounts("SAVINGS"),t=await Ei.getSavingsAccounts({});r(Array.isArray(e)?e:[]),u(t)}}catch(Sc){console.error("Erreur lors du chargement des clients:",Sc),Ts.error("Erreur lors du chargement des clients"),r([]),u([])}finally{l(!1)}},P=e=>{const t=window.open("","_blank");if(!t)return void Ts.error("Veuillez autoriser les pop-ups pour exporter en PDF");const r='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset="UTF-8">\n        <title>Profil Client - '.concat(e.fullName,'</title>\n        <style>\n          body { \n            font-family: Arial, sans-serif; \n            padding: 40px; \n            line-height: 1.6;\n            color: #333;\n          }\n          .header { \n            text-align: center; \n            margin-bottom: 30px; \n            border-bottom: 3px solid #2563eb;\n            padding-bottom: 20px;\n          }\n          .header h1 { \n            color: #2563eb; \n            margin: 0;\n            font-size: 28px;\n          }\n          .header p { \n            color: #666; \n            margin: 5px 0;\n          }\n          .section { \n            margin-bottom: 25px; \n            page-break-inside: avoid;\n          }\n          .section-title { \n            background: #2563eb; \n            color: white; \n            padding: 8px 12px; \n            margin-bottom: 15px;\n            font-weight: bold;\n            font-size: 16px;\n          }\n          .info-grid { \n            display: grid; \n            grid-template-columns: 1fr 1fr; \n            gap: 15px; \n          }\n          .info-item { \n            padding: 10px; \n            background: #f9fafb;\n            border-left: 3px solid #2563eb;\n          }\n          .info-label { \n            font-weight: bold; \n            color: #555; \n            font-size: 12px;\n            text-transform: uppercase;\n            margin-bottom: 3px;\n          }\n          .info-value { \n            color: #000;\n            font-size: 14px;\n          }\n          .footer { \n            margin-top: 40px; \n            text-align: center; \n            color: #666; \n            font-size: 12px;\n            border-top: 1px solid #ddd;\n            padding-top: 20px;\n          }\n          @media print {\n            body { padding: 20px; }\n            .no-print { display: none; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <h1>PROFIL CLIENT</h1>\n          <p>Kredi Ti Machann - Syst\xe8me de Micro-cr\xe9dit</p>\n          <p>Date d\'\xe9mission: ').concat((new Date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),'</p>\n        </div>\n\n        <div class="section">\n          <div class="section-title">\ud83d\udccb INFORMATIONS PERSONNELLES</div>\n          <div class="info-grid">\n            <div class="info-item">\n              <div class="info-label">Nom complet</div>\n              <div class="info-value">').concat(e.fullName,'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">Date de naissance</div>\n              <div class="info-value">').concat(new Date(e.dateOfBirth).toLocaleDateString("fr-FR"),'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">Genre</div>\n              <div class="info-value">').concat(Tp(e.gender),'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">Code Client</div>\n              <div class="info-value">').concat(e.customerCode||e.id,'</div>\n            </div>\n          </div>\n        </div>\n\n        <div class="section">\n          <div class="section-title">\ud83d\udccd ADRESSE</div>\n          <div class="info-grid">\n            <div class="info-item">\n              <div class="info-label">Adresse</div>\n              <div class="info-value">').concat(e.address.street,'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">Commune</div>\n              <div class="info-value">').concat(e.address.commune,'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">D\xe9partement</div>\n              <div class="info-value">').concat(e.address.department,"</div>\n            </div>\n            ").concat(e.address.postalCode?'\n            <div class="info-item">\n              <div class="info-label">Code postal</div>\n              <div class="info-value">'.concat(e.address.postalCode,"</div>\n            </div>\n            "):"",'\n          </div>\n        </div>\n\n        <div class="section">\n          <div class="section-title">\ud83d\udcde CONTACT</div>\n          <div class="info-grid">\n            <div class="info-item">\n              <div class="info-label">T\xe9l\xe9phone principal</div>\n              <div class="info-value">').concat(e.contact.primaryPhone,"</div>\n            </div>\n            ").concat(e.contact.secondaryPhone?'\n            <div class="info-item">\n              <div class="info-label">T\xe9l\xe9phone secondaire</div>\n              <div class="info-value">'.concat(e.contact.secondaryPhone,"</div>\n            </div>\n            "):"","\n            ").concat(e.contact.email?'\n            <div class="info-item">\n              <div class="info-label">Email</div>\n              <div class="info-value">'.concat(e.contact.email,"</div>\n            </div>\n            "):"","\n            ").concat(e.contact.emergencyContactName?'\n            <div class="info-item">\n              <div class="info-label">Contact d\'urgence</div>\n              <div class="info-value">'.concat(e.contact.emergencyContactName," - ").concat(e.contact.emergencyContactPhone||"","</div>\n            </div>\n            "):"",'\n          </div>\n        </div>\n\n        <div class="section">\n          <div class="section-title">\ud83e\udeaa DOCUMENT D\'IDENTIT\xc9</div>\n          <div class="info-grid">\n            <div class="info-item">\n              <div class="info-label">Type de document</div>\n              <div class="info-value">').concat((e=>{switch(e){case Im.CIN:return"CIN";case Im.Passport:return"Passeport";case Im.DrivingLicense:return"Permis de conduire";default:return"Autre"}})(e.identity.documentType),'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">Num\xe9ro</div>\n              <div class="info-value">').concat(e.identity.documentNumber,'</div>\n            </div>\n            <div class="info-item">\n              <div class="info-label">Date d\'\xe9mission</div>\n              <div class="info-value">').concat(new Date(e.identity.issuedDate).toLocaleDateString("fr-FR"),"</div>\n            </div>\n            ").concat(e.identity.expiryDate?'\n            <div class="info-item">\n              <div class="info-label">Date d\'expiration</div>\n              <div class="info-value">'.concat(new Date(e.identity.expiryDate).toLocaleDateString("fr-FR"),"</div>\n            </div>\n            "):"",'\n            <div class="info-item">\n              <div class="info-label">Autorit\xe9 \xe9mettrice</div>\n              <div class="info-value">').concat(e.identity.issuingAuthority,"</div>\n            </div>\n          </div>\n        </div>\n\n        ").concat(e.occupation||e.monthlyIncome?'\n        <div class="section">\n          <div class="section-title">\ud83d\udcbc INFORMATIONS PROFESSIONNELLES</div>\n          <div class="info-grid">\n            '.concat(e.occupation?'\n            <div class="info-item">\n              <div class="info-label">Profession</div>\n              <div class="info-value">'.concat(e.occupation,"</div>\n            </div>\n            "):"","\n            ").concat(e.monthlyIncome?'\n            <div class="info-item">\n              <div class="info-label">Revenu mensuel</div>\n              <div class="info-value">'.concat(new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD"}).format(e.monthlyIncome).replace("$","HTG "),"</div>\n            </div>\n            "):"","\n          </div>\n        </div>\n        "):"",'\n\n        <div class="footer">\n          <p><strong>Kredi Ti Machann</strong> - Syst\xe8me de Micro-cr\xe9dit pour Ha\xefti</p>\n          <p>Document g\xe9n\xe9r\xe9 automatiquement le ').concat((new Date).toLocaleString("fr-FR"),'</p>\n          <p class="no-print">\n            <button onclick="window.print()" style="\n              background: #2563eb;\n              color: white;\n              padding: 10px 20px;\n              border: none;\n              border-radius: 5px;\n              cursor: pointer;\n              font-size: 14px;\n              margin-top: 10px;\n            ">\ud83d\udda8\ufe0f Imprimer / Enregistrer en PDF</button>\n          </p>\n        </div>\n      </body>\n      </html>\n    ');t.document.write(r),t.document.close(),t.onload=()=>{setTimeout(()=>{t.focus(),Ts.success("Fen\xeatre d'export ouverte - Utilisez Ctrl+P ou le bouton Imprimer")},250)}},O=Array.isArray(t)?t.filter(e=>{if(p.branchId){const t=d.find(t=>t.customerId===e.id);if(!t||t.branchId!==parseInt(p.branchId))return!1}if(p.status&&e.status!==p.status)return!1;if(p.dateFrom||p.dateTo){const t=new Date(e.createdAt||e.identity.issuedDate);if(p.dateFrom){if(t<new Date(p.dateFrom))return!1}if(p.dateTo){const e=new Date(p.dateTo);if(e.setHours(23,59,59,999),t>e)return!1}}return!0}):[],L=O.length,F=Math.max(1,Math.ceil(L/k)),M=O.slice((E-1)*k,E*k);(0,e.useEffect)(()=>{D(1)},[p,m]);return(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Clients \xc9pargnants"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"Rechercher, filtrer et g\xe9rer tous les clients \xe9pargnants"})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-3 mt-4 sm:mt-0",children:[(0,ju.jsxs)("div",{className:"hidden sm:flex items-center gap-2",children:[(0,ju.jsxs)("button",{onClick:()=>(()=>{try{const e=O.map(e=>({id:e.id,customerCode:e.customerCode||"",fullName:e.fullName,phone:e.contact.primaryPhone,email:e.contact.email||"",commune:e.address.commune||"",department:e.address.department||"",status:e.isActive?"Actif":"Inactif",createdAt:e.createdAt||""})),t=(0,Rp.unparse)(e),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download="clients_savings_".concat((new Date).toISOString().slice(0,10),".csv"),s.click(),URL.revokeObjectURL(n)}catch(e){console.error(e),Ts.error("Erreur lors de l'export CSV")}})(),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors flex items-center gap-2",title:"Exporter CSV",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"})," CSV"]}),(0,ju.jsxs)("button",{onClick:()=>(()=>{try{const e=O.map(e=>({ID:e.id,Code:e.customerCode||"",Nom:e.fullName,"T\xe9l\xe9phone":e.contact.primaryPhone,Email:e.contact.email||"",Commune:e.address.commune||"","D\xe9partement":e.address.department||"",Statut:e.isActive?"Actif":"Inactif","Cr\xe9\xe9Le":e.createdAt||""})),t=Aw.json_to_sheet(e),r=Aw.book_new();Aw.book_append_sheet(r,t,"Clients"),hw(r,"clients_savings_".concat((new Date).toISOString().slice(0,10),".xlsx"))}catch(e){console.error(e),Ts.error("Erreur lors de l'export Excel")}})(),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors flex items-center gap-2",title:"Exporter Excel",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"})," XLSX"]}),(0,ju.jsxs)("button",{onClick:()=>(()=>{try{const e=window.open("","_blank");if(!e)return void Ts.error("Veuillez autoriser les pop-ups pour exporter en PDF");const t=O.map(e=>'\n        <tr>\n          <td style="padding:8px;border:1px solid #ddd">'.concat(e.customerCode||e.id,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.fullName,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.contact.primaryPhone,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.contact.email||"",'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.address.commune||"",'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.isActive?"Actif":"Inactif","</td>\n        </tr>\n      ")).join(""),r='\n        <html><head><meta charset="utf-8"><title>Clients \xc9pargnants</title>\n        <style>table{border-collapse:collapse;width:100%;font-family:Arial,Helvetica,sans-serif}th,td{border:1px solid #ddd;padding:8px}th{background:#f3f4f6;text-align:left}</style>\n        </head><body>\n        <h2>Liste Clients \xc9pargnants</h2>\n        <p>Export\xe9 le '.concat((new Date).toLocaleString("fr-FR"),"</p>\n        <table>\n          <thead><tr><th>Code</th><th>Nom</th><th>T\xe9l\xe9phone</th><th>Email</th><th>Commune</th><th>Statut</th></tr></thead>\n          <tbody>").concat(t,'</tbody>\n        </table>\n        <p style="margin-top:16px">Imprimez ou enregistrez en PDF via la fen\xeatre d\'impression.</p>\n        <script>window.onload = ()=>{ setTimeout(()=>{ window.print(); },300); };<\/script>\n        </body></html>\n      ');e.document.write(r),e.document.close(),Ts.success("Fen\xeatre d'export ouverte - utilisez la fonction Imprimer pour sauver en PDF")}catch(e){console.error(e),Ts.error("Erreur lors de l'export PDF")}})(),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors flex items-center gap-2",title:"Exporter PDF",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"})," PDF"]})]}),(0,ju.jsxs)("button",{onClick:()=>y(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,ju.jsx)(mm,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Nouveau Client"})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",{type:"text",placeholder:"Rechercher par nom, t\xe9l\xe9phone, ou num\xe9ro de document...",value:m,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ju.jsxs)("button",{onClick:()=>g(!f),className:"mt-3 flex items-center space-x-2 text-blue-600 hover:text-blue-700 transition-colors text-sm font-medium",children:[(0,ju.jsx)(hm,{className:"h-4 w-4"}),(0,ju.jsx)("span",{children:"Filtres avanc\xe9s"}),f?(0,ju.jsx)(fm,{className:"h-4 w-4"}):(0,ju.jsx)(gm,{className:"h-4 w-4"})]}),f&&(0,ju.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Succursale"}),(0,ju.jsxs)("select",{value:p.branchId,onChange:e=>x((0,s.A)((0,s.A)({},p),{},{branchId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"Toutes les succursales"}),T.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut"}),(0,ju.jsxs)("select",{value:p.status,onChange:e=>x((0,s.A)((0,s.A)({},p),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"Tous les statuts"}),(0,ju.jsx)("option",{value:"ACTIVE",children:"Actif"}),(0,ju.jsx)("option",{value:"INACTIVE",children:"Inactif"}),(0,ju.jsx)("option",{value:"PENDING",children:"En attente"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de d\xe9but"}),(0,ju.jsx)("input",{type:"date",value:p.dateFrom,onChange:e=>x((0,s.A)((0,s.A)({},p),{},{dateFrom:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de fin"}),(0,ju.jsx)("input",{type:"date",value:p.dateTo,onChange:e=>x((0,s.A)((0,s.A)({},p),{},{dateTo:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ju.jsxs)("div",{className:"mt-4 flex items-center space-x-3",children:[(0,ju.jsx)("button",{onClick:()=>x({branchId:"",status:"",dateFrom:"",dateTo:""}),className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"R\xe9initialiser les filtres"}),(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:[L," client",L>1?"s":""," trouv\xe9",L>1?"s":""]})]})]})]}),(0,ju.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"w-full",children:[(0,ju.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Document"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Adresse"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o?(0,ju.jsx)("tr",{children:(0,ju.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center",children:(0,ju.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,ju.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"Chargement des clients avec comptes d'\xe9pargne..."})]})})}):i?Array.from({length:5}).map((e,t)=>(0,ju.jsxs)("tr",{children:[(0,ju.jsxs)("td",{className:"px-6 py-4",children:[(0,ju.jsx)("div",{className:"h-5 w-40 bg-gray-200 rounded animate-pulse"}),(0,ju.jsx)("div",{className:"h-4 w-24 bg-gray-100 rounded mt-2 animate-pulse"})]}),(0,ju.jsxs)("td",{className:"px-6 py-4",children:[(0,ju.jsx)("div",{className:"h-5 w-32 bg-gray-200 rounded animate-pulse"}),(0,ju.jsx)("div",{className:"h-4 w-40 bg-gray-100 rounded mt-2 animate-pulse"})]}),(0,ju.jsx)("td",{className:"px-6 py-4",children:(0,ju.jsx)("div",{className:"h-5 w-28 bg-gray-200 rounded animate-pulse"})}),(0,ju.jsx)("td",{className:"px-6 py-4",children:(0,ju.jsx)("div",{className:"h-5 w-24 bg-gray-200 rounded animate-pulse"})}),(0,ju.jsx)("td",{className:"px-6 py-4",children:(0,ju.jsx)("div",{className:"h-6 w-16 bg-gray-200 rounded-full animate-pulse"})}),(0,ju.jsx)("td",{className:"px-6 py-4 text-right",children:(0,ju.jsx)("div",{className:"h-8 w-24 ml-auto bg-gray-100 rounded animate-pulse"})})]},"skeleton-".concat(t))):0===M.length?(0,ju.jsx)("tr",{children:(0,ju.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center",children:(0,ju.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,ju.jsx)(Ru,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,ju.jsx)("p",{className:"text-gray-500",children:m?"Aucun client trouv\xe9 correspondant \xe0 votre recherche":"Aucun client avec compte d'\xe9pargne trouv\xe9"})]})})}):M.map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ju.jsx)(Ru,{className:"h-5 w-5 text-blue-600"})}),(0,ju.jsxs)("div",{className:"ml-4",children:[(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.fullName}),(0,ju.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.customerCode||e.id]})]})]})}),(0,ju.jsxs)("td",{className:"px-6 py-4",children:[(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:e.contact.primaryPhone}),e.contact.email&&(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:e.contact.email})]}),(0,ju.jsx)("td",{className:"px-6 py-4",children:(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:e.documents&&e.documents.length>0?(0,ju.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,ju.jsxs)("span",{className:"font-medium",children:[e.documents.length," document(s)"]}),(0,ju.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.documents.slice(0,2).map((e,t)=>(0,ju.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded-full",children:e.documentTypeName||e.documentType||"Document"},t)),e.documents.length>2&&(0,ju.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",e.documents.length-2," autres"]})]})]}):(0,ju.jsx)("span",{className:"text-gray-500",children:"Aucun document"})})}),(0,ju.jsxs)("td",{className:"px-6 py-4",children:[(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:e.address.commune}),(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:e.address.department})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.isActive?(0,ju.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Actif"}):(0,ju.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Inactif"})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,ju.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,ju.jsx)("button",{onClick:()=>(async e=>{try{const t=await Fm.getCustomer(e);A(t),N(!0)}catch(Sc){Ts.error("Impossible de charger le client")}})(e.id),className:"text-blue-600 hover:text-blue-900 transition-colors p-2 hover:bg-blue-50 rounded-lg",title:"Modifier",children:(0,ju.jsx)(xm,{className:"h-5 w-5"})}),(0,ju.jsx)("button",{onClick:()=>(async e=>{try{const t=await Fm.getCustomer(e);A(t),w(!0),Ts.success("D\xe9tails du client charg\xe9s")}catch(Sc){Ts.error("Impossible de charger les d\xe9tails")}})(e.id),className:"text-gray-600 hover:text-gray-900 transition-colors p-2 hover:bg-gray-50 rounded-lg",title:"Voir les d\xe9tails",children:(0,ju.jsx)(fi,{className:"h-5 w-5"})}),(0,ju.jsx)("button",{onClick:()=>P(e),className:"text-green-600 hover:text-green-900 transition-colors p-2 hover:bg-green-50 rounded-lg",title:"Exporter PDF",children:(0,ju.jsx)(zu,{className:"h-5 w-5"})})]})})]},e.id))})]})})}),L>0&&(0,ju.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 rounded-lg shadow-sm border border-gray-200",children:[(0,ju.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,ju.jsx)("button",{onClick:()=>D(Math.max(1,E-1)),disabled:1===E,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Pr\xe9c\xe9dent"}),(0,ju.jsx)("button",{onClick:()=>D(Math.min(F,E+1)),disabled:E===F,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Suivant"})]}),(0,ju.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,ju.jsx)("div",{children:(0,ju.jsxs)("p",{className:"text-sm text-gray-700",children:["Affichage de"," ",(0,ju.jsx)("span",{className:"font-medium",children:Math.min((E-1)*k+1,L)})," ","\xe0"," ",(0,ju.jsx)("span",{className:"font-medium",children:Math.min(E*k,L)})," ","sur"," ",(0,ju.jsx)("span",{className:"font-medium",children:L})," ","r\xe9sultats"]})}),(0,ju.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ju.jsx)("label",{htmlFor:"pageSize",className:"text-sm text-gray-700",children:"\xc9l\xe9ments par page:"}),(0,ju.jsxs)("select",{id:"pageSize",value:k,onChange:e=>{R(Number(e.target.value)),D(1)},className:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,ju.jsx)("option",{value:5,children:"5"}),(0,ju.jsx)("option",{value:10,children:"10"}),(0,ju.jsx)("option",{value:25,children:"25"}),(0,ju.jsx)("option",{value:50,children:"50"})]})]}),(0,ju.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ju.jsx)("button",{onClick:()=>D(Math.max(1,E-1)),disabled:1===E,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,ju.jsx)(fm,{className:"h-5 w-5 rotate-90"})}),(0,ju.jsxs)("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:["Page ",E," sur ",F]}),(0,ju.jsx)("button",{onClick:()=>D(Math.min(F,E+1)),disabled:E===F,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,ju.jsx)(gm,{className:"h-5 w-5 rotate-90"})})]})]})]})]}),v&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Cr\xe9er un Nouveau Client"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Formulaire complet de cr\xe9ation de client \xe9pargnant"})]}),(0,ju.jsx)("button",{onClick:()=>y(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,ju.jsx)(vm,{className:"h-5 w-5"})})]}),(0,ju.jsx)(Bm,{onSubmit:async e=>{try{var t,r;const n=e=>({CIN:Im.CIN,PASSPORT:Im.Passport,DRIVING_LICENSE:Im.DrivingLicense,BIRTH_CERTIFICATE:Im.BirthCertificate}[e.toUpperCase()]||Im.CIN),a=(0,s.A)({isBusiness:e.isBusiness||!1,firstName:e.firstName,lastName:e.lastName,dateOfBirth:e.dateOfBirth,gender:Ap(e.gender),street:e.street,commune:e.commune,department:e.department,postalCode:e.postalCode||void 0,primaryPhone:e.primaryPhone,secondaryPhone:e.secondaryPhone||void 0,email:e.email||void 0,emergencyContactName:(null===(t=e.emergencyContact)||void 0===t?void 0:t.name)||void 0,emergencyContactPhone:(null===(r=e.emergencyContact)||void 0===r?void 0:r.phone)||void 0,documentType:n(e.documentType),documentNumber:e.documentNumber,issuedDate:e.issuedDate,expiryDate:e.expiryDate||void 0,issuingAuthority:e.issuingAuthority,occupation:e.occupation||void 0,monthlyIncome:e.monthlyIncome?parseFloat(e.monthlyIncome):void 0},e.isBusiness&&{companyName:e.companyName,tradeRegisterNumber:e.tradeRegisterNumber,taxId:e.taxId,legalRepresentativeFirstName:e.legalRepresentativeFirstName,legalRepresentativeLastName:e.legalRepresentativeLastName}),o=await Fm.createCustomer(a),c=o.id;if(e.uploadedFiles)try{if(e.uploadedFiles.photo&&(await Fm.uploadFile(e.uploadedFiles.photo,c,"photo"),console.log("Photo uploaded successfully")),e.uploadedFiles.idDocument&&(await Fm.uploadDocument(c,e.uploadedFiles.idDocument,0,"Pi\xe8ce d'identit\xe9","Document d'identit\xe9 du client"),console.log("ID document uploaded successfully")),e.uploadedFiles.proofOfResidence&&(await Fm.uploadDocument(c,e.uploadedFiles.proofOfResidence,1,"Justificatif de domicile","Preuve de r\xe9sidence"),console.log("Proof of residence uploaded successfully")),e.uploadedFiles.businessRegistrationDocument&&(await Fm.uploadDocument(c,e.uploadedFiles.businessRegistrationDocument,4,"Registre de commerce","Extrait du registre de commerce"),console.log("Business registration document uploaded successfully")),e.uploadedFiles.companyProofOfAddress&&(await Fm.uploadDocument(c,e.uploadedFiles.companyProofOfAddress,1,"Justificatif domicile soci\xe9t\xe9","Preuve d'adresse de l'entreprise"),console.log("Company proof of address uploaded successfully")),e.uploadedFiles.fundsOriginDeclaration&&(await Fm.uploadDocument(c,e.uploadedFiles.fundsOriginDeclaration,4,"D\xe9claration origine fonds","D\xe9claration d'origine des fonds"),console.log("Funds origin declaration uploaded successfully")),e.uploadedFiles.otherDocuments&&e.uploadedFiles.otherDocuments.length>0){for(let t=0;t<e.uploadedFiles.otherDocuments.length;t++){const r=e.uploadedFiles.otherDocuments[t];await Fm.uploadDocument(c,r,4,"Document suppl\xe9mentaire ".concat(t+1),"Document suppl\xe9mentaire")}console.log("Other documents uploaded successfully")}}catch(i){console.error("Error uploading files:",i),Ts.error("Client cr\xe9\xe9 mais erreur lors de l'upload des fichiers")}if(e.signature)try{await Fm.saveSignature(c,e.signature),console.log("Signature saved successfully")}catch(l){console.error("Error saving signature:",l),Ts.error("Client cr\xe9\xe9 mais erreur lors de la sauvegarde de la signature")}return Ts.success("Client ".concat(o.fullName," cr\xe9\xe9 avec succ\xe8s!")),y(!1),await I(),o}catch(Sc){var n,a;console.error("Erreur lors de la cr\xe9ation du client:",Sc);const t=(null===(n=Sc.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)||Sc.message||"Erreur lors de la cr\xe9ation du client";throw Ts.error(t),Sc}},onCancel:()=>y(!1)})]})}),b&&S&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Modifier Client"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:S.fullName})]}),(0,ju.jsx)("button",{onClick:()=>{N(!1),A(null)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,ju.jsx)(vm,{className:"h-5 w-5"})})]}),(0,ju.jsx)(kp,{customer:S,onSubmit:async e=>{if(S)try{var t,r;const i=e=>({CIN:Im.CIN,PASSPORT:Im.Passport,DRIVING_LICENSE:Im.DrivingLicense,BIRTH_CERTIFICATE:Im.BirthCertificate}[e.toUpperCase()]||Im.CIN),l=(0,s.A)({isBusiness:e.isBusiness||!1,firstName:e.firstName,lastName:e.lastName,dateOfBirth:e.dateOfBirth,gender:Ap(e.gender),street:e.street,commune:e.commune,department:e.department,postalCode:e.postalCode||void 0,primaryPhone:e.primaryPhone,secondaryPhone:e.secondaryPhone||void 0,email:e.email||void 0,emergencyContactName:(null===(t=e.emergencyContact)||void 0===t?void 0:t.name)||void 0,emergencyContactPhone:(null===(r=e.emergencyContact)||void 0===r?void 0:r.phone)||void 0,documentType:i(e.documentType),documentNumber:e.documentNumber,issuedDate:e.issuedDate,expiryDate:e.expiryDate||void 0,issuingAuthority:e.issuingAuthority,occupation:e.occupation||void 0,monthlyIncome:e.monthlyIncome?parseFloat(e.monthlyIncome):void 0},e.isBusiness&&{companyName:e.companyName,tradeRegisterNumber:e.tradeRegisterNumber,taxId:e.taxId,legalRepresentativeFirstName:e.legalRepresentativeFirstName,legalRepresentativeLastName:e.legalRepresentativeLastName});if(await Fm.updateCustomer(S.id,l),e.uploadedFiles)try{if(e.uploadedFiles.photo&&(await Fm.uploadFile(e.uploadedFiles.photo,S.id,"photo"),console.log("Photo uploaded successfully")),e.uploadedFiles.idDocument&&(await Fm.uploadDocument(S.id,e.uploadedFiles.idDocument,0,"Pi\xe8ce d'identit\xe9","Document d'identit\xe9 du client"),console.log("ID document uploaded successfully")),e.uploadedFiles.proofOfResidence&&(await Fm.uploadDocument(S.id,e.uploadedFiles.proofOfResidence,1,"Justificatif de domicile","Preuve de r\xe9sidence"),console.log("Proof of residence uploaded successfully")),e.uploadedFiles.businessRegistrationDocument&&(await Fm.uploadDocument(S.id,e.uploadedFiles.businessRegistrationDocument,4,"Registre de commerce","Extrait du registre de commerce"),console.log("Business registration document uploaded successfully")),e.uploadedFiles.companyProofOfAddress&&(await Fm.uploadDocument(S.id,e.uploadedFiles.companyProofOfAddress,1,"Justificatif domicile soci\xe9t\xe9","Preuve d'adresse de l'entreprise"),console.log("Company proof of address uploaded successfully")),e.uploadedFiles.fundsOriginDeclaration&&(await Fm.uploadDocument(S.id,e.uploadedFiles.fundsOriginDeclaration,4,"D\xe9claration origine fonds","D\xe9claration d'origine des fonds"),console.log("Funds origin declaration uploaded successfully")),e.uploadedFiles.otherDocuments&&e.uploadedFiles.otherDocuments.length>0){for(let t=0;t<e.uploadedFiles.otherDocuments.length;t++){const r=e.uploadedFiles.otherDocuments[t];await Fm.uploadDocument(S.id,r,4,"Document suppl\xe9mentaire ".concat(t+1),"Document suppl\xe9mentaire")}console.log("Other documents uploaded successfully")}}catch(n){console.error("Error uploading files:",n),Ts.error("Client modifi\xe9 mais erreur lors de l'upload des fichiers")}if(e.signature)try{await Fm.saveSignature(S.id,e.signature),console.log("Signature saved successfully")}catch(a){console.error("Error saving signature:",a),Ts.error("Client modifi\xe9 mais erreur lors de la sauvegarde de la signature")}Ts.success("Client modifi\xe9 avec succ\xe8s!"),N(!1),A(null),await I()}catch(Sc){console.error("Erreur lors de la modification du client:",Sc);const t=Sc.message||"Erreur lors de la modification du client";Ts.error(t)}},onCancel:()=>{N(!1),A(null)}})]})}),j&&S&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-blue-700",children:[(0,ju.jsxs)("div",{className:"text-white",children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold",children:S.fullName}),(0,ju.jsxs)("p",{className:"text-blue-100 mt-1",children:["Code Client: ",S.customerCode||S.id]})]}),(0,ju.jsx)("button",{onClick:()=>{w(!1),A(null)},className:"p-2 hover:bg-blue-500 rounded-lg transition-colors text-white",children:(0,ju.jsx)(vm,{className:"h-6 w-6"})})]}),(0,ju.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(ym,{className:"h-5 w-5 mr-2 text-blue-600"}),"Informations Personnelles"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Code Client"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:S.customerCode||S.id})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Pr\xe9nom"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:S.firstName})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Nom"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:S.lastName})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Date de Naissance"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:new Date(S.dateOfBirth).toLocaleDateString("fr-FR")})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Genre"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:Tp(S.gender)})]}),S.occupation&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Profession"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:S.occupation})]}),S.monthlyIncome&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Revenu Mensuel"}),(0,ju.jsxs)("p",{className:"text-gray-900 font-medium mt-1",children:[S.monthlyIncome.toLocaleString("fr-FR")," HTG"]})]})]})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Jw,{className:"h-5 w-5 mr-2 text-blue-600"}),"Adresse"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Rue"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:S.address.street})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Commune"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:S.address.commune})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"D\xe9partement"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:S.address.department})]}),S.address.postalCode&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Code Postal"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:S.address.postalCode})]})]})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Zw,{className:"h-5 w-5 mr-2 text-blue-600"}),"Contact"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"T\xe9l\xe9phone Principal"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:S.contact.primaryPhone})]}),S.contact.secondaryPhone&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"T\xe9l\xe9phone Secondaire"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:S.contact.secondaryPhone})]}),S.contact.email&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:S.contact.email})]}),S.contact.emergencyContactName&&(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Contact d'Urgence"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:S.contact.emergencyContactName})]}),S.contact.emergencyContactPhone&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"T\xe9l\xe9phone d'Urgence"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:S.contact.emergencyContactPhone})]})]})]})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Hu,{className:"h-5 w-5 mr-2 text-blue-600"}),"Document d'Identit\xe9"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Type de Document"}),(0,ju.jsxs)("p",{className:"text-gray-900 font-medium mt-1",children:[S.identity.documentType===Im.CIN&&"CIN",S.identity.documentType===Im.Passport&&"Passeport",S.identity.documentType===Im.DrivingLicense&&"Permis de conduire"]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Num\xe9ro"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:S.identity.documentNumber})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Date d'\xc9mission"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:new Date(S.identity.issuedDate).toLocaleDateString("fr-FR")})]}),S.identity.expiryDate&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Date d'Expiration"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:new Date(S.identity.expiryDate).toLocaleDateString("fr-FR")})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Autorit\xe9 \xc9mettrice"}),(0,ju.jsx)("p",{className:"text-gray-900 font-medium mt-1",children:S.identity.issuingAuthority})]})]})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Statut du Compte"}),(0,ju.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ju.jsx)("span",{className:"px-4 py-2 rounded-full font-semibold ".concat(S.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:S.isActive?"Actif":"Inactif"}),(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:["Cr\xe9\xe9 le ",new Date(S.createdAt).toLocaleDateString("fr-FR")]})]})]})]}),(0,ju.jsxs)("div",{className:"border-t border-gray-200 p-6 bg-gray-50 flex justify-between",children:[(0,ju.jsxs)("button",{onClick:()=>P(S),className:"flex items-center space-x-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,ju.jsx)(zu,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Exporter en PDF"})]}),(0,ju.jsxs)("div",{className:"flex space-x-3",children:[(0,ju.jsxs)("button",{onClick:()=>{w(!1),A(S),N(!0)},className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,ju.jsx)(xm,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Modifier"})]}),(0,ju.jsx)("button",{onClick:()=>{w(!1),A(null)},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Fermer"})]})]})]})})]})},eS=mi("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),tS=mi("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),rS=mi("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),nS=mi("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),sS=mi("FileDown",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),aS=mi("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);function iS(e,t,r,n,s){n=n||{};var a=s.internal.scaleFactor,i=s.internal.getFontSize()/a,l=i*(s.getLineHeightFactor?s.getLineHeightFactor():1.15),o="",c=1;if("middle"!==n.valign&&"bottom"!==n.valign&&"center"!==n.halign&&"right"!==n.halign||(c=(o="string"===typeof e?e.split(/\r\n|\r|\n/g):e).length||1),r+=i*(2-1.15),"middle"===n.valign?r-=c/2*l:"bottom"===n.valign&&(r-=c*l),"center"===n.halign||"right"===n.halign){var d=i;if("center"===n.halign&&(d*=.5),o&&c>=1){for(var u=0;u<o.length;u++)s.text(o[u],t-s.getStringUnitWidth(o[u])*d,r),r+=l;return s}t-=s.getStringUnitWidth(e)*d}return"justify"===n.halign?s.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):s.text(e,t,r),s}var lS={},oS=function(){function e(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(e,t){void 0===t&&(t=null),t?t.__autoTableDocumentDefaults=e:lS=e},e.unifyColor=function(e){return Array.isArray(e)?e:"number"===typeof e?[e,e,e]:"string"===typeof e?[e]:null},e.prototype.applyStyles=function(t,r){var n,s,a;void 0===r&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),l=i.fontStyle,o=i.fontName;if(t.font&&(o=t.font),t.fontStyle){l=t.fontStyle;var c=this.getFontList()[o];c&&-1===c.indexOf(l)&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),l=c[0])}if(this.jsPDFDocument.setFont(o,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),(d=e.unifyColor(t.textColor))&&(s=this.jsPDFDocument).setTextColor.apply(s,d),(d=e.unifyColor(t.lineColor))&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),"number"===typeof t.lineWidth&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},e.prototype.rect=function(e,t,r,n,s){return this.jsPDFDocument.rect(e,t,r,n,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return lS||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return null==e.width&&(e={width:e.getWidth(),height:e.getHeight()}),e},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),cS=function(e,t){return cS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},cS(e,t)};function dS(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}cS(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}"function"===typeof SuppressedError&&SuppressedError;var uS=function(e){function t(t){var r=e.call(this)||this;return r._element=t,r}return dS(t,e),t}(Array);function mS(e,t,r){r.applyStyles(t,!0);var n=(Array.isArray(e)?e:[e]).map(function(e){return r.getTextWidth(e)}).reduce(function(e,t){return Math.max(e,t)},0);return n}function hS(e,t,r,n){var s=t.settings.tableLineWidth,a=t.settings.tableLineColor;e.applyStyles({lineWidth:s,lineColor:a});var i=pS(s,!1);i&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,i)}function pS(e,t){var r=e>0,n=t||0===t;return r&&n?"DF":r?"S":n?"F":null}function xS(e,t){var r,n,s,a;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(3===e.length)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(2===e.length)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e=1===e.length?e[0]:t}return"object"===typeof e?("number"===typeof e.vertical&&(e.top=e.vertical,e.bottom=e.vertical),"number"===typeof e.horizontal&&(e.right=e.horizontal,e.left=e.horizontal),{left:null!==(r=e.left)&&void 0!==r?r:t,top:null!==(n=e.top)&&void 0!==n?n:t,right:null!==(s=e.right)&&void 0!==s?s:t,bottom:null!==(a=e.bottom)&&void 0!==a?a:t}):("number"!==typeof e&&(e=t),{top:e,right:e,bottom:e,left:e})}function fS(e,t){var r=xS(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function gS(e,t,r,n,s){var a={},i=96/72,l=vS(t,function(e){return s.getComputedStyle(e).backgroundColor});null!=l&&(a.fillColor=l);var o=vS(t,function(e){return s.getComputedStyle(e).color});null!=o&&(a.textColor=o);var c=function(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),s=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,a=r.map(function(e){return parseInt(e||"0")/n}),i=xS(a,0);s>i.top&&(i.top=s);s>i.bottom&&(i.bottom=s);return i}(n,r);c&&(a.cellPadding=c);var d="borderTopColor",u=i*r,m=n.borderTopWidth;if(n.borderBottomWidth===m&&n.borderRightWidth===m&&n.borderLeftWidth===m){var h=(parseFloat(m)||0)/u;h&&(a.lineWidth=h)}else a.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/u,right:(parseFloat(n.borderRightWidth)||0)/u,bottom:(parseFloat(n.borderBottomWidth)||0)/u,left:(parseFloat(n.borderLeftWidth)||0)/u},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var p=vS(t,function(e){return s.getComputedStyle(e)[d]});null!=p&&(a.lineColor=p);var x=["left","right","center","justify"];-1!==x.indexOf(n.textAlign)&&(a.halign=n.textAlign),-1!==(x=["middle","bottom","top"]).indexOf(n.verticalAlign)&&(a.valign=n.verticalAlign);var f=parseInt(n.fontSize||"");isNaN(f)||(a.fontSize=f/i);var g=function(e){var t="";("bold"===e.fontWeight||"bolder"===e.fontWeight||parseInt(e.fontWeight)>=700)&&(t="bold");"italic"!==e.fontStyle&&"oblique"!==e.fontStyle||(t+="italic");return t}(n);g&&(a.fontStyle=g);var v=(n.fontFamily||"").toLowerCase();return-1!==e.indexOf(v)&&(a.font=v),a}function vS(e,t){var r=yS(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var s=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])];return 0===parseInt(n[4])||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function yS(e,t){var r=t(e);return"rgba(0, 0, 0, 0)"===r||"transparent"===r||"initial"===r||"inherit"===r?null==e.parentElement?null:yS(e.parentElement,t):r}function bS(e,t,r,n,s){var a,i,l;void 0===n&&(n=!1),void 0===s&&(s=!1),l="string"===typeof t?r.document.querySelector(t):t;var o=Object.keys(e.getFontList()),c=e.scaleFactor(),d=[],u=[],m=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:u,foot:m};for(var h=0;h<l.rows.length;h++){var p=l.rows[h],x=null===(i=null===(a=null===p||void 0===p?void 0:p.parentElement)||void 0===a?void 0:a.tagName)||void 0===i?void 0:i.toLowerCase(),f=NS(o,c,r,p,n,s);f&&("thead"===x?d.push(f):"tfoot"===x?m.push(f):u.push(f))}return{head:d,body:u,foot:m}}function NS(e,t,r,n,s,a){for(var i=new uS(n),l=0;l<n.cells.length;l++){var o=n.cells[l],c=r.getComputedStyle(o);if(s||"none"!==c.display){var d=void 0;a&&(d=gS(e,o,t,c,r)),i.push({rowSpan:o.rowSpan,colSpan:o.colSpan,styles:d,_element:o,content:jS(o)})}}var u=r.getComputedStyle(n);if(i.length>0&&(s||"none"!==u.display))return i}function jS(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(e){return e.trim()}).join("\n"),t.innerText||t.textContent||""}function wS(e,t,r,n,s){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),i=1;i<arguments.length;i++){var l=arguments[i];if(null!=l)for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(a[o]=l[o])}return a}function SS(e,t){var r=new oS(e),n=r.getDocumentOptions(),s=r.getGlobalOptions();!function(e,t,r){for(var n=0,s=[e,t,r];n<s.length;n++){var a=s[n];a&&"object"!==typeof a&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&"number"!==typeof a.startY&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}(s,n,t);var a,i=wS({},s,n,t);"undefined"!==typeof window&&(a=window);var l=function(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(s){if("columnStyles"===s){var a=e[s],i=t[s],l=r[s];n.columnStyles=wS({},a,i,l)}else{var o=[e,t,r].map(function(e){return e[s]||{}});n[s]=wS({},o[0],o[1],o[2])}},a=0,i=Object.keys(n);a<i.length;a++){s(i[a])}return n}(s,n,t),o=function(e,t,r){for(var n={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,a=[e,t,r];s<a.length;s++){var i=a[s];i.didParseCell&&n.didParseCell.push(i.didParseCell),i.willDrawCell&&n.willDrawCell.push(i.willDrawCell),i.didDrawCell&&n.didDrawCell.push(i.didDrawCell),i.willDrawPage&&n.willDrawPage.push(i.willDrawPage),i.didDrawPage&&n.didDrawPage.push(i.didDrawPage)}return n}(s,n,t),c=function(e,t){var r,n,s,a,i,l,o,c,d,u,m,h,p,x,f=xS(t.margin,40/e.scaleFactor()),g=null!==(r=function(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),s=e.pageNumber(),a=!1;if(r&&r.startPageNumber){a=r.startPageNumber+r.pageNumber-1===s}if("number"===typeof t)return t;if((null==t||!1===t)&&a&&null!=(null===r||void 0===r?void 0:r.finalY))return r.finalY+20/n;return null}(e,t.startY))&&void 0!==r?r:f.top;p=!0===t.showFoot?"everyPage":!1===t.showFoot?"never":null!==(n=t.showFoot)&&void 0!==n?n:"everyPage";x=!0===t.showHead?"everyPage":!1===t.showHead?"never":null!==(s=t.showHead)&&void 0!==s?s:"everyPage";var v=null!==(a=t.useCss)&&void 0!==a&&a,y=t.theme||(v?"plain":"striped"),b=!!t.horizontalPageBreak,N=null!==(i=t.horizontalPageBreakRepeat)&&void 0!==i?i:null;return{includeHiddenHtml:null!==(l=t.includeHiddenHtml)&&void 0!==l&&l,useCss:v,theme:y,startY:g,margin:f,pageBreak:null!==(o=t.pageBreak)&&void 0!==o?o:"auto",rowPageBreak:null!==(c=t.rowPageBreak)&&void 0!==c?c:"auto",tableWidth:null!==(d=t.tableWidth)&&void 0!==d?d:"auto",showHead:x,showFoot:p,tableLineWidth:null!==(u=t.tableLineWidth)&&void 0!==u?u:0,tableLineColor:null!==(m=t.tableLineColor)&&void 0!==m?m:200,horizontalPageBreak:b,horizontalPageBreakRepeat:N,horizontalPageBreakBehaviour:null!==(h=t.horizontalPageBreakBehaviour)&&void 0!==h?h:"afterAllRows"}}(r,i),d=function(e,t,r){var n=t.head||[],s=t.body||[],a=t.foot||[];if(t.html){var i=t.includeHiddenHtml;if(r){var l=bS(e,t.html,r,i,t.useCss)||{};n=l.head||n,s=l.body||n,a=l.foot||n}else console.error("Cannot parse html in non browser environment")}var o=t.columns||function(e,t,r){var n=e[0]||t[0]||r[0]||[],s=[];return Object.keys(n).filter(function(e){return"_element"!==e}).forEach(function(e){var t,r=1;"object"!==typeof(t=Array.isArray(n)?n[parseInt(e)]:n[e])||Array.isArray(t)||(r=(null===t||void 0===t?void 0:t.colSpan)||1);for(var a=0;a<r;a++){var i={dataKey:Array.isArray(n)?s.length:e+(a>0?"_".concat(a):"")};s.push(i)}}),s}(n,s,a);return{columns:o,head:n,body:s,foot:a}}(r,i,a);return{id:t.tableId,content:d,hooks:o,styles:l,settings:c}}var AS,TS=function(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()},CS=function(e){function t(t,r,n,s,a,i){var l=e.call(this,t,r,i)||this;return l.cell=n,l.row=s,l.column=a,l.section=s.section,l}return dS(t,e),t}(TS),ES=function(){function e(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return e.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},e.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(e,t,r,n,s,a){for(var i=0,l=t;i<l.length;i++){var o=!1===(0,l[i])(new CS(e,this,r,n,s,a));if(r.text=Array.isArray(r.text)?r.text:[r.text],o)return!1}return!0},e.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,n=this.hooks.didDrawPage;r<n.length;r++){(0,n[r])(new TS(e,this,t))}},e.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,n=this.hooks.willDrawPage;r<n.length;r++){(0,n[r])(new TS(e,this,t))}},e.prototype.getWidth=function(e){if("number"===typeof this.settings.tableWidth)return this.settings.tableWidth;if("wrap"===this.settings.tableWidth)return this.columns.reduce(function(e,t){return e+t.wrappedWidth},0);var t=this.settings.margin;return e-t.left-t.right},e}(),DS=function(){function e(e,t,r,n,s){void 0===s&&(s=!1),this.height=0,this.raw=e,e instanceof uS&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=n,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(e,r){var n;return Math.max(e,(null===(n=t.cells[r.index])||void 0===n?void 0:n.height)||0)},0)},e.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(e){var r=t.cells[e.index];return!!r&&r.rowSpan>1}).length>0},e.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},e.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(e,n){var s=r.cells[n.index];if(!s)return 0;var a=t.getLineHeight(s.styles.fontSize),i=s.padding("vertical")+a;return i>e?i:e},0)},e}(),kS=function(){function e(e,t,r){var n;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var s=e;null==e||"object"!==typeof e||Array.isArray(e)?(this.rowSpan=1,this.colSpan=1):(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=null!==(n=e.content)&&void 0!==n?n:e,e._element&&(this.raw=e._element));var a=null!=s?""+s:"";this.text=a.split(/\r\n|\r|\n/g)}return e.prototype.getTextPos=function(){var e,t;if("top"===this.styles.valign)e=this.y+this.padding("top");else if("bottom"===this.styles.valign)e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}if("right"===this.styles.halign)t=this.x+this.width-this.padding("right");else if("center"===this.styles.halign){var n=this.width-this.padding("horizontal");t=this.x+n/2+this.padding("left")}else t=this.x+this.padding("left");return{x:t,y:e}},e.prototype.getContentHeight=function(e,t){void 0===t&&(t=1.15);var r=(Array.isArray(this.text)?this.text.length:1)*(this.styles.fontSize/e*t)+this.padding("vertical");return Math.max(r,this.styles.minCellHeight)},e.prototype.padding=function(e){var t=xS(this.styles.cellPadding,0);return"vertical"===e?t.top+t.bottom:"horizontal"===e?t.left+t.right:t[e]},e}(),RS=function(){function e(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return e.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,n=e.allRows();r<n.length;r++){var s=n[r].cells[this.index];s&&"number"===typeof s.styles.cellWidth&&(t=Math.max(t,s.styles.cellWidth))}return t},e}();function _S(e,t){!function(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,s=fS(e,t);t.allRows().forEach(function(a){for(var i=0,l=t.columns;i<l.length;i++){var o=l[i],c=a.cells[o.index];if(c){var d=t.hooks.didParseCell;t.callCellHooks(e,d,c,a,o,null);var u=c.padding("horizontal");c.contentWidth=mS(c.text,c.styles,e)+u;var m=mS(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,e);if(c.minReadableWidth=m+c.padding("horizontal"),"number"===typeof c.styles.cellWidth)c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if("wrap"===c.styles.cellWidth||!0===n)c.contentWidth>s?(c.minWidth=s,c.wrappedWidth=s):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var h=10/r;c.minWidth=c.styles.minCellWidth||h,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),t.allRows().forEach(function(e){for(var r=0,n=t.columns;r<n.length;r++){var s=n[r],a=e.cells[s.index];if(a&&1===a.colSpan)s.wrappedWidth=Math.max(s.wrappedWidth,a.wrappedWidth),s.minWidth=Math.max(s.minWidth,a.minWidth),s.minReadableWidth=Math.max(s.minReadableWidth,a.minReadableWidth);else{var i=t.styles.columnStyles[s.dataKey]||t.styles.columnStyles[s.index]||{},l=i.cellWidth||i.minCellWidth;l&&"number"===typeof l&&(s.minWidth=l,s.wrappedWidth=l)}a&&(a.colSpan>1&&!s.minWidth&&(s.minWidth=a.minWidth),a.colSpan>1&&!s.wrappedWidth&&(s.wrappedWidth=a.minWidth))}})}(e,t);var r=[],n=0;t.columns.forEach(function(e){var s=e.getMaxCustomCellWidth(t);s?e.width=s:(e.width=e.wrappedWidth,r.push(e)),n+=e.width});var s=t.getWidth(e.pageSize().width)-n;s&&(s=IS(r,s,function(e){return Math.max(e.minReadableWidth,e.minWidth)})),s&&(s=IS(r,s,function(e){return e.minWidth})),s=Math.abs(s),!t.settings.horizontalPageBreak&&s>.1/e.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),function(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],s=null,a=0,i=0,l=0;l<e.columns.length;l++){var o=e.columns[l];if((i-=1)>1&&e.columns[l+1])a+=o.width,delete n.cells[o.index];else if(s){var c=s;delete n.cells[o.index],s=null,c.width=o.width+a}else{if(!(c=n.cells[o.index]))continue;if(i=c.colSpan,a=0,c.colSpan>1){s=c,a+=o.width;continue}c.width=o.width+a}}}(t),function(e,t){for(var r={count:0,height:0},n=0,s=e.allRows();n<s.length;n++){for(var a=s[n],i=0,l=e.columns;i<l.length;i++){var o=l[i],c=a.cells[o.index];if(c){t.applyStyles(c.styles,!0);var d=c.width-c.padding("horizontal");if("linebreak"===c.styles.overflow)c.text=t.splitTextToSize(c.text,d+1/t.scaleFactor(),{fontSize:c.styles.fontSize});else if("ellipsize"===c.styles.overflow)c.text=PS(c.text,d,c.styles,t,"...");else if("hidden"===c.styles.overflow)c.text=PS(c.text,d,c.styles,t,"");else if("function"===typeof c.styles.overflow){var u=c.styles.overflow(c.text,d);c.text="string"===typeof u?[u]:u}c.contentHeight=c.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var m=c.contentHeight/c.rowSpan;c.rowSpan>1&&r.count*r.height<m*c.rowSpan?r={height:m,count:c.rowSpan}:r&&r.count>0&&r.height>m&&(m=r.height),m>a.height&&(a.height=m)}}r.count--}}(t,e),function(e){for(var t={},r=1,n=e.allRows(),s=0;s<n.length;s++)for(var a=n[s],i=0,l=e.columns;i<l.length;i++){var o=l[i],c=t[o.index];if(r>1)r--,delete a.cells[o.index];else if(c)c.cell.height+=a.height,r=c.cell.colSpan,delete a.cells[o.index],c.left--,c.left<=1&&delete t[o.index];else{var d=a.cells[o.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var u=n.length-s,m=d.rowSpan>u?u:d.rowSpan;t[o.index]={cell:d,left:m,row:a}}}}}(t)}function IS(e,t,r){for(var n=t,s=e.reduce(function(e,t){return e+t.wrappedWidth},0),a=0;a<e.length;a++){var i=e[a],l=n*(i.wrappedWidth/s),o=i.width+l,c=r(i),d=o<c?c:o;t-=d-i.width,i.width=d}if(t=Math.round(1e10*t)/1e10){var u=e.filter(function(e){return!(t<0)||e.width>r(e)});u.length&&(t=IS(u,t,r))}return t}function PS(e,t,r,n,s){return e.map(function(e){return function(e,t,r,n,s){var a=1e4*n.scaleFactor();if(t=Math.ceil(t*a)/a,t>=mS(e,r,n))return e;for(;t<mS(e+s,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+s}(e,t,r,n,s)})}function OS(e,t){var r=new oS(e),n=function(e,t){var r=e.content,n=function(e){return e.map(function(e,t){var r,n;return n="object"===typeof e&&null!==(r=e.dataKey)&&void 0!==r?r:t,new RS(n,e,t)})}(r.columns);if(0===r.head.length){(s=FS(n,"head"))&&r.head.push(s)}if(0===r.foot.length){var s;(s=FS(n,"foot"))&&r.foot.push(s)}var a=e.settings.theme,i=e.styles;return{columns:n,head:LS("head",r.head,n,i,a,t),body:LS("body",r.body,n,i,a,t),foot:LS("foot",r.foot,n,i,a,t)}}(t,r.scaleFactor()),s=new ES(t,n);return _S(r,s),r.applyStyles(r.userStyles),s}function LS(e,t,r,n,s,a){var i={};return t.map(function(t,l){for(var o=0,c={},d=0,u=0,m=0,h=r;m<h.length;m++){var p=h[m];if(null==i[p.index]||0===i[p.index].left)if(0===u){var x=void 0,f={};"object"!==typeof(x=Array.isArray(t)?t[p.index-d-o]:t[p.dataKey])||Array.isArray(x)||(f=(null===x||void 0===x?void 0:x.styles)||{});var g=MS(e,p,l,s,n,a,f),v=new kS(x,g,e);c[p.dataKey]=v,c[p.index]=v,u=v.colSpan-1,i[p.index]={left:v.rowSpan-1,times:u}}else u--,d++;else i[p.index].left--,u=i[p.index].times,o++}return new DS(t,l,e,c)})}function FS(e,t){var r={};return e.forEach(function(e){if(null!=e.raw){var n=function(e,t){if("head"===e){if("object"===typeof t)return t.header||null;if("string"===typeof t||"number"===typeof t)return t}else if("foot"===e&&"object"===typeof t)return t.footer;return null}(t,e.raw);null!=n&&(r[e.dataKey]=n)}}),Object.keys(r).length>0?r:null}function MS(e,t,r,n,s,a,i){var l,o={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}}[n];"head"===e?l=s.headStyles:"body"===e?l=s.bodyStyles:"foot"===e&&(l=s.footStyles);var c=wS({},o.table,o[e],s.styles,l),d=s.columnStyles[t.dataKey]||s.columnStyles[t.index]||{},u="body"===e?d:{},m="body"===e&&r%2===0?wS({},o.alternateRow,s.alternateRowStyles):{},h=function(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}(a),p=wS({},h,c,m,u);return wS(p,i)}function US(e,t,r){var n;void 0===r&&(r={});var s=fS(e,t),a=new Map,i=[],l=[],o=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?o=t.settings.horizontalPageBreakRepeat:"string"!==typeof t.settings.horizontalPageBreakRepeat&&"number"!==typeof t.settings.horizontalPageBreakRepeat||(o=[t.settings.horizontalPageBreakRepeat]),o.forEach(function(e){var r=t.columns.find(function(t){return t.dataKey===e||t.index===e});r&&!a.has(r.index)&&(a.set(r.index,!0),i.push(r.index),l.push(t.columns[r.index]),s-=r.wrappedWidth)});for(var c=!0,d=null!==(n=null===r||void 0===r?void 0:r.start)&&void 0!==n?n:0;d<t.columns.length;)if(a.has(d))d++;else{var u=t.columns[d].wrappedWidth;if(!(c||s>=u))break;c=!1,i.push(d),l.push(t.columns[d]),s-=u,d++}return{colIndexes:i,columns:l,lastIndex:d-1}}function BS(e,t){var r=t.settings,n=r.startY,s=r.margin,a={x:s.left,y:n},i=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+s.bottom+i;"avoid"===r.pageBreak&&(l+=t.body.reduce(function(e,t){return e+t.height},0));var o=new oS(e);("always"===r.pageBreak||null!=r.startY&&l>o.pageSize().height)&&(YS(o),a.y=s.top),t.callWillDrawPageHooks(o,a);var c=wS({},a);t.startPageNumber=o.pageNumber(),r.horizontalPageBreak?function(e,t,r,n){var s=function(e,t){for(var r=[],n=0;n<t.columns.length;n++){var s=US(e,t,{start:n});s.columns.length&&(r.push(s),n=s.lastIndex)}return r}(e,t),a=t.settings;if("afterAllRows"===a.horizontalPageBreakBehaviour)s.forEach(function(s,a){e.applyStyles(e.userStyles),a>0?XS(e,t,r,n,s.columns,!0):HS(e,t,n,s.columns),function(e,t,r,n,s){e.applyStyles(e.userStyles),t.body.forEach(function(a,i){var l=i===t.body.length-1;WS(e,t,a,l,r,n,s)})}(e,t,r,n,s.columns),GS(e,t,n,s.columns)});else for(var i=-1,l=s[0],o=function(){var a=i;if(l){e.applyStyles(e.userStyles);var o=l.columns;i>=0?XS(e,t,r,n,o,!0):HS(e,t,n,o),a=zS(e,t,i+1,n,o),GS(e,t,n,o)}var c=a-i;s.slice(1).forEach(function(s){e.applyStyles(e.userStyles),XS(e,t,r,n,s.columns,!0),zS(e,t,i+1,n,s.columns,c),GS(e,t,n,s.columns)}),i=a};i<t.body.length-1;)o()}(o,t,c,a):(o.applyStyles(o.userStyles),"firstPage"!==r.showHead&&"everyPage"!==r.showHead||t.head.forEach(function(e){return qS(o,t,e,a,t.columns)}),o.applyStyles(o.userStyles),t.body.forEach(function(e,r){var n=r===t.body.length-1;WS(o,t,e,n,c,a,t.columns)}),o.applyStyles(o.userStyles),"lastPage"!==r.showFoot&&"everyPage"!==r.showFoot||t.foot.forEach(function(e){return qS(o,t,e,a,t.columns)})),hS(o,t,c,a),t.callEndPageHooks(o,a),t.finalY=a.y,e.lastAutoTable=t,o.applyStyles(o.userStyles)}function HS(e,t,r,n){var s=t.settings;e.applyStyles(e.userStyles),"firstPage"!==s.showHead&&"everyPage"!==s.showHead||t.head.forEach(function(s){return qS(e,t,s,r,n)})}function zS(e,t,r,n,s,a){e.applyStyles(e.userStyles),a=null!==a&&void 0!==a?a:t.body.length;var i=Math.min(r+a,t.body.length),l=-1;return t.body.slice(r,i).forEach(function(a,i){var o=r+i===t.body.length-1,c=KS(e,t,o,n);a.canEntireRowFit(c,s)&&(qS(e,t,a,n,s),l=r+i)}),l}function GS(e,t,r,n){var s=t.settings;e.applyStyles(e.userStyles),"lastPage"!==s.showFoot&&"everyPage"!==s.showFoot||t.foot.forEach(function(s){return qS(e,t,s,r,n)})}function VS(e,t,r){var n=r.getLineHeight(e.styles.fontSize),s=e.padding("vertical"),a=Math.floor((t-s)/n);return Math.max(0,a)}function WS(e,t,r,n,s,a,i){var l=KS(e,t,n,a);if(r.canEntireRowFit(l,i))qS(e,t,r,a,i);else if(function(e,t,r,n){var s=e.pageSize().height,a=n.settings.margin,i=s-(a.top+a.bottom);"body"===t.section&&(i-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=t.getMinimumRowHeight(n.columns,e),o=l<r;if(l>i)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!o)return!1;var c=t.hasRowSpan(n.columns);return t.getMaxCellHeight(n.columns)>i?(c&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!c&&"avoid"!==n.settings.rowPageBreak}(e,r,l,t)){var o=function(e,t,r,n){var s={};e.spansMultiplePages=!0,e.height=0;for(var a=0,i=0,l=r.columns;i<l.length;i++){var o=l[i];if(f=e.cells[o.index]){Array.isArray(f.text)||(f.text=[f.text]),(x=wS(x=new kS(f.raw,f.styles,f.section),f)).text=[];var c=VS(f,t,n);f.text.length>c&&(x.text=f.text.splice(c,f.text.length));var d=n.scaleFactor(),u=n.getLineHeightFactor();f.contentHeight=f.getContentHeight(d,u),f.contentHeight>=t&&(f.contentHeight=t,x.styles.minCellHeight-=t),f.contentHeight>e.height&&(e.height=f.contentHeight),x.contentHeight=x.getContentHeight(d,u),x.contentHeight>a&&(a=x.contentHeight),s[o.index]=x}}var m=new DS(e.raw,-1,e.section,s,!0);m.height=a;for(var h=0,p=r.columns;h<p.length;h++){var x,f;o=p[h],(x=m.cells[o.index])&&(x.height=m.height),(f=e.cells[o.index])&&(f.height=e.height)}return m}(r,l,t,e);qS(e,t,r,a,i),XS(e,t,s,a,i),WS(e,t,o,n,s,a,i)}else XS(e,t,s,a,i),WS(e,t,r,n,s,a,i)}function qS(e,t,r,n,s){n.x=t.settings.margin.left;for(var a=0,i=s;a<i.length;a++){var l=i[a],o=r.cells[l.index];if(o)if(e.applyStyles(o.styles),o.x=n.x,o.y=n.y,!1!==t.callCellHooks(e,t.hooks.willDrawCell,o,r,l,n)){$S(e,o,n);var c=o.getTextPos();iS(o.text,c.x,c.y,{halign:o.styles.halign,valign:o.styles.valign,maxWidth:Math.ceil(o.width-o.padding("left")-o.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,o,r,l,n),n.x+=l.width}else n.x+=l.width;else n.x+=l.width}n.y+=r.height}function $S(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),"number"===typeof n.lineWidth){var s=pS(n.lineWidth,n.fillColor);s&&e.rect(t.x,r.y,t.width,t.height,s)}else"object"===typeof n.lineWidth&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),function(e,t,r,n){var s,a,i,l;n.top&&(s=r.x,a=r.y,i=r.x+t.width,l=r.y,n.right&&(i+=.5*n.right),n.left&&(s-=.5*n.left),o(n.top,s,a,i,l));n.bottom&&(s=r.x,a=r.y+t.height,i=r.x+t.width,l=r.y+t.height,n.right&&(i+=.5*n.right),n.left&&(s-=.5*n.left),o(n.bottom,s,a,i,l));n.left&&(s=r.x,a=r.y,i=r.x,l=r.y+t.height,n.top&&(a-=.5*n.top),n.bottom&&(l+=.5*n.bottom),o(n.left,s,a,i,l));n.right&&(s=r.x+t.width,a=r.y,i=r.x+t.width,l=r.y+t.height,n.top&&(a-=.5*n.top),n.bottom&&(l+=.5*n.bottom),o(n.right,s,a,i,l));function o(t,r,n,s,a){e.getDocument().setLineWidth(t),e.getDocument().line(r,n,s,a,"S")}}(e,t,r,n.lineWidth))}function KS(e,t,r,n){var s=t.settings.margin.bottom,a=t.settings.showFoot;return("everyPage"===a||"lastPage"===a&&r)&&(s+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-s}function XS(e,t,r,n,s,a){void 0===s&&(s=[]),void 0===a&&(a=!1),e.applyStyles(e.userStyles),"everyPage"!==t.settings.showFoot||a||t.foot.forEach(function(r){return qS(e,t,r,n,s)}),t.callEndPageHooks(e,n);var i=t.settings.margin;hS(e,t,r,n),YS(e),t.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,t.callWillDrawPageHooks(e,n),"everyPage"===t.settings.showHead&&(t.head.forEach(function(r){return qS(e,t,r,n,s)}),e.applyStyles(e.userStyles))}function YS(e){var t=e.pageNumber();return e.setPage(t+1),e.pageNumber()===t&&(e.addPage(),!0)}try{if("undefined"!==typeof window&&window){var JS=window,ZS=JS.jsPDF||(null===(AS=JS.jspdf)||void 0===AS?void 0:AS.jsPDF);ZS&&function(e){e.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return BS(this,OS(this,SS(this,e[0]))),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(e,t,r,n){iS(e,t,r,n,this)},e.API.autoTableSetDefaults=function(e){return oS.setDefaults(e,this),this},e.autoTableSetDefaults=function(e,t){oS.setDefaults(e,t)},e.API.autoTableHtmlToJson=function(e,t){var r;if(void 0===t&&(t=!1),"undefined"===typeof window)return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var n=bS(new oS(this),e,window,t,!1),s=n.head,a=n.body,i=(null===(r=s[0])||void 0===r?void 0:r.map(function(e){return e.content}))||[];return{columns:i,rows:a,data:a}}}(ZS)}}catch(Sc){console.error("Could not apply autoTable plugin",Sc)}const QS=/^[A-Z]{2}\d{3,}$/,eA=()=>{const[t,r]=(0,e.useState)("overview"),[n,a]=(0,e.useState)([]),[i,l]=(0,e.useState)(null),[o,c]=(0,e.useState)(!1),[d,u]=(0,e.useState)(""),[m,h]=(0,e.useState)("ALL"),[p,x]=(0,e.useState)(""),[f,g]=(0,e.useState)("ALL"),[v,y]=(0,e.useState)(void 0),[b,N]=(0,e.useState)(""),[j,w]=(0,e.useState)(""),[S,A]=(0,e.useState)(!1),[T,C]=(0,e.useState)(!1),[E,D]=(0,e.useState)(null),[k,R]=(0,e.useState)(null),[_,I]=(0,e.useState)(null),[P,O]=(0,e.useState)([]),[L,F]=(0,e.useState)(!1),[M,U]=(0,e.useState)("openingDate"),[B,H]=(0,e.useState)("desc"),[z,G]=(0,e.useState)(1),[V,W]=(0,e.useState)(10),[q,$]=(0,e.useState)(1),[K,X]=(0,e.useState)(10),[Y,J]=(0,e.useState)([]);(0,e.useEffect)(()=>{let e=!0;return(async()=>{try{const t=await Di.getAllBranches();if(!e)return;const r=(t||[]).map(e=>{var t;return{id:null!==(t=e.id)&&void 0!==t?t:e.branchId,name:e.name||e.branchName||e.displayName||String(e.id)}});J(r)}catch(t){console.error("Error loading branches:",t),J([])}})(),()=>{e=!1}},[]);const Z=async()=>{c(!0);try{const t=await Di.getTermSavingsAccounts({page:1,pageSize:1e3}),r=(null===t||void 0===t?void 0:t.accounts)||(null===t||void 0===t?void 0:t.Accounts)||(Array.isArray(t)?t:[]);console.log("\ud83d\udce6 Raw TermSavingsAccount data:",r[0]);const n=e=>"string"===typeof e?e:0===e||"HTG"===e?"HTG":"USD",i=e=>{if("string"===typeof e){const t=e.toUpperCase();if(["ACTIVE","INACTIVE","CLOSED","SUSPENDED"].includes(t))return t}switch(e){case 0:default:return"ACTIVE";case 1:return"INACTIVE";case 2:return"CLOSED";case 3:return"SUSPENDED"}},o=e=>{if("string"===typeof e)return e;switch(e){case 0:return yi.THREE_MONTHS;case 1:return yi.SIX_MONTHS;case 2:return yi.TWELVE_MONTHS;case 3:return yi.TWENTY_FOUR_MONTHS;default:return}},c=r.map(e=>({id:e.id,accountNumber:e.accountNumber,accountType:vi.TERM_SAVINGS,customerId:e.customerId||"",customerName:e.customerName||"",customerPhone:e.customerPhone||"",branchId:e.branchId,branchName:e.branchName||"",currency:n(e.currency),balance:e.balance,availableBalance:e.availableBalance,status:i(e.status),openingDate:e.openingDate,maturityDate:e.maturityDate,lastTransactionDate:e.lastTransactionDate,termType:o(e.termType),interestRate:e.interestRate,accruedInterest:e.accruedInterest,lastInterestCalculation:e.lastInterestCalculation,earlyWithdrawalPenalty:e.earlyWithdrawalPenalty,createdAt:e.createdAt,updatedAt:e.updatedAt,closedAt:e.closedAt,closedBy:e.closedBy,closureReason:e.closureReason}));a(c);try{const e=Array.from(new Set(c.filter(e=>!e.customerName&&e.customerId).map(e=>String(e.customerId)))),t=Array.from(new Set(c.filter(e=>!e.customerName&&!e.customerId&&e.customerPhone).map(e=>String(e.customerPhone)))),r=new Map;if(e.length){const t=await Promise.all(e.map(e=>Fm.getCustomer(String(e)).catch(t=>(console.warn("Failed to fetch customer by id",e,t),null))));t.forEach(e=>{e&&e.id&&r.set(String(e.id),e)})}if(t.length){const e=await Promise.all(t.map(e=>Fm.getCustomerByPhone(String(e)).catch(t=>(console.warn("Failed to fetch customer by phone",e,t),null))));e.forEach(e=>{var t;e&&e.id&&(r.set(String(e.id),e),null!==(t=e.contact)&&void 0!==t&&t.primaryPhone&&r.set(String(e.contact.primaryPhone),e),e.primaryPhone&&r.set(String(e.primaryPhone),e))})}const n=c.map(e=>{const t=e.customerId?r.get(String(e.customerId)):null,n=!t&&e.customerPhone?r.get(String(e.customerPhone)):null,a=t||n;if(a){var i;const t=a.fullName||"".concat(a.firstName||""," ").concat(a.lastName||"").trim()||e.customerName;return(0,s.A)((0,s.A)({},e),{},{customerName:t,customerPhone:e.customerPhone||(null===(i=a.contact)||void 0===i?void 0:i.primaryPhone)||a.primaryPhone||e.customerPhone})}return e});a(n)}catch(e){console.warn("Error enriching accounts with customer data",e)}const d=await Di.getClientAccountStats();l(d)}catch(mn){console.error(mn),Ts.error("Erreur lors du chargement des comptes \xe0 terme")}finally{c(!1)}};(0,e.useEffect)(()=>{Z()},[]);const Q=(0,e.useMemo)(()=>(n||[]).filter(e=>{var t,r;const n=!d||(null===(t=e.accountNumber)||void 0===t?void 0:t.toLowerCase().includes(d.toLowerCase()))||(null===(r=e.customerName)||void 0===r?void 0:r.toLowerCase().includes(d.toLowerCase())),s="ALL"===m||e.currency===m,a=!p||(e.status||"").toUpperCase()===p.toUpperCase(),i="ALL"===f||e.termType===f,l=!v||e.branchId===v,o=!b||e.balance>=Number(b),c=!j||e.balance<=Number(j);return n&&s&&a&&i&&l&&o&&c}),[n,d,m,p,f,v,b,j]),ee={accountNumber:e=>e.accountNumber||"",customerName:e=>(e.customerName||"").toLowerCase(),branchName:e=>(e.branchName||"").toLowerCase(),currency:e=>e.currency,balance:e=>e.balance,termType:e=>e.termType||"",interestRate:e=>{var t;return null!==(t=e.interestRate)&&void 0!==t?t:ji(e.termType,e.currency)},openingDate:e=>new Date(e.openingDate).getTime(),maturityDate:e=>e.maturityDate?new Date(e.maturityDate).getTime():0},te=(0,e.useMemo)(()=>{const e=ee["computedRate"===M?"interestRate":"computedMaturity"===M?"maturityDate":M]||(e=>e.accountNumber),t=[...Q].sort((t,r)=>{const n=e(t),s=e(r);return n<s?"asc"===B?-1:1:n>s?"asc"===B?1:-1:0});return t},[Q,M,B]),re=Math.max(1,Math.ceil(te.length/V)),ne=(0,e.useMemo)(()=>{const e=(z-1)*V;return te.slice(e,e+V)},[te,z,V]);(0,e.useEffect)(()=>{G(1)},[d,m,p,M,B,V]),(0,e.useEffect)(()=>{$(1)},[n.length]);const se=e=>{if(!e)return"-";const t=new Date(e),r=new Date,n=Math.ceil((t.getTime()-r.getTime())/864e5);return"".concat(n)},ae=e=>(e||[]).filter(e=>null!=e.termType&&e.maturityDate).map(e=>(0,s.A)((0,s.A)({},e),{},{days:parseInt(se(e.maturityDate))})).sort((e,t)=>Number(e.days)-Number(t.days)),ie=(0,e.useMemo)(()=>ae(n),[n]),le=Math.max(1,Math.ceil(ie.length/K)),oe=(0,e.useMemo)(()=>{const e=(q-1)*K;return ie.slice(e,e+K)},[ie,q,K]),ce=e=>n.filter(t=>t.currency===e).length,de=(e,t)=>"HTG"===t?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" HTG":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(e),ue=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left";return(0,ju.jsx)("th",{className:"px-6 py-3 text-".concat(r," text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none"),onClick:()=>(e=>{M===e?H(e=>"asc"===e?"desc":"asc"):(U(e),H("asc"))})(t),children:(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1",children:[e,(0,ju.jsx)(eS,{className:"h-4 w-4 ".concat(M===t?"text-blue-600":"text-gray-400")})]})})},me=e=>{try{const t='<!DOCTYPE html>\n      <html lang="fr">\n      <head>\n        <meta charset="UTF-8" />\n        <title>Comptes \xe0 Terme - Export</title>\n        <style>\n          body { font-family: Arial, sans-serif; padding: 24px; }\n          h1 { font-size: 18px; }\n          table { width: 100%; border-collapse: collapse; margin-top: 12px; }\n          th, td { border: 1px solid #ccc; padding: 6px 8px; font-size: 12px; }\n          th { background: #f5f5f5; text-align: left; }\n        </style>\n      </head>\n      <body>\n        <h1>Comptes d\'\xc9pargne \xe0 Terme</h1>\n        <table>\n          <thead>\n            <tr>\n              <th>Num\xe9ro</th>\n              <th>Client</th>\n              <th>Succursale</th>\n              <th>Devise</th>\n              <th>Solde</th>\n              <th>Terme</th>\n              <th>Taux(%)</th>\n              <th>\xc9ch\xe9ance</th>\n              <th>Jours restants</th>\n              <th>Statut</th>\n            </tr>\n          </thead>\n          <tbody>\n            '.concat(e.map(e=>"\n              <tr>\n                <td>".concat(e.accountNumber||"","</td>\n                <td>").concat((e.customerName||"").replaceAll("<","&lt;"),"</td>\n                <td>").concat((e.branchName||"").replaceAll("<","&lt;"),"</td>\n                <td>").concat(e.currency,"</td>\n                <td>").concat(e.balance,"</td>\n                <td>").concat(e.termType?Ni(e.termType):"","</td>\n                <td>").concat(void 0!==e.interestRate?(100*Number(e.interestRate)).toFixed(2):"","</td>\n                <td>").concat(e.maturityDate?new Date(e.maturityDate).toLocaleDateString("fr-FR"):"","</td>\n                <td>").concat(se(e.maturityDate),"</td>\n                <td>").concat(e.status,"</td>\n              </tr>\n            ")).join(""),"\n          </tbody>\n        </table>\n        <script>window.onload = function(){ window.print(); setTimeout(() => window.close(), 300); }<\/script>\n      </body>\n      </html>"),r=new Blob([t],{type:"text/html"}),n=URL.createObjectURL(r);window.open(n,"_blank")||Ts.error("Impossible d'ouvrir la fen\xeatre d'impression")}catch(mn){console.error("PDF export error",mn),Ts.error("Erreur lors de l'export PDF")}},he=e=>{let{accounts:t}=e;const r=new Date,n=(t||[]).filter(e=>null!=e.termType),s=e=>Math.ceil((new Date(e).getTime()-r.getTime())/864e5),a=n.filter(e=>e.maturityDate&&s(e.maturityDate)>=0&&s(e.maturityDate)<=7).length,i=n.filter(e=>e.maturityDate&&s(e.maturityDate)>=0&&s(e.maturityDate)<=30).length,l=n.filter(e=>e.maturityDate&&s(e.maturityDate)<0).length,o=(()=>{const e=n.map(e=>{var t;return Number(null!==(t=e.interestRate)&&void 0!==t?t:ji(e.termType||yi.TWELVE_MONTHS,e.currency))});return e.length?e.reduce((e,t)=>e+t,0)/e.length:0})(),c=n.reduce((e,t)=>e+(t.balance||0),0);return(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)("div",{className:"bg-gradient-to-br from-teal-500 to-teal-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"\xc0 \xe9ch\xe9ance sous 7 jours"}),(0,ju.jsx)("p",{className:"text-2xl font-bold",children:a})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-sky-500 to-sky-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"\xc0 \xe9ch\xe9ance sous 30 jours"}),(0,ju.jsx)("p",{className:"text-2xl font-bold",children:i})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-red-500 to-red-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"D\xe9j\xe0 \xe9chus"}),(0,ju.jsx)("p",{className:"text-2xl font-bold",children:l})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-violet-500 to-violet-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Taux moyen (annuel)"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold",children:[(100*o).toFixed(2),"%"]}),(0,ju.jsxs)("p",{className:"text-xs mt-1 opacity-75",children:["Solde total: ",new Intl.NumberFormat("fr-FR").format(c)]})]})})]})},pe=e=>{const t=new Date,r=(n||[]).filter(r=>{if(!r.maturityDate)return!1;const n=new Date(r.maturityDate),s=Math.ceil((n.getTime()-t.getTime())/864e5);return 0===e?s<0:s>=0&&s<=e});0!==r.length?(u(""),x(""),h("ALL"),g("ALL"),Ts.success("".concat(r.length," compte(s) arrivent \xe0 \xe9ch\xe9ance sous ").concat(0===e?"0":e," jours")),U("maturityDate"),H("asc")):Ts("Aucune \xe9ch\xe9ance correspondante")};return(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Comptes d'\xc9pargne \xe0 Terme"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"Gestion des comptes \xe0 terme (3, 6, 12, 24 mois)"})]}),"accounts"===t&&(0,ju.jsxs)("div",{className:"flex gap-3",children:[(0,ju.jsxs)("button",{onClick:()=>A(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ju.jsx)(Au,{className:"h-4 w-4"}),"Nouveau Compte \xe0 Terme"]}),(0,ju.jsxs)("button",{onClick:()=>C(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,ju.jsx)(Au,{className:"h-4 w-4"}),"Nouveau Client + Compte"]})]})]}),(0,ju.jsx)("div",{className:"flex gap-2 border-b",children:[{k:"overview",label:"Vue d'ensemble"},{k:"clients",label:"Clients"},{k:"accounts",label:"Comptes"},{k:"transactions",label:"Transactions"}].map(e=>(0,ju.jsx)("button",{onClick:()=>r(e.k),className:"px-4 py-2 -mb-px border-b-2 ".concat(t===e.k?"border-blue-600 text-blue-700":"border-transparent text-gray-600 hover:text-gray-800"),children:e.label},e.k))}),"overview"===t&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6",children:[(0,ju.jsx)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Total Comptes \xe0 Terme"}),(0,ju.jsx)("p",{className:"text-3xl font-bold",children:n.length}),(0,ju.jsxs)("p",{className:"text-xs mt-1 opacity-75",children:[n.filter(e=>"ACTIVE"===(e.status||"").toUpperCase()).length," actifs"]})]}),(0,ju.jsx)(Du,{className:"h-10 w-10 opacity-80"})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Comptes \xe0 Terme"}),(0,ju.jsx)("p",{className:"text-2xl font-bold",children:n.filter(e=>null!=e.termType).length}),(0,ju.jsxs)("p",{className:"text-xs mt-1 opacity-75",children:["Terme actif: ",n.filter(e=>null!=e.termType&&"ACTIVE"===(e.status||"").toUpperCase()).length]})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Comptes HTG"}),(0,ju.jsx)("p",{className:"text-2xl font-bold",children:ce("HTG")})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Comptes USD"}),(0,ju.jsx)("p",{className:"text-2xl font-bold",children:ce("USD")})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Solde Total HTG"}),(0,ju.jsx)("p",{className:"text-2xl font-bold",children:new Intl.NumberFormat("fr-FR").format(n.filter(e=>"HTG"===e.currency).reduce((e,t)=>e+(t.balance||0),0))})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Solde Total USD"}),(0,ju.jsx)("p",{className:"text-2xl font-bold",children:"$"+new Intl.NumberFormat("fr-FR").format(n.filter(e=>"USD"===e.currency).reduce((e,t)=>e+(t.balance||0),0))})]})})]}),(0,ju.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:(0,ju.jsx)(he,{accounts:n})}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-4",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold",children:"Prochaines \xe9ch\xe9ances (Comptes \xe0 Terme)"}),(0,ju.jsx)("p",{className:"text-sm text-gray-500",children:"Tous les comptes arrivant prochainement \xe0 \xe9ch\xe9ance"})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsxs)("select",{value:K,onChange:e=>X(parseInt(e.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,ju.jsx)("option",{value:10,children:"10/page"}),(0,ju.jsx)("option",{value:25,children:"25/page"}),(0,ju.jsx)("option",{value:50,children:"50/page"})]}),(0,ju.jsxs)("button",{onClick:()=>(e=>{try{const t=ae(e),r=[["Num\xe9ro","Client","T\xe9l\xe9phone","Succursale","Devise","Solde","Terme","Taux(%)","\xc9ch\xe9ance","Jours restants"].join(",")];t.forEach(e=>{const t=[e.accountNumber,(e.customerName||"").replaceAll(","," "),e.customerPhone||"",(e.branchName||"").replaceAll(","," "),e.currency,String(e.balance),e.termType?Ni(e.termType):"",void 0!==e.interestRate?(100*Number(e.interestRate)).toFixed(2):"",e.maturityDate?new Date(e.maturityDate).toISOString().split("T")[0]:"",String(se(e.maturityDate))];r.push(t.map(e=>'"'.concat(String(null!==e&&void 0!==e?e:"").replaceAll('"','""'),'"')).join(","))});const n=new Blob(["\ufeff"+r.join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download="term-maturities-".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}catch(mn){console.error("Export maturities CSV error",mn),Ts.error("Erreur lors de l'export des \xe9ch\xe9ances")}})(n),className:"px-3 py-2 border rounded hover:bg-gray-50 flex items-center gap-2",title:"Exporter en CSV",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"}),"CSV"]}),(0,ju.jsxs)("button",{onClick:()=>me(ae(n)),className:"px-3 py-2 border rounded hover:bg-gray-50 flex items-center gap-2",title:"Exporter en PDF",children:[(0,ju.jsx)(Hu,{className:"h-4 w-4"}),"PDF"]}),(0,ju.jsxs)("button",{onClick:()=>(e=>{try{const t=e.map(e=>({"Num\xe9ro":e.accountNumber,Client:e.customerName||"","T\xe9l\xe9phone":e.customerPhone||"",Succursale:e.branchName||"",Devise:e.currency,Solde:e.balance,Terme:e.termType?Ni(e.termType):"","Taux(%)":void 0!==e.interestRate?(100*Number(e.interestRate)).toFixed(2):(100*ji(e.termType||yi.TWELVE_MONTHS,e.currency)).toFixed(2),"\xc9ch\xe9ance":e.maturityDate?new Date(e.maturityDate).toLocaleDateString("fr-FR"):"",Statut:e.status})),r=Aw.json_to_sheet(t),n=Aw.book_new();Aw.book_append_sheet(n,r,"Maturit\xe9s"),hw(n,"term-savings-".concat((new Date).toISOString().slice(0,10),".xlsx")),Ts.success("Export XLSX pr\xeat")}catch(mn){console.error("XLSX export error",mn),Ts.error("Erreur lors de l'export XLSX")}})(ae(n)),className:"px-3 py-2 border rounded hover:bg-gray-50 flex items-center gap-2",title:"Exporter en Excel (XLS)",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"}),"XLS"]})]})]}),(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Num\xe9ro"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Terme"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xc9ch\xe9ance"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jours"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:oe.map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-4 py-2",children:e.accountNumber}),(0,ju.jsx)("td",{className:"px-4 py-2",children:e.customerName}),(0,ju.jsx)("td",{className:"px-4 py-2",children:de(e.balance,e.currency)}),(0,ju.jsx)("td",{className:"px-4 py-2",children:e.termType?Ni(e.termType):"-"}),(0,ju.jsx)("td",{className:"px-4 py-2",children:e.maturityDate?new Date(e.maturityDate).toLocaleDateString("fr-FR"):"-"}),(0,ju.jsx)("td",{className:"px-4 py-2 text-right",children:(0,ju.jsx)("span",{className:e.days<0?"text-red-600 font-semibold":e.days<=7?"text-orange-600 font-semibold":e.days<=30?"text-yellow-600 font-semibold":"",children:se(e.maturityDate)})})]},e.id))})]})}),ie.length>0&&(0,ju.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mt-3",children:[(0,ju.jsxs)("div",{children:["Page ",q," sur ",le," \u2022 ",ie.length," \xe9l\xe9ments"]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("button",{disabled:1===q,onClick:()=>$(1),className:"px-2 py-1 border rounded disabled:opacity-50",children:"\xab"}),(0,ju.jsx)("button",{disabled:1===q,onClick:()=>$(e=>Math.max(1,e-1)),className:"px-2 py-1 border rounded disabled:opacity-50",children:"\u2039"}),(0,ju.jsx)("button",{disabled:q===le,onClick:()=>$(e=>Math.min(le,e+1)),className:"px-2 py-1 border rounded disabled:opacity-50",children:"\u203a"}),(0,ju.jsx)("button",{disabled:q===le,onClick:()=>$(le),className:"px-2 py-1 border rounded disabled:opacity-50",children:"\xbb"})]})]})]})]}),"accounts"===t&&(0,ju.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 flex flex-col lg:flex-row gap-4 items-center",children:[(0,ju.jsxs)("div",{className:"relative w-full md:flex-1",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,ju.jsx)("input",{type:"text",placeholder:"Rechercher par num\xe9ro, nom client...",value:d,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("select",{value:m,onChange:e=>h(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg",children:[(0,ju.jsx)("option",{value:"ALL",children:"Toutes devises"}),(0,ju.jsx)("option",{value:"HTG",children:"HTG"}),(0,ju.jsx)("option",{value:"USD",children:"USD"})]}),(0,ju.jsxs)("select",{value:p,onChange:e=>x(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg",children:[(0,ju.jsx)("option",{value:"",children:"Tous statuts"}),(0,ju.jsx)("option",{value:"ACTIVE",children:"Actif"}),(0,ju.jsx)("option",{value:"INACTIVE",children:"Inactif"}),(0,ju.jsx)("option",{value:"SUSPENDED",children:"Suspendu"}),(0,ju.jsx)("option",{value:"CLOSED",children:"Ferm\xe9"})]}),(0,ju.jsxs)("select",{value:null!==v&&void 0!==v?v:"",onChange:e=>y(e.target.value?Number(e.target.value):void 0),className:"px-3 py-2 border border-gray-300 rounded-lg",children:[(0,ju.jsx)("option",{value:"",children:"Toutes succursales"}),Y.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,ju.jsxs)("select",{value:f,onChange:e=>g("ALL"===e.target.value?"ALL":e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg",children:[(0,ju.jsx)("option",{value:"ALL",children:"Toutes dur\xe9es"}),(0,ju.jsx)("option",{value:yi.THREE_MONTHS,children:"3 mois"}),(0,ju.jsx)("option",{value:yi.SIX_MONTHS,children:"6 mois"}),(0,ju.jsx)("option",{value:yi.TWELVE_MONTHS,children:"12 mois"}),(0,ju.jsx)("option",{value:yi.TWENTY_FOUR_MONTHS,children:"24 mois"})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("input",{type:"number",inputMode:"decimal",placeholder:"Montant min",value:b,onChange:e=>N(e.target.value),className:"w-28 px-3 py-2 border border-gray-300 rounded-lg"}),(0,ju.jsx)("span",{className:"text-gray-400",children:"-"}),(0,ju.jsx)("input",{type:"number",inputMode:"decimal",placeholder:"Montant max",value:j,onChange:e=>w(e.target.value),className:"w-28 px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[(0,ju.jsxs)("button",{onClick:()=>(e=>{try{const t=[["Num\xe9ro","Client","T\xe9l\xe9phone","Succursale","Devise","Solde","Terme","Taux(%)","\xc9ch\xe9ance","Statut"].join(",")];e.forEach(e=>{const r=[e.accountNumber,(e.customerName||"").replaceAll(","," "),e.customerPhone||"",(e.branchName||"").replaceAll(","," "),e.currency,String(e.balance),e.termType?Ni(e.termType):"",void 0!==e.interestRate?(100*Number(e.interestRate)).toFixed(2):(100*ji(e.termType||yi.TWELVE_MONTHS,e.currency)).toFixed(2),e.maturityDate?new Date(e.maturityDate).toISOString().split("T")[0]:"",e.status];t.push(r.map(e=>'"'.concat(String(null!==e&&void 0!==e?e:"").replaceAll('"','""'),'"')).join(","))});const r=new Blob(["\ufeff"+t.join("\n")],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(r),s=document.createElement("a");s.href=n;const a=(new Date).toISOString().split("T")[0];s.download="term-savings-".concat(a,".csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)}catch(mn){console.error("CSV export error",mn),Ts.error("Erreur lors de l'export CSV")}})(te),className:"px-3 py-2 border border-gray-300 rounded-lg flex items-center gap-2 hover:bg-gray-50",title:"Exporter en CSV",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"}),"Export"]}),(0,ju.jsxs)("button",{onClick:()=>me(te),className:"px-3 py-2 border border-gray-300 rounded-lg flex items-center gap-2 hover:bg-gray-50",title:"Exporter en PDF",children:[(0,ju.jsx)(Hu,{className:"h-4 w-4"}),"PDF"]})]})]}),"accounts"===t&&(0,ju.jsxs)("div",{className:"flex flex-wrap gap-2 items-center text-sm",children:[(0,ju.jsx)("span",{className:"text-gray-500",children:"\xc9ch\xe9ances rapides:"}),(0,ju.jsx)("button",{onClick:()=>u(""),className:"px-2 py-1 border rounded-lg hover:bg-gray-50",children:"Toutes"}),(0,ju.jsx)("button",{onClick:()=>pe(7),className:"px-2 py-1 border rounded-lg hover:bg-gray-50",children:"Dans 7 jours"}),(0,ju.jsx)("button",{onClick:()=>pe(30),className:"px-2 py-1 border rounded-lg hover:bg-gray-50",children:"Dans 30 jours"}),(0,ju.jsx)("button",{onClick:()=>pe(0),className:"px-2 py-1 border rounded-lg hover:bg-gray-50",children:"D\xe9j\xe0 \xe9chus"})]}),"accounts"===t&&(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:o?(0,ju.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,ju.jsx)(ku,{className:"h-8 w-8 text-blue-600 animate-pulse"})}):0===Q.length?(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)(Hu,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun compte trouv\xe9"}),(0,ju.jsx)("p",{className:"text-gray-500",children:"Essayez de modifier vos crit\xe8res de recherche"})]}):(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[ue("Num\xe9ro","accountNumber"),ue("Client","customerName"),ue("Succursale","branchName"),ue("Devise","currency"),ue("Solde","balance","right"),ue("Terme","termType"),ue("Taux","interestRate"),ue("\xc9ch\xe9ance","maturityDate"),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jours restants"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ne.map(e=>{var t,r,n,s,a;return(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-6 py-4",children:e.accountNumber}),(0,ju.jsxs)("td",{className:"px-6 py-4",children:[(0,ju.jsx)("div",{className:"font-medium text-gray-900",children:e.customerName&&"undefined undefined"!==e.customerName?e.customerName:e.customerFullName&&"undefined undefined"!==e.customerFullName?e.customerFullName:null!==(t=e.customer)&&void 0!==t&&t.fullName&&"undefined undefined"!==(null===(r=e.customer)||void 0===r?void 0:r.fullName)?null===(n=e.customer)||void 0===n?void 0:n.fullName:(0,ju.jsx)("span",{className:"italic text-gray-400",children:"Nom inconnu"})}),(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:e.customerPhone||(null===(s=e.customer)||void 0===s||null===(a=s.contact)||void 0===a?void 0:a.primaryPhone)||""})]}),(0,ju.jsx)("td",{className:"px-6 py-4",children:e.branchName}),(0,ju.jsx)("td",{className:"px-6 py-4",children:(0,ju.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("USD"===e.currency?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.currency})}),(0,ju.jsx)("td",{className:"px-6 py-4 text-right font-semibold",children:de(e.balance,e.currency)}),(0,ju.jsx)("td",{className:"px-6 py-4",children:e.termType?Ni(e.termType):(0,ju.jsx)("span",{className:"text-gray-400 italic",children:"Non d\xe9fini"})}),(0,ju.jsx)("td",{className:"px-6 py-4",children:void 0!==e.interestRate?"".concat((100*Number(e.interestRate)).toFixed(2),"%"):e.termType?"".concat((100*ji(e.termType,e.currency)).toFixed(2),"%"):(0,ju.jsx)("span",{className:"text-gray-400 italic",children:"-"})}),(0,ju.jsx)("td",{className:"px-6 py-4",children:e.maturityDate?new Date(e.maturityDate).toLocaleDateString("fr-FR"):e.openingDate&&e.termType?(()=>{const t=new Date(e.openingDate),r=e.termType===yi.THREE_MONTHS?3:e.termType===yi.SIX_MONTHS?6:e.termType===yi.TWELVE_MONTHS?12:24,n=new Date(t);return n.setMonth(n.getMonth()+r),n.toLocaleDateString("fr-FR")})():(0,ju.jsx)("span",{className:"text-gray-400 italic",children:"Non calcul\xe9e"})}),(0,ju.jsx)("td",{className:"px-6 py-4",children:e.maturityDate||e.openingDate&&e.termType?(()=>{let t;if(e.maturityDate)t=new Date(e.maturityDate);else{const r=new Date(e.openingDate),n=e.termType===yi.THREE_MONTHS?3:e.termType===yi.SIX_MONTHS?6:e.termType===yi.TWELVE_MONTHS?12:24;t=new Date(r),t.setMonth(t.getMonth()+n)}const r=new Date,n=Math.ceil((t.getTime()-r.getTime())/864e5);return(0,ju.jsx)("span",{className:n<0?"text-red-600 font-semibold":n<30?"text-orange-600 font-semibold":"",children:n})})():(0,ju.jsx)("span",{className:"text-gray-400 italic",children:"-"})}),(0,ju.jsx)("td",{className:"px-6 py-4 text-center",children:(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("ACTIVE"===(e.status||"").toUpperCase()?"bg-green-100 text-green-800":"INACTIVE"===(e.status||"").toUpperCase()?"bg-gray-100 text-gray-800":"SUSPENDED"===(e.status||"").toUpperCase()?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[(0,ju.jsx)(Ju,{className:"h-4 w-4"}),e.status]})}),(0,ju.jsx)("td",{className:"px-6 py-4 text-center",children:(0,ju.jsx)("button",{onClick:()=>D(e),className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Voir d\xe9tails"})})]},e.id)})})]})})}),"accounts"===t&&!o&&Q.length>0&&(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:["Affichage ",Math.min((z-1)*V+1,te.length),"\u2013",Math.min(z*V,te.length)," de ",te.length," comptes"]}),(0,ju.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ju.jsx)("label",{className:"text-sm text-gray-600",children:"Afficher"}),(0,ju.jsxs)("select",{value:V,onChange:e=>{W(Number(e.target.value)),G(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:[(0,ju.jsx)("option",{value:5,children:"5"}),(0,ju.jsx)("option",{value:10,children:"10"}),(0,ju.jsx)("option",{value:25,children:"25"}),(0,ju.jsx)("option",{value:50,children:"50"}),(0,ju.jsx)("option",{value:100,children:"100"})]}),(0,ju.jsx)("button",{onClick:()=>G(1),disabled:z<=1,className:"px-2 py-1 bg-gray-100 text-sm rounded-md disabled:opacity-50 disabled:cursor-not-allowed",title:"Premi\xe8re page",children:"\xab"}),(0,ju.jsx)("button",{onClick:()=>G(e=>Math.max(1,e-1)),disabled:z<=1,className:"px-3 py-1 bg-gray-100 text-sm rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Pr\xe9c"}),(0,ju.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",z," / ",re]}),(0,ju.jsx)("button",{onClick:()=>G(e=>Math.min(re,e+1)),disabled:z>=re,className:"px-3 py-1 bg-gray-100 text-sm rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Suiv"}),(0,ju.jsx)("button",{onClick:()=>G(re),disabled:z>=re,className:"px-2 py-1 bg-gray-100 text-sm rounded-md disabled:opacity-50 disabled:cursor-not-allowed",title:"Derni\xe8re page",children:"\xbb"})]})]})}),"clients"===t&&(0,ju.jsx)(tA,{onOpenTerm:e=>{R(e),A(!0)}}),"transactions"===t&&(0,ju.jsx)(rA,{}),_&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-auto",children:[(0,ju.jsxs)("div",{className:"bg-gray-100 p-4 flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("h3",{className:"font-semibold",children:["Historique - ",_.accountNumber]}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:_.customerName})]}),(0,ju.jsx)("div",{children:(0,ju.jsx)("button",{onClick:()=>{I(null),O([])},className:"px-3 py-1",children:"Fermer"})})]}),(0,ju.jsx)("div",{className:"p-4",children:L?(0,ju.jsx)("div",{className:"py-10 text-center text-gray-500",children:"Chargement..."}):0===P.length?(0,ju.jsx)("div",{className:"py-10 text-center text-gray-500",children:"Aucune transaction"}):(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Devise"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-4 py-2",children:new Date(e.processedAt).toLocaleString("fr-FR")}),(0,ju.jsx)("td",{className:"px-4 py-2",children:e.type}),(0,ju.jsx)("td",{className:"px-4 py-2 text-right",children:e.amount}),(0,ju.jsx)("td",{className:"px-4 py-2",children:e.currency}),(0,ju.jsx)("td",{className:"px-4 py-2",children:e.description})]},e.id))})]})})})]})}),S&&(0,ju.jsx)(iA,{initialCustomer:k||void 0,onClose:()=>{A(!1),R(null)},onSuccess:()=>{A(!1),R(null),Z(),Ts.success("Compte \xe0 terme ouvert")}}),T&&(0,ju.jsx)(lA,{onClose:()=>C(!1),onSuccess:()=>{C(!1),Z(),Ts.success("Client cr\xe9\xe9 et compte \xe0 terme ouvert")}}),E&&(0,ju.jsx)(aA,{account:E,onClose:()=>D(null),onRefresh:Z})]})},tA=t=>{var r,n,a,i,l,o,c,d,u,m,h,p;let{onOpenTerm:x}=t;const[f,g]=(0,e.useState)(null),[v,y]=(0,e.useState)(!1),[b,N]=(0,e.useState)(!1),[j,w]=(0,e.useState)(""),[S,A]=(0,e.useState)([]),T=(0,e.useRef)(""),[C,E]=(0,e.useState)(!1),[D,k]=(0,e.useState)(!1),[R,_]=(0,e.useState)({branchId:void 0,status:"",dateFrom:"",dateTo:""}),[I,P]=(0,e.useState)(!1),[O,L]=(0,e.useState)([]);(0,e.useEffect)(()=>{(async()=>{try{const e=(await Di.getAllBranches()||[]).map(e=>{var t;return{id:null!==(t=e.id)&&void 0!==t?t:e.branchId,name:e.name||e.branchName||e.displayName||String(e.id)}});L(e)}catch(mn){console.error("Error loading branches for ClientsTab:",mn)}})()},[]);const[F,M]=(0,e.useState)(1),[U,B]=(0,e.useState)(10),H=e=>{if(!e)return"\u2014";const t=e.replace(/\D+/g,"");return 11===t.length&&t.startsWith("509")?"".concat(t.substring(0,3),"-").concat(t.substring(3,7),"-").concat(t.substring(7,11)):8===t.length?"509-".concat(t.substring(0,4),"-").concat(t.substring(4,8)):e},z=e=>{switch(e){case 0:return"CIN";case 1:return"Passeport";case 2:return"Permis";case 3:return"Cert. Naissance";default:return"Document"}},G=e=>{try{var t,r,n,s,a,i,l,o,c,d,u;const m=window.open("","_blank");if(!m)return void Ts.error("Impossible d'ouvrir la fen\xeatre d'impression");const h=e=>null==e||""===e?"\u2014":e,p=e=>h(H(e)),x=e=>h((e=>{if(!e)return"\u2014";const t=new Date(e);return isNaN(t.getTime())?"\u2014":t.toLocaleDateString("fr-FR")})(e)),f=e=>h(new Intl.NumberFormat("fr-FR",{maximumFractionDigits:0}).format(e||0)+" HTG"),g=e=>({0:"CIN",1:"Passeport",2:"Permis",3:"Cert. Naissance"}[null!==e&&void 0!==e?e:-1]||"Document"),v='\n        <!DOCTYPE html>\n        <html lang="fr">\n        <head>\n          <meta charset="UTF-8" />\n          <meta name="viewport" content="width=device-width, initial-scale=1.0">\n          <title>Fiche Client - '.concat(h(e.fullName),'</title>\n          <style>\n            * { margin: 0; padding: 0; box-sizing: border-box; }\n            body { \n              font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif; \n              padding: 40px; \n              max-width: 1000px; \n              margin: 0 auto;\n              color: #1f2937;\n              line-height: 1.6;\n            }\n            .header { \n              background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);\n              color: white;\n              padding: 30px;\n              border-radius: 12px;\n              margin-bottom: 30px;\n              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n            }\n            .header h1 { \n              font-size: 28px; \n              font-weight: bold; \n              margin-bottom: 8px;\n            }\n            .header .subtitle { \n              font-size: 14px; \n              opacity: 0.9;\n            }\n            .section { \n              background: #f9fafb;\n              border-radius: 10px;\n              padding: 24px;\n              margin-bottom: 24px;\n              border: 1px solid #e5e7eb;\n            }\n            .section-title { \n              font-size: 18px; \n              font-weight: 600; \n              color: #1f2937;\n              margin-bottom: 16px;\n              padding-bottom: 12px;\n              border-bottom: 2px solid #3b82f6;\n              display: flex;\n              align-items: center;\n            }\n            .section-title::before {\n              content: "\u25cf";\n              color: #3b82f6;\n              margin-right: 10px;\n              font-size: 20px;\n            }\n            .grid { \n              display: grid; \n              grid-template-columns: repeat(2, 1fr); \n              gap: 20px;\n            }\n            .item { \n              background: white;\n              padding: 12px;\n              border-radius: 6px;\n              border: 1px solid #e5e7eb;\n            }\n            .label { \n              font-size: 11px; \n              font-weight: 600;\n              color: #6b7280;\n              text-transform: uppercase;\n              letter-spacing: 0.5px;\n              margin-bottom: 4px;\n            }\n            .value { \n              font-size: 14px; \n              color: #111827;\n              font-weight: 500;\n            }\n            .status-badge { \n              display: inline-block; \n              padding: 6px 14px; \n              border-radius: 20px; \n              font-size: 12px; \n              font-weight: 600;\n            }\n            .status-active { \n              background: #d1fae5; \n              color: #065f46; \n            }\n            .status-inactive { \n              background: #fee2e2; \n              color: #991b1b; \n            }\n            .documents-list {\n              background: white;\n              border-radius: 6px;\n              padding: 16px;\n              margin-top: 12px;\n            }\n            .document-item {\n              padding: 12px;\n              border: 1px solid #e5e7eb;\n              border-radius: 6px;\n              margin-bottom: 10px;\n              background: #fafafa;\n            }\n            .document-item:last-child {\n              margin-bottom: 0;\n            }\n            .document-name {\n              font-weight: 600;\n              color: #1f2937;\n              margin-bottom: 4px;\n            }\n            .document-meta {\n              font-size: 12px;\n              color: #6b7280;\n            }\n            .footer {\n              text-align: center;\n              margin-top: 40px;\n              padding-top: 20px;\n              border-top: 2px solid #e5e7eb;\n              color: #6b7280;\n              font-size: 12px;\n            }\n            @media print { \n              body { padding: 20px; }\n              .header { page-break-after: avoid; }\n              .section { page-break-inside: avoid; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <h1>').concat(h(e.fullName),'</h1>\n            <div class="subtitle">Code Client: ').concat(h(e.customerCode||e.CustomerCode||e.id),'</div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Informations Personnelles</div>\n            <div class="grid">\n              <div class="item">\n                <div class="label">Pr\xe9nom</div>\n                <div class="value">').concat(h(e.firstName||e.FirstName),'</div>\n              </div>\n              <div class="item">\n                <div class="label">Nom</div>\n                <div class="value">').concat(h(e.lastName||e.LastName),'</div>\n              </div>\n              <div class="item">\n                <div class="label">Date de Naissance</div>\n                <div class="value">').concat(x(e.dateOfBirth||e.DateOfBirth),'</div>\n              </div>\n              <div class="item">\n                <div class="label">Genre</div>\n                <div class="value">').concat(Tp(e.gender),'</div>\n              </div>\n              <div class="item">\n                <div class="label">ID Client</div>\n                <div class="value">').concat(h(e.customerCode||e.CustomerCode||e.id),'</div>\n              </div>\n              <div class="item">\n                <div class="label">Statut</div>\n                <div class="value">\n                  <span class="status-badge ').concat(e.isActive?"status-active":"status-inactive",'">\n                    ').concat(e.isActive?"Actif":"Inactif",'\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Adresse</div>\n            <div class="grid">\n              <div class="item">\n                <div class="label">Rue</div>\n                <div class="value">').concat(h((null===(t=e.address)||void 0===t?void 0:t.street)||e.street),'</div>\n              </div>\n              <div class="item">\n                <div class="label">Commune</div>\n                <div class="value">').concat(h((null===(r=e.address)||void 0===r?void 0:r.commune)||e.commune),'</div>\n              </div>\n              <div class="item">\n                <div class="label">D\xe9partement</div>\n                <div class="value">').concat(h((null===(n=e.address)||void 0===n?void 0:n.department)||e.department),'</div>\n              </div>\n            </div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Informations de Contact</div>\n            <div class="grid">\n              <div class="item">\n                <div class="label">T\xe9l\xe9phone Principal</div>\n                <div class="value">').concat(p((null===(s=e.contact)||void 0===s?void 0:s.primaryPhone)||e.primaryPhone),'</div>\n              </div>\n              <div class="item">\n                <div class="label">T\xe9l\xe9phone Secondaire</div>\n                <div class="value">').concat(p((null===(a=e.contact)||void 0===a?void 0:a.secondaryPhone)||e.secondaryPhone),'</div>\n              </div>\n              <div class="item">\n                <div class="label">Email</div>\n                <div class="value">').concat(h((null===(i=e.contact)||void 0===i?void 0:i.email)||e.email),'</div>\n              </div>\n            </div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Document d\'Identification</div>\n            <div class="grid">\n              <div class="item">\n                <div class="label">Type de Document</div>\n                <div class="value">').concat(g(null===(l=e.identity)||void 0===l?void 0:l.documentType),'</div>\n              </div>\n              <div class="item">\n                <div class="label">Num\xe9ro de Document</div>\n                <div class="value">').concat(h(null===(o=e.identity)||void 0===o?void 0:o.documentNumber),'</div>\n              </div>\n              <div class="item">\n                <div class="label">Date d\'\xc9mission</div>\n                <div class="value">').concat(x(null===(c=e.identity)||void 0===c?void 0:c.issuedDate),'</div>\n              </div>\n              <div class="item">\n                <div class="label">Date d\'Expiration</div>\n                <div class="value">').concat(x(null===(d=e.identity)||void 0===d?void 0:d.expiryDate),'</div>\n              </div>\n              <div class="item">\n                <div class="label">Autorit\xe9 d\'\xc9mission</div>\n                <div class="value">').concat(h(null===(u=e.identity)||void 0===u?void 0:u.issuingAuthority),"</div>\n              </div>\n            </div>\n          </div>\n\n          ").concat(e.documents&&e.documents.length>0?'\n          <div class="section">\n            <div class="section-title">Documents T\xe9l\xe9charg\xe9s ('.concat(e.documents.length,')</div>\n            <div class="documents-list">\n              ').concat(e.documents.map(e=>{var t;const r=e.Name||e.name||(e.FilePath||e.filePath?String(e.FilePath||e.filePath).split(/[/\\]/).pop():"")||"Document",n=e.documentTypeName||"Document",s=null!==(t=e.FileSize)&&void 0!==t?t:e.fileSize,a="number"!==typeof s||isNaN(s)?null:(s/1024).toFixed(1),i=e.UploadedAt||e.uploadedAt,l=i?new Date(i):null,o=!(!l||isNaN(l.getTime()));return'\n                  <div class="document-item">\n                    <div class="document-name">'.concat(h(r),'</div>\n                    <div class="document-meta">\n                      Type: ').concat(h(n),"\n                      ").concat(null!==a?" \u2022 Taille: ".concat(a," KB"):"","\n                      ").concat(o?" \u2022 Date: ".concat(l.toLocaleDateString("fr-FR")):"","\n                    </div>\n                  </div>\n                ")}).join(""),"\n            </div>\n          </div>\n          "):"","\n\n          ").concat(e.occupation||e.monthlyIncome?'\n          <div class="section">\n            <div class="section-title">Informations Professionnelles</div>\n            <div class="grid">\n              '.concat(e.occupation?'\n              <div class="item">\n                <div class="label">Occupation</div>\n                <div class="value">'.concat(h(e.occupation),"</div>\n              </div>\n              "):"","\n              ").concat(e.monthlyIncome?'\n              <div class="item">\n                <div class="label">Revenu Mensuel</div>\n                <div class="value">'.concat(f(e.monthlyIncome),"</div>\n              </div>\n              "):"","\n            </div>\n          </div>\n          "):"",'\n\n          <div class="footer">\n            Document g\xe9n\xe9r\xe9 le ').concat((new Date).toLocaleDateString("fr-FR")," \xe0 ").concat((new Date).toLocaleTimeString("fr-FR"),"\n          </div>\n\n          <script>\n            window.onload = function(){ \n              window.print(); \n              setTimeout(() => window.close(), 500); \n            }\n          <\/script>\n        </body>\n        </html>");m.document.write(v),m.document.close()}catch(Sc){console.error("Error generating customer PDF:",Sc),Ts.error("Erreur lors de la g\xe9n\xe9ration du PDF")}},V=((0,e.useRef)(null),async e=>{N(!0);try{const t=await Ww.loadCustomersHavingAccounts("TERM_SAVINGS");console.log("\ud83d\udccb Final matched customers:",t);let r=t||[];e&&(r=r.filter(t=>{if(void 0!==e.branchId&&null!==e.branchId){const l=O.find(t=>Number(t.id)===Number(e.branchId));if(l){var r,n,s,a,i;const e=null!==(r=null!==(n=t.accountBranchId)&&void 0!==n?n:t.branchId)&&void 0!==r?r:t.BranchId,o=null!==(s=null!==(a=null!==(i=t.accountBranchName)&&void 0!==i?i:t.branchName)&&void 0!==a?a:t.BranchName)&&void 0!==s?s:"";if(null!=e){if(Number(e)!==Number(l.id))return!1}else if((o||"")!==l.name)return!1}}if(e.status&&t.isActive!==("ACTIVE"===e.status))return!1;if(e.dateFrom||e.dateTo){const r=new Date(t.createdAt);if(e.dateFrom){if(r<new Date(e.dateFrom))return!1}if(e.dateTo){const t=new Date(e.dateTo);if(t.setHours(23,59,59,999),r>t)return!1}}return!0})),A(r),r.length||Ts("Aucun client trouv\xe9 avec compte \xe0 terme")}catch(mn){console.error("\u274c Error loading term clients:",mn),Ts.error("Erreur lors du chargement des clients \xe0 terme"),A([])}finally{N(!1)}}),W=async()=>{const e=j.trim();if(e&&!(e.length<2))try{const t=e.toUpperCase();if(T.current===t)return;T.current=t,N(!0);const r=await Fm.searchCustomers(t);A(r||[])}catch(mn){console.error(mn),Ts.error("Erreur de recherche client")}finally{N(!1)}};(0,e.useEffect)(()=>{const e=j.trim();if(!e||e.length<2)return;const t=e.toUpperCase(),r=QS.test(t)?200:500,n=setTimeout(()=>{T.current!==t&&W()},r);return()=>clearTimeout(n)},[j]),(0,e.useEffect)(()=>{V()},[]),(0,e.useEffect)(()=>{(I||Object.values(R).some(e=>void 0!==e&&""!==e))&&V(R)},[R]),(0,e.useEffect)(()=>{M(1)},[R,j]);const q=Math.ceil(S.length/U),$=(F-1)*U,K=S.slice($,$+U);return(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",{type:"text",placeholder:"Recherche par nom, t\xe9l\xe9phone ou num\xe9ro de document...",value:j,onChange:e=>w(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),W())},className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),!b&&S.length>0&&(0,ju.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,ju.jsxs)("button",{onClick:()=>_w(S,"Liste Clients - Comptes \xe0 Terme"),className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2 text-sm",children:[(0,ju.jsx)(Hu,{className:"h-4 w-4"})," PDF"]}),(0,ju.jsxs)("button",{onClick:()=>{try{const e=S.map(e=>{var t,r,n,s,a;return{id:e.id||"",fullName:e.fullName||"".concat(e.firstName||""," ").concat(e.lastName||"").trim(),phone:(null===(t=e.contact)||void 0===t?void 0:t.primaryPhone)||"",email:(null===(r=e.contact)||void 0===r?void 0:r.email)||"",documentNumber:(null===(n=e.identity)||void 0===n?void 0:n.documentNumber)||"",branch:e.accountBranchName||e.branchName||e.branch||"",commune:(null===(s=e.address)||void 0===s?void 0:s.commune)||"",department:(null===(a=e.address)||void 0===a?void 0:a.department)||"",createdAt:e.createdAt||"",status:e.isActive?"Actif":"Inactif"}}),t=(0,Rp.unparse)(e),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),s=URL.createObjectURL(r);n.href=s,n.download="clients_term_savings_".concat((new Date).toISOString().slice(0,10),".csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout(()=>{try{URL.revokeObjectURL(s)}catch(e){}},2e3),Ts.success("Export CSV pr\xeat")}catch(mn){console.error("CSV export error",mn),Ts.error("Erreur lors de l'export CSV")}},className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2 text-sm",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"})," CSV"]}),(0,ju.jsxs)("button",{onClick:()=>{try{const e=S.map(e=>{var t,r,n,s,a;return{id:e.id||"",fullName:e.fullName||"".concat(e.firstName||""," ").concat(e.lastName||"").trim(),phone:(null===(t=e.contact)||void 0===t?void 0:t.primaryPhone)||"",email:(null===(r=e.contact)||void 0===r?void 0:r.email)||"",documentNumber:(null===(n=e.identity)||void 0===n?void 0:n.documentNumber)||"",branch:e.accountBranchName||e.branchName||e.branch||"",commune:(null===(s=e.address)||void 0===s?void 0:s.commune)||"",department:(null===(a=e.address)||void 0===a?void 0:a.department)||"",createdAt:e.createdAt||"",status:e.isActive?"Actif":"Inactif"}}),t=Aw.json_to_sheet(e),r=Aw.book_new();Aw.book_append_sheet(r,t,"Clients"),hw(r,"clients_term_savings_".concat((new Date).toISOString().slice(0,10),".xlsx")),Ts.success("Export XLSX pr\xeat")}catch(mn){console.error("XLSX export error",mn),Ts.error("Erreur lors de l'export XLSX")}},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"})," XLSX"]})]}),(0,ju.jsxs)("button",{onClick:()=>P(!I),className:"mt-3 flex items-center space-x-2 text-blue-600 hover:text-blue-700 transition-colors text-sm font-medium",children:[(0,ju.jsx)(hm,{className:"h-4 w-4"}),(0,ju.jsx)("span",{children:"Filtres avanc\xe9s"}),I?(0,ju.jsx)(fm,{className:"h-4 w-4"}):(0,ju.jsx)(gm,{className:"h-4 w-4"})]}),I&&(0,ju.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Succursale"}),(0,ju.jsxs)("select",{value:null!==(r=R.branchId)&&void 0!==r?r:"",onChange:e=>_((0,s.A)((0,s.A)({},R),{},{branchId:e.target.value?Number(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"Toutes"}),O.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut"}),(0,ju.jsxs)("select",{value:R.status,onChange:e=>_((0,s.A)((0,s.A)({},R),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"Tous les statuts"}),(0,ju.jsx)("option",{value:"ACTIVE",children:"Actif"}),(0,ju.jsx)("option",{value:"INACTIVE",children:"Inactif"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de d\xe9but"}),(0,ju.jsx)("input",{type:"date",value:R.dateFrom,onChange:e=>_((0,s.A)((0,s.A)({},R),{},{dateFrom:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de fin"}),(0,ju.jsx)("input",{type:"date",value:R.dateTo,onChange:e=>_((0,s.A)((0,s.A)({},R),{},{dateTo:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ju.jsxs)("div",{className:"mt-4 flex items-center space-x-3",children:[(0,ju.jsx)("button",{onClick:()=>_({branchId:void 0,status:"",dateFrom:"",dateTo:""}),className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Effacer les filtres"}),(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:[S.length," client(s) trouv\xe9(s)"]})]})]})]}),b&&(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:"Recherche en cours..."}),!b&&0===S.length&&(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)(Hu,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:j.trim()?"Aucun client trouv\xe9":"Aucun client avec compte \xe0 terme"}),(0,ju.jsx)("p",{className:"text-gray-500",children:j.trim()?"Essayez de modifier vos crit\xe8res de recherche":"Les clients ayant des comptes d'\xe9pargne \xe0 terme appara\xeetront ici"})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"w-full",children:[(0,ju.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Document"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Adresse"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===S.length?(0,ju.jsx)("tr",{children:(0,ju.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center",children:(0,ju.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,ju.jsx)(Ru,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,ju.jsx)("p",{className:"text-gray-500",children:j.trim()?"Aucun client ne correspond \xe0 votre recherche":"Aucun client avec compte \xe0 terme pour le moment"})]})})}):K.map(e=>{var t,r,n,s,a;return(0,ju.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ju.jsx)(Ru,{className:"h-5 w-5 text-blue-600"})}),(0,ju.jsxs)("div",{className:"ml-4",children:[(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.fullName||"N/A"}),(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:e.customerCode?"Code: ".concat(e.customerCode):"ID: "+e.id})]})]})}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:H((null===(t=e.contact)||void 0===t?void 0:t.primaryPhone)||e.primaryPhone||e.phone)}),(null===(r=e.contact)||void 0===r?void 0:r.email)&&(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:e.contact.email})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:e.documents&&e.documents.length>0?(0,ju.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,ju.jsxs)("span",{className:"font-medium",children:[e.documents.length," document(s)"]}),(0,ju.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.documents.slice(0,2).map((e,t)=>(0,ju.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded-full",children:e.documentTypeName||e.documentType||"Document"},t)),e.documents.length>2&&(0,ju.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",e.documents.length-2," autres"]})]})]}):void 0!==(null===(n=e.identity)||void 0===n?void 0:n.documentType)?(0,ju.jsxs)("div",{className:"flex flex-col",children:[(0,ju.jsx)("span",{className:"font-medium",children:z(e.identity.documentType)}),(0,ju.jsx)("span",{className:"text-xs text-gray-500",children:e.identity.documentNumber||"\u2014"})]}):(0,ju.jsx)("span",{className:"text-gray-500",children:"Aucun document"})})}),(0,ju.jsxs)("td",{className:"px-6 py-4",children:[(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:(null===(s=e.address)||void 0===s?void 0:s.commune)||"N/A"}),(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:(null===(a=e.address)||void 0===a?void 0:a.department)||"N/A"})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.isActive?(0,ju.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Actif"}):(0,ju.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Inactif"})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,ju.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,ju.jsx)("button",{onClick:()=>(async e=>{try{const t=await Fm.getCustomer(e);g(t),k(!0)}catch(Sc){console.error("Error loading customer for edit:",Sc),Ts.error("Impossible de charger le client")}})(e.id),className:"text-blue-600 hover:text-blue-900 transition-colors p-2 hover:bg-blue-50 rounded-lg",title:"Modifier",children:(0,ju.jsx)(xm,{className:"h-5 w-5"})}),(0,ju.jsx)("button",{onClick:()=>(g(e),void y(!0)),className:"text-gray-600 hover:text-gray-900 transition-colors p-2 hover:bg-gray-50 rounded-lg",title:"Voir les d\xe9tails",children:(0,ju.jsx)(fi,{className:"h-5 w-5"})}),(0,ju.jsx)("button",{onClick:()=>G(e),className:"text-green-600 hover:text-green-900 transition-colors p-2 hover:bg-green-50 rounded-lg",title:"Ekspo PDF",children:(0,ju.jsx)(zu,{className:"h-5 w-5"})})]})})]},e.id)})})]})}),!b&&S.length>0&&(0,ju.jsxs)("div",{className:"px-4 py-3 bg-white border-t flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:["Affichage ",$+1," \u2013 ",Math.min($+U,S.length)," sur ",S.length]}),(0,ju.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ju.jsx)("label",{className:"text-sm text-gray-600",children:"Lignes"}),(0,ju.jsxs)("select",{value:U,onChange:e=>{B(Number(e.target.value)),M(1)},className:"px-2 py-1 border rounded",children:[(0,ju.jsx)("option",{value:10,children:"10"}),(0,ju.jsx)("option",{value:20,children:"20"}),(0,ju.jsx)("option",{value:50,children:"50"}),(0,ju.jsx)("option",{value:100,children:"100"})]}),(0,ju.jsx)("button",{onClick:()=>M(e=>Math.max(1,e-1)),disabled:F<=1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Pr\xe9c"}),(0,ju.jsx)("span",{className:"text-sm",children:"Page"}),(0,ju.jsx)("select",{value:F,onChange:e=>M(Number(e.target.value)),className:"px-2 py-1 border rounded",children:Array.from({length:q}).map((e,t)=>(0,ju.jsx)("option",{value:t+1,children:t+1},t))}),(0,ju.jsx)("button",{onClick:()=>M(e=>Math.min(q,e+1)),disabled:F>=q,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Suiv"})]})]})]}),v&&f&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"D\xe9tails du Client"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:f.fullName})]}),(0,ju.jsx)("button",{onClick:()=>y(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,ju.jsx)(vm,{className:"h-5 w-5"})})]}),(0,ju.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Ru,{className:"h-5 w-5 mr-2 text-blue-600"}),"Informations Personnelles"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Pr\xe9nom"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:f.firstName})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Nom"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:f.lastName})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Date de Naissance"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:f.dateOfBirth?new Date(f.dateOfBirth).toLocaleDateString("fr-FR"):"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Genre"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:"Masculin"===Tp(f.gender)?"Homme":"F\xe9minin"===Tp(f.gender)?"Femme":"\u2014"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"ID Client"}),(0,ju.jsx)("p",{className:"text-base text-gray-900 font-mono bg-blue-50 px-2 py-1 rounded inline-block",children:f.customerCode||f.id})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Statut"}),(0,ju.jsx)("p",{className:"text-base",children:f.isActive?(0,ju.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Actif"}):(0,ju.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Inactif"})})]})]})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Ku,{className:"h-5 w-5 mr-2 text-blue-600"}),"Adresse"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Rue"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===(n=f.address)||void 0===n?void 0:n.street)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Commune"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===(a=f.address)||void 0===a?void 0:a.commune)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"D\xe9partement"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===(i=f.address)||void 0===i?void 0:i.department)||"N/A"})]})]})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Du,{className:"h-5 w-5 mr-2 text-blue-600"}),"Informations de Contact"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"T\xe9l\xe9phone Principal"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:H((null===(l=f.contact)||void 0===l?void 0:l.primaryPhone)||f.primaryPhone)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"T\xe9l\xe9phone Secondaire"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:H((null===(o=f.contact)||void 0===o?void 0:o.secondaryPhone)||f.secondaryPhone)||"N/A"})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Email"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===(c=f.contact)||void 0===c?void 0:c.email)||f.email||"N/A"})]})]})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(pm,{className:"h-5 w-5 mr-2 text-blue-600"}),"Documents d'Identification"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Type de Document"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:z(null===(d=f.identity)||void 0===d?void 0:d.documentType)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Num\xe9ro de Document"}),(0,ju.jsx)("p",{className:"text-base text-gray-900 font-mono",children:(null===(u=f.identity)||void 0===u?void 0:u.documentNumber)||"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Date d'\xc9mission"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:null!==(m=f.identity)&&void 0!==m&&m.issuedDate?new Date(f.identity.issuedDate).toLocaleDateString("fr-FR"):"N/A"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Date d'Expiration"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:null!==(h=f.identity)&&void 0!==h&&h.expiryDate?new Date(f.identity.expiryDate).toLocaleDateString("fr-FR"):"N/A"})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Autorit\xe9 d'\xc9mission"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(null===(p=f.identity)||void 0===p?void 0:p.issuingAuthority)||"N/A"})]})]})]}),f.documents&&f.documents.length>0&&(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Hu,{className:"h-5 w-5 mr-2 text-blue-600"}),"Documents T\xe9l\xe9charg\xe9s (",f.documents.length,")"]}),(0,ju.jsx)("div",{className:"space-y-3",children:f.documents.map(e=>{var t;const r=e.Id||e.id,n=e.Name||e.name||(e.FilePath||e.filePath?String(e.FilePath||e.filePath).split(/[/\\]/).pop():"")||"Document",s=e.documentTypeName||"Document",a=null!==(t=e.FileSize)&&void 0!==t?t:e.fileSize,i="number"!==typeof a||isNaN(a)?null:a/1024,l=e.UploadedAt||e.uploadedAt,o=l?new Date(l):null,c=!(!o||isNaN(o.getTime()));return(0,ju.jsx)("div",{className:"bg-white rounded-lg p-3 border border-gray-200 hover:border-blue-300 transition-colors",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,ju.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,ju.jsx)(Hu,{className:"h-5 w-5 text-blue-600"})}),(0,ju.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ju.jsxs)("p",{className:"font-medium text-gray-900 truncate flex items-center gap-2",children:[(0,ju.jsx)("span",{className:"truncate",children:n}),(0,ju.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full whitespace-nowrap",children:s})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[null!==i&&(0,ju.jsxs)("span",{children:[i.toFixed(1)," KB"]}),null!==i&&c&&(0,ju.jsx)("span",{children:"\u2022"}),c&&(0,ju.jsx)("span",{children:o.toLocaleDateString("fr-FR")})]})]})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("button",{onClick:()=>(async(e,t,r)=>{try{const n=await Fm.downloadDocument(e,t),s=window.URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=r||"document",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),Ts.success("Document t\xe9l\xe9charg\xe9 avec succ\xe8s")}catch(Sc){console.error("Error downloading document:",Sc),Ts.error("Erreur lors du t\xe9l\xe9chargement du document")}})(f.id,r,n),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"T\xe9l\xe9charger",children:(0,ju.jsx)(zu,{className:"h-4 w-4"})}),(0,ju.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce document ?"))try{if(await Fm.deleteDocument(e,t),Ts.success("Document effac\xe9 avec succ\xe8s"),await V(),f&&f.id===e){const t=await Fm.getCustomer(e);g(t||null)}}catch(Sc){console.error("Error deleting document:",Sc),Ts.error("Erreur lors de la suppression du document")}})(f.id,r),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:(0,ju.jsx)(bm,{className:"h-4 w-4"})})]})]})},r)})})]}),(f.occupation||f.monthlyIncome)&&(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(ku,{className:"h-5 w-5 mr-2 text-blue-600"}),"Informations Professionnelles"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.occupation&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Occupation"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:f.occupation})]}),f.monthlyIncome&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Revenu Mensuel"}),(0,ju.jsx)("p",{className:"text-base text-gray-900",children:(e=>null==e||isNaN(e)?"\u2014":new Intl.NumberFormat("fr-FR",{maximumFractionDigits:0}).format(e)+" HTG")(f.monthlyIncome)})]})]})]})]}),(0,ju.jsxs)("div",{className:"flex justify-between p-6 border-t border-gray-200",children:[(0,ju.jsx)("button",{onClick:()=>y(!1),className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Fermer"}),(0,ju.jsx)("div",{className:"flex gap-3",children:(0,ju.jsxs)("button",{onClick:()=>{y(!1),k(!0)},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,ju.jsx)(xm,{className:"h-5 w-5"}),"Modifier"]})})]})]})}),D&&f&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[92vh] overflow-auto",children:(0,ju.jsx)("div",{className:"p-4",children:(0,ju.jsx)(kp,{customer:f,onSubmit:async e=>{try{await Fm.updateCustomer(f.id,e),Ts.success("Client mis \xe0 jour"),k(!1),await V()}catch(t){throw console.error("Error updating customer:",t),Ts.error("Erreur lors de la mise \xe0 jour"),t}},onCancel:()=>k(!1)})})})}),C&&f&&(0,ju.jsx)(Sp,{customer:f,onClose:()=>E(!1),onSuccess:async()=>{E(!1),await V()}})]})},rA=()=>{const[t,r]=(0,e.useState)("search"),[n,s]=(0,e.useState)(""),[a,i]=(0,e.useState)(!1),[l,o]=(0,e.useState)([]),[c,d]=(0,e.useState)(null),[u,m]=(0,e.useState)("ALL"),[h,p]=(0,e.useState)(""),[x,f]=(0,e.useState)(""),[g,v]=(0,e.useState)(""),[y,b]=(0,e.useState)(!1),[N,j]=(0,e.useState)([]),[w,S]=(0,e.useState)([]),[A,T]=(0,e.useState)(!1),[C,E]=(0,e.useState)({accountNumber:"",type:"ALL",dateFrom:"",dateTo:"",branchId:"",minAmount:"",maxAmount:""}),D=async()=>{const e=n.trim();if(e){i(!0);try{const t=await Di.getAccountByNumber(e);d(t);const r=await Di.getAccountTransactions(e);o(r||[]),Ts.success("".concat(r.length," transaction(s) charg\xe9e(s)"))}catch(mn){console.error(mn),Ts.error("Erreur lors du chargement des transactions"),d(null),o([])}finally{i(!1)}}else Ts.error("Saisissez un num\xe9ro de compte")},k=async()=>{T(!0);try{const e={};C.accountNumber&&(e.accountNumber=C.accountNumber),C.type&&"ALL"!==C.type&&(e.type=C.type),C.dateFrom&&(e.startDate=C.dateFrom),C.dateTo&&(e.endDate=C.dateTo),C.branchId&&(e.branchId=C.branchId),C.minAmount&&(e.minAmount=C.minAmount),C.maxAmount&&(e.maxAmount=C.maxAmount);const t=await Di.getAllTermSavingsTransactions(e);S(t||[]),Ts.success("".concat(t.length," transaction(s) trouv\xe9e(s)"))}catch(mn){console.error(mn),Ts.error("Erreur lors du chargement de l'historique"),S([])}finally{T(!1)}};(0,e.useEffect)(()=>{(async()=>{try{const e=await Di.getAllBranches();j(e)}catch(mn){console.error("Erreur lors du chargement des succursales:",mn)}})()},[]),(0,e.useEffect)(()=>{"history"===t&&0===w.length&&k()},[t]);const R=(0,e.useMemo)(()=>{let e=[...l];if("ALL"!==u&&(e=e.filter(e=>e.type===u)),h){const t=new Date(h);e=e.filter(e=>new Date(e.processedAt)>=t)}if(x){const t=new Date(x);t.setHours(23,59,59,999),e=e.filter(e=>new Date(e.processedAt)<=t)}if(g.trim()){const t=g.toLowerCase();e=e.filter(e=>(e.description||"").toLowerCase().includes(t)||(e.reference||"").toLowerCase().includes(t)||String(e.amount).includes(t))}return e},[l,u,h,x,g]),_=(0,e.useMemo)(()=>{const e=e=>String(e.type||"").toUpperCase(),t=R.filter(t=>{const r=e(t);return"DEPOSIT"===r||r.includes("OPENING")}),r=R.filter(t=>"WITHDRAWAL"===e(t)),n=R.filter(t=>"INTEREST"===e(t));return{totalDeposits:t.reduce((e,t)=>e+Number(t.amount||0),0),totalWithdrawals:r.reduce((e,t)=>e+Number(t.amount||0),0),totalInterests:n.reduce((e,t)=>e+Number(t.amount||0),0),countDeposits:t.length,countWithdrawals:r.length,countInterests:n.length}},[R]);return(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-2 flex gap-2",children:[(0,ju.jsxs)("button",{onClick:()=>r("search"),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-all ".concat("search"===t?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,ju.jsx)(Vu,{className:"h-4 w-4 inline-block mr-2"}),"Recherche par compte"]}),(0,ju.jsxs)("button",{onClick:()=>r("history"),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-all ".concat("history"===t?"bg-purple-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,ju.jsx)(Hu,{className:"h-4 w-4 inline-block mr-2"}),"Historique global"]})]}),"search"===t&&(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border flex flex-col md:flex-row gap-3 items-center",children:[(0,ju.jsxs)("div",{className:"relative w-full md:flex-1",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,ju.jsx)("input",{type:"text",placeholder:"Num\xe9ro de compte (ex: G12345678901)",value:n,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),D())},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsx)("div",{className:"flex items-center gap-2",children:(0,ju.jsxs)("button",{onClick:D,disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[a?(0,ju.jsx)(tS,{className:"h-4 w-4 animate-spin"}):(0,ju.jsx)(Vu,{className:"h-4 w-4"}),"Charger"]})})]}),c&&(0,ju.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white p-6 rounded-xl shadow-lg",children:(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Client"}),(0,ju.jsx)("p",{className:"text-lg font-semibold",children:c.customerName})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Compte"}),(0,ju.jsx)("p",{className:"text-lg font-semibold",children:c.accountNumber})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Solde actuel"}),(0,ju.jsxs)("p",{className:"text-lg font-semibold",children:[Number(c.balance).toFixed(2)," ",c.currency]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Statut"}),(0,ju.jsx)("p",{className:"text-lg font-semibold",children:c.status})]})]})}),l.length>0&&(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ju.jsx)("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-green-600 font-medium",children:"D\xe9p\xf4ts"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-green-700",children:_.countDeposits}),(0,ju.jsxs)("p",{className:"text-xs text-green-600",children:[_.totalDeposits.toFixed(2)," ",null===c||void 0===c?void 0:c.currency]})]}),(0,ju.jsx)(ku,{className:"h-8 w-8 text-green-500"})]})}),(0,ju.jsx)("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-red-600 font-medium",children:"Retraits"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-red-700",children:_.countWithdrawals}),(0,ju.jsxs)("p",{className:"text-xs text-red-600",children:[_.totalWithdrawals.toFixed(2)," ",null===c||void 0===c?void 0:c.currency]})]}),(0,ju.jsx)(rS,{className:"h-8 w-8 text-red-500"})]})}),(0,ju.jsx)("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Int\xe9r\xeats"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:_.countInterests}),(0,ju.jsxs)("p",{className:"text-xs text-blue-600",children:[_.totalInterests.toFixed(2)," ",null===c||void 0===c?void 0:c.currency]})]}),(0,ju.jsx)(Du,{className:"h-8 w-8 text-blue-500"})]})}),(0,ju.jsx)("div",{className:"bg-purple-50 border border-purple-200 p-4 rounded-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-purple-600 font-medium",children:"Total"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-purple-700",children:R.length}),(0,ju.jsx)("p",{className:"text-xs text-purple-600",children:"transaction(s)"})]}),(0,ju.jsx)(Hu,{className:"h-8 w-8 text-purple-500"})]})})]}),l.length>0&&(0,ju.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,ju.jsx)(hm,{className:"h-5 w-5 text-gray-500"}),(0,ju.jsx)("h3",{className:"font-semibold text-gray-700",children:"Filtres"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),(0,ju.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,ju.jsx)("option",{value:"ALL",children:"Tous les types"}),(0,ju.jsx)("option",{value:"Deposit",children:"D\xe9p\xf4ts"}),(0,ju.jsx)("option",{value:"Withdrawal",children:"Retraits"}),(0,ju.jsx)("option",{value:"Interest",children:"Int\xe9r\xeats"}),(0,ju.jsx)("option",{value:"Fee",children:"Frais"}),(0,ju.jsx)("option",{value:"Other",children:"Autres"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date d\xe9but"}),(0,ju.jsx)("input",{type:"date",value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date fin"}),(0,ju.jsx)("input",{type:"date",value:x,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Recherche"}),(0,ju.jsx)("input",{type:"text",placeholder:"Description, r\xe9f\xe9rence...",value:g,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]})]}),("ALL"!==u||h||x||g)&&(0,ju.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,ju.jsxs)("p",{className:"text-sm text-gray-600",children:[R.length," r\xe9sultat(s) sur ",l.length," transaction(s)"]}),(0,ju.jsxs)("button",{onClick:()=>{m("ALL"),p(""),f(""),v("")},className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[(0,ju.jsx)(vm,{className:"h-4 w-4"}),"R\xe9initialiser filtres"]})]})]}),(0,ju.jsxs)("div",{className:"flex flex-wrap gap-2 items-center justify-between",children:[(0,ju.jsx)("div",{className:"flex gap-2",children:l.length>0&&(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("button",{onClick:()=>{try{const e=N.reduce((e,t)=>(e[t.id]=t.name,e),{}),t=R.map(t=>({id:t.id,date:t.processedAt,reference:t.reference,accountNumber:t.accountNumber,type:t.type,amount:t.amount,currency:t.currency,processedBy:t.processedByName||t.processedBy||"",branch:e[t.branchId]||"N/A",status:t.status})),r=(0,Rp.unparse)(t),s=new Blob([r],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(s),i=document.createElement("a");i.href=a,i.download="transactions-".concat(n,"-").concat((new Date).toISOString().slice(0,10),".csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a),Ts.success("Export CSV termin\xe9")}catch(mn){console.error(mn),Ts.error("Erreur lors de l'export CSV")}},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"}),"Export CSV"]}),(0,ju.jsxs)("button",{onClick:()=>{try{const e=window.open("","_blank");if(!e)return void Ts.error("Veuillez autoriser les pop-ups pour exporter en PDF");const t=R.length>0?R:l,r=t.map(e=>'\n        <tr>\n          <td style="padding:6px;border:1px solid #ddd">'.concat(new Date(e.processedAt).toLocaleString("fr-FR"),'</td>\n          <td style="padding:6px;border:1px solid #ddd">').concat(e.type,'</td>\n          <td style="padding:6px;border:1px solid #ddd;text-align:right">').concat(Number(e.amount).toFixed(2),'</td>\n          <td style="padding:6px;border:1px solid #ddd">').concat((e.description||"").replaceAll("<","&lt;"),'</td>\n          <td style="padding:6px;border:1px solid #ddd;text-align:right">').concat(Number(e.balanceAfter).toFixed(2),'</td>\n          <td style="padding:6px;border:1px solid #ddd">').concat((e.reference||"").replaceAll("<","&lt;"),"</td>\n        </tr>\n      ")).join(""),s='\n        <html>\n        <head>\n          <meta charset="utf-8">\n          <title>Transactions - '.concat(n,'</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; }\n            h1 { color: #333; font-size: 20px; }\n            .info { margin-bottom: 20px; background: #f5f5f5; padding: 10px; border-radius: 5px; }\n            table { width: 100%; border-collapse: collapse; font-size: 11px; }\n            th, td { border: 1px solid #ddd; padding: 6px; text-align: left; }\n            th { background-color: #4a5568; color: white; }\n            tr:nth-child(even) { background-color: #f9f9f9; }\n            .right { text-align: right; }\n            .stats { margin-top: 15px; padding: 10px; background: #e6f7ff; border-radius: 5px; }\n          </style>\n        </head>\n        <body>\n          <h1>Relev\xe9 de Transactions - Compte \xe0 Terme</h1>\n          <div class="info">\n            <strong>Compte:</strong> ').concat(n,"<br>\n            ").concat(c?"<strong>Client:</strong> ".concat(c.customerName,"<br>\n            <strong>Devise:</strong> ").concat(c.currency,"<br>\n            <strong>Solde actuel:</strong> ").concat(c.balance," ").concat(c.currency,"<br>"):"","\n            <strong>Date d'impression:</strong> ").concat((new Date).toLocaleString("fr-FR"),"<br>\n            <strong>P\xe9riode:</strong> ").concat(h||"D\xe9but"," - ").concat(x||"Aujourd'hui","<br>\n            <strong>Nombre de transactions:</strong> ").concat(t.length,'\n          </div>\n          <table>\n            <thead>\n              <tr>\n                <th>Date</th>\n                <th>Type</th>\n                <th class="right">Montant</th>\n                <th>Description</th>\n                <th class="right">Solde apr\xe8s</th>\n                <th>R\xe9f\xe9rence</th>\n              </tr>\n            </thead>\n            <tbody>\n              ').concat(r,'\n            </tbody>\n          </table>\n          <div class="stats">\n            <strong>Statistiques:</strong><br>\n            D\xe9p\xf4ts: ').concat(_.countDeposits," (").concat(_.totalDeposits.toFixed(2)," ").concat((null===c||void 0===c?void 0:c.currency)||"",")<br>\n            Retraits: ").concat(_.countWithdrawals," (").concat(_.totalWithdrawals.toFixed(2)," ").concat((null===c||void 0===c?void 0:c.currency)||"",")<br>\n            Int\xe9r\xeats: ").concat(_.countInterests," (").concat(_.totalInterests.toFixed(2)," ").concat((null===c||void 0===c?void 0:c.currency)||"",")\n          </div>\n          <script>window.onload = function(){ setTimeout(() => window.print(), 300); };<\/script>\n        </body>\n        </html>");e.document.write(s),e.document.close(),Ts.success("Fen\xeatre d'export ouverte - utilisez Imprimer pour sauver en PDF")}catch(mn){console.error("PDF export error",mn),Ts.error("Erreur lors de l'export PDF")}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2",children:[(0,ju.jsx)(Hu,{className:"h-4 w-4"}),"Imprimer PDF"]})]})}),c&&(0,ju.jsxs)("button",{onClick:()=>b(!0),disabled:!c||"ACTIVE"!==(c.status||"").toUpperCase(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"ACTIVE"!==(c.status||"").toUpperCase()?"Le compte doit \xeatre actif pour effectuer une transaction":"Nouvelle transaction",children:[(0,ju.jsx)(Au,{className:"h-4 w-4"}),"Nouvelle Transaction"]})]}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:a?(0,ju.jsxs)("div",{className:"py-20 text-center",children:[(0,ju.jsx)(tS,{className:"h-10 w-10 animate-spin text-blue-600 mx-auto mb-3"}),(0,ju.jsx)("p",{className:"text-gray-500",children:"Chargement des transactions..."})]}):0===l.length?(0,ju.jsxs)("div",{className:"py-20 text-center",children:[(0,ju.jsx)(Hu,{className:"h-16 w-16 text-gray-300 mx-auto mb-3"}),(0,ju.jsx)("p",{className:"text-gray-500 text-lg mb-2",children:"Aucune transaction"}),(0,ju.jsx)("p",{className:"text-gray-400 text-sm",children:'Entrez un num\xe9ro de compte et cliquez sur "Charger"'})]}):(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Heure"}),(0,ju.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,ju.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),(0,ju.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,ju.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Solde avant"}),(0,ju.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Solde apr\xe8s"}),(0,ju.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"R\xe9f\xe9rence"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===R.length?(0,ju.jsx)("tr",{children:(0,ju.jsx)("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"Aucune transaction ne correspond aux filtres"})}):R.map(e=>{const t=String(e.type||"").toUpperCase(),r="DEPOSIT"===t||t.includes("OPENING"),n="WITHDRAWAL"===t,s="INTEREST"===t;return(0,ju.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:new Date(e.processedAt).toLocaleString("fr-FR")}),(0,ju.jsx)("td",{className:"px-4 py-3",children:(0,ju.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(r?"bg-green-100 text-green-800":n?"bg-red-100 text-red-800":s?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.type})}),(0,ju.jsxs)("td",{className:"px-4 py-3 text-sm text-right font-medium ".concat(r||s?"text-green-600":n?"text-red-600":"text-gray-900"),children:[r||s?"+":n?"-":"",Number(e.amount).toFixed(2)," ",e.currency]}),(0,ju.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.description||"\u2014"}),(0,ju.jsx)("td",{className:"px-4 py-3 text-sm text-right text-gray-600",children:Number(e.balanceBefore||0).toFixed(2)}),(0,ju.jsx)("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-900",children:Number(e.balanceAfter).toFixed(2)}),(0,ju.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.reference||"\u2014"})]},e.id)})})]})})}),y&&c&&(0,ju.jsx)(sA,{account:c,onClose:()=>b(!1),onSuccess:()=>{b(!1),D()}})]}),"history"===t&&(0,ju.jsx)(nA,{transactions:w,loading:A,filters:C,onFiltersChange:E,onRefresh:k,branches:N})]})},nA=t=>{let{transactions:r,loading:n,filters:a,onFiltersChange:i,onRefresh:l,branches:o}=t;const c=(0,e.useMemo)(()=>{let e=[...r];if(a.accountNumber&&(e=e.filter(e=>(e.accountNumber||"").toLowerCase().includes(a.accountNumber.toLowerCase()))),a.type&&"ALL"!==a.type&&(e=e.filter(e=>String(e.type||"").toUpperCase()===a.type.toUpperCase())),a.dateFrom){const t=new Date(a.dateFrom);e=e.filter(e=>new Date(e.processedAt)>=t)}if(a.dateTo){const t=new Date(a.dateTo);t.setHours(23,59,59,999),e=e.filter(e=>new Date(e.processedAt)<=t)}return a.minAmount&&(e=e.filter(e=>Number(e.amount||0)>=Number(a.minAmount))),a.maxAmount&&(e=e.filter(e=>Number(e.amount||0)<=Number(a.maxAmount))),e},[r,a]),d=(0,e.useMemo)(()=>{const e=e=>String(e.type||"").toUpperCase(),t=c.filter(t=>{const r=e(t);return"DEPOSIT"===r||r.includes("OPENING")}),r=c.filter(t=>"WITHDRAWAL"===e(t)),n=c.filter(t=>"INTEREST"===e(t));return{totalDeposits:t.reduce((e,t)=>e+Number(t.amount||0),0),totalWithdrawals:r.reduce((e,t)=>e+Number(t.amount||0),0),totalInterests:n.reduce((e,t)=>e+Number(t.amount||0),0),countDeposits:t.length,countWithdrawals:r.length,countInterests:n.length,totalCount:c.length}},[c]),u=(0,e.useMemo)(()=>{const e={};return o.forEach(t=>{e[t.id]=t.name}),e},[o]);return(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)(hm,{className:"h-5 w-5 text-purple-600"}),(0,ju.jsx)("h3",{className:"font-semibold text-gray-700",children:"Filtres avanc\xe9s"})]}),(0,ju.jsxs)("button",{onClick:l,disabled:n,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2",children:[n?(0,ju.jsx)(tS,{className:"h-4 w-4 animate-spin"}):(0,ju.jsx)(nS,{className:"h-4 w-4"}),"Actualiser"]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Num\xe9ro de compte"}),(0,ju.jsx)("input",{type:"text",placeholder:"G12345...",value:a.accountNumber,onChange:e=>i((0,s.A)((0,s.A)({},a),{},{accountNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 text-sm"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Succursale"}),(0,ju.jsxs)("select",{value:a.branchId,onChange:e=>i((0,s.A)((0,s.A)({},a),{},{branchId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 text-sm",children:[(0,ju.jsx)("option",{value:"",children:"Toutes les succursales"}),o.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),(0,ju.jsxs)("select",{value:a.type,onChange:e=>i((0,s.A)((0,s.A)({},a),{},{type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 text-sm",children:[(0,ju.jsx)("option",{value:"ALL",children:"Tous les types"}),(0,ju.jsx)("option",{value:"DEPOSIT",children:"D\xe9p\xf4ts"}),(0,ju.jsx)("option",{value:"WITHDRAWAL",children:"Retraits"}),(0,ju.jsx)("option",{value:"INTEREST",children:"Int\xe9r\xeats"}),(0,ju.jsx)("option",{value:"FEE",children:"Frais"}),(0,ju.jsx)("option",{value:"OTHER",children:"Autres"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date d\xe9but"}),(0,ju.jsx)("input",{type:"date",value:a.dateFrom,onChange:e=>i((0,s.A)((0,s.A)({},a),{},{dateFrom:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 text-sm"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date fin"}),(0,ju.jsx)("input",{type:"date",value:a.dateTo,onChange:e=>i((0,s.A)((0,s.A)({},a),{},{dateTo:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 text-sm"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Montant min"}),(0,ju.jsx)("input",{type:"number",placeholder:"0.00",value:a.minAmount,onChange:e=>i((0,s.A)((0,s.A)({},a),{},{minAmount:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 text-sm"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Montant max"}),(0,ju.jsx)("input",{type:"number",placeholder:"0.00",value:a.maxAmount,onChange:e=>i((0,s.A)((0,s.A)({},a),{},{maxAmount:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 text-sm"})]}),(0,ju.jsx)("div",{className:"lg:col-span-2 flex items-end gap-2",children:(0,ju.jsxs)("button",{onClick:()=>i({accountNumber:"",type:"ALL",dateFrom:"",dateTo:"",branchId:"",minAmount:"",maxAmount:""}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm flex items-center justify-center gap-2",children:[(0,ju.jsx)(vm,{className:"h-4 w-4"}),"R\xe9initialiser filtres"]})})]}),c.length<r.length&&(0,ju.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,ju.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,ju.jsx)("span",{className:"font-semibold text-purple-600",children:c.length})," r\xe9sultat(s) sur ",(0,ju.jsx)("span",{className:"font-semibold",children:r.length})," transaction(s)"]}),a.branchId&&(0,ju.jsxs)("p",{className:"text-sm text-purple-600",children:["Succursale: ",(0,ju.jsx)("span",{className:"font-semibold",children:u[Number(a.branchId)]})]})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ju.jsx)("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-green-600 font-medium",children:"D\xe9p\xf4ts"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-green-700",children:d.countDeposits}),(0,ju.jsx)("p",{className:"text-xs text-green-600",children:d.totalDeposits.toLocaleString("fr-FR",{minimumFractionDigits:2})})]}),(0,ju.jsx)(ku,{className:"h-8 w-8 text-green-500"})]})}),(0,ju.jsx)("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-red-600 font-medium",children:"Retraits"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-red-700",children:d.countWithdrawals}),(0,ju.jsx)("p",{className:"text-xs text-red-600",children:d.totalWithdrawals.toLocaleString("fr-FR",{minimumFractionDigits:2})})]}),(0,ju.jsx)(rS,{className:"h-8 w-8 text-red-500"})]})}),(0,ju.jsx)("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Int\xe9r\xeats"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:d.countInterests}),(0,ju.jsx)("p",{className:"text-xs text-blue-600",children:d.totalInterests.toLocaleString("fr-FR",{minimumFractionDigits:2})})]}),(0,ju.jsx)(Du,{className:"h-8 w-8 text-blue-500"})]})}),(0,ju.jsx)("div",{className:"bg-purple-50 border border-purple-200 p-4 rounded-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-purple-600 font-medium",children:"Total"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-purple-700",children:d.totalCount}),(0,ju.jsx)("p",{className:"text-xs text-purple-600",children:"transaction(s)"})]}),(0,ju.jsx)(Hu,{className:"h-8 w-8 text-purple-500"})]})})]}),c.length>0&&(0,ju.jsxs)("div",{className:"flex gap-2",children:[(0,ju.jsxs)("button",{onClick:()=>{try{const e=[["Date","Compte","Succursale","Type","Montant","Devise","Description","Solde apr\xe8s","R\xe9f\xe9rence","Trait\xe9 par"].join(",")];c.forEach(t=>{const r=[new Date(t.processedAt).toLocaleString("fr-FR"),t.accountNumber||"",u[t.branchId]||"N/A",t.type,String(t.amount),t.currency,(t.description||"").replaceAll(","," "),String(t.balanceAfter),t.reference||"",t.processedByName||t.processedBy||""];e.push(r.map(e=>'"'.concat(String(null!==e&&void 0!==e?e:"").replaceAll('"','""'),'"')).join(","))});const t=new Blob(["\ufeff"+e.join("\n")],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download="historique-transactions-".concat((new Date).toISOString().slice(0,10),".csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r),Ts.success("Export CSV termin\xe9")}catch(mn){console.error(mn),Ts.error("Erreur lors de l'export CSV")}},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"}),"Export CSV (",c.length," transactions)"]}),(0,ju.jsxs)("button",{onClick:()=>{try{const e=window.open("","_blank");if(!e)return void Ts.error("Veuillez autoriser les pop-ups pour exporter en PDF");const t=c.map(e=>{const t=String(e.type||"").toUpperCase(),r="DEPOSIT"===t||t.includes("OPENING")?"+":"WITHDRAWAL"===t?"-":"";return'\n          <tr>\n            <td style="padding:8px;border:1px solid #ddd">'.concat(new Date(e.processedAt).toLocaleString("fr-FR"),'</td>\n            <td style="padding:8px;border:1px solid #ddd">').concat(e.accountNumber||"",'</td>\n            <td style="padding:8px;border:1px solid #ddd">').concat(u[e.branchId]||"N/A",'</td>\n            <td style="padding:8px;border:1px solid #ddd">').concat(e.type,'</td>\n            <td style="padding:8px;border:1px solid #ddd;text-align:right">').concat(r).concat(Number(e.amount).toFixed(2)," ").concat(e.currency,'</td>\n            <td style="padding:8px;border:1px solid #ddd">').concat((e.description||"").substring(0,30),'</td>\n            <td style="padding:8px;border:1px solid #ddd;text-align:right">').concat(Number(e.balanceAfter).toFixed(2),'</td>\n            <td style="padding:8px;border:1px solid #ddd">').concat(e.processedByName||e.processedBy||"","</td>\n          </tr>\n        ")}).join(""),r='\n        <html><head><meta charset="utf-8"><title>Historique des Transactions - Comptes \xe0 Terme</title>\n        <style>\n          body { font-family: Arial, Helvetica, sans-serif; padding: 20px; }\n          h2 { color: #581c87; margin-bottom: 10px; }\n          .info { margin-bottom: 20px; font-size: 14px; color: #666; }\n          .stats { margin-bottom: 20px; padding: 10px; background: #f9fafb; border-radius: 8px; }\n          table { border-collapse: collapse; width: 100%; margin-top: 20px; }\n          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n          th { background: #9333ea; color: white; font-weight: bold; }\n          tr:nth-child(even) { background: #fdfdfe; }\n          .amount { text-align: right; }\n        </style>\n        </head><body>\n        <h2>Historique des Transactions - Comptes \xe0 Terme</h2>\n        <div class="info">\n          <p><strong>G\xe9n\xe9r\xe9 le:</strong> '.concat((new Date).toLocaleString("fr-FR"),'</p>\n        </div>\n        <div class="stats">\n          <p><strong>Total transactions:</strong> ').concat(c.length," | <strong>D\xe9p\xf4ts:</strong> ").concat(d.countDeposits," | <strong>Retraits:</strong> ").concat(d.countWithdrawals,"</p>\n          <p><strong>Montant d\xe9p\xf4ts:</strong> ").concat(d.totalDeposits.toFixed(2)," | <strong>Montant retraits:</strong> ").concat(d.totalWithdrawals.toFixed(2),'</p>\n        </div>\n        <table>\n          <thead>\n            <tr>\n              <th>Date</th>\n              <th>Compte</th>\n              <th>Succursale</th>\n              <th>Type</th>\n              <th class="amount">Montant</th>\n              <th>Description</th>\n              <th class="amount">Solde apr\xe8s</th>\n              <th>Trait\xe9 par</th>\n            </tr>\n          </thead>\n          <tbody>').concat(t,"</tbody>\n        </table>\n        <script>\n          window.onload = function() {\n            setTimeout(function() {\n              window.print();\n            }, 300);\n          };\n        <\/script>\n        </body></html>\n      ");e.document.write(r),e.document.close(),Ts.success("Fen\xeatre d'export ouverte - utilisez Imprimer pour sauver en PDF")}catch(mn){console.error(mn),Ts.error("Erreur lors de l'export PDF")}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2",children:[(0,ju.jsx)(sS,{className:"h-4 w-4"}),"Export PDF (",c.length," transactions)"]})]}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:n?(0,ju.jsxs)("div",{className:"py-20 text-center",children:[(0,ju.jsx)(tS,{className:"h-10 w-10 animate-spin text-purple-600 mx-auto mb-3"}),(0,ju.jsx)("p",{className:"text-gray-500",children:"Chargement de l'historique..."})]}):0===c.length?(0,ju.jsxs)("div",{className:"py-20 text-center",children:[(0,ju.jsx)(Hu,{className:"h-16 w-16 text-gray-300 mx-auto mb-3"}),(0,ju.jsx)("p",{className:"text-gray-500 text-lg mb-2",children:"Aucune transaction trouv\xe9e"}),(0,ju.jsx)("p",{className:"text-gray-400 text-sm",children:"Modifiez les filtres ou actualisez les donn\xe9es"})]}):(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-purple-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-purple-700 uppercase tracking-wider",children:"Date & Heure"}),(0,ju.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-purple-700 uppercase tracking-wider",children:"Compte"}),(0,ju.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-purple-700 uppercase tracking-wider",children:"Succursale"}),(0,ju.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-purple-700 uppercase tracking-wider",children:"Type"}),(0,ju.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-purple-700 uppercase tracking-wider",children:"Montant"}),(0,ju.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-purple-700 uppercase tracking-wider",children:"Description"}),(0,ju.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-purple-700 uppercase tracking-wider",children:"Solde apr\xe8s"}),(0,ju.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-purple-700 uppercase tracking-wider",children:"R\xe9f\xe9rence"}),(0,ju.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-purple-700 uppercase tracking-wider",children:"Trait\xe9 par"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((e,t)=>{const r=String(e.type||"").toUpperCase(),n="DEPOSIT"===r||r.includes("OPENING"),s="WITHDRAWAL"===r,a="INTEREST"===r;return(0,ju.jsxs)("tr",{className:"hover:bg-purple-50 transition-colors",children:[(0,ju.jsx)("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:new Date(e.processedAt).toLocaleString("fr-FR")}),(0,ju.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.accountNumber||"\u2014"}),(0,ju.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:u[e.branchId]||"N/A"}),(0,ju.jsx)("td",{className:"px-4 py-3",children:(0,ju.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(n?"bg-green-100 text-green-800":s?"bg-red-100 text-red-800":a?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.type})}),(0,ju.jsxs)("td",{className:"px-4 py-3 text-sm text-right font-medium ".concat(n||a?"text-green-600":s?"text-red-600":"text-gray-900"),children:[n||a?"+":s?"-":"",Number(e.amount).toFixed(2)," ",e.currency]}),(0,ju.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.description||"\u2014"}),(0,ju.jsx)("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-900",children:Number(e.balanceAfter).toFixed(2)}),(0,ju.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.reference||"\u2014"}),(0,ju.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.processedByName||e.processedBy||"\u2014"})]},e.id||t)})})]})})})]})},sA=t=>{let{account:r,onClose:n,onSuccess:s}=t;const[a,i]=(0,e.useState)("DEPOSIT"),[l,o]=(0,e.useState)(""),[c,d]=(0,e.useState)(""),[u,m]=(0,e.useState)(!1),h=Number(r.availableBalance||0);return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[(0,ju.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-xl font-bold",children:"Nouvelle Transaction"}),(0,ju.jsxs)("p",{className:"text-blue-100 text-sm",children:[r.accountNumber," \u2022 ",r.customerName]})]}),(0,ju.jsx)("button",{onClick:n,className:"text-white/90 hover:text-white text-2xl leading-none",children:"\xd7"})]}),(0,ju.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=Number(l);if(!t||t<=0)Ts.error("Montant invalide");else if("WITHDRAWAL"===a&&t>Number(r.availableBalance||0))Ts.error("Solde disponible insuffisant (".concat(Number(r.availableBalance||0).toFixed(2)," ").concat(r.currency,")"));else if(window.confirm("Confirmer cette transaction?\n\n"+"Type: ".concat("DEPOSIT"===a?"D\xe9p\xf4t":"Retrait","\n")+"Montant: ".concat(t.toFixed(2)," ").concat(r.currency,"\n")+"Compte: ".concat(r.accountNumber,"\n")+"Client: ".concat(r.customerName,"\n\n")+"Cette action est irr\xe9versible.")){m(!0);try{await Di.processTermSavingsTransaction({accountNumber:r.accountNumber||"",type:a,amount:t,currency:r.currency,description:c.trim()||void 0}),Ts.success("".concat("DEPOSIT"===a?"D\xe9p\xf4t":"Retrait"," de ").concat(t.toFixed(2)," ").concat(r.currency," effectu\xe9 avec succ\xe8s")),s()}catch(Sc){var n,i;console.error("Error processing transaction:",Sc);const t=(null===Sc||void 0===Sc||null===(n=Sc.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||(null===Sc||void 0===Sc?void 0:Sc.message)||"Erreur lors du traitement de la transaction";Ts.error(t)}finally{m(!1)}}},className:"p-6 space-y-4",children:[(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border space-y-1 text-sm",children:[(0,ju.jsxs)("div",{className:"flex justify-between",children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Solde actuel:"}),(0,ju.jsxs)("span",{className:"font-semibold",children:[Number(r.balance).toFixed(2)," ",r.currency]})]}),(0,ju.jsxs)("div",{className:"flex justify-between",children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Solde disponible:"}),(0,ju.jsxs)("span",{className:"font-semibold",children:[Number(r.availableBalance||0).toFixed(2)," ",r.currency]})]}),(0,ju.jsxs)("div",{className:"flex justify-between",children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Terme:"}),(0,ju.jsx)("span",{className:"font-semibold",children:Ni(r.termType||yi.TWELVE_MONTHS)})]}),(0,ju.jsxs)("div",{className:"flex justify-between",children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"\xc9ch\xe9ance:"}),(0,ju.jsx)("span",{className:"font-semibold",children:r.maturityDate?new Date(r.maturityDate).toLocaleDateString("fr-FR"):"\u2014"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de transaction"}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ju.jsxs)("button",{type:"button",onClick:()=>i("DEPOSIT"),className:"p-3 rounded-lg border-2 transition-all ".concat("DEPOSIT"===a?"border-green-500 bg-green-50 text-green-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"),children:[(0,ju.jsx)(ku,{className:"h-5 w-5 mx-auto mb-1"}),(0,ju.jsx)("span",{className:"text-sm font-medium",children:"D\xe9p\xf4t"})]}),(0,ju.jsxs)("button",{type:"button",onClick:()=>i("WITHDRAWAL"),className:"p-3 rounded-lg border-2 transition-all ".concat("WITHDRAWAL"===a?"border-red-500 bg-red-50 text-red-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"),children:[(0,ju.jsx)(rS,{className:"h-5 w-5 mx-auto mb-1"}),(0,ju.jsx)("span",{className:"text-sm font-medium",children:"Retrait"})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Montant (",r.currency,")"]}),(0,ju.jsx)("input",{type:"number",step:"0.01",min:"0.01",max:"WITHDRAWAL"===a?h:void 0,value:l,onChange:e=>o(e.target.value),placeholder:"0.00",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-lg font-semibold"}),"WITHDRAWAL"===a&&(0,ju.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum disponible: ",h.toFixed(2)," ",r.currency]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optionnel)"}),(0,ju.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),placeholder:"Notes ou remarques sur cette transaction...",rows:3,maxLength:200,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 resize-none"}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[c.length,"/200 caract\xe8res"]})]}),"WITHDRAWAL"===a&&(0,ju.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex gap-2",children:[(0,ju.jsx)(Su,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,ju.jsx)("p",{className:"font-medium",children:"Attention!"}),(0,ju.jsx)("p",{className:"text-xs mt-1",children:"Les retraits avant \xe9ch\xe9ance peuvent entra\xeener des p\xe9nalit\xe9s. V\xe9rifiez la date d'\xe9ch\xe9ance du compte."})]})]}),(0,ju.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,ju.jsx)("button",{type:"button",onClick:n,disabled:u,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"Annuler"}),(0,ju.jsx)("button",{type:"submit",disabled:u||!l,className:"flex-1 px-4 py-2 rounded-lg text-white font-medium disabled:opacity-50 flex items-center justify-center gap-2 ".concat("DEPOSIT"===a?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"),children:u?(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)(tS,{className:"h-4 w-4 animate-spin"}),"Traitement..."]}):(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)(Ju,{className:"h-4 w-4"}),"Confirmer"]})})]})]})]})})},aA=t=>{var r;let{account:n,onClose:s,onRefresh:a}=t;const[i,l]=(0,e.useState)(!1),o={[yi.THREE_MONTHS]:3,[yi.SIX_MONTHS]:6,[yi.TWELVE_MONTHS]:12,[yi.TWENTY_FOUR_MONTHS]:24},c=new Date(n.openingDate),d=n.maturityDate?new Date(n.maturityDate):(()=>{const e=new Date(c),t=o[n.termType||yi.TWELVE_MONTHS]||12;return e.setMonth(e.getMonth()+t),e})(),u=o[n.termType||yi.TWELVE_MONTHS]||12,m=Number(null!==(r=n.interestRate)&&void 0!==r?r:ji(n.termType||yi.TWELVE_MONTHS,n.currency)),h=Number(n.balance||0),p=new Date,x=Math.max(0,Math.floor((p.getTime()-c.getTime())/864e5)),f=(Math.max(1,Math.floor((d.getTime()-c.getTime())/864e5)),h*m*(u/12)),g=h*m*(x/365),v=h+f,y=e=>"HTG"===n.currency?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" HTG":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(e);return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-auto",children:[(0,ju.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 p-6 text-white flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-xl font-bold",children:"D\xe9tails du Compte \xe0 Terme"}),(0,ju.jsxs)("p",{className:"text-purple-100",children:[n.accountNumber," \u2022 ",n.currency," \u2022 ",Ni(n.termType||yi.TWELVE_MONTHS)]})]}),(0,ju.jsx)("button",{onClick:s,className:"text-white/90 hover:text-white text-2xl leading-none",children:"\xd7"})]}),(0,ju.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[(0,ju.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Informations"}),(0,ju.jsxs)("ul",{className:"text-sm text-gray-700 space-y-1",children:[(0,ju.jsxs)("li",{children:[(0,ju.jsx)("span",{className:"text-gray-500",children:"Client: "}),n.customerName||"\u2014"]}),(0,ju.jsxs)("li",{children:[(0,ju.jsx)("span",{className:"text-gray-500",children:"Succursale: "}),n.branchName||"\u2014"]}),(0,ju.jsxs)("li",{children:[(0,ju.jsx)("span",{className:"text-gray-500",children:"Ouverture: "}),new Date(n.openingDate).toLocaleDateString("fr-FR")]}),(0,ju.jsxs)("li",{children:[(0,ju.jsx)("span",{className:"text-gray-500",children:"\xc9ch\xe9ance: "}),d.toLocaleDateString("fr-FR")," (",Math.max(0,Math.ceil((d.getTime()-p.getTime())/864e5))," jours restants)"]}),(0,ju.jsxs)("li",{children:[(0,ju.jsx)("span",{className:"text-gray-500",children:"Taux: "}),(100*m).toFixed(2),"%/an"]}),(0,ju.jsxs)("li",{children:[(0,ju.jsx)("span",{className:"text-gray-500",children:"Statut: "}),n.status]})]})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[(0,ju.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Montants"}),(0,ju.jsxs)("ul",{className:"text-sm text-gray-700 space-y-1",children:[(0,ju.jsxs)("li",{children:[(0,ju.jsx)("span",{className:"text-gray-500",children:"Capital (approx.): "}),(0,ju.jsx)("span",{className:"font-medium",children:y(h)})]}),(0,ju.jsxs)("li",{children:[(0,ju.jsx)("span",{className:"text-gray-500",children:"Int\xe9r\xeat accumul\xe9 (estim\xe9): "}),(0,ju.jsx)("span",{className:"font-medium text-purple-700",children:y(g)})]}),(0,ju.jsxs)("li",{children:[(0,ju.jsx)("span",{className:"text-gray-500",children:"Int\xe9r\xeat projet\xe9 \xe0 l'\xe9ch\xe9ance: "}),(0,ju.jsx)("span",{className:"font-medium text-purple-700",children:y(f)})]}),(0,ju.jsxs)("li",{children:[(0,ju.jsx)("span",{className:"text-gray-500",children:"Total \xe0 l'\xe9ch\xe9ance: "}),(0,ju.jsx)("span",{className:"font-semibold",children:y(v)})]})]}),(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Les calculs sont des estimations simples (int\xe9r\xeat simple) bas\xe9es sur les donn\xe9es disponibles."})]})]}),(0,ju.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,ju.jsxs)("button",{onClick:async()=>{Ts.success("Ouverture des transactions...")},disabled:i,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 flex items-center gap-2 disabled:opacity-50",title:"Voir les transactions",children:[(0,ju.jsx)(Hu,{className:"w-4 h-4"}),"Transactions"]}),(0,ju.jsxs)("button",{onClick:()=>{Ts.success("Int\xe9r\xeat projet\xe9: ".concat(y(f)))},disabled:"ACTIVE"!==(n.status||"").toUpperCase(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2 disabled:opacity-50",title:"ACTIVE"!==(n.status||"").toUpperCase()?"Disponible uniquement pour les comptes actifs":"Calculer les int\xe9r\xeats projet\xe9s",children:[(0,ju.jsx)(aS,{className:"w-4 h-4"}),"Calc. int\xe9r\xeats"]}),(0,ju.jsxs)("button",{onClick:async()=>{if(!window.confirm("Confirmer le renouvellement du compte ".concat(n.accountNumber," ?")))return;const e=Ts.loading("Renouvellement en cours...");try{await Di.renewTermSavingsAccount(String(n.id||n.accountNumber)),Ts.dismiss(e),Ts.success("Renouvellement effectu\xe9"),a(),s()}catch(mn){var t,r,i;Ts.dismiss(e);const s=null===mn||void 0===mn||null===(t=mn.response)||void 0===t?void 0:t.status;if(404===s||501===s||400===s)return void Ts(e=>(0,ju.jsxs)("div",{className:"text-sm",children:[(0,ju.jsx)("p",{className:"font-semibold",children:"Renouvellement"}),(0,ju.jsx)("p",{children:"Cette action sera disponible lorsque l'API backend sera pr\xeate."}),(0,ju.jsx)("div",{className:"mt-2 flex gap-2",children:(0,ju.jsx)("button",{onClick:()=>Ts.dismiss(e.id),className:"px-3 py-1 border rounded",children:"Fermer"})})]}));const a=(null===mn||void 0===mn||null===(r=mn.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||(null===mn||void 0===mn?void 0:mn.message)||"Erreur lors du renouvellement";Ts.error(a)}},disabled:i||"ACTIVE"!==(n.status||"").toUpperCase(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-50",title:"ACTIVE"!==(n.status||"").toUpperCase()?"Disponible uniquement pour les comptes actifs":"Renouveler le compte \xe0 l'\xe9ch\xe9ance",children:[(0,ju.jsx)(nS,{className:"w-4 h-4"}),"Renouveler"]}),(0,ju.jsxs)("button",{onClick:async()=>{if("CLOSED"===(n.status||"").toUpperCase())return void Ts.error("Ce compte est d\xe9j\xe0 ferm\xe9.");if("INACTIVE"===(n.status||"").toUpperCase())return void Ts.error("Ce compte est inactif. Contactez un administrateur.");const e=new Date;if(e>=d)return void Ts.error('Ce compte est d\xe9j\xe0 arriv\xe9 \xe0 \xe9ch\xe9ance. Utilisez "Fermer compte" pour une fermeture normale.');const t=Math.ceil((d.getTime()-e.getTime())/864e5),r=window.prompt("Le compte n'est pas encore \xe9chu (".concat(t," jours restants).\n\n")+"Pour un retrait anticip\xe9, entrez le pourcentage de p\xe9nalit\xe9 (%) \xe0 appliquer (ex: 2):","2");if(!r)return;const i=Number(r);if(isNaN(i)||i<0)return void Ts.error("Pourcentage de p\xe9nalit\xe9 invalide");const o=Number(n.balance||0)*(i/100),c=Number(n.balance||0)-o,u=window.prompt("RETRAIT ANTICIP\xc9 du compte ".concat(n.accountNumber,"\n\n")+"Balance actuelle: ".concat(n.balance," ").concat(n.currency,"\n")+"P\xe9nalit\xe9 (".concat(i,"%): ").concat(o.toFixed(2)," ").concat(n.currency,"\n")+"Montant net \xe0 verser: ".concat(c.toFixed(2)," ").concat(n.currency,"\n\n")+"Entrez la raison du retrait anticip\xe9:","Retrait anticip\xe9 \xe0 la demande du client");if(u){if(window.confirm("\u26a0\ufe0f CONFIRMER LE RETRAIT ANTICIP\xc9?\n\n"+"Compte: ".concat(n.accountNumber,"\n")+"Balance: ".concat(n.balance," ").concat(n.currency,"\n")+"P\xe9nalit\xe9 (".concat(i,"%): ").concat(o.toFixed(2)," ").concat(n.currency,"\n")+"Net \xe0 verser: ".concat(c.toFixed(2)," ").concat(n.currency,"\n\n")+"Cette action est IRR\xc9VERSIBLE et fermera d\xe9finitivement le compte.")){l(!0);try{await Di.closeTermSavingsAccount(String(n.id),u,i),Ts.success("Retrait anticip\xe9 effectu\xe9 avec p\xe9nalit\xe9 de ".concat(i,"%. Compte ").concat(n.accountNumber," ferm\xe9.")),a(),s()}catch(Sc){var m,h;console.error("Error during early withdrawal:",Sc);const t=(null===Sc||void 0===Sc||null===(m=Sc.response)||void 0===m||null===(h=m.data)||void 0===h?void 0:h.message)||(null===Sc||void 0===Sc?void 0:Sc.message)||"Erreur lors du retrait anticip\xe9";Ts.error(t)}finally{l(!1)}}}else Ts.error("La raison est obligatoire")},disabled:"ACTIVE"!==(n.status||"").toUpperCase(),className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center gap-2 disabled:opacity-50",title:"ACTIVE"!==(n.status||"").toUpperCase()?"Disponible uniquement pour les comptes actifs":"Calculer retrait anticip\xe9 avec p\xe9nalit\xe9",children:[(0,ju.jsx)(Su,{className:"w-4 h-4"}),"Retrait anticip\xe9"]}),(0,ju.jsxs)("button",{onClick:async()=>{if("CLOSED"===(n.status||"").toUpperCase())return void Ts.error('Ce compte est d\xe9j\xe0 ferm\xe9. Utilisez le bouton "Supprimer" pour l\'effacer d\xe9finitivement.');if("INACTIVE"===(n.status||"").toUpperCase())return void Ts.error("Ce compte est inactif. Contactez un administrateur pour le r\xe9activer avant de le fermer.");const e=new Date,t=n.maturityDate?new Date(n.maturityDate):null,r=!!t&&e>=t;if(!r&&t){const r=Math.ceil((t.getTime()-e.getTime())/864e5),c=window.prompt("Ce compte arrive \xe0 \xe9ch\xe9ance dans ".concat(r," jours.\n\nPour un retrait anticip\xe9, entrez le pourcentage de p\xe9nalit\xe9 (%) \xe0 appliquer (ex: 2):"),"2");if(!c)return;const d=Number(c);if(isNaN(d)||d<0)return void Ts.error("Pourcentage de p\xe9nalit\xe9 invalide");const u=Number(n.balance||0)*(d/100),m=Number(n.balance||0)-u,h=window.prompt("Retrait anticip\xe9 du compte ".concat(n.accountNumber,"\n\nBalance: ").concat(n.balance," ").concat(n.currency,"\nP\xe9nalit\xe9 (").concat(d,"%): ").concat(u.toFixed(2)," ").concat(n.currency,"\nMontant net: ").concat(m.toFixed(2)," ").concat(n.currency,"\n\nEntrez la raison:"),"Retrait anticip\xe9 \xe0 la demande du client");if(!h)return void Ts.error("La raison est obligatoire");if(!window.confirm("Confirmer le retrait anticip\xe9?\n\nP\xe9nalit\xe9: ".concat(u.toFixed(2)," ").concat(n.currency,"\nNet: ").concat(m.toFixed(2)," ").concat(n.currency,"\n\nCette action est irr\xe9versible.")))return;l(!0);try{await Di.closeTermSavingsAccount(String(n.id),h,d),Ts.success("Compte ".concat(n.accountNumber," ferm\xe9 avec p\xe9nalit\xe9 de ").concat(d,"%")),a(),s()}catch(Sc){var i,o;console.error("Error closing account with penalty:",Sc);const t=(null===Sc||void 0===Sc||null===(i=Sc.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||(null===Sc||void 0===Sc?void 0:Sc.message)||"Erreur lors de la fermeture anticip\xe9e";Ts.error(t)}finally{l(!1)}}else{const e=window.prompt("Fermeture du compte ".concat(n.accountNumber," de ").concat(n.customerName,"\n\nBalance actuelle: ").concat(n.balance," ").concat(n.currency,"\n").concat(r?"Compte arriv\xe9 \xe0 \xe9ch\xe9ance":"","\n\nEntrez la raison de la fermeture:"),r?"Arriv\xe9e \xe0 \xe9ch\xe9ance":"Fermeture demand\xe9e par le client");if(!e)return void Ts.error("La raison de fermeture est obligatoire");if(!window.confirm("Confirmer la fermeture du compte ".concat(n.accountNumber,"?\n\nRaison: ").concat(e,"\n\nCette action est irr\xe9versible.")))return;l(!0);try{await Di.closeTermSavingsAccount(String(n.id),e),Ts.success("Compte ".concat(n.accountNumber," ferm\xe9 avec succ\xe8s")),a(),s()}catch(Sc){var c,d;console.error("Error closing account:",Sc);const t=(null===Sc||void 0===Sc||null===(c=Sc.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||(null===Sc||void 0===Sc?void 0:Sc.message)||"Erreur lors de la fermeture du compte";Ts.error(t)}finally{l(!1)}}},disabled:i||"ACTIVE"!==(n.status||"").toUpperCase(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2 disabled:opacity-50",title:"ACTIVE"!==(n.status||"").toUpperCase()?"Le compte est d\xe9j\xe0 ferm\xe9 ou inactif":"Fermer d\xe9finitivement le compte",children:[(0,ju.jsx)(Lp,{className:"w-4 h-4"}),"Fermer compte"]}),(0,ju.jsx)("button",{onClick:async()=>{const e=(n.status||"").toUpperCase(),t="SUSPENDED"===e||"INACTIVE"===e,r=t?"activer":"suspendre",i=t?"ACTIVE":"SUSPENDED";if("CLOSED"!==e){if(window.confirm("Confirmer l'action : ".concat(r," le compte ").concat(n.accountNumber," ?\n\nLe statut passera de ").concat(e," \xe0 ").concat(i,"."))){l(!0);try{await Di.toggleTermSavingsAccountStatus(String(n.id)),Ts.success("Compte ".concat(n.accountNumber," ").concat(t?"activ\xe9":"suspendu"," avec succ\xe8s")),a(),s()}catch(Sc){var o,c;console.error("Error toggling account status:",Sc);const t=(null===Sc||void 0===Sc||null===(o=Sc.response)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.message)||(null===Sc||void 0===Sc?void 0:Sc.message)||"Erreur lors du changement de statut";Ts.error(t)}finally{l(!1)}}}else Ts.error("Impossible de modifier le statut d'un compte ferm\xe9.")},disabled:i||"CLOSED"===(n.status||"").toUpperCase(),className:"px-4 py-2 text-white rounded-lg flex items-center gap-2 disabled:opacity-50 ".concat("SUSPENDED"===(n.status||"").toUpperCase()||"INACTIVE"===(n.status||"").toUpperCase()?"bg-green-600 hover:bg-green-700":"bg-yellow-600 hover:bg-yellow-700"),title:"CLOSED"===(n.status||"").toUpperCase()?"Impossible de modifier un compte ferm\xe9":"SUSPENDED"===(n.status||"").toUpperCase()||"INACTIVE"===(n.status||"").toUpperCase()?"Activer le compte":"Suspendre le compte (bloquer temporairement)",children:"SUSPENDED"===(n.status||"").toUpperCase()||"INACTIVE"===(n.status||"").toUpperCase()?(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)(Ju,{className:"w-4 h-4"}),"Activer"]}):(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)(Su,{className:"w-4 h-4"}),"Suspendre"]})}),(0,ju.jsxs)("button",{onClick:()=>function(e,t){try{const r=new Date(e.openingDate),n='<!DOCTYPE html>\n    <html lang="fr">\n    <head>\n      <meta charset="UTF-8" />\n      <title>Certificat de D\xe9p\xf4t</title>\n      <style>\n        body { font-family: Arial, sans-serif; padding: 24px; }\n        .title { text-align:center; font-size:20px; margin-bottom: 12px; }\n        .subtitle { text-align:center; color:#555; margin-bottom:24px; }\n        .box { border:1px solid #ccc; border-radius:8px; padding:16px; }\n        .row { display:flex; justify-content:space-between; margin:6px 0; }\n        .label { color:#666; }\n        .value { font-weight:600; }\n        .footer { margin-top:24px; font-size:12px; color:#666; }\n      </style>\n    </head>\n    <body>\n      <div class="title">Certificat de D\xe9p\xf4t \xe0 Terme</div>\n      <div class="subtitle">Kredi Ti Machann \u2022 '.concat(e.branchName||"Succursale",'</div>\n      <div class="box">\n        <div class="row"><div class="label">Num\xe9ro de compte</div><div class="value">').concat(e.accountNumber,'</div></div>\n        <div class="row"><div class="label">Client</div><div class="value">').concat(e.customerName||"",'</div></div>\n        <div class="row"><div class="label">Devise</div><div class="value">').concat(e.currency,'</div></div>\n        <div class="row"><div class="label">Montant (capital)</div><div class="value">').concat(t.principal,'</div></div>\n        <div class="row"><div class="label">Taux</div><div class="value">').concat((100*t.rate).toFixed(2),'% par an</div></div>\n        <div class="row"><div class="label">Ouverture</div><div class="value">').concat(r.toLocaleDateString("fr-FR"),'</div></div>\n        <div class="row"><div class="label">\xc9ch\xe9ance</div><div class="value">').concat(t.maturity.toLocaleDateString("fr-FR"),'</div></div>\n        <div class="row"><div class="label">Montant \xe0 l\'\xe9ch\xe9ance (estim\xe9)</div><div class="value">').concat(t.totalAtMaturity,'</div></div>\n      </div>\n      <div class="footer">Ce certificat confirme le placement \xe0 terme aupr\xe8s de Kredi Ti Machann. Les montants affich\xe9s peuvent varier selon les conditions contractuelles et les int\xe9r\xeats calcul\xe9s.</div>\n      <script>window.onload = function(){ window.print(); setTimeout(() => window.close(), 300); }<\/script>\n    </body>\n    </html>'),s=new Blob([n],{type:"text/html"}),a=URL.createObjectURL(s);window.open(a,"_blank")}catch(mn){console.error("print certificate error",mn),Ts.error("Erreur lors de la g\xe9n\xe9ration du certificat")}}(n,{principal:h,rate:m,maturity:d,totalAtMaturity:v}),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 flex items-center gap-2",title:"Imprimer le certificat",children:[(0,ju.jsx)(Fp,{className:"w-4 h-4"}),"Imprimer"]}),(0,ju.jsxs)("button",{onClick:async()=>{if(n.balance>0)Ts.error("Impossible de supprimer un compte avec solde non-nul. Fermez-le d'abord.");else if("ACTIVE"!==(n.status||"").toUpperCase()){if(window.confirm("ATTENTION: Supprimer d\xe9finitivement le compte ".concat(n.accountNumber,"?\n\nCette action est IRR\xc9VERSIBLE et effacera toutes les donn\xe9es associ\xe9es."))){l(!0);try{await Di.deleteTermSavingsAccount(String(n.id)),Ts.success("Compte ".concat(n.accountNumber," supprim\xe9")),a(),s()}catch(Sc){var e,t;console.error("Error deleting account:",Sc);const n=(null===Sc||void 0===Sc||null===(e=Sc.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||(null===Sc||void 0===Sc?void 0:Sc.message)||"Erreur lors de la suppression du compte";Ts.error(n)}finally{l(!1)}}}else Ts.error("Impossible de supprimer un compte actif. Fermez-le d'abord.")},disabled:i||"ACTIVE"===n.status||Number(n.balance||0)>0,className:"px-4 py-2 bg-red-900 text-white rounded-lg hover:bg-red-950 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"ACTIVE"===n.status?"\u274c Fermez d'abord le compte pour pouvoir le supprimer":Number(n.balance||0)>0?"\u274c Le compte doit avoir un solde de 0 pour \xeatre supprim\xe9 (Balance actuelle: ".concat(n.balance," ").concat(n.currency,")"):"\u2705 Supprimer d\xe9finitivement le compte",children:[(0,ju.jsx)(bm,{className:"w-4 h-4"}),"Supprimer"]})]})]})]})})};const iA=t=>{let{onClose:r,onSuccess:n,initialCustomer:a}=t;const[i,l]=(0,e.useState)("customer"),[o,c]=(0,e.useState)(""),[d,u]=(0,e.useState)([]),[m,h]=(0,e.useState)(null),[p,x]=(0,e.useState)([]),[f,g]=(0,e.useState)(!1),v=(0,e.useRef)(null),y=(0,e.useRef)(""),[b,N]=(0,e.useState)({branchId:1,currency:"HTG",termType:yi.TWELVE_MONTHS,initialDeposit:0,interestRatePercent:0});(0,e.useEffect)(()=>{N(e=>(0,s.A)((0,s.A)({},e),{},{interestRatePercent:+(100*ji(e.termType,e.currency)).toFixed(2)}))},[]),(0,e.useEffect)(()=>{a&&(h(a),l("account"))},[a]),(0,e.useEffect)(()=>{N(e=>(0,s.A)((0,s.A)({},e),{},{interestRatePercent:+(100*ji(e.termType,e.currency)).toFixed(2)}))},[b.termType,b.currency]);const j=async()=>{const e=null===o||void 0===o?void 0:o.trim();if(e&&!(e.length<2))try{g(!0);const t=e.toUpperCase();if(y.current===t)return;y.current=t;const r=await Di.getSavingsCustomers(t);u(r||[])}catch(mn){console.error(mn),Ts.error("Erreur lors de la recherche du client")}finally{g(!1)}};(0,e.useEffect)(()=>{d.length>0&&v.current&&v.current.scrollIntoView({behavior:"smooth",block:"start"})},[d.length]),(0,e.useEffect)(()=>{if("customer"!==i)return;const e=null===o||void 0===o?void 0:o.trim();if(!e||e.length<2)return;const t=e.toUpperCase(),r=QS.test(t)?200:500,n=setTimeout(()=>{y.current!==t&&j()},r);return()=>clearTimeout(n)},[o,i]),(0,e.useEffect)(()=>{"account"===i&&(async()=>{try{const e=(await Di.getAllBranches()||[]).map(e=>({id:e.id||e.Id,name:e.name||e.Name}));x(e),e.length&&N(t=>(0,s.A)((0,s.A)({},t),{},{branchId:t.branchId||e[0].id}))}catch(e){}})()},[i]);return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold",children:"Ouvrir un Compte \xe0 Terme"}),(0,ju.jsx)("p",{className:"text-blue-100 mt-1",children:"customer"===i?"\xc9tape 1: S\xe9lectionner le client":"\xc9tape 2: Configurer le compte"})]}),(0,ju.jsx)("button",{onClick:r,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg",children:"\xd7"})]})}),(0,ju.jsxs)("div",{className:"p-6 md:p-8",children:["customer"===i&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rechercher un client"}),(0,ju.jsxs)("div",{className:"flex gap-2 flex-col sm:flex-row",children:[(0,ju.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),j())},placeholder:"Nom, t\xe9l\xe9phone, code client (ex: TD5765) ou document...",className:"flex-1 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,ju.jsxs)("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,ju.jsx)(Vu,{className:"h-4 w-4"}),"Chercher"]})]}),f&&(0,ju.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Recherche en cours..."}),!f&&0===d.length&&o.trim().length>=2&&(0,ju.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Aucun client trouv\xe9"})]}),d.length>0&&(0,ju.jsx)("div",{ref:v,className:"space-y-2 max-h-[50vh] overflow-y-auto border border-gray-200 rounded-lg p-2 mt-2",children:d.map(e=>(0,ju.jsx)("div",{onClick:()=>h(e),className:"p-4 border-2 rounded-lg cursor-pointer transition-all ".concat((null===m||void 0===m?void 0:m.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"),children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:e.fullName||"".concat(e.firstName," ").concat(e.lastName)}),(0,ju.jsx)("p",{className:"text-sm text-gray-500",children:e.primaryPhone||e.phone}),(e.customerCode||e.CustomerCode)&&(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:["Code: ",e.customerCode||e.CustomerCode]}),(0,ju.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[e.documentType,": ",e.documentNumber]})]}),(null===m||void 0===m?void 0:m.id)===e.id&&(0,ju.jsx)(Ju,{className:"h-6 w-6 text-blue-600"})]})},e.id))}),(0,ju.jsx)("div",{className:"flex justify-end pt-4",children:(0,ju.jsx)("button",{onClick:()=>l("account"),disabled:!m,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Continuer"})})]}),"account"===i&&m&&(0,ju.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(null===m||void 0===m||!m.id)&&(null===m||void 0===m||!m.Id))return void Ts.error("Veuillez s\xe9lectionner un client");if(!b.initialDeposit||Number(b.initialDeposit)<=0)return void Ts.error("Le d\xe9p\xf4t initial doit \xeatre sup\xe9rieur \xe0 0");if(!b.branchId)return void Ts.error("Veuillez s\xe9lectionner une succursale");const t={customerId:m.id||m.Id,currency:b.currency,initialDeposit:Number(b.initialDeposit),branchId:Number(b.branchId),termType:b.termType,interestRate:Number((b.interestRatePercent/100).toFixed(6))};try{g(!0),await Di.createTermSavingsAccount(t),n()}catch(Sc){var r;console.error("Erreur ouverture compte \xe0 terme:",Sc,{payload:t});const n=null===Sc||void 0===Sc||null===(r=Sc.response)||void 0===r?void 0:r.data,s=(null===n||void 0===n?void 0:n.message)||(null!==n&&void 0!==n&&n.errors?Object.values(n.errors).flat().join("; "):"string"===typeof n?n:JSON.stringify(n));Ts.error(s||"Erreur lors de l'ouverture du compte \xe0 terme")}finally{g(!1)}},className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Client s\xe9lectionn\xe9:"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:m.fullName||"".concat(m.firstName," ").concat(m.lastName)}),(0,ju.jsx)("button",{type:"button",onClick:()=>l("customer"),className:"text-sm text-blue-600 hover:underline mt-1",children:"Changer de client"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Devise"}),(0,ju.jsxs)("select",{value:b.currency,onChange:e=>N((0,s.A)((0,s.A)({},b),{},{currency:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,ju.jsx)("option",{value:"HTG",children:"HTG (Gourdes)"}),(0,ju.jsx)("option",{value:"USD",children:"USD (Dollars)"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Succursale"}),(0,ju.jsx)("select",{value:b.branchId,onChange:e=>N((0,s.A)((0,s.A)({},b),{},{branchId:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:0===p.length?(0,ju.jsxs)("option",{value:b.branchId,children:["#",b.branchId]}):p.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"D\xe9p\xf4t initial (requis)"}),(0,ju.jsx)("input",{type:"number",min:.01,step:.01,value:b.initialDeposit,onChange:e=>N((0,s.A)((0,s.A)({},b),{},{initialDeposit:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terme"}),(0,ju.jsxs)("select",{value:b.termType,onChange:e=>N((0,s.A)((0,s.A)({},b),{},{termType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:yi.THREE_MONTHS,children:"3 Mois"}),(0,ju.jsx)("option",{value:yi.SIX_MONTHS,children:"6 Mois"}),(0,ju.jsx)("option",{value:yi.TWELVE_MONTHS,children:"12 Mois"}),(0,ju.jsx)("option",{value:yi.TWENTY_FOUR_MONTHS,children:"24 Mois"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taux d'int\xe9r\xeat (% / an)"}),(0,ju.jsx)("input",{type:"number",step:.01,min:0,value:b.interestRatePercent,onChange:e=>N((0,s.A)((0,s.A)({},b),{},{interestRatePercent:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Suggestion: ",100*ji(b.termType,b.currency),"%"]})]})]}),(0,ju.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ju.jsx)("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Annuler"}),(0,ju.jsx)("button",{type:"submit",disabled:f,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:f?"Ouverture...":"Ouvrir le compte"})]})]})]})]})})},lA=t=>{let{onClose:r,onSuccess:n}=t;const[a,i]=(0,e.useState)("customer"),[l,o]=(0,e.useState)(!1),[c,d]=(0,e.useState)([]),[u,m]=(0,e.useState)(null),[h,p]=(0,e.useState)({branchId:1,currency:"HTG",termType:yi.TWELVE_MONTHS,initialDeposit:0,interestRatePercent:0});(0,e.useEffect)(()=>{p(e=>(0,s.A)((0,s.A)({},e),{},{interestRatePercent:+(100*ji(e.termType,e.currency)).toFixed(2)}))},[]),(0,e.useEffect)(()=>{p(e=>(0,s.A)((0,s.A)({},e),{},{interestRatePercent:+(100*ji(e.termType,e.currency)).toFixed(2)}))},[h.termType,h.currency]),(0,e.useEffect)(()=>{"account"===a&&(async()=>{try{const e=(await Di.getAllBranches()||[]).map(e=>({id:e.id||e.Id,name:e.name||e.Name}));d(e),e.length&&p(t=>(0,s.A)((0,s.A)({},t),{},{branchId:t.branchId||e[0].id}))}catch(e){}})()},[a]);return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-green-600 to-green-700 p-6 text-white",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold",children:"Nouveau Client + Compte \xe0 Terme"}),(0,ju.jsx)("p",{className:"text-green-100 mt-1",children:"customer"===a?"\xc9tape 1: Cr\xe9er le client":"\xc9tape 2: Configurer le compte"})]}),(0,ju.jsx)("button",{onClick:r,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg",children:"\xd7"})]})}),(0,ju.jsxs)("div",{className:"p-6 md:p-8",children:["customer"===a&&(0,ju.jsx)(Bm,{onSubmit:async e=>{o(!0);try{console.log("\ud83d\udce5 Raw form data:",e);const t=(e=>{var t,r;return{isBusiness:!!e.isBusiness,companyName:e.companyName||void 0,legalForm:e.legalForm||void 0,tradeRegisterNumber:e.businessRegistrationNumber||void 0,taxId:e.companyNif||void 0,firstName:e.firstName,lastName:e.lastName,dateOfBirth:e.dateOfBirth,gender:(e=>"F"===String(e).toUpperCase()?1:0)(e.gender),street:e.street,commune:e.commune,department:e.department,postalCode:e.postalAddress||e.postalCode||void 0,primaryPhone:e.primaryPhone,secondaryPhone:e.secondaryPhone||void 0,email:e.email||void 0,emergencyContactName:e.emergencyContactName||(null===(t=e.emergencyContact)||void 0===t?void 0:t.name)||void 0,emergencyContactPhone:e.emergencyContactPhone||(null===(r=e.emergencyContact)||void 0===r?void 0:r.phone)||void 0,documentType:(e=>{const t=Number(e);return isNaN(t)||t<0||t>3?0:t})(e.documentType),documentNumber:e.documentNumber,issuedDate:e.issuedDate,expiryDate:e.expiryDate||void 0,issuingAuthority:e.issuingAuthority,occupation:e.occupation||void 0,monthlyIncome:e.monthlyIncome?Number(e.monthlyIncome):void 0}})(e);console.log("\ud83d\udce4 Sending customer DTO:",t);const r=await Di.createSavingsCustomer(t);return m(r),Ts.success("Client cr\xe9\xe9 avec succ\xe8s"),i("account"),r}catch(Sc){var t,r,n;throw console.error("Erreur cr\xe9ation client:",Sc),console.error("\u274c Response data:",null===Sc||void 0===Sc||null===(t=Sc.response)||void 0===t?void 0:t.data),Ts.error((null===Sc||void 0===Sc||null===(r=Sc.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Erreur lors de la cr\xe9ation du client"),Sc}finally{o(!1)}},onCancel:r,isLoading:l}),"account"===a&&(0,ju.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(null===u||void 0===u||!u.id)&&(null===u||void 0===u||!u.Id))return void Ts.error("Client invalide");if(!h.initialDeposit||Number(h.initialDeposit)<=0)return void Ts.error("Le d\xe9p\xf4t initial doit \xeatre sup\xe9rieur \xe0 0");if(!h.branchId)return void Ts.error("Veuillez s\xe9lectionner une succursale");const t={customerId:u.id||u.Id,currency:h.currency,initialDeposit:Number(h.initialDeposit),branchId:Number(h.branchId),termType:h.termType,interestRate:Number((h.interestRatePercent/100).toFixed(6))};o(!0);try{await Di.createTermSavingsAccount(t),n()}catch(Sc){var r;console.error("Erreur ouverture compte \xe0 terme (nouveau client):",Sc,{payload:t});const n=null===Sc||void 0===Sc||null===(r=Sc.response)||void 0===r?void 0:r.data,s=(null===n||void 0===n?void 0:n.message)||(null!==n&&void 0!==n&&n.errors?Object.values(n.errors).flat().join("; "):"string"===typeof n?n:JSON.stringify(n));Ts.error(s||"Erreur lors de l'ouverture du compte")}finally{o(!1)}},className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Succursale"}),(0,ju.jsx)("select",{value:h.branchId,onChange:e=>p((0,s.A)((0,s.A)({},h),{},{branchId:Number(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:c.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Devise"}),(0,ju.jsxs)("select",{value:h.currency,onChange:e=>p((0,s.A)((0,s.A)({},h),{},{currency:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"HTG",children:"HTG"}),(0,ju.jsx)("option",{value:"USD",children:"USD"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"D\xe9p\xf4t initial"}),(0,ju.jsx)("input",{type:"number",min:0,value:h.initialDeposit,onChange:e=>p((0,s.A)((0,s.A)({},h),{},{initialDeposit:Number(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terme"}),(0,ju.jsxs)("select",{value:h.termType,onChange:e=>p((0,s.A)((0,s.A)({},h),{},{termType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:yi.THREE_MONTHS,children:"3 Mois"}),(0,ju.jsx)("option",{value:yi.SIX_MONTHS,children:"6 Mois"}),(0,ju.jsx)("option",{value:yi.TWELVE_MONTHS,children:"12 Mois"}),(0,ju.jsx)("option",{value:yi.TWENTY_FOUR_MONTHS,children:"24 Mois"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taux d'int\xe9r\xeat (% / an)"}),(0,ju.jsx)("input",{type:"number",min:0,step:.01,value:h.interestRatePercent,onChange:e=>p((0,s.A)((0,s.A)({},h),{},{interestRatePercent:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,ju.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ju.jsx)("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Annuler"}),(0,ju.jsx)("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:l?"Ouverture...":"Cr\xe9er client et ouvrir compte"})]})]})]})]})})},oA=mi("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),cA=mi("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),dA=mi("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),uA=mi("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),mA=mi("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);let hA=function(e){return e.COMMERCIAL="COMMERCIAL",e.AGRICULTURAL="AGRICULTURAL",e.PERSONAL="PERSONAL",e.EMERGENCY="EMERGENCY",e.CREDIT_LOYER="CREDIT_LOYER",e.CREDIT_AUTO="CREDIT_AUTO",e.CREDIT_MOTO="CREDIT_MOTO",e.CREDIT_PERSONNEL="CREDIT_PERSONNEL",e.CREDIT_SCOLAIRE="CREDIT_SCOLAIRE",e.CREDIT_AGRICOLE="CREDIT_AGRICOLE",e.CREDIT_PROFESSIONNEL="CREDIT_PROFESSIONNEL",e.CREDIT_APPUI="CREDIT_APPUI",e.CREDIT_HYPOTHECAIRE="CREDIT_HYPOTHECAIRE",e}({}),pA=function(e){return e.PENDING="PENDING",e.APPROVED="APPROVED",e.ACTIVE="ACTIVE",e.COMPLETED="COMPLETED",e.OVERDUE="OVERDUE",e.DEFAULTED="DEFAULTED",e.CANCELLED="CANCELLED",e}({});const xA=mi("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),fA=mi("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),gA=mi("Car",[["path",{d:"M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2",key:"l5np60"}],["circle",{cx:"6.5",cy:"16.5",r:"2.5",key:"ae40ju"}],["circle",{cx:"16.5",cy:"16.5",r:"2.5",key:"1smtlt"}]]),vA=mi("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]),yA=mi("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),bA=mi("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]),NA=mi("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),jA=mi("HandMetal",[["path",{d:"M18 12.5V10a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v1.4",key:"7eki13"}],["path",{d:"M14 11V9a2 2 0 1 0-4 0v2",key:"94qvcw"}],["path",{d:"M10 10.5V5a2 2 0 1 0-4 0v9",key:"m1ah89"}],["path",{d:"m7 15-1.76-1.76a2 2 0 0 0-2.83 2.82l3.6 3.6C7.5 21.14 9.2 22 12 22h2a8 8 0 0 0 8-8V7a2 2 0 1 0-4 0v5",key:"t1skq1"}]]),wA=mi("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),SA={[hA.COMMERCIAL]:{type:hA.COMMERCIAL,name:"Cr\xe9dit Commercial",nameKreyol:"Kredi Kom\xe8syal",description:"Financement pour activit\xe9s commerciales",descriptionKreyol:"Finansman pou aktivite kom\xe8syal",icon:xA,color:"#3B82F6",bgColor:"#EFF6FF",requiresCollateral:!1,defaultMinAmount:1e4,defaultMaxAmount:5e5,defaultMinDuration:6,defaultMaxDuration:24,defaultInterestRate:.02,category:"business"},[hA.AGRICULTURAL]:{type:hA.AGRICULTURAL,name:"Cr\xe9dit Agricole (Standard)",nameKreyol:"Kredi Agrik\xf2l (Estanda)",description:"Financement pour activit\xe9s agricoles",descriptionKreyol:"Finansman pou aktivite agrik\xf2l",icon:fA,color:"#10B981",bgColor:"#ECFDF5",requiresCollateral:!1,defaultMinAmount:1e4,defaultMaxAmount:1e6,defaultMinDuration:6,defaultMaxDuration:24,defaultInterestRate:.012,category:"business"},[hA.PERSONAL]:{type:hA.PERSONAL,name:"Cr\xe9dit Personnel (Standard)",nameKreyol:"Kredi P\xe8son\xe8l (Estanda)",description:"Pr\xeat personnel \xe0 usage g\xe9n\xe9ral",descriptionKreyol:"Pr\xe8 p\xe8son\xe8l pou tout sa w bezwen",icon:ym,color:"#8B5CF6",bgColor:"#F5F3FF",requiresCollateral:!1,defaultMinAmount:5e3,defaultMaxAmount:5e5,defaultMinDuration:3,defaultMaxDuration:24,defaultInterestRate:.025,category:"personal"},[hA.EMERGENCY]:{type:hA.EMERGENCY,name:"Cr\xe9dit d'Urgence",nameKreyol:"Kredi Ijans",description:"Pr\xeat d'urgence pour situations critiques",descriptionKreyol:"Pr\xe8 rapid pou sitiyasyon ijans",icon:Su,color:"#EF4444",bgColor:"#FEF2F2",requiresCollateral:!1,defaultMinAmount:5e3,defaultMaxAmount:2e5,defaultMinDuration:3,defaultMaxDuration:18,defaultInterestRate:.03,category:"personal"},[hA.CREDIT_LOYER]:{type:hA.CREDIT_LOYER,name:"Cr\xe9dit Loyer",nameKreyol:"Kredi Lwaye",description:"Financement pour le paiement du loyer r\xe9sidentiel ou commercial",descriptionKreyol:"Finansman pou peye lwaye lakay oswa biznis",icon:Pw,color:"#F59E0B",bgColor:"#FFFBEB",requiresCollateral:!1,defaultMinAmount:5e3,defaultMaxAmount:1e5,defaultMinDuration:3,defaultMaxDuration:12,defaultInterestRate:.02,category:"personal"},[hA.CREDIT_AUTO]:{type:hA.CREDIT_AUTO,name:"Cr\xe9dit Auto",nameKreyol:"Kredi Machin",description:"Financement pour l'achat d'un v\xe9hicule automobile",descriptionKreyol:"Finansman pou achte machin",icon:gA,color:"#06B6D4",bgColor:"#ECFEFF",requiresCollateral:!0,defaultMinAmount:5e4,defaultMaxAmount:2e6,defaultMinDuration:12,defaultMaxDuration:60,defaultInterestRate:.015,category:"vehicle"},[hA.CREDIT_MOTO]:{type:hA.CREDIT_MOTO,name:"Cr\xe9dit Moto",nameKreyol:"Kredi Motosikl\xe8t",description:"Financement pour l'achat d'une motocyclette",descriptionKreyol:"Finansman pou achte motosikl\xe8t",icon:vA,color:"#14B8A6",bgColor:"#F0FDFA",requiresCollateral:!0,defaultMinAmount:1e4,defaultMaxAmount:3e5,defaultMinDuration:6,defaultMaxDuration:36,defaultInterestRate:.018,category:"vehicle"},[hA.CREDIT_PERSONNEL]:{type:hA.CREDIT_PERSONNEL,name:"Cr\xe9dit Personnel",nameKreyol:"Kredi P\xe8son\xe8l",description:"Pr\xeat personnel pour besoins divers (\xe9v\xe9nements, urgences, etc.)",descriptionKreyol:"Pr\xe8 p\xe8son\xe8l pou div\xe8s bezwen (seremoni, ijans, elatriye)",icon:Ru,color:"#A855F7",bgColor:"#FAF5FF",requiresCollateral:!1,defaultMinAmount:5e3,defaultMaxAmount:5e5,defaultMinDuration:3,defaultMaxDuration:24,defaultInterestRate:.025,category:"personal"},[hA.CREDIT_SCOLAIRE]:{type:hA.CREDIT_SCOLAIRE,name:"Cr\xe9dit Scolaire",nameKreyol:"Kredi Eskol\xe8",description:"Financement pour frais scolaires, universitaires et mat\xe9riel \xe9ducatif",descriptionKreyol:"Finansman pou lek\xf2l, iniv\xe8site ak matery\xe8l eskol\xe8",icon:yA,color:"#6366F1",bgColor:"#EEF2FF",requiresCollateral:!1,defaultMinAmount:3e3,defaultMaxAmount:3e5,defaultMinDuration:6,defaultMaxDuration:12,defaultInterestRate:.015,category:"education"},[hA.CREDIT_AGRICOLE]:{type:hA.CREDIT_AGRICOLE,name:"Cr\xe9dit Agricole",nameKreyol:"Kredi Agrik\xf2l",description:"Financement pour activit\xe9s agricoles (semences, \xe9quipement, intrants)",descriptionKreyol:"Finansman pou aktivite agrik\xf2l (semans, zouti, pwodwi)",icon:bA,color:"#22C55E",bgColor:"#F0FDF4",requiresCollateral:!1,defaultMinAmount:1e4,defaultMaxAmount:1e6,defaultMinDuration:6,defaultMaxDuration:24,defaultInterestRate:.012,category:"business"},[hA.CREDIT_PROFESSIONNEL]:{type:hA.CREDIT_PROFESSIONNEL,name:"Cr\xe9dit Professionnel",nameKreyol:"Kredi Pwofesyon\xe8l",description:"Financement pour activit\xe9s professionnelles et entrepreneuriales",descriptionKreyol:"Finansman pou aktivite pwofesyon\xe8l ak biznis",icon:NA,color:"#0EA5E9",bgColor:"#F0F9FF",requiresCollateral:!0,defaultMinAmount:25e3,defaultMaxAmount:3e6,defaultMinDuration:12,defaultMaxDuration:48,defaultInterestRate:.015,category:"business"},[hA.CREDIT_APPUI]:{type:hA.CREDIT_APPUI,name:"Cr\xe9dit d'Appui",nameKreyol:"Kredi Sip\xf2",description:"Pr\xeat de soutien pour situations d'urgence ou besoins imm\xe9diats",descriptionKreyol:"Pr\xe8 sip\xf2 pou sitiyasyon ijans oswa bezwen imedya",icon:jA,color:"#F97316",bgColor:"#FFF7ED",requiresCollateral:!1,defaultMinAmount:5e3,defaultMaxAmount:2e5,defaultMinDuration:3,defaultMaxDuration:18,defaultInterestRate:.02,category:"personal"},[hA.CREDIT_HYPOTHECAIRE]:{type:hA.CREDIT_HYPOTHECAIRE,name:"Cr\xe9dit Hypoth\xe9caire",nameKreyol:"Kredi Ipotek\xe8",description:"Financement pour achat immobilier avec garantie hypoth\xe9caire",descriptionKreyol:"Finansman pou achte kay/t\xe8 ak garanti ipotek\xe8",icon:wA,color:"#EC4899",bgColor:"#FDF2F8",requiresCollateral:!0,defaultMinAmount:5e5,defaultMaxAmount:1e7,defaultMinDuration:60,defaultMaxDuration:240,defaultInterestRate:.008,category:"property"}};function AA(e){return SA[e]}function TA(e){return SA[e].requiresCollateral}const CA=t=>{let{selectedType:r,onSelect:n,useKreyol:s=!1,disabled:a=!1}=t;const[i,l]=(0,e.useState)("category"),[o,c]=(0,e.useState)("all"),[d,u]=(0,e.useState)(null),m=Object.values(SA),h=function(){const e={personal:[],business:[],property:[],vehicle:[],education:[]};return Object.values(SA).forEach(t=>{e[t.category].push(t)}),e}(),p=[{id:"all",name:s?"Tout Kalite":"Tous les types",nameKreyol:"Tout Kalite"},{id:"personal",name:s?"P\xe8son\xe8l":"Personnel",nameKreyol:"P\xe8son\xe8l"},{id:"business",name:s?"Biznis":"Affaires",nameKreyol:"Biznis"},{id:"vehicle",name:s?"Transp\xf2":"V\xe9hicule",nameKreyol:"Transp\xf2"},{id:"property",name:s?"Pwopriyete":"Propri\xe9t\xe9",nameKreyol:"Pwopriyete"},{id:"education",name:s?"Edikasyon":"\xc9ducation",nameKreyol:"Edikasyon"}];return(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsx)("div",{className:"flex items-center justify-between",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:s?"Chwazi Tip Kredi":"Choisir le type de cr\xe9dit"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:s?"Seleksyone tip kredi ki pi bon pou bezwen ou":"S\xe9lectionnez le type de cr\xe9dit qui correspond \xe0 vos besoins"})]})}),(0,ju.jsx)("div",{className:"flex flex-wrap gap-2",children:p.map(e=>(0,ju.jsx)("button",{onClick:()=>c(e.id),className:"\n              px-4 py-2 rounded-lg text-sm font-medium transition-colors\n              ".concat(o===e.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200","\n            "),children:s?e.nameKreyol:e.name},e.id))}),(0,ju.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:("all"===o?m:h[o]||[]).map(e=>(e=>{const t=r===e.type,i=d===e.type,l=e.icon;return(0,ju.jsxs)("div",{onClick:()=>!a&&n(e.type),onMouseEnter:()=>u(e.type),onMouseLeave:()=>u(null),className:"\n          relative p-4 rounded-lg border-2 transition-all duration-200 cursor-pointer\n          ".concat(t?"border-blue-500 bg-blue-50 shadow-md":i?"border-gray-300 bg-gray-50 shadow-sm":"border-gray-200 bg-white hover:border-gray-300","\n          ").concat(a?"opacity-50 cursor-not-allowed":"","\n        "),style:{backgroundColor:t?e.bgColor:void 0},children:[t&&(0,ju.jsx)("div",{className:"absolute top-2 right-2 bg-blue-500 text-white rounded-full p-1",children:(0,ju.jsx)(Tm,{className:"w-4 h-4"})}),e.requiresCollateral&&(0,ju.jsx)("div",{className:"absolute top-2 left-2 bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full font-medium",children:s?"Garanti":"Garantie"}),(0,ju.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center mb-3 mx-auto",style:{backgroundColor:e.bgColor},children:(0,ju.jsx)(l,{className:"w-6 h-6",style:{color:e.color}})}),(0,ju.jsx)("h3",{className:"text-center font-semibold text-gray-900 mb-2",children:s?e.nameKreyol:e.name}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 text-center mb-3 line-clamp-2",children:s?e.descriptionKreyol:e.description}),(0,ju.jsxs)("div",{className:"space-y-1 text-xs text-gray-500",children:[(0,ju.jsxs)("div",{className:"flex justify-between",children:[(0,ju.jsx)("span",{children:s?"Montan:":"Montant:"}),(0,ju.jsxs)("span",{className:"font-medium",children:[e.defaultMinAmount.toLocaleString()," - ",e.defaultMaxAmount.toLocaleString()]})]}),(0,ju.jsxs)("div",{className:"flex justify-between",children:[(0,ju.jsx)("span",{children:s?"Dire:":"Dur\xe9e:"}),(0,ju.jsxs)("span",{className:"font-medium",children:[e.defaultMinDuration,"-",e.defaultMaxDuration," ",s?"mwa":"mois"]})]}),(0,ju.jsxs)("div",{className:"flex justify-between",children:[(0,ju.jsx)("span",{children:s?"Enter\xe8:":"Int\xe9r\xeat:"}),(0,ju.jsxs)("span",{className:"font-medium",children:["~",(100*e.defaultInterestRate).toFixed(1),"%"]})]})]}),i&&(0,ju.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-90 rounded-lg p-4 flex flex-col justify-center z-10 transition-opacity",children:[(0,ju.jsx)("p",{className:"text-white text-sm text-center",children:s?e.descriptionKreyol:e.description}),e.requiresCollateral&&(0,ju.jsx)("p",{className:"text-yellow-300 text-xs text-center mt-2",children:s?"\u26a0\ufe0f Sa mande garanti":"\u26a0\ufe0f Garantie requise"})]})]},e.type)})(e))}),(0,ju.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[(0,ju.jsx)(dA,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-blue-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:s?"Enf\xf2masyon enp\xf2tan":"Information importante"}),(0,ju.jsx)("p",{children:s?"Kondisyon ak enter\xe8 ka varye selon monta ak dire kredi a. Yon ajan ap ede w finalizer detay yo.":"Les conditions et taux d'int\xe9r\xeat peuvent varier selon le montant et la dur\xe9e. Un agent vous aidera \xe0 finaliser les d\xe9tails."})]})]}),r&&(0,ju.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,ju.jsxs)("div",{className:"flex items-center gap-2 text-green-800",children:[(0,ju.jsx)(Tm,{className:"w-5 h-5"}),(0,ju.jsxs)("span",{className:"font-medium",children:[s?"Seleksyone:":"S\xe9lectionn\xe9:"," ",s?SA[r].nameKreyol:SA[r].name]})]})})]})},EA="/api",DA={[hA.COMMERCIAL]:"Commercial",[hA.AGRICULTURAL]:"Agricultural",[hA.PERSONAL]:"Personal",[hA.EMERGENCY]:"Emergency",[hA.CREDIT_LOYER]:"CreditLoyer",[hA.CREDIT_AUTO]:"CreditAuto",[hA.CREDIT_MOTO]:"CreditMoto",[hA.CREDIT_PERSONNEL]:"CreditPersonnel",[hA.CREDIT_SCOLAIRE]:"CreditScolaire",[hA.CREDIT_AGRICOLE]:"CreditAgricole",[hA.CREDIT_PROFESSIONNEL]:"CreditProfessionnel",[hA.CREDIT_APPUI]:"CreditAppui",[hA.CREDIT_HYPOTHECAIRE]:"CreditHypothecaire"},kA={HTG:"HTG",USD:"USD"},RA={0:"Collateral",1:"Personal",2:"Group",3:"Insurance",4:"Deposit"},_A={Commercial:hA.COMMERCIAL,Agricultural:hA.AGRICULTURAL,Personal:hA.PERSONAL,Emergency:hA.EMERGENCY,CreditLoyer:hA.CREDIT_LOYER,CreditAuto:hA.CREDIT_AUTO,CreditMoto:hA.CREDIT_MOTO,CreditPersonnel:hA.CREDIT_PERSONNEL,CreditScolaire:hA.CREDIT_SCOLAIRE,CreditAgricole:hA.CREDIT_AGRICOLE,CreditProfessionnel:hA.CREDIT_PROFESSIONNEL,CreditAppui:hA.CREDIT_APPUI,CreditHypothecaire:hA.CREDIT_HYPOTHECAIRE},IA={HTG:"HTG",USD:"USD"};const PA=new class{getAuthHeaders(){const e=sessionStorage.getItem("auth_token");return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}async createApplication(e){try{var t;const r=(0,s.A)((0,s.A)({},e),{},{loanType:DA[e.loanType],currency:kA[e.currency],guarantees:(null===(t=e.guarantees)||void 0===t?void 0:t.map(e=>(0,s.A)((0,s.A)({},e),{},{type:RA[e.type],currency:kA[e.currency]})))||[]}),n=(await gi.A.post("".concat(EA,"/MicrocreditLoanApplication"),r,{headers:this.getAuthHeaders()})).data;return n.loanType&&(n.loanType=_A[n.loanType]||n.loanType),n.currency&&(n.currency=IA[n.currency]||n.currency),n}catch(Sc){var r,n,a;throw console.error("Error creating loan application:",Sc),new Error((null===(r=Sc.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||(null===(a=Sc.response)||void 0===a?void 0:a.data)||"Erreur lors de la cr\xe9ation de la demande de cr\xe9dit")}}async getApplication(e){try{const t=(await gi.A.get("".concat(EA,"/MicrocreditLoanApplication/").concat(e),{headers:this.getAuthHeaders()})).data;return t.loanType&&(t.loanType=_A[t.loanType]||t.loanType),t.currency&&(t.currency=IA[t.currency]||t.currency),t}catch(Sc){var t,r;throw console.error("Error fetching loan application:",Sc),new Error((null===(t=Sc.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Erreur lors de la r\xe9cup\xe9ration de la demande")}}async getAllApplications(e){try{const t=new URLSearchParams;null!==e&&void 0!==e&&e.status&&t.append("status",e.status),null!==e&&void 0!==e&&e.loanType&&t.append("loanType",DA[e.loanType]),null!==e&&void 0!==e&&e.branchId&&t.append("branchId",e.branchId.toString());const r=(await gi.A.get("".concat(EA,"/MicrocreditLoanApplication?").concat(t.toString()),{headers:this.getAuthHeaders()})).data;return Array.isArray(r)&&r.forEach(e=>{e.loanType&&(e.loanType=_A[e.loanType]||e.loanType),e.currency&&(e.currency=IA[e.currency]||e.currency)}),r}catch(Sc){var t,r;throw console.error("Error fetching loan applications:",Sc),new Error((null===(t=Sc.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Erreur lors de la r\xe9cup\xe9ration des demandes")}}async updateApplication(e,t){try{var r;const n=(0,s.A)((0,s.A)({},t),{},{loanType:DA[t.loanType],currency:kA[t.currency],guarantees:(null===(r=t.guarantees)||void 0===r?void 0:r.map(e=>(0,s.A)((0,s.A)({},e),{},{type:RA[e.type],currency:kA[e.currency]})))||[]}),a=(await gi.A.put("".concat(EA,"/MicrocreditLoanApplication/").concat(e),n,{headers:this.getAuthHeaders()})).data;return a.loanType&&(a.loanType=_A[a.loanType]||a.loanType),a.currency&&(a.currency=IA[a.currency]||a.currency),a}catch(Sc){var n,a;throw console.error("Error updating loan application:",Sc),new Error((null===(n=Sc.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)||"Erreur lors de la mise \xe0 jour de la demande")}}async submitApplication(e){try{const t=(await gi.A.post("".concat(EA,"/MicrocreditLoanApplication/").concat(e,"/submit"),{},{headers:this.getAuthHeaders()})).data;return t.loanType&&(t.loanType=_A[t.loanType]||t.loanType),t.currency&&(t.currency=IA[t.currency]||t.currency),t}catch(Sc){var t;console.error("Error submitting loan application:",Sc);let o="Erreur lors de la soumission de la demande";var r,n,s,a,i,l;if(409===(null===(t=Sc.response)||void 0===t?void 0:t.status))o=(null===(r=Sc.response)||void 0===r?void 0:r.data)||"La demande a d\xe9j\xe0 \xe9t\xe9 soumise ou valid\xe9e";else o=(null===(n=Sc.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||(null===(a=Sc.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.title)||(null===(l=Sc.response)||void 0===l?void 0:l.data)||o;throw new Error(o)}}async getBranches(){try{return(await gi.A.get("".concat(EA,"/Branch"),{headers:this.getAuthHeaders()})).data}catch(Sc){var e,t;throw console.error("Error fetching branches:",Sc),new Error((null===(e=Sc.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Erreur lors de la r\xe9cup\xe9ration des succursales")}}async getSavingsAccountByNumber(e){try{return(await gi.A.get("".concat(EA,"/SavingsAccount/by-number/").concat(e),{headers:this.getAuthHeaders()})).data}catch(Sc){var t,r;throw console.error("Error fetching savings account by number:",Sc),new Error((null===(t=Sc.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Erreur lors de la r\xe9cup\xe9ration du compte d'\xe9pargne")}}},OA=Vd({loanType:Yd(hA),savingsAccountNumber:ud().min(1,"Num\xe9ro de compte d'\xe9pargne requis"),customerName:ud().min(1,"Nom requis"),phone:ud().min(8,"T\xe9l\xe9phone requis"),email:ud().email().or(ud().length(0)).optional(),address:ud().min(3,"Adresse requise"),occupation:ud().min(2,"Profession requise"),monthlyIncome:hu().min(0,"Revenu invalide"),monthlyExpenses:hu().min(0,"D\xe9penses invalides"),existingDebts:hu().min(0,"Dettes invalides"),dependents:hu().min(0).default(0),requestedAmount:hu().min(1,"Montant requis"),currency:ud().regex(/^(HTG|USD)$/),termMonths:hu().min(1,"Dur\xe9e requise"),interestRate:hu().min(0,"Taux d'int\xe9r\xeat invalide").max(50,"Taux d'int\xe9r\xeat trop \xe9lev\xe9"),monthlyInterestRate:hu().min(0,"Taux d'int\xe9r\xeat mensuel invalide").max(5,"Taux d'int\xe9r\xeat mensuel trop \xe9lev\xe9"),purpose:ud().min(3,"Objet du pr\xeat requis"),collateralType:ud().min(1,"Type de garantie requis"),collateralValue:hu().min(0,"Valeur de garantie invalide"),collateralDescription:ud().min(5,"Description requise"),guarantor1Name:ud().min(1,"Nom du garant requis"),guarantor1Phone:ud().min(8,"T\xe9l\xe9phone du garant requis"),guarantor1Relation:ud().min(1,"Lien requis"),guarantor2Name:ud().optional(),guarantor2Phone:ud().optional(),guarantor2Relation:ud().optional(),reference1Name:ud().min(1,"R\xe9f\xe9rence 1 requise"),reference1Phone:ud().min(1,"T\xe9l\xe9phone r\xe9f\xe9rence 1 requis"),reference2Name:ud().min(1,"R\xe9f\xe9rence 2 requise"),reference2Phone:ud().min(1,"T\xe9l\xe9phone r\xe9f\xe9rence 2 requis"),hasNationalId:Ld(),hasProofOfResidence:Ld(),hasProofOfIncome:Ld(),hasCollateralDocs:Ld(),branchId:ud().min(1,"Succursale requise"),notes:ud().optional()}),LA=t=>{let{onSubmit:r,onCancel:n}=t;const[a,i]=(0,e.useState)(1),[l,o]=(0,e.useState)(!1),[c,d]=(0,e.useState)(!1),[u,m]=(0,e.useState)(null),[h,p]=(0,e.useState)(!1),[x,f]=(0,e.useState)(null),[g,v]=(0,e.useState)(null),[y,b]=(0,e.useState)([]),[N,j]=(0,e.useState)(!1),[w,S]=(0,e.useState)(0),[A,T]=(0,e.useState)(null),[C,E]=(0,e.useState)({loanType:hA.COMMERCIAL,currency:"HTG",hasNationalId:!1,hasProofOfResidence:!1,hasProofOfIncome:!1,hasCollateralDocs:!1,monthlyExpenses:0,existingDebts:0}),{register:D,handleSubmit:k,setValue:R,watch:_,control:I}=ri({defaultValues:C,mode:"onBlur"}),P=_("loanType"),O=_("currency"),L=_("requestedAmount"),F=_("termMonths"),M=Number(_("interestRate")||42),U=_("monthlyInterestRate")?Number(_("monthlyInterestRate")):M/12,B=_("collateralType"),H=_("savingsAccountNumber"),[z,G]=(0,e.useState)(0),[V,W]=(0,e.useState)(0);(0,e.useEffect)(()=>{if(!H||H.length<12)return f(null),v(null),void R("customerName","");const e=setTimeout(()=>{(async e=>{if(!e||e.length<12)return f(null),v(null),void R("customerName","");p(!0),v(null);try{const t=await PA.getSavingsAccountByNumber(e);t&&t.customerName?(f(t),v(null),R("customerName",t.customerName),void 0!==t.balance&&S(t.balance)):(f(null),v("Compte d'\xe9pargne introuvable ou invalide"),R("customerName",""),S(0))}catch(Sc){console.error("Error fetching customer info:",Sc),f(null),v("Erreur lors de la recherche du compte. V\xe9rifiez le num\xe9ro et r\xe9essayez."),R("customerName",""),S(0)}finally{p(!1)}})(H)},500);return()=>clearTimeout(e)},[H]),(0,e.useEffect)(()=>{if(L&&F&&M){const e=U/100,t=L*(e*Math.pow(1+e,F))/(Math.pow(1+e,F)-1);G(t),W(t*F)}},[L,F,U]),(0,e.useEffect)(()=>{if(void 0!==M&&null!==M&&M>0){const e=M/12;Math.abs(e-U)>.01&&R("monthlyInterestRate",Number(e.toFixed(4)))}},[M]),(0,e.useEffect)(()=>{if(void 0!==U&&null!==U&&U>0){const e=12*U;Math.abs(e-M)>.01&&R("interestRate",Number(e.toFixed(2)))}},[U]),(0,e.useEffect)(()=>{(async()=>{j(!0);try{const e=await PA.getBranches();b(e)}catch(Sc){console.error("Error fetching branches:",Sc),b([{id:1,name:"Port-au-Prince - Centre"},{id:2,name:"Cap-Ha\xeftien"},{id:3,name:"Gona\xefves"},{id:4,name:"Les Cayes"},{id:5,name:"Saint-Marc"}])}finally{j(!1)}})()},[]),(0,e.useEffect)(()=>{if("\xc9pargne bloqu\xe9e"===B)if(L>0&&w>0){const e=.15*L;w<e?T("\u26a0\ufe0f Solde d'\xe9pargne insuffisant. Vous avez ".concat(X(w,O)," ")+"mais il faut au minimum ".concat(X(e,O)," (15% du montant demand\xe9) ")+"pour utiliser l'\xe9pargne bloqu\xe9e comme garantie."):(T(null),R("collateralValue",w))}else L>0&&0===w&&T("\u26a0\ufe0f Le solde de votre compte d'\xe9pargne sera v\xe9rifi\xe9. Assurez-vous d'avoir au moins 15% du montant demand\xe9.");else T(null)},[B,L,w,O]);const q=()=>{const e=(e=>{const t=[],r=_();switch(e){case 1:r.loanType||t.push("Veuillez s\xe9lectionner un type de cr\xe9dit");break;case 2:(!r.savingsAccountNumber||r.savingsAccountNumber.length<12)&&t.push("Num\xe9ro de compte d'\xe9pargne requis (12 caract\xe8res minimum)"),r.customerName&&""!==r.customerName.trim()||t.push("Nom du client requis"),(!r.phone||r.phone.length<8)&&t.push("Num\xe9ro de t\xe9l\xe9phone requis (8 caract\xe8res minimum)"),(!r.address||r.address.trim().length<3)&&t.push("Adresse compl\xe8te requise"),(!r.occupation||r.occupation.trim().length<2)&&t.push("Profession requise"),(!r.monthlyIncome||r.monthlyIncome<=0)&&t.push("Revenu mensuel requis"),(void 0===r.monthlyExpenses||r.monthlyExpenses<0)&&t.push("D\xe9penses mensuelles requises"),(void 0===r.existingDebts||r.existingDebts<0)&&t.push("Dettes existantes requises (0 si aucune)"),r.branchId||t.push("Veuillez s\xe9lectionner une succursale");break;case 3:(!r.requestedAmount||r.requestedAmount<=0)&&t.push("Montant demand\xe9 requis"),(!r.termMonths||r.termMonths<=0)&&t.push("Dur\xe9e du pr\xeat requise"),(!r.interestRate||r.interestRate<=0)&&t.push("Taux d'int\xe9r\xeat requis"),(!r.purpose||r.purpose.trim().length<3)&&t.push("Objet du pr\xeat requis (minimum 3 caract\xe8res)");break;case 4:if(r.collateralType&&""!==r.collateralType||t.push("Type de garantie requis"),(!r.collateralValue||r.collateralValue<=0)&&t.push("Valeur de la garantie requise"),(!r.collateralDescription||r.collateralDescription.trim().length<5)&&t.push("Description d\xe9taill\xe9e de la garantie requise (minimum 5 caract\xe8res)"),r.requestedAmount&&r.collateralValue)if("\xc9pargne bloqu\xe9e"===r.collateralType){const e=.15*r.requestedAmount;r.collateralValue<e&&t.push("\xc9pargne insuffisante. Minimum requis: ".concat(X(e,r.currency)," (15% du montant)"))}else r.collateralValue<1.2*r.requestedAmount&&t.push("Garantie insuffisante. Minimum requis: ".concat(X(1.2*r.requestedAmount,r.currency)," (120% du montant)"));break;case 5:r.guarantor1Name&&""!==r.guarantor1Name.trim()||t.push("Nom du garant principal requis"),(!r.guarantor1Phone||r.guarantor1Phone.length<8)&&t.push("T\xe9l\xe9phone du garant principal requis"),r.guarantor1Relation&&""!==r.guarantor1Relation||t.push("Lien avec le garant principal requis"),(r.guarantor2Name||r.guarantor2Phone||r.guarantor2Relation)&&(r.guarantor2Name&&""!==r.guarantor2Name.trim()||t.push("Nom du garant secondaire requis si vous fournissez un garant secondaire"),(!r.guarantor2Phone||r.guarantor2Phone.length<8)&&t.push("T\xe9l\xe9phone du garant secondaire requis si vous fournissez un garant secondaire"),r.guarantor2Relation&&""!==r.guarantor2Relation||t.push("Lien avec le garant secondaire requis si vous fournissez un garant secondaire")),r.reference1Name&&""!==r.reference1Name.trim()||t.push("R\xe9f\xe9rence 1: Nom requis"),r.reference1Phone&&""!==r.reference1Phone.trim()||t.push("R\xe9f\xe9rence 1: T\xe9l\xe9phone requis"),r.reference2Name&&""!==r.reference2Name.trim()||t.push("R\xe9f\xe9rence 2: Nom requis"),r.reference2Phone&&""!==r.reference2Phone.trim()||t.push("R\xe9f\xe9rence 2: T\xe9l\xe9phone requis")}return{isValid:0===t.length,errors:t}})(a);if(!e.isValid){const t=e.errors.join("\n");return m(t),void window.scrollTo({top:0,behavior:"smooth"})}m(null),a<6&&(i(a+1),window.scrollTo({top:0,behavior:"smooth"}))},$=async e=>{const t=(0,s.A)((0,s.A)({},C),e);E(t),6===a?await K(t):q()},K=async e=>{if(!c){d(!0),m(null);try{const a=OA.parse(e),i={savingsAccountNumber:a.savingsAccountNumber,loanType:a.loanType,requestedAmount:a.requestedAmount,requestedDurationMonths:a.termMonths,purpose:a.purpose,businessPlan:a.notes||void 0,currency:a.currency,branchId:parseInt(a.branchId),monthlyIncome:a.monthlyIncome,monthlyExpenses:a.monthlyExpenses,existingDebts:a.existingDebts,collateralValue:a.collateralValue||void 0,guarantees:[...a.collateralType&&a.collateralValue?[{type:0,description:a.collateralDescription||a.collateralType,value:a.collateralValue,currency:a.currency,guarantorInfo:void 0}]:[],...a.guarantor1Name?[{type:1,description:"Garant principal: ".concat(a.guarantor1Name),value:0,currency:a.currency,guarantorInfo:{name:a.guarantor1Name,phone:a.guarantor1Phone,address:a.address||"",occupation:"",monthlyIncome:void 0,relation:a.guarantor1Relation}}]:[],...a.guarantor2Name?[{type:1,description:"Garant secondaire: ".concat(a.guarantor2Name),value:0,currency:a.currency,guarantorInfo:{name:a.guarantor2Name,phone:a.guarantor2Phone||"",address:a.address||"",occupation:"",monthlyIncome:void 0,relation:a.guarantor2Relation||""}}]:[]]},l=await PA.createApplication(i);if(l.submittedAt)return alert("Demande de cr\xe9dit soumise avec succ\xe8s! Num\xe9ro: ".concat(l.applicationNumber,"\n\nLa garantie de 15% a \xe9t\xe9 automatiquement bloqu\xe9e sur votre compte d'\xe9pargne.")),void r(a);try{await PA.submitApplication(l.id),alert("Demande de cr\xe9dit soumise avec succ\xe8s! Num\xe9ro: ".concat(l.applicationNumber))}catch(u){var t,n,s;if(!(null!==(t=u.message)&&void 0!==t&&t.includes("409")||null!==(n=u.message)&&void 0!==n&&n.includes("Conflict")||null!==(s=u.message)&&void 0!==s&&s.includes("validation failed")))throw u;console.warn("Application already submitted or validated:",u),alert("Demande de cr\xe9dit cr\xe9\xe9e avec succ\xe8s! Num\xe9ro: ".concat(l.applicationNumber,"\n\nLa demande a d\xe9j\xe0 \xe9t\xe9 valid\xe9e automatiquement."))}r(a)}catch(Sc){if("ZodError"===Sc.name){const t=Sc.errors||Sc.issues||[],r=Array.isArray(t)?t.map(e=>{var t;return"".concat((null===(t=e.path)||void 0===t?void 0:t.join("."))||"field",": ").concat(e.message)}).join("\n"):"Erreur de validation inconnue";m("Erreurs de validation:\n".concat(r))}else{var a,i;console.error("Error submitting application:",Sc),m((null===Sc||void 0===Sc?void 0:Sc.message)||(null===Sc||void 0===Sc||null===(a=Sc.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message)||"Erreur lors de la soumission de la demande")}}finally{d(!1)}}},X=(e,t)=>"HTG"===t?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" HTG":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e),Y=a/6*100,J=[{step:1,icon:Hu,label:"Type"},{step:2,icon:ym,label:"Client"},{step:3,icon:Du,label:"Pr\xeat"},{step:4,icon:Ku,label:"Garanties"},{step:5,icon:Ru,label:"Garants"},{step:6,icon:cA,label:"Documents"}];return(0,ju.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,ju.jsxs)("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 text-white px-6 py-4",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold",children:"Demande de Cr\xe9dit"}),(0,ju.jsx)("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,ju.jsx)(vm,{className:"w-6 h-6"})})]}),(0,ju.jsxs)("div",{className:"space-y-2",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,ju.jsxs)("span",{children:["\xc9tape ",a," sur ",6]}),(0,ju.jsxs)("span",{children:[Math.round(Y),"%"]})]}),(0,ju.jsx)("div",{className:"w-full bg-white/20 rounded-full h-2",children:(0,ju.jsx)("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:"".concat(Y,"%")}})})]})]}),(0,ju.jsx)("div",{className:"border-b border-gray-200 px-6 py-3 overflow-x-auto",children:(0,ju.jsx)("div",{className:"flex gap-2 min-w-max",children:J.map(e=>{let{step:t,icon:r,label:n}=e;return(0,ju.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ".concat(t===a?"bg-primary-100 text-primary-700":t<a?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"),children:[t<a?(0,ju.jsx)(Tm,{className:"w-4 h-4"}):(0,ju.jsx)(r,{className:"w-4 h-4"}),(0,ju.jsx)("span",{className:"text-sm font-medium whitespace-nowrap",children:n})]},t)})})}),(0,ju.jsxs)("form",{onSubmit:k($),className:"flex-1 overflow-y-auto p-6",children:[1===a&&(0,ju.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[u&&(0,ju.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(Su,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-red-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:"Erreurs de validation"}),(0,ju.jsx)("div",{className:"whitespace-pre-line",children:u})]})]}),(0,ju.jsxs)("div",{className:"text-center mb-6",children:[(0,ju.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:l?"Tip Kredi":"Type de Cr\xe9dit"}),(0,ju.jsx)("p",{className:"text-gray-600",children:l?"Chwazi tip kredi ou vle a":"S\xe9lectionnez le type de cr\xe9dit souhait\xe9"}),(0,ju.jsx)("div",{className:"flex justify-center mt-4",children:(0,ju.jsx)("button",{type:"button",onClick:()=>o(!l),className:"px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:l?"\ud83c\uddeb\ud83c\uddf7 Fran\xe7ais":"\ud83c\udded\ud83c\uddf9 Krey\xf2l"})})]}),(0,ju.jsx)(CA,{selectedType:P,onSelect:e=>R("loanType",e),useKreyol:l}),(0,ju.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(dA,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-blue-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:l?"Kondisyon jeneral":"Conditions g\xe9n\xe9rales"}),(0,ju.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,ju.jsx)("li",{children:l?"Garanti oswa garan oblije selon montan an":"Garanties ou garants requis selon le montant"}),(0,ju.jsx)("li",{children:l?"Dokiman idantite obligatwa":"Documents d'identit\xe9 \xe0 jour obligatoires"}),(0,ju.jsx)("li",{children:l?"Evalyasyon solvabilite avan apwobasyon":"\xc9valuation de solvabilit\xe9 avant approbation"})]})]})]})]}),2===a&&(0,ju.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[u&&(0,ju.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(Su,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-red-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:"Erreurs de validation"}),(0,ju.jsx)("div",{className:"whitespace-pre-line",children:u})]})]}),(0,ju.jsxs)("div",{className:"mb-6",children:[(0,ju.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Informations du Client"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"Renseignez les informations personnelles"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Num\xe9ro de Compte d'\xc9pargne *"}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},D("savingsAccountNumber")),{},{placeholder:"Ex: 001-123456-789",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent pr-10"})),h&&(0,ju.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,ju.jsx)(ip,{className:"w-4 h-4 animate-spin text-gray-400"})})]}),x&&(0,ju.jsxs)("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[(0,ju.jsx)(Ju,{className:"w-3 h-3"}),"Compte trouv\xe9: ",x.customerName]}),g&&(0,ju.jsxs)("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[(0,ju.jsx)(Su,{className:"w-3 h-3"}),g]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom Complet *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},D("customerName")),{},{placeholder:"Le nom sera automatiquement rempli",readOnly:!!x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ".concat(x?"bg-gray-50 text-gray-700":"")})),x&&(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Nom r\xe9cup\xe9r\xe9 automatiquement depuis le compte d'\xe9pargne"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"tel"},D("phone")),{},{placeholder:"+509 XXXX XXXX",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"email"},D("email")),{},{placeholder:"email@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse Compl\xe8te *"}),(0,ju.jsx)("textarea",(0,s.A)((0,s.A)({},D("address")),{},{rows:2,placeholder:"Adresse r\xe9sidentielle",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profession / Activit\xe9 *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},D("occupation")),{},{placeholder:"Ex: Commer\xe7ant, Agriculteur",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Revenu Mensuel * (en ",O,")"]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"number"},D("monthlyIncome")),{},{placeholder:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["D\xe9penses Mensuelles * (en ",O,")"]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"number"},D("monthlyExpenses")),{},{placeholder:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Dettes Existantes * (en ",O,")"]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"number"},D("existingDebts")),{},{placeholder:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de Personnes \xe0 Charge"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"number"},D("dependents")),{},{placeholder:"0",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Succursale *"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},D("branchId")),{},{disabled:N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,ju.jsx)("option",{value:"",children:N?"Chargement...":"S\xe9lectionner"}),y&&y.length>0&&y.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))]}))]})]})]}),3===a&&(0,ju.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[u&&(0,ju.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(Su,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-red-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:"Erreurs de validation"}),(0,ju.jsx)("div",{className:"whitespace-pre-line",children:u})]})]}),(0,ju.jsxs)("div",{className:"mb-6",children:[(0,ju.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"D\xe9tails du Pr\xeat"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"Montant et conditions"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Devise *"}),(0,ju.jsx)("div",{className:"flex gap-4",children:["HTG","USD"].map(e=>(0,ju.jsx)("button",{type:"button",onClick:()=>R("currency",e),className:"flex-1 py-3 px-4 rounded-lg border-2 font-medium transition-all ".concat(O===e?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 hover:border-gray-400 text-gray-700"),children:e},e))})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Montant Demand\xe9 *",P&&AA(P)&&(0,ju.jsxs)("span",{className:"text-xs text-gray-500",children:[" ","(Min: ",X(AA(P).defaultMinAmount,O),", Max: ",X(AA(P).defaultMaxAmount,O),")"]})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"number"},D("requestedAmount")),{},{placeholder:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Dur\xe9e (mois) *",P&&AA(P)&&(0,ju.jsxs)("span",{className:"text-xs text-gray-500",children:[" ","(Min: ",AA(P).defaultMinDuration,", Max: ",AA(P).defaultMaxDuration," mois)"]})]}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},D("termMonths")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner"}),(0,ju.jsx)("option",{value:"1",children:"1 mois"}),(0,ju.jsx)("option",{value:"3",children:"3 mois"}),(0,ju.jsx)("option",{value:"6",children:"6 mois"}),(0,ju.jsx)("option",{value:"9",children:"9 mois"}),(0,ju.jsx)("option",{value:"12",children:"12 mois"}),(0,ju.jsx)("option",{value:"15",children:"15 mois"}),(0,ju.jsx)("option",{value:"18",children:"18 mois"}),(0,ju.jsx)("option",{value:"24",children:"24 mois"}),(0,ju.jsx)("option",{value:"36",children:"36 mois"}),(0,ju.jsx)("option",{value:"48",children:"48 mois"}),(0,ju.jsx)("option",{value:"60",children:"60 mois"})]}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taux d'Int\xe9r\xeat Annuel * (%)"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"number",step:"0.1",min:"0",max:"50"},D("interestRate")),{},{placeholder:"42",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taux d'Int\xe9r\xeat Mensuel * (%)"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"number",step:"0.01",min:"0",max:"5"},D("monthlyInterestRate")),{},{placeholder:"3.5",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})),(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Calcul\xe9 automatiquement \xe0 partir du taux annuel"})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Objet du Pr\xeat *"}),(0,ju.jsx)("textarea",(0,s.A)((0,s.A)({},D("purpose")),{},{rows:3,placeholder:"D\xe9crivez l'utilisation pr\xe9vue des fonds...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]})]}),L&&F&&(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 space-y-4",children:[(0,ju.jsxs)("h4",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[(0,ju.jsx)(ku,{className:"w-5 h-5 text-green-600"}),"Calcul du Pr\xeat"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Taux d'Int\xe9r\xeat"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-primary-600",children:[U.toFixed(2),"%"]}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["par mois (",M.toFixed(1),"% annuel)"]})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Mensualit\xe9"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:X(z,O)}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["pendant ",F," mois"]})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total \xe0 Rembourser"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:X(V,O)}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Int\xe9r\xeats: ",X(V-L,O)]})]})]})]})]}),4===a&&(0,ju.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[u&&(0,ju.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(Su,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-red-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:"Erreurs de validation"}),(0,ju.jsx)("div",{className:"whitespace-pre-line",children:u})]})]}),(0,ju.jsxs)("div",{className:"mb-6",children:[(0,ju.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:l?"Garanti":"Garanties"}),(0,ju.jsx)("p",{className:"text-gray-600",children:l?"Enf\xf2masyon sou garanti kredi a":"Informations sur les garanties du pr\xeat"})]}),P&&TA(P)?(0,ju.jsx)(ju.Fragment,{children:(0,ju.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(Su,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-yellow-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:l?"Garanti oblije":"Garanties requises"}),(0,ju.jsx)("p",{children:l?"Garanti yo dwe kouvri omwen 120% montan ou prete a. Dokiman jistifikatif oblije.":"Les garanties doivent couvrir au minimum 120% du montant emprunt\xe9. Documents justificatifs requis."})]})]})}):(0,ju.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(Ju,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-green-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:l?"Garanti pa obligatwa":"Garanties non obligatoires"}),(0,ju.jsx)("p",{children:l?"Tip kredi sa a pa mande garanti obligatwa, men ou ka bay youn pou amelyore chans apwobasyon.":"Ce type de cr\xe9dit ne requiert pas de garanties obligatoires, mais vous pouvez en fournir pour am\xe9liorer vos chances d'approbation."})]})]}),(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de Garantie *"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},D("collateralType")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner un type"}),["Titre de propri\xe9t\xe9 (maison/terrain)","Stock de marchandises","V\xe9hicule","\xc9quipement professionnel","R\xe9colte future","\xc9pargne bloqu\xe9e","Autre"].map(e=>(0,ju.jsx)("option",{value:e,children:e},e))]})),"\xc9pargne bloqu\xe9e"===B&&(0,ju.jsx)("div",{className:"mt-2",children:w>0?(0,ju.jsxs)("div",{className:"text-sm p-3 rounded-lg ".concat(A?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"),children:[(0,ju.jsx)("p",{className:"font-medium",children:A?"\u26a0\ufe0f Attention":"\u2713 V\xe9rification du solde"}),A?(0,ju.jsx)("p",{className:"mt-1",children:A}):(0,ju.jsxs)("p",{className:"mt-1",children:["Votre solde d'\xe9pargne de ",X(w,O)," est suffisant pour couvrir 15% du montant demand\xe9 (",X(.15*L,O),")."]})]}):(0,ju.jsxs)("div",{className:"text-sm p-3 rounded-lg bg-yellow-50 text-yellow-700 border border-yellow-200",children:[(0,ju.jsx)("p",{className:"font-medium",children:"\u2139\ufe0f Information"}),(0,ju.jsx)("p",{className:"mt-1",children:"Le solde de votre compte d'\xe9pargne sera v\xe9rifi\xe9 automatiquement. Vous devez avoir au minimum 15% du montant demand\xe9 en \xe9pargne."})]})})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Valeur Estim\xe9e de la Garantie * (en ",O,")"]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"number"},D("collateralValue")),{},{placeholder:"0",readOnly:"\xc9pargne bloqu\xe9e"===B&&w>0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ".concat("\xc9pargne bloqu\xe9e"===B&&w>0?"bg-gray-50 text-gray-700":"")})),"\xc9pargne bloqu\xe9e"===B&&w>0&&(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Valeur automatiquement d\xe9finie selon votre solde d'\xe9pargne"}),L&&_("collateralValue")&&"\xc9pargne bloqu\xe9e"!==B&&(0,ju.jsx)("p",{className:"text-sm mt-1 ".concat(_("collateralValue")>=1.2*L?"text-green-600":"text-red-600"),children:_("collateralValue")>=1.2*L?"\u2713 Garantie suffisante":"\u26a0 Minimum requis: ".concat(X(1.2*L,O))})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description D\xe9taill\xe9e de la Garantie *"}),(0,ju.jsx)("textarea",(0,s.A)((0,s.A)({},D("collateralDescription")),{},{rows:4,placeholder:"Ex: Maison en b\xe9ton, 3 chambres, situ\xe9e \xe0 [adresse], titre de propri\xe9t\xe9 n\xb0...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})),(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Incluez les d\xe9tails: num\xe9ro de titre, adresse exacte, dimensions, \xe9tat, etc."})]})]}),(0,ju.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,ju.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Documents requis pour les garanties:"}),(0,ju.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[(0,ju.jsx)("li",{children:"Titre de propri\xe9t\xe9 original (pour biens immobiliers)"}),(0,ju.jsx)("li",{children:"Facture d'achat et carte grise (pour v\xe9hicules)"}),(0,ju.jsx)("li",{children:"Inventaire d\xe9taill\xe9 avec photos (pour marchandises)"}),(0,ju.jsx)("li",{children:"\xc9valuation par expert (montants sup\xe9rieurs \xe0 100,000 HTG)"})]})]})]}),5===a&&(0,ju.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[u&&(0,ju.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(Su,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-red-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:"Erreurs de validation"}),(0,ju.jsx)("div",{className:"whitespace-pre-line",children:u})]})]}),(0,ju.jsxs)("div",{className:"mb-6",children:[(0,ju.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Garants et R\xe9f\xe9rences"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"Personnes pouvant se porter garants"})]}),(0,ju.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(dA,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-yellow-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:"Garants obligatoires"}),(0,ju.jsx)("p",{children:"Au moins 2 garants solvables requis. Ils doivent \xeatre en mesure de rembourser le pr\xeat en cas de d\xe9faut."})]})]}),(0,ju.jsxs)("div",{className:"border-2 border-gray-200 rounded-lg p-4 bg-gray-50",children:[(0,ju.jsxs)("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,ju.jsx)(Ru,{className:"w-5 h-5 text-primary-600"}),"Garant Principal *"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom Complet *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},D("guarantor1Name")),{},{placeholder:"Nom et pr\xe9nom",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"tel"},D("guarantor1Phone")),{},{placeholder:"+509 XXXX XXXX",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lien avec l'Emprunteur *"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},D("guarantor1Relation")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner"}),(0,ju.jsx)("option",{value:"FAMILY",children:"Membre de la famille"}),(0,ju.jsx)("option",{value:"FRIEND",children:"Ami(e)"}),(0,ju.jsx)("option",{value:"COLLEAGUE",children:"Coll\xe8gue"}),(0,ju.jsx)("option",{value:"BUSINESS_PARTNER",children:"Partenaire d'affaires"}),(0,ju.jsx)("option",{value:"NEIGHBOR",children:"Voisin(e)"}),(0,ju.jsx)("option",{value:"OTHER",children:"Autre"})]}))]})]})]}),(0,ju.jsxs)("div",{className:"border-2 border-gray-200 rounded-lg p-4 bg-gray-50",children:[(0,ju.jsxs)("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,ju.jsx)(Ru,{className:"w-5 h-5 text-primary-600"}),"Garant Secondaire ",(0,ju.jsx)("span",{className:"text-sm font-normal text-gray-500",children:"(Optionnel)"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom Complet"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},D("guarantor2Name")),{},{placeholder:"Nom et pr\xe9nom",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"tel"},D("guarantor2Phone")),{},{placeholder:"+509 XXXX XXXX",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lien avec l'Emprunteur"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},D("guarantor2Relation")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner"}),(0,ju.jsx)("option",{value:"FAMILY",children:"Membre de la famille"}),(0,ju.jsx)("option",{value:"FRIEND",children:"Ami(e)"}),(0,ju.jsx)("option",{value:"COLLEAGUE",children:"Coll\xe8gue"}),(0,ju.jsx)("option",{value:"BUSINESS_PARTNER",children:"Partenaire d'affaires"}),(0,ju.jsx)("option",{value:"NEIGHBOR",children:"Voisin(e)"}),(0,ju.jsx)("option",{value:"OTHER",children:"Autre"})]}))]})]})]}),(0,ju.jsxs)("div",{className:"border-t-2 border-gray-200 pt-6",children:[(0,ju.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"R\xe9f\xe9rences Personnelles"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{className:"space-y-3",children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"R\xe9f\xe9rence 1 *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},D("reference1Name")),{},{placeholder:"Nom complet",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"tel"},D("reference1Phone")),{},{placeholder:"T\xe9l\xe9phone",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{className:"space-y-3",children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"R\xe9f\xe9rence 2 *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},D("reference2Name")),{},{placeholder:"Nom complet",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"tel"},D("reference2Phone")),{},{placeholder:"T\xe9l\xe9phone",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]})]})]})]}),6===a&&(0,ju.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,ju.jsxs)("div",{className:"mb-6",children:[(0,ju.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Documents Requis"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"V\xe9rification des documents \xe0 fournir"})]}),(0,ju.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(Su,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-red-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:"Documents obligatoires"}),(0,ju.jsx)("p",{children:"Tous les documents coch\xe9s doivent \xeatre soumis avant le d\xe9caissement du pr\xeat."})]})]}),(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsx)("div",{className:"border-2 border-gray-200 rounded-lg p-4",children:(0,ju.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,ju.jsx)(ya,{name:"hasNationalId",control:I,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",{type:"checkbox",checked:t.value,onChange:e=>t.onChange(e.target.checked),className:"mt-1 w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-primary-500"})}}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:"Carte d'Identit\xe9 Nationale (CIN) ou Passeport"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Document original \xe0 pr\xe9senter. Photocopie recto-verso \xe0 fournir."})]})]})}),(0,ju.jsx)("div",{className:"border-2 border-gray-200 rounded-lg p-4",children:(0,ju.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,ju.jsx)(ya,{name:"hasProofOfResidence",control:I,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",{type:"checkbox",checked:t.value,onChange:e=>t.onChange(e.target.checked),className:"mt-1 w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-primary-500"})}}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:"Justificatif de Domicile"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Facture d'\xe9lectricit\xe9, d'eau ou attestation de r\xe9sidence (moins de 3 mois)."})]})]})}),(0,ju.jsx)("div",{className:"border-2 border-gray-200 rounded-lg p-4",children:(0,ju.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,ju.jsx)(ya,{name:"hasProofOfIncome",control:I,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",{type:"checkbox",checked:t.value,onChange:e=>t.onChange(e.target.checked),className:"mt-1 w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-primary-500"})}}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:"Justificatif de Revenus"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Bulletins de salaire (3 derniers mois), attestation de revenus, ou d\xe9claration fiscale."})]})]})}),(0,ju.jsx)("div",{className:"border-2 border-gray-200 rounded-lg p-4",children:(0,ju.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,ju.jsx)(ya,{name:"hasCollateralDocs",control:I,render:e=>{let{field:t}=e;return(0,ju.jsx)("input",{type:"checkbox",checked:t.value,onChange:e=>t.onChange(e.target.checked),className:"mt-1 w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-primary-500"})}}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:"Documents de Garantie"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Titre de propri\xe9t\xe9, factures, photos, ou tout document justifiant la garantie."})]})]})})]}),(0,ju.jsxs)("div",{className:"border-t-2 border-gray-300 pt-6",children:[(0,ju.jsx)("h4",{className:"font-semibold text-gray-900 mb-4 text-lg",children:"R\xe9sum\xe9 de la Demande"}),(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 space-y-4",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Type de Cr\xe9dit"}),(0,ju.jsx)("p",{className:"text-lg font-bold text-gray-900",children:P&&AA(P)?l?AA(P).nameKreyol:AA(P).name:"N/A"})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Client"}),(0,ju.jsx)("p",{className:"text-lg font-bold text-gray-900",children:_("customerName")||"N/A"})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Montant Demand\xe9"}),(0,ju.jsx)("p",{className:"text-xl font-bold text-primary-600",children:L?X(L,O):"N/A"})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Mensualit\xe9"}),(0,ju.jsx)("p",{className:"text-xl font-bold text-blue-600",children:z?X(z,O):"N/A"})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Dur\xe9e"}),(0,ju.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:[F||"N/A"," mois"]})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Taux d'Int\xe9r\xeat"}),(0,ju.jsxs)("p",{className:"text-lg font-bold text-purple-600",children:[U.toFixed(2),"% mensuel"]}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:["(",M.toFixed(1),"% annuel)"]})]})]}),_("collateralType")&&(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Garantie"}),(0,ju.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:_("collateralType")}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Valeur: ",_("collateralValue")?X(_("collateralValue"),O):"N/A"]})]}),_("guarantor1Name")&&(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Garants"}),(0,ju.jsxs)("div",{className:"space-y-1",children:[(0,ju.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["\u2022 ",_("guarantor1Name")]}),_("guarantor2Name")&&(0,ju.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["\u2022 ",_("guarantor2Name")]})]})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes Additionnelles"}),(0,ju.jsx)("textarea",(0,s.A)((0,s.A)({},D("notes")),{},{rows:3,placeholder:"Informations suppl\xe9mentaires \xe0 communiquer...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}))]}),u&&(0,ju.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(Su,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-red-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:"Erreur"}),(0,ju.jsx)("p",{children:u})]})]}),!u&&(0,ju.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(Ju,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-green-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:"Pr\xeat \xe0 soumettre"}),(0,ju.jsx)("p",{children:"Votre demande sera examin\xe9e par notre comit\xe9 de cr\xe9dit. Vous recevrez une r\xe9ponse sous 3-5 jours ouvrables."})]})]})]})]}),(0,ju.jsx)("div",{className:"border-t border-gray-200 px-6 py-4 bg-gray-50",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("button",{type:"button",onClick:()=>{m(null),a>1&&(i(a-1),window.scrollTo({top:0,behavior:"smooth"}))},disabled:1===a,className:"flex items-center gap-2 px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,ju.jsx)(uA,{className:"w-5 h-5"}),"Pr\xe9c\xe9dent"]}),(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:["\xc9tape ",a," / ",6]}),a<6?(0,ju.jsxs)("button",{type:"button",onClick:q,disabled:c,className:"flex items-center gap-2 px-6 py-2 text-white bg-primary-600 rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Suivant",(0,ju.jsx)(mA,{className:"w-5 h-5"})]}):(0,ju.jsx)("button",{type:"button",onClick:k($),disabled:c,className:"flex items-center gap-2 px-6 py-2 text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)(ip,{className:"w-5 h-5 animate-spin"}),"Soumission en cours..."]}):(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)(Tm,{className:"w-5 h-5"}),"Soumettre"]})})]})})]}),(0,ju.jsx)("style",{children:"\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n            transform: translateY(10px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        \n        .animate-fadeIn {\n          animation: fadeIn 0.3s ease-out;\n        }\n      "})]})},FA=t=>{let{application:r,onClose:n,onApprove:a,onReject:i}=t;const[l,o]=(0,e.useState)("application"),[c,d]=(0,e.useState)([{level:1,title:"Superviseur de Succursale",approver:"Marie Dupont",status:r.currentApprovalLevel>1?"APPROVED":"PENDING",decision:r.currentApprovalLevel>1?"APPROVE":void 0,comment:r.currentApprovalLevel>1?"Dossier complet et conforme aux crit\xe8res":void 0,decidedAt:r.currentApprovalLevel>1?"2025-10-14 10:30":void 0,decidedBy:r.currentApprovalLevel>1?"Marie Dupont":void 0},{level:2,title:"Gestionnaire R\xe9gional",approver:"Jean Baptiste",status:r.currentApprovalLevel>2?"APPROVED":2===r.currentApprovalLevel?"PENDING":"NOT_STARTED",decision:r.currentApprovalLevel>2?"APPROVE":void 0,comment:r.currentApprovalLevel>2?"Garanties suffisantes, client solvable":void 0,decidedAt:r.currentApprovalLevel>2?"2025-10-14 14:15":void 0,decidedBy:r.currentApprovalLevel>2?"Jean Baptiste":void 0},{level:3,title:"Comit\xe9 de Cr\xe9dit",approver:"Comit\xe9 (3 membres)",status:3===r.currentApprovalLevel?"PENDING":"NOT_STARTED"}]),u=(()=>{const e=r.monthlyPayment/r.monthlyIncome*100,t=r.collateralValue?r.collateralValue/r.requestedAmount*100:0;let n=0;n=e<=30?30:e<=40?20:e<=50?10:0;let s=0;s="\xc9pargne bloqu\xe9e"===r.collateralType?t>=20?30:t>=15?25:t>=10?15:5:t>=150?30:t>=120?25:t>=100?15:0;const a=n+s+20+12;let i,l;return a>=75?(i="LOW",l="Recommandation: APPROUVER - Excellent profil, risque faible"):a>=50?(i="MEDIUM",l="Recommandation: APPROUVER avec conditions - Profil acceptable, risque mod\xe9r\xe9"):(i="HIGH",l="Recommandation: REJETER ou demander garanties suppl\xe9mentaires - Risque \xe9lev\xe9"),{debtToIncomeRatio:e,collateralCoverageRatio:t,creditHistory:"GOOD",paymentCapacity:n,riskLevel:i,score:a,maxScore:100,recommendation:l}})(),{register:m,handleSubmit:h,watch:p,formState:{errors:x}}=ri({defaultValues:{decision:"",comment:""}}),f=p("decision"),g=(e,t)=>"HTG"===t?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" HTG":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),v=e=>{const t={COMMERCIAL:{label:"Commercial",color:"blue",emoji:"\ud83c\udfea"},AGRICULTURAL:{label:"Agricole",color:"green",emoji:"\ud83c\udf3e"},PERSONAL:{label:"Personnel",color:"purple",emoji:"\ud83d\udc64"},EMERGENCY:{label:"Urgence",color:"red",emoji:"\ud83d\udea8"}};return t[e]||t.PERSONAL},y=e=>{const t={PENDING:{label:"En attente",color:"yellow",icon:Cu},APPROVED:{label:"Approuv\xe9",color:"green",icon:Ju},REJECTED:{label:"Rejet\xe9",color:"red",icon:Lp},NOT_STARTED:{label:"Non commenc\xe9",color:"gray",icon:Cu}},r=t[e]||t.PENDING,n=r.icon;return(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium bg-".concat(r.color,"-100 text-").concat(r.color,"-800"),children:[(0,ju.jsx)(n,{className:"w-4 h-4"}),r.label]})};return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,ju.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 flex justify-between items-start",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Approbation de Demande de Pr\xeat"}),(0,ju.jsxs)("p",{className:"text-indigo-100",children:["Dossier #",r.loanNumber," - ",r.customerName]})]}),(0,ju.jsx)("button",{onClick:n,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",children:(0,ju.jsx)(vm,{className:"w-6 h-6"})})]}),(0,ju.jsx)("div",{className:"border-b border-gray-200 bg-gray-50",children:(0,ju.jsxs)("div",{className:"flex",children:[(0,ju.jsxs)("button",{onClick:()=>o("application"),className:"flex-1 px-6 py-4 text-center font-medium transition-colors ".concat("application"===l?"bg-white text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,ju.jsx)(Hu,{className:"w-5 h-5 inline-block mr-2"}),"Demande"]}),(0,ju.jsxs)("button",{onClick:()=>o("evaluation"),className:"flex-1 px-6 py-4 text-center font-medium transition-colors ".concat("evaluation"===l?"bg-white text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,ju.jsx)(ku,{className:"w-5 h-5 inline-block mr-2"}),"\xc9valuation"]}),(0,ju.jsxs)("button",{onClick:()=>o("approval"),className:"flex-1 px-6 py-4 text-center font-medium transition-colors ".concat("approval"===l?"bg-white text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,ju.jsx)(Ju,{className:"w-5 h-5 inline-block mr-2"}),"Approbation"]})]})}),(0,ju.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["application"===l&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(Du,{className:"w-5 h-5 text-indigo-600"}),"Informations sur le Pr\xeat"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,ju.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Type de Pr\xeat"}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("span",{className:"text-2xl",children:v(r.loanType).emoji}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:v(r.loanType).label})]})]}),(0,ju.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Montant Demand\xe9"}),(0,ju.jsx)("p",{className:"text-xl font-bold text-indigo-900",children:g(r.requestedAmount,r.currency)})]}),(0,ju.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Paiement Mensuel"}),(0,ju.jsx)("p",{className:"text-xl font-bold text-blue-900",children:g(r.monthlyPayment,r.currency)})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Dur\xe9e"}),(0,ju.jsxs)("p",{className:"font-semibold text-gray-900",children:[r.termMonths," mois"]})]}),(0,ju.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Taux d'Int\xe9r\xeat"}),(0,ju.jsxs)("p",{className:"text-xl font-bold text-purple-900",children:[r.interestRate,"%"]})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total \xe0 Rembourser"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:g(r.monthlyPayment*r.termMonths,r.currency)})]})]}),(0,ju.jsxs)("div",{className:"mt-4",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Objectif du Pr\xeat"}),(0,ju.jsx)("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:r.purpose})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(ym,{className:"w-5 h-5 text-indigo-600"}),"Informations sur le Client"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Nom Complet"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.customerName})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Code Client"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.customerCode||r.customerId})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)(Zw,{className:"w-4 h-4 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"T\xe9l\xe9phone"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.phone})]})]}),r.email&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Email"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.email})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)(Pw,{className:"w-4 h-4 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Adresse"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.address})]})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)(NA,{className:"w-4 h-4 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Profession"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.occupation})]})]}),(0,ju.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Revenu Mensuel"}),(0,ju.jsx)("p",{className:"text-lg font-bold text-green-900",children:g(r.monthlyIncome,r.currency)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Personnes \xe0 Charge"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.dependents})]})]})]}),r.collateralType&&(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(lm,{className:"w-5 h-5 text-indigo-600"}),"Garanties"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Type de Garantie"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.collateralType})]}),(0,ju.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Valeur Estim\xe9e"}),(0,ju.jsx)("p",{className:"text-lg font-bold text-blue-900",children:g(r.collateralValue||0,r.currency)}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Couverture: ",((r.collateralValue||0)/r.requestedAmount*100).toFixed(0),"%"]})]})]}),r.collateralDescription&&(0,ju.jsxs)("div",{className:"mt-4",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Description"}),(0,ju.jsx)("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:r.collateralDescription})]})]}),(r.guarantor1Name||r.guarantor2Name)&&(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(Ru,{className:"w-5 h-5 text-indigo-600"}),"Garants"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.guarantor1Name&&(0,ju.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-3",children:"Garant Principal"}),(0,ju.jsxs)("div",{className:"space-y-2",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Nom"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.guarantor1Name})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"T\xe9l\xe9phone"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.guarantor1Phone})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Relation"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.guarantor1Relation})]})]})]}),r.guarantor2Name&&(0,ju.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-3",children:"Garant Secondaire"}),(0,ju.jsxs)("div",{className:"space-y-2",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Nom"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.guarantor2Name})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"T\xe9l\xe9phone"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.guarantor2Phone})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Relation"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.guarantor2Relation})]})]})]})]})]}),(r.reference1Name||r.reference2Name)&&(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(Ru,{className:"w-5 h-5 text-indigo-600"}),"R\xe9f\xe9rences Personnelles"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.reference1Name&&(0,ju.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"R\xe9f\xe9rence 1"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.reference1Name}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:r.reference1Phone})]}),r.reference2Name&&(0,ju.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"R\xe9f\xe9rence 2"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:r.reference2Name}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:r.reference2Phone})]})]})]})]}),"evaluation"===l&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-lg p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Score de Solvabilit\xe9"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"\xc9valuation bas\xe9e sur plusieurs crit\xe8res"})]}),(e=>{const t={LOW:{label:"Risque Faible",color:"green"},MEDIUM:{label:"Risque Mod\xe9r\xe9",color:"yellow"},HIGH:{label:"Risque \xc9lev\xe9",color:"red"}},r=t[e]||t.MEDIUM;return(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium bg-".concat(r.color,"-100 text-").concat(r.color,"-800 border border-").concat(r.color,"-200"),children:[(0,ju.jsx)(lm,{className:"w-4 h-4"}),r.label]})})(u.riskLevel)]}),(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-6 mb-4",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ju.jsx)("span",{className:"text-5xl font-bold text-indigo-600",children:u.score}),(0,ju.jsxs)("span",{className:"text-2xl text-gray-400",children:["/ ",u.maxScore]})]}),(0,ju.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-4",children:(0,ju.jsx)("div",{className:"h-4 rounded-full ".concat(u.score>=75?"bg-green-500":u.score>=50?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(u.score/u.maxScore*100,"%")}})}),(0,ju.jsxs)("div",{className:"flex items-start gap-3 bg-blue-50 p-4 rounded-lg",children:[(0,ju.jsx)(dA,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,ju.jsx)("p",{className:"text-sm text-blue-900 font-medium",children:u.recommendation})]})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,ju.jsx)(ku,{className:"w-5 h-5 text-indigo-600"}),"Ratio Dette/Revenu"]}),(0,ju.jsxs)("div",{className:"text-center mb-4",children:[(0,ju.jsxs)("p",{className:"text-4xl font-bold text-gray-900",children:[u.debtToIncomeRatio.toFixed(1),"%"]}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Paiement mensuel: ",g(r.monthlyPayment,r.currency)]}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600",children:["Revenu mensuel: ",g(r.monthlyIncome,r.currency)]})]}),(0,ju.jsxs)("div",{className:"space-y-2",children:[(0,ju.jsx)("div",{className:"p-3 rounded-lg ".concat(u.debtToIncomeRatio<=30?"bg-green-50 border border-green-200":"bg-gray-50"),children:(0,ju.jsxs)("p",{className:"text-sm",children:[(0,ju.jsx)("span",{className:"font-medium",children:"\u2264 30%:"})," Excellent ",u.debtToIncomeRatio<=30&&"\u2713"]})}),(0,ju.jsx)("div",{className:"p-3 rounded-lg ".concat(u.debtToIncomeRatio>30&&u.debtToIncomeRatio<=40?"bg-yellow-50 border border-yellow-200":"bg-gray-50"),children:(0,ju.jsxs)("p",{className:"text-sm",children:[(0,ju.jsx)("span",{className:"font-medium",children:"31-40%:"})," Acceptable ",u.debtToIncomeRatio>30&&u.debtToIncomeRatio<=40&&"\u2713"]})}),(0,ju.jsx)("div",{className:"p-3 rounded-lg ".concat(u.debtToIncomeRatio>40?"bg-red-50 border border-red-200":"bg-gray-50"),children:(0,ju.jsxs)("p",{className:"text-sm",children:[(0,ju.jsx)("span",{className:"font-medium",children:"> 40%:"})," Risque \xe9lev\xe9 ",u.debtToIncomeRatio>40&&"\u26a0"]})})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,ju.jsx)(lm,{className:"w-5 h-5 text-indigo-600"}),"Couverture des Garanties"]}),(0,ju.jsxs)("div",{className:"text-center mb-4",children:[(0,ju.jsxs)("p",{className:"text-4xl font-bold text-gray-900",children:[u.collateralCoverageRatio.toFixed(0),"%"]}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Valeur garantie: ",g(r.collateralValue||0,r.currency)]}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600",children:["Montant demand\xe9: ",g(r.requestedAmount,r.currency)]})]}),(0,ju.jsxs)("div",{className:"space-y-2",children:[(0,ju.jsx)("div",{className:"p-3 rounded-lg ".concat(u.collateralCoverageRatio>=150?"bg-green-50 border border-green-200":"bg-gray-50"),children:(0,ju.jsxs)("p",{className:"text-sm",children:[(0,ju.jsx)("span",{className:"font-medium",children:"\u2265 150%:"})," Excellent ",u.collateralCoverageRatio>=150&&"\u2713"]})}),(0,ju.jsx)("div",{className:"p-3 rounded-lg ".concat(u.collateralCoverageRatio>=120&&u.collateralCoverageRatio<150?"bg-yellow-50 border border-yellow-200":"bg-gray-50"),children:(0,ju.jsxs)("p",{className:"text-sm",children:[(0,ju.jsx)("span",{className:"font-medium",children:"120-149%:"})," Acceptable ",u.collateralCoverageRatio>=120&&u.collateralCoverageRatio<150&&"\u2713"]})}),(0,ju.jsx)("div",{className:"p-3 rounded-lg ".concat(u.collateralCoverageRatio<120?"bg-red-50 border border-red-200":"bg-gray-50"),children:(0,ju.jsxs)("p",{className:"text-sm",children:[(0,ju.jsx)("span",{className:"font-medium",children:"< 120%:"})," Insuffisant ",u.collateralCoverageRatio<120&&"\u26a0"]})})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Facteurs Additionnels"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ju.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Historique de Cr\xe9dit"}),(0,ju.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:u.creditHistory}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"20/25 points"})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Capacit\xe9 de Paiement"}),(0,ju.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[u.paymentCapacity,"/30"]}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Points obtenus"})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Stabilit\xe9 Professionnelle"}),(0,ju.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:"12/15"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Points obtenus"})]})]})]})]}),"approval"===l&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold mb-6",children:"Processus d'Approbation"}),(0,ju.jsx)("div",{className:"space-y-6",children:c.map((e,t)=>(0,ju.jsxs)("div",{className:"relative",children:[t<c.length-1&&(0,ju.jsx)("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-gray-300"}),(0,ju.jsxs)("div",{className:"flex gap-4",children:[(0,ju.jsxs)("div",{className:"flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center ".concat("APPROVED"===e.status?"bg-green-100":"REJECTED"===e.status?"bg-red-100":"PENDING"===e.status?"bg-yellow-100":"bg-gray-100"),children:["APPROVED"===e.status&&(0,ju.jsx)(Ju,{className:"w-6 h-6 text-green-600"}),"REJECTED"===e.status&&(0,ju.jsx)(Lp,{className:"w-6 h-6 text-red-600"}),"PENDING"===e.status&&(0,ju.jsx)(Cu,{className:"w-6 h-6 text-yellow-600"}),"NOT_STARTED"===e.status&&(0,ju.jsx)(Cu,{className:"w-6 h-6 text-gray-400"})]}),(0,ju.jsxs)("div",{className:"flex-1 bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,ju.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:e.title}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600",children:["Niveau ",e.level," - ",e.approver]})]}),y(e.status)]}),e.decidedAt&&(0,ju.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[(0,ju.jsx)(pm,{className:"w-4 h-4"}),(0,ju.jsxs)("span",{children:[e.decidedAt," par ",e.decidedBy]})]}),e.comment&&(0,ju.jsx)("p",{className:"text-sm text-gray-700 bg-white p-3 rounded border border-gray-200",children:e.comment})]})]})]})]},e.level))})]}),r.currentApprovalLevel<=3&&"PENDING"===r.status&&(0,ju.jsxs)("form",{onSubmit:h(e=>{e.decision&&e.comment?e.comment.length<10?Ts.error("Le commentaire doit contenir au moins 10 caract\xe8res"):("APPROVE"===e.decision?(a(r.id,r.currentApprovalLevel,e.comment),Ts.success("Demande approuv\xe9e avec succ\xe8s")):"REJECT"===e.decision&&(i(r.id,r.currentApprovalLevel,e.comment),Ts.error("Demande rejet\xe9e")),n()):Ts.error("Veuillez remplir tous les champs")}),className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold mb-6",children:"Votre D\xe9cision"}),(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["D\xe9cision ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ju.jsxs)("label",{className:"flex items-center justify-center gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("APPROVE"===f?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"),children:[(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"radio",value:"APPROVE"},m("decision")),{},{className:"w-5 h-5 text-green-600"})),(0,ju.jsx)(Ju,{className:"w-6 h-6 text-green-600"}),(0,ju.jsx)("span",{className:"font-medium text-gray-900",children:"Approuver"})]}),(0,ju.jsxs)("label",{className:"flex items-center justify-center gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("REJECT"===f?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"),children:[(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"radio",value:"REJECT"},m("decision")),{},{className:"w-5 h-5 text-red-600"})),(0,ju.jsx)(Lp,{className:"w-6 h-6 text-red-600"}),(0,ju.jsx)("span",{className:"font-medium text-gray-900",children:"Rejeter"})]})]}),x.decision&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-2",children:x.decision.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Commentaire / Justification ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("textarea",(0,s.A)((0,s.A)({},m("comment")),{},{rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"APPROVE"===f?"Expliquez pourquoi vous approuvez cette demande...":"Expliquez les raisons du rejet..."})),x.comment&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-2",children:x.comment.message})]}),"REJECT"===f&&(0,ju.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(cm,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-red-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:"Attention"}),(0,ju.jsx)("p",{children:"Le rejet de cette demande sera d\xe9finitif et le client sera notifi\xe9 imm\xe9diatement."})]})]}),(0,ju.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,ju.jsx)("button",{type:"button",onClick:n,className:"px-6 py-2.5 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),(0,ju.jsx)("button",{type:"submit",className:"px-6 py-2.5 rounded-lg font-medium text-white transition-colors ".concat("APPROVE"===f?"bg-green-600 hover:bg-green-700":"REJECT"===f?"bg-red-600 hover:bg-red-700":"bg-gray-400 cursor-not-allowed"),disabled:!f,children:"APPROVE"===f?"Approuver la Demande":"Rejeter la Demande"})]})]})]})]})]})]})})},MA=mi("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),UA=t=>{let{loan:r,onClose:n,onSubmit:a}=t;const[i,l]=(0,e.useState)({principal:0,interest:0,penalty:0,total:0,newBalance:r.remainingBalance}),{register:o,handleSubmit:c,watch:d,setValue:u,formState:{errors:m}}=ri({defaultValues:{paymentDate:(new Date).toISOString().split("T")[0],paymentMethod:"CASH"}}),h=d("amount"),p=d("paymentMethod");(0,e.useEffect)(()=>{const e=parseFloat(h)||0;if(e<=0)return void l({principal:0,interest:0,penalty:0,total:0,newBalance:r.remainingBalance});const t=r.daysOverdue&&r.daysOverdue>0?x(r.daysOverdue,r.nextPaymentAmount||r.monthlyPayment):0,n=r.interestRate/100/12,s=r.remainingBalance*n;let a=e,i=Math.min(a,t);a-=i;let o=Math.min(a,s);a-=o;let c=a;const d=Math.max(0,r.remainingBalance-c);l({principal:c,interest:o,penalty:i,total:e,newBalance:d})},[h,r]);const x=(e,t)=>t*(.02*Math.ceil(e/7)),f=e=>"HTG"===r.currency?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" HTG":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),g=e=>{u("amount",e.toString())},v=e=>{const t=parseFloat(e.amount);if(t<=0)return void Ts.error("Le montant doit \xeatre sup\xe9rieur \xe0 0");if(t>r.remainingBalance+i.interest+i.penalty)return void Ts.error("Le montant d\xe9passe le solde total d\xfb");const s={loanId:r.id,paymentDate:e.paymentDate,amount:t,paymentMethod:e.paymentMethod,checkNumber:e.checkNumber,transferReference:e.transferReference,mobileProvider:e.mobileProvider,mobileReference:e.mobileReference,notes:e.notes,principalAmount:i.principal,interestAmount:i.interest,penaltyAmount:i.penalty,newRemainingBalance:i.newBalance};a(s),Ts.success("Paiement enregistr\xe9 avec succ\xe8s!"),n()},y=r.remainingBalance+i.interest+i.penalty,b=r.nextPaymentAmount||r.monthlyPayment,N=r.daysOverdue&&r.daysOverdue>0?x(r.daysOverdue,b):0;return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[95vh] overflow-hidden flex flex-col",children:[(0,ju.jsxs)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6 flex justify-between items-start",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Enregistrer un Paiement"}),(0,ju.jsxs)("p",{className:"text-green-100",children:["Pr\xeat #",r.loanNumber," - ",r.customerName]})]}),(0,ju.jsx)("button",{onClick:n,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",children:(0,ju.jsx)(vm,{className:"w-6 h-6"})})]}),(0,ju.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,ju.jsxs)("form",{onSubmit:c(v),className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(dA,{className:"w-5 h-5 text-blue-600"}),"R\xe9sum\xe9 du Pr\xeat"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Solde du Capital"}),(0,ju.jsx)("p",{className:"text-xl font-bold text-gray-900",children:f(r.remainingBalance)})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Paiement Mensuel"}),(0,ju.jsx)("p",{className:"text-xl font-bold text-blue-900",children:f(r.monthlyPayment)})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Prochain Paiement"}),(0,ju.jsx)("p",{className:"text-xl font-bold text-green-900",children:f(b)}),r.nextPaymentDate&&(0,ju.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["D\xfb: ",(e=>{const t=new Date(e);return new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"long",day:"numeric"}).format(t)})(r.nextPaymentDate)]})]})]}),r.daysOverdue&&r.daysOverdue>0&&(0,ju.jsxs)("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(cm,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-red-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:"Paiement en Retard"}),(0,ju.jsxs)("p",{children:["Ce pr\xeat est en retard de ",(0,ju.jsxs)("span",{className:"font-bold",children:[r.daysOverdue," jours"]}),"."]}),(0,ju.jsxs)("p",{className:"mt-1",children:["P\xe9nalit\xe9 applicable: ",(0,ju.jsx)("span",{className:"font-bold",children:f(x(r.daysOverdue,b))})]})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(Du,{className:"w-5 h-5 text-green-600"}),"D\xe9tails du Paiement"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date du Paiement ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(pm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"date"},o("paymentDate",{required:"La date est requise"})),{},{max:(new Date).toISOString().split("T")[0],className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}))]}),m.paymentDate&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-1",children:m.paymentDate.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Montant du Paiement ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Du,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"number",step:"0.01"},o("amount",{required:"Le montant est requis",min:{value:.01,message:"Le montant doit \xeatre positif"}})),{},{className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"0.00"}))]}),m.amount&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-1",children:m.amount.message}),(0,ju.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,ju.jsx)("button",{type:"button",onClick:()=>g(b),className:"px-3 py-1.5 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors",children:"Paiement mensuel"}),(0,ju.jsx)("button",{type:"button",onClick:()=>g(y),className:"px-3 py-1.5 text-sm bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:"Solde complet"}),r.daysOverdue&&r.daysOverdue>0&&(0,ju.jsx)("button",{type:"button",onClick:()=>g(b+N),className:"px-3 py-1.5 text-sm bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:"Avec p\xe9nalit\xe9"})]})]})]}),(0,ju.jsxs)("div",{className:"mt-6",children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Mode de Paiement ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,ju.jsxs)("label",{className:"flex flex-col items-center gap-2 p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("CASH"===p?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"),children:[(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"radio",value:"CASH"},o("paymentMethod")),{},{className:"sr-only"})),(0,ju.jsx)(um,{className:"w-8 h-8 ".concat("CASH"===p?"text-green-600":"text-gray-400")}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Esp\xe8ces"})]}),(0,ju.jsxs)("label",{className:"flex flex-col items-center gap-2 p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("CHECK"===p?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"),children:[(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"radio",value:"CHECK"},o("paymentMethod")),{},{className:"sr-only"})),(0,ju.jsx)(Ju,{className:"w-8 h-8 ".concat("CHECK"===p?"text-green-600":"text-gray-400")}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Ch\xe8que"})]}),(0,ju.jsxs)("label",{className:"flex flex-col items-center gap-2 p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("TRANSFER"===p?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"),children:[(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"radio",value:"TRANSFER"},o("paymentMethod")),{},{className:"sr-only"})),(0,ju.jsx)(Tu,{className:"w-8 h-8 ".concat("TRANSFER"===p?"text-green-600":"text-gray-400")}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Virement"})]}),(0,ju.jsxs)("label",{className:"flex flex-col items-center gap-2 p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("MOBILE_MONEY"===p?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"),children:[(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"radio",value:"MOBILE_MONEY"},o("paymentMethod")),{},{className:"sr-only"})),(0,ju.jsx)(MA,{className:"w-8 h-8 ".concat("MOBILE_MONEY"===p?"text-green-600":"text-gray-400")}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Mobile Money"})]})]})]}),"CHECK"===p&&(0,ju.jsxs)("div",{className:"mt-4",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Num\xe9ro de Ch\xe8que"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},o("checkNumber")),{},{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Ex: 123456"}))]}),"TRANSFER"===p&&(0,ju.jsxs)("div",{className:"mt-4",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"R\xe9f\xe9rence du Virement"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},o("transferReference")),{},{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Ex: TRF-20251016-001"}))]}),"MOBILE_MONEY"===p&&(0,ju.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Op\xe9rateur"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},o("mobileProvider")),{},{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,ju.jsx)("option",{value:"MONCASH",children:"MonCash"}),(0,ju.jsx)("option",{value:"NATCASH",children:"NatCash"}),(0,ju.jsx)("option",{value:"LAJANCASH",children:"Lajancash"}),(0,ju.jsx)("option",{value:"OTHER",children:"Autre"})]}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"R\xe9f\xe9rence de Transaction"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},o("mobileReference")),{},{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Ex: MC-123456789"}))]})]}),(0,ju.jsxs)("div",{className:"mt-4",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optionnel)"}),(0,ju.jsx)("textarea",(0,s.A)((0,s.A)({},o("notes")),{},{rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Ajoutez des notes sur ce paiement..."}))]})]}),i.total>0&&(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(aS,{className:"w-5 h-5 text-green-600"}),"R\xe9partition du Paiement"]}),(0,ju.jsxs)("div",{className:"space-y-3",children:[i.penalty>0&&(0,ju.jsxs)("div",{className:"flex justify-between items-center bg-white rounded-lg p-4",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)(cm,{className:"w-5 h-5 text-red-600"}),(0,ju.jsx)("span",{className:"text-gray-700",children:"P\xe9nalit\xe9 de Retard"})]}),(0,ju.jsx)("span",{className:"text-lg font-semibold text-red-600",children:f(i.penalty)})]}),(0,ju.jsxs)("div",{className:"flex justify-between items-center bg-white rounded-lg p-4",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)(oA,{className:"w-5 h-5 text-blue-600"}),(0,ju.jsx)("span",{className:"text-gray-700",children:"Int\xe9r\xeat"})]}),(0,ju.jsx)("span",{className:"text-lg font-semibold text-blue-600",children:f(i.interest)})]}),(0,ju.jsxs)("div",{className:"flex justify-between items-center bg-white rounded-lg p-4",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)(rS,{className:"w-5 h-5 text-green-600"}),(0,ju.jsx)("span",{className:"text-gray-700",children:"Capital"})]}),(0,ju.jsx)("span",{className:"text-lg font-semibold text-green-600",children:f(i.principal)})]}),(0,ju.jsxs)("div",{className:"border-t-2 border-gray-300 pt-3 mt-3",children:[(0,ju.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,ju.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"Total du Paiement"}),(0,ju.jsx)("span",{className:"text-2xl font-bold text-green-600",children:f(i.total)})]}),(0,ju.jsxs)("div",{className:"flex justify-between items-center bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,ju.jsx)("span",{className:"text-sm font-medium text-blue-900",children:"Nouveau Solde du Capital"}),(0,ju.jsx)("span",{className:"text-lg font-bold text-blue-900",children:f(i.newBalance)})]})]}),0===i.newBalance&&(0,ju.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(Ju,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-green-900",children:[(0,ju.jsx)("p",{className:"font-medium",children:"Remboursement Complet!"}),(0,ju.jsx)("p",{children:"Ce paiement soldera compl\xe8tement le pr\xeat."})]})]})]})]})]})}),(0,ju.jsxs)("div",{className:"border-t border-gray-200 bg-gray-50 px-6 py-4 flex justify-between items-center",children:[(0,ju.jsxs)("button",{type:"button",onClick:()=>{Ts.success("Impression du re\xe7u en cours...")},className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,ju.jsx)(Fp,{className:"w-4 h-4"}),"Aper\xe7u du Re\xe7u"]}),(0,ju.jsxs)("div",{className:"flex gap-3",children:[(0,ju.jsx)("button",{type:"button",onClick:n,className:"px-6 py-2.5 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"Annuler"}),(0,ju.jsx)("button",{onClick:c(v),disabled:!h||parseFloat(h)<=0,className:"px-6 py-2.5 rounded-lg font-medium text-white transition-colors ".concat(h&&parseFloat(h)>0?"bg-green-600 hover:bg-green-700":"bg-gray-400 cursor-not-allowed"),children:"Enregistrer le Paiement"})]})]})]})})},BA=t=>{var r;let{loan:n,onClose:s,onRecordPayment:a}=t;const[i,l]=(0,e.useState)("overview"),[o,c]=(0,e.useState)(!1),d=(e,t)=>"HTG"===t?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" HTG":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),u=e=>{const t=new Date(e);return new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"long",day:"numeric"}).format(t)},m=e=>{const t={COMMERCIAL:{label:"Commercial",color:"blue",emoji:"\ud83c\udfea"},AGRICULTURAL:{label:"Agricole",color:"green",emoji:"\ud83c\udf3e"},PERSONAL:{label:"Personnel",color:"purple",emoji:"\ud83d\udc64"},EMERGENCY:{label:"Urgence",color:"red",emoji:"\ud83d\udea8"}};return t[e]||t.PERSONAL},h=()=>{const e=[],t=n.interestRate/100/12;let r=n.principalAmount;const s=new Date(n.disbursementDate);for(let a=1;a<=n.termMonths;a++){const i=r*t,l=n.monthlyPayment-i;r-=l;const o=new Date(s);o.setMonth(o.getMonth()+a);let c="UPCOMING";const d=new Date;o<d?c=a<=Math.floor(n.termMonths*(n.paidAmount/(n.principalAmount+n.principalAmount*n.interestRate/100*n.termMonths/12)))?"PAID":"OVERDUE":o.getTime()-d.getTime()<2592e6&&(c="PENDING"),e.push({installmentNumber:a,dueDate:o.toISOString().split("T")[0],principalAmount:Math.max(0,l),interestAmount:i,totalPayment:n.monthlyPayment,remainingBalance:Math.max(0,r),status:c,paidDate:"PAID"===c?o.toISOString().split("T")[0]:void 0,paidAmount:"PAID"===c?n.monthlyPayment:void 0})}return e},p=h(),x=(()=>{const e=[];return h().filter(e=>"PAID"===e.status).forEach((t,r)=>{e.push({id:"PAY-".concat(r+1),paymentDate:t.paidDate,amount:t.paidAmount,principal:t.principalAmount,interest:t.interestAmount,paymentMethod:r%3===0?"CASH":r%3===1?"TRANSFER":"MOBILE_MONEY",receiptNumber:"REC-".concat(n.loanNumber,"-").concat(String(r+1).padStart(3,"0")),receivedBy:n.loanOfficer,notes:0===r?"Premier paiement":void 0})}),e.reverse()})(),f=(x.reduce((e,t)=>e+t.amount,0),x.reduce((e,t)=>e+t.principal,0)),g=x.reduce((e,t)=>e+t.interest,0),v=f/n.principalAmount*100;return(0,ju.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-7xl max-h-[95vh] overflow-hidden flex flex-col",children:[(0,ju.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 flex justify-between items-start",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"D\xe9tails du Pr\xeat"}),(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsxs)("p",{className:"text-indigo-100",children:["#",n.loanNumber]}),(0,ju.jsx)("div",{children:(e=>{const t={PENDING:{label:"En attente",color:"yellow",icon:Cu},APPROVED:{label:"Approuv\xe9",color:"blue",icon:Ju},DISBURSED:{label:"D\xe9caiss\xe9",color:"indigo",icon:Du},ACTIVE:{label:"Actif",color:"green",icon:Ju},OVERDUE:{label:"En retard",color:"red",icon:cm},PAID:{label:"Pay\xe9",color:"emerald",icon:Ju},REJECTED:{label:"Rejet\xe9",color:"gray",icon:Lp}},r=t[e]||t.PENDING,n=r.icon;return(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium bg-".concat(r.color,"-100 text-").concat(r.color,"-800 border border-").concat(r.color,"-200"),children:[(0,ju.jsx)(n,{className:"w-4 h-4"}),r.label]})})(n.status)})]})]}),(0,ju.jsxs)("div",{className:"flex gap-2",children:[(0,ju.jsx)("button",{onClick:()=>{Ts.success("T\xe9l\xe9chargement du contrat en cours...")},className:"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",title:"T\xe9l\xe9charger le contrat",children:(0,ju.jsx)(zu,{className:"w-5 h-5"})}),(0,ju.jsx)("button",{onClick:s,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",children:(0,ju.jsx)(vm,{className:"w-6 h-6"})})]})]}),(0,ju.jsx)("div",{className:"border-b border-gray-200 bg-gray-50",children:(0,ju.jsxs)("div",{className:"flex",children:[(0,ju.jsxs)("button",{onClick:()=>l("overview"),className:"flex-1 px-6 py-4 text-center font-medium transition-colors ".concat("overview"===i?"bg-white text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,ju.jsx)(Hu,{className:"w-5 h-5 inline-block mr-2"}),"Vue d'ensemble"]}),(0,ju.jsxs)("button",{onClick:()=>l("schedule"),className:"flex-1 px-6 py-4 text-center font-medium transition-colors ".concat("schedule"===i?"bg-white text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,ju.jsx)(pm,{className:"w-5 h-5 inline-block mr-2"}),"Calendrier (",p.length,")"]}),(0,ju.jsxs)("button",{onClick:()=>l("history"),className:"flex-1 px-6 py-4 text-center font-medium transition-colors ".concat("history"===i?"bg-white text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,ju.jsx)(ku,{className:"w-5 h-5 inline-block mr-2"}),"Historique (",x.length,")"]}),(0,ju.jsxs)("button",{onClick:()=>l("documents"),className:"flex-1 px-6 py-4 text-center font-medium transition-colors ".concat("documents"===i?"bg-white text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,ju.jsx)(lm,{className:"w-5 h-5 inline-block mr-2"}),"Documents"]})]})}),(0,ju.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["overview"===i&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Progression du Remboursement"}),(0,ju.jsxs)("span",{className:"text-2xl font-bold text-indigo-600",children:[v.toFixed(1),"%"]})]}),(0,ju.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-6 mb-4",children:(0,ju.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 h-6 rounded-full flex items-center justify-end pr-3",style:{width:"".concat(v,"%")},children:v>10&&(0,ju.jsxs)("span",{className:"text-white text-xs font-medium",children:[v.toFixed(0),"%"]})})}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Capital Pay\xe9"}),(0,ju.jsx)("p",{className:"text-lg font-bold text-gray-900",children:d(f,n.currency)})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Int\xe9r\xeats Pay\xe9s"}),(0,ju.jsx)("p",{className:"text-lg font-bold text-gray-900",children:d(g,n.currency)})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Reste \xe0 Payer"}),(0,ju.jsx)("p",{className:"text-lg font-bold text-red-600",children:d(n.remainingBalance,n.currency)})]})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(Du,{className:"w-5 h-5 text-indigo-600"}),"D\xe9tails du Pr\xeat"]}),(0,ju.jsxs)("div",{className:"space-y-3",children:[(0,ju.jsxs)("div",{className:"flex justify-between",children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Type:"}),(0,ju.jsxs)("span",{className:"font-semibold flex items-center gap-2",children:[(0,ju.jsx)("span",{children:m(n.loanType).emoji}),m(n.loanType).label]})]}),(0,ju.jsxs)("div",{className:"flex justify-between",children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Montant Principal:"}),(0,ju.jsx)("span",{className:"font-semibold text-indigo-600",children:d(n.principalAmount,n.currency)})]}),(0,ju.jsxs)("div",{className:"flex justify-between",children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Taux d'Int\xe9r\xeat:"}),(0,ju.jsxs)("span",{className:"font-semibold",children:[n.interestRate,"%"]})]}),(0,ju.jsxs)("div",{className:"flex justify-between",children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Dur\xe9e:"}),(0,ju.jsxs)("span",{className:"font-semibold",children:[n.termMonths," mois"]})]}),(0,ju.jsxs)("div",{className:"flex justify-between",children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Paiement Mensuel:"}),(0,ju.jsx)("span",{className:"font-semibold text-blue-600",children:d(n.monthlyPayment,n.currency)})]}),(0,ju.jsxs)("div",{className:"flex justify-between",children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Total \xe0 Rembourser:"}),(0,ju.jsx)("span",{className:"font-semibold",children:d(n.monthlyPayment*n.termMonths,n.currency)})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(ym,{className:"w-5 h-5 text-indigo-600"}),"Information Client"]}),(0,ju.jsxs)("div",{className:"space-y-3",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Nom"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:n.customerName})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Code Client"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:n.customerCode||n.customerId})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)(Zw,{className:"w-4 h-4 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"T\xe9l\xe9phone"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:"509-XXXX-XXXX"})]})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)(Pw,{className:"w-4 h-4 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Succursale"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:n.branch})]})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)(NA,{className:"w-4 h-4 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Agent de Cr\xe9dit"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:n.loanOfficer})]})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(pm,{className:"w-5 h-5 text-indigo-600"}),"Dates Importantes"]}),(0,ju.jsxs)("div",{className:"space-y-3",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Date de Demande"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:u(n.createdAt)})]}),n.approvedAt&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Date d'Approbation"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:u(n.approvedAt)}),n.approvedBy&&(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:["Par: ",n.approvedBy]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Date de D\xe9caissement"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:u(n.disbursementDate)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Date d'\xc9ch\xe9ance Finale"}),(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:u(n.maturityDate)})]}),n.nextPaymentDate&&(0,ju.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Prochain Paiement"}),(0,ju.jsx)("p",{className:"font-semibold text-yellow-900",children:u(n.nextPaymentDate)}),(0,ju.jsxs)("p",{className:"text-sm text-yellow-700",children:["Montant: ",d(n.nextPaymentAmount||0,n.currency)]})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(lm,{className:"w-5 h-5 text-indigo-600"}),"Garanties"]}),(0,ju.jsxs)("div",{className:"space-y-3",children:[n.collateral&&(0,ju.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,ju.jsx)("p",{className:"text-sm text-blue-600 font-medium mb-1",children:"Garantie Mat\xe9rielle"}),(0,ju.jsx)("p",{className:"font-semibold text-blue-900",children:n.collateral})]}),n.guarantors&&n.guarantors.length>0&&(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("p",{className:"text-sm text-gray-600 mb-2 flex items-center gap-2",children:[(0,ju.jsx)(Ru,{className:"w-4 h-4"}),"Garants (",n.guarantors.length,")"]}),(0,ju.jsx)("div",{className:"space-y-2",children:n.guarantors.map((e,t)=>(0,ju.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:e}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600",children:["Garant ",0===t?"Principal":"Secondaire"]})]},t))})]})]})]})]})]}),"schedule"===i&&(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold",children:"Calendrier d'Amortissement"}),(0,ju.jsxs)("button",{onClick:()=>{Ts.success("Impression du calendrier de paiement...")},className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)(Fp,{className:"w-4 h-4"}),"Imprimer"]})]}),(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date d'\xc9ch\xe9ance"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capital"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Int\xe9r\xeat"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Solde Restant"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(e=>(0,ju.jsxs)("tr",{className:"OVERDUE"===e.status?"bg-red-50":"",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.installmentNumber}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u(e.dueDate)}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:d(e.principalAmount,n.currency)}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:d(e.interestAmount,n.currency)}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:d(e.totalPayment,n.currency)}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:d(e.remainingBalance,n.currency)}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:["PAID"===e.status&&(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,ju.jsx)(Ju,{className:"w-3 h-3"}),"Pay\xe9"]}),"PENDING"===e.status&&(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,ju.jsx)(Cu,{className:"w-3 h-3"}),"En cours"]}),"OVERDUE"===e.status&&(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,ju.jsx)(cm,{className:"w-3 h-3"}),"En retard"]}),"UPCOMING"===e.status&&(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[(0,ju.jsx)(pm,{className:"w-3 h-3"}),"\xc0 venir"]})]})]},e.installmentNumber))}),(0,ju.jsx)("tfoot",{className:"bg-gray-50 font-semibold",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("td",{colSpan:2,className:"px-6 py-4 text-sm text-gray-900",children:"TOTAL"}),(0,ju.jsx)("td",{className:"px-6 py-4 text-sm text-right text-gray-900",children:d(n.principalAmount,n.currency)}),(0,ju.jsx)("td",{className:"px-6 py-4 text-sm text-right text-gray-900",children:d(n.monthlyPayment*n.termMonths-n.principalAmount,n.currency)}),(0,ju.jsx)("td",{className:"px-6 py-4 text-sm text-right text-indigo-600",children:d(n.monthlyPayment*n.termMonths,n.currency)}),(0,ju.jsx)("td",{colSpan:2})]})})]})})]}),"history"===i&&(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold",children:"Historique des Paiements"}),"ACTIVE"===n.status&&(0,ju.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[(0,ju.jsx)(Tu,{className:"w-4 h-4"}),"Enregistrer Paiement"]})]}),0===x.length?(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)(Cu,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,ju.jsx)("p",{className:"text-gray-500",children:"Aucun paiement enregistr\xe9"})]}):(0,ju.jsx)("div",{className:"space-y-3",children:x.map(e=>(0,ju.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,ju.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:[(0,ju.jsx)(Ju,{className:"w-3 h-3"}),"Pay\xe9"]}),(0,ju.jsx)("span",{className:"text-sm text-gray-600",children:u(e.paymentDate)}),(0,ju.jsxs)("span",{className:"text-xs text-gray-500",children:["Re\xe7u: ",e.receiptNumber]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-2",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-xs text-gray-600",children:"Montant Total"}),(0,ju.jsx)("p",{className:"text-lg font-bold text-gray-900",children:d(e.amount,n.currency)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-xs text-gray-600",children:"Capital"}),(0,ju.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:d(e.principal,n.currency)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-xs text-gray-600",children:"Int\xe9r\xeat"}),(0,ju.jsx)("p",{className:"text-sm font-semibold text-gray-600",children:d(e.interest,n.currency)})]})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[(0,ju.jsxs)("span",{children:["M\xe9thode: ",(0,ju.jsx)("span",{className:"font-medium",children:e.paymentMethod})]}),(0,ju.jsxs)("span",{children:["Re\xe7u par: ",(0,ju.jsx)("span",{className:"font-medium",children:e.receivedBy})]})]}),e.notes&&(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-2 italic",children:e.notes})]}),(0,ju.jsx)("button",{onClick:()=>{return t=e.receiptNumber,void Ts.success("T\xe9l\xe9chargement du re\xe7u ".concat(t,"..."));var t},className:"text-indigo-600 hover:text-indigo-700 p-2",title:"T\xe9l\xe9charger le re\xe7u",children:(0,ju.jsx)(zu,{className:"w-5 h-5"})})]})},e.id))})]}),"documents"===i&&(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold",children:"Documents du Dossier"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:(0,ju.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ju.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,ju.jsx)(Hu,{className:"w-6 h-6 text-blue-600"})}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:"Contrat de Pr\xeat"}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600",children:["PDF \u2022 ",u(n.disbursementDate)]})]}),(0,ju.jsx)(zu,{className:"w-5 h-5 text-gray-400"})]})}),(0,ju.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:(0,ju.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ju.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,ju.jsx)(Ju,{className:"w-6 h-6 text-green-600"})}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:"Document d'Approbation"}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600",children:["PDF \u2022 ",n.approvedAt?u(n.approvedAt):"N/A"]})]}),(0,ju.jsx)(zu,{className:"w-5 h-5 text-gray-400"})]})}),(0,ju.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:(0,ju.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ju.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,ju.jsx)(lm,{className:"w-6 h-6 text-purple-600"})}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:"Documents de Garantie"}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600",children:["PDF \u2022 ",n.collateral||"N/A"]})]}),(0,ju.jsx)(zu,{className:"w-5 h-5 text-gray-400"})]})}),(0,ju.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:(0,ju.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ju.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,ju.jsx)(Ru,{className:"w-6 h-6 text-yellow-600"})}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"font-semibold text-gray-900",children:"Info Garants"}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600",children:["PDF \u2022 ",(null===(r=n.guarantors)||void 0===r?void 0:r.length)||0," garant(s)"]})]}),(0,ju.jsx)(zu,{className:"w-5 h-5 text-gray-400"})]})})]})]})]}),(0,ju.jsxs)("div",{className:"border-t border-gray-200 bg-gray-50 px-6 py-4 flex justify-end gap-3",children:[(0,ju.jsx)("button",{onClick:s,className:"px-6 py-2.5 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"Fermer"}),"ACTIVE"===n.status&&(0,ju.jsx)("button",{onClick:()=>c(!0),className:"px-6 py-2.5 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 transition-colors",children:"Enregistrer Paiement"})]})]}),o&&(0,ju.jsx)(UA,{loan:n,onClose:()=>c(!1),onSubmit:e=>{console.log("Payment submitted:",e),Ts.success("Paiement enregistr\xe9 avec succ\xe8s!"),c(!1),a&&a()}})]})},HA=mi("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),zA=mi("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),GA=t=>{let{onClose:r}=t;const[n,s]=(0,e.useState)("portfolio"),[a,i]=(0,e.useState)("30days"),[l,o]=(0,e.useState)("ALL"),c=247,d={HTG:4575e4,USD:95e3},u={HTG:321e5,USD:68e3},m={HTG:1365e4,USD:27e3},h=15.2,p=12.5,x=8.3,f=4.2,g=92.3,v=2.1,y=(e,t)=>"HTG"===t?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" HTG":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),b=e=>e>=95?"text-green-600":e>=90?"text-blue-600":e>=85?"text-yellow-600":"text-red-600",N=e=>e<5?"text-green-600":e<10?"text-yellow-600":e<15?"text-orange-600":"text-red-600",j=e=>{Ts.success("Export ".concat(e," en cours..."))};return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-7xl max-h-[95vh] overflow-hidden flex flex-col",children:[(0,ju.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 flex justify-between items-start",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Rapports de Microcr\xe9dits"}),(0,ju.jsx)("p",{className:"text-indigo-100",children:"Analyse du portefeuille et performance"})]}),(0,ju.jsxs)("div",{className:"flex gap-2",children:[(0,ju.jsx)("button",{onClick:()=>{Ts.success("Impression en cours...")},className:"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",title:"Imprimer",children:(0,ju.jsx)(Fp,{className:"w-5 h-5"})}),(0,ju.jsx)("button",{onClick:()=>j("PDF"),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",title:"Exporter PDF",children:(0,ju.jsx)(zu,{className:"w-5 h-5"})}),(0,ju.jsx)("button",{onClick:r,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",children:(0,ju.jsx)(vm,{className:"w-6 h-6"})})]})]}),(0,ju.jsx)("div",{className:"border-b border-gray-200 bg-gray-50 p-4",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)(pm,{className:"w-5 h-5 text-gray-400"}),(0,ju.jsxs)("select",{value:a,onChange:e=>i(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,ju.jsx)("option",{value:"7days",children:"7 derniers jours"}),(0,ju.jsx)("option",{value:"30days",children:"30 derniers jours"}),(0,ju.jsx)("option",{value:"90days",children:"90 derniers jours"}),(0,ju.jsx)("option",{value:"1year",children:"1 an"}),(0,ju.jsx)("option",{value:"custom",children:"Personnalis\xe9"})]})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)(Du,{className:"w-5 h-5 text-gray-400"}),(0,ju.jsxs)("select",{value:l,onChange:e=>o(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,ju.jsx)("option",{value:"ALL",children:"Toutes devises"}),(0,ju.jsx)("option",{value:"HTG",children:"HTG uniquement"}),(0,ju.jsx)("option",{value:"USD",children:"USD uniquement"})]})]})]}),(0,ju.jsxs)("button",{onClick:()=>j("EXCEL"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,ju.jsx)(zu,{className:"w-4 h-4"}),"Excel"]})]})}),(0,ju.jsx)("div",{className:"border-b border-gray-200 bg-gray-50",children:(0,ju.jsxs)("div",{className:"flex",children:[(0,ju.jsxs)("button",{onClick:()=>s("portfolio"),className:"flex-1 px-6 py-4 text-center font-medium transition-colors ".concat("portfolio"===n?"bg-white text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,ju.jsx)(Gw,{className:"w-5 h-5 inline-block mr-2"}),"Portefeuille"]}),(0,ju.jsxs)("button",{onClick:()=>s("performance"),className:"flex-1 px-6 py-4 text-center font-medium transition-colors ".concat("performance"===n?"bg-white text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,ju.jsx)(Yu,{className:"w-5 h-5 inline-block mr-2"}),"Performance"]}),(0,ju.jsxs)("button",{onClick:()=>s("overdue"),className:"flex-1 px-6 py-4 text-center font-medium transition-colors ".concat("overdue"===n?"bg-white text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,ju.jsx)(cm,{className:"w-5 h-5 inline-block mr-2"}),"Retards"]}),(0,ju.jsxs)("button",{onClick:()=>s("collection"),className:"flex-1 px-6 py-4 text-center font-medium transition-colors ".concat("collection"===n?"bg-white text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,ju.jsx)(HA,{className:"w-5 h-5 inline-block mr-2"}),"Recouvrement"]})]})}),(0,ju.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["portfolio"===n&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ju.jsx)("span",{className:"text-sm text-gray-600",children:"Total Pr\xeats"}),(0,ju.jsx)(Ru,{className:"w-5 h-5 text-blue-600"})]}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c}),(0,ju.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Tous types confondus"})]}),(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ju.jsx)("span",{className:"text-sm text-gray-600",children:"Capital D\xe9caiss\xe9"}),(0,ju.jsx)(ku,{className:"w-5 h-5 text-green-600"})]}),(0,ju.jsx)("p",{className:"text-lg font-bold text-gray-900",children:y(d.HTG,"HTG")}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:y(d.USD,"USD")})]}),(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-4",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ju.jsx)("span",{className:"text-sm text-gray-600",children:"Capital Restant"}),(0,ju.jsx)(Du,{className:"w-5 h-5 text-yellow-600"})]}),(0,ju.jsx)("p",{className:"text-lg font-bold text-gray-900",children:y(u.HTG,"HTG")}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:y(u.USD,"USD")})]}),(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ju.jsx)("span",{className:"text-sm text-gray-600",children:"Taux de Remboursement"}),(0,ju.jsx)(oA,{className:"w-5 h-5 text-purple-600"})]}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[g,"%"]}),(0,ju.jsxs)("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[(0,ju.jsx)(ku,{className:"w-3 h-3"}),"Excellent"]})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(cm,{className:"w-5 h-5 text-orange-600"}),"Portefeuille \xe0 Risque (PAR)"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"PAR Global"}),(0,ju.jsxs)("p",{className:"text-3xl font-bold ".concat(N(h)),children:[h,"%"]})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"PAR 30 jours"}),(0,ju.jsxs)("p",{className:"text-3xl font-bold ".concat(N(p)),children:[p,"%"]})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"PAR 60 jours"}),(0,ju.jsxs)("p",{className:"text-3xl font-bold ".concat(N(x)),children:[x,"%"]})]}),(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"PAR 90 jours"}),(0,ju.jsxs)("p",{className:"text-3xl font-bold ".concat(N(f)),children:[f,"%"]})]})]}),(0,ju.jsxs)("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-3 flex gap-2",children:[(0,ju.jsx)(Ju,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,ju.jsx)("p",{className:"text-sm text-blue-900",children:"Le PAR est dans les normes acceptables (<15%). Continuer le suivi des pr\xeats en retard."})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(Gw,{className:"w-5 h-5 text-indigo-600"}),"Distribution par Type de Pr\xeat"]}),(0,ju.jsx)("div",{className:"space-y-3",children:[{type:"COMMERCIAL",count:98,totalAmount:{HTG:185e5,USD:38e3},outstanding:{HTG:128e5,USD:26500},repaymentRate:94.5,defaultRate:1.5,averageInterestRate:18},{type:"AGRICULTURAL",count:72,totalAmount:{HTG:152e5,USD:31e3},outstanding:{HTG:105e5,USD:21500},repaymentRate:89.8,defaultRate:3.2,averageInterestRate:15},{type:"PERSONAL",count:61,totalAmount:{HTG:1005e4,USD:21e3},outstanding:{HTG:72e5,USD:15e3},repaymentRate:91.2,defaultRate:2.5,averageInterestRate:20},{type:"EMERGENCY",count:16,totalAmount:{HTG:2e6,USD:5e3},outstanding:{HTG:16e5,USD:5e3},repaymentRate:95,defaultRate:.5,averageInterestRate:22}].map(e=>{const t=e.count/c*100,r=(e=>{const t={COMMERCIAL:{label:"Commercial",emoji:"\ud83c\udfea",color:"blue"},AGRICULTURAL:{label:"Agricole",emoji:"\ud83c\udf3e",color:"green"},PERSONAL:{label:"Personnel",emoji:"\ud83d\udc64",color:"purple"},EMERGENCY:{label:"Urgence",emoji:"\ud83d\udea8",color:"red"}};return t[e]||t.PERSONAL})(e.type);return(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("span",{className:"text-2xl",children:r.emoji}),(0,ju.jsx)("span",{className:"font-semibold text-gray-900",children:r.label}),(0,ju.jsxs)("span",{className:"text-sm text-gray-600",children:["(",e.count," pr\xeats)"]})]}),(0,ju.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:[t.toFixed(1),"%"]})]}),(0,ju.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:(0,ju.jsx)("div",{className:"h-3 rounded-full bg-".concat(r.color,"-500"),style:{width:"".concat(t,"%")}})}),(0,ju.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600",children:"Montant Total"}),(0,ju.jsx)("p",{className:"font-semibold",children:y(e.totalAmount.HTG,"HTG")})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600",children:"Taux Moyen"}),(0,ju.jsxs)("p",{className:"font-semibold",children:[e.averageInterestRate,"%"]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-gray-600",children:"Remboursement"}),(0,ju.jsxs)("p",{className:"font-semibold ".concat(b(e.repaymentRate)),children:[e.repaymentRate,"%"]})]})]})]},e.type)})})]})]}),"performance"===n&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(Yu,{className:"w-5 h-5 text-indigo-600"}),"Performance par Succursale"]}),(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Succursale"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Pr\xeats"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"D\xe9caiss\xe9 HTG"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Restant HTG"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Taux Remb."}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"PAR 30"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:[{branch:"Port-au-Prince Centre",totalLoans:87,disbursed:{HTG:162e5,USD:33500},outstanding:{HTG:1134e4,USD:23450},repaymentRate:93.5,par30:11.2},{branch:"Cap-Ha\xeftien",totalLoans:64,disbursed:{HTG:119e5,USD:24600},outstanding:{HTG:833e4,USD:17220},repaymentRate:91.8,par30:13.5},{branch:"Les Cayes",totalLoans:52,disbursed:{HTG:965e4,USD:19950},outstanding:{HTG:6755e3,USD:13965},repaymentRate:90.5,par30:14.8},{branch:"Gona\xefves",totalLoans:44,disbursed:{HTG:8e6,USD:16950},outstanding:{HTG:5675e3,USD:13365},repaymentRate:92.1,par30:12.9}].map((e,t)=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("span",{className:"font-semibold text-gray-900",children:e.branch})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center text-gray-900",children:e.totalLoans}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-gray-900",children:y(e.disbursed.HTG,"HTG")}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-gray-900",children:y(e.outstanding.HTG,"HTG")}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,ju.jsxs)("span",{className:"font-semibold ".concat(b(e.repaymentRate)),children:[e.repaymentRate,"%"]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,ju.jsxs)("span",{className:"font-semibold ".concat(N(e.par30)),children:[e.par30,"%"]})})]},t))})]})})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(zA,{className:"w-5 h-5 text-indigo-600"}),"Performance des Agents de Cr\xe9dit"]}),(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Agent"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Total Pr\xeats"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Actifs"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"D\xe9caiss\xe9 HTG"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Collect\xe9 HTG"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Taux Remb."}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"En Retard"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:[{officer:"Marie Dupont",totalLoans:42,activeLoans:38,disbursed:{HTG:78e5,USD:16100},collected:{HTG:585e4,USD:12075},repaymentRate:96.5,overdueLoans:2},{officer:"Jean Baptiste",totalLoans:38,activeLoans:34,disbursed:{HTG:71e5,USD:14700},collected:{HTG:5112e3,USD:10584},repaymentRate:93.2,overdueLoans:4},{officer:"Pierre Louis",totalLoans:35,activeLoans:31,disbursed:{HTG:65e5,USD:13450},collected:{HTG:455e4,USD:9415},repaymentRate:89.5,overdueLoans:6},{officer:"Anne Marie Joseph",totalLoans:33,activeLoans:30,disbursed:{HTG:615e4,USD:12725},collected:{HTG:4612500,USD:9543},repaymentRate:94.8,overdueLoans:3}].map((e,t)=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[e.repaymentRate>=95&&(0,ju.jsx)(zA,{className:"w-4 h-4 text-yellow-500"}),(0,ju.jsx)("span",{className:"font-semibold text-gray-900",children:e.officer})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center text-gray-900",children:e.totalLoans}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center text-green-600 font-semibold",children:e.activeLoans}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-gray-900",children:y(e.disbursed.HTG,"HTG")}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-gray-900",children:y(e.collected.HTG,"HTG")}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,ju.jsxs)("span",{className:"font-semibold ".concat(b(e.repaymentRate)),children:[e.repaymentRate,"%"]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,ju.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ".concat(0===e.overdueLoans?"bg-green-100 text-green-800":e.overdueLoans<=3?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.overdueLoans})})]},t))})]})})]})]}),"overdue"===n&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(cm,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-red-900",children:[(0,ju.jsx)("p",{className:"font-medium mb-1",children:"Pr\xeats en Retard"}),(0,ju.jsx)("p",{children:"Liste des pr\xeats n\xe9cessitant une action de recouvrement imm\xe9diate."})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(Hu,{className:"w-5 h-5 text-red-600"}),"D\xe9tails des Pr\xeats en Retard"]}),(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Num\xe9ro"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Montant Pr\xeat"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Jours Retard"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Montant D\xfb"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"T\xe9l\xe9phone"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Agent"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:[{loanNumber:"MC-2025-0023",customerName:"Paul L\xe9on",amount:5e4,currency:"HTG",daysOverdue:45,dueAmount:4500,phone:"509-3845-6721",officer:"Pierre Louis",branch:"Port-au-Prince Centre"},{loanNumber:"MC-2025-0056",customerName:"Claudette Fran\xe7ois",amount:75e3,currency:"HTG",daysOverdue:32,dueAmount:6800,phone:"509-4512-8934",officer:"Jean Baptiste",branch:"Cap-Ha\xeftien"},{loanNumber:"MC-2025-0089",customerName:"Joseph Etienne",amount:1500,currency:"USD",daysOverdue:28,dueAmount:135,phone:"509-3678-2341",officer:"Marie Dupont",branch:"Les Cayes"},{loanNumber:"MC-2025-0112",customerName:"Rose Marie Pierre",amount:1e5,currency:"HTG",daysOverdue:22,dueAmount:9e3,phone:"509-4823-5612",officer:"Anne Marie Joseph",branch:"Gona\xefves"},{loanNumber:"MC-2025-0145",customerName:"Jacques Hyppolite",amount:2e3,currency:"USD",daysOverdue:18,dueAmount:180,phone:"509-3956-7823",officer:"Pierre Louis",branch:"Port-au-Prince Centre"}].map((e,t)=>(0,ju.jsxs)("tr",{className:e.daysOverdue>=60?"bg-red-50":e.daysOverdue>=30?"bg-yellow-50":"bg-white",children:[(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.loanNumber}),(0,ju.jsx)("p",{className:"text-xs text-gray-500",children:e.branch})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:e.customerName})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:y(e.amount,e.currency)}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-bold ".concat(e.daysOverdue>=60?"bg-red-100 text-red-800":e.daysOverdue>=30?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"),children:[(0,ju.jsx)(Cu,{className:"w-4 h-4"}),e.daysOverdue]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("span",{className:"text-sm font-bold text-red-600",children:y(e.dueAmount,e.currency)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("span",{className:"text-sm text-gray-900",children:e.phone})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("span",{className:"text-sm text-gray-900",children:e.officer})})]},t))})]})})]})]}),"collection"===n&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ju.jsx)("span",{className:"text-sm text-gray-600",children:"Capital Collect\xe9 (30j)"}),(0,ju.jsx)(Ju,{className:"w-5 h-5 text-green-600"})]}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:y(m.HTG,"HTG")}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:y(m.USD,"USD")}),(0,ju.jsxs)("p",{className:"text-xs text-green-600 mt-2 flex items-center gap-1",children:[(0,ju.jsx)(ku,{className:"w-3 h-3"}),"+12.5% vs mois pr\xe9c\xe9dent"]})]}),(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ju.jsx)("span",{className:"text-sm text-gray-600",children:"Taux de Collecte"}),(0,ju.jsx)(HA,{className:"w-5 h-5 text-blue-600"})]}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[g,"%"]}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Objectif: 95%"}),(0,ju.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-3",children:(0,ju.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(g/95*100,"%")}})})]}),(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-orange-50 border border-red-200 rounded-lg p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ju.jsx)("span",{className:"text-sm text-gray-600",children:"Taux de D\xe9faut"}),(0,ju.jsx)(Lp,{className:"w-5 h-5 text-red-600"})]}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[v,"%"]}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Limite: 5%"}),(0,ju.jsxs)("p",{className:"text-xs text-green-600 mt-2 flex items-center gap-1",children:[(0,ju.jsx)(rS,{className:"w-3 h-3"}),"Sous la limite"]})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,ju.jsx)(HA,{className:"w-5 h-5 text-indigo-600"}),"Actions de Recouvrement Recommand\xe9es"]}),(0,ju.jsxs)("div",{className:"space-y-3",children:[(0,ju.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(cm,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"font-semibold text-red-900 mb-1",children:"Priorit\xe9 HAUTE - 2 pr\xeats"}),(0,ju.jsx)("p",{className:"text-sm text-red-800",children:"Pr\xeats en retard de plus de 60 jours. Contact imm\xe9diat requis + visite terrain."})]})]}),(0,ju.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(cm,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"font-semibold text-yellow-900 mb-1",children:"Priorit\xe9 MOYENNE - 8 pr\xeats"}),(0,ju.jsx)("p",{className:"text-sm text-yellow-800",children:"Pr\xeats en retard de 30-60 jours. Appel t\xe9l\xe9phonique + plan de remboursement."})]})]}),(0,ju.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex gap-3",children:[(0,ju.jsx)(Cu,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"font-semibold text-blue-900 mb-1",children:"Suivi NORMAL - 15 pr\xeats"}),(0,ju.jsx)("p",{className:"text-sm text-blue-800",children:"Pr\xeats en retard de 1-30 jours. Rappel de paiement par SMS/appel."})]})]})]})]})]})]}),(0,ju.jsxs)("div",{className:"border-t border-gray-200 bg-gray-50 px-6 py-4 flex justify-between items-center",children:[(0,ju.jsxs)("p",{className:"text-sm text-gray-600",children:["Rapport g\xe9n\xe9r\xe9 le ",(new Date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})]}),(0,ju.jsx)("button",{onClick:r,className:"px-6 py-2.5 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"Fermer"})]})]})})},VA=()=>{var t,r;const[n,s]=(0,e.useState)([]),[a,i]=(0,e.useState)([]),[l,o]=(0,e.useState)({totalClients:0,activeLoans:0,totalOutstanding:{HTG:0,USD:0},repaymentRate:0,overdueLoans:{count:0,amount:{HTG:0,USD:0}},interestRevenue:{HTG:0,USD:0},loansCompletedThisMonth:0,newLoansThisMonth:0}),[c,d]=(0,e.useState)(!0),[u,m]=(0,e.useState)(!1),[h,p]=(0,e.useState)(null),[x,f]=(0,e.useState)(!1),[g,v]=(0,e.useState)(!1),[y,b]=(0,e.useState)(!1),[N,j]=(0,e.useState)("loans"),[w,S]=(0,e.useState)(""),[A,T]=(0,e.useState)("ALL"),[C,E]=(0,e.useState)("ALL"),[D,k]=(0,e.useState)("ALL");(0,e.useEffect)(()=>{R()},[]),(0,e.useEffect)(()=>{_()},[n,w,A,C,D]);const R=async()=>{try{d(!0),s([]),o({totalClients:0,activeLoans:0,totalOutstanding:{HTG:0,USD:0},repaymentRate:0,overdueLoans:{count:0,amount:{HTG:0,USD:0}},interestRevenue:{HTG:0,USD:0},loansCompletedThisMonth:0,newLoansThisMonth:0}),d(!1)}catch(Sc){console.error("Error loading loans:",Sc),Ts.error("Erreur lors du chargement des pr\xeats"),d(!1)}},_=()=>{let e=[...n];w&&(e=e.filter(e=>e.customerName.toLowerCase().includes(w.toLowerCase())||e.loanNumber.toLowerCase().includes(w.toLowerCase()))),"ALL"!==A&&(e=e.filter(e=>e.status===A)),"ALL"!==C&&(e=e.filter(e=>e.loanType===C)),"ALL"!==D&&(e=e.filter(e=>e.currency===D)),i(e)},I=(e,t)=>"HTG"===t?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" HTG":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(e),P=e=>new Date(e).toLocaleDateString("fr-FR"),O=e=>({[hA.COMMERCIAL]:"Commercial",[hA.AGRICULTURAL]:"Agricole",[hA.PERSONAL]:"Personnel",[hA.EMERGENCY]:"Urgence",[hA.CREDIT_LOYER]:"Cr\xe9dit Loyer",[hA.CREDIT_AUTO]:"Cr\xe9dit Auto",[hA.CREDIT_MOTO]:"Cr\xe9dit Moto",[hA.CREDIT_PERSONNEL]:"Cr\xe9dit Personnel",[hA.CREDIT_SCOLAIRE]:"Cr\xe9dit Scolaire",[hA.CREDIT_AGRICOLE]:"Cr\xe9dit Agricole",[hA.CREDIT_PROFESSIONNEL]:"Cr\xe9dit Professionnel",[hA.CREDIT_APPUI]:"Cr\xe9dit d'Appui",[hA.CREDIT_HYPOTHECAIRE]:"Cr\xe9dit Hypoth\xe9caire"}[e]),L=e=>{const t={[hA.COMMERCIAL]:{color:"bg-blue-100 text-blue-800",icon:"\ud83c\udfea"},[hA.AGRICULTURAL]:{color:"bg-green-100 text-green-800",icon:"\ud83c\udf3e"},[hA.PERSONAL]:{color:"bg-purple-100 text-purple-800",icon:"\ud83d\udc64"},[hA.EMERGENCY]:{color:"bg-red-100 text-red-800",icon:"\ud83d\udea8"},[hA.CREDIT_LOYER]:{color:"bg-indigo-100 text-indigo-800",icon:"\ud83c\udfe0"},[hA.CREDIT_AUTO]:{color:"bg-cyan-100 text-cyan-800",icon:"\ud83d\ude97"},[hA.CREDIT_MOTO]:{color:"bg-teal-100 text-teal-800",icon:"\ud83c\udfcd\ufe0f"},[hA.CREDIT_PERSONNEL]:{color:"bg-pink-100 text-pink-800",icon:"\ud83d\udcb3"},[hA.CREDIT_SCOLAIRE]:{color:"bg-amber-100 text-amber-800",icon:"\ud83d\udcda"},[hA.CREDIT_AGRICOLE]:{color:"bg-lime-100 text-lime-800",icon:"\ud83d\ude9c"},[hA.CREDIT_PROFESSIONNEL]:{color:"bg-violet-100 text-violet-800",icon:"\ud83d\udcbc"},[hA.CREDIT_APPUI]:{color:"bg-orange-100 text-orange-800",icon:"\ud83e\udd1d"},[hA.CREDIT_HYPOTHECAIRE]:{color:"bg-slate-100 text-slate-800",icon:"\ud83c\udfe1"}}[e];return(0,ju.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(t.color," flex items-center gap-1"),children:[(0,ju.jsx)("span",{children:t.icon}),O(e)]})},F=e=>{const t={[pA.PENDING]:{color:"bg-yellow-100 text-yellow-800",label:"En attente",icon:Cu},[pA.APPROVED]:{color:"bg-blue-100 text-blue-800",label:"Approuv\xe9",icon:Ju},[pA.ACTIVE]:{color:"bg-green-100 text-green-800",label:"Actif",icon:Ju},[pA.COMPLETED]:{color:"bg-gray-100 text-gray-800",label:"Sold\xe9",icon:Ju},[pA.OVERDUE]:{color:"bg-red-100 text-red-800",label:"En retard",icon:cm},[pA.DEFAULTED]:{color:"bg-red-200 text-red-900",label:"En d\xe9faut",icon:Lp},[pA.CANCELLED]:{color:"bg-gray-100 text-gray-800",label:"Annul\xe9",icon:Lp}}[e],r=t.icon;return(0,ju.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(t.color," flex items-center gap-1"),children:[(0,ju.jsx)(r,{className:"w-3 h-3"}),t.label]})},M=e=>{p(e),f(!0)},U=e=>{p(e),v(!0)};return c?(0,ju.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,ju.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestion des Microcr\xe9dits"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"Portefeuille de pr\xeats et remboursements"})]}),(0,ju.jsxs)("div",{className:"flex gap-3",children:[(0,ju.jsxs)("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)(Yu,{className:"w-5 h-5"}),"Rapports"]}),(0,ju.jsxs)("button",{onClick:()=>{Ts.success("Export en cours...")},className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)(zu,{className:"w-5 h-5"}),"Exporter"]}),(0,ju.jsxs)("button",{onClick:()=>{m(!0)},className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[(0,ju.jsx)(Au,{className:"w-5 h-5"}),"Nouvelle Demande"]})]})]}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsx)("div",{className:"border-b border-gray-200",children:(0,ju.jsxs)("nav",{className:"flex -mb-px",children:[(0,ju.jsx)("button",{onClick:()=>j("applications"),className:"px-6 py-4 text-sm font-medium border-b-2 transition-colors ".concat("applications"===N?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)(Hu,{className:"w-5 h-5"}),(0,ju.jsx)("span",{children:"Nouvelles Demandes"}),(0,ju.jsx)("span",{className:"ml-2 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-semibold rounded-full",children:n.filter(e=>e.status===pA.PENDING).length})]})}),(0,ju.jsx)("button",{onClick:()=>j("loans"),className:"px-6 py-4 text-sm font-medium border-b-2 transition-colors ".concat("loans"===N?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)(Tu,{className:"w-5 h-5"}),(0,ju.jsx)("span",{children:"Pr\xeats Actifs"}),(0,ju.jsx)("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded-full",children:n.filter(e=>e.status===pA.ACTIVE).length})]})})]})})}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,ju.jsx)(Ru,{className:"w-6 h-6 text-blue-600"})}),(0,ju.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:l.totalClients.toLocaleString()})]}),(0,ju.jsx)("h3",{className:"text-gray-600 text-sm font-medium",children:"Total Clients"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Emprunteurs enregistr\xe9s"})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,ju.jsx)(Tu,{className:"w-6 h-6 text-green-600"})}),(0,ju.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:l.activeLoans})]}),(0,ju.jsx)("h3",{className:"text-gray-600 text-sm font-medium",children:"Cr\xe9dits Actifs"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Pr\xeats en cours"})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,ju.jsx)(Du,{className:"w-6 h-6 text-purple-600"})}),(0,ju.jsxs)("div",{className:"text-right",children:[(0,ju.jsx)("p",{className:"text-lg font-bold text-gray-900",children:I(l.totalOutstanding.HTG,"HTG")}),(0,ju.jsx)("p",{className:"text-sm font-semibold text-gray-600",children:I(l.totalOutstanding.USD,"USD")})]})]}),(0,ju.jsx)("h3",{className:"text-gray-600 text-sm font-medium",children:"Capital Restant"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Encours total"})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsx)("div",{className:"p-3 bg-indigo-100 rounded-lg",children:(0,ju.jsx)(oA,{className:"w-6 h-6 text-indigo-600"})}),(0,ju.jsxs)("div",{className:"text-right",children:[(0,ju.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[l.repaymentRate,"%"]}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Taux global"})]})]}),(0,ju.jsx)("h3",{className:"text-gray-600 text-sm font-medium",children:"Taux Remboursement"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Performance globale"})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsx)("div",{className:"p-3 bg-red-100 rounded-lg",children:(0,ju.jsx)(cm,{className:"w-6 h-6 text-red-600"})}),(0,ju.jsxs)("div",{className:"text-right",children:[(0,ju.jsx)("p",{className:"text-2xl font-bold text-red-600",children:l.overdueLoans.count}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"pr\xeats en retard"})]})]}),(0,ju.jsx)("h3",{className:"text-gray-600 text-sm font-medium",children:"Cr\xe9dits en Retard"}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[(0,ju.jsx)("p",{children:I(l.overdueLoans.amount.HTG,"HTG")}),(0,ju.jsx)("p",{children:I(l.overdueLoans.amount.USD,"USD")})]})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsx)("div",{className:"p-3 bg-emerald-100 rounded-lg",children:(0,ju.jsx)(ku,{className:"w-6 h-6 text-emerald-600"})}),(0,ju.jsxs)("div",{className:"text-right",children:[(0,ju.jsx)("p",{className:"text-lg font-bold text-emerald-600",children:I(l.interestRevenue.HTG,"HTG")}),(0,ju.jsx)("p",{className:"text-sm font-semibold text-gray-600",children:I(l.interestRevenue.USD,"USD")})]})]}),(0,ju.jsx)("h3",{className:"text-gray-600 text-sm font-medium",children:"Revenus Int\xe9r\xeats"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Int\xe9r\xeats per\xe7us"})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsx)("div",{className:"p-3 bg-cyan-100 rounded-lg",children:(0,ju.jsx)(Ju,{className:"w-6 h-6 text-cyan-600"})}),(0,ju.jsx)("span",{className:"text-2xl font-bold text-cyan-600",children:l.loansCompletedThisMonth})]}),(0,ju.jsx)("h3",{className:"text-gray-600 text-sm font-medium",children:"Rembours\xe9s ce Mois"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Pr\xeats sold\xe9s"})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsx)("div",{className:"p-3 bg-orange-100 rounded-lg",children:(0,ju.jsx)(Au,{className:"w-6 h-6 text-orange-600"})}),(0,ju.jsx)("span",{className:"text-2xl font-bold text-orange-600",children:l.newLoansThisMonth})]}),(0,ju.jsx)("h3",{className:"text-gray-600 text-sm font-medium",children:"Nouveaux Cr\xe9dits"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Ce mois"})]})]}),"loans"===N&&(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ju.jsx)("div",{children:(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,ju.jsx)("input",{type:"text",placeholder:"Rechercher...",value:w,onChange:e=>S(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),(0,ju.jsxs)("select",{value:A,onChange:e=>T(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"ALL",children:"Tous les statuts"}),(0,ju.jsx)("option",{value:pA.PENDING,children:"En attente"}),(0,ju.jsx)("option",{value:pA.APPROVED,children:"Approuv\xe9"}),(0,ju.jsx)("option",{value:pA.ACTIVE,children:"Actif"}),(0,ju.jsx)("option",{value:pA.COMPLETED,children:"Sold\xe9"}),(0,ju.jsx)("option",{value:pA.OVERDUE,children:"En retard"}),(0,ju.jsx)("option",{value:pA.DEFAULTED,children:"En d\xe9faut"}),(0,ju.jsx)("option",{value:pA.CANCELLED,children:"Annul\xe9"})]}),(0,ju.jsxs)("select",{value:C,onChange:e=>E(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"ALL",children:"Tous les types"}),(0,ju.jsx)("option",{value:hA.COMMERCIAL,children:"Commercial"}),(0,ju.jsx)("option",{value:hA.AGRICULTURAL,children:"Agricole"}),(0,ju.jsx)("option",{value:hA.PERSONAL,children:"Personnel"}),(0,ju.jsx)("option",{value:hA.EMERGENCY,children:"Urgence"}),(0,ju.jsx)("option",{value:hA.CREDIT_LOYER,children:"Cr\xe9dit Loyer"}),(0,ju.jsx)("option",{value:hA.CREDIT_AUTO,children:"Cr\xe9dit Auto"}),(0,ju.jsx)("option",{value:hA.CREDIT_MOTO,children:"Cr\xe9dit Moto"}),(0,ju.jsx)("option",{value:hA.CREDIT_PERSONNEL,children:"Cr\xe9dit Personnel"}),(0,ju.jsx)("option",{value:hA.CREDIT_SCOLAIRE,children:"Cr\xe9dit Scolaire"}),(0,ju.jsx)("option",{value:hA.CREDIT_AGRICOLE,children:"Cr\xe9dit Agricole"}),(0,ju.jsx)("option",{value:hA.CREDIT_PROFESSIONNEL,children:"Cr\xe9dit Professionnel"}),(0,ju.jsx)("option",{value:hA.CREDIT_APPUI,children:"Cr\xe9dit d'Appui"}),(0,ju.jsx)("option",{value:hA.CREDIT_HYPOTHECAIRE,children:"Cr\xe9dit Hypoth\xe9caire"})]}),(0,ju.jsxs)("select",{value:D,onChange:e=>k(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"ALL",children:"Toutes devises"}),(0,ju.jsx)("option",{value:"HTG",children:"HTG"}),(0,ju.jsx)("option",{value:"USD",children:"USD"})]})]}),(0,ju.jsxs)("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-600",children:[(0,ju.jsxs)("span",{children:[a.length," pr\xeat(s) trouv\xe9(s)"]}),(w||"ALL"!==A||"ALL"!==C||"ALL"!==D)&&(0,ju.jsx)("button",{onClick:()=>{S(""),T("ALL"),E("ALL"),k("ALL")},className:"text-primary-600 hover:text-primary-700 font-medium",children:"R\xe9initialiser les filtres"})]})]}),"applications"===N&&(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,ju.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Demandes en Attente d'Approbation"}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[n.filter(e=>e.status===pA.PENDING).length," demande(s) \xe0 traiter"]})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,ju.jsx)(Cu,{className:"w-5 h-5 text-yellow-600"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-yellow-800",children:"Action requise"})]})]})}),(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"w-full",children:[(0,ju.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Demande"}),(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type de Cr\xe9dit"}),(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant Demand\xe9"}),(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dur\xe9e"}),(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Garanties"}),(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===n.filter(e=>e.status===pA.PENDING).length?(0,ju.jsx)("tr",{children:(0,ju.jsx)("td",{colSpan:8,className:"px-6 py-12 text-center",children:(0,ju.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[(0,ju.jsx)(Ju,{className:"w-12 h-12 mb-4 text-gray-300"}),(0,ju.jsx)("p",{className:"text-lg font-medium",children:"Aucune demande en attente"}),(0,ju.jsx)("p",{className:"text-sm mt-2",children:"Toutes les demandes ont \xe9t\xe9 trait\xe9es"})]})})}):n.filter(e=>e.status===pA.PENDING).map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-yellow-50 transition-colors",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-900",children:P(e.createdAt)}),(0,ju.jsx)("p",{className:"text-xs text-gray-500",children:e.loanNumber})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("div",{className:"p-2 bg-blue-100 rounded-full",children:(0,ju.jsx)(ym,{className:"w-4 h-4 text-blue-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.customerName}),(0,ju.jsx)("p",{className:"text-xs text-gray-500",children:e.branch})]})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:L(e.loanType)}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ju.jsx)("p",{className:"text-sm font-bold text-gray-900",children:I(e.principalAmount,e.currency)}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:["Mensualit\xe9: ",I(e.monthlyPayment,e.currency)]})]}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ju.jsxs)("p",{className:"text-sm text-gray-900",children:[e.termMonths," mois"]}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:["Taux: ",e.interestRate,"%"]})]}),(0,ju.jsx)("td",{className:"px-6 py-4",children:(0,ju.jsxs)("div",{className:"max-w-xs",children:[e.collateral&&(0,ju.jsxs)("div",{className:"flex items-start gap-1 mb-1",children:[(0,ju.jsx)(lm,{className:"w-3 h-3 text-green-600 mt-0.5 flex-shrink-0"}),(0,ju.jsx)("p",{className:"text-xs text-gray-600",children:e.collateral})]}),e.guarantors&&e.guarantors.length>0&&(0,ju.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ju.jsx)(Ru,{className:"w-3 h-3 text-blue-600 flex-shrink-0"}),(0,ju.jsxs)("p",{className:"text-xs text-gray-600",children:[e.guarantors.length," garant(s)"]})]})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[F(e.status),(0,ju.jsx)("span",{className:"text-xs text-yellow-600 font-medium",children:"En attente"})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsxs)("button",{onClick:()=>M(e),className:"px-3 py-1.5 text-xs font-medium text-blue-600 hover:text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors flex items-center gap-1",children:[(0,ju.jsx)(fi,{className:"w-3 h-3"}),"Voir"]}),(0,ju.jsxs)("button",{onClick:()=>U(e),className:"px-3 py-1.5 text-xs font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors flex items-center gap-1",children:[(0,ju.jsx)(Ju,{className:"w-3 h-3"}),"Traiter"]})]})})]},e.id))})]})})]}),"loans"===N&&(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"w-full",children:[(0,ju.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pr\xeat"}),(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mensualit\xe9"}),(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Restant"}),(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prochain Paiement"}),(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===a.length?(0,ju.jsx)("tr",{children:(0,ju.jsx)("td",{colSpan:9,className:"px-6 py-12 text-center",children:(0,ju.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[(0,ju.jsx)(Tu,{className:"w-12 h-12 mb-4 text-gray-300"}),(0,ju.jsx)("p",{className:"text-lg font-medium",children:"Aucun pr\xeat trouv\xe9"}),(0,ju.jsx)("p",{className:"text-sm mt-2",children:"Modifiez vos filtres ou cr\xe9ez une nouvelle demande"})]})})}):a.map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.loanNumber}),(0,ju.jsx)("p",{className:"text-xs text-gray-500",children:e.branch})]})}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.customerName}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:["Agent: ",e.loanOfficer]})]}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[L(e.loanType),(0,ju.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.termMonths," mois \xb7 ",e.interestRate,"%"]})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:I(e.principalAmount,e.currency)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("p",{className:"text-sm font-medium text-blue-600",children:I(e.monthlyPayment,e.currency)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-semibold text-purple-600",children:I(e.remainingBalance,e.currency)}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:["Pay\xe9: ",I(e.paidAmount,e.currency)]})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.nextPaymentDate&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-900",children:P(e.nextPaymentDate)}),(0,ju.jsx)("p",{className:"text-xs font-medium text-green-600",children:I(e.nextPaymentAmount||0,e.currency)})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"space-y-1",children:[F(e.status),"OVERDUE"===e.status&&e.daysOverdue&&(0,ju.jsxs)("p",{className:"text-xs text-red-600 font-medium",children:[e.daysOverdue," jours de retard"]})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsxs)("button",{onClick:()=>M(e),className:"text-primary-600 hover:text-primary-700 font-medium flex items-center gap-1",children:[(0,ju.jsx)(fi,{className:"w-4 h-4"}),"D\xe9tails"]}),"PENDING"===e.status&&(0,ju.jsxs)("button",{onClick:()=>U(e),className:"text-green-600 hover:text-green-700 font-medium flex items-center gap-1",children:[(0,ju.jsx)(Ju,{className:"w-4 h-4"}),"Approuver"]})]})})]},e.id))})]})})}),u&&(0,ju.jsx)(LA,{onSubmit:e=>{console.log("Loan application submitted:",e),Ts.success("Demande de cr\xe9dit soumise avec succ\xe8s!\n\nVotre demande sera examin\xe9e par notre comit\xe9 de cr\xe9dit.",{duration:5e3}),m(!1),setTimeout(()=>R(),500)},onCancel:()=>m(!1)}),x&&h&&(0,ju.jsx)(BA,{loan:h,onClose:()=>f(!1),onRecordPayment:()=>{R()}}),g&&h&&(0,ju.jsx)(FA,{application:{id:h.id,loanNumber:h.loanNumber,loanType:h.loanType,customerId:h.customerId,customerName:h.customerName,phone:"509-XXXX-XXXX",email:void 0,address:"Port-au-Prince",occupation:"Commer\xe7ant",monthlyIncome:5e4,dependents:2,requestedAmount:h.principalAmount,currency:h.currency,termMonths:h.termMonths,interestRate:h.interestRate,monthlyPayment:h.monthlyPayment,purpose:"Financement activit\xe9 commerciale",collateralType:h.collateral,collateralValue:1.3*h.principalAmount,collateralDescription:"Garantie fournie",guarantor1Name:null===(t=h.guarantors)||void 0===t?void 0:t[0],guarantor1Phone:"509-XXXX-XXXX",guarantor1Relation:"FAMILY",guarantor2Name:null===(r=h.guarantors)||void 0===r?void 0:r[1],guarantor2Phone:"509-YYYY-YYYY",guarantor2Relation:"FRIEND",submittedDate:h.createdAt,status:h.status,currentApprovalLevel:1,branchId:h.branch},onClose:()=>v(!1),onApprove:(e,t,r)=>{console.log("Approving loan:",e,"at level:",t,"comment:",r),Ts.success("Demande approuv\xe9e avec succ\xe8s!"),v(!1),R()},onReject:(e,t,r)=>{console.log("Rejecting loan:",e,"at level:",t,"reason:",r),Ts.error("Demande rejet\xe9e"),v(!1),R()}}),y&&(0,ju.jsx)(GA,{onClose:()=>b(!1)})]})},WA=()=>{const[t,r]=(0,e.useState)("overview"),[n,s]=(0,e.useState)([]),[a,i]=(0,e.useState)({totalBranches:0,activeBranches:0,totalUsers:0,activeUsers:0,totalVolume:0,systemHealth:96.8,recentActivity:45,totalSavingsAccounts:0,activeSavingsAccounts:0,totalSavingsBalance:0,totalClientAccounts:0,activeClientAccounts:0,totalClientBalanceHTG:0,totalClientBalanceUSD:0});(0,e.useEffect)(()=>{l(),o()},[]);const l=async()=>{try{const e=await Di.getSuperAdminDashboard();i(e)}catch(Sc){console.error("Error loading system stats:",Sc),Ts.error("Erreur lors du chargement des statistiques syst\xe8me")}},o=async()=>{try{const e=await Di.getRecentActivities(10);s(e)}catch(Sc){console.error("Error loading recent activities:",Sc)}},c=()=>(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Succursales"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.totalBranches}),(0,ju.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:[a.activeBranches," actives"]})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(Ku,{className:"h-6 w-6 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Utilisateurs Syst\xe8me"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.totalUsers}),(0,ju.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:[a.activeUsers," actifs aujourd'hui"]})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(Ru,{className:"h-6 w-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Comptes Clients"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.totalClientAccounts}),(0,ju.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:[a.activeClientAccounts," actifs"]})]}),(0,ju.jsx)("div",{className:"p-3 bg-indigo-100 rounded-full",children:(0,ju.jsx)(Tu,{className:"h-6 w-6 text-indigo-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Sant\xe9 du Syst\xe8me"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[a.systemHealth,"%"]}),(0,ju.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Performance optimale"})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(Xu,{className:"h-6 w-6 text-green-600"})})]})})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(lm,{className:"h-5 w-5 mr-2 text-green-600"}),"\xc9tat du Syst\xe8me"]}),(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)(Ju,{className:"h-5 w-5 text-green-500 mr-3"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Base de donn\xe9es"})]}),(0,ju.jsx)("span",{className:"text-sm text-green-600",children:"Op\xe9rationnel"})]}),(0,ju.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)(Ju,{className:"h-5 w-5 text-green-500 mr-3"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Services API"})]}),(0,ju.jsx)("span",{className:"text-sm text-green-600",children:"Op\xe9rationnel"})]}),(0,ju.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)(Ju,{className:"h-5 w-5 text-green-500 mr-3"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Syst\xe8me de sauvegarde"})]}),(0,ju.jsx)("span",{className:"text-sm text-green-600",children:"Op\xe9rationnel"})]}),(0,ju.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)(Cu,{className:"h-5 w-5 text-yellow-500 mr-3"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Maintenance programm\xe9e"})]}),(0,ju.jsx)("span",{className:"text-sm text-yellow-600",children:"Dimanche 02:00"})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(ku,{className:"h-5 w-5 mr-2 text-blue-600"}),"Activit\xe9 R\xe9cente"]}),(0,ju.jsx)("div",{className:"space-y-4",children:n.length>0?n.map((e,t)=>(0,ju.jsxs)("div",{className:"flex items-start space-x-3 py-3 ".concat(t<n.length-1?"border-b border-gray-100":""),children:[(0,ju.jsxs)("div",{className:"p-2 rounded-full ".concat("branch"===e.type?"bg-blue-100":"user"===e.type?"bg-green-100":"transaction"===e.type?"bg-orange-100":"bg-purple-100"),children:["branch"===e.type&&(0,ju.jsx)(Ku,{className:"h-4 w-4 text-blue-600"}),"user"===e.type&&(0,ju.jsx)(Ru,{className:"h-4 w-4 text-green-600"}),"transaction"===e.type&&(0,ju.jsx)(ku,{className:"h-4 w-4 text-orange-600"}),"config"===e.type&&(0,ju.jsx)(om,{className:"h-4 w-4 text-purple-600"}),"alert"===e.type&&(0,ju.jsx)(cm,{className:"h-4 w-4 text-yellow-600"})]}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:[e.description," - ",new Date(e.timestamp).toLocaleString("fr-FR")]})]})]},e.id)):(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("div",{className:"flex items-start space-x-3 py-3 border-b border-gray-100",children:[(0,ju.jsx)("div",{className:"p-2 bg-blue-100 rounded-full",children:(0,ju.jsx)(Ku,{className:"h-4 w-4 text-blue-600"})}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Nouvelle succursale cr\xe9\xe9e"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500",children:"Port-au-Prince Centre - Il y a 2 heures"})]})]}),(0,ju.jsxs)("div",{className:"flex items-start space-x-3 py-3 border-b border-gray-100",children:[(0,ju.jsx)("div",{className:"p-2 bg-green-100 rounded-full",children:(0,ju.jsx)(Ru,{className:"h-4 w-4 text-green-600"})}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Nouvel utilisateur ajout\xe9"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500",children:"Marie Joseph (Caissi\xe8re) - Il y a 4 heures"})]})]}),(0,ju.jsxs)("div",{className:"flex items-start space-x-3 py-3 border-b border-gray-100",children:[(0,ju.jsx)("div",{className:"p-2 bg-purple-100 rounded-full",children:(0,ju.jsx)(om,{className:"h-4 w-4 text-purple-600"})}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Configuration mise \xe0 jour"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500",children:"Limites de cr\xe9dit modifi\xe9es - Il y a 6 heures"})]})]}),(0,ju.jsxs)("div",{className:"flex items-start space-x-3 py-3",children:[(0,ju.jsx)("div",{className:"p-2 bg-yellow-100 rounded-full",children:(0,ju.jsx)(cm,{className:"h-4 w-4 text-yellow-600"})}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Alerte syst\xe8me"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500",children:"Espace disque faible sur serveur 2 - Il y a 8 heures"})]})]})]})})]})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"R\xe9sum\xe9 Rapide"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ju.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[(0,ju.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null===a||void 0===a?void 0:a.totalBranches)||0}),(0,ju.jsx)("div",{className:"text-sm text-gray-600",children:"Succursales"})]}),(0,ju.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,ju.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null===a||void 0===a?void 0:a.totalUsers)||0}),(0,ju.jsx)("div",{className:"text-sm text-gray-600",children:"Utilisateurs"})]}),(0,ju.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[(0,ju.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(null===a||void 0===a?void 0:a.totalClientAccounts)||0}),(0,ju.jsx)("div",{className:"text-sm text-gray-600",children:"Comptes Clients"})]})]}),(0,ju.jsx)("div",{className:"mt-4 text-sm text-gray-500 text-center",children:"Utilisez le menu de navigation \xe0 gauche pour acc\xe9der aux diff\xe9rents modules du syst\xe8me."})]})]});return(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Super Administrateur"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"Vue d'ensemble du syst\xe8me Nala Kredi Ti Machann"})]}),c()]})},qA=mi("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),$A=mi("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),KA=mi("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),XA=e=>{var t,r,n,s;let{children:a,user:i,onLogout:l}=e;const o=kr(),c=[{name:"Tableau de bord",icon:Pw,href:"/dashboard"},{name:"Comptes Clients",icon:Bu,href:"/client-accounts"},{name:"Administrateurs",icon:lm,href:"/admin/accounts"},{name:"Succursales",icon:Ku,href:"/branches"},{name:"Comptes d'\xe9pargne",icon:dm,href:"/savings"},{name:"Comptes Courants",icon:Bu,href:"/current-accounts"},{name:"Comptes d'\xc9pargne \xe0 Terme",icon:ku,href:"/term-savings"},{name:"Microcr\xe9dits",icon:um,href:"/loans"},{name:"Change de devises",icon:Du,href:"/currency-exchange/rates"},{name:"Transferts Inter-Succursales",icon:qA,href:"/transfers"},{name:"Paie",icon:NA,href:"/payroll"},{name:"Transactions",icon:Tu,href:"/transactions"},{name:"Rapports",icon:Hu,href:"/reports"},{name:"Param\xe8tres",icon:om,href:"/settings"}];return(0,ju.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ju.jsx)("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg",children:(0,ju.jsxs)("div",{className:"flex flex-col h-full",children:[(0,ju.jsx)("div",{className:"flex items-center px-6 py-4 border-b",children:(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:(0,ju.jsx)("span",{className:"text-white font-bold text-sm",children:"NC"})}),(0,ju.jsxs)("div",{className:"ml-3",children:[(0,ju.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:"Nala Kredi"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500",children:"Ti Machann"})]})]})}),(0,ju.jsx)("nav",{className:"flex-1 px-4 py-4 space-y-1",children:c.map(e=>{const t=e.icon,r="/dashboard"===(n=e.href)?"/dashboard"===o.pathname:o.pathname.startsWith(n)&&"#"!==n;var n;return"#"===e.href?(0,ju.jsxs)("a",{href:"#",className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900",children:[(0,ju.jsx)(t,{className:"mr-3 flex-shrink-0 h-5 w-5 text-gray-400 group-hover:text-gray-500"}),e.name]},e.name):(0,ju.jsxs)(ln,{to:e.href,className:"\n                    group flex items-center px-2 py-2 text-sm font-medium rounded-md\n                    ".concat(r?"bg-primary-100 text-primary-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900","\n                  "),children:[(0,ju.jsx)(t,{className:"\n                      mr-3 flex-shrink-0 h-5 w-5\n                      ".concat(r?"text-primary-500":"text-gray-400 group-hover:text-gray-500","\n                    ")}),e.name]},e.name)})}),(0,ju.jsx)("div",{className:"border-t px-4 py-4",children:(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)("div",{className:"flex-shrink-0",children:(0,ju.jsx)("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center",children:(0,ju.jsxs)("span",{className:"text-sm font-medium text-white",children:[null===(t=i.firstName)||void 0===t?void 0:t[0],null===(r=i.lastName)||void 0===r?void 0:r[0]]})})}),(0,ju.jsxs)("div",{className:"ml-3 flex-1",children:[(0,ju.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[i.firstName," ",i.lastName]}),(0,ju.jsx)("p",{className:"text-xs text-gray-500",children:i.role}),i.branchName&&(0,ju.jsx)("p",{className:"text-xs text-primary-600 truncate",children:i.branchName})]})]})})]})}),(0,ju.jsxs)("div",{className:"pl-64",children:[(0,ju.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,ju.jsx)("div",{className:"px-6 py-4",children:(0,ju.jsx)("div",{className:"flex items-center justify-end",children:(0,ju.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ju.jsxs)("button",{className:"p-2 text-gray-400 hover:text-gray-500 relative",children:[(0,ju.jsx)($A,{className:"h-6 w-6"}),(0,ju.jsx)("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white rounded-full text-xs flex items-center justify-center",children:"3"})]}),i.branchName&&(0,ju.jsxs)("div",{className:"hidden md:flex items-center px-3 py-1 bg-primary-50 rounded-full",children:[(0,ju.jsx)(Ku,{className:"h-4 w-4 text-primary-600 mr-2"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-primary-800",children:i.branchName})]}),(0,ju.jsxs)("div",{className:"flex items-center space-x-3 px-3 py-2 bg-gray-50 rounded-lg",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ju.jsx)("div",{className:"flex-shrink-0",children:(0,ju.jsx)("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center",children:(0,ju.jsxs)("span",{className:"text-sm font-medium text-white",children:[null===(n=i.firstName)||void 0===n?void 0:n[0],null===(s=i.lastName)||void 0===s?void 0:s[0]]})})}),(0,ju.jsxs)("div",{className:"hidden md:block",children:[(0,ju.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[i.firstName," ",i.lastName]}),(0,ju.jsx)("p",{className:"text-xs text-gray-500",children:i.role})]})]}),(0,ju.jsx)("button",{onClick:l,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"D\xe9connexion",children:(0,ju.jsx)(KA,{className:"h-5 w-5"})})]})]})})})}),(0,ju.jsx)("main",{className:"p-6",children:a})]})]})};let YA=function(e){return e[e.Active=0]="Active",e[e.Inactive=1]="Inactive",e[e.Suspended=2]="Suspended",e[e.Terminated=3]="Terminated",e}({}),JA=function(e){return e[e.Cashier=0]="Cashier",e[e.CreditAgent=1]="CreditAgent",e[e.BranchSupervisor=2]="BranchSupervisor",e[e.RegionalManager=3]="RegionalManager",e[e.SystemAdmin=4]="SystemAdmin",e[e.Accounting=5]="Accounting",e[e.Management=6]="Management",e[e.SuperAdmin=7]="SuperAdmin",e[e.Security=8]="Security",e[e.Maintenance=9]="Maintenance",e[e.CustomerService=10]="CustomerService",e}({});const ZA=e=>({[JA.Cashier]:"Caissier",[JA.CreditAgent]:"Agent de Cr\xe9dit",[JA.BranchSupervisor]:"Superviseur de Succursale",[JA.RegionalManager]:"Gestionnaire R\xe9gional",[JA.SystemAdmin]:"Administrateur Syst\xe8me",[JA.Accounting]:"Comptabilit\xe9",[JA.Management]:"Direction",[JA.SuperAdmin]:"Super Administrateur",[JA.Security]:"S\xe9curit\xe9",[JA.Maintenance]:"Maintenance",[JA.CustomerService]:"Service Client"}[e]||"Inconnu"),QA=e=>({[YA.Active]:"Actif",[YA.Inactive]:"Inactif",[YA.Suspended]:"Suspendu",[YA.Terminated]:"Licenci\xe9"}[e]||"Inconnu"),eT=tp({employeeNumber:Hh().required("Num\xe9ro d'employ\xe9 requis"),firstName:Hh().required("Pr\xe9nom requis"),lastName:Hh().required("Nom de famille requis"),email:Hh().email("Email invalide").required("Email requis"),phoneNumber:Hh().required("Num\xe9ro de t\xe9l\xe9phone requis"),nationalId:Hh().required("Num\xe9ro d'identit\xe9 nationale requis"),dateOfBirth:Hh().required("Date de naissance requise"),hireDate:Hh().required("Date d'embauche requise"),function:Gh().required("Fonction requise"),branchId:Hh().required("Succursale requise"),baseSalary:Gh().min(0,"Salaire invalide").required("Salaire de base requis"),currency:Hh().oneOf(["HTG","USD"],"Devise invalide").required("Devise requise"),bankAccountNumber:Hh(),bankName:Hh(),address:Hh().required("Adresse requise"),emergencyContactName:Hh().required("Contact d'urgence requis"),emergencyContactPhone:Hh().required("T\xe9l\xe9phone du contact d'urgence requis"),status:Gh().when("$isEdit",{is:!0,then:e=>e.required("Statut requis"),otherwise:e=>e.notRequired()}),terminationDate:Hh().nullable()}),tT=t=>{var r,n;let{employee:a,branchId:i,onSubmit:l,onCancel:o}=t;const[c,d]=(0,e.useState)([]),[u,m]=(0,e.useState)(!1),h=!!a,{register:p,handleSubmit:x,formState:{errors:f},setValue:g,watch:v}=ri({resolver:Hm(eT),context:{isEdit:h},defaultValues:{employeeNumber:(null===a||void 0===a?void 0:a.employeeNumber)||"",firstName:(null===a||void 0===a?void 0:a.firstName)||"",lastName:(null===a||void 0===a?void 0:a.lastName)||"",email:(null===a||void 0===a?void 0:a.email)||"",phoneNumber:(null===a||void 0===a?void 0:a.phoneNumber)||"",nationalId:(null===a||void 0===a?void 0:a.nationalId)||"",dateOfBirth:null!==a&&void 0!==a&&a.dateOfBirth?new Date(a.dateOfBirth).toISOString().split("T")[0]:"",hireDate:null!==a&&void 0!==a&&a.hireDate?new Date(a.hireDate).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],function:null!==(r=null===a||void 0===a?void 0:a.function)&&void 0!==r?r:JA.Cashier,branchId:(null===a||void 0===a?void 0:a.branchId)||i||"",baseSalary:(null===a||void 0===a?void 0:a.baseSalary)||0,currency:(null===a||void 0===a?void 0:a.currency)||"HTG",bankAccountNumber:(null===a||void 0===a?void 0:a.bankAccountNumber)||"",bankName:(null===a||void 0===a?void 0:a.bankName)||"",address:(null===a||void 0===a?void 0:a.address)||"",emergencyContactName:(null===a||void 0===a?void 0:a.emergencyContactName)||"",emergencyContactPhone:(null===a||void 0===a?void 0:a.emergencyContactPhone)||"",status:null!==(n=null===a||void 0===a?void 0:a.status)&&void 0!==n?n:YA.Active,terminationDate:null!==a&&void 0!==a&&a.terminationDate?new Date(a.terminationDate).toISOString().split("T")[0]:""}}),y=v("status");(0,e.useEffect)(()=>{b()},[]);const b=async()=>{try{const e=await Di.getAllBranches();d(e)}catch(Sc){console.error("Error loading branches:",Sc)}};return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,ju.jsx)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-screen overflow-y-auto",children:(0,ju.jsxs)("form",{onSubmit:x(async e=>{m(!0);try{const t=(0,s.A)((0,s.A)({},e),{},{dateOfBirth:new Date(e.dateOfBirth).toISOString(),hireDate:new Date(e.hireDate).toISOString(),terminationDate:e.terminationDate?new Date(e.terminationDate).toISOString():null},h&&{id:a.id});l(t)}finally{m(!1)}}),children:[(0,ju.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,ju.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:h?"Modifier l'employ\xe9":"Nouvel employ\xe9"}),(0,ju.jsx)("button",{type:"button",onClick:o,className:"text-gray-400 hover:text-gray-600",children:(0,ju.jsx)(vm,{className:"w-6 h-6"})})]}),(0,ju.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informations personnelles"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Num\xe9ro d'employ\xe9 *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},p("employeeNumber")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"EMP001"})),f.employeeNumber&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.employeeNumber.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Num\xe9ro d'identit\xe9 nationale *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},p("nationalId")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"123-456-789-0"})),f.nationalId&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.nationalId.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pr\xe9nom *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},p("firstName")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"Jean"})),f.firstName&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.firstName.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de famille *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},p("lastName")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"Dupont"})),f.lastName&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.lastName.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[(0,ju.jsx)(pm,{className:"w-4 h-4 mr-1"}),"Date de naissance *"]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"date"},p("dateOfBirth")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})),f.dateOfBirth&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.dateOfBirth.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[(0,ju.jsx)(pm,{className:"w-4 h-4 mr-1"}),"Date d'embauche *"]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"date"},p("hireDate")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})),f.hireDate&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.hireDate.message})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informations de contact"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[(0,ju.jsx)(pi,{className:"w-4 h-4 mr-1"}),"Email *"]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"email"},p("email")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"jean.dupont@email.com"})),f.email&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.email.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[(0,ju.jsx)(Zw,{className:"w-4 h-4 mr-1"}),"T\xe9l\xe9phone *"]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"tel"},p("phoneNumber")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"+509 1234 5678"})),f.phoneNumber&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.phoneNumber.message})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[(0,ju.jsx)(Jw,{className:"w-4 h-4 mr-1"}),"Adresse *"]}),(0,ju.jsx)("textarea",(0,s.A)((0,s.A)({},p("address")),{},{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"123 Rue de la Paix, Port-au-Prince, Ha\xefti"})),f.address&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.address.message})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact d'urgence"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom du contact d'urgence *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},p("emergencyContactName")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"Marie Dupont"})),f.emergencyContactName&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.emergencyContactName.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xe9l\xe9phone du contact d'urgence *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"tel"},p("emergencyContactPhone")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"+509 8765 4321"})),f.emergencyContactPhone&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.emergencyContactPhone.message})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informations d'emploi"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fonction *"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},p("function")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",children:[(0,ju.jsx)("option",{value:JA.Cashier,children:ZA(JA.Cashier)}),(0,ju.jsx)("option",{value:JA.CreditAgent,children:ZA(JA.CreditAgent)}),(0,ju.jsx)("option",{value:JA.BranchSupervisor,children:ZA(JA.BranchSupervisor)}),(0,ju.jsx)("option",{value:JA.RegionalManager,children:ZA(JA.RegionalManager)}),(0,ju.jsx)("option",{value:JA.SystemAdmin,children:ZA(JA.SystemAdmin)}),(0,ju.jsx)("option",{value:JA.Accounting,children:ZA(JA.Accounting)}),(0,ju.jsx)("option",{value:JA.Management,children:ZA(JA.Management)}),(0,ju.jsx)("option",{value:JA.Security,children:ZA(JA.Security)}),(0,ju.jsx)("option",{value:JA.Maintenance,children:ZA(JA.Maintenance)}),(0,ju.jsx)("option",{value:JA.CustomerService,children:ZA(JA.CustomerService)})]})),f.function&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.function.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Succursale *"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},p("branchId")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner une succursale"}),c.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))]})),f.branchId&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.branchId.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[(0,ju.jsx)(Du,{className:"w-4 h-4 mr-1"}),"Salaire de base *"]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"number",step:"0.01"},p("baseSalary")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"50000"})),f.baseSalary&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.baseSalary.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Devise *"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},p("currency")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",children:[(0,ju.jsx)("option",{value:"HTG",children:"HTG - Gourde Ha\xeftienne"}),(0,ju.jsx)("option",{value:"USD",children:"USD - Dollar Am\xe9ricain"})]})),f.currency&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.currency.message})]}),h&&(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut *"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},p("status")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",children:[(0,ju.jsx)("option",{value:YA.Active,children:"Actif"}),(0,ju.jsx)("option",{value:YA.Inactive,children:"Inactif"}),(0,ju.jsx)("option",{value:YA.Suspended,children:"Suspendu"}),(0,ju.jsx)("option",{value:YA.Terminated,children:"Licenci\xe9"})]})),f.status&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.status.message})]}),y===YA.Terminated&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de licenciement"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"date"},p("terminationDate")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})),f.terminationDate&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.terminationDate.message})]})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informations bancaires (optionnel)"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de la banque"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},p("bankName")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"Banque de la R\xe9publique d'Ha\xefti"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Num\xe9ro de compte"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},p("bankAccountNumber")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"1234567890"}))]})]})]})]}),(0,ju.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:[(0,ju.jsx)("button",{type:"button",onClick:o,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Annuler"}),(0,ju.jsxs)("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 flex items-center",children:[u&&(0,ju.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),(0,ju.jsx)(lp,{className:"w-4 h-4 mr-2"}),h?"Modifier":"Cr\xe9er"]})]})]})})})},rT=t=>{let{branchId:r}=t;const[n,s]=(0,e.useState)([]),[a,i]=(0,e.useState)(!0),[l,o]=(0,e.useState)(""),[c,d]=(0,e.useState)(""),[u,m]=(0,e.useState)(""),[h,p]=(0,e.useState)(!1),[x,f]=(0,e.useState)(null),[g,v]=(0,e.useState)(null);(0,e.useEffect)(()=>{y()},[r,c,u,l]);const y=async()=>{try{i(!0);const e={branchId:r,status:c||void 0,function:u||void 0,searchTerm:l.trim()||void 0},t=(await Di.getEmployees(e)).map(e=>{var t,r,n,s,a;return{id:e.id,employeeNumber:e.employeeNumber||e.employeeCode||"",firstName:e.firstName,lastName:e.lastName,email:e.email,phoneNumber:e.phoneNumber,nationalId:e.nationalId,dateOfBirth:e.dateOfBirth||"",hireDate:e.hireDate,terminationDate:e.terminationDate,function:null!==(t=null!==(r=e.function)&&void 0!==r?r:e.position)&&void 0!==t?t:"",functionName:null!==(n=null!==(s=e.functionName)&&void 0!==s?s:e.positionName)&&void 0!==n?n:"",status:e.status,statusName:e.statusName,branchId:e.branchId,branchName:e.branchName,baseSalary:e.baseSalary,currency:e.currency,bankAccountNumber:e.bankAccountNumber||e.bankAccount||"",bankName:e.bankName,address:e.address,emergencyContactName:e.emergencyContactName||"",emergencyContactPhone:e.emergencyContactPhone||"",isActive:null!==(a=e.isActive)&&void 0!==a?a:0===e.status,createdAt:e.createdAt,updatedAt:e.updatedAt,createdBy:e.createdBy,updatedBy:e.updatedBy}});s(t)}catch(Sc){console.error("Error loading employees:",Sc),Ts.error("Erreur lors du chargement des employ\xe9s")}finally{i(!1)}},b=(e,t)=>"HTG"===t?"".concat(e.toLocaleString()," HTG"):"$".concat(e.toLocaleString()),N=e=>{switch(e){case YA.Active:return"bg-green-100 text-green-800";case YA.Inactive:return"bg-gray-100 text-gray-800";case YA.Suspended:return"bg-yellow-100 text-yellow-800";case YA.Terminated:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=e=>{switch(e){case YA.Active:return(0,ju.jsx)(Ju,{className:"w-4 h-4"});case YA.Inactive:case YA.Suspended:case YA.Terminated:return(0,ju.jsx)(Su,{className:"w-4 h-4"});default:return null}};return(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,ju.jsx)(Ru,{className:"w-8 h-8 mr-3 text-primary-600"}),"Gestion des Employ\xe9s"]}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"G\xe9rez les employ\xe9s de votre organisation"})]}),(0,ju.jsxs)("button",{onClick:()=>{f(null),p(!0)},className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 flex items-center",children:[(0,ju.jsx)(mm,{className:"w-5 h-5 mr-2"}),"Nouvel Employ\xe9"]})]}),(0,ju.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,ju.jsx)("input",{type:"text",placeholder:"Rechercher un employ\xe9...",value:l,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})]}),(0,ju.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",children:[(0,ju.jsx)("option",{value:"",children:"Tous les statuts"}),(0,ju.jsx)("option",{value:YA.Active,children:"Actif"}),(0,ju.jsx)("option",{value:YA.Inactive,children:"Inactif"}),(0,ju.jsx)("option",{value:YA.Suspended,children:"Suspendu"}),(0,ju.jsx)("option",{value:YA.Terminated,children:"Licenci\xe9"})]}),(0,ju.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",children:[(0,ju.jsx)("option",{value:"",children:"Toutes les fonctions"}),(0,ju.jsx)("option",{value:JA.Cashier,children:"Caissier"}),(0,ju.jsx)("option",{value:JA.CreditAgent,children:"Agent de Cr\xe9dit"}),(0,ju.jsx)("option",{value:JA.BranchSupervisor,children:"Superviseur"}),(0,ju.jsx)("option",{value:JA.RegionalManager,children:"Manager R\xe9gional"}),(0,ju.jsx)("option",{value:JA.SystemAdmin,children:"Admin Syst\xe8me"}),(0,ju.jsx)("option",{value:JA.Accounting,children:"Comptabilit\xe9"}),(0,ju.jsx)("option",{value:JA.Management,children:"Direction"})]}),(0,ju.jsxs)("button",{onClick:()=>{o(""),d(""),m("")},className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-center",children:[(0,ju.jsx)(hm,{className:"w-4 h-4 mr-2"}),"R\xe9initialiser"]})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-lg shadow",children:a?(0,ju.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,ju.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):0===n.length?(0,ju.jsx)("div",{className:"text-center p-8 text-gray-500",children:"Aucun employ\xe9 trouv\xe9"}):(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employ\xe9"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fonction"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Succursale"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salaire"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-6 py-4",children:(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,ju.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,ju.jsxs)("span",{className:"text-primary-600 font-medium",children:[e.firstName[0],e.lastName[0]]})})}),(0,ju.jsxs)("div",{className:"ml-4",children:[(0,ju.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),(0,ju.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,ju.jsx)(pi,{className:"w-4 h-4 mr-1"}),e.email]}),(0,ju.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,ju.jsx)(Zw,{className:"w-4 h-4 mr-1"}),e.phoneNumber]})]})]})}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:ZA(e.function)}),(0,ju.jsxs)("div",{className:"text-sm text-gray-500",children:["#",e.employeeNumber]})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"text-sm text-gray-900 flex items-center",children:[(0,ju.jsx)(Jw,{className:"w-4 h-4 mr-1"}),e.branchName]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"text-sm text-gray-900 flex items-center",children:[(0,ju.jsx)(Du,{className:"w-4 h-4 mr-1"}),b(e.baseSalary,e.currency)]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(N(e.status)),children:[j(e.status),(0,ju.jsx)("span",{className:"ml-1",children:QA(e.status)})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,ju.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ju.jsx)("button",{onClick:()=>v(e),className:"text-blue-600 hover:text-blue-900",title:"Voir d\xe9tails",children:(0,ju.jsx)(fi,{className:"w-4 h-4"})}),(0,ju.jsx)("button",{onClick:()=>(e=>{f(e),p(!0)})(e),className:"text-primary-600 hover:text-primary-900",title:"Modifier",children:(0,ju.jsx)(Wu,{className:"w-4 h-4"})}),(0,ju.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer l'employ\xe9 ".concat(e.firstName," ").concat(e.lastName,"?")))try{await Di.deleteEmployee(e.id),Ts.success("Employ\xe9 supprim\xe9 avec succ\xe8s"),y()}catch(Sc){console.error("Error deleting employee:",Sc),Ts.error("Erreur lors de la suppression")}})(e),className:"text-red-600 hover:text-red-900",title:"Supprimer",children:(0,ju.jsx)(bm,{className:"w-4 h-4"})})]})})]},e.id))})]})})}),h&&(0,ju.jsx)(tT,{employee:x,branchId:r,onSubmit:async e=>{try{x?(await Di.updateEmployee(e),Ts.success("Employ\xe9 modifi\xe9 avec succ\xe8s")):(await Di.createEmployee(e),Ts.success("Employ\xe9 cr\xe9\xe9 avec succ\xe8s")),p(!1),f(null),y()}catch(Sc){console.error("Error saving employee:",Sc),Ts.error("Erreur lors de l'enregistrement")}},onCancel:()=>{p(!1),f(null)}}),g&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,ju.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto",children:(0,ju.jsxs)("div",{className:"p-6",children:[(0,ju.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold",children:"D\xe9tails de l'employ\xe9"}),(0,ju.jsx)("button",{onClick:()=>v(null),className:"text-gray-400 hover:text-gray-600",children:"\xd7"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nom complet"}),(0,ju.jsxs)("p",{className:"text-sm text-gray-900 mt-1",children:[g.firstName," ",g.lastName]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Num\xe9ro d'employ\xe9"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:g.employeeNumber})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:g.email})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"T\xe9l\xe9phone"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:g.phoneNumber})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date d'embauche"}),(0,ju.jsxs)("p",{className:"text-sm text-gray-900 mt-1 flex items-center",children:[(0,ju.jsx)(pm,{className:"w-4 h-4 mr-1"}),new Date(g.hireDate).toLocaleDateString()]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Fonction"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:ZA(g.function)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Succursale"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:g.branchName})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Salaire de base"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:b(g.baseSalary,g.currency)})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Adresse"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:g.address})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Contact d'urgence"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:g.emergencyContactName}),(0,ju.jsx)("p",{className:"text-sm text-gray-500",children:g.emergencyContactPhone})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Statut"}),(0,ju.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mt-1 ".concat(N(g.status)),children:[j(g.status),(0,ju.jsx)("span",{className:"ml-1",children:QA(g.status)})]})]})]})]})})})]})},nT=mi("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),sT=mi("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),aT=t=>{let{onClose:r}=t;const[n,s]=(0,e.useState)(""),[a,i]=(0,e.useState)(""),[l,o]=(0,e.useState)("ALL"),[c,d]=(0,e.useState)("ALL"),[u,m]=(0,e.useState)(!1),[h,p]=(0,e.useState)(!1),[x,f]=(0,e.useState)(null),g=8,v=248e3,y=37200,b=210800,[N]=(0,e.useState)([{id:"PI001",employeeId:"EMP001",employeeCode:"EMP-2024-001",employeeName:"Jean Baptiste",position:"Directeur de Succursale",branch:"Port-au-Prince Centre",baseSalary:45e3,overtimeHours:0,overtimeAmount:0,bonuses:[{id:"B1",type:"PERFORMANCE",description:"Prime de performance",amount:5e3},{id:"B2",type:"TRANSPORT",description:"Indemnit\xe9 transport",amount:2e3}],totalBonuses:7e3,deductions:[{id:"D1",type:"TAX",description:"Imp\xf4t sur le revenu (10%)",amount:4500},{id:"D2",type:"INSURANCE",description:"Assurance sant\xe9",amount:1500}],totalDeductions:6e3,grossSalary:52e3,netSalary:46e3,paymentMethod:"BANK_TRANSFER",bankAccount:"BNC-001234567",status:"APPROVED"},{id:"PI002",employeeId:"EMP002",employeeCode:"EMP-2024-002",employeeName:"Marie Dupont",position:"Agent de Cr\xe9dit",branch:"Port-au-Prince Centre",baseSalary:28e3,overtimeHours:8,overtimeAmount:1400,bonuses:[{id:"B3",type:"PERFORMANCE",description:"Commission sur pr\xeats",amount:3e3},{id:"B4",type:"TRANSPORT",description:"Indemnit\xe9 transport",amount:1500}],totalBonuses:4500,deductions:[{id:"D3",type:"TAX",description:"Imp\xf4t sur le revenu (8%)",amount:2240},{id:"D4",type:"ADVANCE",description:"Avance sur salaire",amount:5e3}],totalDeductions:7240,grossSalary:33900,netSalary:26660,paymentMethod:"BANK_TRANSFER",bankAccount:"BNC-001234568",status:"APPROVED"},{id:"PI003",employeeId:"EMP003",employeeCode:"EMP-2024-003",employeeName:"Pierre Louis",position:"Caissier",branch:"Cap-Ha\xeftien",baseSalary:22e3,overtimeHours:12,overtimeAmount:1650,bonuses:[{id:"B5",type:"TRANSPORT",description:"Indemnit\xe9 transport",amount:1200}],totalBonuses:1200,deductions:[{id:"D5",type:"TAX",description:"Imp\xf4t sur le revenu (7%)",amount:1540}],totalDeductions:1540,grossSalary:24850,netSalary:23310,paymentMethod:"MOBILE_MONEY",mobileNumber:"+509 3734 5678",status:"APPROVED"},{id:"PI004",employeeId:"EMP004",employeeCode:"EMP-2024-004",employeeName:"Claudette Fran\xe7ois",position:"Responsable RH",branch:"Port-au-Prince Centre",baseSalary:35e3,overtimeHours:0,overtimeAmount:0,bonuses:[{id:"B6",type:"TRANSPORT",description:"Indemnit\xe9 transport",amount:1800}],totalBonuses:1800,deductions:[{id:"D6",type:"TAX",description:"Imp\xf4t sur le revenu (9%)",amount:3150},{id:"D7",type:"PENSION",description:"Cotisation retraite (3%)",amount:1050}],totalDeductions:4200,grossSalary:36800,netSalary:32600,paymentMethod:"BANK_TRANSFER",bankAccount:"BNC-001234569",status:"PENDING"},{id:"PI005",employeeId:"EMP005",employeeCode:"EMP-2024-005",employeeName:"Jacques Hyppolite",position:"Agent de S\xe9curit\xe9",branch:"Les Cayes",baseSalary:18e3,overtimeHours:16,overtimeAmount:1800,bonuses:[{id:"B7",type:"ATTENDANCE",description:"Prime assiduit\xe9",amount:1e3}],totalBonuses:1e3,deductions:[{id:"D8",type:"TAX",description:"Imp\xf4t sur le revenu (6%)",amount:1080}],totalDeductions:1080,grossSalary:20800,netSalary:19720,paymentMethod:"CASH",status:"PENDING"},{id:"PI006",employeeId:"EMP006",employeeCode:"EMP-2024-006",employeeName:"Rose Marie Pierre",position:"Agent de Cr\xe9dit",branch:"Gona\xefves",baseSalary:26e3,overtimeHours:6,overtimeAmount:975,bonuses:[{id:"B8",type:"PERFORMANCE",description:"Commission sur pr\xeats",amount:2500}],totalBonuses:2500,deductions:[{id:"D9",type:"TAX",description:"Imp\xf4t sur le revenu (8%)",amount:2080}],totalDeductions:2080,grossSalary:29475,netSalary:27395,paymentMethod:"BANK_TRANSFER",bankAccount:"BNC-001234570",status:"PENDING"},{id:"PI007",employeeId:"EMP007",employeeCode:"EMP-2024-007",employeeName:"Paul L\xe9on",position:"Informaticien",branch:"Port-au-Prince Centre",baseSalary:4e4,overtimeHours:10,overtimeAmount:2500,bonuses:[{id:"B9",type:"TRANSPORT",description:"Indemnit\xe9 transport",amount:2e3}],totalBonuses:2e3,deductions:[{id:"D10",type:"TAX",description:"Imp\xf4t sur le revenu (10%)",amount:4e3},{id:"D11",type:"PENSION",description:"Cotisation retraite (3%)",amount:1200}],totalDeductions:5200,grossSalary:44500,netSalary:39300,paymentMethod:"BANK_TRANSFER",bankAccount:"BNC-001234571",status:"PENDING"},{id:"PI008",employeeId:"EMP008",employeeCode:"EMP-2024-008",employeeName:"Anne Joseph",position:"Comptable",branch:"Port-au-Prince Centre",baseSalary:32e3,overtimeHours:4,overtimeAmount:800,bonuses:[{id:"B10",type:"TRANSPORT",description:"Indemnit\xe9 transport",amount:1600}],totalBonuses:1600,deductions:[{id:"D12",type:"TAX",description:"Imp\xf4t sur le revenu (9%)",amount:2880},{id:"D13",type:"INSURANCE",description:"Assurance sant\xe9",amount:1e3}],totalDeductions:3880,grossSalary:34400,netSalary:30520,paymentMethod:"BANK_TRANSFER",bankAccount:"BNC-001234572",status:"PENDING"}]),j=e=>new Intl.NumberFormat("fr-HT").format(e)+" HTG",w=e=>{switch(e){case"PENDING":return"bg-yellow-100 text-yellow-800";case"APPROVED":return"bg-green-100 text-green-800";case"PAID":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},S=e=>{switch(e){case"PENDING":return"En attente";case"APPROVED":return"Approuv\xe9";case"PAID":return"Pay\xe9";default:return e}},A=e=>{switch(e){case"CASH":return"Esp\xe8ces";case"BANK_TRANSFER":return"Virement";case"MOBILE_MONEY":return"Mobile Money";default:return e}},T=N.filter(e=>{const t=e.employeeName.toLowerCase().includes(a.toLowerCase())||e.employeeCode.toLowerCase().includes(a.toLowerCase())||e.position.toLowerCase().includes(a.toLowerCase()),r="ALL"===l||e.branch===l,n="ALL"===c||e.status===c;return t&&r&&n}),C={employees:T.length,grossSalary:T.reduce((e,t)=>e+t.grossSalary,0),totalDeductions:T.reduce((e,t)=>e+t.totalDeductions,0),netSalary:T.reduce((e,t)=>e+t.netSalary,0)};return(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Traitement de la Paie"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"P\xe9riode: Octobre 2024 (01/10/2024 - 31/10/2024)"})]}),(0,ju.jsxs)("div",{className:"flex gap-3",children:[(0,ju.jsxs)("button",{onClick:()=>{rs.success("Bulletins de paie g\xe9n\xe9r\xe9s avec succ\xe8s")},className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)(Hu,{className:"w-5 h-5"}),"Bulletins de Paie"]}),(0,ju.jsxs)("button",{onClick:()=>{rs.success("Export en cours...")},className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)(zu,{className:"w-5 h-5"}),"Exporter"]})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Employ\xe9s"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:g}),(0,ju.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"\xc0 payer"})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(Ru,{className:"h-6 w-6 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Salaire Brut"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[j(v/1e3),"K"]}),(0,ju.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Total p\xe9riode"})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(ku,{className:"h-6 w-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"D\xe9ductions"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[j(y/1e3),"K"]}),(0,ju.jsx)("p",{className:"text-sm text-orange-600 mt-1",children:"Total retenues"})]}),(0,ju.jsx)("div",{className:"p-3 bg-orange-100 rounded-full",children:(0,ju.jsx)(nT,{className:"h-6 w-6 text-orange-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Salaire Net"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-indigo-900 mt-1",children:[j(b/1e3),"K"]}),(0,ju.jsx)("p",{className:"text-sm text-indigo-600 mt-1",children:"\xc0 d\xe9caisser"})]}),(0,ju.jsx)("div",{className:"p-3 bg-indigo-100 rounded-full",children:(0,ju.jsx)(Du,{className:"h-6 w-6 text-indigo-600"})})]})})]}),(0,ju.jsxs)("div",{className:"flex items-center justify-between bg-gradient-to-r from-indigo-50 to-blue-50 border border-indigo-200 rounded-xl p-4",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ju.jsx)(sT,{className:"w-6 h-6 text-indigo-600"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"font-medium text-gray-900",children:"Paie calcul\xe9e et pr\xeate"}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600",children:[N.filter(e=>"APPROVED"===e.status).length," approuv\xe9s, "," ",N.filter(e=>"PENDING"===e.status).length," en attente"]})]})]}),(0,ju.jsxs)("div",{className:"flex gap-3",children:[(0,ju.jsxs)("button",{onClick:()=>{window.confirm("Approuver toutes les paies en attente?")&&rs.success("Toutes les paies ont \xe9t\xe9 approuv\xe9es")},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,ju.jsx)(Tm,{className:"w-5 h-5"}),"Approuver Tout"]}),(0,ju.jsxs)("button",{onClick:()=>{window.confirm("Traiter les paiements pour toutes les paies approuv\xe9es?")&&rs.success("Les paiements ont \xe9t\xe9 trait\xe9s avec succ\xe8s")},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[(0,ju.jsx)(Du,{className:"w-5 h-5"}),"Traiter Paiements"]})]})]}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,ju.jsx)("input",{type:"text",placeholder:"Rechercher un employ\xe9...",value:a,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,ju.jsxs)("select",{value:l,onChange:e=>o(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"ALL",children:"Toutes les succursales"}),[{id:"BR001",name:"Port-au-Prince Centre"},{id:"BR002",name:"Cap-Ha\xeftien"},{id:"BR003",name:"Les Cayes"},{id:"BR004",name:"Gona\xefves"}].map(e=>(0,ju.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,ju.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"ALL",children:"Tous les statuts"}),(0,ju.jsx)("option",{value:"PENDING",children:"En attente"}),(0,ju.jsx)("option",{value:"APPROVED",children:"Approuv\xe9s"}),(0,ju.jsx)("option",{value:"PAID",children:"Pay\xe9s"})]})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employ\xe9"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Succursale"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salaire Base"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Heures Sup."}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Primes"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Brut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"D\xe9ductions"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net \xe0 Payer"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.employeeName}),(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:e.employeeCode}),(0,ju.jsx)("div",{className:"text-xs text-gray-400",children:e.position})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:e.branch})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:j(e.baseSalary)})}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[(0,ju.jsxs)("div",{className:"text-sm text-gray-900",children:[e.overtimeHours,"h"]}),(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:j(e.overtimeAmount)})]}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[(0,ju.jsxs)("div",{className:"text-sm font-medium text-green-600",children:["+",j(e.totalBonuses)]}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:[e.bonuses.length," prime(s)"]})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm font-bold text-gray-900",children:j(e.grossSalary)})}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[(0,ju.jsxs)("div",{className:"text-sm font-medium text-red-600",children:["-",j(e.totalDeductions)]}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:[e.deductions.length," d\xe9duction(s)"]})]}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[(0,ju.jsx)("div",{className:"text-base font-bold text-indigo-600",children:j(e.netSalary)}),(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:A(e.paymentMethod)})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(w(e.status)),children:S(e.status)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,ju.jsxs)("div",{className:"flex items-center justify-end gap-2",children:["PENDING"===e.status&&(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)("button",{onClick:()=>(e=>{rs.success("Paie approuv\xe9e pour ".concat(e.employeeName))})(e),className:"text-green-600 hover:text-green-900",title:"Approuver",children:(0,ju.jsx)(Tm,{className:"w-5 h-5"})}),(0,ju.jsx)("button",{onClick:()=>(e=>{window.confirm("Rejeter la paie de ".concat(e.employeeName,"?"))&&rs.success("Paie rejet\xe9e")})(e),className:"text-red-600 hover:text-red-900",title:"Rejeter",children:(0,ju.jsx)(vm,{className:"w-5 h-5"})})]}),(0,ju.jsx)("button",{onClick:()=>(e=>{rs.success("Impression du bulletin de paie pour ".concat(e.employeeName))})(e),className:"text-blue-600 hover:text-blue-900",title:"Imprimer bulletin",children:(0,ju.jsx)(Fp,{className:"w-5 h-5"})})]})})]},e.id))}),(0,ju.jsx)("tfoot",{className:"bg-gray-50 border-t-2 border-gray-300",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsxs)("td",{colSpan:5,className:"px-6 py-4 text-right font-bold text-gray-900",children:["TOTAUX (",C.employees," employ\xe9s):"]}),(0,ju.jsx)("td",{className:"px-6 py-4 text-right font-bold text-gray-900",children:j(C.grossSalary)}),(0,ju.jsxs)("td",{className:"px-6 py-4 text-right font-bold text-red-600",children:["-",j(C.totalDeductions)]}),(0,ju.jsx)("td",{className:"px-6 py-4 text-right font-bold text-indigo-900 text-lg",children:j(C.netSalary)}),(0,ju.jsx)("td",{colSpan:2})]})})]})})}),(0,ju.jsxs)("div",{className:"text-sm text-gray-600 text-center",children:["Affichage de ",T.length," sur ",N.length," employ\xe9(s)"]})]})},iT=t=>{let{onClose:r}=t;const[n,a]=(0,e.useState)(""),[i,l]=(0,e.useState)("ALL"),[o,c]=(0,e.useState)("ALL"),[d,u]=(0,e.useState)(!1),[m,h]=(0,e.useState)(null),[p,x]=(0,e.useState)(!1),{register:f,handleSubmit:g,reset:v,formState:{errors:y}}=ri(),[b]=(0,e.useState)([{id:"ADV001",employeeId:"EMP002",employeeCode:"EMP-2024-002",employeeName:"Marie Dupont",position:"Agent de Cr\xe9dit",branch:"Port-au-Prince Centre",baseSalary:28e3,requestDate:"2024-10-05",requestedAmount:1e4,approvedAmount:1e4,reason:"Frais m\xe9dicaux urgents",status:"DEDUCTED",approvedBy:"Jean Baptiste",approvedAt:"2024-10-06",paymentDate:"2024-10-07",deductionMonths:2,monthlyDeduction:5e3,remainingBalance:0,deductions:[{id:"DED001",month:"Octobre",year:2024,amount:5e3,deductedAt:"2024-10-31"},{id:"DED002",month:"Septembre",year:2024,amount:5e3,deductedAt:"2024-09-30"}]},{id:"ADV002",employeeId:"EMP003",employeeCode:"EMP-2024-003",employeeName:"Pierre Louis",position:"Caissier",branch:"Cap-Ha\xeftien",baseSalary:22e3,requestDate:"2024-10-10",requestedAmount:8e3,approvedAmount:8e3,reason:"Frais de scolarit\xe9",status:"PAID",approvedBy:"Jean Baptiste",approvedAt:"2024-10-11",paymentDate:"2024-10-12",deductionMonths:2,monthlyDeduction:4e3,remainingBalance:8e3,deductions:[]},{id:"ADV003",employeeId:"EMP006",employeeCode:"EMP-2024-006",employeeName:"Rose Marie Pierre",position:"Agent de Cr\xe9dit",branch:"Gona\xefves",baseSalary:26e3,requestDate:"2024-10-12",requestedAmount:12e3,approvedAmount:1e4,reason:"R\xe9paration v\xe9hicule",status:"APPROVED",approvedBy:"Claudette Fran\xe7ois",approvedAt:"2024-10-13",deductionMonths:3,monthlyDeduction:3334,remainingBalance:1e4,deductions:[]},{id:"ADV004",employeeId:"EMP005",employeeCode:"EMP-2024-005",employeeName:"Jacques Hyppolite",position:"Agent de S\xe9curit\xe9",branch:"Les Cayes",baseSalary:18e3,requestDate:"2024-10-14",requestedAmount:6e3,reason:"Urgence familiale",status:"PENDING",deductionMonths:2,monthlyDeduction:3e3,remainingBalance:6e3,deductions:[]},{id:"ADV005",employeeId:"EMP008",employeeCode:"EMP-2024-008",employeeName:"Anne Joseph",position:"Comptable",branch:"Port-au-Prince Centre",baseSalary:32e3,requestDate:"2024-10-15",requestedAmount:15e3,reason:"Achat \xe9quipement informatique",status:"PENDING",deductionMonths:3,monthlyDeduction:5e3,remainingBalance:15e3,deductions:[]},{id:"ADV006",employeeId:"EMP007",employeeCode:"EMP-2024-007",employeeName:"Paul L\xe9on",position:"Informaticien",branch:"Port-au-Prince Centre",baseSalary:4e4,requestDate:"2024-09-28",requestedAmount:1e4,approvedAmount:1e4,reason:"Frais m\xe9dicaux",status:"REJECTED",rejectionReason:"D\xe9passement du plafond autoris\xe9 (40% du salaire)",deductionMonths:2,monthlyDeduction:5e3,remainingBalance:1e4,deductions:[]}]),N={totalRequests:b.length,pendingRequests:b.filter(e=>"PENDING"===e.status).length,totalAdvanced:b.filter(e=>"REJECTED"!==e.status).reduce((e,t)=>e+(t.approvedAmount||0),0),totalOutstanding:b.filter(e=>"PAID"===e.status).reduce((e,t)=>e+t.remainingBalance,0)},j=e=>new Intl.NumberFormat("fr-HT").format(e)+" HTG",w=e=>new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),S=e=>{switch(e){case"PENDING":return"bg-yellow-100 text-yellow-800";case"APPROVED":return"bg-blue-100 text-blue-800";case"REJECTED":return"bg-red-100 text-red-800";case"PAID":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},A=e=>{switch(e){case"PENDING":return"En attente";case"APPROVED":return"Approuv\xe9";case"REJECTED":return"Rejet\xe9";case"PAID":return"Pay\xe9";case"DEDUCTED":return"D\xe9duit";default:return e}},T=b.filter(e=>{const t=e.employeeName.toLowerCase().includes(n.toLowerCase())||e.employeeCode.toLowerCase().includes(n.toLowerCase()),r="ALL"===i||e.status===i,s="ALL"===o||e.branch===o;return t&&r&&s});return(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Avances sur Salaire"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"G\xe9rez les demandes et d\xe9ductions d'avances"})]}),(0,ju.jsxs)("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[(0,ju.jsx)(Au,{className:"w-5 h-5"}),"Nouvelle Demande"]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Demandes"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:N.totalRequests}),(0,ju.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"Ce mois"})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(Hu,{className:"h-6 w-6 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"En Attente"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-yellow-900 mt-1",children:N.pendingRequests}),(0,ju.jsx)("p",{className:"text-sm text-yellow-600 mt-1",children:"\xc0 traiter"})]}),(0,ju.jsx)("div",{className:"p-3 bg-yellow-100 rounded-full",children:(0,ju.jsx)(Cu,{className:"h-6 w-6 text-yellow-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Avanc\xe9"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[j(N.totalAdvanced/1e3),"K"]}),(0,ju.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Approuv\xe9"})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(Du,{className:"h-6 w-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Solde Restant"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[j(N.totalOutstanding/1e3),"K"]}),(0,ju.jsx)("p",{className:"text-sm text-orange-600 mt-1",children:"\xc0 d\xe9duire"})]}),(0,ju.jsx)("div",{className:"p-3 bg-orange-100 rounded-full",children:(0,ju.jsx)(rS,{className:"h-6 w-6 text-orange-600"})})]})})]}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,ju.jsx)("input",{type:"text",placeholder:"Rechercher un employ\xe9...",value:n,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,ju.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"ALL",children:"Toutes les succursales"}),[{id:"BR001",name:"Port-au-Prince Centre"},{id:"BR002",name:"Cap-Ha\xeftien"},{id:"BR003",name:"Les Cayes"},{id:"BR004",name:"Gona\xefves"}].map(e=>(0,ju.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,ju.jsxs)("select",{value:i,onChange:e=>l(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"ALL",children:"Tous les statuts"}),(0,ju.jsx)("option",{value:"PENDING",children:"En attente"}),(0,ju.jsx)("option",{value:"APPROVED",children:"Approuv\xe9s"}),(0,ju.jsx)("option",{value:"REJECTED",children:"Rejet\xe9s"}),(0,ju.jsx)("option",{value:"PAID",children:"Pay\xe9s"}),(0,ju.jsx)("option",{value:"DEDUCTED",children:"D\xe9duits"})]})]})}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employ\xe9"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Demande"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant Demand\xe9"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant Approuv\xe9"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"D\xe9duction"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Solde Restant"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.employeeName}),(0,ju.jsx)("div",{className:"text-sm text-gray-500",children:e.employeeCode}),(0,ju.jsx)("div",{className:"text-xs text-gray-400",children:e.position})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:w(e.requestDate)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:j(e.requestedAmount)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.approvedAmount?(0,ju.jsx)("div",{className:"text-sm font-medium text-green-600",children:j(e.approvedAmount)}):(0,ju.jsx)("div",{className:"text-sm text-gray-400",children:"-"})}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:[(0,ju.jsxs)("div",{className:"text-sm text-gray-900",children:[e.deductionMonths," mois"]}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:[j(e.monthlyDeduction),"/mois"]})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.remainingBalance>0?(0,ju.jsx)("div",{className:"text-sm font-medium text-orange-600",children:j(e.remainingBalance)}):(0,ju.jsx)("div",{className:"text-sm text-gray-400",children:"-"})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(S(e.status)),children:A(e.status)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,ju.jsxs)("div",{className:"flex items-center justify-end gap-2",children:["PENDING"===e.status&&(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)("button",{onClick:()=>(e=>{window.confirm("Approuver l'avance de ".concat(j(e.requestedAmount)," pour ").concat(e.employeeName,"?"))&&rs.success("Avance approuv\xe9e avec succ\xe8s")})(e),className:"text-green-600 hover:text-green-900",title:"Approuver",children:(0,ju.jsx)(Tm,{className:"w-5 h-5"})}),(0,ju.jsx)("button",{onClick:()=>{window.prompt("Raison du rejet:")&&rs.success("Avance rejet\xe9e")},className:"text-red-600 hover:text-red-900",title:"Rejeter",children:(0,ju.jsx)(vm,{className:"w-5 h-5"})})]}),"APPROVED"===e.status&&(0,ju.jsx)("button",{onClick:()=>(e=>{window.confirm("Traiter le paiement de ".concat(j(e.approvedAmount||0)," pour ").concat(e.employeeName,"?"))&&rs.success("Paiement trait\xe9 avec succ\xe8s")})(e),className:"text-indigo-600 hover:text-indigo-900",title:"Traiter paiement",children:(0,ju.jsx)(Du,{className:"w-5 h-5"})}),(0,ju.jsx)("button",{onClick:()=>(e=>{h(e),x(!0)})(e),className:"text-blue-600 hover:text-blue-900",title:"Voir d\xe9tails",children:(0,ju.jsx)(fi,{className:"w-5 h-5"})})]})})]},e.id))})]})}),0===T.length&&(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)(Hu,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,ju.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucune avance trouv\xe9e"}),(0,ju.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Essayez de modifier vos filtres ou cr\xe9ez une nouvelle demande."})]})]}),d&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Nouvelle Demande d'Avance"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"Remplissez les informations ci-dessous"})]}),(0,ju.jsxs)("form",{onSubmit:g(e=>{console.log("New advance request:",e),rs.success("Demande d'avance soumise avec succ\xe8s"),u(!1),v()}),className:"p-6 space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employ\xe9 *"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},f("employeeId",{required:"Employ\xe9 requis"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner un employ\xe9"}),[{id:"EMP001",code:"EMP-2024-001",name:"Jean Baptiste",baseSalary:45e3},{id:"EMP002",code:"EMP-2024-002",name:"Marie Dupont",baseSalary:28e3},{id:"EMP003",code:"EMP-2024-003",name:"Pierre Louis",baseSalary:22e3},{id:"EMP004",code:"EMP-2024-004",name:"Claudette Fran\xe7ois",baseSalary:35e3},{id:"EMP005",code:"EMP-2024-005",name:"Jacques Hyppolite",baseSalary:18e3},{id:"EMP006",code:"EMP-2024-006",name:"Rose Marie Pierre",baseSalary:26e3},{id:"EMP007",code:"EMP-2024-007",name:"Paul L\xe9on",baseSalary:4e4},{id:"EMP008",code:"EMP-2024-008",name:"Anne Joseph",baseSalary:32e3}].map(e=>(0,ju.jsxs)("option",{value:e.id,children:[e.code," - ",e.name," (Salaire: ",j(e.baseSalary),")"]},e.id))]})),y.employeeId&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.employeeId.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant Demand\xe9 (HTG) *"}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Du,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"number"},f("requestedAmount",{required:"Montant requis",min:{value:1e3,message:"Montant minimum: 1000 HTG"},max:{value:5e4,message:"Montant maximum: 50000 HTG"}})),{},{className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Ex: 10000"}))]}),y.requestedAmount&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.requestedAmount.message}),(0,ju.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Maximum: 40% du salaire mensuel de base"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de mois pour d\xe9duction *"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},f("deductionMonths",{required:"Nombre de mois requis"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner"}),(0,ju.jsx)("option",{value:"1",children:"1 mois"}),(0,ju.jsx)("option",{value:"2",children:"2 mois"}),(0,ju.jsx)("option",{value:"3",children:"3 mois"}),(0,ju.jsx)("option",{value:"4",children:"4 mois"}),(0,ju.jsx)("option",{value:"5",children:"5 mois"}),(0,ju.jsx)("option",{value:"6",children:"6 mois"})]})),y.deductionMonths&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.deductionMonths.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Raison de la demande *"}),(0,ju.jsx)("textarea",(0,s.A)((0,s.A)({},f("reason",{required:"Raison requise",minLength:{value:10,message:"Minimum 10 caract\xe8res"}})),{},{rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Expliquez la raison de votre demande d'avance..."})),y.reason&&(0,ju.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.reason.message})]}),(0,ju.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[(0,ju.jsx)(Su,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,ju.jsx)("p",{className:"font-medium",children:"Important:"}),(0,ju.jsxs)("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[(0,ju.jsx)("li",{children:"Le montant sera d\xe9duit automatiquement de votre salaire"}),(0,ju.jsx)("li",{children:"L'avance ne peut pas d\xe9passer 40% de votre salaire de base"}),(0,ju.jsx)("li",{children:"La demande doit \xeatre approuv\xe9e par votre sup\xe9rieur"})]})]})]}),(0,ju.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,ju.jsx)("button",{type:"button",onClick:()=>{u(!1),v()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),(0,ju.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Soumettre la Demande"})]})]})]})}),p&&m&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"D\xe9tails de l'Avance"}),(0,ju.jsxs)("p",{className:"text-gray-600 mt-1",children:["ID: ",m.id]})]}),(0,ju.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ju.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Informations Employ\xe9"}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Nom"}),(0,ju.jsx)("p",{className:"font-medium",children:m.employeeName})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Code"}),(0,ju.jsx)("p",{className:"font-medium",children:m.employeeCode})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Poste"}),(0,ju.jsx)("p",{className:"font-medium",children:m.position})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Succursale"}),(0,ju.jsx)("p",{className:"font-medium",children:m.branch})]})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Date de demande"}),(0,ju.jsx)("p",{className:"font-medium",children:w(m.requestDate)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Statut"}),(0,ju.jsx)("span",{className:"px-2 py-1 inline-flex text-xs font-semibold rounded-full ".concat(S(m.status)),children:A(m.status)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Montant demand\xe9"}),(0,ju.jsx)("p",{className:"font-medium",children:j(m.requestedAmount)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Montant approuv\xe9"}),(0,ju.jsx)("p",{className:"font-medium",children:m.approvedAmount?j(m.approvedAmount):"-"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"D\xe9duction mensuelle"}),(0,ju.jsx)("p",{className:"font-medium",children:j(m.monthlyDeduction)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Solde restant"}),(0,ju.jsx)("p",{className:"font-medium text-orange-600",children:j(m.remainingBalance)})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Raison"}),(0,ju.jsx)("p",{className:"bg-gray-50 rounded-lg p-3",children:m.reason})]}),("APPROVED"===m.status||"PAID"===m.status||"DEDUCTED"===m.status)&&m.approvedBy&&(0,ju.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,ju.jsxs)("p",{className:"font-medium text-green-900",children:["Approuv\xe9 par ",m.approvedBy]}),(0,ju.jsxs)("p",{className:"text-sm text-green-700",children:["Le ",w(m.approvedAt)]})]}),"REJECTED"===m.status&&m.rejectionReason&&(0,ju.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,ju.jsx)("p",{className:"font-medium text-red-900",children:"Rejet\xe9"}),(0,ju.jsx)("p",{className:"text-sm text-red-700",children:m.rejectionReason})]}),m.deductions.length>0&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Historique des D\xe9ductions"}),(0,ju.jsx)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"P\xe9riode"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Montant"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Date"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.deductions.map(e=>(0,ju.jsxs)("tr",{children:[(0,ju.jsxs)("td",{className:"px-4 py-2 text-sm",children:[e.month," ",e.year]}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-right font-medium",children:j(e.amount)}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm",children:w(e.deductedAt)})]},e.id))})]})})]})]}),(0,ju.jsx)("div",{className:"p-6 border-t border-gray-200 flex justify-end",children:(0,ju.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Fermer"})})]})}),(0,ju.jsxs)("div",{className:"text-sm text-gray-600 text-center",children:["Affichage de ",T.length," sur ",b.length," avance(s)"]})]})},lT=t=>{let{onClose:r}=t;const[n,s]=(0,e.useState)("overview"),[a,i]=(0,e.useState)("2024-10"),[l,o]=(0,e.useState)("2024"),c=8,d=248e3,u=37200,m=210800,h=21390,p=2500,x=2250,f=11060,g=e=>new Intl.NumberFormat("fr-HT").format(e)+" HTG",v=e=>{switch(e){case"DRAFT":return"bg-yellow-100 text-yellow-800";case"SUBMITTED":return"bg-blue-100 text-blue-800";case"PAID":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},y=e=>{switch(e){case"DRAFT":return"Brouillon";case"SUBMITTED":return"Soumis";case"PAID":return"Pay\xe9";default:return e}},b=e=>{rs.success("Export ".concat(e," en cours..."))};return(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Rapports de Paie"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"Historique et d\xe9clarations fiscales"})]}),(0,ju.jsxs)("div",{className:"flex gap-3",children:[(0,ju.jsxs)("button",{onClick:()=>b("PDF"),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)(zu,{className:"w-5 h-5"}),"PDF"]}),(0,ju.jsxs)("button",{onClick:()=>b("EXCEL"),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)(zu,{className:"w-5 h-5"}),"Excel"]}),(0,ju.jsxs)("button",{onClick:()=>{rs.success("Impression en cours...")},className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)(Fp,{className:"w-5 h-5"}),"Imprimer"]})]})]}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsx)("div",{className:"border-b border-gray-200",children:(0,ju.jsxs)("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[(0,ju.jsxs)("button",{onClick:()=>s("overview"),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ".concat("overview"===n?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," transition-colors"),children:[(0,ju.jsx)(Yu,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Vue d'ensemble"})]}),(0,ju.jsxs)("button",{onClick:()=>s("branch"),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ".concat("branch"===n?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," transition-colors"),children:[(0,ju.jsx)(Ku,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Par Succursale"})]}),(0,ju.jsxs)("button",{onClick:()=>s("department"),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ".concat("department"===n?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," transition-colors"),children:[(0,ju.jsx)(Gw,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Par D\xe9partement"})]}),(0,ju.jsxs)("button",{onClick:()=>s("history"),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ".concat("history"===n?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," transition-colors"),children:[(0,ju.jsx)(pm,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Historique"})]}),(0,ju.jsxs)("button",{onClick:()=>s("tax"),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ".concat("tax"===n?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," transition-colors"),children:[(0,ju.jsx)(Hu,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"D\xe9clarations Fiscales"})]})]})})}),"overview"===n&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsx)(pm,{className:"w-5 h-5 text-gray-400"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"P\xe9riode:"}),(0,ju.jsxs)("select",{value:a,onChange:e=>i(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"2024-10",children:"Octobre 2024"}),(0,ju.jsx)("option",{value:"2024-09",children:"Septembre 2024"}),(0,ju.jsx)("option",{value:"2024-08",children:"Ao\xfbt 2024"}),(0,ju.jsx)("option",{value:"2024-07",children:"Juillet 2024"})]})]})}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Employ\xe9s"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:c}),(0,ju.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"Pay\xe9s"})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(Ru,{className:"h-6 w-6 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Salaire Brut"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[g(d/1e3),"K"]}),(0,ju.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Total p\xe9riode"})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(ku,{className:"h-6 w-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"D\xe9ductions"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[g(u/1e3),"K"]}),(0,ju.jsx)("p",{className:"text-sm text-orange-600 mt-1",children:"Total retenues"})]}),(0,ju.jsx)("div",{className:"p-3 bg-orange-100 rounded-full",children:(0,ju.jsx)(Du,{className:"h-6 w-6 text-orange-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Salaire Net"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-indigo-900 mt-1",children:[g(m/1e3),"K"]}),(0,ju.jsx)("p",{className:"text-sm text-indigo-600 mt-1",children:"D\xe9caiss\xe9"})]}),(0,ju.jsx)("div",{className:"p-3 bg-indigo-100 rounded-full",children:(0,ju.jsx)(Du,{className:"h-6 w-6 text-indigo-600"})})]})})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"R\xe9partition des D\xe9ductions"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,ju.jsxs)("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[(0,ju.jsx)("div",{className:"text-2xl font-bold text-red-600",children:g(h)}),(0,ju.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Imp\xf4ts"}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[(h/u*100).toFixed(1),"% du total"]})]}),(0,ju.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,ju.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:g(p)}),(0,ju.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Assurances"}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[(p/u*100).toFixed(1),"% du total"]})]}),(0,ju.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,ju.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:g(x)}),(0,ju.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Retraite"}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[(x/u*100).toFixed(1),"% du total"]})]}),(0,ju.jsxs)("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[(0,ju.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:g(f)}),(0,ju.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Avances"}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[(f/u*100).toFixed(1),"% du total"]})]})]})]})]}),"branch"===n&&(0,ju.jsx)("div",{className:"space-y-6",children:(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Succursale"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employ\xe9s"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salaire Brut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"D\xe9ductions"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salaire Net"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% du Total"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:[{branchId:"BR001",branchName:"Port-au-Prince Centre",employees:5,grossSalary:185800,deductions:27920,netSalary:157880},{branchId:"BR002",branchName:"Cap-Ha\xeftien",employees:1,grossSalary:24850,deductions:1540,netSalary:23310},{branchId:"BR003",branchName:"Les Cayes",employees:1,grossSalary:20800,deductions:1080,netSalary:19720},{branchId:"BR004",branchName:"Gona\xefves",employees:1,grossSalary:29475,deductions:2080,netSalary:27395}].map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)(Ku,{className:"w-5 h-5 text-gray-400 mr-3"}),(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.branchName})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:e.employees})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:g(e.grossSalary)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm font-medium text-red-600",children:g(e.deductions)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm font-bold text-indigo-600",children:g(e.netSalary)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:[(e.netSalary/m*100).toFixed(1),"%"]})})]},e.branchId))}),(0,ju.jsx)("tfoot",{className:"bg-gray-50 border-t-2 border-gray-300",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("td",{className:"px-6 py-4 font-bold text-gray-900",children:"TOTAL"}),(0,ju.jsx)("td",{className:"px-6 py-4 text-right font-bold text-gray-900",children:c}),(0,ju.jsx)("td",{className:"px-6 py-4 text-right font-bold text-gray-900",children:g(d)}),(0,ju.jsx)("td",{className:"px-6 py-4 text-right font-bold text-red-600",children:g(u)}),(0,ju.jsx)("td",{className:"px-6 py-4 text-right font-bold text-indigo-900 text-lg",children:g(m)}),(0,ju.jsx)("td",{className:"px-6 py-4 text-right font-bold text-gray-900",children:"100%"})]})})]})})})}),"department"===n&&(0,ju.jsx)("div",{className:"space-y-6",children:(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"D\xe9partement"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employ\xe9s"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salaire Moyen"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Masse Salariale"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% du Total"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:[{department:"Direction",employees:1,avgSalary:52e3,totalPayroll:52e3},{department:"Cr\xe9dit",employees:2,avgSalary:31688,totalPayroll:63375},{department:"Op\xe9rations",employees:1,avgSalary:24850,totalPayroll:24850},{department:"Ressources Humaines",employees:1,avgSalary:36800,totalPayroll:36800},{department:"S\xe9curit\xe9",employees:1,avgSalary:20800,totalPayroll:20800},{department:"Informatique",employees:1,avgSalary:44500,totalPayroll:44500},{department:"Comptabilit\xe9",employees:1,avgSalary:34400,totalPayroll:34400}].map((e,t)=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.department})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:e.employees})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:g(e.avgSalary)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm font-bold text-indigo-600",children:g(e.totalPayroll)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:[(e.totalPayroll/d*100).toFixed(1),"%"]})})]},t))}),(0,ju.jsx)("tfoot",{className:"bg-gray-50 border-t-2 border-gray-300",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("td",{className:"px-6 py-4 font-bold text-gray-900",children:"TOTAL"}),(0,ju.jsx)("td",{className:"px-6 py-4 text-right font-bold text-gray-900",children:c}),(0,ju.jsx)("td",{className:"px-6 py-4 text-right font-bold text-gray-900",children:g(d/c)}),(0,ju.jsx)("td",{className:"px-6 py-4 text-right font-bold text-indigo-900 text-lg",children:g(d)}),(0,ju.jsx)("td",{className:"px-6 py-4 text-right font-bold text-gray-900",children:"100%"})]})})]})})})}),"history"===n&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsx)(hm,{className:"w-5 h-5 text-gray-400"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Ann\xe9e:"}),(0,ju.jsxs)("select",{value:l,onChange:e=>o(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"2024",children:"2024"}),(0,ju.jsx)("option",{value:"2023",children:"2023"})]})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"P\xe9riode"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employ\xe9s"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salaire Brut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"D\xe9ductions"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salaire Net"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:[{month:10,year:2024,totalEmployees:8,totalGross:248e3,totalDeductions:37200,totalNet:210800,totalTax:21390,totalInsurance:2500,totalPension:2250,totalAdvances:11060},{month:9,year:2024,totalEmployees:8,totalGross:245e3,totalDeductions:36750,totalNet:208250,totalTax:21150,totalInsurance:2500,totalPension:2250,totalAdvances:10850},{month:8,year:2024,totalEmployees:7,totalGross:208e3,totalDeductions:31200,totalNet:176800,totalTax:18200,totalInsurance:2e3,totalPension:2e3,totalAdvances:9e3},{month:7,year:2024,totalEmployees:7,totalGross:21e4,totalDeductions:31500,totalNet:178500,totalTax:18400,totalInsurance:2e3,totalPension:2e3,totalAdvances:9100},{month:6,year:2024,totalEmployees:6,totalGross:185e3,totalDeductions:27750,totalNet:157250,totalTax:16200,totalInsurance:1500,totalPension:1500,totalAdvances:8550},{month:5,year:2024,totalEmployees:6,totalGross:182e3,totalDeductions:27300,totalNet:154700,totalTax:15900,totalInsurance:1500,totalPension:1500,totalAdvances:8400}].map((e,t)=>{return(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[(r=e.month,["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"][r-1])," ",e.year]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:e.totalEmployees})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:g(e.totalGross)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm font-medium text-red-600",children:g(e.totalDeductions)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm font-bold text-indigo-600",children:g(e.totalNet)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,ju.jsx)("button",{onClick:()=>rs.success("Affichage des d\xe9tails..."),className:"text-blue-600 hover:text-blue-900",title:"Voir d\xe9tails",children:(0,ju.jsx)(fi,{className:"w-5 h-5"})})})]},t);var r})})]})})})]}),"tax"===n&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[(0,ju.jsx)(Hu,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,ju.jsx)("p",{className:"font-medium",children:"D\xe9clarations Fiscales"}),(0,ju.jsx)("p",{className:"mt-1",children:"Les d\xe9clarations doivent \xeatre soumises avant le 15 de chaque mois pour la p\xe9riode pr\xe9c\xe9dente."})]})]}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"P\xe9riode"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employ\xe9s"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant Imp\xf4t"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Soumission"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:[{id:"TAX-2024-10",period:"Octobre 2024",totalTax:21390,employeeCount:8,status:"DRAFT"},{id:"TAX-2024-09",period:"Septembre 2024",totalTax:21150,employeeCount:8,status:"PAID",submittedAt:"2024-10-05",paidAt:"2024-10-10"},{id:"TAX-2024-08",period:"Ao\xfbt 2024",totalTax:18200,employeeCount:7,status:"PAID",submittedAt:"2024-09-05",paidAt:"2024-09-10"},{id:"TAX-2024-07",period:"Juillet 2024",totalTax:18400,employeeCount:7,status:"PAID",submittedAt:"2024-08-05",paidAt:"2024-08-10"}].map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.period}),(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:e.id})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:e.employeeCount})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("div",{className:"text-sm font-bold text-gray-900",children:g(e.totalTax)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(v(e.status)),children:y(e.status)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.submittedAt?(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.submittedAt).toLocaleDateString("fr-FR")}),e.paidAt&&(0,ju.jsxs)("div",{className:"text-xs text-green-600",children:["Pay\xe9 le ",new Date(e.paidAt).toLocaleDateString("fr-FR")]})]}):(0,ju.jsx)("div",{className:"text-sm text-gray-400",children:"-"})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,ju.jsxs)("div",{className:"flex items-center justify-end gap-2",children:["DRAFT"===e.status&&(0,ju.jsx)("button",{onClick:()=>(e=>{window.confirm("Soumettre la d\xe9claration fiscale pour ".concat(e.period,"?"))&&rs.success("D\xe9claration soumise avec succ\xe8s")})(e),className:"text-indigo-600 hover:text-indigo-900",title:"Soumettre",children:(0,ju.jsx)(Hu,{className:"w-5 h-5"})}),(0,ju.jsx)("button",{onClick:()=>rs.success("T\xe9l\xe9chargement du PDF..."),className:"text-blue-600 hover:text-blue-900",title:"T\xe9l\xe9charger PDF",children:(0,ju.jsx)(zu,{className:"w-5 h-5"})})]})})]},e.id))})]})})})]})]})},oT=()=>{const[t,r]=(0,e.useState)("dashboard"),n=8,s=8,a=210800,i=2,l=e=>new Intl.NumberFormat("fr-HT").format(e)+" HTG",o=()=>(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestion de la Paie"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"Tableau de bord et aper\xe7u g\xe9n\xe9ral"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Employ\xe9s"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:n}),(0,ju.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:[s," actifs"]})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(Ru,{className:"h-6 w-6 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Masse Salariale"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[l(a/1e3),"K"]}),(0,ju.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"Par mois"})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(Du,{className:"h-6 w-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avances en Attente"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-yellow-900 mt-1",children:i}),(0,ju.jsx)("p",{className:"text-sm text-yellow-600 mt-1",children:"\xc0 traiter"})]}),(0,ju.jsx)("div",{className:"p-3 bg-yellow-100 rounded-full",children:(0,ju.jsx)(Tu,{className:"h-6 w-6 text-yellow-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Derni\xe8re Paie"}),(0,ju.jsx)("p",{className:"text-lg font-bold text-gray-900 mt-1",children:"31 Oct"}),(0,ju.jsx)("p",{className:"text-sm text-purple-600 mt-1",children:"Trait\xe9e"})]}),(0,ju.jsx)("div",{className:"p-3 bg-purple-100 rounded-full",children:(0,ju.jsx)(pm,{className:"h-6 w-6 text-purple-600"})})]})})]}),(0,ju.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 border border-indigo-200 rounded-xl p-6",children:[(0,ju.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actions Rapides"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ju.jsx)("button",{onClick:()=>r("employees"),className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-all text-left group",children:(0,ju.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ju.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg group-hover:bg-blue-200 transition-colors",children:(0,ju.jsx)(Ru,{className:"w-6 h-6 text-blue-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"font-medium text-gray-900",children:"Employ\xe9s"}),(0,ju.jsx)("div",{className:"text-sm text-gray-600",children:"G\xe9rer les employ\xe9s"})]})]})}),(0,ju.jsx)("button",{onClick:()=>r("processing"),className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-all text-left group",children:(0,ju.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ju.jsx)("div",{className:"p-2 bg-green-100 rounded-lg group-hover:bg-green-200 transition-colors",children:(0,ju.jsx)(Du,{className:"w-6 h-6 text-green-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"font-medium text-gray-900",children:"Traiter Paie"}),(0,ju.jsx)("div",{className:"text-sm text-gray-600",children:"Calculer et payer"})]})]})}),(0,ju.jsx)("button",{onClick:()=>r("advances"),className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-all text-left group",children:(0,ju.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ju.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg group-hover:bg-yellow-200 transition-colors",children:(0,ju.jsx)(Tu,{className:"w-6 h-6 text-yellow-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"font-medium text-gray-900",children:"Avances"}),(0,ju.jsx)("div",{className:"text-sm text-gray-600",children:"G\xe9rer les avances"})]})]})}),(0,ju.jsx)("button",{onClick:()=>r("reports"),className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-all text-left group",children:(0,ju.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ju.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg group-hover:bg-purple-200 transition-colors",children:(0,ju.jsx)(Yu,{className:"w-6 h-6 text-purple-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"font-medium text-gray-900",children:"Rapports"}),(0,ju.jsx)("div",{className:"text-sm text-gray-600",children:"Consulter les rapports"})]})]})})]})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Activit\xe9 R\xe9cente"}),(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"flex items-start space-x-3 py-3 border-b border-gray-100",children:[(0,ju.jsx)("div",{className:"p-2 bg-green-100 rounded-full",children:(0,ju.jsx)(Du,{className:"h-4 w-4 text-green-600"})}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Paie d'octobre trait\xe9e"}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:["8 employ\xe9s pay\xe9s - ",l(210800)," - Il y a 1 jour"]})]})]}),(0,ju.jsxs)("div",{className:"flex items-start space-x-3 py-3 border-b border-gray-100",children:[(0,ju.jsx)("div",{className:"p-2 bg-yellow-100 rounded-full",children:(0,ju.jsx)(Tu,{className:"h-4 w-4 text-yellow-600"})}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"2 nouvelles demandes d'avance"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500",children:"Jacques Hyppolite et Anne Joseph - Il y a 2 jours"})]})]}),(0,ju.jsxs)("div",{className:"flex items-start space-x-3 py-3 border-b border-gray-100",children:[(0,ju.jsx)("div",{className:"p-2 bg-blue-100 rounded-full",children:(0,ju.jsx)(Ru,{className:"h-4 w-4 text-blue-600"})}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Nouvel employ\xe9 ajout\xe9"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500",children:"Rose Marie Pierre - Agent de Cr\xe9dit - Il y a 3 jours"})]})]}),(0,ju.jsxs)("div",{className:"flex items-start space-x-3 py-3",children:[(0,ju.jsx)("div",{className:"p-2 bg-purple-100 rounded-full",children:(0,ju.jsx)(Hu,{className:"h-4 w-4 text-purple-600"})}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"D\xe9claration fiscale soumise"}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:["Septembre 2024 - ",l(21150)," - Il y a 5 jours"]})]})]})]})]}),(0,ju.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[(0,ju.jsx)(ku,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,ju.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,ju.jsx)("p",{className:"font-medium",children:"Prochaine Paie: 30 Novembre 2024"}),(0,ju.jsx)("p",{className:"mt-1",children:"Assurez-vous que toutes les informations des employ\xe9s sont \xe0 jour avant le traitement."})]})]})]});return(0,ju.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[("employees"===t||"processing"===t||"advances"===t||"reports"===t)&&(0,ju.jsx)("div",{className:"bg-white border-b border-gray-200 mb-6",children:(0,ju.jsx)("div",{className:"px-6",children:(0,ju.jsxs)("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[(0,ju.jsxs)("button",{onClick:()=>r("dashboard"),className:"flex items-center space-x-2 py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium text-sm transition-colors",children:[(0,ju.jsx)(Yu,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Tableau de bord"})]}),(0,ju.jsxs)("button",{onClick:()=>r("employees"),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ".concat("employees"===t?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," transition-colors"),children:[(0,ju.jsx)(Ru,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Employ\xe9s"})]}),(0,ju.jsxs)("button",{onClick:()=>r("processing"),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ".concat("processing"===t?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," transition-colors"),children:[(0,ju.jsx)(Du,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Traitement de Paie"})]}),(0,ju.jsxs)("button",{onClick:()=>r("advances"),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ".concat("advances"===t?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," transition-colors"),children:[(0,ju.jsx)(Tu,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Avances sur Salaire"})]}),(0,ju.jsxs)("button",{onClick:()=>r("reports"),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ".concat("reports"===t?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," transition-colors"),children:[(0,ju.jsx)(Hu,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Rapports"})]})]})})}),(0,ju.jsx)("div",{className:"px-6 py-6",children:"employees"===t?(0,ju.jsx)(rT,{}):"processing"===t?(0,ju.jsx)(aT,{}):"advances"===t?(0,ju.jsx)(iT,{}):"reports"===t?(0,ju.jsx)(lT,{}):o()})]})};let cT=function(e){return e[e.HTG=0]="HTG",e[e.USD=1]="USD",e[e.EUR=2]="EUR",e[e.CAD=3]="CAD",e[e.DOP=4]="DOP",e[e.JMD=5]="JMD",e}({}),dT=function(e){return e[e.Manual=0]="Manual",e[e.Automatic=1]="Automatic",e[e.External=2]="External",e}({});const uT=e=>({[cT.HTG]:"Gourde Ha\xeftienne (HTG)",[cT.USD]:"Dollar Am\xe9ricain (USD)",[cT.EUR]:"Euro (EUR)",[cT.CAD]:"Dollar Canadien (CAD)",[cT.DOP]:"Peso Dominicain (DOP)",[cT.JMD]:"Dollar Jama\xefcain (JMD)"}[e]||"Inconnu"),mT=e=>({[cT.HTG]:"HTG",[cT.USD]:"$",[cT.EUR]:"\u20ac",[cT.CAD]:"CAD$",[cT.DOP]:"RD$",[cT.JMD]:"J$"}[e]||""),hT=e=>({[dT.Manual]:"Manuel",[dT.Automatic]:"Automatique",[dT.External]:"Externe"}[e]||"Inconnu"),pT=Vd({baseCurrency:uu(e=>"string"===typeof e||"number"===typeof e?Number(e):e,Yd(cT)),targetCurrency:uu(e=>"string"===typeof e||"number"===typeof e?Number(e):e,Yd(cT)),buyingRate:hu().min(0,"Taux invalide"),sellingRate:hu().min(0,"Taux invalide"),effectiveDate:ud().min(1,"Date d'effet requise"),expiryDate:ud().optional().nullable(),updateMethod:uu(e=>"string"===typeof e||"number"===typeof e?Number(e):e,Yd(dT)),notes:ud().optional().default(""),isActive:Ld().optional()}),xT=t=>{var r,n,a,i;let{rate:l,onSubmit:o,onCancel:c}=t;const[d,u]=(0,e.useState)(!1),m=!!l,{register:h,handleSubmit:p,formState:{errors:x},watch:f}=ri({resolver:oi(pT),defaultValues:{baseCurrency:null!==(r=null===l||void 0===l?void 0:l.baseCurrency)&&void 0!==r?r:cT.HTG,targetCurrency:null!==(n=null===l||void 0===l?void 0:l.targetCurrency)&&void 0!==n?n:cT.USD,buyingRate:(null===l||void 0===l?void 0:l.buyingRate)||0,sellingRate:(null===l||void 0===l?void 0:l.sellingRate)||0,effectiveDate:null!==l&&void 0!==l&&l.effectiveDate?new Date(l.effectiveDate).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],expiryDate:null!==l&&void 0!==l&&l.expiryDate?new Date(l.expiryDate).toISOString().split("T")[0]:"",updateMethod:null!==(a=null===l||void 0===l?void 0:l.updateMethod)&&void 0!==a?a:dT.Manual,notes:(null===l||void 0===l?void 0:l.notes)||"",isActive:null===(i=null===l||void 0===l?void 0:l.isActive)||void 0===i||i}}),g=f("buyingRate"),v=f("sellingRate"),y=g&&v?(v-g)/g*100:0;return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,ju.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto",children:(0,ju.jsxs)("form",{onSubmit:p(async e=>{u(!0);try{if(m){var t,r;const n=(0,s.A)((0,s.A)((0,s.A)({id:l.id,baseCurrency:e.baseCurrency,targetCurrency:e.targetCurrency,buyingRate:e.buyingRate,sellingRate:e.sellingRate,effectiveDate:new Date(e.effectiveDate).toISOString()},e.expiryDate?{expiryDate:new Date(e.expiryDate).toISOString()}:{}),{},{updateMethod:e.updateMethod},e.notes?{notes:e.notes}:{}),{},{isActive:null!==(t=e.isActive)&&void 0!==t?t:null===(r=null===l||void 0===l?void 0:l.isActive)||void 0===r||r});o(n)}else{const t=(0,s.A)((0,s.A)({baseCurrency:e.baseCurrency,targetCurrency:e.targetCurrency,buyingRate:e.buyingRate,sellingRate:e.sellingRate,effectiveDate:new Date(e.effectiveDate).toISOString()},e.expiryDate?{expiryDate:new Date(e.expiryDate).toISOString()}:{}),{},{updateMethod:e.updateMethod},e.notes?{notes:e.notes}:{});o(t)}}finally{u(!1)}}),children:[(0,ju.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,ju.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:m?"Modifier le taux":"Nouveau taux de change"}),(0,ju.jsx)("button",{type:"button",onClick:c,className:"text-gray-400 hover:text-gray-600",children:(0,ju.jsx)(vm,{className:"w-6 h-6"})})]}),(0,ju.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Paire de devises"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Devise de base *"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},h("baseCurrency")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",children:[(0,ju.jsx)("option",{value:cT.HTG,children:uT(cT.HTG)}),(0,ju.jsx)("option",{value:cT.USD,children:uT(cT.USD)}),(0,ju.jsx)("option",{value:cT.EUR,children:uT(cT.EUR)}),(0,ju.jsx)("option",{value:cT.CAD,children:uT(cT.CAD)}),(0,ju.jsx)("option",{value:cT.DOP,children:uT(cT.DOP)}),(0,ju.jsx)("option",{value:cT.JMD,children:uT(cT.JMD)})]})),x.baseCurrency&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.baseCurrency.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Devise cible *"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},h("targetCurrency")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",children:[(0,ju.jsx)("option",{value:cT.HTG,children:uT(cT.HTG)}),(0,ju.jsx)("option",{value:cT.USD,children:uT(cT.USD)}),(0,ju.jsx)("option",{value:cT.EUR,children:uT(cT.EUR)}),(0,ju.jsx)("option",{value:cT.CAD,children:uT(cT.CAD)}),(0,ju.jsx)("option",{value:cT.DOP,children:uT(cT.DOP)}),(0,ju.jsx)("option",{value:cT.JMD,children:uT(cT.JMD)})]})),x.targetCurrency&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.targetCurrency.message})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Taux de change"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[(0,ju.jsx)(Du,{className:"w-4 h-4 mr-1"}),"Taux d'achat *"]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"number",step:"0.000001"},h("buyingRate")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"130.000000"})),x.buyingRate&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.buyingRate.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[(0,ju.jsx)(Du,{className:"w-4 h-4 mr-1"}),"Taux de vente *"]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"number",step:"0.000001"},h("sellingRate")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"132.000000"})),x.sellingRate&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.sellingRate.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Spread"}),(0,ju.jsxs)("div",{className:"px-3 py-2 border border-gray-200 rounded-md bg-gray-50 text-gray-700",children:[y.toFixed(4),"%"]})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"P\xe9riode de validit\xe9"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[(0,ju.jsx)(pm,{className:"w-4 h-4 mr-1"}),"Date d'effet *"]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"date"},h("effectiveDate")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})),x.effectiveDate&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.effectiveDate.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[(0,ju.jsx)(pm,{className:"w-4 h-4 mr-1"}),"Date d'expiration (optionnel)"]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"date"},h("expiryDate")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})),x.expiryDate&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.expiryDate.message})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Configuration"}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe9thode de mise \xe0 jour *"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},h("updateMethod")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",children:[(0,ju.jsx)("option",{value:dT.Manual,children:"Manuel"}),(0,ju.jsx)("option",{value:dT.Automatic,children:"Automatique"}),(0,ju.jsx)("option",{value:dT.External,children:"Externe"})]})),x.updateMethod&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.updateMethod.message})]}),m&&(0,ju.jsx)("div",{children:(0,ju.jsxs)("label",{className:"flex items-center",children:[(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"checkbox"},h("isActive")),{},{className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"})),(0,ju.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Taux actif"})]})})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (optionnel)"}),(0,ju.jsx)("textarea",(0,s.A)((0,s.A)({},h("notes")),{},{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"Commentaires sur ce taux de change..."}))]})]}),(0,ju.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:[(0,ju.jsx)("button",{type:"button",onClick:c,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Annuler"}),(0,ju.jsxs)("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 flex items-center",children:[d&&(0,ju.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),(0,ju.jsx)(lp,{className:"w-4 h-4 mr-2"}),m?"Modifier":"Cr\xe9er"]})]})]})})})},fT=t=>{let{branchId:r}=t;const[n,s]=(0,e.useState)([]),[a,i]=(0,e.useState)(!0),[l,o]=(0,e.useState)(""),[c,d]=(0,e.useState)(""),[u,m]=(0,e.useState)(""),[h,p]=(0,e.useState)(""),[x,f]=(0,e.useState)(!1),[g,v]=(0,e.useState)(null),[y,b]=(0,e.useState)(null);(0,e.useEffect)(()=>{N()},[c,u,h]);const N=async()=>{try{i(!0);const e=e=>{if(""!==e)return e===cT.HTG?1:e===cT.USD?2:e},t={baseCurrency:e(c),targetCurrency:e(u),isActive:""!==h?"true"===h:void 0},r=await Di.getExchangeRates(t);s(r)}catch(Sc){console.error("Error loading exchange rates:",Sc),Ts.error("Erreur lors du chargement des taux")}finally{i(!1)}},j=e=>e?(0,ju.jsx)(Ju,{className:"w-4 h-4"}):(0,ju.jsx)(cm,{className:"w-4 h-4"}),w=e=>e.toLocaleString("en-US",{minimumFractionDigits:4,maximumFractionDigits:6});return(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,ju.jsx)(ku,{className:"w-8 h-8 mr-3 text-primary-600"}),"Gestion des Taux de Change"]}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"G\xe9rez les taux de change pour toutes les devises"})]}),(0,ju.jsxs)("div",{className:"flex space-x-3",children:[(0,ju.jsxs)("button",{onClick:async()=>{try{i(!0);const e=await Di.getExchangeRates({isActive:!0});s(e)}catch(Sc){console.error("Error loading current rates:",Sc),Ts.error("Erreur lors du chargement des taux actuels")}finally{i(!1)}},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[(0,ju.jsx)(Eu,{className:"w-5 h-5 mr-2"}),"Taux Actuels"]}),(0,ju.jsxs)("button",{onClick:()=>{v(null),f(!0)},className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 flex items-center",children:[(0,ju.jsx)(Au,{className:"w-5 h-5 mr-2"}),"Nouveau Taux"]})]})]}),(0,ju.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,ju.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",children:[(0,ju.jsx)("option",{value:"",children:"Devise de base"}),(0,ju.jsx)("option",{value:cT.HTG,children:"HTG - Gourde"}),(0,ju.jsx)("option",{value:cT.USD,children:"USD - Dollar US"}),(0,ju.jsx)("option",{value:cT.EUR,children:"EUR - Euro"}),(0,ju.jsx)("option",{value:cT.CAD,children:"CAD - Dollar CA"}),(0,ju.jsx)("option",{value:cT.DOP,children:"DOP - Peso DO"}),(0,ju.jsx)("option",{value:cT.JMD,children:"JMD - Dollar JM"})]}),(0,ju.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",children:[(0,ju.jsx)("option",{value:"",children:"Devise cible"}),(0,ju.jsx)("option",{value:cT.HTG,children:"HTG - Gourde"}),(0,ju.jsx)("option",{value:cT.USD,children:"USD - Dollar US"}),(0,ju.jsx)("option",{value:cT.EUR,children:"EUR - Euro"}),(0,ju.jsx)("option",{value:cT.CAD,children:"CAD - Dollar CA"}),(0,ju.jsx)("option",{value:cT.DOP,children:"DOP - Peso DO"}),(0,ju.jsx)("option",{value:cT.JMD,children:"JMD - Dollar JM"})]}),(0,ju.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",children:[(0,ju.jsx)("option",{value:"",children:"Tous les statuts"}),(0,ju.jsx)("option",{value:"true",children:"Actifs"}),(0,ju.jsx)("option",{value:"false",children:"Inactifs"})]}),(0,ju.jsxs)("button",{onClick:()=>{d(""),m(""),p("")},className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-center",children:[(0,ju.jsx)(hm,{className:"w-4 h-4 mr-2"}),"R\xe9initialiser"]}),(0,ju.jsx)("button",{onClick:N,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 flex items-center justify-center",children:(0,ju.jsx)(Eu,{className:"w-4 h-4"})})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-lg shadow",children:a?(0,ju.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,ju.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):0===n.length?(0,ju.jsx)("div",{className:"text-center p-8 text-gray-500",children:"Aucun taux de change trouv\xe9"}):(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paire de devises"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taux d'achat"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taux de vente"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spread"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"P\xe9riode de validit\xe9"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"M\xe9thode"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>{const t=(e.sellingRate-e.buyingRate)/e.buyingRate*100,r=(e=>{if(!e)return!1;const t=new Date(e),r=new Date,n=t.getTime()-r.getTime(),s=Math.ceil(n/864e5);return s<=7&&s>=0})(e.expiryDate),n=!!(s=e.expiryDate)&&new Date(s)<new Date;var s,a;return(0,ju.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(n?"bg-red-50":r?"bg-yellow-50":""),children:[(0,ju.jsx)("td",{className:"px-6 py-4",children:(0,ju.jsx)("div",{className:"flex items-center",children:(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[mT(e.baseCurrency)," \u2192 ",mT(e.targetCurrency)]}),(0,ju.jsxs)("div",{className:"text-sm text-gray-500",children:[uT(e.baseCurrency)," / ",uT(e.targetCurrency)]})]})})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[(0,ju.jsx)(rS,{className:"w-4 h-4 mr-1 text-red-500"}),w(e.buyingRate)]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[(0,ju.jsx)(ku,{className:"w-4 h-4 mr-1 text-green-500"}),w(e.sellingRate)]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"text-sm text-gray-900",children:[t.toFixed(2),"%"]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"text-sm text-gray-900 flex items-center",children:[(0,ju.jsx)(pm,{className:"w-4 h-4 mr-1"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{children:new Date(e.effectiveDate).toLocaleDateString()}),e.expiryDate&&(0,ju.jsxs)("div",{className:"text-xs ".concat(n?"text-red-600":r?"text-yellow-600":"text-gray-500"),children:["\u2192 ",new Date(e.expiryDate).toLocaleDateString(),n&&" (Expir\xe9)",r&&!n&&" (Expire bient\xf4t)"]})]})]})}),(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:hT(e.updateMethod)}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["Par: ",e.createdByName]})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((a=e.isActive&&!n,a?"bg-green-100 text-green-800":"bg-red-100 text-red-800")),children:[j(e.isActive&&!n),(0,ju.jsx)("span",{className:"ml-1",children:n?"Expir\xe9":e.isActive?"Actif":"Inactif"})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,ju.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ju.jsx)("button",{onClick:()=>b(e),className:"text-blue-600 hover:text-blue-900",title:"Voir d\xe9tails",children:(0,ju.jsx)(fi,{className:"w-4 h-4"})}),(0,ju.jsx)("button",{onClick:()=>(e=>{v(e),f(!0)})(e),className:"text-primary-600 hover:text-primary-900",title:"Modifier",children:(0,ju.jsx)(Wu,{className:"w-4 h-4"})}),e.isActive&&(0,ju.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir d\xe9sactiver ce taux de change?"))try{await Di.deactivateExchangeRate(e.id),Ts.success("Taux d\xe9sactiv\xe9 avec succ\xe8s"),N()}catch(Sc){console.error("Error deactivating rate:",Sc),Ts.error("Erreur lors de la d\xe9sactivation")}})(e),className:"text-red-600 hover:text-red-900",title:"D\xe9sactiver",children:(0,ju.jsx)(cm,{className:"w-4 h-4"})})]})})]},e.id)})})]})})}),x&&(0,ju.jsx)(xT,{rate:g,onSubmit:async e=>{try{g?(await Di.updateExchangeRate(e),Ts.success("Taux modifi\xe9 avec succ\xe8s")):(await Di.createExchangeRate(e),Ts.success("Taux cr\xe9\xe9 avec succ\xe8s")),f(!1),v(null),N()}catch(Sc){console.error("Error saving rate:",Sc),Ts.error("Erreur lors de l'enregistrement")}},onCancel:()=>{f(!1),v(null)}}),y&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,ju.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto",children:(0,ju.jsxs)("div",{className:"p-6",children:[(0,ju.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold",children:"D\xe9tails du taux de change"}),(0,ju.jsx)("button",{onClick:()=>b(null),className:"text-gray-400 hover:text-gray-600",children:"\xd7"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Devise de base"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:uT(y.baseCurrency)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Devise cible"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:uT(y.targetCurrency)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Taux d'achat"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1 font-medium",children:w(y.buyingRate)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Taux de vente"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1 font-medium",children:w(y.sellingRate)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date d'effet"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:new Date(y.effectiveDate).toLocaleString()})]}),y.expiryDate&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date d'expiration"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:new Date(y.expiryDate).toLocaleString()})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"M\xe9thode de mise \xe0 jour"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:hT(y.updateMethod)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cr\xe9\xe9 par"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:y.createdByName}),(0,ju.jsx)("p",{className:"text-sm text-gray-500",children:new Date(y.createdAt).toLocaleString()})]}),y.notes&&(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),(0,ju.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:y.notes})]})]})]})})})]})},gT=mi("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),vT=mi("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),yT=mi("Power",[["path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0",key:"phirl6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"12",key:"aemgbe"}]]),bT=mi("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),NT=t=>{let{isOpen:r,onClose:n,onSave:a,branch:i,isEditing:l=!1}=t;const[o,c]=(0,e.useState)(!1),[d,u]=(0,e.useState)([]),[m,h]=(0,e.useState)(""),[p,x]=(0,e.useState)([]),{register:f,handleSubmit:g,control:v,watch:y,setValue:b,reset:N,formState:{errors:j,isDirty:w}}=ri({resolver:oi(Nu),defaultValues:{name:"",code:"",address:"",commune:"",department:"",phone1:"",phone2:"",phone3:"",email:"",openingDate:(new Date).toISOString().split("T")[0],managerId:"",maxEmployees:5,status:pu.Active,dailyWithdrawalLimit:1e5,dailyDepositLimit:5e5,maxLocalCreditApproval:5e4,minCashReserveHTG:5e4,minCashReserveUSD:1e3,openTime:"08:00",closeTime:"16:00",closedDays:[xu.Sunday]}}),S=y("name"),A=y("department");(0,e.useEffect)(()=>{r&&(C(),i&&l?D(i):(N(),h(""),x([])))},[r,i,l,N]);const T=()=>{w&&!o?window.confirm("Vous avez des modifications non enregistr\xe9es. Voulez-vous vraiment fermer?")&&n():n()};(0,e.useEffect)(()=>{const e=e=>{"Escape"===e.key&&r&&!o&&T()};return r&&window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[r,o,w]),(0,e.useEffect)(()=>{if(A){const e=gu[A]||[];if(m!==A){h(A),x(e);const t=y("commune");t&&!e.includes(t)&&b("commune","",{shouldValidate:!1})}else 0===p.length&&e.length>0&&x(e)}else{h(""),x([]);y("commune")&&b("commune","",{shouldValidate:!1})}},[A,m,p.length,y,b]),(0,e.useEffect)(()=>{S&&!l&&E(S)},[S,l]);const C=async()=>{try{const e=await Di.getAvailableManagers();u(e)}catch(Sc){console.error("Error loading managers:",Sc)}},E=async e=>{if(e.length>=3)try{const t=await Di.generateBranchCode(e);b("code",t)}catch(Sc){console.error("Error generating code:",Sc)}},D=e=>{const t=e.phones||["","",""],r=gu[e.department]||[];h(e.department),x(r),b("name",e.name),b("code",e.code),b("address",e.address),b("department",e.department,{shouldValidate:!1}),b("commune",e.commune,{shouldValidate:!1}),b("phone1",t[0]||""),b("phone2",t[1]||""),b("phone3",t[2]||""),b("email",e.email),b("openingDate",e.openingDate.split("T")[0]),b("managerId",e.managerId||""),b("maxEmployees",e.maxEmployees),b("status",e.status),b("dailyWithdrawalLimit",e.limits.dailyWithdrawalLimit),b("dailyDepositLimit",e.limits.dailyDepositLimit),b("maxLocalCreditApproval",e.limits.maxLocalCreditApproval),b("minCashReserveHTG",e.limits.minCashReserveHTG),b("minCashReserveUSD",e.limits.minCashReserveUSD),b("openTime",e.operatingHours.openTime),b("closeTime",e.operatingHours.closeTime),b("closedDays",e.operatingHours.closedDays||[])},k=async e=>{c(!0);try{const t=[e.phone1,e.phone2||"",e.phone3||""].filter(e=>""!==e.trim()),r={name:e.name,code:e.code,address:e.address,commune:e.commune,department:e.department,phones:t,email:e.email,openingDate:e.openingDate,managerId:e.managerId||void 0,maxEmployees:e.maxEmployees,status:e.status,limits:{dailyWithdrawalLimit:e.dailyWithdrawalLimit,dailyDepositLimit:e.dailyDepositLimit,maxLocalCreditApproval:e.maxLocalCreditApproval,minCashReserveHTG:e.minCashReserveHTG,minCashReserveUSD:e.minCashReserveUSD},operatingHours:{openTime:e.openTime,closeTime:e.closeTime,closedDays:e.closedDays||[]}};let o;l&&i?(o=await Di.updateBranch(i.id,(0,s.A)({id:i.id},r)),Ts.success("Succursale modifi\xe9e avec succ\xe8s")):(o=await Di.createBranch(r),Ts.success("Succursale cr\xe9\xe9e avec succ\xe8s")),a(o),n(),N()}catch(Sc){var t,r;console.error("Error saving branch:",Sc),Ts.error((null===(t=Sc.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Erreur lors de l'enregistrement")}finally{c(!1)}};return r?(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ju.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,ju.jsx)(Ku,{className:"h-6 w-6 text-blue-600"})}),(0,ju.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:l?"Modifier la succursale":"Nouvelle succursale"})]}),(0,ju.jsx)("button",{onClick:T,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:(0,ju.jsx)(vm,{className:"h-5 w-5 text-gray-500"})})]}),(0,ju.jsx)("div",{className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:(0,ju.jsxs)("form",{onSubmit:g(k),className:"p-6 space-y-8",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Ku,{className:"h-5 w-5 mr-2 text-blue-600"}),"Informations g\xe9n\xe9rales"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom de la succursale *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},f("name")),{},{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Port-au-Prince Centre"})),j.name&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.name.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Code succursale *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},f("code")),{},{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: PAP-001"})),j.code&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.code.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"D\xe9partement *"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},f("department")),{},{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner un d\xe9partement"}),fu.map(e=>(0,ju.jsx)("option",{value:e,children:e},e))]})),j.department&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.department.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Commune/Ville *"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},f("commune")),{},{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!m,children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner une commune"}),p.map(e=>(0,ju.jsx)("option",{value:e,children:e},e))]})),j.commune&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.commune.message})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,ju.jsx)(Jw,{className:"inline h-4 w-4 mr-1"}),"Adresse compl\xe8te *"]}),(0,ju.jsx)("textarea",(0,s.A)((0,s.A)({},f("address")),{},{rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Adresse compl\xe8te avec num\xe9ro, rue, quartier..."})),j.address&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.address.message})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Zw,{className:"h-5 w-5 mr-2 text-green-600"}),"Informations de contact"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone principal *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},f("phone1")),{},{type:"tel",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: +509 1234 5678"})),j.phone1&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.phone1.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone secondaire"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},f("phone2")),{},{type:"tel",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: +509 1234 5679"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone d'urgence"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},f("phone3")),{},{type:"tel",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: +509 1234 5680"}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,ju.jsx)(pi,{className:"inline h-4 w-4 mr-1"}),"Email *"]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},f("email")),{},{type:"email",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: succursale@nalacredit.com"})),j.email&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.email.message})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Ru,{className:"h-5 w-5 mr-2 text-purple-600"}),"Gestion et op\xe9rations"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date d'ouverture *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},f("openingDate")),{},{type:"date",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),j.openingDate&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.openingDate.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Responsable de succursale"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},f("managerId")),{},{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"",children:"Aucun responsable assign\xe9"}),d.map(e=>(0,ju.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName," - ",e.email]},e.id))]}))]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre d'employ\xe9s autoris\xe9s *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},f("maxEmployees",{valueAsNumber:!0})),{},{type:"number",min:"1",max:"100",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),j.maxEmployees&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.maxEmployees.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut *"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},f("status")),{},{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:pu.Active,children:"Active"}),(0,ju.jsx)("option",{value:pu.Inactive,children:"Inactive"}),(0,ju.jsx)("option",{value:pu.UnderConstruction,children:"En construction"})]})),j.status&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.status.message})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Cu,{className:"h-5 w-5 mr-2 text-orange-600"}),"Heures d'ouverture"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heure d'ouverture *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},f("openTime")),{},{type:"time",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),j.openTime&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.openTime.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heure de fermeture *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},f("closeTime")),{},{type:"time",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),j.closeTime&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.closeTime.message})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jours de fermeture"}),(0,ju.jsx)(ya,{name:"closedDays",control:v,render:e=>{let{field:t}=e;return(0,ju.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{value:xu.Sunday,label:"Dimanche"},{value:xu.Monday,label:"Lundi"},{value:xu.Tuesday,label:"Mardi"},{value:xu.Wednesday,label:"Mercredi"},{value:xu.Thursday,label:"Jeudi"},{value:xu.Friday,label:"Vendredi"},{value:xu.Saturday,label:"Samedi"}].map(e=>{var r;return(0,ju.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,ju.jsx)("input",{type:"checkbox",checked:(null===(r=t.value)||void 0===r?void 0:r.includes(e.value))||!1,onChange:r=>{const n=t.value||[];r.target.checked?t.onChange([...n,e.value]):t.onChange(n.filter(t=>t!==e.value))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,ju.jsx)("span",{className:"text-sm text-gray-700",children:e.label})]},e.value)})})}})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Du,{className:"h-5 w-5 mr-2 text-green-600"}),"Limites financi\xe8res"]}),(0,ju.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,ju.jsxs)("div",{className:"flex items-start",children:[(0,ju.jsx)(Su,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-2"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h4",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Configuration des limites"}),(0,ju.jsx)("p",{className:"text-sm text-yellow-700",children:"Ces limites d\xe9terminent les montants maximum pour les op\xe9rations journali\xe8res et les r\xe9serves de caisse requises pour cette succursale."})]})]})}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Limite de retrait journalier (HTG) *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},f("dailyWithdrawalLimit",{valueAsNumber:!0})),{},{type:"number",min:"0",step:"1000",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"100000"})),j.dailyWithdrawalLimit&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.dailyWithdrawalLimit.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Limite de d\xe9p\xf4t journalier (HTG) *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},f("dailyDepositLimit",{valueAsNumber:!0})),{},{type:"number",min:"0",step:"1000",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"500000"})),j.dailyDepositLimit&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.dailyDepositLimit.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant max cr\xe9dit approuvable (HTG) *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},f("maxLocalCreditApproval",{valueAsNumber:!0})),{},{type:"number",min:"0",step:"1000",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"50000"})),j.maxLocalCreditApproval&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.maxLocalCreditApproval.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"R\xe9serve minimum caisse HTG *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},f("minCashReserveHTG",{valueAsNumber:!0})),{},{type:"number",min:"0",step:"1000",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"50000"})),j.minCashReserveHTG&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.minCashReserveHTG.message})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"R\xe9serve minimum caisse USD *"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({},f("minCashReserveUSD",{valueAsNumber:!0})),{},{type:"number",min:"0",step:"100",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1000"})),j.minCashReserveUSD&&(0,ju.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.minCashReserveUSD.message})]})]})]})]})}),(0,ju.jsxs)("div",{className:"flex items-center justify-end space-x-4 p-6 border-t border-gray-200 bg-gray-50",children:[(0,ju.jsx)("button",{type:"button",onClick:T,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),(0,ju.jsxs)("button",{onClick:g(k),disabled:o,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[o?(0,ju.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):(0,ju.jsx)(lp,{className:"h-4 w-4"}),(0,ju.jsx)("span",{children:o?"Enregistrement...":"Enregistrer"})]})]})]})}):null},jT=t=>{let{isOpen:r,onClose:n,branch:s}=t;const[a,i]=(0,e.useState)("info"),[l,o]=(0,e.useState)([]),[c,d]=(0,e.useState)(!1);(0,e.useEffect)(()=>{r&&s&&"employees"===a&&u()},[r,s,a]),(0,e.useEffect)(()=>{const e=e=>{"Escape"===e.key&&r&&n()};return r&&(window.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{window.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[r,n]);const u=async()=>{if(s)try{d(!0);const e=await Di.getAllAdmins({assignedBranch:s.id.toString(),isActive:void 0});let t=[];Array.isArray(e)?t=e:e&&Array.isArray(e.items)?t=e.items:e&&Array.isArray(e.data)?t=e.data:e&&Array.isArray(e.admins)?t=e.admins:(console.warn("Unexpected response structure:",e),t=[]);const r=t.map(e=>({id:e.id,firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone||"",adminType:e.adminType,adminTypeName:m(e.adminType),department:e.department||"N/A",isActive:e.isActive}));o(r)}catch(Sc){console.error("Error loading admins:",Sc),Ts.error("Erreur lors du chargement des administrateurs"),o([])}finally{d(!1)}},m=e=>{const t={0:"Caissier",1:"Secr\xe9taire Administratif",2:"Agent de Cr\xe9dit",3:"Chef de Succursale",4:"Directeur R\xe9gional",5:"Administrateur Syst\xe8me",6:"Direction G\xe9n\xe9rale",7:"Comptable Finance",8:"Super Admin",9:"Manager",10:"Auditeur",11:"RH Manager"};return void 0!==t[e]?t[e]:"R\xf4le ".concat(e)};if(!r||!s)return null;const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTG";const r=new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:2}).format(e);return"USD"===t?"$ ".concat(r):"".concat(r," HTG")},p=e=>new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),x=[{id:"info",label:"Informations",icon:Ku},{id:"limits",label:"Limites",icon:Du},{id:"employees",label:"Administrateurs",icon:Ru},{id:"history",label:"Historique",icon:Gu}];return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,ju.jsx)(Ku,{className:"h-8 w-8 text-blue-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:s.name}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Code: ",s.code]})]}),(e=>{const t={[pu.Active]:{bg:"bg-green-100",text:"text-green-800",icon:Ju,label:"Active"},[pu.Inactive]:{bg:"bg-red-100",text:"text-red-800",icon:Lp,label:"Inactive"},[pu.UnderConstruction]:{bg:"bg-yellow-100",text:"text-yellow-800",icon:Su,label:"En construction"}}[e],r=t.icon;return(0,ju.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat(t.bg," ").concat(t.text),children:[(0,ju.jsx)(r,{className:"h-4 w-4 mr-1"}),t.label]})})(s.status)]}),(0,ju.jsx)("button",{onClick:n,className:"p-2 hover:bg-white/50 rounded-lg transition-colors",children:(0,ju.jsx)(vm,{className:"h-6 w-6 text-gray-500"})})]}),(0,ju.jsx)("div",{className:"border-b border-gray-200 bg-gray-50",children:(0,ju.jsx)("div",{className:"flex space-x-1 px-6",children:x.map(e=>{const t=e.icon;return(0,ju.jsxs)("button",{onClick:()=>i(e.id),className:"flex items-center space-x-2 px-4 py-3 border-b-2 transition-colors ".concat(a===e.id?"border-blue-600 text-blue-600 bg-white":"border-transparent text-gray-600 hover:text-gray-900 hover:bg-white/50"),children:[(0,ju.jsx)(t,{className:"h-4 w-4"}),(0,ju.jsx)("span",{className:"font-medium",children:e.label})]},e.id)})})}),(0,ju.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["info"===a&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Jw,{className:"h-5 w-5 mr-2 text-blue-600"}),"Localisation"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"D\xe9partement"}),(0,ju.jsx)("p",{className:"text-gray-900 mt-1",children:s.department})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Commune"}),(0,ju.jsx)("p",{className:"text-gray-900 mt-1",children:s.commune})]}),(0,ju.jsxs)("div",{className:"md:col-span-2",children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Adresse compl\xe8te"}),(0,ju.jsx)("p",{className:"text-gray-900 mt-1",children:s.address})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Zw,{className:"h-5 w-5 mr-2 text-green-600"}),"Contact"]}),(0,ju.jsxs)("div",{className:"space-y-3",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),(0,ju.jsxs)("p",{className:"text-gray-900 mt-1 flex items-center",children:[(0,ju.jsx)(pi,{className:"h-4 w-4 mr-2 text-gray-400"}),s.email]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"T\xe9l\xe9phones"}),(0,ju.jsx)("div",{className:"mt-1 space-y-1",children:s.phones.map((e,t)=>(0,ju.jsxs)("p",{className:"text-gray-900 flex items-center",children:[(0,ju.jsx)(Zw,{className:"h-4 w-4 mr-2 text-gray-400"}),e,0===t&&(0,ju.jsx)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded",children:"Principal"})]},t))})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Ru,{className:"h-5 w-5 mr-2 text-purple-600"}),"Gestion"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Responsable"}),(0,ju.jsx)("p",{className:"text-gray-900 mt-1",children:s.managerName||"Non assign\xe9"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Capacit\xe9 employ\xe9s"}),(0,ju.jsxs)("p",{className:"text-gray-900 mt-1",children:[s.maxEmployees," employ\xe9s maximum"]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Date d'ouverture"}),(0,ju.jsxs)("p",{className:"text-gray-900 mt-1 flex items-center",children:[(0,ju.jsx)(pm,{className:"h-4 w-4 mr-2 text-gray-400"}),p(s.openingDate)]})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Cu,{className:"h-5 w-5 mr-2 text-orange-600"}),"Heures d'op\xe9ration"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Heures d'ouverture"}),(0,ju.jsxs)("p",{className:"text-gray-900 mt-1 text-lg font-semibold",children:[s.operatingHours.openTime," - ",s.operatingHours.closeTime]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Jours ferm\xe9s"}),(0,ju.jsx)("p",{className:"text-gray-900 mt-1",children:0===s.operatingHours.closedDays.length?"Ouvert tous les jours":"".concat(s.operatingHours.closedDays.length," jour(s) par semaine")})]})]})]})]}),"limits"===a&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(ku,{className:"h-5 w-5 mr-2 text-blue-600"}),"Limites de transactions"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg",children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-blue-900",children:"Retrait journalier"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-blue-600 mt-2",children:h(s.limits.dailyWithdrawalLimit)})]}),(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg",children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-green-900",children:"D\xe9p\xf4t journalier"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-green-600 mt-2",children:h(s.limits.dailyDepositLimit)})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(lm,{className:"h-5 w-5 mr-2 text-purple-600"}),"Limites de cr\xe9dit"]}),(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg",children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-purple-900",children:"Approbation locale maximum"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-purple-600 mt-2",children:h(s.limits.maxLocalCreditApproval)}),(0,ju.jsx)("p",{className:"text-sm text-purple-700 mt-2",children:"Montants sup\xe9rieurs requi\xe8rent approbation r\xe9gionale"})]})]}),(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Du,{className:"h-5 w-5 mr-2 text-green-600"}),"R\xe9serves de caisse minimum"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-lg",children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-orange-900",children:"R\xe9serve HTG"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-orange-600 mt-2",children:h(s.limits.minCashReserveHTG)})]}),(0,ju.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 p-4 rounded-lg",children:[(0,ju.jsx)("label",{className:"text-sm font-medium text-indigo-900",children:"R\xe9serve USD"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-indigo-600 mt-2",children:h(s.limits.minCashReserveUSD,"USD")})]})]})]})]}),"employees"===a&&(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,ju.jsx)(lm,{className:"h-5 w-5 mr-2 text-purple-600"}),"Administrateurs de la succursale"]}),(0,ju.jsxs)("span",{className:"text-sm bg-purple-100 text-purple-700 px-3 py-1 rounded-full font-medium",children:[l.length," ",l.length>1?"administrateurs":"administrateur"]})]}),c?(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-4",children:"Chargement des administrateurs..."})]}):0===l.length?(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)(lm,{className:"h-12 w-12 text-gray-400 mx-auto"}),(0,ju.jsx)("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"Aucun administrateur assign\xe9"}),(0,ju.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Cette succursale n'a pas encore d'administrateurs assign\xe9s."})]}):(0,ju.jsx)("div",{className:"divide-y divide-gray-200",children:l.map(e=>(0,ju.jsx)("div",{className:"py-4 hover:bg-gray-50 transition-colors rounded-lg px-3 -mx-3",children:(0,ju.jsx)("div",{className:"flex items-start justify-between",children:(0,ju.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,ju.jsx)("div",{className:"h-12 w-12 rounded-full flex items-center justify-center ".concat(e.isActive?"bg-purple-100":"bg-gray-100"),children:(0,ju.jsx)(lm,{className:"h-6 w-6 ".concat(e.isActive?"text-purple-600":"text-gray-400")})}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ju.jsxs)("p",{className:"font-semibold text-gray-900",children:[e.firstName," ",e.lastName]}),e.isActive?(0,ju.jsx)(Ju,{className:"h-4 w-4 text-green-600"}):(0,ju.jsx)(Lp,{className:"h-4 w-4 text-red-600"})]}),(0,ju.jsxs)("p",{className:"text-sm text-gray-600 mt-0.5 flex items-center",children:[(0,ju.jsx)(pi,{className:"h-3.5 w-3.5 mr-1.5"}),e.email]}),e.phone&&(0,ju.jsxs)("p",{className:"text-sm text-gray-600 mt-0.5 flex items-center",children:[(0,ju.jsx)(Zw,{className:"h-3.5 w-3.5 mr-1.5"}),e.phone]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,ju.jsx)("span",{className:"text-xs px-2 py-1 rounded-full font-medium ".concat(0===e.adminType||1===e.adminType?"bg-red-100 text-red-700":2===e.adminType?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:e.adminTypeName}),e.department&&(0,ju.jsx)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:e.department})]})]})]})})},e.id))})]}),l.length>0&&(0,ju.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-4",children:(0,ju.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:l.filter(e=>e.isActive).length}),(0,ju.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Actifs"})]}),(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-600",children:l.filter(e=>!e.isActive).length}),(0,ju.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Inactifs"})]}),(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:l.filter(e=>2===e.adminType).length}),(0,ju.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Responsables"})]}),(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)("p",{className:"text-2xl font-bold text-green-600",children:l.filter(e=>[3,4,5,6].includes(e.adminType)).length}),(0,ju.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Autres"})]})]})})]}),"history"===a&&(0,ju.jsx)("div",{className:"space-y-4",children:(0,ju.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ju.jsx)(Gu,{className:"h-5 w-5 mr-2 text-blue-600"}),"Historique des modifications"]}),(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)(Xu,{className:"h-12 w-12 text-gray-400 mx-auto"}),(0,ju.jsx)("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"Historique non disponible"}),(0,ju.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"L'historique des modifications sera affich\xe9 ici."})]})]})})]}),(0,ju.jsxs)("div",{className:"flex items-center justify-between p-4 border-t border-gray-200 bg-gray-50",children:[(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:["Cr\xe9\xe9 le ",p(s.createdAt)," \u2022 Mis \xe0 jour le ",p(s.updatedAt)]}),(0,ju.jsx)("button",{onClick:n,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Fermer"})]})]})})},wT=()=>{const[t,r]=(0,e.useState)([]),[n,s]=(0,e.useState)(!0),[a,i]=(0,e.useState)(""),[l,o]=(0,e.useState)(""),[c,d]=(0,e.useState)("all"),[u,m]=(0,e.useState)(!1),[h,p]=(0,e.useState)(null),[x,f]=(0,e.useState)(!1),[g,v]=(0,e.useState)(null),[y,b]=(0,e.useState)(!1),[N,j]=(0,e.useState)(null),[w,S]=(0,e.useState)(1),[A,T]=(0,e.useState)(10),[C,E]=(0,e.useState)("name"),[D,k]=(0,e.useState)("asc");(0,e.useEffect)(()=>{R()},[]),(0,e.useEffect)(()=>{const e=setTimeout(()=>{o(a)},300);return()=>clearTimeout(e)},[a]);const R=async()=>{try{s(!0);const e=await Di.getAllBranches();r(e)}catch(Sc){console.error("Error loading branches:",Sc),Ts.error("Erreur lors du chargement des succursales")}finally{s(!1)}},_=t.filter(e=>{const t=e.name.toLowerCase().includes(l.toLowerCase())||e.code.toLowerCase().includes(l.toLowerCase())||e.commune.toLowerCase().includes(l.toLowerCase())||e.department.toLowerCase().includes(l.toLowerCase()),r="all"===c||e.status===c;return t&&r}),I=[..._].sort((e,t)=>{let r=0;switch(C){case"name":r=e.name.localeCompare(t.name);break;case"code":r=e.code.localeCompare(t.code);break;case"department":r=e.department.localeCompare(t.department);break;case"openingDate":r=new Date(e.openingDate).getTime()-new Date(t.openingDate).getTime()}return"asc"===D?r:-r}),P=Math.ceil(I.length/A),O=(w-1)*A,L=O+A,F=I.slice(O,L);e.useEffect(()=>{S(1)},[l,c]);const M=e=>{const t={[pu.Active]:{bg:"bg-green-100",text:"text-green-800",label:"Active"},[pu.Inactive]:{bg:"bg-red-100",text:"text-red-800",label:"Inactive"},[pu.UnderConstruction]:{bg:"bg-yellow-100",text:"text-yellow-800",label:"En construction"}}[e];return(0,ju.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(t.bg," ").concat(t.text),children:t.label})},U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTG";const r=new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:2}).format(e);return"USD"===t?"$ ".concat(r):"".concat(r," HTG")};return n?(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,ju.jsxs)("div",{className:"space-y-2",children:[(0,ju.jsx)("div",{className:"h-8 bg-gray-200 rounded w-64 animate-pulse"}),(0,ju.jsx)("div",{className:"h-4 bg-gray-200 rounded w-96 animate-pulse"})]}),(0,ju.jsxs)("div",{className:"mt-4 sm:mt-0 flex gap-3",children:[(0,ju.jsx)("div",{className:"h-12 bg-gray-200 rounded w-32 animate-pulse"}),(0,ju.jsx)("div",{className:"h-12 bg-gray-200 rounded w-48 animate-pulse"})]})]}),(0,ju.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ju.jsx)("div",{className:"flex-1 h-12 bg-gray-200 rounded-lg animate-pulse"}),(0,ju.jsx)("div",{className:"h-12 bg-gray-200 rounded-lg w-48 animate-pulse"}),(0,ju.jsx)("div",{className:"h-12 bg-gray-200 rounded-lg w-64 animate-pulse"})]}),(0,ju.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"space-y-3",children:[(0,ju.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"}),(0,ju.jsx)("div",{className:"h-8 bg-gray-200 rounded w-16 animate-pulse"})]})},e))}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,ju.jsx)("div",{className:"divide-y divide-gray-200",children:[1,2,3].map(e=>(0,ju.jsx)("div",{className:"p-6",children:(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ju.jsx)("div",{className:"h-6 bg-gray-200 rounded w-48 animate-pulse"}),(0,ju.jsx)("div",{className:"h-5 bg-gray-200 rounded w-20 animate-pulse"})]}),(0,ju.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,ju.jsx)("div",{className:"h-10 bg-gray-200 rounded animate-pulse"},e))})]})},e))})})]}):(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Succursales"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"G\xe9rez les succursales, leurs limites et param\xe8tres op\xe9rationnels"})]}),(0,ju.jsxs)("div",{className:"mt-4 sm:mt-0 flex items-center gap-3",children:[(0,ju.jsxs)("button",{onClick:()=>{const e=I.map(e=>[e.name,e.code,e.department,e.commune,e.address,e.email,e.phones[0]||"",e.status,new Date(e.openingDate).toLocaleDateString("fr-FR"),e.maxEmployees,e.limits.dailyWithdrawalLimit,e.limits.dailyDepositLimit,e.limits.maxLocalCreditApproval,e.limits.minCashReserveHTG,e.limits.minCashReserveUSD]),t=[["Nom","Code","D\xe9partement","Commune","Adresse","Email","T\xe9l\xe9phone","Statut","Date Ouverture","Max Employ\xe9s","Limite Retrait (HTG)","Limite D\xe9p\xf4t (HTG)","Cr\xe9dit Max (HTG)","R\xe9serve HTG","R\xe9serve USD"].join(","),...e.map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),r=new Blob(["\ufeff"+t],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),s=URL.createObjectURL(r);n.setAttribute("href",s),n.setAttribute("download","succursales_".concat((new Date).toISOString().split("T")[0],".csv")),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),Ts.success("".concat(I.length," succursales export\xe9es en CSV"))},disabled:0===I.length,className:"bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Exporter en CSV",children:[(0,ju.jsx)(zu,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"CSV"})]}),(0,ju.jsxs)("button",{onClick:()=>{try{const e=window.open("","_blank");if(!e)return void Ts.error("Impossible d'ouvrir la fen\xeatre d'impression");const r=(new Date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),n='\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <meta charset="utf-8">\n          <title>Liste des Succursales - Nala Kredi</title>\n          <style>\n            * { margin: 0; padding: 0; box-sizing: border-box; }\n            body { font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif; padding: 40px; color: #333; }\n            .header { text-align: center; margin-bottom: 30px; border-bottom: 3px solid #2563eb; padding-bottom: 20px; }\n            .header h1 { color: #2563eb; font-size: 28px; margin-bottom: 10px; }\n            .header p { color: #666; font-size: 14px; }\n            .meta { display: flex; justify-content: space-between; margin-bottom: 20px; padding: 15px; background: #f3f4f6; border-radius: 8px; }\n            .meta div { font-size: 13px; }\n            .meta strong { color: #1f2937; }\n            table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 11px; }\n            thead { background: #2563eb; color: white; }\n            th, td { padding: 10px; text-align: left; border: 1px solid #e5e7eb; }\n            th { font-weight: 600; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; }\n            tbody tr:nth-child(even) { background: #f9fafb; }\n            tbody tr:hover { background: #f3f4f6; }\n            .status-active { color: #059669; font-weight: 600; }\n            .status-inactive { color: #dc2626; font-weight: 600; }\n            .status-construction { color: #d97706; font-weight: 600; }\n            .footer { margin-top: 30px; text-align: center; font-size: 11px; color: #6b7280; padding-top: 20px; border-top: 1px solid #e5e7eb; }\n            .summary { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 30px; }\n            .summary-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 8px; text-align: center; }\n            .summary-card h3 { font-size: 24px; margin-bottom: 5px; }\n            .summary-card p { font-size: 12px; opacity: 0.9; }\n            @media print {\n              body { padding: 20px; }\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <h1>\ud83d\udccd NALA KREDI - Liste des Succursales</h1>\n            <p>Rapport g\xe9n\xe9r\xe9 le '.concat(r,'</p>\n          </div>\n\n          <div class="summary">\n            <div class="summary-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">\n              <h3>').concat(t.length,'</h3>\n              <p>Total Succursales</p>\n            </div>\n            <div class="summary-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">\n              <h3>').concat(t.filter(e=>e.status===pu.Active).length,'</h3>\n              <p>Actives</p>\n            </div>\n            <div class="summary-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">\n              <h3>').concat(t.filter(e=>e.status===pu.Inactive).length,'</h3>\n              <p>Inactives</p>\n            </div>\n            <div class="summary-card" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">\n              <h3>').concat(t.filter(e=>e.status===pu.UnderConstruction).length,'</h3>\n              <p>En Construction</p>\n            </div>\n          </div>\n\n          <div class="meta">\n            <div><strong>Filtres appliqu\xe9s:</strong> ').concat("all"===c?"Tous les statuts":c,"</div>\n            <div><strong>Tri:</strong> Par ").concat("name"===C?"Nom":"code"===C?"Code":"department"===C?"D\xe9partement":"Date"," (").concat("asc"===D?"Croissant":"D\xe9croissant",")</div>\n            <div><strong>R\xe9sultats:</strong> ").concat(I.length,' succursale(s)</div>\n          </div>\n\n          <table>\n            <thead>\n              <tr>\n                <th style="width: 5%">#</th>\n                <th style="width: 15%">Nom</th>\n                <th style="width: 8%">Code</th>\n                <th style="width: 12%">Localisation</th>\n                <th style="width: 12%">Contact</th>\n                <th style="width: 8%">Statut</th>\n                <th style="width: 10%">Date Ouverture</th>\n                <th style="width: 15%">Limites Financi\xe8res</th>\n                <th style="width: 15%">Horaires</th>\n              </tr>\n            </thead>\n            <tbody>\n              ').concat(I.map((e,t)=>"\n                <tr>\n                  <td>".concat(t+1,"</td>\n                  <td><strong>").concat(e.name,"</strong></td>\n                  <td>").concat(e.code,"</td>\n                  <td>\n                    <div>").concat(e.commune,'</div>\n                    <div style="color: #6b7280; font-size: 10px;">').concat(e.department,'</div>\n                  </td>\n                  <td>\n                    <div style="font-size: 10px;">').concat(e.email,'</div>\n                    <div style="color: #6b7280; font-size: 10px;">').concat(e.phones[0]||"N/A",'</div>\n                  </td>\n                  <td class="status-').concat(e.status===pu.Active?"active":e.status===pu.Inactive?"inactive":"construction",'">\n                    ').concat(e.status===pu.Active?"\u2713 Active":e.status===pu.Inactive?"\u2717 Inactive":"\ud83d\udd28 Construction","\n                  </td>\n                  <td>").concat(new Date(e.openingDate).toLocaleDateString("fr-FR"),'</td>\n                  <td style="font-size: 10px;">\n                    <div>Retrait: ').concat(U(e.limits.dailyWithdrawalLimit),"</div>\n                    <div>D\xe9p\xf4t: ").concat(U(e.limits.dailyDepositLimit),"</div>\n                    <div>Cr\xe9dit: ").concat(U(e.limits.maxLocalCreditApproval),'</div>\n                  </td>\n                  <td style="font-size: 10px;">\n                    <div>').concat(e.operatingHours.openTime," - ").concat(e.operatingHours.closeTime,'</div>\n                    <div style="color: #6b7280;">Max: ').concat(e.maxEmployees," employ\xe9s</div>\n                  </td>\n                </tr>\n              ")).join(""),'\n            </tbody>\n          </table>\n\n          <div class="footer">\n            <p><strong>NALA KREDI</strong> - Syst\xe8me de Gestion des Microcr\xe9dits</p>\n            <p>Document confidentiel - Usage interne uniquement</p>\n          </div>\n\n          <div class="no-print" style="margin-top: 30px; text-align: center;">\n            <button onclick="window.print()" style="background: #2563eb; color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 600;">\n              \ud83d\udda8\ufe0f Imprimer / Sauvegarder en PDF\n            </button>\n            <button onclick="window.close()" style="background: #6b7280; color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 600; margin-left: 10px;">\n              \u2715 Fermer\n            </button>\n          </div>\n        </body>\n        </html>\n      ');e.document.write(n),e.document.close(),Ts.success("Document PDF pr\xeat \xe0 imprimer")}catch(Sc){console.error("Error generating PDF:",Sc),Ts.error("Erreur lors de la g\xe9n\xe9ration du PDF")}},disabled:0===I.length,className:"bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Exporter en PDF",children:[(0,ju.jsx)(Hu,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"PDF"})]}),(0,ju.jsxs)("button",{onClick:()=>{p(null),f(!1),m(!0)},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,ju.jsx)(Au,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Nouvelle Succursale"})]})]})]}),(0,ju.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ju.jsxs)("div",{className:"relative flex-1",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",{type:"text",placeholder:"Rechercher par nom, code, commune, d\xe9partement...",value:a,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(hm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,ju.jsx)("option",{value:pu.Active,children:"Active"}),(0,ju.jsx)("option",{value:pu.Inactive,children:"Inactive"}),(0,ju.jsx)("option",{value:pu.UnderConstruction,children:"En construction"})]})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded-lg",children:[(0,ju.jsx)("span",{className:"text-sm text-gray-600",children:"Trier par:"}),(0,ju.jsxs)("select",{value:C,onChange:e=>E(e.target.value),className:"text-sm border-0 focus:ring-0 bg-transparent",children:[(0,ju.jsx)("option",{value:"name",children:"Nom"}),(0,ju.jsx)("option",{value:"code",children:"Code"}),(0,ju.jsx)("option",{value:"department",children:"D\xe9partement"}),(0,ju.jsx)("option",{value:"openingDate",children:"Date ouverture"})]}),(0,ju.jsx)("button",{onClick:()=>k("asc"===D?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"asc"===D?"Croissant":"D\xe9croissant",children:"asc"===D?(0,ju.jsx)(gT,{className:"h-4 w-4 text-gray-600"}):(0,ju.jsx)(vT,{className:"h-4 w-4 text-gray-600"})})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Succursales"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(Jw,{className:"h-6 w-6 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Succursales Actives"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-green-600",children:t.filter(e=>e.status===pu.Active).length})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(yT,{className:"h-6 w-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Succursales Inactives"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-red-600",children:t.filter(e=>e.status===pu.Inactive).length})]}),(0,ju.jsx)("div",{className:"p-3 bg-red-100 rounded-full",children:(0,ju.jsx)(bT,{className:"h-6 w-6 text-red-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"En Construction"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:t.filter(e=>e.status===pu.UnderConstruction).length})]}),(0,ju.jsx)("div",{className:"p-3 bg-yellow-100 rounded-full",children:(0,ju.jsx)(cm,{className:"h-6 w-6 text-yellow-600"})})]})})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[0===F.length?(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)(Jw,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,ju.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucune succursale trouv\xe9e"}),(0,ju.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:a||"all"!==c?"Essayez de modifier vos crit\xe8res de recherche.":"Commencez par cr\xe9er votre premi\xe8re succursale."})]}):(0,ju.jsx)("div",{className:"divide-y divide-gray-200",children:F.map(e=>(0,ju.jsx)("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:(0,ju.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,ju.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.code,")"]}),M(e.status)]}),(0,ju.jsxs)("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(Jw,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("div",{className:"font-medium",children:[e.commune,", ",e.department]}),(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:e.address})]})]}),(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(Zw,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"font-medium",children:e.phones[0]}),e.phones.length>1&&(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["+",e.phones.length-1," autres"]})]})]}),(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(pi,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsx)("div",{className:"font-medium",children:e.email})]}),(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(Ru,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("div",{className:"font-medium",children:["Max ",e.maxEmployees," employ\xe9s"]}),e.managerName&&(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["Resp: ",e.managerName]})]})]})]}),(0,ju.jsxs)("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(Cu,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("div",{className:"font-medium",children:[e.operatingHours.openTime," - ",e.operatingHours.closeTime]}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["Ferm\xe9: ",e.operatingHours.closedDays.length," jour(s)"]})]})]}),(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(Du,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("div",{className:"font-medium",children:["Retrait: ",U(e.limits.dailyWithdrawalLimit)]}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["D\xe9p\xf4t: ",U(e.limits.dailyDepositLimit)]})]})]}),(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(Du,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("div",{className:"font-medium",children:["Cr\xe9dit: ",U(e.limits.maxLocalCreditApproval)]}),(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"Limite locale"})]})]}),(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(Du,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("div",{className:"font-medium",children:[U(e.limits.minCashReserveHTG)," / ",U(e.limits.minCashReserveUSD,"USD")]}),(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:"R\xe9serves min"})]})]})]})]}),(0,ju.jsx)("div",{className:"relative ml-4",children:(0,ju.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ju.jsx)("button",{onClick:()=>(e=>{j(e),b(!0)})(e),className:"p-2 bg-indigo-100 text-indigo-600 rounded-lg hover:bg-indigo-200 transition-colors",title:"Voir d\xe9tails",children:(0,ju.jsx)(fi,{className:"h-4 w-4"})}),(0,ju.jsx)("button",{onClick:()=>(async e=>{try{e.status===pu.Active?(await Di.deactivateBranch(e.id),Ts.success("Succursale d\xe9sactiv\xe9e")):(await Di.activateBranch(e.id),Ts.success("Succursale activ\xe9e")),await R()}catch(Sc){var t,r;console.error("Error toggling branch status:",Sc),Ts.error((null===(t=Sc.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Erreur lors de la modification du statut")}})(e),className:"p-2 rounded-lg transition-colors ".concat(e.status===pu.Active?"bg-red-100 text-red-600 hover:bg-red-200":"bg-green-100 text-green-600 hover:bg-green-200"),title:e.status===pu.Active?"D\xe9sactiver":"Activer",children:e.status===pu.Active?(0,ju.jsx)(bT,{className:"h-4 w-4"}):(0,ju.jsx)(yT,{className:"h-4 w-4"})}),(0,ju.jsx)("button",{onClick:()=>(e=>{p(e),f(!0),m(!0)})(e),className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"Modifier",children:(0,ju.jsx)(xm,{className:"h-4 w-4"})}),(0,ju.jsx)("button",{onClick:()=>v(e.id),className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",title:"Supprimer",children:(0,ju.jsx)(bm,{className:"h-4 w-4"})})]})})]})},e.id))}),_.length>0&&(0,ju.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:(0,ju.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,ju.jsxs)("div",{className:"text-sm text-gray-700",children:["Affichage de ",O+1," \xe0 ",Math.min(L,I.length)," sur ",I.length," r\xe9sultats"]}),(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("label",{className:"text-sm text-gray-600",children:"Afficher:"}),(0,ju.jsxs)("select",{value:A,onChange:e=>{T(Number(e.target.value)),S(1)},className:"px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[(0,ju.jsx)("option",{value:10,children:"10"}),(0,ju.jsx)("option",{value:25,children:"25"}),(0,ju.jsx)("option",{value:50,children:"50"}),(0,ju.jsx)("option",{value:100,children:"100"})]})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ju.jsx)("button",{onClick:()=>S(1),disabled:1===w,className:"px-2 py-1 border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed text-sm",title:"Premi\xe8re page",children:"\xab"}),(0,ju.jsx)("button",{onClick:()=>S(e=>Math.max(1,e-1)),disabled:1===w,className:"px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Pr\xe9c"}),(0,ju.jsxs)("div",{className:"px-3 py-1 text-sm text-gray-700",children:["Page ",w," / ",P]}),(0,ju.jsx)("button",{onClick:()=>S(e=>Math.min(P,e+1)),disabled:w===P,className:"px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Suiv"}),(0,ju.jsx)("button",{onClick:()=>S(P),disabled:w===P,className:"px-2 py-1 border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed text-sm",title:"Derni\xe8re page",children:"\xbb"})]})]})]})})]}),(0,ju.jsx)(jT,{isOpen:y,onClose:()=>{b(!1),j(null)},branch:N}),(0,ju.jsx)(NT,{isOpen:u,onClose:()=>{m(!1),p(null),f(!1)},onSave:async e=>{await R()},branch:h,isEditing:x}),g&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,ju.jsx)("div",{className:"p-2 bg-red-100 rounded-full",children:(0,ju.jsx)(cm,{className:"h-6 w-6 text-red-600"})}),(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Supprimer la succursale"})]}),(0,ju.jsx)("p",{className:"text-gray-600 mb-6",children:"\xcates-vous s\xfbr de vouloir supprimer cette succursale ? Cette action est irr\xe9versible."}),(0,ju.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,ju.jsx)("button",{onClick:()=>v(null),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),(0,ju.jsx)("button",{onClick:()=>(async e=>{try{await Di.deleteBranch(e),r(t.filter(t=>t.id!==e)),Ts.success("Succursale supprim\xe9e avec succ\xe8s"),v(null)}catch(Sc){var n,s;console.error("Error deleting branch:",Sc),Ts.error((null===(n=Sc.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||"Erreur lors de la suppression")}})(g),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Supprimer"})]})]})})]})},ST=mi("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);let AT=function(e){return e[e.HTG=1]="HTG",e[e.USD=2]="USD",e}({}),TT=function(e){return e[e.Pending=0]="Pending",e[e.Approved=1]="Approved",e[e.InTransit=2]="InTransit",e[e.Completed=3]="Completed",e[e.Rejected=4]="Rejected",e[e.Cancelled=5]="Cancelled",e}({});const CT=e=>{const t={[AT.HTG]:{code:"HTG",name:"Gourdes Haitiennes",symbol:"HTG"},[AT.USD]:{code:"USD",name:"US Dollar",symbol:"$"}};return t[e]||t[AT.HTG]};let ET=function(e){return e.Create="Create",e.Approve="Approve",e.Reject="Reject",e.Process="Process",e.Cancel="Cancel",e}({});TT.Pending,ET.Approve,ET.Reject,TT.Approved,TT.Rejected,TT.Approved,ET.Process,ET.Cancel,TT.InTransit,TT.Cancelled,TT.InTransit,ET.Process,TT.Completed,TT.Completed,TT.Rejected,TT.Cancelled;const DT=()=>{const[t,r]=(0,e.useState)([]),[n,s]=(0,e.useState)(!0),[a,i]=(0,e.useState)(""),[l,o]=(0,e.useState)("all"),[c,d]=(0,e.useState)("all"),[u,m]=(0,e.useState)("all"),[h,p]=(0,e.useState)("all"),[x,f]=(0,e.useState)(null);(0,e.useEffect)(()=>{g()},[]);const g=async()=>{try{s(!0);const e={},t=await Di.getInterBranchTransfers(e);r(t)}catch(Sc){console.error("Error loading transfers:",Sc);const t=[{id:"1",transferNumber:"TRF-2024-001",fromBranchId:1,fromBranchName:"Port-au-Prince - Centre",toBranchId:2,toBranchName:"Cap-Ha\xeftien",amount:5e4,currency:AT.HTG,currencyName:"Gourde Ha\xeftienne",exchangeRate:1,convertedAmount:5e4,status:TT.Pending,statusName:"En attente",reason:"R\xe9approvisionnement caisse",requestedBy:"user-1",requestedByName:"Jean Pierre",requestedAt:"2024-01-15T09:00:00Z",referenceNumber:"REF-001",createdAt:"2024-01-15T09:00:00Z",updatedAt:"2024-01-15T09:00:00Z"},{id:"2",transferNumber:"TRF-2024-002",fromBranchId:3,fromBranchName:"Gona\xefves",toBranchId:1,toBranchName:"Port-au-Prince - Centre",amount:1200,currency:AT.USD,currencyName:"Dollar Am\xe9ricain",exchangeRate:1,convertedAmount:1200,status:TT.InTransit,statusName:"En transit",reason:"Transfert exc\xe9dent",requestedBy:"user-2",requestedByName:"Marie Claudette",requestedAt:"2024-01-14T14:30:00Z",approvedAt:"2024-01-14T15:00:00Z",approvedBy:"user-5",approvedByName:"Paul Jacques",trackingNumber:"TRK-2024-002",referenceNumber:"REF-002",notes:"Transport s\xe9curis\xe9 requis",createdAt:"2024-01-14T14:30:00Z",updatedAt:"2024-01-14T15:30:00Z"},{id:"3",transferNumber:"TRF-2024-003",fromBranchId:2,fromBranchName:"Cap-Ha\xeftien",toBranchId:4,toBranchName:"Les Cayes",amount:75e3,currency:AT.HTG,currencyName:"Gourde Ha\xeftienne",exchangeRate:1,convertedAmount:75e3,status:TT.Completed,statusName:"Termin\xe9",reason:"Ouverture nouvelle succursale",requestedBy:"user-3",requestedByName:"Pierre Louis",requestedAt:"2024-01-13T10:00:00Z",approvedAt:"2024-01-13T10:30:00Z",approvedBy:"user-5",approvedByName:"Paul Jacques",processedAt:"2024-01-13T16:00:00Z",processedBy:"user-6",processedByName:"Sophie Durand",trackingNumber:"TRK-2024-003",referenceNumber:"REF-003",notes:"Transfert initial pour nouvelle succursale",createdAt:"2024-01-13T10:00:00Z",updatedAt:"2024-01-13T16:15:00Z"},{id:"4",transferNumber:"TRF-2024-004",fromBranchId:1,fromBranchName:"Port-au-Prince - Centre",toBranchId:3,toBranchName:"Gona\xefves",amount:2500,currency:AT.USD,currencyName:"Dollar Am\xe9ricain",exchangeRate:1,convertedAmount:2500,status:TT.Approved,statusName:"Approuv\xe9",reason:"Fonds de roulement",requestedBy:"user-4",requestedByName:"Lucie Martin",requestedAt:"2024-01-15T08:00:00Z",approvedAt:"2024-01-15T08:30:00Z",approvedBy:"user-5",approvedByName:"Paul Jacques",referenceNumber:"REF-004",notes:"Urgent - fin de semaine",createdAt:"2024-01-15T08:00:00Z",updatedAt:"2024-01-15T08:30:00Z"},{id:"5",transferNumber:"TRF-2024-005",fromBranchId:4,fromBranchName:"Les Cayes",toBranchId:2,toBranchName:"Cap-Ha\xeftien",amount:3e4,currency:AT.HTG,currencyName:"Gourde Ha\xeftienne",exchangeRate:1,convertedAmount:3e4,status:TT.Rejected,statusName:"Rejet\xe9",reason:"Demande non justifi\xe9e",requestedBy:"user-7",requestedByName:"Andr\xe9 Joseph",requestedAt:"2024-01-12T11:00:00Z",approvedAt:"2024-01-12T13:00:00Z",approvedBy:"user-5",approvedByName:"Paul Jacques",referenceNumber:"REF-005",notes:"Rejet\xe9 - documentation insuffisante",createdAt:"2024-01-12T11:00:00Z",updatedAt:"2024-01-12T13:15:00Z"},{id:"6",transferNumber:"TRF-2024-006",fromBranchId:2,fromBranchName:"Cap-Ha\xeftien",toBranchId:1,toBranchName:"Port-au-Prince - Centre",amount:800,currency:AT.USD,currencyName:"Dollar Am\xe9ricain",exchangeRate:1,convertedAmount:800,status:TT.Completed,statusName:"Termin\xe9",reason:"Remboursement frais",requestedBy:"user-8",requestedByName:"Claire Beauvoir",requestedAt:"2024-01-11T09:30:00Z",approvedAt:"2024-01-11T10:00:00Z",approvedBy:"user-5",approvedByName:"Paul Jacques",processedAt:"2024-01-11T15:30:00Z",processedBy:"user-6",processedByName:"Sophie Durand",trackingNumber:"TRK-2024-006",referenceNumber:"REF-006",createdAt:"2024-01-11T09:30:00Z",updatedAt:"2024-01-11T15:45:00Z"},{id:"7",transferNumber:"TRF-2024-007",fromBranchId:3,fromBranchName:"Gona\xefves",toBranchId:4,toBranchName:"Les Cayes",amount:1e5,currency:AT.HTG,currencyName:"Gourde Ha\xeftienne",exchangeRate:1,convertedAmount:1e5,status:TT.InTransit,statusName:"En transit",reason:"Expansion op\xe9rationnelle",requestedBy:"user-9",requestedByName:"Marc Antoine",requestedAt:"2024-01-15T07:00:00Z",approvedAt:"2024-01-15T07:30:00Z",approvedBy:"user-5",approvedByName:"Paul Jacques",trackingNumber:"TRK-2024-007",referenceNumber:"REF-007",notes:"Arriv\xe9e pr\xe9vue demain matin",createdAt:"2024-01-15T07:00:00Z",updatedAt:"2024-01-15T08:00:00Z"},{id:"8",transferNumber:"TRF-2024-008",fromBranchId:1,fromBranchName:"Port-au-Prince - Centre",toBranchId:4,toBranchName:"Les Cayes",amount:1500,currency:AT.USD,currencyName:"Dollar Am\xe9ricain",exchangeRate:1,convertedAmount:1500,status:TT.Pending,statusName:"En attente",reason:"Besoin liquidit\xe9s urgentes",requestedBy:"user-10",requestedByName:"Nadine L\xe9ger",requestedAt:"2024-01-15T10:00:00Z",referenceNumber:"REF-008",notes:"\xc0 traiter en priorit\xe9",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"}];r(t),Ts.success("Donn\xe9es de d\xe9monstration charg\xe9es")}finally{s(!1)}},v=t.filter(e=>{var t;const r=e.transferNumber.toLowerCase().includes(a.toLowerCase())||e.fromBranchName.toLowerCase().includes(a.toLowerCase())||e.toBranchName.toLowerCase().includes(a.toLowerCase())||(null===(t=e.requestedByName)||void 0===t?void 0:t.toLowerCase().includes(a.toLowerCase()))||e.reason.toLowerCase().includes(a.toLowerCase()),n="all"===l||e.status===l,s="all"===c||e.currency===c,i="all"===u||e.fromBranchId===u,o="all"===h||e.toBranchId===h;return r&&n&&s&&i&&o}),y=(e,t)=>{const r=CT(t);return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"HTG"===r.code?"USD":r.code,minimumFractionDigits:0}).format(e).replace("$",r.symbol)},b=e=>new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),N=e=>{const t=(e=>{const t={[TT.Pending]:{label:"En attente",color:"bg-yellow-100 text-yellow-800",icon:"Clock"},[TT.Approved]:{label:"Approuv\xe9",color:"bg-blue-100 text-blue-800",icon:"CheckCircle"},[TT.InTransit]:{label:"En transit",color:"bg-purple-100 text-purple-800",icon:"Truck"},[TT.Completed]:{label:"Termin\xe9",color:"bg-green-100 text-green-800",icon:"CheckCircle2"},[TT.Rejected]:{label:"Rejet\xe9",color:"bg-red-100 text-red-800",icon:"XCircle"},[TT.Cancelled]:{label:"Annul\xe9",color:"bg-gray-100 text-gray-800",icon:"X"}};return t[e]||t[TT.Pending]})(e);return(0,ju.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(t.color),children:t.label})},j=()=>{const e=new Map;return t.forEach(t=>{e.set(t.fromBranchId,t.fromBranchName),e.set(t.toBranchId,t.toBranchName)}),Array.from(e.entries())};return n?(0,ju.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ju.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Transferts Inter-Succursales"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"G\xe9rez les transferts de fonds entre succursales"})]}),(0,ju.jsxs)("button",{className:"mt-4 sm:mt-0 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,ju.jsx)(Au,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Nouveau Transfert"})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",{type:"text",placeholder:"Rechercher...",value:a,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(hm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",{value:l,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,ju.jsx)("option",{value:TT.Pending,children:"En attente"}),(0,ju.jsx)("option",{value:TT.Approved,children:"Approuv\xe9"}),(0,ju.jsx)("option",{value:TT.InTransit,children:"En transit"}),(0,ju.jsx)("option",{value:TT.Completed,children:"Termin\xe9"}),(0,ju.jsx)("option",{value:TT.Rejected,children:"Rejet\xe9"}),(0,ju.jsx)("option",{value:TT.Cancelled,children:"Annul\xe9"})]})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Du,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"all",children:"Toutes devises"}),(0,ju.jsx)("option",{value:AT.HTG,children:"HTG"}),(0,ju.jsx)("option",{value:AT.USD,children:"USD"})]})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",{value:u,onChange:e=>m("all"===e.target.value?"all":Number(e.target.value)),className:"w-full pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"all",children:"Toutes origines"}),j().map(e=>{let[t,r]=e;return(0,ju.jsx)("option",{value:t,children:r},t)})]})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",{value:h,onChange:e=>p("all"===e.target.value?"all":Number(e.target.value)),className:"w-full pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"all",children:"Toutes destinations"}),j().map(e=>{let[t,r]=e;return(0,ju.jsx)("option",{value:t,children:r},t)})]})]}),(0,ju.jsx)("button",{onClick:()=>{i(""),o("all"),d("all"),m("all"),p("all")},className:"px-4 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"R\xe9initialiser"})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Transferts"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(qA,{className:"h-6 w-6 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"En Attente"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:t.filter(e=>e.status===TT.Pending).length})]}),(0,ju.jsx)("div",{className:"p-3 bg-yellow-100 rounded-full",children:(0,ju.jsx)(Cu,{className:"h-6 w-6 text-yellow-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"En Transit"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:t.filter(e=>e.status===TT.InTransit).length})]}),(0,ju.jsx)("div",{className:"p-3 bg-purple-100 rounded-full",children:(0,ju.jsx)(ST,{className:"h-6 w-6 text-purple-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Termin\xe9s"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-green-600",children:t.filter(e=>e.status===TT.Completed).length})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(sT,{className:"h-6 w-6 text-green-600"})})]})})]}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:0===v.length?(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)(qA,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,ju.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucun transfert trouv\xe9"}),(0,ju.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:a||"all"!==l||"all"!==c?"Essayez de modifier vos crit\xe8res de recherche.":"Aucun transfert inter-succursales pour le moment."})]}):(0,ju.jsx)("div",{className:"divide-y divide-gray-200",children:v.map(e=>(0,ju.jsx)("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:(0,ju.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["#",e.transferNumber]}),N(e.status),(0,ju.jsx)("span",{className:"text-sm text-gray-500",children:CT(e.currency).code})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-3",children:[(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(Ku,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("div",{className:"font-medium",children:["De: ",e.fromBranchName]}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["Vers: ",e.toBranchName]})]})]}),(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(Du,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"font-medium",children:y(e.amount,e.currency)}),1!==e.exchangeRate&&(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["Taux: ",e.exchangeRate," | Converti: ",y(e.convertedAmount,e.currency)]})]})]}),(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(ym,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"font-medium",children:e.requestedByName||e.requestedBy}),(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:b(e.requestedAt||e.createdAt)})]})]}),(0,ju.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,ju.jsx)(pm,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"font-medium",children:e.reason}),e.referenceNumber&&(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["Ref: ",e.referenceNumber]})]})]})]}),e.notes&&(0,ju.jsxs)("div",{className:"text-sm text-gray-600 mb-3",children:[(0,ju.jsx)("span",{className:"font-medium",children:"Notes:"})," ",e.notes]}),x===e.id&&(0,ju.jsx)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"font-medium text-gray-700",children:"Date de cr\xe9ation:"}),(0,ju.jsx)("span",{className:"ml-2 text-gray-600",children:b(e.createdAt)})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"font-medium text-gray-700",children:"Derni\xe8re modification:"}),(0,ju.jsx)("span",{className:"ml-2 text-gray-600",children:b(e.updatedAt)})]}),e.approvedAt&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"font-medium text-gray-700",children:"Approuv\xe9 le:"}),(0,ju.jsx)("span",{className:"ml-2 text-gray-600",children:b(e.approvedAt)})]}),e.approvedByName&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"font-medium text-gray-700",children:"Approuv\xe9 par:"}),(0,ju.jsx)("span",{className:"ml-2 text-gray-600",children:e.approvedByName})]}),e.processedAt&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"font-medium text-gray-700",children:"Trait\xe9 le:"}),(0,ju.jsx)("span",{className:"ml-2 text-gray-600",children:b(e.processedAt)})]}),e.processedByName&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"font-medium text-gray-700",children:"Trait\xe9 par:"}),(0,ju.jsx)("span",{className:"ml-2 text-gray-600",children:e.processedByName})]}),e.trackingNumber&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("span",{className:"font-medium text-gray-700",children:"Num\xe9ro de suivi:"}),(0,ju.jsx)("span",{className:"ml-2 text-gray-600",children:e.trackingNumber})]})]})})]}),(0,ju.jsxs)("div",{className:"ml-4 flex items-center space-x-2",children:[(0,ju.jsx)("button",{onClick:()=>{return t=e.id,void f(x===t?null:t);var t},className:"p-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors",title:"Voir les d\xe9tails",children:(0,ju.jsx)(fi,{className:"h-4 w-4"})}),e.status===TT.Pending&&(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)("button",{className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",title:"Approuver",children:(0,ju.jsx)(Ju,{className:"h-4 w-4"})}),(0,ju.jsx)("button",{className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",title:"Rejeter",children:(0,ju.jsx)(Lp,{className:"h-4 w-4"})})]}),e.status===TT.Approved&&(0,ju.jsx)("button",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"Marquer comme en transit",children:(0,ju.jsx)(ST,{className:"h-4 w-4"})}),e.status===TT.InTransit&&(0,ju.jsx)("button",{className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",title:"Marquer comme termin\xe9",children:(0,ju.jsx)(sT,{className:"h-4 w-4"})})]})]})},e.id))})})]})},kT=()=>{const[t,r]=(0,e.useState)(null),[n,s]=(0,e.useState)(!0),[a,i]=(0,e.useState)([]),[l,o]=(0,e.useState)("all"),[c,d]=(0,e.useState)(""),[u,m]=(0,e.useState)("");(0,e.useEffect)(()=>{h(),p()},[]),(0,e.useEffect)(()=>{p()},[l,c,u]);const h=async()=>{try{const e=await Di.getAllBranches();i(e)}catch(Sc){console.error("Error loading branches:",Sc)}},p=async()=>{try{s(!0);const e=await Di.getConsolidatedTransferReport("all"===l?void 0:l,c||void 0,u||void 0);r(e)}catch(Sc){console.error("Error loading report:",Sc),Ts.error("Erreur lors du chargement du rapport")}finally{s(!1)}},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:AT.HTG;const r=CT(t);return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"HTG"===r.code?"USD":r.code,minimumFractionDigits:0}).format(e).replace("$",r.symbol)},f=e=>new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"});return n?(0,ju.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ju.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Rapport Consolid\xe9 des Transferts"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"Analyse des performances et statistiques des transferts inter-succursales"})]}),(0,ju.jsxs)("button",{className:"mt-4 sm:mt-0 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,ju.jsx)(zu,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Exporter"})]})]}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Succursale"}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",{value:l,onChange:e=>o("all"===e.target.value?"all":Number(e.target.value)),className:"w-full pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"all",children:"Toutes les succursales"}),a.map(e=>(0,ju.jsxs)("option",{value:e.id,children:[e.name," - ",e.commune]},e.id))]})]})]}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de d\xe9but"}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(pm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",{type:"date",value:c,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de fin"}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(pm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",{type:"date",value:u,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Transferts"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===t||void 0===t?void 0:t.totalSystemTransfers)||0})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(qA,{className:"h-6 w-6 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Transferts Actifs"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:(null===t||void 0===t?void 0:t.totalActiveTransfers)||0})]}),(0,ju.jsx)("div",{className:"p-3 bg-purple-100 rounded-full",children:(0,ju.jsx)(Yu,{className:"h-6 w-6 text-purple-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Volume Total HTG"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-green-600",children:x((null===t||void 0===t?void 0:t.branchSummaries.reduce((e,t)=>e+t.totalSent,0))||0,AT.HTG)})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(ku,{className:"h-6 w-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Volume Total USD"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:x((null===t||void 0===t?void 0:t.branchSummaries.reduce((e,t)=>e+t.totalReceived,0))||0,AT.USD)})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(rS,{className:"h-6 w-6 text-blue-600"})})]})})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,ju.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance par Succursale"})}),(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Succursale"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Envoy\xe9"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Re\xe7u"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transferts Actifs"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dernier Transfert"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===t||void 0===t?void 0:t.branchSummaries.map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)(Ku,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,ju.jsx)("div",{children:(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.branchName})})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x(e.totalSent)}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x(e.totalReceived)}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.pendingTransfers}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f(e.lastTransferDate)})]},e.branchId))})]})})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top 5 Succursales \xc9mettrices"}),(0,ju.jsx)("div",{className:"space-y-4",children:((null===t||void 0===t?void 0:t.branchSummaries.sort((e,t)=>t.totalSent-e.totalSent).slice(0,5))||[]).map((e,t)=>(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ju.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ju.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:["#",t+1]})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"font-medium text-gray-900",children:e.branchName}),(0,ju.jsxs)("p",{className:"text-sm text-gray-500",children:[e.pendingTransfers," actifs"]})]})]}),(0,ju.jsx)("div",{className:"text-right",children:(0,ju.jsx)("p",{className:"font-medium text-gray-900",children:x(e.totalSent)})})]},e.branchId))})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top 5 Succursales R\xe9ceptrices"}),(0,ju.jsx)("div",{className:"space-y-4",children:((null===t||void 0===t?void 0:t.branchSummaries.sort((e,t)=>t.totalReceived-e.totalReceived).slice(0,5))||[]).map((e,t)=>(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ju.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,ju.jsxs)("span",{className:"text-sm font-medium text-green-600",children:["#",t+1]})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"font-medium text-gray-900",children:e.branchName}),(0,ju.jsxs)("p",{className:"text-sm text-gray-500",children:[e.completedTransfers," termin\xe9s"]})]})]}),(0,ju.jsx)("div",{className:"text-right",children:(0,ju.jsx)("p",{className:"font-medium text-gray-900",children:x(e.totalReceived)})})]},e.branchId))})]})]}),(0,ju.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,ju.jsxs)("p",{className:"text-sm text-gray-600 text-center",children:["Rapport g\xe9n\xe9r\xe9 le ",t?f(t.reportGeneratedAt):"N/A"]})})]})},RT=()=>{var t,r;const[n,a]=(0,e.useState)([]),[i,l]=(0,e.useState)(!1),[o,c]=(0,e.useState)(!1),[d,u]=(0,e.useState)(!1),[m,h]=(0,e.useState)(!1),[p,x]=(0,e.useState)(""),[f,g]=(0,e.useState)({}),[v,y]=(0,e.useState)(null),[b,N]=(0,e.useState)([]),[j,w]=(0,e.useState)([]),[S,A]=(0,e.useState)([]),[T,C]=(0,e.useState)(1),[E,D]=(0,e.useState)(10),[k,R]=(0,e.useState)({accountNumber:"",type:0,amount:0,currency:0,description:"",customerPresent:!0,verificationMethod:"Pi\xe8ce d'identit\xe9",notes:""}),[_,I]=(0,e.useState)(null),[P,O]=(0,e.useState)(!1),[L,F]=(0,e.useState)(null);(0,e.useEffect)(()=>{const e=(k.accountNumber||"").trim();if(!e||12!==e.length)return I(null),F(null),void O(!1);let t=!1;const r=setTimeout(async()=>{try{var r,n;O(!0),F(null);const a=await Ei.getSavingsAccountByNumber(e);if(t)return;I(a);const i=(e=>{if(void 0===e||null===e)return 0;const t=String(e).toUpperCase();if("0"===t||"HTG"===t)return 0;if("1"===t||"USD"===t)return 1;const r=Number(e);return Number.isNaN(r)?0:r})(null!==(r=a&&(null!==(n=a.currency)&&void 0!==n?n:a.Currency))&&void 0!==r?r:0);R(e=>(0,s.A)((0,s.A)({},e),{},{currency:i}))}catch(a){if(t)return;I(null),F("Compte introuvable")}finally{t||O(!1)}},250);return()=>{t=!0,clearTimeout(r)}},[k.accountNumber]),(0,e.useEffect)(()=>{G(),V()},[f]),(0,e.useEffect)(()=>{C(1)},[p]),(0,e.useEffect)(()=>{(async()=>{try{const e=(await Ei.getAllBranches()||[]).map(e=>{var t,r,n,s,a,i,l,o;return{id:Number(null!==(t=null!==(r=e.id)&&void 0!==r?r:e.branchId)&&void 0!==t?t:e.BranchId),name:String(null!==(n=null!==(s=null!==(a=null!==(i=e.name)&&void 0!==i?i:e.branchName)&&void 0!==a?a:e.BranchName)&&void 0!==s?s:e.code)&&void 0!==n?n:"#".concat(null!==(l=null!==(o=e.id)&&void 0!==o?o:e.branchId)&&void 0!==l?l:e.BranchId))}}).filter(e=>!Number.isNaN(e.id));N(e)}catch(e){console.warn("Unable to load branches for display:",e)}})()},[]),(0,e.useEffect)(()=>{(async()=>{try{var e;const t=await(null===(e=Ei.getAllAdmins)||void 0===e?void 0:e.call(Ei,{page:1,pageSize:500})),r=((null===t||void 0===t?void 0:t.admins)||t||[]||[]).map(e=>({id:String(e.id),fullName:String(e.fullName||e.name||"")})).filter(e=>e.id&&e.fullName);w(r)}catch(t){console.warn("Unable to load admins for display:",t)}})()},[]),(0,e.useEffect)(()=>{(async()=>{try{var e,t,r,n;const s=await(null===(e=Ei.getEmployees)||void 0===e?void 0:e.call(Ei,{})),a=((Array.isArray(s)?s:null!==(t=null!==(r=null!==(n=null===s||void 0===s?void 0:s.employees)&&void 0!==n?n:null===s||void 0===s?void 0:s.items)&&void 0!==r?r:null===s||void 0===s?void 0:s.results)&&void 0!==t?t:[])||[]).map(e=>({id:String(e.id||e.employeeId||e.userId||""),fullName:String(e.fullName||[e.firstName,e.lastName].filter(Boolean).join(" ")||e.name||"")})).filter(e=>e.id&&e.fullName);A(a)}catch(s){console.warn("Unable to load employees for display:",s)}})()},[]);const M=(0,e.useMemo)(()=>{const e={};for(const t of b)e[t.id]=t.name;return e},[b]),U=(0,e.useMemo)(()=>{const e={};for(const t of j)e[t.id]=t.fullName;return e},[j]),B=(0,e.useMemo)(()=>{const e={};for(const t of S)e[t.id]=t.fullName;return e},[S]),H=e=>{const t=e;return t.branchName||t.BranchName||M[e.branchId]||(e.branchId?"#".concat(e.branchId):"\u2014")},z=e=>{if(!e&&0!==e)return"\u2014";const t=String(e);return U[t]?U[t]:B[t]?B[t]:/\s/.test(t)&&!/^\s*$/.test(t)?t:"\u2014"},G=async()=>{l(!0);try{const e=await Ei.getSavingsTransactions(f);a(e)}catch(Sc){console.error("Error loading transactions:",Sc),Ts.error("Erreur lors du chargement des transactions")}finally{l(!1)}},V=async()=>{try{const e=await Ei.getSavingsTransactionStatistics(f);y(e)}catch(Sc){console.error("Error loading statistics:",Sc)}},W=(e,t)=>{const r=q(t);return new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)+(r?" "+r:"")},q=e=>{if(void 0===e||null===e)return"";const t=String(e).toUpperCase();return"0"===t||"HTG"===t?"HTG":"1"===t||"USD"===t?"USD":t},$=e=>{const t=(e||"").toString().toLowerCase();return"deposit"===t||"openingdeposit"===t},K=e=>"withdrawal"===(e||"").toString().toLowerCase(),X=e=>{if(void 0===e||null===e)return"";const t=String(e).trim();if("0"===t)return"Deposit";if("1"===t)return"Withdrawal";if("2"===t)return"Interest";if("3"===t)return"OpeningDeposit";const r=t.replace(/\s+/g,"").toLowerCase();return"deposit"===r?"Deposit":"withdrawal"===r?"Withdrawal":"interest"===r?"Interest":"openingdeposit"===r||"initialdeposit"===r?"OpeningDeposit":t},Y=e=>{if(void 0===e||null===e)return"";const t=String(e).trim().toUpperCase();return"0"===t?"Pending":"1"===t?"Processing":"2"===t?"Completed":"3"===t?"Cancelled":"4"===t?"Failed":"COMPLETED"===t?"Completed":"PENDING"===t?"Pending":"PROCESSING"===t||"IN_PROGRESS"===t?"Processing":"CANCELLED"===t||"CANCELED"===t?"Cancelled":"FAILED"===t||"ERROR"===t?"Failed":t.charAt(0)+t.slice(1).toLowerCase()},J=e=>{switch(e){case"Completed":return"Compl\xe9t\xe9";case"Pending":return"En attente";case"Processing":return"En cours";case"Cancelled":return"Annul\xe9";case"Failed":return"\xc9chou\xe9";default:return e||""}},Z=(0,e.useMemo)(()=>{const e={deposits:{HTG:0,USD:0},withdrawals:{HTG:0,USD:0}};if(null===n||void 0===n||!n.length)return e;const t=(new Date).toDateString();for(const r of n){if(null===r||void 0===r||!r.processedAt)continue;if(new Date(r.processedAt).toDateString()!==t)continue;const n=q(r.currency);if("HTG"!==n&&"USD"!==n)continue;const s=Math.max(0,Number(r.amount||0));if(0===s)continue;const a=X(r.type);$(a)?e.deposits[n]+=s:K(a)&&(e.withdrawals[n]+=s)}return e},[n]),Q=e=>"Deposit"===e||"OpeningDeposit"===e?(0,ju.jsx)(Lu,{className:"h-4 w-4"}):"Withdrawal"===e?(0,ju.jsx)(Op,{className:"h-4 w-4"}):"Interest"===e?(0,ju.jsx)(ku,{className:"h-4 w-4"}):(0,ju.jsx)(Du,{className:"h-4 w-4"}),ee=e=>"Completed"===e?(0,ju.jsx)(Ju,{className:"h-4 w-4"}):"Pending"===e?(0,ju.jsx)(Cu,{className:"h-4 w-4"}):"Processing"===e?(0,ju.jsx)(Eu,{className:"h-4 w-4 animate-spin"}):"Cancelled"===e?(0,ju.jsx)(Lp,{className:"h-4 w-4"}):(0,ju.jsx)(Su,{className:"h-4 w-4"}),te=n.filter(e=>e.accountNumber.toLowerCase().includes(p.toLowerCase())||e.reference.toLowerCase().includes(p.toLowerCase())||e.description.toLowerCase().includes(p.toLowerCase())),re=te.length,ne=Math.ceil(re/E),se=te.slice((T-1)*E,T*E);return(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white border border-green-200 p-6 rounded-xl shadow-sm",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Total D\xe9p\xf4ts HTG"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:W(Z.deposits.HTG,"HTG")}),(0,ju.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"Pour aujourd'hui"})]}),(0,ju.jsx)(Lu,{className:"h-10 w-10 text-green-600"})]})}),(0,ju.jsx)("div",{className:"bg-white border border-green-200 p-6 rounded-xl shadow-sm",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Total D\xe9p\xf4ts USD"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:W(Z.deposits.USD,"USD")}),(0,ju.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"Pour aujourd'hui"})]}),(0,ju.jsx)(Lu,{className:"h-10 w-10 text-green-600"})]})}),(0,ju.jsx)("div",{className:"bg-white border border-red-200 p-6 rounded-xl shadow-sm",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Total Retraits HTG"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:W(Z.withdrawals.HTG,"HTG")}),(0,ju.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"Pour aujourd'hui"})]}),(0,ju.jsx)(Op,{className:"h-10 w-10 text-red-600"})]})}),(0,ju.jsx)("div",{className:"bg-white border border-red-200 p-6 rounded-xl shadow-sm",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Total Retraits USD"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:W(Z.withdrawals.USD,"USD")}),(0,ju.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"Pour aujourd'hui"})]}),(0,ju.jsx)(Op,{className:"h-10 w-10 text-red-600"})]})})]}),(0,ju.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsxs)("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[(0,ju.jsx)("div",{className:"flex-1 min-w-[300px]",children:(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,ju.jsx)("input",{type:"text",placeholder:"Rechercher par compte, r\xe9f\xe9rence ou description...",value:p,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,ju.jsxs)("div",{className:"flex gap-2",children:[(0,ju.jsxs)("button",{onClick:()=>c(!o),className:"px-4 py-2 rounded-lg border-2 transition-colors flex items-center gap-2 ".concat(o?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-300 hover:border-blue-500"),children:[(0,ju.jsx)(hm,{className:"h-4 w-4"}),"Filtres",o?(0,ju.jsx)(fm,{className:"h-4 w-4"}):(0,ju.jsx)(gm,{className:"h-4 w-4"})]}),(0,ju.jsxs)("button",{onClick:G,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors flex items-center gap-2",children:[(0,ju.jsx)(Eu,{className:"h-4 w-4"}),"Actualiser"]}),(0,ju.jsxs)("div",{className:"hidden sm:flex items-center gap-2",children:[(0,ju.jsxs)("button",{onClick:()=>(()=>{try{const e=te.map(e=>({id:e.id,date:e.processedAt,reference:e.reference,accountNumber:e.accountNumber,type:e.type,amount:e.amount,currency:e.currency,processedBy:z(e.processedBy),branch:H(e),status:e.status})),t=(0,Rp.unparse)(e),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download="transactions_savings_".concat((new Date).toISOString().slice(0,10),".csv"),s.click(),URL.revokeObjectURL(n)}catch(e){console.error(e),Ts.error("Erreur lors de l'export CSV")}})(),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors flex items-center gap-2",title:"Exporter CSV",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"})," CSV"]}),(0,ju.jsxs)("button",{onClick:()=>(()=>{try{const e=te.map(e=>({Date:e.processedAt,Reference:e.reference,Compte:e.accountNumber,Type:e.type,Montant:e.amount,Devise:e.currency,Statut:e.status,TraitePar:z(e.processedBy),Succursale:H(e)})),t=Aw.json_to_sheet(e),r=Aw.book_new();Aw.book_append_sheet(r,t,"Transactions"),hw(r,"transactions_savings_".concat((new Date).toISOString().slice(0,10),".xlsx"))}catch(e){console.error(e),Ts.error("Erreur lors de l'export Excel")}})(),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors flex items-center gap-2",title:"Exporter Excel",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"})," XLSX"]}),(0,ju.jsxs)("button",{onClick:()=>(()=>{try{const e=window.open("","_blank");if(!e)return void Ts.error("Veuillez autoriser les pop-ups pour exporter en PDF");const t=te.map(e=>'\n        <tr>\n          <td style="padding:8px;border:1px solid #ddd">'.concat(new Date(e.processedAt).toLocaleString("fr-FR"),'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.reference,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.accountNumber,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(z(e.processedBy),'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(H(e),'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.type,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.amount,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.currency,'</td>\n          <td style="padding:8px;border:1px solid #ddd">').concat(e.status,"</td>\n        </tr>\n      ")).join(""),r='\n        <html><head><meta charset="utf-8"><title>Transactions \xc9pargne</title>\n        <style>table{border-collapse:collapse;width:100%;font-family:Arial,Helvetica,sans-serif}th,td{border:1px solid #ddd;padding:8px}th{background:#f3f4f6;text-align:left}</style>\n        </head><body>\n        <h2>Liste Transactions \xc9pargne</h2>\n        <p>Export\xe9 le '.concat((new Date).toLocaleString("fr-FR"),"</p>\n        <table>\n          <thead><tr><th>Date</th><th>Ref</th><th>Compte</th><th>Par</th><th>Succursale</th><th>Type</th><th>Montant</th><th>Devise</th><th>Statut</th></tr></thead>\n          <tbody>").concat(t,"</tbody>\n        </table>\n        <script>window.onload = ()=>{ setTimeout(()=>{ window.print(); },300); };<\/script>\n        </body></html>\n      ");e.document.write(r),e.document.close(),Ts.success("Fen\xeatre d'export ouverte - utilisez Imprimer pour sauver en PDF")}catch(e){console.error(e),Ts.error("Erreur lors de l'export PDF")}})(),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors flex items-center gap-2",title:"Exporter PDF",children:[(0,ju.jsx)(zu,{className:"h-4 w-4"})," PDF"]})]}),(0,ju.jsxs)("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,ju.jsx)(Du,{className:"h-4 w-4"}),"Nouvelle Transaction"]})]})]}),o&&(0,ju.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,ju.jsxs)("select",{value:null!==(t=f.type)&&void 0!==t?t:"",onChange:e=>g((0,s.A)((0,s.A)({},f),{},{type:e.target.value?parseInt(e.target.value):void 0})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"Tous types"}),(0,ju.jsx)("option",{value:"0",children:"D\xe9p\xf4t"}),(0,ju.jsx)("option",{value:"1",children:"Retrait"}),(0,ju.jsx)("option",{value:"2",children:"Int\xe9r\xeat"})]}),(0,ju.jsx)("input",{type:"date",value:f.dateFrom||"",onChange:e=>g((0,s.A)((0,s.A)({},f),{},{dateFrom:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,ju.jsx)("input",{type:"date",value:f.dateTo||"",onChange:e=>g((0,s.A)((0,s.A)({},f),{},{dateTo:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,ju.jsxs)("select",{value:null!==(r=f.branchId)&&void 0!==r?r:"",onChange:e=>g((0,s.A)((0,s.A)({},f),{},{branchId:e.target.value?parseInt(e.target.value):void 0})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"Toutes succursales"}),b.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,ju.jsx)("button",{onClick:()=>g({}),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"R\xe9initialiser"})]})]}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:i?(0,ju.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,ju.jsx)(Eu,{className:"h-8 w-8 text-blue-600 animate-spin"})}):0===te.length?(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)(Hu,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,ju.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune transaction trouv\xe9e"}),(0,ju.jsx)("p",{className:"text-gray-500",children:"Essayez de modifier vos crit\xe8res de recherche"})]}):(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date/Heure"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"R\xe9f\xe9rence"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Compte"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Par"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Succursale"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Montant"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Solde Avant"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Solde Apr\xe8s"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:se.map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:new Date(e.processedAt).toLocaleDateString("fr-FR")}),(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.processedAt).toLocaleTimeString("fr-FR")})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900",children:e.reference}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.accountNumber}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z(e.processedBy)}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:H(e)}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(()=>{const t=X(e.type);return(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((r=t,"Deposit"===r||"OpeningDeposit"===r?"bg-green-100 text-green-800":"Withdrawal"===r?"bg-red-100 text-red-800":"Interest"===r?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800")),children:[Q(t),"Deposit"===t?"D\xe9p\xf4t":"OpeningDeposit"===t?"D\xe9p\xf4t initial":"Withdrawal"===t?"Retrait":"Interest"===t?"Int\xe9r\xeat":t]});var r})()}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(()=>{const t=X(e.type),r=$(t)||"Interest"===t;return(0,ju.jsxs)("div",{className:"text-sm font-semibold ".concat(r?"text-green-600":"text-red-600"),children:[r?"+":"-",W(e.amount,e.currency)]})})()}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900",children:W(e.balanceBefore,e.currency)}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900",children:W(e.balanceAfter,e.currency)}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(()=>{const t=Y(e.status);return(0,ju.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((r=t,"Completed"===r?"bg-green-100 text-green-800":"Pending"===r?"bg-yellow-100 text-yellow-800":"Processing"===r?"bg-blue-100 text-blue-800":"Cancelled"===r?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800")),children:[ee(t),J(t)]});var r})()}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,ju.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,ju.jsx)("button",{onClick:()=>(async e=>{try{const t=await Ei.generateSavingsTransactionReceipt(e);console.log("Receipt:",t),Ts.success("Re\xe7u g\xe9n\xe9r\xe9")}catch(Sc){Ts.error("Erreur lors de la g\xe9n\xe9ration du re\xe7u")}})(e.id),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Imprimer",children:(0,ju.jsx)(Fp,{className:"h-4 w-4"})}),"Completed"===Y(e.status)&&(0,ju.jsx)("button",{onClick:()=>(async e=>{const t=prompt("Raison de l'annulation:");if(t)try{await Ei.cancelSavingsTransaction(e,t),Ts.success("Transaction annul\xe9e avec succ\xe8s"),G()}catch(Sc){Ts.error("Erreur lors de l'annulation")}})(e.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Annuler",children:(0,ju.jsx)(Lp,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),re>0&&(0,ju.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,ju.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,ju.jsx)("button",{onClick:()=>C(Math.max(1,T-1)),disabled:1===T,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Pr\xe9c\xe9dent"}),(0,ju.jsx)("button",{onClick:()=>C(Math.min(ne,T+1)),disabled:T===ne,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Suivant"})]}),(0,ju.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("label",{htmlFor:"pageSize",className:"text-sm text-gray-700",children:"\xc9l\xe9ments par page:"}),(0,ju.jsxs)("select",{id:"pageSize",value:E,onChange:e=>{D(Number(e.target.value)),C(1)},className:"border border-gray-300 rounded-md px-2 py-1 text-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,ju.jsx)("option",{value:5,children:"5"}),(0,ju.jsx)("option",{value:10,children:"10"}),(0,ju.jsx)("option",{value:25,children:"25"}),(0,ju.jsx)("option",{value:50,children:"50"})]})]}),(0,ju.jsxs)("div",{className:"text-sm text-gray-700",children:["Affichage de ",Math.min((T-1)*E+1,re)," \xe0 ",Math.min(T*E,re)," sur ",re," r\xe9sultats"]})]}),(0,ju.jsx)("div",{children:(0,ju.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,ju.jsxs)("button",{onClick:()=>C(Math.max(1,T-1)),disabled:1===T,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,ju.jsx)("span",{className:"sr-only",children:"Pr\xe9c\xe9dent"}),(0,ju.jsx)(fm,{className:"h-5 w-5 rotate-[-90deg]"})]}),(0,ju.jsxs)("div",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:["Page ",T," sur ",ne]}),(0,ju.jsxs)("button",{onClick:()=>C(Math.min(ne,T+1)),disabled:T===ne,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,ju.jsx)("span",{className:"sr-only",children:"Suivant"}),(0,ju.jsx)(fm,{className:"h-5 w-5 rotate-90"})]})]})})]})]}),d&&(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start md:items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] flex flex-col p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ju.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Nouvelle Transaction"}),(0,ju.jsx)("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600",children:(0,ju.jsx)(Lp,{className:"h-6 w-6"})})]}),(0,ju.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,ju.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),m)return;const t=(k.accountNumber||"").trim(),r=(k.description||"").trim(),n=(k.verificationMethod||"").trim(),s=(k.notes||"").trim(),a=Number(k.amount),i=Number(k.type),l=Number(k.currency);if(!t||12!==t.length)return void Ts.error("Num\xe9ro de compte invalide (12 caract\xe8res requis)");if(!isFinite(a)||a<=0)return void Ts.error("Veuillez saisir un montant valide (> 0)");if(!n)return void Ts.error("Veuillez s\xe9lectionner une m\xe9thode de v\xe9rification");const o={accountNumber:t,amount:a,type:i,currency:l,customerPresent:Boolean(k.customerPresent),verificationMethod:n};r&&(o.description=r),s&&(o.notes=s);try{var c,d,p,x,f,g,v,y,b,N,j,w;const e=await Ei.getSavingsAccountByNumber(t),r=(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.accountId)||(null===e||void 0===e?void 0:e.accountNumber)||t,n=(e,t)=>{var r,n,s,a;const i=null!==(r=null!==(n=null===e||void 0===e||null===(s=e.accountLimits)||void 0===s?void 0:s[t])&&void 0!==n?n:null===e||void 0===e?void 0:e[t])&&void 0!==r?r:null===e||void 0===e||null===(a=e.AccountLimits)||void 0===a?void 0:a[t];return void 0===i||null===i?void 0:Number(i)},s=null!==(c=n(e,"dailyDepositLimit"))&&void 0!==c?c:n(e,"DailyDepositLimit"),o=null!==(d=n(e,"dailyWithdrawalLimit"))&&void 0!==d?d:n(e,"DailyWithdrawalLimit"),u=null!==(p=n(e,"monthlyWithdrawalLimit"))&&void 0!==p?p:n(e,"MonthlyWithdrawalLimit"),m=null!==(x=n(e,"maxWithdrawalAmount"))&&void 0!==x?x:n(e,"MaxWithdrawalAmount"),h=null!==(f=n(e,"minWithdrawalAmount"))&&void 0!==f?f:n(e,"MinWithdrawalAmount"),k=null!==(g=n(e,"maxBalance"))&&void 0!==g?g:n(e,"MaxBalance"),R=null!==(v=null!==(y=null!==(b=n(e,"minimumBalance"))&&void 0!==b?b:n(e,"MinimumBalance"))&&void 0!==y?y:null===e||void 0===e?void 0:e.minimumBalance)&&void 0!==v?v:0,M=Number(null!==(N=null===e||void 0===e?void 0:e.balance)&&void 0!==N?N:0),B=Number(null!==(j=null!==(w=null===e||void 0===e?void 0:e.availableBalance)&&void 0!==w?w:null===e||void 0===e?void 0:e.balance)&&void 0!==j?j:0),H=(new Date).toISOString().slice(0,10);if(0===i){if(void 0!==k&&!Number.isNaN(k)&&M+a>k)return void Ts.error("Solde maximum d\xe9pass\xe9. Limite: ".concat(W(k,q(l))));if(void 0!==s&&!Number.isNaN(s))try{var S,A,T,C;const e=await Ei.getSavingsDailyTransactionTotal(r,0,H),t=e&&(null!==(S=null!==(A=e.total)&&void 0!==A?A:e.amount)&&void 0!==S?S:e.value)?Number(null!==(T=null!==(C=e.total)&&void 0!==C?C:e.amount)&&void 0!==T?T:e.value):Number(e||0),n=s-(Number(t)||0);if(n<a)return void Ts.error("Limite quotidienne de d\xe9p\xf4t d\xe9pass\xe9e. Limite: ".concat(W(s,q(l))," \u2014 Reste: ").concat(W(Math.max(0,n),q(l))))}catch(U){console.warn("Could not fetch daily deposit total:",U)}}if(1===i){if(B-a<(R||0))return void Ts.error("Solde insuffisant ou d\xe9passer le solde minimum requis");if(void 0!==m&&!Number.isNaN(m)&&a>m)return void Ts.error("Montant maximum de retrait: ".concat(W(Number(m),q(l))));if(void 0!==h&&!Number.isNaN(h)&&a<h)return void Ts.error("Montant minimum de retrait: ".concat(W(Number(h),q(l))));if(void 0!==o&&!Number.isNaN(o))try{var E,D,_,I;const e=await Ei.getSavingsDailyTransactionTotal(r,1,H),t=e&&(null!==(E=null!==(D=e.total)&&void 0!==D?D:e.amount)&&void 0!==E?E:e.value)?Number(null!==(_=null!==(I=e.total)&&void 0!==I?I:e.amount)&&void 0!==_?_:e.value):Number(e||0),n=o-(Number(t)||0);if(n<a)return void Ts.error("Limite quotidienne de retrait d\xe9pass\xe9e. Limite: ".concat(W(o,q(l))," \u2014 Reste: ").concat(W(Math.max(0,n),q(l))))}catch(U){console.warn("Could not fetch daily withdrawal total:",U)}if(void 0!==u&&!Number.isNaN(u))try{var P,O,L,F;const e=await Ei.getSavingsMonthlyTransactionTotal(r,1,H),t=e&&(null!==(P=null!==(O=e.total)&&void 0!==O?O:e.amount)&&void 0!==P?P:e.value)?Number(null!==(L=null!==(F=e.total)&&void 0!==F?F:e.amount)&&void 0!==L?L:e.value):Number(e||0),n=u-(Number(t)||0);if(n<a)return void Ts.error("Limite mensuelle de retrait d\xe9pass\xe9e. Limite: ".concat(W(u,q(l))," \u2014 Reste: ").concat(W(Math.max(0,n),q(l))))}catch(U){console.warn("Could not fetch monthly withdrawal total:",U)}}}catch(B){console.warn("Could not fetch account for pre-checks:",B)}try{h(!0),await Ei.processSavingsTransaction(o),Ts.success("Transaction trait\xe9e avec succ\xe8s"),u(!1),R({accountNumber:"",type:0,amount:0,currency:0,description:"",customerPresent:!0,verificationMethod:"Pi\xe8ce d'identit\xe9",notes:""}),G(),V()}catch(Sc){var M;const t=null===Sc||void 0===Sc||null===(M=Sc.response)||void 0===M?void 0:M.data;let r=(null===t||void 0===t?void 0:t.message)||(null===Sc||void 0===Sc?void 0:Sc.message)||"Erreur lors du traitement";if(null!==t&&void 0!==t&&t.errors&&"object"===typeof t.errors){const e=[];for(const r of Object.keys(t.errors)){const n=t.errors[r];Array.isArray(n)&&e.push(...n)}e.length&&(r=e.join("\n"))}Ts.error(r)}finally{h(!1)}},className:"space-y-3",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Num\xe9ro de compte"}),(0,ju.jsx)("input",{type:"text",value:k.accountNumber,onChange:e=>R((0,s.A)((0,s.A)({},k),{},{accountNumber:e.target.value})),disabled:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:opacity-50",placeholder:"Ex: 200100000001",required:!0}),(0,ju.jsxs)("div",{className:"mt-1 min-h-[20px]",children:[P&&(0,ju.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,ju.jsx)(Eu,{className:"h-3.5 w-3.5 animate-spin"}),"Recherche du compte..."]}),!P&&_&&(0,ju.jsxs)("div",{className:"flex items-center gap-2 text-xs text-blue-700",children:[(0,ju.jsx)(ym,{className:"h-3.5 w-3.5"}),(0,ju.jsx)("span",{className:"font-medium",children:"Titulaire du compte:"}),(0,ju.jsx)("span",{children:String(_.customerName||_.accountHolder||_.ownerName||"\u2014")})]}),!P&&!_&&L&&(0,ju.jsx)("div",{className:"text-xs text-red-600",children:L})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,ju.jsxs)("select",{value:k.type,onChange:e=>R((0,s.A)((0,s.A)({},k),{},{type:parseInt(e.target.value)})),disabled:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:opacity-50",required:!0,children:[(0,ju.jsx)("option",{value:0,children:"D\xe9p\xf4t"}),(0,ju.jsx)("option",{value:1,children:"Retrait"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Devise"}),(0,ju.jsxs)("select",{value:k.currency,onChange:e=>R((0,s.A)((0,s.A)({},k),{},{currency:parseInt(e.target.value)})),disabled:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:opacity-50",required:!0,children:[(0,ju.jsx)("option",{value:0,children:"HTG"}),(0,ju.jsx)("option",{value:1,children:"USD"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant"}),(0,ju.jsx)("input",{type:"number",step:"0.01",min:"0",value:k.amount||"",onChange:e=>R((0,s.A)((0,s.A)({},k),{},{amount:parseFloat(e.target.value)})),disabled:m,inputMode:"decimal",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:opacity-50",placeholder:"0.00",required:!0})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optionnel)"}),(0,ju.jsx)("textarea",{value:k.description,onChange:e=>R((0,s.A)((0,s.A)({},k),{},{description:e.target.value})),disabled:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:opacity-50",rows:3,placeholder:"Description..."})]}),(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("input",{id:"cust-present",type:"checkbox",checked:k.customerPresent,onChange:e=>R((0,s.A)((0,s.A)({},k),{},{customerPresent:e.target.checked})),disabled:m,className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),(0,ju.jsx)("label",{htmlFor:"cust-present",className:"text-sm text-gray-700",children:"Client pr\xe9sent"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe9thode de v\xe9rification"}),(0,ju.jsxs)("select",{value:k.verificationMethod,onChange:e=>R((0,s.A)((0,s.A)({},k),{},{verificationMethod:e.target.value})),disabled:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:opacity-50",required:!0,children:[(0,ju.jsx)("option",{value:"Pi\xe8ce d'identit\xe9",children:"Pi\xe8ce d'identit\xe9"}),(0,ju.jsx)("option",{value:"PIN",children:"PIN"}),(0,ju.jsx)("option",{value:"Signature",children:"Signature"}),(0,ju.jsx)("option",{value:"Photo",children:"Photo"}),(0,ju.jsx)("option",{value:"Autre",children:"Autre"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (optionnel)"}),(0,ju.jsx)("textarea",{value:k.notes,onChange:e=>R((0,s.A)((0,s.A)({},k),{},{notes:e.target.value})),disabled:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:opacity-50",rows:2,placeholder:"Notes internes..."})]}),(0,ju.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ju.jsx)("button",{type:"button",onClick:()=>u(!1),disabled:m,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"Annuler"}),(0,ju.jsx)("button",{type:"submit",disabled:m,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:m?"Traitement...":"Traiter"})]})]})})]})})]})},_T=()=>{const[t,r]=(0,e.useState)(!1),[n,a]=(0,e.useState)("summary"),[i,l]=(0,e.useState)("month"),[o,c]=(0,e.useState)({}),[d,u]=(0,e.useState)({startDate:"",endDate:""}),[m,h]=(0,e.useState)({currency:"",branchId:"",status:"",accountNumber:"",txType:""}),[p,x]=(0,e.useState)([]),[f,g]=(0,e.useState)(1e3);(0,e.useEffect)(()=>{(async()=>{try{const e=(await Ei.getAllBranches()||[]).map(e=>{var t,r,n,s,a,i,l,o;return{id:Number(null!==(t=null!==(r=e.id)&&void 0!==r?r:e.branchId)&&void 0!==t?t:e.BranchId),name:String(null!==(n=null!==(s=null!==(a=null!==(i=e.name)&&void 0!==i?i:e.branchName)&&void 0!==a?a:e.BranchName)&&void 0!==s?s:e.code)&&void 0!==n?n:"#".concat(null!==(l=null!==(o=e.id)&&void 0!==o?o:e.branchId)&&void 0!==l?l:e.BranchId))}}).filter(e=>!Number.isNaN(e.id));x(e)}catch(e){}})(),v()},[]),(0,e.useEffect)(()=>{v()},[n,i,JSON.stringify(m),d.startDate,d.endDate]);const v=async()=>{r(!0);try{var e;const t={branchId:m.branchId?Number(m.branchId):void 0,currency:""!==m.currency?Number(m.currency):void 0,status:""!==m.status?Number(m.status):void 0,accountNumber:null!==(e=m.accountNumber)&&void 0!==e&&e.trim()?m.accountNumber.trim():void 0},r={branchId:m.branchId?Number(m.branchId):void 0,type:""!==m.txType?Number(m.txType):void 0};let a,l,o=(0,s.A)({},m);if("custom"===i&&d.startDate&&d.endDate)a=d.startDate,l=d.endDate;else if("all"!==i){const e=new Date,t=new Date;switch(i){case"day":t.setDate(t.getDate()-1);break;case"week":t.setDate(t.getDate()-7);break;case"month":t.setMonth(t.getMonth()-1);break;case"quarter":t.setMonth(t.getMonth()-3);break;case"year":t.setFullYear(t.getFullYear()-1)}a=t.toISOString().split("T")[0],l=e.toISOString().split("T")[0]}else{const e=new Date;a=new Date(2e3,0,1).toISOString().split("T")[0],l=e.toISOString().split("T")[0]}if(o.startDate=a,o.endDate=l,"summary"===n){let[e,n]=await Promise.all([Ei.getSavingsAccounts((0,s.A)((0,s.A)({},t),{},{page:1,pageSize:1e3})),Ei.getSavingsTransactions((0,s.A)((0,s.A)({},r),{},{accountId:void 0,dateFrom:a,dateTo:l,page:1,pageSize:500}))]);if(m.accountNumber){const t=String(m.accountNumber).trim().toLowerCase();e=e.filter(e=>String(e.accountNumber).toLowerCase().includes(t)),n=n.filter(e=>String(e.accountNumber).toLowerCase().includes(t))}const i=Array.isArray(e)?e:[],o=Array.isArray(n)?n:[],d=i.filter(e=>"Active"===("number"===typeof e.status?{0:"Active",1:"Inactive",2:"Closed",3:"Suspended"}[e.status]:e.status)),u=i.reduce((e,t)=>e+Number(t.balance||0),0),h=o.filter(e=>String(e.type).toLowerCase().includes("deposit")||"0"===String(e.type)),p=o.filter(e=>String(e.type).toLowerCase().includes("withdrawal")||"1"===String(e.type)),x=o.filter(e=>String(e.type).toLowerCase().includes("interest")||"2"===String(e.type)),f=new Date,g=new Date(f.getFullYear(),f.getMonth(),1),v=e=>e.openedDate||e.openingDate||e.createdAt||"",y=e=>e.closedDate||e.ClosedDate||"",b=i.filter(e=>{const t=v(e);return!!t&&new Date(t)>=g}).length,N=i.filter(e=>{const t=y(e);return!!t&&new Date(t)>=g}).length;c({totalAccounts:e.length,activeAccounts:d.length,totalBalance:u,totalDeposits:h.reduce((e,t)=>e+t.amount,0),totalWithdrawals:p.reduce((e,t)=>e+t.amount,0),totalInterest:x.reduce((e,t)=>e+t.amount,0),avgBalance:u/(e.length||1),newAccountsThisMonth:b,closedAccountsThisMonth:N,accounts:e,transactions:n})}else if("accounts"===n){let e=await Ei.getSavingsAccounts((0,s.A)((0,s.A)({},t),{},{page:1,pageSize:1e3}));if(m.accountNumber){const t=String(m.accountNumber).trim().toLowerCase();e=e.filter(e=>String(e.accountNumber).toLowerCase().includes(t))}const r=e=>"number"===typeof e?{0:"Active",1:"Inactive",2:"Closed",3:"Suspended"}[e]||"Inactive":String(e),n=[{name:"Actif",value:e.filter(e=>"Active"===r(e.status)).length},{name:"Inactif",value:e.filter(e=>"Inactive"===r(e.status)).length},{name:"Ferm\xe9",value:e.filter(e=>"Closed"===r(e.status)).length},{name:"Suspendu",value:e.filter(e=>"Suspended"===r(e.status)).length}];c({accountsByStatus:n,accounts:e})}else if("transactions"===n){let e=await Ei.getSavingsTransactions((0,s.A)((0,s.A)({},r),{},{accountId:void 0,dateFrom:a,dateTo:l,page:1,pageSize:1e3}));if(m.accountNumber){const t=String(m.accountNumber).trim().toLowerCase();e=e.filter(e=>String(e.accountNumber).toLowerCase().includes(t))}const t=[{name:"D\xe9p\xf4ts",value:e.filter(e=>"Deposit"===e.type).length},{name:"Retraits",value:e.filter(e=>"Withdrawal"===e.type).length},{name:"Int\xe9r\xeats",value:e.filter(e=>"Interest"===e.type).length},{name:"Frais",value:e.filter(e=>"Fee"===e.type).length}];c({transactionsByType:t,transactions:e})}}catch(Sc){var t,a;const r=(null===Sc||void 0===Sc||null===(t=Sc.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||(null===Sc||void 0===Sc?void 0:Sc.message)||"";console.error("Error loading report data:",r||Sc),Ts.error("Erreur lors du chargement du rapport".concat(r?": ".concat(r):""))}finally{r(!1)}},y=e=>{const t=String(e).toUpperCase();return"0"===t||"HTG"===t?"HTG":"1"===t||"USD"===t?"USD":t},b=e=>{const t=String(e).trim().toLowerCase().replace(/\s+/g,"");return"0"===t||"deposit"===t?"D\xe9p\xf4t":"1"===t||"withdrawal"===t?"Retrait":"2"===t||"interest"===t?"Int\xe9r\xeat":String(e)},N=e=>{if("number"===typeof e){return{0:"Active",1:"Inactive",2:"Closed",3:"Suspended"}[e]||"Inactive"}return String(e||"").trim()||"Inactive"},j=e=>{const t=N(e);return"Active"===t?"bg-green-100 text-green-800":"Inactive"===t?"bg-gray-100 text-gray-700":"Closed"===t?"bg-red-100 text-red-700":"Suspended"===t?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-700"},w=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR")},S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTG";return new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)+" "+t},A=()=>{switch(i){case"day":return"Aujourd'hui";case"week":return"7 derniers jours";case"month":return"30 derniers jours";case"quarter":return"3 derniers mois";case"year":return"Derni\xe8re ann\xe9e";case"all":return"Toute la p\xe9riode";case"custom":return"P\xe9riode personnalis\xe9e";default:return""}};return(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsx)("div",{className:"flex justify-between items-start",children:(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Rapports et Statistiques"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"Analyses d\xe9taill\xe9es des comptes d \xe9pargne"})]})}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de rapport"}),(0,ju.jsxs)("select",{value:n,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"summary",children:"R\xe9sum\xe9 g\xe9n\xe9ral"}),(0,ju.jsx)("option",{value:"accounts",children:"Rapport des comptes"}),(0,ju.jsx)("option",{value:"transactions",children:"Rapport des transactions"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"P\xe9riode"}),(0,ju.jsxs)("select",{value:i,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"day",children:"Aujourd hui"}),(0,ju.jsx)("option",{value:"week",children:"7 derniers jours"}),(0,ju.jsx)("option",{value:"month",children:"30 derniers jours"}),(0,ju.jsx)("option",{value:"quarter",children:"3 derniers mois"}),(0,ju.jsx)("option",{value:"year",children:"Derni\xe8re ann\xe9e"}),(0,ju.jsx)("option",{value:"all",children:"Toute la p\xe9riode"}),(0,ju.jsx)("option",{value:"custom",children:"Personnalis\xe9e"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Devise"}),(0,ju.jsxs)("select",{value:m.currency,onChange:e=>h((0,s.A)((0,s.A)({},m),{},{currency:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"Toutes"}),(0,ju.jsx)("option",{value:"0",children:"HTG"}),(0,ju.jsx)("option",{value:"1",children:"USD"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N\xb0 de compte"}),(0,ju.jsx)("input",{type:"text",value:m.accountNumber,onChange:e=>h((0,s.A)((0,s.A)({},m),{},{accountNumber:e.target.value})),placeholder:"Ex: 200100000001",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Succursale"}),(0,ju.jsxs)("select",{value:m.branchId,onChange:e=>h((0,s.A)((0,s.A)({},m),{},{branchId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"Toutes"}),p.map(e=>(0,ju.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),"transactions"===n&&(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de transaction"}),(0,ju.jsxs)("select",{value:m.txType,onChange:e=>h((0,s.A)((0,s.A)({},m),{},{txType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ju.jsx)("option",{value:"",children:"Tous"}),(0,ju.jsx)("option",{value:"0",children:"D\xe9p\xf4t"}),(0,ju.jsx)("option",{value:"1",children:"Retrait"}),(0,ju.jsx)("option",{value:"2",children:"Int\xe9r\xeat"})]})]}),(0,ju.jsx)("div",{className:"flex items-end",children:(0,ju.jsxs)("button",{onClick:v,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,ju.jsx)(Eu,{className:"h-4 w-4 ".concat(t?"animate-spin":"")}),"Actualiser"]})})]}),"custom"===i&&(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 pt-4 border-t border-gray-200",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de d\xe9but"}),(0,ju.jsx)("input",{type:"date",value:d.startDate,onChange:e=>u((0,s.A)((0,s.A)({},d),{},{startDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de fin"}),(0,ju.jsx)("input",{type:"date",value:d.endDate,onChange:e=>u((0,s.A)((0,s.A)({},d),{},{endDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),t?(0,ju.jsx)("div",{className:"bg-white p-12 rounded-xl shadow-sm border border-gray-200 flex items-center justify-center",children:(0,ju.jsx)(Eu,{className:"h-8 w-8 text-blue-600 animate-spin"})}):(0,ju.jsxs)(ju.Fragment,{children:["summary"===n&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,ju.jsxs)("div",{className:"flex items-center gap-2 text-blue-800",children:[(0,ju.jsx)(pm,{className:"h-5 w-5"}),(0,ju.jsxs)("span",{className:"font-medium",children:["P\xe9riode: ",A()]})]})}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,ju.jsx)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Total des comptes"}),(0,ju.jsx)("p",{className:"text-3xl font-bold mt-1",children:o.totalAccounts||0}),(0,ju.jsxs)("p",{className:"text-xs mt-2 opacity-75",children:[o.activeAccounts||0," actifs"]})]}),(0,ju.jsx)(Ru,{className:"h-12 w-12 opacity-80"})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Solde total"}),(0,ju.jsx)("p",{className:"text-2xl font-bold mt-1",children:S(o.totalBalance||0)}),(0,ju.jsxs)("p",{className:"text-xs mt-2 opacity-75",children:["Moy: ",S(o.avgBalance||0)]})]}),(0,ju.jsx)(Du,{className:"h-12 w-12 opacity-80"})]})}),(0,ju.jsx)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-6 rounded-xl text-white shadow-lg",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm opacity-90",children:"Nouveaux ce mois"}),(0,ju.jsx)("p",{className:"text-3xl font-bold mt-1",children:o.newAccountsThisMonth||0}),(0,ju.jsxs)("p",{className:"text-xs mt-2 opacity-75",children:["Ferm\xe9s: ",o.closedAccountsThisMonth||0]})]}),(0,ju.jsx)(ku,{className:"h-12 w-12 opacity-80"})]})})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,ju.jsx)(Lu,{className:"h-6 w-6 text-green-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Total d\xe9p\xf4ts"}),(0,ju.jsx)("p",{className:"text-xl font-bold text-gray-900",children:S(o.totalDeposits||0)})]})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsx)("div",{className:"p-3 bg-red-100 rounded-lg",children:(0,ju.jsx)(Op,{className:"h-6 w-6 text-red-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Total retraits"}),(0,ju.jsx)("p",{className:"text-xl font-bold text-gray-900",children:S(o.totalWithdrawals||0)})]})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ju.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,ju.jsx)(ku,{className:"h-6 w-6 text-purple-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:"Int\xe9r\xeats pay\xe9s"}),(0,ju.jsx)("p",{className:"text-xl font-bold text-gray-900",children:S(o.totalInterest||0)})]})]})})]})]}),"accounts"===n&&(0,ju.jsxs)("div",{className:"space-y-6",children:[o.accountsByStatus&&(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,ju.jsx)(Gw,{className:"h-5 w-5 text-blue-600"}),"Comptes par statut"]}),(0,ju.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.accountsByStatus.map(e=>(0,ju.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:e.value}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.name})]},e.name))})]}),Array.isArray(o.accounts)&&(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 overflow-x-auto",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Liste des comptes"}),(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Compte"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Devise"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Solde"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Solde dispo"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Succursale"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Ouverture"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Derni\xe8re txn"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.accounts.slice(0,f).map(e=>(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 font-mono",children:e.accountNumber}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 text-blue-700 text-xs font-bold",children:(e.customerName||e.customerCode||"?").toString().slice(0,2).toUpperCase()}),(0,ju.jsx)("span",{children:e.customerName||e.customerCode||e.customerId})]})}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:y(e.currency)}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:Number(e.balance||0).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:Number(e.availableBalance||e.balance||0).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm",children:(0,ju.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(j(e.status)),children:N(e.status)})}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.branchName||(e.branchId?"#".concat(e.branchId):"")}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:w(e.openedDate||e.openingDate||e.createdAt)}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:w(e.lastTransactionDate)})]},e.id||e.accountNumber))})]}),Array.isArray(o.accounts)&&o.accounts.length>f&&(0,ju.jsx)("div",{className:"mt-4 flex justify-center",children:(0,ju.jsx)("button",{onClick:()=>g(e=>e+1e3),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Afficher plus"})})]})]}),"transactions"===n&&o.transactionsByType&&(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,ju.jsx)(Xu,{className:"h-5 w-5 text-blue-600"}),"Transactions par type"]}),(0,ju.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.transactionsByType.map(e=>(0,ju.jsxs)("div",{className:"text-center p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-4xl font-bold text-blue-900",children:e.value}),(0,ju.jsx)("p",{className:"text-sm text-blue-700 mt-2 font-medium",children:e.name})]},e.name))})]}),Array.isArray(o.transactions)&&(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 overflow-x-auto",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aper\xe7u d\xe9taill\xe9"}),(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date/Heure"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"R\xe9f\xe9rence"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Compte"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Montant"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Devise"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Succursale"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Par"}),(0,ju.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.transactions.map(e=>(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:new Date(e.processedAt||e.transactionDate).toLocaleString("fr-FR")}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700 font-mono",children:e.reference}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.accountNumber}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:b(e.type)}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:Number(e.amount||0).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:y(e.currency)}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.branchName||e.BranchName||(e.branchId?"#".concat(e.branchId):"")}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.processedByName||e.processedBy||""}),(0,ju.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.status})]},e.id||"".concat(e.reference,"-").concat(e.accountNumber,"-").concat(e.processedAt)))})]})]})]})]})]})},IT=()=>{const[t,r]=(0,e.useState)("overview"),[n,s]=(0,e.useState)({totalCustomers:0,activeCustomers:0,totalAccounts:0,activeAccounts:0,totalBalance:0,monthlyDeposits:0,monthlyWithdrawals:0,interestPaid:0}),[a,i]=(0,e.useState)(!0),[l,o]=(0,e.useState)({depositCount:0,withdrawalCount:0,avgDeposit:0,avgWithdrawal:0,growthRate:0}),[c,d]=(0,e.useState)({depositCount:0,withdrawalCount:0,totalDeposits:0,totalWithdrawals:0}),[u,m]=(0,e.useState)({htg:{accounts:0,balance:0,percentage:0},usd:{accounts:0,balance:0,percentage:0}}),[h,p]=(0,e.useState)(0),[x,f]=(0,e.useState)({depositHTG:0,depositUSD:0,withdrawalHTG:0,withdrawalUSD:0});(0,e.useEffect)(()=>{g()},[]);const g=async()=>{i(!0);try{const e=(new Date).toISOString().slice(0,10),[t,r,n]=await Promise.all([Ei.getSavingsAccounts({}),Ei.getSavingsTransactions({}),Ei.getSavingsTransactions({dateFrom:e,dateTo:e,pageSize:2e3})]),a=e=>{const t=null!=e?String(e).toUpperCase():"";return"ACTIVE"===t||"1"===t||"TRUE"===t},i=t.filter(e=>a(e.status)),l=t.reduce((e,t)=>e+(t.balance||0),0),c=e=>"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0")),u=e=>e.processedAt||e.transactionDate||e.createdAt,h=e=>{if(void 0===e||null===e)return"";const t=String(e).trim();if("0"===t)return"Deposit";if("1"===t)return"Withdrawal";if("2"===t)return"Interest";if("3"===t||"4"===t)return"OpeningDeposit";const r=t.replace(/\s+/g,"").toLowerCase();return"deposit"===r?"Deposit":"withdrawal"===r?"Withdrawal":"interest"===r?"Interest":"openingdeposit"===r||"initialdeposit"===r?"OpeningDeposit":t},x=e=>{if(void 0===e||null===e)return"";const t=String(e).trim().toUpperCase();return"0"===t?"Pending":"1"===t?"Processing":"2"===t?"Completed":"3"===t?"Cancelled":"4"===t?"Failed":"COMPLETED"===t?"Completed":"PENDING"===t?"Pending":"PROCESSING"===t||"IN_PROGRESS"===t?"Processing":"CANCELLED"===t||"CANCELED"===t?"Cancelled":"FAILED"===t||"ERROR"===t?"Failed":t.charAt(0)+t.slice(1).toLowerCase()},g=new Date,v=new Date(g.getFullYear(),g.getMonth(),1),y=r.filter(e=>{const t=u(e);if(!t)return!1;return new Date(t)>=v}),b=e=>{var t;const r=h(null!==(t=e.type)&&void 0!==t?t:e);return"Deposit"===r||"OpeningDeposit"===r},N=e=>{var t;return"Withdrawal"===h(null!==(t=e.type)&&void 0!==t?t:e)},j=y.filter(b),w=y.filter(N),S=y.filter(e=>"Interest"===e.type),A=j.reduce((e,t)=>e+(t.amount||0),0),T=w.reduce((e,t)=>e+(t.amount||0),0),C=S.reduce((e,t)=>e+(t.amount||0),0);let E=Array.isArray(n)?n:[];if(!E.length){const e=c(new Date);E=(r||[]).filter(t=>{const r=u(t);if(!r)return!1;const n=new Date(r);return c(n)===e})}E=E.filter(e=>"Completed"===x(e.status));const D=E.filter(b),k=E.filter(N),R=D.reduce((e,t)=>e+(t.amount||0),0),_=k.reduce((e,t)=>e+(t.amount||0),0),I=new Set(t.map(e=>e.customerId)),P=new Set(i.map(e=>e.customerId)),O=l>0?(A-T)/l*100:0,L=e=>{const t=null!=e?String(e).toUpperCase():"";return"0"===t||"HTG"===t?"HTG":"1"===t||"USD"===t?"USD":t},F=t.filter(e=>"HTG"===L(e.currency)),M=t.filter(e=>"USD"===L(e.currency)),U=F.reduce((e,t)=>e+(t.balance||0),0),B=M.reduce((e,t)=>e+(t.balance||0),0),H=l>0?U/l*100:0,z=l>0?B/l*100:0;s({totalCustomers:I.size,activeCustomers:P.size,totalAccounts:t.length,activeAccounts:i.length,totalBalance:l,monthlyDeposits:A,monthlyWithdrawals:T,interestPaid:C}),o({depositCount:j.length,withdrawalCount:w.length,avgDeposit:j.length>0?A/j.length:0,avgWithdrawal:w.length>0?T/w.length:0,growthRate:O}),d({depositCount:D.length,withdrawalCount:k.length,totalDeposits:R,totalWithdrawals:_});const G=e=>{const t=null!=e?String(e).toUpperCase():"";return"0"===t||"HTG"===t?"HTG":"1"===t||"USD"===t||"2"===t?"USD":"HTG"},V=e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.currency)&&void 0!==t?t:null===e||void 0===e?void 0:e.Currency},W=D.filter(e=>"HTG"===G(V(e))).length,q=D.filter(e=>"USD"===G(V(e))).length,$=k.filter(e=>"HTG"===G(V(e))).length,K=k.filter(e=>"USD"===G(V(e))).length;f({depositHTG:W,depositUSD:q,withdrawalHTG:$,withdrawalUSD:K}),m({htg:{accounts:F.length,balance:U,percentage:H},usd:{accounts:M.length,balance:B,percentage:z}});const X=new Date;X.setHours(0,0,0,0);const Y=t.filter(e=>{const t=e.createdAt||e.openingDate;if(!t)return!1;const r=new Date(t);return r.setHours(0,0,0,0),r.getTime()===X.getTime()});p(Y.length)}catch(Sc){console.error("Error loading statistics:",Sc),Ts.error("Erreur lors du chargement des statistiques")}finally{i(!1)}},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTG";return new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:2}).format(e)+" "+t},y=[{id:"overview",label:"Vue d'ensemble",icon:Xu,description:"Statistiques g\xe9n\xe9rales des comptes d'\xe9pargne"},{id:"customers",label:"Clients",icon:Ru,description:"Gestion des clients \xe9pargnants"},{id:"accounts",label:"Comptes",icon:dm,description:"Gestion des comptes d'\xe9pargne"},{id:"transactions",label:"Transactions",icon:ku,description:"Historique et traitement des transactions"},{id:"reports",label:"Rapports",icon:Hu,description:"Rapports et statistiques d\xe9taill\xe9es"}],b=()=>(0,ju.jsx)("div",{className:"space-y-6",children:a?(0,ju.jsx)("div",{className:"bg-white p-12 rounded-xl shadow-sm border border-gray-200 flex items-center justify-center",children:(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"Chargement des statistiques..."})]})}):(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Comptes \xc9pargne HTG"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.htg.accounts})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(dm,{className:"h-6 w-6 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Comptes \xc9pargne USD"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.usd.accounts})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(dm,{className:"h-6 w-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"D\xe9p\xf4ts HTG (aujourd'hui)"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.depositHTG})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(Lu,{className:"h-6 w-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"D\xe9p\xf4ts USD (aujourd'hui)"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.depositUSD})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(Lu,{className:"h-6 w-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Retraits HTG (aujourd'hui)"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.withdrawalHTG})]}),(0,ju.jsx)("div",{className:"p-3 bg-red-100 rounded-full",children:(0,ju.jsx)(Op,{className:"h-6 w-6 text-red-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Retraits USD (aujourd'hui)"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.withdrawalUSD})]}),(0,ju.jsx)("div",{className:"p-3 bg-red-100 rounded-full",children:(0,ju.jsx)(Op,{className:"h-6 w-6 text-red-600"})})]})})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,ju.jsx)(Du,{className:"h-5 w-5 mr-2 text-blue-600"}),"R\xe9partition par Devise"]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ju.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-lg",children:"HTG"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Gourde Ha\xeftienne"}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:[u.htg.accounts," comptes"]})]})]}),(0,ju.jsx)("div",{className:"text-right",children:(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[u.htg.percentage.toFixed(1),"%"]})})]}),(0,ju.jsx)("div",{className:"relative w-full h-3 bg-gray-200 rounded-full overflow-hidden mb-2",children:(0,ju.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-500",style:{width:"".concat(u.htg.percentage,"%")}})}),(0,ju.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Solde total"}),(0,ju.jsx)("span",{className:"font-bold text-blue-600",children:v(u.htg.balance,"HTG")})]}),(0,ju.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,ju.jsxs)("div",{className:"bg-blue-50 px-3 py-2 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-gray-600",children:"Comptes actifs"}),(0,ju.jsx)("p",{className:"font-bold text-blue-700",children:u.htg.accounts})]}),(0,ju.jsxs)("div",{className:"bg-blue-50 px-3 py-2 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-gray-600",children:"Solde moyen"}),(0,ju.jsx)("p",{className:"font-bold text-blue-700",children:u.htg.accounts>0?v(u.htg.balance/u.htg.accounts,"HTG"):v(0,"HTG")})]})]})})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ju.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ju.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-lg",children:"USD"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Dollar Am\xe9ricain"}),(0,ju.jsxs)("p",{className:"text-xs text-gray-500",children:[u.usd.accounts," comptes"]})]})]}),(0,ju.jsx)("div",{className:"text-right",children:(0,ju.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[u.usd.percentage.toFixed(1),"%"]})})]}),(0,ju.jsx)("div",{className:"relative w-full h-3 bg-gray-200 rounded-full overflow-hidden mb-2",children:(0,ju.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-green-500 to-green-600 rounded-full transition-all duration-500",style:{width:"".concat(u.usd.percentage,"%")}})}),(0,ju.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,ju.jsx)("span",{className:"text-gray-600",children:"Solde total"}),(0,ju.jsx)("span",{className:"font-bold text-green-600",children:v(u.usd.balance,"USD")})]}),(0,ju.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,ju.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,ju.jsxs)("div",{className:"bg-green-50 px-3 py-2 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-gray-600",children:"Comptes actifs"}),(0,ju.jsx)("p",{className:"font-bold text-green-700",children:u.usd.accounts})]}),(0,ju.jsxs)("div",{className:"bg-green-50 px-3 py-2 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-gray-600",children:"Solde moyen"}),(0,ju.jsx)("p",{className:"font-bold text-green-700",children:u.usd.accounts>0?v(u.usd.balance/u.usd.accounts,"USD"):v(0,"USD")})]})]})})]})]}),(0,ju.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ju.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Comptes"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.htg.accounts+u.usd.accounts})]}),(0,ju.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"HTG Dominance"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-blue-700",children:[u.htg.percentage.toFixed(1),"%"]})]}),(0,ju.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-lg",children:[(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"USD Dominance"}),(0,ju.jsxs)("p",{className:"text-2xl font-bold text-green-700",children:[u.usd.percentage.toFixed(1),"%"]})]})]})})]}),(0,ju.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actions Rapides"}),(0,ju.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,ju.jsxs)("button",{onClick:()=>r("customers"),className:"flex flex-col items-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors",children:[(0,ju.jsx)(Au,{className:"h-8 w-8 text-blue-600 mb-2"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Nouveau Client"})]}),(0,ju.jsxs)("button",{onClick:()=>r("accounts"),className:"flex flex-col items-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-400 hover:bg-green-50 transition-colors",children:[(0,ju.jsx)(dm,{className:"h-8 w-8 text-green-600 mb-2"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Ouvrir Compte"})]}),(0,ju.jsxs)("button",{onClick:()=>r("transactions"),className:"flex flex-col items-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-400 hover:bg-purple-50 transition-colors",children:[(0,ju.jsx)(ku,{className:"h-8 w-8 text-purple-600 mb-2"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Transaction"})]}),(0,ju.jsxs)("button",{onClick:()=>r("reports"),className:"flex flex-col items-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-400 hover:bg-orange-50 transition-colors",children:[(0,ju.jsx)(Hu,{className:"h-8 w-8 text-orange-600 mb-2"}),(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"G\xe9n\xe9rer Rapport"})]})]})]})]})});return(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Comptes d'\xc9pargne"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"Module complet de gestion des comptes d'\xe9pargne et des transactions"})]}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsx)("div",{className:"border-b border-gray-200",children:(0,ju.jsx)("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:y.map(e=>{const n=e.icon;return(0,ju.jsxs)("button",{onClick:()=>r(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ".concat(t===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," transition-colors"),children:[(0,ju.jsx)(n,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:e.label})]},e.id)})})})}),(()=>{switch(t){case"overview":default:return b();case"customers":return(0,ju.jsx)(Qw,{});case"accounts":return(0,ju.jsx)(Bw,{});case"transactions":return(0,ju.jsx)(RT,{});case"reports":return(0,ju.jsx)(_T,{})}})()]})},PT=mi("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]),OT=mi("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),LT=()=>{const[t,r]=(0,e.useState)([]),[n,s]=(0,e.useState)([]),[a,i]=(0,e.useState)({totalDeposits:0,totalWithdrawals:0,totalTransfers:0,totalFees:0,netFlow:0,transactionCount:0}),[l,o]=(0,e.useState)(""),[c,d]=(0,e.useState)("ALL"),[u,m]=(0,e.useState)("ALL"),[h,p]=(0,e.useState)(""),[x,f]=(0,e.useState)(""),[g,v]=(0,e.useState)(!1),[y]=dn(),b=async e=>{try{if(!e||e.trim().length<3)return void Ts.error("Entrez un num\xe9ro de compte valide");const t=(await Di.getAccountTransactions(e.trim())||[]).map(e=>({id:e.id,accountNumber:e.accountNumber,customerName:"",type:e.type,amount:e.amount,currency:e.currency,balance:e.balanceAfter,description:e.description,referenceNumber:e.reference||"",processedBy:e.processedByName||e.processedBy||"",processedAt:e.processedAt,status:"COMPLETED"}));r(t),s(t),N(t),Ts.success("".concat(t.length," transaction(s) charg\xe9e(s)"))}catch(Sc){console.error("Erreur lors du chargement des transactions:",Sc),Ts.error("Impossible de charger les transactions")}};(0,e.useEffect)(()=>{const e=y.get("account");e&&e.trim().length>=3&&(o(e),b(e))},[]);const N=e=>{const t={totalDeposits:0,totalWithdrawals:0,totalTransfers:0,totalFees:0,netFlow:0,transactionCount:e.length};e.forEach(e=>{if("COMPLETED"===e.status)switch(e.type){case"DEPOSIT":t.totalDeposits+=e.amount;break;case"WITHDRAWAL":t.totalWithdrawals+=e.amount;break;case"TRANSFER_IN":case"TRANSFER_OUT":t.totalTransfers+=e.amount;break;case"FEE":t.totalFees+=e.amount}}),t.netFlow=t.totalDeposits-t.totalWithdrawals-t.totalFees,i(t)};(0,e.useEffect)(()=>{let e=t;l&&(e=e.filter(e=>e.accountNumber.toLowerCase().includes(l.toLowerCase())||e.customerName.toLowerCase().includes(l.toLowerCase())||e.referenceNumber.toLowerCase().includes(l.toLowerCase()))),"ALL"!==c&&(e=e.filter(e=>e.type===c)),"ALL"!==u&&(e=e.filter(e=>e.currency===u)),h&&(e=e.filter(e=>new Date(e.processedAt)>=new Date(h))),x&&(e=e.filter(e=>new Date(e.processedAt)<=new Date(x))),s(e),N(e)},[l,c,u,h,x,t]);const j=e=>{switch(e){case"DEPOSIT":case"TRANSFER_IN":return(0,ju.jsx)(PT,{className:"w-5 h-5 text-green-600"});case"WITHDRAWAL":case"TRANSFER_OUT":return(0,ju.jsx)(OT,{className:"w-5 h-5 text-red-600"});case"FEE":return(0,ju.jsx)(Du,{className:"w-5 h-5 text-orange-600"});case"INTEREST":return(0,ju.jsx)(ku,{className:"w-5 h-5 text-blue-600"});default:return(0,ju.jsx)(Hu,{className:"w-5 h-5 text-gray-600"})}},w=(e,t)=>new Intl.NumberFormat("fr-HT",{style:"currency",currency:"HTG"===t?"HTG":"USD",minimumFractionDigits:2}).format(e),S=e=>{const t=new Date(e);return new Intl.DateTimeFormat("fr-HT",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)};return(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Transactions - Comptes Courants"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Historique des transactions des comptes courants"})]}),(0,ju.jsxs)("div",{className:"flex gap-3",children:[(0,ju.jsxs)("button",{onClick:()=>window.location.reload(),className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,ju.jsx)(Eu,{className:"w-4 h-4"}),"Actualiser"]}),(0,ju.jsxs)("button",{onClick:()=>{Ts.success("Export en cours...")},className:"flex items-center gap-2 px-4 py-2 text-white bg-primary-600 rounded-lg hover:bg-primary-700",children:[(0,ju.jsx)(zu,{className:"w-4 h-4"}),"Exporter"]})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total D\xe9p\xf4ts"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:w(a.totalDeposits,"HTG")})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,ju.jsx)(PT,{className:"w-6 h-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Retraits"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:w(a.totalWithdrawals,"HTG")})]}),(0,ju.jsx)("div",{className:"p-3 bg-red-100 rounded-lg",children:(0,ju.jsx)(OT,{className:"w-6 h-6 text-red-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Frais Collect\xe9s"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:w(a.totalFees,"HTG")})]}),(0,ju.jsx)("div",{className:"p-3 bg-orange-100 rounded-lg",children:(0,ju.jsx)(Du,{className:"w-6 h-6 text-orange-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Flux Net"}),(0,ju.jsx)("p",{className:"text-2xl font-bold mt-1 ".concat(a.netFlow>=0?"text-green-600":"text-red-600"),children:w(a.netFlow,"HTG")})]}),(0,ju.jsx)("div",{className:"p-3 rounded-lg ".concat(a.netFlow>=0?"bg-green-100":"bg-red-100"),children:a.netFlow>=0?(0,ju.jsx)(ku,{className:"w-6 h-6 text-green-600"}):(0,ju.jsx)(rS,{className:"w-6 h-6 text-red-600"})})]})})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Filtres"}),(0,ju.jsxs)("button",{onClick:()=>v(!g),className:"flex items-center gap-2 text-sm text-primary-600 hover:text-primary-700",children:[(0,ju.jsx)(hm,{className:"w-4 h-4"}),g?"Masquer":"Afficher"," les filtres"]})]}),(0,ju.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,ju.jsxs)("div",{className:"relative flex-1",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,ju.jsx)("input",{type:"text",placeholder:"Entrer un num\xe9ro de compte (ex: CUR-2024-001)",value:l,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&b(l)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),(0,ju.jsx)("button",{onClick:()=>b(l),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Charger"})]}),g&&(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de Transaction"}),(0,ju.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"ALL",children:"Tous"}),(0,ju.jsx)("option",{value:"DEPOSIT",children:"D\xe9p\xf4ts"}),(0,ju.jsx)("option",{value:"WITHDRAWAL",children:"Retraits"}),(0,ju.jsx)("option",{value:"TRANSFER_IN",children:"Transferts re\xe7us"}),(0,ju.jsx)("option",{value:"TRANSFER_OUT",children:"Transferts envoy\xe9s"}),(0,ju.jsx)("option",{value:"FEE",children:"Frais"}),(0,ju.jsx)("option",{value:"INTEREST",children:"Int\xe9r\xeats"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Devise"}),(0,ju.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,ju.jsx)("option",{value:"ALL",children:"Toutes"}),(0,ju.jsx)("option",{value:"HTG",children:"HTG"}),(0,ju.jsx)("option",{value:"USD",children:"USD"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date d\xe9but"}),(0,ju.jsx)("input",{type:"date",value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date fin"}),(0,ju.jsx)("input",{type:"date",value:x,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"w-full",children:[(0,ju.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Heure"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Compte / Client"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Solde"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"R\xe9f\xe9rence"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"})]})}),(0,ju.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===n.length?(0,ju.jsx)("tr",{children:(0,ju.jsxs)("td",{colSpan:8,className:"px-6 py-12 text-center",children:[(0,ju.jsx)(Hu,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,ju.jsx)("p",{className:"text-gray-500",children:"Aucune transaction trouv\xe9e"})]})}):n.map(e=>{return(0,ju.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ju.jsx)(Cu,{className:"w-4 h-4 text-gray-400"}),(0,ju.jsx)("span",{className:"text-sm text-gray-900",children:S(e.processedAt)})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"flex items-center gap-2",children:[j(e.type),(0,ju.jsx)("span",{className:"text-sm text-gray-900",children:(t=e.type,{DEPOSIT:"D\xe9p\xf4t",WITHDRAWAL:"Retrait",TRANSFER_IN:"Transfert re\xe7u",TRANSFER_OUT:"Transfert envoy\xe9",FEE:"Frais",INTEREST:"Int\xe9r\xeat"}[t]||t)})]})}),(0,ju.jsx)("td",{className:"px-6 py-4",children:(0,ju.jsxs)("div",{className:"text-sm",children:[(0,ju.jsx)("div",{className:"font-medium text-gray-900",children:e.accountNumber}),(0,ju.jsx)("div",{className:"text-gray-500",children:e.customerName})]})}),(0,ju.jsxs)("td",{className:"px-6 py-4",children:[(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:e.description}),(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["Par: ",e.processedBy]})]}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsxs)("span",{className:"text-sm font-medium ".concat("DEPOSIT"===e.type||"TRANSFER_IN"===e.type?"text-green-600":"text-red-600"),children:["DEPOSIT"===e.type||"TRANSFER_IN"===e.type?"+":"-",w(e.amount,e.currency)]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,ju.jsx)("span",{className:"text-sm font-medium text-gray-900",children:w(e.balance,e.currency)})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("span",{className:"text-xs font-mono text-gray-600",children:e.referenceNumber})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("COMPLETED"===e.status?"bg-green-100 text-green-800":"PENDING"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:"COMPLETED"===e.status?"Compl\xe9t\xe9":"PENDING"===e.status?"En attente":"\xc9chou\xe9"})})]},e.id);var t})})]})}),n.length>0&&(0,ju.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"text-sm text-gray-700",children:["Affichage de ",(0,ju.jsx)("span",{className:"font-medium",children:n.length})," transaction(s)"]}),(0,ju.jsxs)("div",{className:"text-sm text-gray-500",children:["Total: ",a.transactionCount," transaction(s)"]})]})})]})]})},FT=mi("UserCog",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["circle",{cx:"19",cy:"11",r:"2",key:"1rxg02"}],["path",{d:"M19 8v1",key:"1iffrw"}],["path",{d:"M19 13v1",key:"z4xc62"}],["path",{d:"m21.6 9.5-.87.5",key:"6lxupl"}],["path",{d:"m17.27 12-.87.5",key:"1rwhxx"}],["path",{d:"m21.6 12.5-.87-.5",key:"agvc9a"}],["path",{d:"m17.27 10-.87-.5",key:"12d57s"}]]);var MT=function(e){return e.Caissier="CAISSIER",e.SecretaireAdministratif="SECRETAIRE_ADMINISTRATIF",e.AgentDeCredit="AGENT_DE_CREDIT",e.ChefDeSuccursale="CHEF_DE_SUCCURSALE",e.DirecteurRegional="DIRECTEUR_REGIONAL",e.AdministrateurSysteme="ADMINISTRATEUR_SYSTEME",e.DirectionGenerale="DIRECTION_GENERALE",e.ComptableFinance="COMPTABLE_FINANCE",e}(MT||{});const UT=t=>{let{onSuccess:r,onCancel:n}=t;const[a,i]=(0,e.useState)(null),[l,o]=(0,e.useState)(!1),[c,d]=(0,e.useState)(!1),[u,m]=(0,e.useState)(!1),[h,p]=(0,e.useState)([]),{register:x,handleSubmit:f,watch:g,setValue:v,formState:{errors:y}}=ri({defaultValues:{assignedBranches:[]}}),b=g("adminType"),N=g("assignedBranches")||[];(0,e.useEffect)(()=>{(async()=>{try{const e=await Di.getAllBranches();p(e.filter(e=>e.status===pu.Active))}catch(Sc){console.error("Error loading branches:",Sc),Ts.error("Erreur lors du chargement des succursales")}})()},[]);const j=[{value:MT.Caissier,label:"Caissier",description:"Gestion des transactions et caisse"},{value:MT.SecretaireAdministratif,label:"Secr\xe9taire Administratif",description:"Support administratif"},{value:MT.AgentDeCredit,label:"Agent de Cr\xe9dit",description:"Gestion des pr\xeats et dossiers"},{value:MT.ChefDeSuccursale,label:"Chef de Succursale",description:"Gestion d'une succursale"},{value:MT.DirecteurRegional,label:"Directeur R\xe9gional",description:"Gestion de plusieurs succursales"},{value:MT.AdministrateurSysteme,label:"Administrateur Syst\xe8me",description:"Configuration et support technique"},{value:MT.DirectionGenerale,label:"Direction G\xe9n\xe9rale",description:"Acc\xe8s complet au syst\xe8me"},{value:MT.ComptableFinance,label:"Comptable/Finance",description:"Gestion financi\xe8re et comptabilit\xe9"}];return(0,ju.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:(0,ju.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(mm,{className:"h-6 w-6 text-blue-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Cr\xe9ation de Compte Administrateur"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"Cr\xe9ez un nouveau compte pour acc\xe9der au syst\xe8me"})]})]}),n&&(0,ju.jsx)("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,ju.jsx)(vm,{className:"h-6 w-6"})})]})}),(0,ju.jsxs)("form",{onSubmit:f(async e=>{try{const t=(e=>{if(!e.adminType)return"Le type d'administrateur est requis";if(!e.fullName||e.fullName.length<3)return"Le nom doit contenir au moins 3 caract\xe8res";if(!e.email)return"L'email est requis";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email))return"Format d'email invalide";if(!e.phone)return"Le t\xe9l\xe9phone est requis";const t=e.phone.replace(/[\s\-+()]/g,"");return/^(509)?[0-9]{8}$/.test(t)?e.department?e.branchId?e.hireDate?e.adminType===MT.DirecteurRegional&&0===e.assignedBranches.length?"Au moins une succursale doit \xeatre assign\xe9e pour un Directeur R\xe9gional":e.initialPassword?e.initialPassword.length<8?"Le mot de passe doit contenir au moins 8 caract\xe8res":/[A-Z]/.test(e.initialPassword)?/[a-z]/.test(e.initialPassword)?/[0-9]/.test(e.initialPassword)?/[@$!%*?&]/.test(e.initialPassword)?e.initialPassword!==e.confirmPassword?"Les mots de passe ne correspondent pas":null:"Le mot de passe doit contenir au moins un caract\xe8re sp\xe9cial (@$!%*?&)":"Le mot de passe doit contenir au moins un chiffre":"Le mot de passe doit contenir au moins une minuscule":"Le mot de passe doit contenir au moins une majuscule":"Le mot de passe initial est requis":"La date d'embauche est requise":"La succursale est requise":"Le d\xe9partement est requis":"Format de t\xe9l\xe9phone invalide. Utilisez: +509 XXXX-XXXX ou 509XXXXXXXX"})(e);if(t)return void Ts.error(t);m(!0);const n=e.fullName.trim().split(" "),s=n[0],a=n.slice(1).join(" ")||n[0],i={[MT.Caissier]:0,[MT.SecretaireAdministratif]:1,[MT.AgentDeCredit]:2,[MT.ChefDeSuccursale]:3,[MT.DirecteurRegional]:4,[MT.AdministrateurSysteme]:5,[MT.DirectionGenerale]:6,[MT.ComptableFinance]:7}[e.adminType],l={firstName:s,lastName:a,email:e.email,phone:e.phone.replace(/[\s\-()]/g,""),adminType:i,department:e.department||"Non sp\xe9cifi\xe9",hireDate:e.hireDate,assignedBranches:e.branchId?[...e.assignedBranches,e.branchId.toString()]:e.assignedBranches.map(e=>e.toString()),password:e.initialPassword};console.log("Creating admin account:",l),await Di.createAdmin(l),Ts.success("Compte administrateur cr\xe9\xe9 avec succ\xe8s!"),r&&r()}catch(Sc){var t;console.error("Error creating admin account:",Sc);let r="Erreur lors de la cr\xe9ation du compte";if(null!==(t=Sc.response)&&void 0!==t&&t.data){if("string"===typeof Sc.response.data)r=Sc.response.data;else if(Sc.response.data.message)r=Sc.response.data.message;else if(Sc.response.data.title)r=Sc.response.data.title;else if(Sc.response.data.errors){const t=Sc.response.data.errors,n=Object.values(t).flat();r=Array.isArray(n)?n.join(", "):"Erreur de validation"}}else Sc.message&&(r=Sc.message);Ts.error(r)}finally{m(!1)}}),className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,ju.jsx)(lm,{className:"h-5 w-5 text-gray-600"}),(0,ju.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Type d'Administrateur"})]}),(0,ju.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.map(e=>(0,ju.jsxs)("label",{className:"relative flex items-start p-4 border-2 rounded-lg cursor-pointer transition-all ".concat(b===e.value?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"radio"},x("adminType")),{},{value:e.value,className:"sr-only"})),(0,ju.jsxs)("div",{className:"flex-1",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ju.jsx)(FT,{className:"h-5 w-5 ".concat(b===e.value?"text-blue-600":"text-gray-400")}),(0,ju.jsx)("span",{className:"font-medium ".concat(b===e.value?"text-blue-900":"text-gray-900"),children:e.label})]}),(0,ju.jsx)("p",{className:"text-sm mt-1 ".concat(b===e.value?"text-blue-700":"text-gray-500"),children:e.description})]}),b===e.value&&(0,ju.jsx)("div",{className:"flex-shrink-0 ml-2",children:(0,ju.jsx)("div",{className:"h-5 w-5 bg-blue-600 rounded-full flex items-center justify-center",children:(0,ju.jsx)("div",{className:"h-2 w-2 bg-white rounded-full"})})})]},e.value))}),y.adminType&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-2",children:y.adminType.message})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations Personnelles"}),(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nom Complet ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},x("fullName",{required:!0})),{},{placeholder:"Ex: Jean Pierre Dupont",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email (Identifiant) ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(pi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"email"},x("email",{required:!0})),{},{placeholder:"jean.dupont@example.com",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["T\xe9l\xe9phone ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Zw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"tel"},x("phone",{required:!0})),{},{placeholder:"+509 1234-5678",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photo (Optionnel)"}),a?(0,ju.jsxs)("div",{className:"relative inline-block",children:[(0,ju.jsx)("img",{src:a,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg border-2 border-gray-300"}),(0,ju.jsx)("button",{type:"button",onClick:()=>{i(null),v("photo",void 0)},className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:(0,ju.jsx)(vm,{className:"h-4 w-4"})})]}):(0,ju.jsxs)("label",{className:"flex items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-gray-400 transition-colors",children:[(0,ju.jsxs)("div",{className:"text-center",children:[(0,ju.jsx)(Dm,{className:"mx-auto h-8 w-8 text-gray-400"}),(0,ju.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Cliquez pour t\xe9l\xe9charger une photo"}),(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG jusqu'\xe0 5 MB"})]}),(0,ju.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){if(r.size>5242880)return void Ts.error("La photo ne doit pas d\xe9passer 5 MB");const e=new FileReader;e.onloadend=()=>{i(e.result)},e.readAsDataURL(r)}},className:"sr-only"})]})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations Professionnelles"}),(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["D\xe9partement/Service ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(NA,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},x("department",{required:!0})),{},{className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"",children:"Chwazi yon depatman"}),["Direction G\xe9n\xe9rale","Op\xe9rations","Finance & Comptabilit\xe9","Ressources Humaines","Technologie","Marketing","Service Client","Audit & Conformit\xe9","Cr\xe9dit & Recouvrement"].map(e=>(0,ju.jsx)("option",{value:e,children:e},e))]}))]}),y.department&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"Le d\xe9partement est requis"})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Succursale ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},x("branchId",{valueAsNumber:!0,required:"La succursale est requise"})),{},{className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner une succursale"}),h.map(e=>(0,ju.jsxs)("option",{value:e.id,children:[e.name," - ",e.commune||e.department]},e.id))]}))]}),y.branchId&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.branchId.message}),(0,ju.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"La succursale principale de l'utilisateur"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date d'Embauche ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(pm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"date"},x("hireDate",{required:!0})),{},{className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]})]}),b===MT.DirecteurRegional&&(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Succursales Assign\xe9es ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("p",{className:"text-sm text-amber-600 mb-3 flex items-start",children:[(0,ju.jsx)("span",{className:"font-semibold mr-2",children:"\u26a0\ufe0f"}),(0,ju.jsx)("span",{children:"Au moins une succursale doit \xeatre s\xe9lectionn\xe9e pour un Directeur R\xe9gional"})]}),(0,ju.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:h.map(e=>(0,ju.jsxs)("label",{className:"flex items-center p-3 border-2 rounded-lg cursor-pointer transition-all ".concat(N.includes(e.id)?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,ju.jsx)("input",{type:"checkbox",checked:N.includes(e.id),onChange:()=>(e=>{const t=N;t.includes(e)?v("assignedBranches",t.filter(t=>t!==e)):v("assignedBranches",[...t,e])})(e.id),className:"sr-only"}),(0,ju.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,ju.jsx)(Ku,{className:"h-5 w-5 ".concat(N.includes(e.id)?"text-blue-600":"text-gray-400")}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("div",{className:"font-medium ".concat(N.includes(e.id)?"text-blue-900":"text-gray-900"),children:e.name}),(0,ju.jsxs)("div",{className:"text-xs ".concat(N.includes(e.id)?"text-blue-700":"text-gray-500"),children:[e.code," - ",e.commune||e.department]})]})]}),N.includes(e.id)&&(0,ju.jsx)("div",{className:"flex-shrink-0",children:(0,ju.jsx)("div",{className:"h-5 w-5 bg-blue-600 rounded flex items-center justify-center",children:(0,ju.jsx)("div",{className:"h-2 w-2 bg-white rounded-sm"})})})]},e.id))}),y.assignedBranches&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-2",children:y.assignedBranches.message}),N.length>0&&(0,ju.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:[N.length," succursale(s) s\xe9lectionn\xe9e(s)"]})]})]})]}),(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,ju.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Mot de Passe Initial"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"L'utilisateur devra changer ce mot de passe lors de sa premi\xe8re connexion."}),(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Mot de Passe ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:l?"text":"password"},x("initialPassword")),{},{placeholder:"Mot de passe",className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),(0,ju.jsx)("button",{type:"button",onClick:()=>o(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?(0,ju.jsx)(xi,{className:"h-5 w-5"}):(0,ju.jsx)(fi,{className:"h-5 w-5"})})]}),y.initialPassword&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.initialPassword.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Confirmer le Mot de Passe ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:c?"text":"password"},x("confirmPassword")),{},{placeholder:"Confirmer le mot de passe",className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),(0,ju.jsx)("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c?(0,ju.jsx)(xi,{className:"h-5 w-5"}):(0,ju.jsx)(fi,{className:"h-5 w-5"})})]}),y.confirmPassword&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.confirmPassword.message})]})]}),(0,ju.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,ju.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Exigences du mot de passe:"}),(0,ju.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,ju.jsx)("li",{children:"\u2022 Au moins 8 caract\xe8res"}),(0,ju.jsx)("li",{children:"\u2022 Au moins une lettre majuscule"}),(0,ju.jsx)("li",{children:"\u2022 Au moins une lettre minuscule"}),(0,ju.jsx)("li",{children:"\u2022 Au moins un chiffre"}),(0,ju.jsx)("li",{children:"\u2022 Au moins un caract\xe8re sp\xe9cial (@$!%*?&)"})]})]})]})]}),(0,ju.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[n&&(0,ju.jsx)("button",{type:"button",onClick:n,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),(0,ju.jsx)("button",{type:"submit",disabled:u,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:u?(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,ju.jsx)("span",{children:"Cr\xe9ation en cours..."})]}):(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)(lp,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Cr\xe9er le Compte"})]})})]})]})]})})},BT=mi("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);var HT=function(e){return e.CAISSIER="CAISSIER",e.SECRETAIRE_ADMINISTRATIF="SECRETAIRE_ADMINISTRATIF",e.AGENT_DE_CREDIT="AGENT_DE_CREDIT",e.CHEF_DE_SUCCURSALE="CHEF_DE_SUCCURSALE",e.DIRECTEUR_REGIONAL="DIRECTEUR_REGIONAL",e.ADMINISTRATEUR_SYSTEME="ADMINISTRATEUR_SYSTEME",e.DIRECTION_GENERALE="DIRECTION_GENERALE",e.COMPTABLE_FINANCE="COMPTABLE_FINANCE",e}(HT||{});const zT=t=>{let{userId:r,currentData:n,onSuccess:a,onCancel:i}=t;const[l,o]=(0,e.useState)(!1),[c,d]=(0,e.useState)([]),[u,m]=(0,e.useState)(!1),[h,p]=(0,e.useState)(!1),[x,f]=(0,e.useState)(!1),{register:g,handleSubmit:v,formState:{errors:y}}=ri({defaultValues:{firstName:n.fullName.split(" ")[0],lastName:n.fullName.split(" ").slice(1).join(" "),email:n.email,phone:n.phone,department:n.department,adminType:n.adminType}}),b=[{value:HT.CAISSIER,label:"Caissier"},{value:HT.SECRETAIRE_ADMINISTRATIF,label:"Secr\xe9taire Administratif"},{value:HT.AGENT_DE_CREDIT,label:"Agent de Cr\xe9dit"},{value:HT.CHEF_DE_SUCCURSALE,label:"Chef de Succursale"},{value:HT.DIRECTEUR_REGIONAL,label:"Directeur R\xe9gional"},{value:HT.ADMINISTRATEUR_SYSTEME,label:"Administrateur Syst\xe8me"},{value:HT.DIRECTION_GENERALE,label:"Direction G\xe9n\xe9rale"},{value:HT.COMPTABLE_FINANCE,label:"Comptable/Finance"}];(0,e.useEffect)(()=>{(async()=>{try{const e=await Ei.getAllBranches();d(e.filter(e=>e.status===pu.Active))}catch(Sc){console.error("Error loading branches:",Sc)}})()},[]);return(0,ju.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ju.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ju.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-xl",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ju.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,ju.jsx)(lm,{className:"h-5 w-5 text-blue-600"})}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Modifier le Compte"}),(0,ju.jsx)("p",{className:"text-sm text-gray-600",children:n.fullName})]})]}),(0,ju.jsx)("button",{onClick:i,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,ju.jsx)(vm,{className:"h-6 w-6"})})]}),(0,ju.jsxs)("form",{onSubmit:v(async e=>{try{if(u){if(!e.newPassword)return void Ts.error("Le nouveau mot de passe est requis");if(e.newPassword.length<8)return void Ts.error("Le mot de passe doit contenir au moins 8 caract\xe8res");if(!/[A-Z]/.test(e.newPassword))return void Ts.error("Le mot de passe doit contenir au moins une majuscule");if(!/[a-z]/.test(e.newPassword))return void Ts.error("Le mot de passe doit contenir au moins une minuscule");if(!/[0-9]/.test(e.newPassword))return void Ts.error("Le mot de passe doit contenir au moins un chiffre");if(!/[@$!%*?&]/.test(e.newPassword))return void Ts.error("Le mot de passe doit contenir au moins un caract\xe8re sp\xe9cial (@$!%*?&)");if(e.newPassword!==e.confirmPassword)return void Ts.error("Les mots de passe ne correspondent pas")}o(!0);const t={CAISSIER:0,SECRETAIRE_ADMINISTRATIF:1,AGENT_DE_CREDIT:2,CHEF_DE_SUCCURSALE:3,DIRECTEUR_REGIONAL:4,ADMINISTRATEUR_SYSTEME:5,DIRECTION_GENERALE:6,COMPTABLE_FINANCE:7},s=e.phone.replace(/[\s-()]/g,""),i=e.adminType?t[e.adminType]:t[n.adminType];console.log("AdminType mapping:",{formValue:e.adminType,originalValue:n.adminType,mappedValue:i});const l={FirstName:e.firstName,LastName:e.lastName,Phone:s,Department:e.department||"Non sp\xe9cifi\xe9",AdminType:i,HireDate:n.hireDate||(new Date).toISOString(),AssignedBranches:e.branchId?[e.branchId.toString()]:[]};u&&e.newPassword&&(l.Password=e.newPassword),console.log("Updating user:",r,l),await Ei.updateUser(r,l),Ts.success("Compte modifi\xe9 avec succ\xe8s!"),a()}catch(Sc){var t;console.error("Error updating user:",Sc);let r="Erreur lors de la modification du compte";if(null!==(t=Sc.response)&&void 0!==t&&t.data){if("string"===typeof Sc.response.data)r=Sc.response.data;else if(Sc.response.data.message)r=Sc.response.data.message;else if(Sc.response.data.title)r=Sc.response.data.title;else if(Sc.response.data.errors){const t=Sc.response.data.errors;r=Object.values(t).flat().join(", ")}}else Sc.message&&(r=Sc.message);Ts.error(r)}finally{o(!1)}}),className:"p-6 space-y-6",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations Personnelles"}),(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Pr\xe9nom ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},g("firstName",{required:"Le pr\xe9nom est requis"})),{},{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),y.firstName&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.firstName.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nom ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"text"},g("lastName",{required:"Le nom est requis"})),{},{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),y.lastName&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.lastName.message})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(pi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"email"},g("email",{required:"L'email est requis",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Format d'email invalide"}})),{},{className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]}),y.email&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.email.message})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["T\xe9l\xe9phone ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Zw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:"tel"},g("phone",{required:"Le t\xe9l\xe9phone est requis"})),{},{className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]}),y.phone&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.phone.message})]})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations Professionnelles"}),(0,ju.jsxs)("div",{className:"space-y-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Type d'Administrateur ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("select",(0,s.A)((0,s.A)({},g("adminType",{required:"Le type est requis"})),{},{disabled:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-gray-100 text-gray-500 cursor-not-allowed",children:b.map(e=>(0,ju.jsx)("option",{value:e.value,children:e.label},e.value))}))]}),y.adminType&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.adminType.message}),(0,ju.jsxs)("p",{className:"text-xs text-amber-600 mt-1 flex items-center space-x-1",children:[(0,ju.jsx)(lm,{className:"h-3 w-3"}),(0,ju.jsx)("span",{children:"Le type d'administrateur ne peut pas \xeatre modifi\xe9 pour des raisons de s\xe9curit\xe9"})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"D\xe9partement/Service"}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(NA,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},g("department")),{},{className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner un d\xe9partement"}),["Direction G\xe9n\xe9rale","Op\xe9rations","Finance & Comptabilit\xe9","Ressources Humaines","Technologie","Marketing","Service Client","Audit & Conformit\xe9","Cr\xe9dit & Recouvrement"].map(e=>(0,ju.jsx)("option",{value:e,children:e},e))]}))]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Succursale ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",(0,s.A)((0,s.A)({},g("branchId",{valueAsNumber:!0,required:"La succursale est requise"})),{},{className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"",children:"S\xe9lectionner une succursale"}),c.map(e=>(0,ju.jsxs)("option",{value:e.id,children:[e.name," - ",e.commune||e.department]},e.id))]}))]}),y.branchId&&(0,ju.jsx)("p",{className:"text-red-600 text-sm mt-1",children:y.branchId.message})]})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ju.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Mot de Passe"}),(0,ju.jsxs)("button",{type:"button",onClick:()=>m(!u),className:"text-sm text-blue-600 hover:text-blue-700 flex items-center space-x-1",children:[(0,ju.jsx)(BT,{className:"h-4 w-4"}),(0,ju.jsx)("span",{children:u?"Annuler la r\xe9initialisation":"R\xe9initialiser le mot de passe"})]})]}),u&&(0,ju.jsxs)("div",{className:"space-y-4 bg-amber-50 border border-amber-200 rounded-lg p-4",children:[(0,ju.jsxs)("div",{className:"flex items-start space-x-2 mb-3",children:[(0,ju.jsx)(BT,{className:"h-5 w-5 text-amber-600 mt-0.5"}),(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-amber-900",children:"R\xe9initialisation du mot de passe"}),(0,ju.jsx)("p",{className:"text-xs text-amber-700 mt-1",children:"L'utilisateur devra utiliser ce nouveau mot de passe pour se connecter"})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nouveau mot de passe ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:h?"text":"password"},g("newPassword")),{},{placeholder:"Nouveau mot de passe",className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),(0,ju.jsx)("button",{type:"button",onClick:()=>p(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:h?(0,ju.jsx)(xi,{className:"h-5 w-5"}):(0,ju.jsx)(fi,{className:"h-5 w-5"})})]})]}),(0,ju.jsxs)("div",{children:[(0,ju.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Confirmer le mot de passe ",(0,ju.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)("input",(0,s.A)((0,s.A)({type:x?"text":"password"},g("confirmPassword")),{},{placeholder:"Confirmer le mot de passe",className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),(0,ju.jsx)("button",{type:"button",onClick:()=>f(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x?(0,ju.jsx)(xi,{className:"h-5 w-5"}):(0,ju.jsx)(fi,{className:"h-5 w-5"})})]})]})]}),(0,ju.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,ju.jsx)("h4",{className:"font-medium text-blue-900 text-sm mb-2",children:"Exigences du mot de passe:"}),(0,ju.jsxs)("ul",{className:"text-xs text-blue-700 space-y-1",children:[(0,ju.jsx)("li",{children:"\u2022 Au moins 8 caract\xe8res"}),(0,ju.jsx)("li",{children:"\u2022 Au moins une lettre majuscule"}),(0,ju.jsx)("li",{children:"\u2022 Au moins une lettre minuscule"}),(0,ju.jsx)("li",{children:"\u2022 Au moins un chiffre"}),(0,ju.jsx)("li",{children:"\u2022 Au moins un caract\xe8re sp\xe9cial (@$!%*?&)"})]})]})]})]}),(0,ju.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-200",children:[(0,ju.jsx)("button",{type:"button",onClick:i,disabled:l,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Annuler"}),(0,ju.jsx)("button",{type:"submit",disabled:l,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:l?(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,ju.jsx)("span",{children:"Enregistrement..."})]}):(0,ju.jsxs)(ju.Fragment,{children:[(0,ju.jsx)(lp,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Enregistrer"})]})})]})]})]})})};var GT=function(e){return e.CAISSIER="CAISSIER",e.SECRETAIRE_ADMINISTRATIF="SECRETAIRE_ADMINISTRATIF",e.AGENT_DE_CREDIT="AGENT_DE_CREDIT",e.CHEF_DE_SUCCURSALE="CHEF_DE_SUCCURSALE",e.DIRECTEUR_REGIONAL="DIRECTEUR_REGIONAL",e.ADMINISTRATEUR_SYSTEME="ADMINISTRATEUR_SYSTEME",e.DIRECTION_GENERALE="DIRECTION_GENERALE",e.COMPTABLE_FINANCE="COMPTABLE_FINANCE",e}(GT||{}),VT=function(e){return e.Active="ACTIVE",e.Inactive="INACTIVE",e.Suspended="SUSPENDED",e}(VT||{});const WT=()=>{const[t,r]=(0,e.useState)(!1),[n,a]=(0,e.useState)(!1),[i,l]=(0,e.useState)(null),[o,c]=(0,e.useState)(""),[d,u]=(0,e.useState)("all"),[m,h]=(0,e.useState)("all"),[p,x]=(0,e.useState)(null),[f,g]=(0,e.useState)(!1),[v,y]=(0,e.useState)(null),[b,N]=(0,e.useState)([]),[j,w]=(0,e.useState)([]),[S,A]=(0,e.useState)("all"),[T,C]=(0,e.useState)(1),[E,D]=(0,e.useState)(10);(0,e.useEffect)(()=>{R(),k()},[]);const k=async()=>{try{const e=await Ei.getAllBranches();w(e)}catch(Sc){console.error("Error loading branches:",Sc),Ts.error("Erreur lors du chargement des succursales")}},R=async()=>{g(!0);try{const e=(await Ei.getAllAdmins({page:1,pageSize:100})).admins.map(e=>{let t=GT.CAISSIER;if("string"===typeof e.adminType){switch(e.adminType.toUpperCase()){case"CAISSIER":t=GT.CAISSIER;break;case"SECRETAIRE_ADMINISTRATIF":t=GT.SECRETAIRE_ADMINISTRATIF;break;case"AGENT_DE_CREDIT":t=GT.AGENT_DE_CREDIT;break;case"CHEF_DE_SUCCURSALE":t=GT.CHEF_DE_SUCCURSALE;break;case"DIRECTEUR_REGIONAL":t=GT.DIRECTEUR_REGIONAL;break;case"ADMINISTRATEUR_SYSTEME":t=GT.ADMINISTRATEUR_SYSTEME;break;case"DIRECTION_GENERALE":t=GT.DIRECTION_GENERALE;break;case"COMPTABLE_FINANCE":t=GT.COMPTABLE_FINANCE;break;default:console.warn('Invalid adminType string "'.concat(e.adminType,'" for user ').concat(e.id,", defaulting to CAISSIER")),t=GT.CAISSIER}}else switch(e.adminType){case 0:t=GT.CAISSIER;break;case 1:t=GT.SECRETAIRE_ADMINISTRATIF;break;case 2:t=GT.AGENT_DE_CREDIT;break;case 3:t=GT.CHEF_DE_SUCCURSALE;break;case 4:t=GT.DIRECTEUR_REGIONAL;break;case 5:t=GT.ADMINISTRATEUR_SYSTEME;break;case 6:t=GT.DIRECTION_GENERALE;break;case 7:t=GT.COMPTABLE_FINANCE;break;default:console.warn("Invalid adminType number ".concat(e.adminType," for user ").concat(e.id,", defaulting to CAISSIER")),t=GT.CAISSIER}return{id:e.id,fullName:e.fullName,email:e.email,phone:e.phone||"-",adminType:t,department:e.department||"Non sp\xe9cifi\xe9",hireDate:e.hireDate,status:e.isActive?VT.Active:VT.Inactive,assignedBranches:e.assignedBranches||[],lastLogin:e.lastLogin}});N(e)}catch(Sc){console.error("Error loading accounts:",Sc),Ts.error("Erreur lors du chargement des comptes")}finally{g(!1)}},_=e=>({[GT.CAISSIER]:"Caissier",[GT.SECRETAIRE_ADMINISTRATIF]:"Secr\xe9taire Administratif",[GT.AGENT_DE_CREDIT]:"Agent de Cr\xe9dit",[GT.CHEF_DE_SUCCURSALE]:"Chef de Succursale",[GT.DIRECTEUR_REGIONAL]:"Directeur R\xe9gional",[GT.ADMINISTRATEUR_SYSTEME]:"Administrateur Syst\xe8me",[GT.DIRECTION_GENERALE]:"Direction G\xe9n\xe9rale",[GT.COMPTABLE_FINANCE]:"Comptable/Finance"}[e]),I=e=>{const t={[VT.Active]:{label:"Actif",class:"bg-green-100 text-green-800"},[VT.Inactive]:{label:"Inactif",class:"bg-gray-100 text-gray-800"},[VT.Suspended]:{label:"Suspendu",class:"bg-red-100 text-red-800"}},{label:r,class:n}=t[e];return(0,ju.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(n),children:r})},P=e=>{const t={[GT.CAISSIER]:{class:"bg-yellow-100 text-yellow-800"},[GT.SECRETAIRE_ADMINISTRATIF]:{class:"bg-pink-100 text-pink-800"},[GT.AGENT_DE_CREDIT]:{class:"bg-green-100 text-green-800"},[GT.CHEF_DE_SUCCURSALE]:{class:"bg-indigo-100 text-indigo-800"},[GT.DIRECTEUR_REGIONAL]:{class:"bg-blue-100 text-blue-800"},[GT.ADMINISTRATEUR_SYSTEME]:{class:"bg-purple-100 text-purple-800"},[GT.DIRECTION_GENERALE]:{class:"bg-red-100 text-red-800"},[GT.COMPTABLE_FINANCE]:{class:"bg-orange-100 text-orange-800"}};return(0,ju.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(t[e].class),children:_(e)})},O=e=>new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}),L=e=>new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),F=b.filter(e=>{const t=e.fullName.toLowerCase().includes(o.toLowerCase())||e.email.toLowerCase().includes(o.toLowerCase())||e.phone.includes(o)||e.department.toLowerCase().includes(o.toLowerCase()),r="all"===d||e.status===d,n="all"===m||e.adminType===m,s="all"===S||e.assignedBranches&&e.assignedBranches.some(e=>e===S);return t&&r&&n&&s}),M=F.length,U=Math.max(1,Math.ceil(M/E));(0,e.useEffect)(()=>{T>U&&C(U)},[U,T]);const B=F.slice((T-1)*E,T*E);return t?(0,ju.jsx)(UT,{onSuccess:()=>{r(!1),R(),Ts.success("Compte cr\xe9\xe9 avec succ\xe8s!")},onCancel:()=>r(!1)}):(0,ju.jsxs)(ju.Fragment,{children:[n&&i&&(0,ju.jsx)(zT,{userId:i.id,currentData:{fullName:i.fullName,email:i.email,phone:i.phone,department:i.department,adminType:i.adminType,hireDate:i.hireDate},onSuccess:()=>{a(!1),l(null),R()},onCancel:()=>{a(!1),l(null)}}),(0,ju.jsxs)("div",{className:"space-y-6",children:[(0,ju.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Comptes Administrateurs"}),(0,ju.jsx)("p",{className:"text-gray-600 mt-1",children:"G\xe9rez les acc\xe8s et permissions des utilisateurs du syst\xe8me"})]}),(0,ju.jsxs)("button",{onClick:()=>r(!0),className:"mt-4 sm:mt-0 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,ju.jsx)(Au,{className:"h-5 w-5"}),(0,ju.jsx)("span",{children:"Nouveau Compte"})]})]}),(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Comptes"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:b.length})]}),(0,ju.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,ju.jsx)(Ru,{className:"h-6 w-6 text-blue-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Actifs"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-green-600",children:b.filter(e=>e.status===VT.Active).length})]}),(0,ju.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,ju.jsx)(Iw,{className:"h-6 w-6 text-green-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Inactifs"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-gray-600",children:b.filter(e=>e.status===VT.Inactive).length})]}),(0,ju.jsx)("div",{className:"p-3 bg-gray-100 rounded-full",children:(0,ju.jsx)(hi,{className:"h-6 w-6 text-gray-600"})})]})}),(0,ju.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{children:[(0,ju.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Direction G\xe9n\xe9rale"}),(0,ju.jsx)("p",{className:"text-2xl font-bold text-red-600",children:b.filter(e=>e.adminType===GT.DIRECTION_GENERALE).length})]}),(0,ju.jsx)("div",{className:"p-3 bg-red-100 rounded-full",children:(0,ju.jsx)(lm,{className:"h-6 w-6 text-red-600"})})]})})]}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,ju.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email, t\xe9l\xe9phone...",value:o,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(hm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,ju.jsx)("option",{value:VT.Active,children:"Actifs"}),(0,ju.jsx)("option",{value:VT.Inactive,children:"Inactifs"}),(0,ju.jsx)("option",{value:VT.Suspended,children:"Suspendus"})]})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",{value:m,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"all",children:"Tous les types"}),(0,ju.jsx)("option",{value:GT.CAISSIER,children:"Caissier"}),(0,ju.jsx)("option",{value:GT.SECRETAIRE_ADMINISTRATIF,children:"Secr\xe9taire Administratif"}),(0,ju.jsx)("option",{value:GT.AGENT_DE_CREDIT,children:"Agent de Cr\xe9dit"}),(0,ju.jsx)("option",{value:GT.CHEF_DE_SUCCURSALE,children:"Chef de Succursale"}),(0,ju.jsx)("option",{value:GT.DIRECTEUR_REGIONAL,children:"Directeur R\xe9gional"}),(0,ju.jsx)("option",{value:GT.ADMINISTRATEUR_SYSTEME,children:"Administrateur Syst\xe8me"}),(0,ju.jsx)("option",{value:GT.DIRECTION_GENERALE,children:"Direction G\xe9n\xe9rale"}),(0,ju.jsx)("option",{value:GT.COMPTABLE_FINANCE,children:"Comptable/Finance"})]})]}),(0,ju.jsxs)("div",{className:"relative",children:[(0,ju.jsx)(hm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,ju.jsxs)("select",{value:S,onChange:e=>A(e.target.value),className:"w-full pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,ju.jsx)("option",{value:"all",children:"Toutes les succursales"}),j.map(e=>(0,ju.jsx)("option",{value:e.name,children:e.name},e.id))]})]})]})}),(0,ju.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ju.jsxs)("button",{onClick:()=>{try{if(!F||0===F.length)return void Ts.error("Aucune donn\xe9e administrateur \xe0 exporter");const e=F.map(e=>({"Nom complet":e.fullName||"",Email:e.email||"","T\xe9l\xe9phone":e.phone||"","Type d'administrateur":_(e.adminType)||"","D\xe9partement":e.department||"","Date d'embauche":e.hireDate?O(e.hireDate):"",Statut:e.status===VT.Active?"Actif":e.status===VT.Inactive?"Inactif":"Suspendu","Succursales assign\xe9es":e.assignedBranches?e.assignedBranches.join("; "):"","Derni\xe8re connexion":e.lastLogin?L(e.lastLogin):""})),t=(0,Rp.unparse)(e,{delimiter:";",header:!0}),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),s=URL.createObjectURL(r);n.setAttribute("href",s),n.setAttribute("download","comptes-administrateurs-".concat((new Date).toISOString().split("T")[0],".csv")),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),Ts.success("Export CSV r\xe9ussi")}catch(Sc){console.error("Erreur lors de l'export CSV:",Sc),Ts.error("Erreur lors de l'export CSV")}},className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",disabled:!F||0===F.length,children:[(0,ju.jsx)(zu,{className:"h-4 w-4"}),(0,ju.jsx)("span",{children:"Exporter CSV"})]}),(0,ju.jsxs)("button",{onClick:()=>{try{if(!F||0===F.length)return void Ts.error("Aucune donn\xe9e administrateur \xe0 exporter");const e=window.open("","_blank");if(!e)return void Ts.error("Veuillez autoriser les pop-ups pour exporter en PDF");const t='\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <meta charset="UTF-8">\n          <title>Liste des Comptes Administrateurs - Kredi Ti Machann</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              padding: 20px;\n              line-height: 1.4;\n              color: #333;\n            }\n            .header {\n              text-align: center;\n              margin-bottom: 30px;\n              border-bottom: 3px solid #2563eb;\n              padding-bottom: 20px;\n            }\n            .header h1 {\n              color: #2563eb;\n              margin: 0;\n              font-size: 24px;\n            }\n            .header p {\n              color: #666;\n              margin: 5px 0;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              margin-top: 20px;\n              font-size: 12px;\n            }\n            th, td {\n              border: 1px solid #ddd;\n              padding: 8px;\n              text-align: left;\n              vertical-align: top;\n            }\n            th {\n              background-color: #2563eb;\n              color: white;\n              font-weight: bold;\n            }\n            tr:nth-child(even) {\n              background-color: #f9fafb;\n            }\n            .footer {\n              margin-top: 30px;\n              text-align: center;\n              color: #666;\n              font-size: 10px;\n              border-top: 1px solid #ddd;\n              padding-top: 20px;\n            }\n            .status-active {\n              color: #059669;\n              font-weight: bold;\n            }\n            .status-inactive {\n              color: #6b7280;\n              font-weight: bold;\n            }\n            .status-suspended {\n              color: #d97706;\n              font-weight: bold;\n            }\n            @media print {\n              body { padding: 10px; }\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <h1>LISTE DES COMPTES ADMINISTRATEURS</h1>\n            <p>Kredi Ti Machann - Syst\xe8me de Micro-cr\xe9dit</p>\n            <p>Date d\'\xe9mission: '.concat((new Date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),"</p>\n            <p>Total des comptes: ").concat(F.length,"</p>\n          </div>\n\n          <table>\n            <thead>\n              <tr>\n                <th>Nom complet</th>\n                <th>Type</th>\n                <th>Email</th>\n                <th>T\xe9l\xe9phone</th>\n                <th>D\xe9partement</th>\n                <th>Statut</th>\n                <th>Succursales</th>\n              </tr>\n            </thead>\n            <tbody>\n              ").concat(F.map(e=>"\n                <tr>\n                  <td><strong>".concat(e.fullName||"","</strong></td>\n                  <td>").concat(_(e.adminType)||"","</td>\n                  <td>").concat(e.email||"","</td>\n                  <td>").concat(e.phone||"","</td>\n                  <td>").concat(e.department||"",'</td>\n                  <td>\n                    <span class="').concat(e.status===VT.Active?"status-active":e.status===VT.Inactive?"status-inactive":"status-suspended",'">\n                      ').concat(e.status===VT.Active?"Actif":e.status===VT.Inactive?"Inactif":"Suspendu","\n                    </span>\n                  </td>\n                  <td>").concat(e.assignedBranches?e.assignedBranches.join(", "):"Aucune","</td>\n                </tr>\n              ")).join(""),'\n            </tbody>\n          </table>\n\n          <div class="footer">\n            <p><strong>Kredi Ti Machann</strong> - Syst\xe8me de Micro-cr\xe9dit pour Ha\xefti</p>\n            <p>Document g\xe9n\xe9r\xe9 automatiquement le ').concat((new Date).toLocaleString("fr-FR"),'</p>\n            <p class="no-print">\n              <button onclick="window.print()" style="\n                background: #2563eb;\n                color: white;\n                padding: 10px 20px;\n                border: none;\n                border-radius: 5px;\n                cursor: pointer;\n                font-size: 14px;\n                margin-top: 10px;\n              ">\ud83d\udda8\ufe0f Imprimer / Enregistrer en PDF</button>\n            </p>\n          </div>\n        </body>\n        </html>\n      ');e.document.write(t),e.document.close(),e.onload=()=>{setTimeout(()=>{e.focus(),Ts.success("Fen\xeatre d'export PDF ouverte - Utilisez Ctrl+P ou le bouton Imprimer")},250)}}catch(Sc){console.error("Erreur lors de l'export PDF:",Sc),Ts.error("Erreur lors de l'export PDF")}},className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",disabled:!F||0===F.length,children:[(0,ju.jsx)(Hu,{className:"h-4 w-4"}),(0,ju.jsx)("span",{children:"Exporter PDF"})]})]}),(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:[M," compte(s) trouv\xe9(s)"]})]}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:0===M?(0,ju.jsxs)("div",{className:"text-center py-12",children:[(0,ju.jsx)(Ru,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,ju.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucun compte trouv\xe9"}),(0,ju.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:o||"all"!==d||"all"!==m||"all"!==S?"Essayez de modifier vos crit\xe8res de recherche.":"Commencez par cr\xe9er un nouveau compte administrateur."})]}):(0,ju.jsx)("div",{className:"overflow-x-auto",children:(0,ju.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ju.jsx)("thead",{className:"bg-gray-50",children:(0,ju.jsxs)("tr",{children:[(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Administrateur"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type / D\xe9partement"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Succursale"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Embauche / Derni\xe8re connexion"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,ju.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ju.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(e=>(0,ju.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"flex items-center",children:[(0,ju.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,ju.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,ju.jsx)("span",{className:"text-blue-600 font-medium text-sm",children:e.fullName.split(" ").map(e=>e[0]).join("").slice(0,2)})})}),(0,ju.jsx)("div",{className:"ml-4",children:(0,ju.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.fullName})})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"space-y-1",children:[P(e.adminType),(0,ju.jsx)("div",{className:"text-xs text-gray-500",children:e.department})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsx)("div",{className:"text-sm text-gray-900",children:e.assignedBranches&&e.assignedBranches.length>0?e.assignedBranches.join(", "):"Aucune succursale"})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"space-y-1",children:[(0,ju.jsxs)("div",{className:"text-sm text-gray-900 flex items-center",children:[(0,ju.jsx)(pi,{className:"h-3 w-3 mr-1 text-gray-400"}),e.email]}),(0,ju.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,ju.jsx)(Zw,{className:"h-3 w-3 mr-1 text-gray-400"}),e.phone]})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ju.jsxs)("div",{className:"space-y-1",children:[(0,ju.jsxs)("div",{className:"text-sm text-gray-900 flex items-center",children:[(0,ju.jsx)(pm,{className:"h-3 w-3 mr-1 text-gray-400"}),O(e.hireDate)]}),e.lastLogin&&(0,ju.jsxs)("div",{className:"text-xs text-gray-500",children:["Connexion: ",L(e.lastLogin)]})]})}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:I(e.status)}),(0,ju.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,ju.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,ju.jsx)("button",{onClick:()=>(async e=>{const t=b.find(t=>t.id===e);if(t&&!v)try{y(e);const r=t.status!==VT.Active;await Ei.updateUserStatus(e,r),N(t=>t.map(t=>t.id===e?(0,s.A)((0,s.A)({},t),{},{status:r?VT.Active:VT.Inactive}):t)),Ts.success("Compte ".concat(r?"activ\xe9":"d\xe9sactiv\xe9"," avec succ\xe8s"))}catch(Sc){var r,n;console.error("Error toggling user status:",Sc);const t=(null===(r=Sc.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||Sc.message||"Erreur lors de la modification du statut";Ts.error(t)}finally{y(null)}})(e.id),disabled:v===e.id||e.status===VT.Suspended,className:"p-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed ".concat(e.status===VT.Active?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-green-100 text-green-600 hover:bg-green-200"),title:e.status===VT.Suspended?"Impossible de basculer un compte suspendu":e.status===VT.Active?"D\xe9sactiver":"Activer",children:v===e.id?(0,ju.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):e.status===VT.Active?(0,ju.jsx)(hi,{className:"h-4 w-4"}):(0,ju.jsx)(Iw,{className:"h-4 w-4"})}),(0,ju.jsx)("button",{onClick:()=>(e=>{const t=b.find(t=>t.id===e);t&&(l(t),a(!0))})(e.id),disabled:null!==v,className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Modifier",children:(0,ju.jsx)(Wu,{className:"h-4 w-4"})}),(0,ju.jsx)("button",{onClick:()=>(async e=>{const t=b.find(t=>t.id===e);if(t)if(t.adminType!==GT.DIRECTION_GENERALE&&t.adminType!==GT.ADMINISTRATEUR_SYSTEME){if(!v&&window.confirm("\xcates-vous s\xfbr de vouloir supprimer le compte de ".concat(t.fullName,"? Cette action est irr\xe9versible.")))try{y(e),await Ei.deleteUser(e),N(t=>t.filter(t=>t.id!==e)),Ts.success("Compte supprim\xe9 avec succ\xe8s")}catch(Sc){var r,n;console.error("Error deleting user:",Sc);const t=(null===(r=Sc.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||Sc.message||"Erreur lors de la suppression du compte";Ts.error(t)}finally{y(null)}}else Ts.error("Impossible de supprimer un compte Direction G\xe9n\xe9rale ou Administrateur Syst\xe8me")})(e.id),disabled:e.adminType===GT.DIRECTION_GENERALE||e.adminType===GT.ADMINISTRATEUR_SYSTEME||null!==v,className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.adminType===GT.DIRECTION_GENERALE||e.adminType===GT.ADMINISTRATEUR_SYSTEME?"Impossible de supprimer Direction G\xe9n\xe9rale ou Administrateur Syst\xe8me":"Supprimer",children:(0,ju.jsx)(bm,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),M>0&&(0,ju.jsx)("div",{className:"mt-3 bg-white rounded-md border border-gray-200",children:(0,ju.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,ju.jsxs)("div",{className:"text-sm text-gray-600",children:["Affichage ",Math.min((T-1)*E+1,M),"\u2013",Math.min(T*E,M)," de ",M," comptes"]}),(0,ju.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ju.jsx)("label",{className:"text-sm text-gray-600",children:"Afficher"}),(0,ju.jsxs)("select",{value:E,onChange:e=>{D(Number(e.target.value)),C(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:[(0,ju.jsx)("option",{value:5,children:"5"}),(0,ju.jsx)("option",{value:10,children:"10"}),(0,ju.jsx)("option",{value:25,children:"25"}),(0,ju.jsx)("option",{value:50,children:"50"})]}),(0,ju.jsx)("button",{onClick:()=>C(e=>Math.max(1,e-1)),disabled:T<=1,className:"px-3 py-1 bg-gray-100 text-sm rounded-md disabled:opacity-50",children:"Pr\xe9c"}),(0,ju.jsxs)("div",{className:"text-sm text-gray-700",children:[T," / ",U]}),(0,ju.jsx)("button",{onClick:()=>C(e=>Math.min(U,e+1)),disabled:T>=U,className:"px-3 py-1 bg-gray-100 text-sm rounded-md disabled:opacity-50",children:"Suiv"})]})]})})]})]})},qT=["uploadedFiles","signature"],$T=e=>{if(!e)return 0;const t=e.toLowerCase();return"male"===t||"gason"===t||"m"===t?0:1},KT=e=>{if(!e)return Im.CIN;switch(e.toUpperCase()){case"PASSPORT":return Im.Passport;case"DRIVING_LICENSE":return Im.DrivingLicense;case"BIRTH_CERTIFICATE":return Im.BirthCertificate;default:return Im.CIN}},XT=e=>e?e.replace(/\s|\-/g,""):void 0,YT=()=>{const t=_r(),r=kr(),[n,a]=(0,e.useState)(!1);return(0,ju.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,ju.jsxs)("div",{className:"mb-6",children:[(0,ju.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Cr\xe9er un Nouveau Client"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"Renseignez les informations du client puis validez."})]}),(0,ju.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:(0,ju.jsx)(Bm,{onSubmit:async e=>{try{a(!0);const{uploadedFiles:n,signature:i}=e,l=xt(e,qT),d=(0,s.A)((0,s.A)({firstName:(null===l||void 0===l?void 0:l.firstName)||(null===l||void 0===l?void 0:l.legalRepresentativeFirstName)||"",lastName:(null===l||void 0===l?void 0:l.lastName)||(null===l||void 0===l?void 0:l.legalRepresentativeLastName)||"",dateOfBirth:(null===l||void 0===l?void 0:l.dateOfBirth)||"1900-01-01",gender:$T((null===l||void 0===l?void 0:l.gender)||"M"),street:(null===l||void 0===l?void 0:l.street)||"",commune:(null===l||void 0===l?void 0:l.commune)||"",department:(null===l||void 0===l?void 0:l.department)||"",postalCode:(null===l||void 0===l?void 0:l.postalCode)||void 0,primaryPhone:XT((null===l||void 0===l?void 0:l.primaryPhone)||(null===l||void 0===l?void 0:l.companyPhone))||"",secondaryPhone:XT(null===l||void 0===l?void 0:l.secondaryPhone),email:(null===l||void 0===l?void 0:l.email)||(null===l||void 0===l?void 0:l.companyEmail)||void 0,emergencyContactName:(null===l||void 0===l?void 0:l.emergencyContactName)||void 0,emergencyContactPhone:XT(null===l||void 0===l?void 0:l.emergencyContactPhone),documentType:KT((null===l||void 0===l?void 0:l.documentType)||(null===l||void 0===l?void 0:l.legalRepresentativeDocumentType)),documentNumber:(null===l||void 0===l?void 0:l.documentNumber)||(null===l||void 0===l?void 0:l.legalRepresentativeDocumentNumber)||"",issuedDate:(null===l||void 0===l?void 0:l.issuedDate)||(null===l||void 0===l?void 0:l.legalRepresentativeIssuedDate)||"",expiryDate:(null===l||void 0===l?void 0:l.expiryDate)||(null===l||void 0===l?void 0:l.legalRepresentativeExpiryDate)||void 0,issuingAuthority:(null===l||void 0===l?void 0:l.issuingAuthority)||(null===l||void 0===l?void 0:l.legalRepresentativeIssuingAuthority)||"Kredi Ti Machann",occupation:(null===l||void 0===l?void 0:l.occupation)||void 0,monthlyIncome:null!==l&&void 0!==l&&l.monthlyIncome?parseFloat(l.monthlyIncome):void 0,isBusiness:(null===l||void 0===l?void 0:l.isBusiness)||!1},(null===l||void 0===l?void 0:l.isBusiness)&&{companyName:(null===l||void 0===l?void 0:l.companyName)||"",legalForm:(null===l||void 0===l?void 0:l.legalForm)||"",tradeRegisterNumber:(null===l||void 0===l?void 0:l.tradeRegisterNumber)||"",taxId:(null===l||void 0===l?void 0:l.taxId)||"",headOfficeAddress:(null===l||void 0===l?void 0:l.headOfficeAddress)||"",companyPhone:XT(null===l||void 0===l?void 0:l.companyPhone),companyEmail:(null===l||void 0===l?void 0:l.companyEmail)||void 0,representativeFirstName:(null===l||void 0===l?void 0:l.legalRepresentativeFirstName)||"",representativeLastName:(null===l||void 0===l?void 0:l.legalRepresentativeLastName)||"",representativeTitle:(null===l||void 0===l?void 0:l.legalRepresentativeTitle)||"",representativeDocumentType:KT(null===l||void 0===l?void 0:l.legalRepresentativeDocumentType),representativeDocumentNumber:(null===l||void 0===l?void 0:l.legalRepresentativeDocumentNumber)||"",representativeIssuedDate:(null===l||void 0===l?void 0:l.legalRepresentativeIssuedDate)||"",representativeExpiryDate:(null===l||void 0===l?void 0:l.legalRepresentativeExpiryDate)||void 0,representativeIssuingAuthority:(null===l||void 0===l?void 0:l.legalRepresentativeIssuingAuthority)||""}),{},{birthPlace:(null===l||void 0===l?void 0:l.birthPlace)||void 0,nationality:(null===l||void 0===l?void 0:l.nationality)||"Ha\xeftienne",personalNif:(null===l||void 0===l?void 0:l.nif)||void 0,employerName:(null===l||void 0===l?void 0:l.employerName)||void 0,workAddress:(null===l||void 0===l?void 0:l.workAddress)||void 0,incomeSource:(null===l||void 0===l?void 0:l.incomeSource)||void 0,maritalStatus:(null===l||void 0===l?void 0:l.maritalStatus)||void 0,numberOfDependents:(null===l||void 0===l?void 0:l.numberOfDependents)||void 0,educationLevel:(null===l||void 0===l?void 0:l.educationLevel)||void 0,acceptTerms:(null===l||void 0===l?void 0:l.acceptTerms)||!1,signaturePlace:(null===l||void 0===l?void 0:l.signaturePlace)||void 0,signatureDate:(null===l||void 0===l?void 0:l.signatureDate)||void 0,referencePersonName:(null===l||void 0===l?void 0:l.referencePerson)||void 0,referencePersonPhone:XT(null===l||void 0===l?void 0:l.referencePersonPhone)});console.log("Client creation DTO:",d);const u=await Fm.createCustomer(d),m=u.id,h=(null===u||void 0===u?void 0:u.fullName)||"".concat((null===u||void 0===u?void 0:u.firstName)||""," ").concat((null===u||void 0===u?void 0:u.lastName)||"").trim();if(n)try{if(n.photo&&(await Fm.uploadFile(n.photo,m,"photo"),console.log("Photo uploaded successfully")),n.idDocument&&(await Fm.uploadDocument(m,n.idDocument,0,"Pi\xe8ce d'identit\xe9","Document d'identit\xe9 du client"),console.log("ID document uploaded successfully")),n.proofOfResidence&&(await Fm.uploadDocument(m,n.proofOfResidence,1,"Justificatif de domicile","Preuve de r\xe9sidence"),console.log("Proof of residence uploaded successfully")),n.businessRegistrationDocument&&(await Fm.uploadDocument(m,n.businessRegistrationDocument,4,"Registre de commerce","Extrait du registre de commerce"),console.log("Business registration document uploaded successfully")),n.companyProofOfAddress&&(await Fm.uploadDocument(m,n.companyProofOfAddress,1,"Justificatif domicile soci\xe9t\xe9","Preuve d'adresse de l'entreprise"),console.log("Company proof of address uploaded successfully")),n.fundsOriginDeclaration&&(await Fm.uploadDocument(m,n.fundsOriginDeclaration,4,"D\xe9claration origine fonds","D\xe9claration d'origine des fonds"),console.log("Funds origin declaration uploaded successfully")),n.otherDocuments&&n.otherDocuments.length>0){for(let e=0;e<n.otherDocuments.length;e++){const t=n.otherDocuments[e];await Fm.uploadDocument(m,t,4,"Document suppl\xe9mentaire ".concat(e+1),"Document suppl\xe9mentaire")}console.log("Other documents uploaded successfully")}}catch(o){console.error("Error uploading files:",o),Ts.error("Client cr\xe9\xe9 mais erreur lors de l'upload des fichiers")}if(i)try{await Fm.saveSignature(m,i),console.log("Signature saved successfully")}catch(c){console.error("Error saving signature:",c),Ts.error("Client cr\xe9\xe9 mais erreur lors de la sauvegarde de la signature")}Ts.success("Client ".concat(h||""," cr\xe9\xe9 avec succ\xe8s!"));const p=new URLSearchParams(r.search).get("from");return t("current-accounts"===p?"/current-accounts?tab=clients":"client-accounts"===p?"/client-accounts":"/current-accounts?tab=clients",{replace:!0}),u}catch(d){var n,i,l;const e=null===d||void 0===d||null===(n=d.response)||void 0===n?void 0:n.status;throw 401===e?Ts.error("Session expir\xe9e. Veuillez vous reconnecter."):403===e?Ts.error("Acc\xe8s refus\xe9 (403)."):Ts.error((null===d||void 0===d||null===(i=d.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.message)||(null===d||void 0===d?void 0:d.message)||"Erreur lors de la cr\xe9ation du client"),console.error("Client creation error:",d),d}finally{a(!1)}},onCancel:()=>{const e=new URLSearchParams(r.search).get("from");t("current-accounts"===e?"/current-accounts?tab=clients":"client-accounts"===e?"/client-accounts":-1)},isLoading:n})})]})},JT=()=>{const e=Nm(e=>e.globalLoading);return e?(0,ju.jsx)("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black bg-opacity-40",children:(0,ju.jsxs)("div",{className:"flex flex-col items-center bg-white rounded-lg p-6 shadow-lg",children:[(0,ju.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary-600 mb-3"}),(0,ju.jsx)("p",{className:"text-gray-700 text-sm",children:"Chargement..."})]})}):null};r(3876);const ZT="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;const QT={componentStack:null,error:null,eventId:null};class eC extends e.Component{constructor(e){super(e),eC.prototype.__init.call(this),this.state=QT,this._openFallbackReportDialog=!0;const t=(0,g.KU)();t&&t.on&&e.showDialog&&(this._openFallbackReportDialog=!1,t.on("afterSendEvent",t=>{t.type||t.event_id!==this._lastEventId||ct((0,s.A)((0,s.A)({},e.dialogOptions),{},{eventId:this._lastEventId}))}))}componentDidCatch(t,r){let{componentStack:n}=r;const{beforeCapture:a,onError:i,showDialog:l,dialogOptions:o}=this.props;(0,g.v4)(r=>{if(function(e){const t=e.match(/^([^.]+)/);return null!==t&&parseInt(t[0])>=17}(e.version)&&(0,U.bJ)(t)){const e=new Error(t.message);e.name="React ErrorBoundary ".concat(t.name),e.stack=n,function(e,t){const r=new WeakMap;!function e(t,n){if(!r.has(t))return t.cause?(r.set(t,!0),e(t.cause,n)):void(t.cause=n)}(e,t)}(t,e)}a&&a(r,t,n);const c=(0,g.Cp)(t,{captureContext:{contexts:{react:{componentStack:n}}},mechanism:{handled:!!this.props.fallback}});i&&i(t,n,c),l&&(this._lastEventId=c,this._openFallbackReportDialog&&ct((0,s.A)((0,s.A)({},o),{},{eventId:c}))),this.setState({error:t,componentStack:n,eventId:c})})}componentDidMount(){const{onMount:e}=this.props;e&&e()}componentWillUnmount(){const{error:e,componentStack:t,eventId:r}=this.state,{onUnmount:n}=this.props;n&&n(e,t,r)}__init(){this.resetErrorBoundary=()=>{const{onReset:e}=this.props,{error:t,componentStack:r,eventId:n}=this.state;e&&e(t,r,n),this.setState(QT)}}render(){const{fallback:t,children:r}=this.props,n=this.state;if(n.error){let r;return r="function"===typeof t?t({error:n.error,componentStack:n.componentStack,resetError:this.resetErrorBoundary,eventId:n.eventId}):t,e.isValidElement(r)?r:(t&&ZT&&a.vF.warn("fallback did not produce a valid ReactElement"),null)}return"function"===typeof r?r():r}}const tC=e=>{let{error:t}=e;return(0,ju.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-6",children:(0,ju.jsxs)("div",{className:"max-w-lg w-full bg-white border border-gray-200 rounded-xl p-6 text-center",children:[(0,ju.jsx)("h1",{className:"text-xl font-semibold text-red-600 mb-2",children:"Yon er\xe8 rive nan aplikasyon an"}),(0,ju.jsx)("p",{className:"text-gray-700 mb-4",children:"Tanpri rafrechi paj la. Si pwobl\xe8m nan p\xe8siste, kontakte sip\xf2."}),t&&(0,ju.jsx)("pre",{className:"text-xs text-gray-500 bg-gray-50 p-3 rounded-md overflow-auto max-h-40",children:t.message}),(0,ju.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Rafrechi paj la"})]})})},rC=e=>{let{children:t}=e;return(0,ju.jsx)(eC,{fallback:e=>{let{error:t}=e;return(0,ju.jsx)(tC,{error:t})},children:t})};const nC=function(){var t,r;const n=rm(e=>e.user),s=rm(e=>e.loading),a=rm(e=>e.setAuth),i=rm(e=>e.clearAuth),l=rm(e=>e.hydrate);(0,e.useEffect)(()=>{l()},[]);const o=async()=>{try{await Di.logout()}catch(Sc){console.error("Logout error:",Sc)}finally{i()}};return s?(0,ju.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,ju.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(0,ju.jsx)(nn,{children:(0,ju.jsx)(rC,{children:(0,ju.jsxs)("div",{className:"App",children:[(0,ju.jsx)(As,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{style:{background:"#22c55e"}},error:{style:{background:"#ef4444"}}}}),(0,ju.jsx)(JT,{}),(0,ju.jsxs)(Yr,{children:[(0,ju.jsx)(Kr,{path:"/login",element:n?(0,ju.jsx)($r,{to:"/dashboard",replace:!0}):(0,ju.jsx)(wu,{onLogin:(e,t)=>{a(e,t)}})}),(0,ju.jsx)(Kr,{path:"/dashboard",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(e=>{switch(console.log("User role:",e,"Type:",typeof e),e){case"Cashier":return(0,ju.jsx)(Uu,{});case"Secretary":case"AdministrativeSecretary":return(0,ju.jsx)(qu,{});case"CreditAgent":return(0,ju.jsx)($u,{});case"BranchSupervisor":return(0,ju.jsx)(nm,{});case"RegionalManager":return(0,ju.jsx)(sm,{});case"SystemAdmin":return(0,ju.jsx)(am,{});case"Accounting":case"Management":return(0,ju.jsx)(im,{});case"SuperAdmin":return(0,ju.jsx)(WA,{});default:return(0,ju.jsxs)("div",{className:"text-center p-8",children:[(0,ju.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"R\xf4le non reconnu"}),(0,ju.jsxs)("p",{className:"text-gray-600",children:['R\xf4le re\xe7u: "',e,'"']}),(0,ju.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Veuillez contacter l'administrateur syst\xe8me."})]})}})(n.role)}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/payroll",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(oT,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/payroll/employees",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(rT,{branchId:null===(t=n.branchId)||void 0===t?void 0:t.toString()})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/currency-exchange/rates",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(fT,{branchId:null===(r=n.branchId)||void 0===r?void 0:r.toString()})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/branches",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(wT,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/transfers",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(DT,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/transfers/reports",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(kT,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/savings",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(IT,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/client-accounts",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(Pp,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/current-accounts",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(qw,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/term-savings",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(eA,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/current-accounts/transactions",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(LT,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/current-accounts/reports",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(Vw,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/transactions",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(LT,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/reports",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(Vw,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/loans",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(VA,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/microfinance",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(VA,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/admin/accounts",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(WT,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/clients/new",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsx)(YT,{})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/settings",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsxs)("div",{className:"text-center p-8",children:[(0,ju.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Param\xe8tres du Syst\xe8me"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"Les param\xe8tres de configuration seront bient\xf4t disponibles."})]})}):(0,ju.jsx)($r,{to:"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"/",element:(0,ju.jsx)($r,{to:n?"/dashboard":"/login",replace:!0})}),(0,ju.jsx)(Kr,{path:"*",element:n?(0,ju.jsx)(XA,{user:n,onLogout:o,children:(0,ju.jsxs)("div",{className:"text-center p-8",children:[(0,ju.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Page non trouv\xe9e"}),(0,ju.jsx)("p",{className:"text-gray-600",children:"La page que vous recherchez n'existe pas."})]})}):(0,ju.jsx)($r,{to:"/login",replace:!0})})]})]})})})};if("undefined"!==typeof window){const e=["ResizeObserver loop limit exceeded","ResizeObserver loop completed with undelivered notifications."];window.addEventListener("error",t=>{const r=t.message||"";e.some(e=>r.includes(e))&&(t.stopImmediatePropagation(),t.preventDefault())}),window.addEventListener("unhandledrejection",t=>{const r=t.reason,n=r&&"object"===typeof r&&r.message||("string"===typeof r?r:"")||"";e.some(e=>"string"===typeof n&&n.includes(e))&&(t.stopImmediatePropagation(),t.preventDefault())})}n.createRoot(document.getElementById("root")).render((0,ju.jsx)(nC,{}))})()})();