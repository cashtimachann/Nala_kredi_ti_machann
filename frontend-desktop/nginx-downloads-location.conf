# Configuration pour servir les téléchargements de l'application desktop
# Configuration pou sèvi téléchajman desktop app

location /downloads {
    alias /var/www/downloads;
    autoindex on;
    autoindex_exact_size off;
    autoindex_localtime on;
    
    # Permettre le téléchargement de gros fichiers
    # Allow downloading large files
    client_max_body_size 200M;
    
    # Headers CORS pour version.json
    # CORS headers for version.json
    location ~* \.json$ {
        add_header Access-Control-Allow-Origin "*" always;
        add_header Access-Control-Allow-Methods "GET, OPTIONS" always;
        add_header Access-Control-Allow-Headers "Content-Type" always;
        add_header Content-Type "application/json; charset=utf-8";
    }
    
    # Headers pour fichiers exécutables
    # Headers for executable files
    location ~* \.(exe|msi|zip)$ {
        add_header Content-Disposition "attachment";
        add_header X-Content-Type-Options "nosniff";
    }
}
